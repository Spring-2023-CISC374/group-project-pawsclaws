var zx=Object.defineProperty;var Vx=(i,t,s)=>t in i?zx(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var ft=(i,t,s)=>(Vx(i,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))g(C);new MutationObserver(C=>{for(const M of C)if(M.type==="childList")for(const o of M.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&g(o)}).observe(document,{childList:!0,subtree:!0});function s(C){const M={};return C.integrity&&(M.integrity=C.integrity),C.referrerpolicy&&(M.referrerPolicy=C.referrerpolicy),C.crossorigin==="use-credentials"?M.credentials="include":C.crossorigin==="anonymous"?M.credentials="omit":M.credentials="same-origin",M}function g(C){if(C.ep)return;C.ep=!0;const M=s(C);fetch(C.href,M)}})();var Ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lp={exports:{}};(function(i,t){(function(g,C){i.exports=C()})(Ux,()=>(()=>{var s={6659:o=>{var T=Object.prototype.hasOwnProperty,e="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(e=!1));function x(n,r,f){this.fn=n,this.context=r,this.once=f||!1}function u(n,r,f,a,c){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new x(f,a||n,c),v=e?e+r:r;return n._events[v]?n._events[v].fn?n._events[v]=[n._events[v],p]:n._events[v].push(p):(n._events[v]=p,n._eventsCount++),n}function l(n,r){--n._eventsCount===0?n._events=new d:delete n._events[r]}function h(){this._events=new d,this._eventsCount=0}h.prototype.eventNames=function(){var r=[],f,a;if(this._eventsCount===0)return r;for(a in f=this._events)T.call(f,a)&&r.push(e?a.slice(1):a);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(f)):r},h.prototype.listeners=function(r){var f=e?e+r:r,a=this._events[f];if(!a)return[];if(a.fn)return[a.fn];for(var c=0,p=a.length,v=new Array(p);c<p;c++)v[c]=a[c].fn;return v},h.prototype.listenerCount=function(r){var f=e?e+r:r,a=this._events[f];return a?a.fn?1:a.length:0},h.prototype.emit=function(r,f,a,c,p,v){var m=e?e+r:r;if(!this._events[m])return!1;var y=this._events[m],E=arguments.length,P,S;if(y.fn){switch(y.once&&this.removeListener(r,y.fn,void 0,!0),E){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,a),!0;case 4:return y.fn.call(y.context,f,a,c),!0;case 5:return y.fn.call(y.context,f,a,c,p),!0;case 6:return y.fn.call(y.context,f,a,c,p,v),!0}for(S=1,P=new Array(E-1);S<E;S++)P[S-1]=arguments[S];y.fn.apply(y.context,P)}else{var w=y.length,A;for(S=0;S<w;S++)switch(y[S].once&&this.removeListener(r,y[S].fn,void 0,!0),E){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,f);break;case 3:y[S].fn.call(y[S].context,f,a);break;case 4:y[S].fn.call(y[S].context,f,a,c);break;default:if(!P)for(A=1,P=new Array(E-1);A<E;A++)P[A-1]=arguments[A];y[S].fn.apply(y[S].context,P)}}return!0},h.prototype.on=function(r,f,a){return u(this,r,f,a,!1)},h.prototype.once=function(r,f,a){return u(this,r,f,a,!0)},h.prototype.removeListener=function(r,f,a,c){var p=e?e+r:r;if(!this._events[p])return this;if(!f)return l(this,p),this;var v=this._events[p];if(v.fn)v.fn===f&&(!c||v.once)&&(!a||v.context===a)&&l(this,p);else{for(var m=0,y=[],E=v.length;m<E;m++)(v[m].fn!==f||c&&!v[m].once||a&&v[m].context!==a)&&y.push(v[m]);y.length?this._events[p]=y.length===1?y[0]:y:l(this,p)}return this},h.prototype.removeAllListeners=function(r){var f;return r?(f=e?e+r:r,this._events[f]&&l(this,f)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,o.exports=h},62270:(o,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82590),x=function(u,l,h,n){for(var r=u[0],f=1;f<u.length;f++){var a=u[f];d(a,r,l,h,n),r=a}return u};o.exports=x},61148:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r){return d(u,"angle",l,h,n,r)};o.exports=x},22015:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=0;u<e.length;u++){var l=e[u];d.call(x,l)}return e};o.exports=T},31060:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){x===void 0&&(x=0);for(var u=x;u<e.length;u++){var l=e[u],h=!0;for(var n in d)l[n]!==d[n]&&(h=!1);if(h)return l}return null};o.exports=T},52367:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){x===void 0&&(x=0);for(var u=x;u<e.length;u++){var l=e[u],h=!0;for(var n in d)l[n]!==d[n]&&(h=!1);if(h)return l}return null};o.exports=T},12673:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40327),x=e(84093),u=e(72632),l=e(72283),h=e(71030),n=new h({sys:{queueDepthSort:l,events:{once:l}}},0,0,1,1).setOrigin(0,0),r=function(f,a){a===void 0&&(a={});var c=a.hasOwnProperty("width"),p=a.hasOwnProperty("height"),v=u(a,"width",-1),m=u(a,"height",-1),y=u(a,"cellWidth",1),E=u(a,"cellHeight",y),P=u(a,"position",x.TOP_LEFT),S=u(a,"x",0),w=u(a,"y",0),A=0,R=0,O=v*y,F=m*E;n.setPosition(S,w),n.setSize(y,E);for(var L=0;L<f.length;L++)if(d(f[L],n,P),c&&v===-1)n.x+=y;else if(p&&m===-1)n.y+=E;else if(p&&!c){if(R+=E,n.y+=E,R===F&&(R=0,A+=y,n.y=w,n.x+=y,A===O))break}else if(A+=y,n.x+=y,A===O&&(A=0,R+=E,n.x=S,n.y+=E,R===F))break;return f};o.exports=r},691:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r){return d(u,"alpha",l,h,n,r)};o.exports=x},3877:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r){return d(u,"x",l,h,n,r)};o.exports=x},71020:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r,f,a){return h==null&&(h=l),d(u,"x",l,n,f,a),d(u,"y",h,r,f,a)};o.exports=x},28970:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r){return d(u,"y",l,h,n,r)};o.exports=x},82249:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x===void 0&&(x=0),u===void 0&&(u=6.28);for(var l=x,h=(u-x)/e.length,n=d.x,r=d.y,f=d.radius,a=0;a<e.length;a++)e[a].x=n+f*Math.cos(l),e[a].y=r+f*Math.sin(l),l+=h;return e};o.exports=T},30285:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x===void 0&&(x=0),u===void 0&&(u=6.28);for(var l=x,h=(u-x)/e.length,n=d.width/2,r=d.height/2,f=0;f<e.length;f++)e[f].x=d.x+n*Math.cos(l),e[f].y=d.y+r*Math.sin(l),l+=h;return e};o.exports=T},61557:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8570),x=function(u,l){for(var h=d(l,u.length),n=0;n<u.length;n++){var r=u[n],f=h[n];r.x=f.x,r.y=f.y}return u};o.exports=x},63549:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40053),x=e(77640),u=e(38487),l=function(h,n,r){r===void 0&&(r=0);var f=d(n,!1,h.length);r>0?x(f,r):r<0&&u(f,Math.abs(r));for(var a=0;a<h.length;a++)h[a].x=f[a].x,h[a].y=f[a].y;return h};o.exports=l},51629:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(58813),x=function(u,l,h){var n=d({x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2},h),r=d({x1:l.x2,y1:l.y2,x2:l.x3,y2:l.y3},h),f=d({x1:l.x3,y1:l.y3,x2:l.x1,y2:l.y1},h);n.pop(),r.pop(),f.pop(),n=n.concat(r,f);for(var a=n.length/u.length,c=0,p=0;p<u.length;p++){var v=u[p],m=n[Math.floor(c)];v.x=m.x,v.y=m.y,c+=a}return u};o.exports=x},1045:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=0;u<e.length;u++){var l=e[u];l.anims&&l.anims.play(d,x)}return e};o.exports=T},6124:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=1);var n,r=0,f=e.length;if(h===1)for(n=l;n<f;n++)e[n][d]+=x+r*u,r++;else for(n=l;n>=0;n--)e[n][d]+=x+r*u,r++;return e};o.exports=T},23646:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=1);var n,r=0,f=e.length;if(h===1)for(n=l;n<f;n++)e[n][d]=x+r*u,r++;else for(n=l;n>=0;n--)e[n][d]=x+r*u,r++;return e};o.exports=T},4392:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(30977),x=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};o.exports=x},94985:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72006),x=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};o.exports=x},63305:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74077),x=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};o.exports=x},90739:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(30001),x=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};o.exports=x},91417:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99761),x=function(u,l){for(var h=0;h<u.length;h++)d(l,u[h]);return u};o.exports=x},26182:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r){return d(u,"rotation",l,h,n,r)};o.exports=x},87299:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72395),x=e(53996),u=function(l,h,n){for(var r=h.x,f=h.y,a=0;a<l.length;a++){var c=l[a];d(c,r,f,n,Math.max(1,x(c.x,c.y,r,f)))}return l};o.exports=u},92194:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72395),x=function(u,l,h,n){var r=l.x,f=l.y;if(n===0)return u;for(var a=0;a<u.length;a++)d(u[a],r,f,h,n);return u};o.exports=x},30363:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r){return d(u,"scaleX",l,h,n,r)};o.exports=x},51449:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r,f,a){return h==null&&(h=l),d(u,"scaleX",l,n,f,a),d(u,"scaleY",h,r,f,a)};o.exports=x},64895:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6124),x=function(u,l,h,n,r){return d(u,"scaleY",l,h,n,r)};o.exports=x},30329:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"alpha",l,h,n,r)};o.exports=x},43954:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n){return d(u,"blendMode",l,0,h,n)};o.exports=x},70688:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"depth",l,h,n,r)};o.exports=x},8314:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=0;u<e.length;u++)e[u].setInteractive(d,x);return e};o.exports=T},12894:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r,f,a){return h==null&&(h=l),d(u,"originX",l,n,f,a),d(u,"originY",h,r,f,a),u.forEach(function(c){c.updateDisplayOrigin()}),u};o.exports=x},38767:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"rotation",l,h,n,r)};o.exports=x},18584:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r,f,a){return h==null&&(h=l),d(u,"scaleX",l,n,f,a),d(u,"scaleY",h,r,f,a)};o.exports=x},17381:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"scaleX",l,h,n,r)};o.exports=x},74370:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"scaleY",l,h,n,r)};o.exports=x},27773:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r,f,a){return h==null&&(h=l),d(u,"scrollFactorX",l,n,f,a),d(u,"scrollFactorY",h,r,f,a)};o.exports=x},75257:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"scrollFactorX",l,h,n,r)};o.exports=x},54512:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"scrollFactorY",l,h,n,r)};o.exports=x},69423:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l){for(var h=0;h<e.length;h++)e[h].setTint(d,x,u,l);return e};o.exports=T},58291:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n){return d(u,"visible",l,0,h,n)};o.exports=x},94833:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"x",l,h,n,r)};o.exports=x},14284:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r,f,a){return h==null&&(h=l),d(u,"x",l,n,f,a),d(u,"y",h,r,f,a)};o.exports=x},96574:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23646),x=function(u,l,h,n,r){return d(u,"y",l,h,n,r)};o.exports=x},74086:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r){n===void 0&&(n=0),r===void 0&&(r=new d);var f,a,c=u.length;if(c===1)f=u[0].x,a=u[0].y,u[0].x=l,u[0].y=h;else{var p=1,v=0;n===0&&(v=c-1,p=c-2),f=u[v].x,a=u[v].y,u[v].x=l,u[v].y=h;for(var m=0;m<c;m++)if(!(p>=c||p===-1)){var y=u[p],E=y.x,P=y.y;y.x=f,y.y=a,f=E,a=P,n===0?p--:p++}}return r.x=f,r.y=a,r};o.exports=x},86347:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18592),x=function(u){return d(u)};o.exports=x},1558:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5514),x=function(u,l,h,n,r){r===void 0&&(r=!1);var f=Math.abs(n-h)/u.length,a;if(r)for(a=0;a<u.length;a++)u[a][l]+=d(a*f,h,n);else for(a=0;a<u.length;a++)u[a][l]=d(a*f,h,n);return u};o.exports=x},9938:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87736),x=function(u,l,h,n,r){r===void 0&&(r=!1);var f=Math.abs(n-h)/u.length,a;if(r)for(a=0;a<u.length;a++)u[a][l]+=d(a*f,h,n);else for(a=0;a<u.length;a++)u[a][l]=d(a*f,h,n);return u};o.exports=x},71060:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l){if(l===void 0&&(l=!1),e.length===0)return e;if(e.length===1)return l?e[0][d]+=(u+x)/2:e[0][d]=(u+x)/2,e;var h=Math.abs(u-x)/(e.length-1),n;if(l)for(n=0;n<e.length;n++)e[n][d]+=n*h+x;else for(n=0;n<e.length;n++)e[n][d]=n*h+x;return e};o.exports=T},11207:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=0;d<e.length;d++)e[d].visible=!e[d].visible;return e};o.exports=T},24404:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),x=function(u,l,h){h===void 0&&(h=0);for(var n=0;n<u.length;n++){var r=u[n];r.x=d(r.x,l.left-h,l.right+h),r.y=d(r.y,l.top-h,l.bottom+h)}return u};o.exports=x},83979:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AlignTo:e(62270),Angle:e(61148),Call:e(22015),GetFirst:e(31060),GetLast:e(52367),GridAlign:e(12673),IncAlpha:e(691),IncX:e(3877),IncXY:e(71020),IncY:e(28970),PlaceOnCircle:e(82249),PlaceOnEllipse:e(30285),PlaceOnLine:e(61557),PlaceOnRectangle:e(63549),PlaceOnTriangle:e(51629),PlayAnimation:e(1045),PropertyValueInc:e(6124),PropertyValueSet:e(23646),RandomCircle:e(4392),RandomEllipse:e(94985),RandomLine:e(63305),RandomRectangle:e(90739),RandomTriangle:e(91417),Rotate:e(26182),RotateAround:e(87299),RotateAroundDistance:e(92194),ScaleX:e(30363),ScaleXY:e(51449),ScaleY:e(64895),SetAlpha:e(30329),SetBlendMode:e(43954),SetDepth:e(70688),SetHitArea:e(8314),SetOrigin:e(12894),SetRotation:e(38767),SetScale:e(18584),SetScaleX:e(17381),SetScaleY:e(74370),SetScrollFactor:e(27773),SetScrollFactorX:e(75257),SetScrollFactorY:e(54512),SetTint:e(69423),SetVisible:e(58291),SetX:e(94833),SetXY:e(14284),SetY:e(96574),ShiftPosition:e(74086),Shuffle:e(86347),SmootherStep:e(9938),SmoothStep:e(1558),Spread:e(71060),ToggleVisible:e(11207),WrapInRectangle:e(24404)}},85463:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(16938),l=e(2406),h=e(71519),n=e(10850),r=e(28834),f=new x({initialize:function(c,p,v){this.manager=c,this.key=p,this.type="frame",this.frames=this.getFrames(c.textureManager,n(v,"frames",[]),n(v,"defaultTextureKey",null),n(v,"sortFrames",!0)),this.frameRate=n(v,"frameRate",null),this.duration=n(v,"duration",null),this.msPerFrame,this.skipMissedFrames=n(v,"skipMissedFrames",!0),this.delay=n(v,"delay",0),this.repeat=n(v,"repeat",0),this.repeatDelay=n(v,"repeatDelay",0),this.yoyo=n(v,"yoyo",!1),this.showBeforeDelay=n(v,"showBeforeDelay",!1),this.showOnStart=n(v,"showOnStart",!1),this.hideOnComplete=n(v,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(u.PAUSE_ALL,this.pause,this),this.manager.on(u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(a,c,p,v){p===null&&v===null?(a.frameRate=24,a.duration=24/c*1e3):p&&v===null?(a.duration=p,a.frameRate=c/(p/1e3)):(a.frameRate=v,a.duration=c/v*1e3),a.msPerFrame=1e3/a.frameRate},addFrame:function(a){return this.addFrameAt(this.frames.length,a)},addFrameAt:function(a,c){var p=this.getFrames(this.manager.textureManager,c);if(p.length>0){if(a===0)this.frames=p.concat(this.frames);else if(a===this.frames.length)this.frames=this.frames.concat(p);else{var v=this.frames.slice(0,a),m=this.frames.slice(a);this.frames=v.concat(p,m)}this.updateFrameSequence()}return this},checkFrame:function(a){return a>=0&&a<this.frames.length},getFirstTick:function(a){a.accumulator=0,a.nextTick=a.msPerFrame+a.currentFrame.duration},getFrameAt:function(a){return this.frames[a]},getFrames:function(a,c,p,v){v===void 0&&(v=!0);var m=[],y,E,P=1,S,w;if(typeof c=="string"){if(w=c,!a.exists(w))return console.warn('Texture "%s" not found',w),m;var A=a.get(w),R=A.getFrameNames();v&&r(R),c=[],R.forEach(function(B){c.push({key:w,frame:B})})}if(!Array.isArray(c)||c.length===0)return m;for(S=0;S<c.length;S++){var O=c[S],F=n(O,"key",p);if(!!F){var L=n(O,"frame",0),D=a.getFrame(F,L);if(!D){console.warn('Texture "%s" not found',F);continue}E=new h(F,L,P,D),E.duration=n(O,"duration",0),E.isFirst=!y,y&&(y.nextFrame=E,E.prevFrame=y),m.push(E),y=E,P++}}if(m.length>0){E.isLast=!0,E.nextFrame=m[0],m[0].prevFrame=E;var I=1/(m.length-1);for(S=0;S<m.length;S++)m[S].progress=S*I}return m},getNextTick:function(a){a.accumulator-=a.nextTick,a.nextTick=a.msPerFrame+a.currentFrame.duration},getFrameByProgress:function(a){return a=d(a,0,1),l(a,this.frames,"progress")},nextFrame:function(a){var c=a.currentFrame;c.isLast?a.yoyo?this.handleYoyoFrame(a,!1):a.repeatCounter>0?a.inReverse&&a.forward?a.forward=!1:this.repeatAnimation(a):a.complete():this.updateAndGetNextTick(a,c.nextFrame)},handleYoyoFrame:function(a,c){if(c||(c=!1),a.inReverse===!c&&a.repeatCounter>0){(a.repeatDelay===0||a.pendingRepeat)&&(a.forward=c),this.repeatAnimation(a);return}if(a.inReverse!==c&&a.repeatCounter===0){a.complete();return}a.forward=c;var p=c?a.currentFrame.nextFrame:a.currentFrame.prevFrame;this.updateAndGetNextTick(a,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(a){var c=a.currentFrame;c.isFirst?a.yoyo?this.handleYoyoFrame(a,!0):a.repeatCounter>0?a.inReverse&&!a.forward?this.repeatAnimation(a):(a.forward=!0,this.repeatAnimation(a)):a.complete():this.updateAndGetNextTick(a,c.prevFrame)},updateAndGetNextTick:function(a,c){a.setCurrentFrame(c),this.getNextTick(a)},removeFrame:function(a){var c=this.frames.indexOf(a);return c!==-1&&this.removeFrameAt(c),this},removeFrameAt:function(a){return this.frames.splice(a,1),this.updateFrameSequence(),this},repeatAnimation:function(a){if(a._pendingStop===2){if(a._pendingStopValue===0)return a.stop();a._pendingStopValue--}a.repeatDelay>0&&!a.pendingRepeat?(a.pendingRepeat=!0,a.accumulator-=a.nextTick,a.nextTick+=a.repeatDelay):(a.repeatCounter--,a.forward?a.setCurrentFrame(a.currentFrame.nextFrame):a.setCurrentFrame(a.currentFrame.prevFrame),a.isPlaying&&(this.getNextTick(a),a.handleRepeat()))},toJSON:function(){var a={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(c){a.frames.push(c.toJSON())}),a},updateFrameSequence:function(){for(var a=this.frames.length,c=1/(a-1),p,v=0;v<a;v++)p=this.frames[v],p.index=v+1,p.isFirst=!1,p.isLast=!1,p.progress=v*c,v===0?(p.isFirst=!0,a===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[a-1],p.nextFrame=this.frames[v+1])):v===a-1&&a>1?(p.isLast=!0,p.prevFrame=this.frames[a-2],p.nextFrame=this.frames[0]):a>1&&(p.prevFrame=this.frames[v-1],p.nextFrame=this.frames[v+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(u.PAUSE_ALL,this.pause,this),this.manager.off(u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var a=0;a<this.frames.length;a++)this.frames[a].destroy();this.frames=[],this.manager=null}});o.exports=f},71519:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h,n,r,f){f===void 0&&(f=!1),this.textureKey=l,this.textureFrame=h,this.index=n,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=f},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});o.exports=x},90249:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85463),x=e(56694),u=e(33885),l=e(6659),h=e(16938),n=e(97081),r=e(72632),f=e(10850),a=e(83392),c=e(13401),p=e(76400),v=new x({Extends:l,initialize:function(y){l.call(this),this.game=y,this.textureManager=null,this.globalTimeScale=1,this.anims=new u,this.mixes=new u,this.paused=!1,this.name="AnimationManager",y.events.once(n.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(n.DESTROY,this.destroy,this)},addMix:function(m,y,E){var P=this.anims,S=this.mixes,w=typeof m=="string"?m:m.key,A=typeof y=="string"?y:y.key;if(P.has(w)&&P.has(A)){var R=S.get(w);R||(R={}),R[A]=E,S.set(w,R)}return this},removeMix:function(m,y){var E=this.mixes,P=typeof m=="string"?m:m.key,S=E.get(P);if(S)if(y){var w=typeof y=="string"?y:y.key;S.hasOwnProperty(w)&&delete S[w]}else y||E.delete(P);return this},getMix:function(m,y){var E=this.mixes,P=typeof m=="string"?m:m.key,S=typeof y=="string"?y:y.key,w=E.get(P);return w&&w.hasOwnProperty(S)?w[S]:0},add:function(m,y){return this.anims.has(m)?(console.warn("Animation key exists: "+m),this):(y.key=m,this.anims.set(m,y),this.emit(h.ADD_ANIMATION,m,y),this)},exists:function(m){return this.anims.has(m)},createFromAseprite:function(m,y,E){var P=[],S=this.game.cache.json.get(m);if(!S)return console.warn("No Aseprite data found for: "+m),P;var w=this,A=f(S,"meta",null),R=f(S,"frames",null);if(A&&R){var O=f(A,"frameTags",[]);O.forEach(function(F){var L=[],D=r(F,"name",null),I=r(F,"from",0),B=r(F,"to",0),V=r(F,"direction","forward");if(!!D&&(!y||y&&y.indexOf(D)>-1)){for(var Y=0,W=I;W<=B;W++){var $=W.toString(),N=R[$];if(N){var U=r(N,"duration",a.MAX_SAFE_INTEGER);L.push({key:m,frame:$,duration:U}),Y+=U}}var b=Y/L.length;L.forEach(function(X){X.duration-=b}),V==="reverse"&&(L=L.reverse());var G={key:D,frames:L,duration:Y,yoyo:V==="pingpong"},z;E?E.anims&&(z=E.anims.create(G)):z=w.create(G),z&&P.push(z)}})}return P},create:function(m){var y=m.key,E=!1;return y&&(E=this.get(y),E?console.warn("AnimationManager key already exists: "+y):(E=new d(this,y,m),this.anims.set(y,E),this.emit(h.ADD_ANIMATION,y,E))),E},fromJSON:function(m,y){y===void 0&&(y=!1),y&&this.anims.clear(),typeof m=="string"&&(m=JSON.parse(m));var E=[];if(m.hasOwnProperty("anims")&&Array.isArray(m.anims)){for(var P=0;P<m.anims.length;P++)E.push(this.create(m.anims[P]));m.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=m.globalTimeScale)}else m.hasOwnProperty("key")&&m.type==="frame"&&E.push(this.create(m));return E},generateFrameNames:function(m,y){var E=f(y,"prefix",""),P=f(y,"start",0),S=f(y,"end",0),w=f(y,"suffix",""),A=f(y,"zeroPad",0),R=f(y,"outputArray",[]),O=f(y,"frames",!1);if(!this.textureManager.exists(m))return console.warn('Texture "%s" not found',m),R;var F=this.textureManager.get(m);if(!F)return R;var L;if(y)for(O||(O=c(P,S)),L=0;L<O.length;L++){var D=E+p(O[L],A,"0",1)+w;F.has(D)?R.push({key:m,frame:D}):console.warn('Frame "%s" not found in texture "%s"',D,m)}else for(O=F.getFrameNames(),L=0;L<O.length;L++)R.push({key:m,frame:O[L]});return R},generateFrameNumbers:function(m,y){var E=f(y,"start",0),P=f(y,"end",-1),S=f(y,"first",!1),w=f(y,"outputArray",[]),A=f(y,"frames",!1);if(!this.textureManager.exists(m))return console.warn('Texture "%s" not found',m),w;var R=this.textureManager.get(m);if(!R)return w;S&&R.has(S)&&w.push({key:m,frame:S}),A||(P===-1&&(P=R.frameTotal-2),A=c(E,P));for(var O=0;O<A.length;O++){var F=A[O];R.has(F)?w.push({key:m,frame:F}):console.warn('Frame "%s" not found in texture "%s"',F,m)}return w},get:function(m){return this.anims.get(m)},getAnimsFromTexture:function(m){for(var y=this.textureManager.get(m),E=y.key,P=this.anims.getArray(),S=[],w=0;w<P.length;w++)for(var A=P[w],R=A.frames,O=0;O<R.length;O++)if(R[O].textureKey===E){S.push(A.key);break}return S},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(h.PAUSE_ALL)),this},play:function(m,y){Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++)y[E].anims.play(m);return this},staggerPlay:function(m,y,E,P){E===void 0&&(E=0),P===void 0&&(P=!0),Array.isArray(y)||(y=[y]);var S=y.length;P||S--;for(var w=0;w<y.length;w++){var A=E<0?Math.abs(E)*(S-w):E*w;y[w].anims.playAfterDelay(m,A)}return this},remove:function(m){var y=this.get(m);return y&&(this.emit(h.REMOVE_ANIMATION,m,y),this.anims.delete(m),this.removeMix(m)),y},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(h.RESUME_ALL)),this},toJSON:function(m){var y={anims:[],globalTimeScale:this.globalTimeScale};return m!==void 0&&m!==""?y.anims.push(this.anims.get(m).toJSON()):this.anims.each(function(E,P){y.anims.push(P.toJSON())}),y},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});o.exports=v},16569:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(33885),u=e(72632),l=e(16938),h=e(85463),n=new d({initialize:function(f){this.parent=f,this.animationManager=f.scene.sys.anims,this.animationManager.on(l.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(r){var f=this.parent;if(r===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,f;Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++){var c=r[a];this.nextAnim?this.nextAnimsQueue.push(c):this.nextAnim=c}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(r){this.isPlaying&&this.stop();var f=this.animationManager,a=typeof r=="string"?r:u(r,"key",null),c=this.exists(a)?this.get(a):f.get(a);if(!c)console.warn("Missing animation: "+a);else{this.currentAnim=c;var p=c.getTotalFrames(),v=u(r,"frameRate",c.frameRate),m=u(r,"duration",c.duration);c.calculateDuration(this,p,m,v),this.delay=u(r,"delay",c.delay),this.repeat=u(r,"repeat",c.repeat),this.repeatDelay=u(r,"repeatDelay",c.repeatDelay),this.yoyo=u(r,"yoyo",c.yoyo),this.showBeforeDelay=u(r,"showBeforeDelay",c.showBeforeDelay),this.showOnStart=u(r,"showOnStart",c.showOnStart),this.hideOnComplete=u(r,"hideOnComplete",c.hideOnComplete),this.skipMissedFrames=u(r,"skipMissedFrames",c.skipMissedFrames),this.timeScale=u(r,"timeScale",this.timeScale);var y=u(r,"startFrame",0);y>c.getTotalFrames()&&(y=0);var E=c.frames[y];y===0&&!this.forward&&(E=c.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(r){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),r!==void 0&&this.setCurrentFrame(r),this.parent},resume:function(r){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),r!==void 0&&this.setCurrentFrame(r),this.parent},playAfterDelay:function(r,f){if(!this.isPlaying)this.delayCounter=f,this.play(r,!0);else{var a=this.nextAnim,c=this.nextAnimsQueue;a&&c.unshift(a),this.nextAnim=r,this._pendingStop=1,this._pendingStopValue=f}return this.parent},playAfterRepeat:function(r,f){if(f===void 0&&(f=1),!this.isPlaying)this.play(r);else{var a=this.nextAnim,c=this.nextAnimsQueue;a&&c.unshift(a),this.repeatCounter!==-1&&f>this.repeatCounter&&(f=this.repeatCounter),this.nextAnim=r,this._pendingStop=2,this._pendingStopValue=f}return this.parent},play:function(r,f){f===void 0&&(f=!1);var a=this.currentAnim,c=this.parent,p=typeof r=="string"?r:r.key;if(f&&this.isPlaying&&a.key===p)return c;if(a&&this.isPlaying){var v=this.animationManager.getMix(a.key,r);if(v>0)return this.playAfterDelay(r,v)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r)},playReverse:function(r,f){f===void 0&&(f=!1);var a=typeof r=="string"?r:r.key;return f&&this.isPlaying&&this.currentAnim.key===a?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(r))},startAnimation:function(r){this.load(r);var f=this.currentAnim,a=this.parent;return f&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,f.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),a},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(l.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(l.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(l.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(l.ANIMATION_COMPLETE,l.ANIMATION_COMPLETE_KEY)},emitEvents:function(r,f){var a=this.currentAnim;if(a){var c=this.currentFrame,p=this.parent,v=c.textureFrame;p.emit(r,a,c,p,v),f&&p.emit(f+a.key,a,c,p,v)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var r=this.currentFrame;if(!r)return 0;var f=r.progress;return this.inReverse&&(f*=-1),f},setProgress:function(r){return this.forward||(r=1-r),this.setCurrentFrame(this.currentAnim.getFrameByProgress(r)),this.parent},setRepeat:function(r){return this.repeatCounter=r===-1?Number.MAX_VALUE:r,this.parent},globalRemove:function(r,f){f===void 0&&(f=this.currentAnim),this.isPlaying&&f.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(r,f){r===void 0&&(r=!1),f===void 0&&(f=!1);var a=this.currentAnim,c=this.parent;return a?(f&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),a.getFirstTick(this),this.emitEvents(l.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!r,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(a.frames[0]),this.parent):c},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(r)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var r=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(r)}return this.parent},stopAfterDelay:function(r){return this._pendingStop=1,this._pendingStopValue=r,this.parent},stopAfterRepeat:function(r){return r===void 0&&(r=1),this.repeatCounter!==-1&&r>this.repeatCounter&&(r=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=r,this.parent},stopOnFrame:function(r){return this._pendingStop=3,this._pendingStopValue=r,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(r,f){var a=this.currentAnim;if(!(!this.isPlaying||!a||a.paused)){if(this.accumulator+=f*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=f,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?a.nextFrame(this):a.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var c=0;do this.forward?a.nextFrame(this):a.previousFrame(this),c++;while(this.isPlaying&&this.accumulator>this.nextTick&&c<60)}}},setCurrentFrame:function(r){var f=this.parent;return this.currentFrame=r,f.texture=r.frame.texture,f.frame=r.frame,f.isCropped&&f.frame.updateCropUVs(f._crop,f.flipX,f.flipY),r.setAlpha&&(f.alpha=r.alpha),f.setSizeToFrame(),f._originComponent&&(r.frame.customPivot?f.setOrigin(r.frame.pivotX,r.frame.pivotY):f.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(l.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===r&&this.stop()),f},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(r){return this.anims?this.anims.get(r):null},exists:function(r){return this.anims?this.anims.has(r):!1},create:function(r){var f=r.key,a=!1;return f&&(a=this.get(f),a?console.warn("Animation key already exists: "+f):(a=new h(this,f,r),this.anims||(this.anims=new x),this.anims.set(f,a))),a},createFromAseprite:function(r,f){return this.animationManager.createFromAseprite(r,f,this.parent)},generateFrameNames:function(r,f){return this.animationManager.generateFrameNames(r,f)},generateFrameNumbers:function(r,f){return this.animationManager.generateFrameNumbers(r,f)},remove:function(r){var f=this.get(r);return f&&(this.currentAnim===f&&this.stop(),this.anims.delete(r)),f},destroy:function(){this.animationManager.off(l.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});o.exports=n},44509:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},84563:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete"},61586:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationcomplete-"},72175:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrepeat"},568:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationrestart"},37690:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstart"},58525:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationstop"},5243:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="animationupdate"},10598:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"},4860:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},31865:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"},16938:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD_ANIMATION:e(44509),ANIMATION_COMPLETE:e(84563),ANIMATION_COMPLETE_KEY:e(61586),ANIMATION_REPEAT:e(72175),ANIMATION_RESTART:e(568),ANIMATION_START:e(37690),ANIMATION_STOP:e(58525),ANIMATION_UPDATE:e(5243),PAUSE_ALL:e(10598),REMOVE_ANIMATION:e(4860),RESUME_ALL:e(31865)}},13517:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Animation:e(85463),AnimationFrame:e(71519),AnimationManager:e(90249),AnimationState:e(16569),Events:e(16938)}},23740:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(33885),u=e(6659),l=e(69773),h=new d({initialize:function(){this.entries=new x,this.events=new u},add:function(n,r){return this.entries.set(n,r),this.events.emit(l.ADD,this,n,r),this},has:function(n){return this.entries.has(n)},exists:function(n){return this.entries.has(n)},get:function(n){return this.entries.get(n)},remove:function(n){var r=this.get(n);return r&&(this.entries.delete(n),this.events.emit(l.REMOVE,this,n,r.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});o.exports=h},43474:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23740),x=e(56694),u=e(97081),l=new x({initialize:function(n){this.game=n,this.binary=new d,this.bitmapFont=new d,this.json=new d,this.physics=new d,this.shader=new d,this.audio=new d,this.video=new d,this.text=new d,this.html=new d,this.obj=new d,this.tilemap=new d,this.xml=new d,this.custom={},this.game.events.once(u.DESTROY,this.destroy,this)},addCustom:function(h){return this.custom.hasOwnProperty(h)||(this.custom[h]=new d),this.custom[h]},destroy:function(){for(var h=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],n=0;n<h.length;n++)this[h[n]].destroy(),this[h[n]]=null;for(var r in this.custom)this.custom[r].destroy();this.custom=null,this.game=null}});o.exports=l},94762:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},75968:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},69773:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(94762),REMOVE:e(75968)}},45820:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BaseCache:e(23740),CacheManager:e(43474),Events:e(69773)}},51052:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(75606),l=e(6659),h=e(89787),n=e(74118),r=e(69360),f=e(93222),a=e(93736),c=new d({Extends:l,Mixins:[x.AlphaSingle,x.Visible],initialize:function(v,m,y,E){v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),E===void 0&&(E=0),l.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new n,this.dirty=!0,this._x=v,this._y=m,this._width=y,this._height=E,this._bounds=new n,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new r,this.transparent=!0,this.backgroundColor=f("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new a(y/2,E/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,v){return p===void 0&&(p=.5),v===void 0&&(v=p),this.originX=p,this.originY=v,this},getScroll:function(p,v,m){m===void 0&&(m=new a);var y=this.width*.5,E=this.height*.5;return m.x=p-y,m.y=v-E,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(p){var v=this.width*.5;return this.midPoint.x=p,this.scrollX=p-v,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var v=this.height*.5;return this.midPoint.y=p,this.scrollY=p-v,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,v){return this.centerOnX(p),this.centerOnY(v),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,v=this.width*.5,m=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-v,this.scrollY=p.centerY-m}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var v=this.matrix.matrix,m=v[0],y=v[1],E=v[2],P=v[3],S=m*P-y*E;if(!S)return p;var w=v[4],A=v[5],R=this.scrollX,O=this.scrollY,F=this.width,L=this.height,D=this.y,I=D+L,B=this.x,V=B+F,Y=this.culledObjects,W=p.length;S=1/S,Y.length=0;for(var $=0;$<W;++$){var N=p[$];if(!N.hasOwnProperty("width")||N.parentContainer){Y.push(N);continue}var U=N.width,b=N.height,G=N.x-R*N.scrollFactorX-U*N.originX,z=N.y-O*N.scrollFactorY-b*N.originY,X=G*m+z*E+w,k=G*y+z*P+A,H=(G+U)*m+(z+b)*E+w,K=(G+U)*y+(z+b)*P+A;H>B&&X<V&&K>D&&k<I&&Y.push(N)}return Y},getWorldPoint:function(p,v,m){m===void 0&&(m=new a);var y=this.matrix.matrix,E=y[0],P=y[1],S=y[2],w=y[3],A=y[4],R=y[5],O=E*w-P*S;if(!O)return m.x=p,m.y=v,m;O=1/O;var F=w*O,L=-P*O,D=-S*O,I=E*O,B=(S*R-w*A)*O,V=(P*A-E*R)*O,Y=Math.cos(this.rotation),W=Math.sin(this.rotation),$=this.zoomX,N=this.zoomY,U=this.scrollX,b=this.scrollY,G=p+(U*Y-b*W)*$,z=v+(U*W+b*Y)*N;return m.x=G*F+z*D+B,m.y=G*L+z*I+V,m},ignore:function(p){var v=this.id;Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++){var y=p[m];Array.isArray(y)?this.ignore(y):y.isParent?this.ignore(y.getChildren()):y.cameraFilter|=v}return this},preRender:function(){this.renderList.length=0;var p=this.width,v=this.height,m=p*.5,y=v*.5,E=this.zoomX,P=this.zoomY,S=this.matrix,w=p*this.originX,A=v*this.originY,R=this.scrollX,O=this.scrollY;this.useBounds&&(R=this.clampX(R),O=this.clampY(O)),this.roundPixels&&(w=Math.round(w),A=Math.round(A)),this.scrollX=R,this.scrollY=O;var F=R+m,L=O+y;this.midPoint.set(F,L);var D=p/E,I=v/P;this.worldView.setTo(F-D/2,L-I/2,D,I),S.applyITRS(this.x+w,this.y+A,this.rotation,E,P),S.translate(-w,-A)},clampX:function(p){var v=this._bounds,m=this.displayWidth,y=v.x+(m-this.width)/2,E=Math.max(y,y+v.width-m);return p<y?p=y:p>E&&(p=E),p},clampY:function(p){var v=this._bounds,m=this.displayHeight,y=v.y+(m-this.height)/2,E=Math.max(y,y+v.height-m);return p<y?p=y:p>E&&(p=E),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=u(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=f(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,v,m,y,E){return E===void 0&&(E=!1),this._bounds.setTo(p,v,m,y),this.dirty=!0,this.useBounds=!0,E?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new n);var v=this._bounds;return p.setTo(v.x,v.y,v.width,v.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,v){return v===void 0&&(v=p),this.x=p,this.y=v,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p,v){v===void 0&&(v=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p,this.isSceneCamera=v;var m=p.sys;return this.sceneManager=m.game.scene,this.scaleManager=m.scale,this.cameraManager=m.cameras,this.updateSystem(),this},setScroll:function(p,v){return v===void 0&&(v=p),this.scrollX=p,this.scrollY=v,this},setSize:function(p,v){return v===void 0&&(v=p),this.width=p,this.height=v,this},setViewport:function(p,v,m,y){return this.x=p,this.y=v,this.width=m,this.height=y,this},setZoom:function(p,v){return p===void 0&&(p=1),v===void 0&&(v=p),p===0&&(p=.001),v===0&&(v=.001),this.zoomX=p,this.zoomY=v,this},setMask:function(p,v){return v===void 0&&(v=!0),this.mask=p,this._maskCamera=v?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},setIsSceneCamera:function(p){return this.isSceneCamera=p,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,v=this.sceneManager;p&&!this._customViewport?v.customViewports++:!p&&this._customViewport&&v.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(h.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){p!==this._scrollX&&(this._scrollX=p,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(p){p!==this._scrollY&&(this._scrollY=p,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});o.exports=c},47751:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51052),x=e(79993),u=e(82897),l=e(56694),h=e(64937),n=e(53030),r=e(89787),f=e(42798),a=e(74118),c=e(93736),p=new l({Extends:d,Mixins:[h.PostPipeline],initialize:function(m,y,E,P){d.call(this,m,y,E,P),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new n.Fade(this),this.flashEffect=new n.Flash(this),this.shakeEffect=new n.Shake(this),this.panEffect=new n.Pan(this),this.rotateToEffect=new n.RotateTo(this),this.zoomEffect=new n.Zoom(this),this.lerp=new c(1,1),this.followOffset=new c,this.deadzone=null,this._follow=null},setDeadzone:function(v,m){if(v===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=v,this.deadzone.height=m):this.deadzone=new a(0,0,v,m),this._follow){var y=this.width/2,E=this.height/2,P=this._follow.x-this.followOffset.x,S=this._follow.y-this.followOffset.y;this.midPoint.set(P,S),this.scrollX=P-y,this.scrollY=S-E}x(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(v,m,y,E,P,S){return this.fadeEffect.start(!1,v,m,y,E,!0,P,S)},fadeOut:function(v,m,y,E,P,S){return this.fadeEffect.start(!0,v,m,y,E,!0,P,S)},fadeFrom:function(v,m,y,E,P,S,w){return this.fadeEffect.start(!1,v,m,y,E,P,S,w)},fade:function(v,m,y,E,P,S,w){return this.fadeEffect.start(!0,v,m,y,E,P,S,w)},flash:function(v,m,y,E,P,S,w){return this.flashEffect.start(v,m,y,E,P,S,w)},shake:function(v,m,y,E,P){return this.shakeEffect.start(v,m,y,E,P)},pan:function(v,m,y,E,P,S,w){return this.panEffect.start(v,m,y,E,P,S,w)},rotateTo:function(v,m,y,E,P,S,w){return this.rotateToEffect.start(v,m,y,E,P,S,w)},zoomTo:function(v,m,y,E,P,S){return this.zoomEffect.start(v,m,y,E,P,S)},preRender:function(){this.renderList.length=0;var v=this.width,m=this.height,y=v*.5,E=m*.5,P=this.zoom,S=this.matrix,w=v*this.originX,A=m*this.originY,R=this._follow,O=this.deadzone,F=this.scrollX,L=this.scrollY;O&&x(O,this.midPoint.x,this.midPoint.y);var D=!1;if(this.roundPixels&&(w=Math.floor(w),A=Math.floor(A)),R&&!this.panEffect.isRunning){var I=this.lerp,B=R.x-this.followOffset.x,V=R.y-this.followOffset.y;this.roundPixels&&(B=Math.floor(B),V=Math.floor(V)),O?(B<O.x?F=f(F,F-(O.x-B),I.x):B>O.right&&(F=f(F,F+(B-O.right),I.x)),V<O.y?L=f(L,L-(O.y-V),I.y):V>O.bottom&&(L=f(L,L+(V-O.bottom),I.y))):(F=f(F,B-w,I.x),L=f(L,V-A,I.y)),D=!0}this.useBounds&&(F=this.clampX(F),L=this.clampY(L)),this.roundPixels&&(F=Math.floor(F),L=Math.floor(L)),this.scrollX=F,this.scrollY=L;var Y=F+y,W=L+E;this.midPoint.set(Y,W);var $=v/P,N=m/P,U=Y-$/2,b=W-N/2;this.roundPixels&&(U=Math.floor(U),b=Math.floor(b)),this.worldView.setTo(U,b,$,N),S.applyITRS(Math.floor(this.x+w),Math.floor(this.y+A),this.rotation,P,P),S.translate(-w,-A),this.shakeEffect.preRender(),D&&this.emit(r.FOLLOW_UPDATE,this,R)},setLerp:function(v,m){return v===void 0&&(v=1),m===void 0&&(m=v),this.lerp.set(v,m),this},setFollowOffset:function(v,m){return v===void 0&&(v=0),m===void 0&&(m=0),this.followOffset.set(v,m),this},startFollow:function(v,m,y,E,P,S){m===void 0&&(m=!1),y===void 0&&(y=1),E===void 0&&(E=y),P===void 0&&(P=0),S===void 0&&(S=P),this._follow=v,this.roundPixels=m,y=u(y,0,1),E=u(E,0,1),this.lerp.set(y,E),this.followOffset.set(P,S);var w=this.width/2,A=this.height/2,R=v.x-P,O=v.y-S;return this.midPoint.set(R,O),this.scrollX=R-w,this.scrollY=O-A,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(v,m){this.visible&&(this.rotateToEffect.update(v,m),this.panEffect.update(v,m),this.zoomEffect.update(v,m),this.shakeEffect.update(v,m),this.flashEffect.update(v,m),this.fadeEffect.update(v,m))},destroy:function(){this.resetFX(),d.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});o.exports=p},62382:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47751),x=e(56694),u=e(72632),l=e(91963),h=e(94287),n=e(40444),r=e(7599),f=new x({initialize:function(c){this.scene=c,this.systems=c.sys,this.roundPixels=c.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,c.sys.events.once(r.BOOT,this.boot,this),c.sys.events.on(r.START,this.start,this)},boot:function(){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new d(0,0,a.scale.width,a.scale.height).setScene(this.scene),a.game.scale.on(n.RESIZE,this.onResize,this),this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){if(!this.main){var a=this.systems;a.settings.cameras?this.fromJSON(a.settings.cameras):this.add(),this.main=this.cameras[0]}var c=this.systems.events;c.on(r.UPDATE,this.update,this),c.once(r.SHUTDOWN,this.shutdown,this)},add:function(a,c,p,v,m,y){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),m===void 0&&(m=!1),y===void 0&&(y="");var E=new d(a,c,p,v);return E.setName(y),E.setScene(this.scene),E.setRoundPixels(this.roundPixels),E.id=this.getNextID(),this.cameras.push(E),m&&(this.main=E),E},addExisting:function(a,c){c===void 0&&(c=!1);var p=this.cameras.indexOf(a);return p===-1?(a.id=this.getNextID(),a.setRoundPixels(this.roundPixels),this.cameras.push(a),c&&(this.main=a),a):null},getNextID:function(){for(var a=this.cameras,c=1,p=0;p<32;p++){for(var v=!1,m=0;m<a.length;m++){var y=a[m];if(y&&y.id===c){v=!0;continue}}if(v)c=c<<1;else return c}return 0},getTotal:function(a){a===void 0&&(a=!1);for(var c=0,p=this.cameras,v=0;v<p.length;v++){var m=p[v];(!a||a&&m.visible)&&c++}return c},fromJSON:function(a){Array.isArray(a)||(a=[a]);for(var c=this.scene.sys.scale.width,p=this.scene.sys.scale.height,v=0;v<a.length;v++){var m=a[v],y=u(m,"x",0),E=u(m,"y",0),P=u(m,"width",c),S=u(m,"height",p),w=this.add(y,E,P,S);w.name=u(m,"name",""),w.zoom=u(m,"zoom",1),w.rotation=u(m,"rotation",0),w.scrollX=u(m,"scrollX",0),w.scrollY=u(m,"scrollY",0),w.roundPixels=u(m,"roundPixels",!1),w.visible=u(m,"visible",!0);var A=u(m,"backgroundColor",!1);A&&w.setBackgroundColor(A);var R=u(m,"bounds",null);if(R){var O=u(R,"x",0),F=u(R,"y",0),L=u(R,"width",c),D=u(R,"height",p);w.setBounds(O,F,L,D)}}return this},getCamera:function(a){for(var c=this.cameras,p=0;p<c.length;p++)if(c[p].name===a)return c[p];return null},getCamerasBelowPointer:function(a){for(var c=this.cameras,p=a.x,v=a.y,m=[],y=0;y<c.length;y++){var E=c[y];E.visible&&E.inputEnabled&&h(E,p,v)&&m.unshift(E)}return m},remove:function(a,c){c===void 0&&(c=!0),Array.isArray(a)||(a=[a]);for(var p=0,v=this.cameras,m=0;m<a.length;m++){var y=v.indexOf(a[m]);y!==-1&&(c?v[y].destroy():v[y].renderList=[],v.splice(y,1),p++)}return!this.main&&v[0]&&(this.main=v[0]),p},render:function(a,c){for(var p=this.scene,v=this.cameras,m=0;m<v.length;m++){var y=v[m];if(y.visible&&y.alpha>0){y.preRender();var E=this.getVisibleChildren(c.getChildren(),y);a.render(p,E,y)}}},getVisibleChildren:function(a,c){return a.filter(function(p){return p.willRender(c)})},resetAll:function(){for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(a,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(a,c)},onResize:function(a,c,p,v,m){for(var y=0;y<this.cameras.length;y++){var E=this.cameras[y];E._x===0&&E._y===0&&E._width===v&&E._height===m&&E.setSize(c.width,c.height)}},resize:function(a,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(a,c)},shutdown:function(){this.main=void 0;for(var a=0;a<this.cameras.length;a++)this.cameras[a].destroy();this.cameras=[];var c=this.systems.events;c.off(r.UPDATE,this.update,this),c.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(r.START,this.start,this),this.systems.events.off(r.DESTROY,this.destroy,this),this.systems.game.scale.off(n.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});l.register("CameraManager",f,"cameras"),o.exports=f},92522:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(89787),l=new x({initialize:function(n){this.camera=n,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(h,n,r,f,a,c,p,v){if(h===void 0&&(h=!0),n===void 0&&(n=1e3),r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene),!c&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=n,this.direction=h,this.progress=0,this.red=r,this.green=f,this.blue=a,this.alpha=h?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v;var m=h?u.FADE_OUT_START:u.FADE_IN_START;return this.camera.emit(m,this.camera,this,n,r,f,a),this.camera},update:function(h,n){!this.isRunning||(this._elapsed+=n,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(h){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(h,n){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera,f=this.red/255,a=this.green/255,c=this.blue/255;return h.drawFillRect(r.x,r.y,r.width,r.height,n(c,a,f,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var h=this.direction?u.FADE_OUT_COMPLETE:u.FADE_IN_COMPLETE;this.camera.emit(h,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=l},22151:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(89787),l=new x({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(h,n,r,f,a,c,p){return h===void 0&&(h=250),n===void 0&&(n=255),r===void 0&&(r=255),f===void 0&&(f=255),a===void 0&&(a=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene),!a&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=h,this.progress=0,this.red=n,this.green=r,this.blue=f,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(u.FLASH_START,this.camera,this,h,n,r,f),this.camera)},update:function(h,n){!this.isRunning||(this._elapsed+=n,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(h){if(!this.isRunning)return!1;var n=this.camera;return h.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",h.fillRect(n.x,n.y,n.width,n.height),!0},postRenderWebGL:function(h,n){if(!this.isRunning)return!1;var r=this.camera,f=this.red/255,a=this.green/255,c=this.blue/255;return h.drawFillRect(r.x,r.y,r.width,r.height,n(c,a,f,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=l},37551:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(35060),l=e(89787),h=e(93736),n=new x({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=new h,this.current=new h,this.destination=new h,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,f,a,c,p,v,m){a===void 0&&(a=1e3),c===void 0&&(c=u.Linear),p===void 0&&(p=!1),v===void 0&&(v=null),m===void 0&&(m=this.camera.scene);var y=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source.set(y.scrollX,y.scrollY),this.destination.set(r,f),y.getScroll(r,f,this.current),typeof c=="string"&&u.hasOwnProperty(c)?this.ease=u[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=m,this.camera.emit(l.PAN_START,this.camera,this,a,r,f)),y},update:function(r,f){if(!!this.isRunning){this._elapsed+=f;var a=d(this._elapsed/this.duration,0,1);this.progress=a;var c=this.camera;if(this._elapsed<this.duration){var p=this.ease(a);c.getScroll(this.destination.x,this.destination.y,this.current);var v=this.source.x+(this.current.x-this.source.x)*p,m=this.source.y+(this.current.y-this.source.y)*p;c.setScroll(v,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,a,v,m)}else c.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,a,c.scrollX,c.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=n},1771:(o,T,e)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var d=e(82897),x=e(56694),u=e(89787),l=e(35060),h=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(n,r,f,a,c,p,v){f===void 0&&(f=1e3),a===void 0&&(a=l.Linear),c===void 0&&(c=!1),p===void 0&&(p=null),v===void 0&&(v=this.camera.scene),r===void 0&&(r=!1),this.shortestPath=r;var m=n;n<0?(m=-1*n,this.clockwise=!1):this.clockwise=!0;var y=360*Math.PI/180;m=m-Math.floor(m/y)*y;var E=this.camera;if(!c&&this.isRunning)return E;if(this.isRunning=!0,this.duration=f,this.progress=0,this.source=E.rotation,this.destination=m,typeof a=="string"&&l.hasOwnProperty(a)?this.ease=l[a]:typeof a=="function"&&(this.ease=a),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=v,this.shortestPath){var P=0,S=0;this.destination>this.source?P=Math.abs(this.destination-this.source):P=Math.abs(this.destination+y)-this.source,this.source>this.destination?S=Math.abs(this.source-this.destination):S=Math.abs(this.source+y)-this.destination,P<S?this.clockwise=!0:P>S&&(this.clockwise=!1)}return this.camera.emit(u.ROTATE_START,this.camera,this,f,m),E},update:function(n,r){if(!!this.isRunning){this._elapsed+=r;var f=d(this._elapsed/this.duration,0,1);this.progress=f;var a=this.camera;if(this._elapsed<this.duration){var c=this.ease(f);this.current=a.rotation;var p=0,v=360*Math.PI/180,m=this.destination,y=this.current;this.clockwise===!1&&(m=this.current,y=this.destination),m>=y?p=Math.abs(m-y):p=Math.abs(m+v)-y;var E=0;this.clockwise?E=a.rotation+p*c:E=a.rotation-p*c,a.rotation=E,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,f,E)}else a.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,f,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});o.exports=h},3241:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(89787),l=e(93736),h=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.intensity=new l,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(n,r,f,a,c){return n===void 0&&(n=100),r===void 0&&(r=.05),f===void 0&&(f=!1),a===void 0&&(a=null),c===void 0&&(c=this.camera.scene),!f&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=n,this.progress=0,typeof r=="number"?this.intensity.set(r):this.intensity.set(r.x,r.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=a,this._onUpdateScope=c,this.camera.emit(u.SHAKE_START,this.camera,this,n,r),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(n,r){if(!!this.isRunning)if(this._elapsed+=r,this.progress=d(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var f=this.intensity,a=this.camera.width,c=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*f.x*a*2-f.x*a)*p,this._offsetY=(Math.random()*f.y*c*2-f.y*c)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});o.exports=h},13383:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(35060),l=e(89787),h=new x({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,r,f,a,c,p){r===void 0&&(r=1e3),f===void 0&&(f=u.Linear),a===void 0&&(a=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene);var v=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source=v.zoom,this.destination=n,typeof f=="string"&&u.hasOwnProperty(f)?this.ease=u[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(l.ZOOM_START,this.camera,this,r,n)),v},update:function(n,r){!this.isRunning||(this._elapsed+=r,this.progress=d(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});o.exports=h},53030:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Fade:e(92522),Flash:e(22151),Pan:e(37551),Shake:e(3241),RotateTo:e(1771),Zoom:e(13383)}},39577:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameradestroy"},85373:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeincomplete"},92057:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeinstart"},1903:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutcomplete"},96131:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerafadeoutstart"},85409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashcomplete"},25500:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="cameraflashstart"},44071:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="followupdate"},19818:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapancomplete"},80002:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerapanstart"},87966:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},74217:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},34805:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatecomplete"},30408:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerarotatestart"},49856:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakecomplete"},69189:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerashakestart"},67657:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomcomplete"},14229:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="camerazoomstart"},89787:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DESTROY:e(39577),FADE_IN_COMPLETE:e(85373),FADE_IN_START:e(92057),FADE_OUT_COMPLETE:e(1903),FADE_OUT_START:e(96131),FLASH_COMPLETE:e(85409),FLASH_START:e(25500),FOLLOW_UPDATE:e(44071),PAN_COMPLETE:e(19818),PAN_START:e(80002),POST_RENDER:e(87966),PRE_RENDER:e(74217),ROTATE_COMPLETE:e(34805),ROTATE_START:e(30408),SHAKE_COMPLETE:e(49856),SHAKE_START:e(69189),ZOOM_COMPLETE:e(67657),ZOOM_START:e(14229)}},32356:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Camera:e(47751),BaseCamera:e(51052),CameraManager:e(62382),Effects:e(53030),Events:e(89787)}},84219:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(10850),u=new d({initialize:function(h){this.camera=x(h,"camera",null),this.left=x(h,"left",null),this.right=x(h,"right",null),this.up=x(h,"up",null),this.down=x(h,"down",null),this.zoomIn=x(h,"zoomIn",null),this.zoomOut=x(h,"zoomOut",null),this.zoomSpeed=x(h,"zoomSpeed",.01),this.minZoom=x(h,"minZoom",.001),this.maxZoom=x(h,"maxZoom",1e3),this.speedX=0,this.speedY=0;var n=x(h,"speed",null);typeof n=="number"?(this.speedX=n,this.speedY=n):(this.speedX=x(h,"speed.x",0),this.speedY=x(h,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(!!this.active){l===void 0&&(l=1);var h=this.camera;this.up&&this.up.isDown?h.scrollY-=this.speedY*l|0:this.down&&this.down.isDown&&(h.scrollY+=this.speedY*l|0),this.left&&this.left.isDown?h.scrollX-=this.speedX*l|0:this.right&&this.right.isDown&&(h.scrollX+=this.speedX*l|0),this.zoomIn&&this.zoomIn.isDown?(h.zoom-=this.zoomSpeed,h.zoom<this.minZoom&&(h.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(h.zoom+=this.zoomSpeed,h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=u},69370:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(10850),u=new d({initialize:function(h){this.camera=x(h,"camera",null),this.left=x(h,"left",null),this.right=x(h,"right",null),this.up=x(h,"up",null),this.down=x(h,"down",null),this.zoomIn=x(h,"zoomIn",null),this.zoomOut=x(h,"zoomOut",null),this.zoomSpeed=x(h,"zoomSpeed",.01),this.minZoom=x(h,"minZoom",.001),this.maxZoom=x(h,"maxZoom",1e3),this.accelX=0,this.accelY=0;var n=x(h,"acceleration",null);typeof n=="number"?(this.accelX=n,this.accelY=n):(this.accelX=x(h,"acceleration.x",0),this.accelY=x(h,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=x(h,"drag",null);typeof r=="number"?(this.dragX=r,this.dragY=r):(this.dragX=x(h,"drag.x",0),this.dragY=x(h,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var f=x(h,"maxSpeed",null);typeof f=="number"?(this.maxSpeedX=f,this.maxSpeedY=f):(this.maxSpeedX=x(h,"maxSpeed.x",0),this.maxSpeedY=x(h,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){if(!!this.active){l===void 0&&(l=1);var h=this.camera;this._speedX>0?(this._speedX-=this.dragX*l,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*l,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*l,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*l,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(h.scrollX-=this._speedX*l|0),this._speedY!==0&&(h.scrollY-=this._speedY*l|0),this._zoom!==0&&(h.zoom+=this._zoom,h.zoom<this.minZoom?h.zoom=this.minZoom:h.zoom>this.maxZoom&&(h.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});o.exports=u},6524:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FixedKeyControl:e(84219),SmoothedKeyControl:e(69370)}},44143:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Controls:e(6524),Scene2D:e(32356)}},86459:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={VERSION:"3.60.0",BlendModes:e(95723),ScaleModes:e(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};o.exports=d},14033:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(86459),u=e(18360),l=e(77290),h=e(72632),n=e(10850),r=e(42911),f=e(72283),a=e(5923),c=e(65641),p=e(93222),v=new d({initialize:function(y){y===void 0&&(y={});var E=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],P="#ffffff",S=n(y,"scale",null);this.width=n(S,"width",1024,y),this.height=n(S,"height",768,y),this.zoom=n(S,"zoom",1,y),this.parent=n(S,"parent",void 0,y),this.scaleMode=n(S,S?"mode":"scaleMode",0,y),this.expandParent=n(S,"expandParent",!0,y),this.autoRound=n(S,"autoRound",!1,y),this.autoCenter=n(S,"autoCenter",0,y),this.resizeInterval=n(S,"resizeInterval",500,y),this.fullscreenTarget=n(S,"fullscreenTarget",null,y),this.minWidth=n(S,"minWidth",0,y),this.maxWidth=n(S,"maxWidth",0,y),this.minHeight=n(S,"minHeight",0,y),this.maxHeight=n(S,"maxHeight",0,y),this.renderType=n(y,"type",x.AUTO),this.canvas=n(y,"canvas",null),this.context=n(y,"context",null),this.canvasStyle=n(y,"canvasStyle",null),this.customEnvironment=n(y,"customEnvironment",!1),this.sceneConfig=n(y,"scene",null),this.seed=n(y,"seed",[(Date.now()*Math.random()).toString()]),a.RND=new a.RandomDataGenerator(this.seed),this.gameTitle=n(y,"title",""),this.gameURL=n(y,"url","https://phaser.io"),this.gameVersion=n(y,"version",""),this.autoFocus=n(y,"autoFocus",!0),this.stableSort=n(y,"stableSort",-1),this.stableSort===-1&&(this.stableSort=l.browser.es2019?1:0),l.features.stableSort=this.stableSort,this.domCreateContainer=n(y,"dom.createContainer",!1),this.domPointerEvents=n(y,"dom.pointerEvents","none"),this.inputKeyboard=n(y,"input.keyboard",!0),this.inputKeyboardEventTarget=n(y,"input.keyboard.target",window),this.inputKeyboardCapture=n(y,"input.keyboard.capture",[]),this.inputMouse=n(y,"input.mouse",!0),this.inputMouseEventTarget=n(y,"input.mouse.target",null),this.inputMousePreventDefaultDown=n(y,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=n(y,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=n(y,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=n(y,"input.mouse.preventDefaultWheel",!0),this.inputTouch=n(y,"input.touch",l.input.touch),this.inputTouchEventTarget=n(y,"input.touch.target",null),this.inputTouchCapture=n(y,"input.touch.capture",!0),this.inputActivePointers=n(y,"input.activePointers",1),this.inputSmoothFactor=n(y,"input.smoothFactor",0),this.inputWindowEvents=n(y,"input.windowEvents",!0),this.inputGamepad=n(y,"input.gamepad",!1),this.inputGamepadEventTarget=n(y,"input.gamepad.target",window),this.disableContextMenu=n(y,"disableContextMenu",!1),this.audio=n(y,"audio",{}),this.hideBanner=n(y,"banner",null)===!1,this.hidePhaser=n(y,"banner.hidePhaser",!1),this.bannerTextColor=n(y,"banner.text",P),this.bannerBackgroundColor=n(y,"banner.background",E),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=n(y,"fps",null);var w=n(y,"render",null);this.pipeline=n(w,"pipeline",null,y),this.autoMobilePipeline=n(w,"autoMobilePipeline",!0,y),this.defaultPipeline=n(w,"defaultPipeline",c.MULTI_PIPELINE,y),this.antialias=n(w,"antialias",!0,y),this.antialiasGL=n(w,"antialiasGL",!0,y),this.mipmapFilter=n(w,"mipmapFilter","",y),this.desynchronized=n(w,"desynchronized",!1,y),this.roundPixels=n(w,"roundPixels",!1,y),this.pixelArt=n(w,"pixelArt",this.zoom!==1,y),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=n(w,"transparent",!1,y),this.clearBeforeRender=n(w,"clearBeforeRender",!0,y),this.preserveDrawingBuffer=n(w,"preserveDrawingBuffer",!1,y),this.premultipliedAlpha=n(w,"premultipliedAlpha",!0,y),this.failIfMajorPerformanceCaveat=n(w,"failIfMajorPerformanceCaveat",!1,y),this.powerPreference=n(w,"powerPreference","default",y),this.batchSize=n(w,"batchSize",4096,y),this.maxTextures=n(w,"maxTextures",-1,y),this.maxLights=n(w,"maxLights",10,y);var A=n(y,"backgroundColor",0);this.backgroundColor=p(A),this.transparent&&(this.backgroundColor=p(0),this.backgroundColor.alpha=0),this.preBoot=n(y,"callbacks.preBoot",f),this.postBoot=n(y,"callbacks.postBoot",f),this.physics=n(y,"physics",{}),this.defaultPhysicsSystem=n(this.physics,"default",!1),this.loaderBaseURL=n(y,"loader.baseURL",""),this.loaderPath=n(y,"loader.path",""),this.loaderMaxParallelDownloads=n(y,"loader.maxParallelDownloads",l.os.android?6:32),this.loaderCrossOrigin=n(y,"loader.crossOrigin",void 0),this.loaderResponseType=n(y,"loader.responseType",""),this.loaderAsync=n(y,"loader.async",!0),this.loaderUser=n(y,"loader.user",""),this.loaderPassword=n(y,"loader.password",""),this.loaderTimeout=n(y,"loader.timeout",0),this.loaderWithCredentials=n(y,"loader.withCredentials",!1),this.loaderImageLoadType=n(y,"loader.imageLoadType","XHR"),this.loaderLocalScheme=n(y,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=n(y,"fx.glow.quality",.1),this.glowFXDistance=n(y,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var R=n(y,"plugins",null),O=u.DefaultScene;R&&(Array.isArray(R)?this.defaultPlugins=R:r(R)&&(this.installGlobalPlugins=h(R,"global",[]),this.installScenePlugins=h(R,"scene",[]),Array.isArray(R.default)?O=R.default:Array.isArray(R.defaultMerge)&&(O=O.concat(R.defaultMerge)))),this.defaultPlugins=O;var F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=n(y,"images.default",F+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=n(y,"images.missing",F+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=n(y,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=x.WEBGL:window.FORCE_CANVAS&&(this.renderType=x.CANVAS))}});o.exports=v},50150:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70616),x=e(61068),u=e(86459),l=e(90185),h=function(n){var r=n.config;if((r.customEnvironment||r.canvas)&&r.renderType===u.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!r.customEnvironment&&!r.canvas&&r.renderType!==u.HEADLESS)if(r.renderType===u.AUTO&&(r.renderType=l.webGL?u.WEBGL:u.CANVAS),r.renderType===u.WEBGL){if(!l.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(r.renderType===u.CANVAS){if(!l.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+r.renderType);r.antialias||x.disableSmoothing();var f=n.scale.baseSize,a=f.width,c=f.height;if(r.canvas?(n.canvas=r.canvas,n.canvas.width=a,n.canvas.height=c):n.canvas=x.create(n,a,c,r.renderType),r.canvasStyle&&(n.canvas.style=r.canvasStyle),r.antialias||d.setCrisp(n.canvas),r.renderType!==u.HEADLESS){var p,v;p=e(91135),v=e(11857),r.renderType===u.WEBGL?n.renderer=new v(n):(n.renderer=new p(n),n.context=n.renderer.gameContext)}};o.exports=h},77291:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86459),x=function(u){var l=u.config;if(!l.hideBanner){var h="WebGL";l.renderType===d.CANVAS?h="Canvas":l.renderType===d.HEADLESS&&(h="Headless");var n=l.audio,r=u.device.audio,f;if(r.webAudio&&!n.disableWebAudio?f="Web Audio":n.noAudio||!r.webAudio&&!r.audioData?f="No Audio":f="HTML5 Audio",u.device.browser.ie)window.console&&console.log("Phaser v"+d.VERSION+" / https://phaser.io");else{var a="",c=[a];if(Array.isArray(l.bannerBackgroundColor)){var p;l.bannerBackgroundColor.forEach(function(m){a=a.concat("%c "),c.push("background: "+m),p=m}),c[c.length-1]="color: "+l.bannerTextColor+"; background: "+p}else a=a.concat("%c "),c.push("color: "+l.bannerTextColor+"; background: "+l.bannerBackgroundColor);c.push("background: transparent"),l.gameTitle&&(a=a.concat(l.gameTitle),l.gameVersion&&(a=a.concat(" v"+l.gameVersion)),l.hidePhaser||(a=a.concat(" / ")));var v="";l.hidePhaser||(a=a.concat("Phaser v"+d.VERSION+v+" ("+h+" | "+f+")")),a=a.concat(" %c "+l.gameURL),c[0]=a,console.log.apply(console,c)}}};o.exports=x},15213:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),x=e(90249),u=e(43474),l=e(61068),h=e(56694),n=e(14033),r=e(85178),f=e(50150),a=e(81078),c=e(77291),p=e(77290),v=e(21546),m=e(6659),y=e(97081),E=e(69898),P=e(91963),S=e(49274),w=e(756),A=e(13553),R=e(38203),O=e(6237),F=e(26617),L=e(26493),D=e(84191),I=new h({initialize:function(V){this.config=new n(V),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new x(this),this.textures=new O(this),this.cache=new u(this),this.registry=new a(this,new m),this.input=new E(this,this.config),this.scene=new A(this,this.config.sceneConfig),this.device=p,this.scale=new w(this,this.config),this.sound=null,this.sound=D.create(this),this.loop=new F(this,this.config.fps),this.plugins=new S(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,v(this.boot.bind(this))},boot:function(){if(!P.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),f(this),r(this),c(this),d(this.canvas,this.config.parent),this.textures.once(R.READY,this.texturesReady,this),this.events.emit(y.BOOT)},texturesReady:function(){this.events.emit(y.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),L(this);var B=this.events;B.on(y.HIDDEN,this.onHidden,this),B.on(y.VISIBLE,this.onVisible,this),B.on(y.BLUR,this.onBlur,this),B.on(y.FOCUS,this.onFocus,this)},step:function(B,V){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Y=this.events;Y.emit(y.PRE_STEP,B,V),Y.emit(y.STEP,B,V),this.scene.update(B,V),Y.emit(y.POST_STEP,B,V);var W=this.renderer;W.preRender(),Y.emit(y.PRE_RENDER,W,B,V),this.scene.render(W),W.postRender(),Y.emit(y.POST_RENDER,W,B,V)}},headlessStep:function(B,V){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var Y=this.events;Y.emit(y.PRE_STEP,B,V),Y.emit(y.STEP,B,V),this.scene.update(B,V),Y.emit(y.POST_STEP,B,V),this.scene.isProcessing=!1,Y.emit(y.PRE_RENDER,null,B,V),Y.emit(y.POST_RENDER,null,B,V)}},onHidden:function(){this.loop.pause(),this.events.emit(y.PAUSE)},pause:function(){var B=this.isPaused;this.isPaused=!0,B||this.events.emit(y.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(y.RESUME)},resume:function(){var B=this.isPaused;this.isPaused=!1,B&&this.events.emit(y.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,V){V===void 0&&(V=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=V},runDestroy:function(){this.scene.destroy(),this.events.emit(y.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(l.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});o.exports=I},26617:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(10850),u=e(72283),l=e(27385),h=new d({initialize:function(r,f){this.game=r,this.raf=new l,this.started=!1,this.running=!1,this.minFps=x(f,"min",5),this.targetFps=x(f,"target",60),this.fpsLimit=x(f,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=u,this.forceSetTimeOut=x(f,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=x(f,"deltaHistory",10),this.panicMax=x(f,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=x(f,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var n=window.performance.now();this.time=n,this.lastTime=n,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=Math.min(this._target,this.deltaHistory[r]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(n){if(this.started)return this;this.started=!0,this.running=!0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=n;var f=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(f,this.forceSetTimeOut,this._target)},smoothDelta:function(n){var r=this.deltaIndex,f=this.deltaHistory,a=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,n=Math.min(n,this._target)),n>this._min&&(n=f[r],n=Math.min(n,this._min)),f[r]=n,this.deltaIndex++,this.deltaIndex>=a&&(this.deltaIndex=0);for(var c=0,p=0;p<a;p++)c+=f[p];return c/=a,c},updateFPS:function(n){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0},stepLimitFPS:function(n){this.now=n;var r=Math.max(0,n-this.lastTime);this.rawDelta=r,this.time+=this.rawDelta,this.smoothStep&&(r=this.smoothDelta(r)),this.delta+=r,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(n,this.delta),this.delta=0),this.lastTime=n,this.frame++},step:function(n){this.now=n;var r=Math.max(0,n-this.lastTime);this.rawDelta=r,this.time+=this.rawDelta,this.smoothStep&&(r=this.smoothDelta(r)),this.delta=r,n>=this.nextFpsUpdate&&this.updateFPS(n),this.framesThisSecond++,this.callback(n,r),this.lastTime=n,this.frame++},tick:function(){var n=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(n):this.step(n)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(n){n===void 0&&(n=!1);var r=window.performance.now();if(!this.running){n&&(this.startTime+=-this.lastTime+(this.lastTime+r));var f=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(f,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});o.exports=h},26493:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97081),x=function(u){var l,h=u.events;if(document.hidden!==void 0)l="visibilitychange";else{var n=["webkit","moz","ms"];n.forEach(function(f){document[f+"Hidden"]!==void 0&&(document.hidden=function(){return document[f+"Hidden"]},l=f+"visibilitychange")})}var r=function(f){document.hidden||f.type==="pause"?h.emit(d.HIDDEN):h.emit(d.VISIBLE)};l&&document.addEventListener(l,r,!1),window.onblur=function(){h.emit(d.BLUR)},window.onfocus=function(){h.emit(d.FOCUS)},window.focus&&u.config.autoFocus&&window.focus()};o.exports=x},41651:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="blur"},5520:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},51673:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="contextlost"},25055:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},23767:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="focus"},57564:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="hidden"},38327:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},43807:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},73652:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="poststep"},780:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},13781:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prestep"},38247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},29129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},34994:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="step"},98704:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="visible"},97081:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BLUR:e(41651),BOOT:e(5520),CONTEXT_LOST:e(51673),DESTROY:e(25055),FOCUS:e(23767),HIDDEN:e(57564),PAUSE:e(38327),POST_RENDER:e(43807),POST_STEP:e(73652),PRE_RENDER:e(780),PRE_STEP:e(13781),READY:e(38247),RESUME:e(29129),STEP:e(34994),VISIBLE:e(98704)}},80293:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Config:e(14033),CreateRenderer:e(50150),DebugHeader:e(77291),Events:e(97081),TimeStep:e(26617),VisibilityHandler:e(26493)}},52780:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(81543),x=e(61068),u=e(10850),l=function(h){var n=u(h,"data",[]),r=u(h,"canvas",null),f=u(h,"palette",d),a=u(h,"pixelWidth",1),c=u(h,"pixelHeight",a),p=u(h,"resizeCanvas",!0),v=u(h,"clearCanvas",!0),m=u(h,"preRender",null),y=u(h,"postRender",null),E=Math.floor(Math.abs(n[0].length*a)),P=Math.floor(Math.abs(n.length*c));r||(r=x.create2D(this,E,P),p=!1,v=!1),p&&(r.width=E,r.height=P);var S=r.getContext("2d",{willReadFrequently:!0});v&&S.clearRect(0,0,E,P),m&&m(r,S);for(var w=0;w<n.length;w++)for(var A=n[w],R=0;R<A.length;R++){var O=A[R];O!=="."&&O!==" "&&(S.fillStyle=f[O],S.fillRect(R*a,w*c,a,c))}return y&&y(r,S),r};o.exports=l},84106:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GenerateTexture:e(52780),Palettes:e(25235)}},81543:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARNE16:e(81543),C64:e(75846),CGA:e(83206),JMP:e(13194),MSX:e(50686)}},63120:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(34631),u=e(38517),l=e(93736),h=new d({Extends:u,initialize:function(r,f,a,c){u.call(this,"CubicBezierCurve"),Array.isArray(r)&&(c=new l(r[6],r[7]),a=new l(r[4],r[5]),f=new l(r[2],r[3]),r=new l(r[0],r[1])),this.p0=r,this.p1=f,this.p2=a,this.p3=c},getStartPoint:function(n){return n===void 0&&(n=new l),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,r){r===void 0&&(r=new l);var f=this.p0,a=this.p1,c=this.p2,p=this.p3;return r.set(x(n,f.x,a.x,c.x,p.x),x(n,f.y,a.y,c.y,p.y))},draw:function(n,r){r===void 0&&(r=32);var f=this.getPoints(r);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var a=1;a<f.length;a++)n.lineTo(f[a].x,f[a].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});h.fromJSON=function(n){var r=n.points,f=new l(r[0],r[1]),a=new l(r[2],r[3]),c=new l(r[4],r[5]),p=new l(r[6],r[7]);return new h(f,a,c,p)},o.exports=h},38517:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(80222),u=e(74118),l=e(93736),h=new d({initialize:function(r){this.type=r,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new l,this._tmpVec2B=new l},draw:function(n,r){return r===void 0&&(r=32),n.strokePoints(this.getPoints(r))},getBounds:function(n,r){n||(n=new u),r===void 0&&(r=16);var f=this.getLength();r>f&&(r=f/2);var a=Math.max(1,Math.round(f/r));return x(this.getSpacedPoints(a),n)},getDistancePoints:function(n){var r=this.getLength(),f=Math.max(1,r/n);return this.getSpacedPoints(f)},getEndPoint:function(n){return n===void 0&&(n=new l),this.getPointAt(1,n)},getLength:function(){var n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[],f,a=this.getPoint(0,this._tmpVec2A),c=0;r.push(0);for(var p=1;p<=n;p++)f=this.getPoint(p/n,this._tmpVec2B),c+=f.distance(a),r.push(c),a.copy(f);return this.cacheArcLengths=r,r},getPointAt:function(n,r){var f=this.getUtoTmapping(n);return this.getPoint(f,r)},getPoints:function(n,r,f){f===void 0&&(f=[]),n||(r?n=this.getLength()/r:n=this.defaultDivisions);for(var a=0;a<=n;a++)f.push(this.getPoint(a/n));return f},getRandomPoint:function(n){return n===void 0&&(n=new l),this.getPoint(Math.random(),n)},getSpacedPoints:function(n,r,f){f===void 0&&(f=[]),n||(r?n=this.getLength()/r:n=this.defaultDivisions);for(var a=0;a<=n;a++){var c=this.getUtoTmapping(a/n,null,n);f.push(this.getPoint(c))}return f},getStartPoint:function(n){return n===void 0&&(n=new l),this.getPointAt(0,n)},getTangent:function(n,r){r===void 0&&(r=new l);var f=1e-4,a=n-f,c=n+f;return a<0&&(a=0),c>1&&(c=1),this.getPoint(a,this._tmpVec2A),this.getPoint(c,r),r.subtract(this._tmpVec2A).normalize()},getTangentAt:function(n,r){var f=this.getUtoTmapping(n);return this.getTangent(f,r)},getTFromDistance:function(n,r){return n<=0?0:this.getUtoTmapping(0,n,r)},getUtoTmapping:function(n,r,f){var a=this.getLengths(f),c=0,p=a.length,v;r?v=Math.min(r,a[p-1]):v=n*a[p-1];for(var m=0,y=p-1,E;m<=y;)if(c=Math.floor(m+(y-m)/2),E=a[c]-v,E<0)m=c+1;else if(E>0)y=c-1;else{y=c;break}if(c=y,a[c]===v)return c/(p-1);var P=a[c],S=a[c+1],w=S-P,A=(v-P)/w;return(c+A)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});o.exports=h},48835:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(38517),u=e(75606),l=e(10850),h=e(23701),n=e(93736),r=new d({Extends:x,initialize:function(a,c,p,v,m,y,E,P){if(typeof a=="object"){var S=a;a=l(S,"x",0),c=l(S,"y",0),p=l(S,"xRadius",0),v=l(S,"yRadius",p),m=l(S,"startAngle",0),y=l(S,"endAngle",360),E=l(S,"clockwise",!1),P=l(S,"rotation",0)}else v===void 0&&(v=p),m===void 0&&(m=0),y===void 0&&(y=360),E===void 0&&(E=!1),P===void 0&&(P=0);x.call(this,"EllipseCurve"),this.p0=new n(a,c),this._xRadius=p,this._yRadius=v,this._startAngle=u(m),this._endAngle=u(y),this._clockwise=E,this._rotation=u(P)},getStartPoint:function(f){return f===void 0&&(f=new n),this.getPoint(0,f)},getResolution:function(f){return f*2},getPoint:function(f,a){a===void 0&&(a=new n);for(var c=Math.PI*2,p=this._endAngle-this._startAngle,v=Math.abs(p)<Number.EPSILON;p<0;)p+=c;for(;p>c;)p-=c;p<Number.EPSILON&&(v?p=0:p=c),this._clockwise&&!v&&(p===c?p=-c:p=p-c);var m=this._startAngle+f*p,y=this.p0.x+this._xRadius*Math.cos(m),E=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var P=Math.cos(this._rotation),S=Math.sin(this._rotation),w=y-this.p0.x,A=E-this.p0.y;y=w*P-A*S+this.p0.x,E=w*S+A*P+this.p0.y}return a.set(y,E)},setXRadius:function(f){return this.xRadius=f,this},setYRadius:function(f){return this.yRadius=f,this},setWidth:function(f){return this.xRadius=f/2,this},setHeight:function(f){return this.yRadius=f/2,this},setStartAngle:function(f){return this.startAngle=f,this},setEndAngle:function(f){return this.endAngle=f,this},setClockwise:function(f){return this.clockwise=f,this},setRotation:function(f){return this.rotation=f,this},x:{get:function(){return this.p0.x},set:function(f){this.p0.x=f}},y:{get:function(){return this.p0.y},set:function(f){this.p0.y=f}},xRadius:{get:function(){return this._xRadius},set:function(f){this._xRadius=f}},yRadius:{get:function(){return this._yRadius},set:function(f){this._yRadius=f}},startAngle:{get:function(){return h(this._startAngle)},set:function(f){this._startAngle=u(f)}},endAngle:{get:function(){return h(this._endAngle)},set:function(f){this._endAngle=u(f)}},clockwise:{get:function(){return this._clockwise},set:function(f){this._clockwise=f}},angle:{get:function(){return h(this._rotation)},set:function(f){this._rotation=u(f)}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=f}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:h(this._startAngle),endAngle:h(this._endAngle),clockwise:this._clockwise,rotation:h(this._rotation)}}});r.fromJSON=function(f){return new r(f)},o.exports=r},58084:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(38517),u=e(80222),l=e(74118),h=e(93736),n=new d({Extends:x,initialize:function(f,a){x.call(this,"LineCurve"),Array.isArray(f)&&(a=new h(f[2],f[3]),f=new h(f[0],f[1])),this.p0=f,this.p1=a,this.arcLengthDivisions=1},getBounds:function(r){return r===void 0&&(r=new l),u([this.p0,this.p1],r)},getStartPoint:function(r){return r===void 0&&(r=new h),r.copy(this.p0)},getResolution:function(r){return r===void 0&&(r=1),r},getPoint:function(r,f){return f===void 0&&(f=new h),r===1?f.copy(this.p1):(f.copy(this.p1).subtract(this.p0).scale(r).add(this.p0),f)},getPointAt:function(r,f){return this.getPoint(r,f)},getTangent:function(r,f){return f===void 0&&(f=new h),f.copy(this.p1).subtract(this.p0).normalize(),f},getUtoTmapping:function(r,f,a){var c;if(f){var p=this.getLengths(a),v=p[p.length-1],m=Math.min(f,v);c=m/v}else c=r;return c},draw:function(r){return r.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});n.fromJSON=function(r){var f=r.points,a=new h(f[0],f[1]),c=new h(f[2],f[3]);return new n(a,c)},o.exports=n},64761:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(38517),u=e(16252),l=e(93736),h=new d({Extends:x,initialize:function(r,f,a){x.call(this,"QuadraticBezierCurve"),Array.isArray(r)&&(a=new l(r[4],r[5]),f=new l(r[2],r[3]),r=new l(r[0],r[1])),this.p0=r,this.p1=f,this.p2=a},getStartPoint:function(n){return n===void 0&&(n=new l),n.copy(this.p0)},getResolution:function(n){return n},getPoint:function(n,r){r===void 0&&(r=new l);var f=this.p0,a=this.p1,c=this.p2;return r.set(u(n,f.x,a.x,c.x),u(n,f.y,a.y,c.y))},draw:function(n,r){r===void 0&&(r=32);var f=this.getPoints(r);n.beginPath(),n.moveTo(this.p0.x,this.p0.y);for(var a=1;a<f.length;a++)n.lineTo(f[a].x,f[a].y);return n.strokePath(),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});h.fromJSON=function(n){var r=n.points,f=new l(r[0],r[1]),a=new l(r[2],r[3]),c=new l(r[4],r[5]);return new h(f,a,c)},o.exports=h},11956:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14976),x=e(56694),u=e(38517),l=e(93736),h=new x({Extends:u,initialize:function(r){r===void 0&&(r=[]),u.call(this,"SplineCurve"),this.points=[],this.addPoints(r)},addPoints:function(n){for(var r=0;r<n.length;r++){var f=new l;typeof n[r]=="number"?(f.x=n[r],f.y=n[r+1],r++):Array.isArray(n[r])?(f.x=n[r][0],f.y=n[r][1]):(f.x=n[r].x,f.y=n[r].y),this.points.push(f)}return this},addPoint:function(n,r){var f=new l(n,r);return this.points.push(f),f},getStartPoint:function(n){return n===void 0&&(n=new l),n.copy(this.points[0])},getResolution:function(n){return n*this.points.length},getPoint:function(n,r){r===void 0&&(r=new l);var f=this.points,a=(f.length-1)*n,c=Math.floor(a),p=a-c,v=f[c===0?c:c-1],m=f[c],y=f[c>f.length-2?f.length-1:c+1],E=f[c>f.length-3?f.length-1:c+2];return r.set(d(p,v.x,m.x,y.x,E.x),d(p,v.y,m.y,y.y,E.y))},toJSON:function(){for(var n=[],r=0;r<this.points.length;r++)n.push(this.points[r].x),n.push(this.points[r].y);return{type:this.type,points:n}}});h.fromJSON=function(n){return new h(n.points)},o.exports=h},73962:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Path:e(12822),MoveTo:e(53639),CubicBezier:e(63120),Curve:e(38517),Ellipse:e(48835),Line:e(58084),QuadraticBezier:e(64761),Spline:e(11956)}},53639:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93736),u=new d({initialize:function(h,n){this.active=!1,this.p0=new x(h,n)},getPoint:function(l,h){return h===void 0&&(h=new x),h.copy(this.p0)},getPointAt:function(l,h){return this.getPoint(l,h)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});o.exports=u},12822:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(63120),u=e(48835),l=e(61286),h=e(58084),n=e(53639),r=e(64761),f=e(74118),a=e(11956),c=e(93736),p=e(83392),v=new d({initialize:function(y,E){y===void 0&&(y=0),E===void 0&&(E=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new c,this._tmpVec2A=new c,this._tmpVec2B=new c,typeof y=="object"?this.fromJSON(y):this.startPoint.set(y,E)},add:function(m){return this.curves.push(m),this},circleTo:function(m,y,E){return y===void 0&&(y=!1),this.ellipseTo(m,m,0,360,y,E)},closePath:function(){var m=this.curves[0].getPoint(0),y=this.curves[this.curves.length-1].getPoint(1);return m.equals(y)||this.curves.push(new h(y,m)),this},cubicBezierTo:function(m,y,E,P,S,w){var A=this.getEndPoint(),R,O,F;return m instanceof c?(R=m,O=y,F=E):(R=new c(E,P),O=new c(S,w),F=new c(m,y)),this.add(new x(A,R,O,F))},quadraticBezierTo:function(m,y,E,P){var S=this.getEndPoint(),w,A;return m instanceof c?(w=m,A=y):(w=new c(E,P),A=new c(m,y)),this.add(new r(S,w,A))},draw:function(m,y){for(var E=0;E<this.curves.length;E++){var P=this.curves[E];!P.active||P.draw(m,y)}return m},ellipseTo:function(m,y,E,P,S,w){var A=new u(0,0,m,y,E,P,S,w),R=this.getEndPoint(this._tmpVec2A),O=A.getStartPoint(this._tmpVec2B);return R.subtract(O),A.x=R.x,A.y=R.y,this.add(A)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var y=0;y<m.curves.length;y++){var E=m.curves[y];switch(E.type){case"LineCurve":this.add(h.fromJSON(E));break;case"EllipseCurve":this.add(u.fromJSON(E));break;case"SplineCurve":this.add(a.fromJSON(E));break;case"CubicBezierCurve":this.add(x.fromJSON(E));break;case"QuadraticBezierCurve":this.add(r.fromJSON(E));break}}return this},getBounds:function(m,y){m===void 0&&(m=new f),y===void 0&&(y=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var E=new f,P=p.MIN_SAFE_INTEGER,S=p.MIN_SAFE_INTEGER,w=0;w<this.curves.length;w++){var A=this.curves[w];!A.active||(A.getBounds(E,y),m.x=Math.min(m.x,E.x),m.y=Math.min(m.y,E.y),P=Math.max(P,E.right),S=Math.max(S,E.bottom))}return m.right=P,m.bottom=S,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],y=0,E=0;E<this.curves.length;E++)y+=this.curves[E].getLength(),m.push(y);return this.cacheLengths=m,m},getCurveAt:function(m){for(var y=m*this.getLength(),E=this.getCurveLengths(),P=0;P<E.length;){if(E[P]>=y)return this.curves[P];P++}return null},getEndPoint:function(m){return m===void 0&&(m=new c),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,y){y===void 0&&(y=new c);for(var E=m*this.getLength(),P=this.getCurveLengths(),S=0;S<P.length;){if(P[S]>=E){var w=P[S]-E,A=this.curves[S],R=A.getLength(),O=R===0?0:1-w/R;return A.getPointAt(O,y)}S++}return null},getPoints:function(m){m===void 0&&(m=12);for(var y=[],E,P=0;P<this.curves.length;P++){var S=this.curves[P];if(!!S.active)for(var w=S.getResolution(m),A=S.getPoints(w),R=0;R<A.length;R++){var O=A[R];E&&E.equals(O)||(y.push(O),E=O)}}return this.autoClose&&y.length>1&&!y[y.length-1].equals(y[0])&&y.push(y[0]),y},getRandomPoint:function(m){return m===void 0&&(m=new c),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var y=[],E=0;E<=m;E++)y.push(this.getPoint(E/m));return this.autoClose&&y.push(y[0]),y},getStartPoint:function(m){return m===void 0&&(m=new c),m.copy(this.startPoint)},getTangent:function(m,y){y===void 0&&(y=new c);for(var E=m*this.getLength(),P=this.getCurveLengths(),S=0;S<P.length;){if(P[S]>=E){var w=P[S]-E,A=this.curves[S],R=A.getLength(),O=R===0?0:1-w/R;return A.getTangentAt(O,y)}S++}return null},lineTo:function(m,y){m instanceof c?this._tmpVec2B.copy(m):this._tmpVec2B.set(m,y);var E=this.getEndPoint(this._tmpVec2A);return this.add(new h([E.x,E.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new a(m))},moveTo:function(m,y){return m instanceof c?this.add(new n(m.x,m.y)):this.add(new n(m,y))},toJSON:function(){for(var m=[],y=0;y<this.curves.length;y++)m.push(this.curves[y].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});l.register("path",function(m,y){return new v(m,y)}),o.exports=v},81078:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(35026),u=new d({initialize:function(h,n){this.parent=h,this.events=n,n||(this.events=h.events?h.events:h),this.list={},this.values={},this._frozen=!1,!h.hasOwnProperty("sys")&&this.events&&this.events.once(x.DESTROY,this.destroy,this)},get:function(l){var h=this.list;if(Array.isArray(l)){for(var n=[],r=0;r<l.length;r++)n.push(h[l[r]]);return n}else return h[l]},getAll:function(){var l={};for(var h in this.list)this.list.hasOwnProperty(h)&&(l[h]=this.list[h]);return l},query:function(l){var h={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(l)&&(h[n]=this.list[n]);return h},set:function(l,h){if(this._frozen)return this;if(typeof l=="string")return this.setValue(l,h);for(var n in l)this.setValue(n,l[n]);return this},inc:function(l,h){if(this._frozen)return this;h===void 0&&(h=1);var n=this.get(l);return n===void 0&&(n=0),this.set(l,n+h),this},toggle:function(l){return this._frozen?this:(this.set(l,!this.get(l)),this)},setValue:function(l,h){if(this._frozen)return this;if(this.has(l))this.values[l]=h;else{var n=this,r=this.list,f=this.events,a=this.parent;Object.defineProperty(this.values,l,{enumerable:!0,configurable:!0,get:function(){return r[l]},set:function(c){if(!n._frozen){var p=r[l];r[l]=c,f.emit(x.CHANGE_DATA,a,l,c,p),f.emit(x.CHANGE_DATA_KEY+l,a,c,p)}}}),r[l]=h,f.emit(x.SET_DATA,a,l,h)}return this},each:function(l,h){for(var n=[this.parent,null,void 0],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var f in this.list)n[1]=f,n[2]=this.list[f],l.apply(h,n);return this},merge:function(l,h){h===void 0&&(h=!0);for(var n in l)l.hasOwnProperty(n)&&(h||!h&&!this.has(n))&&this.setValue(n,l[n]);return this},remove:function(l){if(this._frozen)return this;if(Array.isArray(l))for(var h=0;h<l.length;h++)this.removeValue(l[h]);else return this.removeValue(l);return this},removeValue:function(l){if(this.has(l)){var h=this.list[l];delete this.list[l],delete this.values[l],this.events.emit(x.REMOVE_DATA,this.parent,l,h)}return this},pop:function(l){var h=void 0;return!this._frozen&&this.has(l)&&(h=this.list[l],delete this.list[l],delete this.values[l],this.events.emit(x.REMOVE_DATA,this.parent,l,h)),h},has:function(l){return this.list.hasOwnProperty(l)},setFreeze:function(l){return this._frozen=l,this},reset:function(){for(var l in this.list)delete this.list[l],delete this.values[l];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(x.CHANGE_DATA),this.events.off(x.SET_DATA),this.events.off(x.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(l){this._frozen=!!l}},count:{get:function(){var l=0;for(var h in this.list)this.list[h]!==void 0&&l++;return l}}});o.exports=u},76508:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(81078),u=e(91963),l=e(7599),h=new d({Extends:x,initialize:function(r){x.call(this,r,r.sys.events),this.scene=r,this.systems=r.sys,r.sys.events.once(l.BOOT,this.boot,this),r.sys.events.on(l.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){x.prototype.destroy.call(this),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});u.register("DataManagerPlugin",h,"data"),o.exports=h},73569:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata"},15590:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="changedata-"},37669:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},87090:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedata"},90142:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="setdata"},35026:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CHANGE_DATA:e(73569),CHANGE_DATA_KEY:e(15590),DESTROY:e(37669),REMOVE_DATA:e(87090),SET_DATA:e(90142)}},1999:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DataManager:e(81078),DataManagerPlugin:e(76508),Events:e(35026)}},10720:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1350),x={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function u(){if(typeof importScripts=="function")return x;x.audioData=!!window.Audio,x.webAudio=!!(window.AudioContext||window.webkitAudioContext);var l=document.createElement("audio"),h=!!l.canPlayType;try{if(h){var n=function(a,c){var p=l.canPlayType("audio/"+a).replace(/^no$/,"");return Boolean(c?p||l.canPlayType("audio/"+c).replace(/^no$/,""):p)};if(x.ogg=n('ogg; codecs="vorbis"'),x.opus=n('ogg; codecs="opus"',"opus"),x.mp3=n("mpeg"),x.wav=n("wav"),x.m4a=n("x-m4a"),x.aac=n("aac"),x.flac=n("flac","x-flac"),x.webm=n('webm; codecs="vorbis"'),l.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(d.edge)x.dolby=!0;else if(d.safari&&d.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var r=parseInt(RegExp.$1,10),f=parseInt(RegExp.$2,10);(r===10&&f>=11||r>10)&&(x.dolby=!0)}}}}catch{}return x}o.exports=u()},1350:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),x={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function u(){var l=navigator.userAgent;return/Edg\/\d+/.test(l)?(x.edge=!0,x.es2019=!0):/OPR/.test(l)?(x.opera=!0,x.es2019=!0):/Chrome\/(\d+)/.test(l)&&!d.windowsPhone?(x.chrome=!0,x.chromeVersion=parseInt(RegExp.$1,10),x.es2019=x.chromeVersion>69):/Firefox\D+(\d+)/.test(l)?(x.firefox=!0,x.firefoxVersion=parseInt(RegExp.$1,10),x.es2019=x.firefoxVersion>10):/AppleWebKit/.test(l)&&d.iOS?x.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(l)?(x.ie=!0,x.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(l)&&!d.windowsPhone?(x.safari=!0,x.safariVersion=parseInt(RegExp.$1,10),x.es2019=x.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(l)&&(x.ie=!0,x.trident=!0,x.tridentVersion=parseInt(RegExp.$1,10),x.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(l)&&(x.silk=!0),x}o.exports=u()},98581:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x={supportInverseAlpha:!1,supportNewBlendModes:!1};function u(){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",f=new Image;return f.onload=function(){var a=new Image;a.onload=function(){var c=d.create2D(a,6),p=c.getContext("2d",{willReadFrequently:!0});if(p.globalCompositeOperation="multiply",p.drawImage(f,0,0),p.drawImage(a,2,0),!p.getImageData(2,0,1,1))return!1;var v=p.getImageData(2,0,1,1).data;d.remove(a),x.supportNewBlendModes=v[0]===255&&v[1]===0&&v[2]===0},a.src=n+"/wCKxvRF"+r},f.src=n+"AP804Oa6"+r,!1}function l(){var n=d.create2D(this,2),r=n.getContext("2d",{willReadFrequently:!0});r.fillStyle="rgba(10, 20, 30, 0.5)",r.fillRect(0,0,1,1);var f=r.getImageData(0,0,1,1);if(f===null)return!1;r.putImageData(f,1,0);var a=r.getImageData(1,0,1,1),c=a.data[0]===f.data[0]&&a.data[1]===f.data[1]&&a.data[2]===f.data[2]&&a.data[3]===f.data[3];return d.remove(this),c}function h(){return typeof importScripts!="function"&&document!==void 0&&(x.supportNewBlendModes=u(),x.supportInverseAlpha=l()),x}o.exports=h()},90185:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),x=e(1350),u=e(61068),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function h(){var r=new ArrayBuffer(4),f=new Uint8Array(r),a=new Uint32Array(r);return f[0]=161,f[1]=178,f[2]=195,f[3]=212,a[0]===3569595041?!0:a[0]===2712847316?!1:null}function n(){if(typeof importScripts=="function")return l;l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch{l.localStorage=!1}l.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,l.fileSystem=!!window.requestFileSystem;var r=!1,f=function(){if(window.WebGLRenderingContext)try{var a=u.createWebGL(this),c=a.getContext("webgl")||a.getContext("experimental-webgl"),p=u.create2D(this),v=p.getContext("2d",{willReadFrequently:!0}),m=v.createImageData(1,1);return r=m.data instanceof Uint8ClampedArray,u.remove(a),u.remove(p),!!c}catch{return!1}return!1};return l.webGL=f(),l.worker=!!window.Worker,l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,x.firefox&&x.firefoxVersion<21&&(l.getUserMedia=!1),!d.iOS&&(x.ie||x.firefox||x.chrome)&&(l.canvasBitBltShift=!0),(x.safari||x.mobileSafari)&&(l.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(l.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(l.littleEndian=h()),l.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&l.littleEndian!==null&&r,l}o.exports=n()},33553:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return T;var d,x="Fullscreen",u="FullScreen",l=["request"+x,"request"+u,"webkitRequest"+x,"webkitRequest"+u,"msRequest"+x,"msRequest"+u,"mozRequest"+u,"mozRequest"+x];for(d=0;d<l.length;d++)if(document.documentElement[l[d]]){T.available=!0,T.request=l[d];break}var h=["cancel"+u,"exit"+x,"webkitCancel"+u,"webkitExit"+x,"msCancel"+u,"msExit"+x,"mozCancel"+u,"mozExit"+x];if(T.available){for(d=0;d<h.length;d++)if(document[h[d]]){T.cancel=h[d];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(T.keyboard=!0),Object.defineProperty(T,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),T}o.exports=e()},95872:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1350),x={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function u(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(x.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(x.mspointer=!0),navigator.getGamepads&&(x.gamepads=!0),"onwheel"in window||d.ie&&"WheelEvent"in window?x.wheelEvent="wheel":"onmousewheel"in window?x.wheelEvent="mousewheel":d.firefox&&"MouseScrollEvent"in window&&(x.wheelEvent="DOMMouseScroll")),x}o.exports=u()},36580:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function e(){if(typeof importScripts=="function")return T;var d=navigator.userAgent;/Windows/.test(d)?T.windows=!0:/Mac OS/.test(d)&&!/like Mac OS/.test(d)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(T.iOS=!0,T.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),T.iOSVersion=parseInt(RegExp.$1,10)):T.macOS=!0:/Android/.test(d)?T.android=!0:/Linux/.test(d)?T.linux=!0:/iP[ao]d|iPhone/i.test(d)?(T.iOS=!0,navigator.appVersion.match(/OS (\d+)/),T.iOSVersion=parseInt(RegExp.$1,10),T.iPhone=d.toLowerCase().indexOf("iphone")!==-1,T.iPad=d.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(d)||/\bKF[A-Z][A-Z]+/.test(d)||/Silk.*Mobile Safari/.test(d)?T.kindle=!0:/CrOS/.test(d)&&(T.chromeOS=!0),(/Windows Phone/i.test(d)||/IEMobile/i.test(d))&&(T.android=!1,T.iOS=!1,T.macOS=!1,T.windows=!0,T.windowsPhone=!0);var x=/Silk/.test(d);return(T.windows||T.macOS||T.linux&&!x||T.chromeOS)&&(T.desktop=!0),(T.windowsPhone||/Windows NT/i.test(d)&&/Touch/i.test(d))&&(T.desktop=!1),navigator.standalone&&(T.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(T.cordova=!0),window.ejecta!==void 0&&(T.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(T.node=!0),T.node&&typeof process.versions=="object"&&(T.nodeWebkit=!!process.versions["node-webkit"],T.electron=!!process.versions.electron),/Crosswalk/.test(d)&&(T.crosswalk=!0),T.pixelRatio=window.devicePixelRatio||1,T}o.exports=e()},53861:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function u(){if(typeof importScripts=="function")return x;var l=document.createElement("video"),h=!!l.canPlayType,n=/^no$/;try{h&&(l.canPlayType('video/ogg; codecs="theora"').replace(n,"")&&(x.ogg=!0),l.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(n,"")&&(x.h264=!0,x.mp4=!0),l.canPlayType("video/x-m4v").replace(n,"")&&(x.m4v=!0),l.canPlayType('video/webm; codecs="vp8, vorbis"').replace(n,"")&&(x.webm=!0),l.canPlayType('video/webm; codecs="vp9"').replace(n,"")&&(x.vp9=!0),l.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(n,"")&&(x.hls=!0))}catch{}return l.parentNode&&l.parentNode.removeChild(l),x.getVideoURL=function(r){Array.isArray(r)||(r=[r]);for(var f=0;f<r.length;f++){var a=d(r[f],"url",r[f]);if(a.indexOf("blob:")===0)return{url:a,type:""};var c;if(a.indexOf("data:")===0?c=a.split(",")[0].match(/\/(.*?);/):c=a.match(/\.([a-zA-Z0-9]+)($|\?)/),c=d(r[f],"type",c?c[1]:"").toLowerCase(),x[c])return{url:a,type:c}}return null},x}o.exports=u()},77290:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={os:e(36580),browser:e(1350),features:e(90185),input:e(95872),audio:e(10720),video:e(53861),fullscreen:e(33553),canvasFeatures:e(98581)}},65246:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new Float32Array(20),u=new d({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(l){return this._matrix.set(l),this._dirty=!0,this},reset:function(){var l=this._matrix;return l.fill(0),l[0]=1,l[6]=1,l[12]=1,l[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var l=this._data;return this._dirty&&(l.set(this._matrix),l[4]/=255,l[9]/=255,l[14]/=255,l[19]/=255,this._dirty=!1),l},brightness:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var n=l;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],h)},saturate:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var n=l*2/3+1,r=(n-1)*-.5;return this.multiply([n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0],h)},desaturate:function(l){return l===void 0&&(l=!1),this.saturate(-1,l)},hue:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1),l=l/180*Math.PI;var n=Math.cos(l),r=Math.sin(l),f=.213,a=.715,c=.072;return this.multiply([f+n*(1-f)+r*-f,a+n*-a+r*-a,c+n*-c+r*(1-c),0,0,f+n*-f+r*.143,a+n*(1-a)+r*.14,c+n*-c+r*-.283,0,0,f+n*-f+r*-(1-f),a+n*-a+r*a,c+n*(1-c)+r*c,0,0,0,0,0,1,0],h)},grayscale:function(l,h){return l===void 0&&(l=1),h===void 0&&(h=!1),this.saturate(-l,h)},blackWhite:function(l){return l===void 0&&(l=!1),this.multiply(u.BLACK_WHITE,l)},contrast:function(l,h){l===void 0&&(l=0),h===void 0&&(h=!1);var n=l+1,r=-.5*(n-1);return this.multiply([n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0],h)},negative:function(l){return l===void 0&&(l=!1),this.multiply(u.NEGATIVE,l)},desaturateLuminance:function(l){return l===void 0&&(l=!1),this.multiply(u.DESATURATE_LUMINANCE,l)},sepia:function(l){return l===void 0&&(l=!1),this.multiply(u.SEPIA,l)},night:function(l,h){return l===void 0&&(l=.1),h===void 0&&(h=!1),this.multiply([l*-2,-l,0,0,0,-l,0,l,0,0,0,l,l*2,0,0,0,0,0,1,0],h)},lsd:function(l){return l===void 0&&(l=!1),this.multiply(u.LSD,l)},brown:function(l){return l===void 0&&(l=!1),this.multiply(u.BROWN,l)},vintagePinhole:function(l){return l===void 0&&(l=!1),this.multiply(u.VINTAGE,l)},kodachrome:function(l){return l===void 0&&(l=!1),this.multiply(u.KODACHROME,l)},technicolor:function(l){return l===void 0&&(l=!1),this.multiply(u.TECHNICOLOR,l)},polaroid:function(l){return l===void 0&&(l=!1),this.multiply(u.POLAROID,l)},shiftToBGR:function(l){return l===void 0&&(l=!1),this.multiply(u.SHIFT_BGR,l)},multiply:function(l,h){h===void 0&&(h=!1),h||this.reset();var n=this._matrix,r=x;return r.set(n),n.set([r[0]*l[0]+r[1]*l[5]+r[2]*l[10]+r[3]*l[15],r[0]*l[1]+r[1]*l[6]+r[2]*l[11]+r[3]*l[16],r[0]*l[2]+r[1]*l[7]+r[2]*l[12]+r[3]*l[17],r[0]*l[3]+r[1]*l[8]+r[2]*l[13]+r[3]*l[18],r[0]*l[4]+r[1]*l[9]+r[2]*l[14]+r[3]*l[19]+r[4],r[5]*l[0]+r[6]*l[5]+r[7]*l[10]+r[8]*l[15],r[5]*l[1]+r[6]*l[6]+r[7]*l[11]+r[8]*l[16],r[5]*l[2]+r[6]*l[7]+r[7]*l[12]+r[8]*l[17],r[5]*l[3]+r[6]*l[8]+r[7]*l[13]+r[8]*l[18],r[5]*l[4]+r[6]*l[9]+r[7]*l[14]+r[8]*l[19]+r[9],r[10]*l[0]+r[11]*l[5]+r[12]*l[10]+r[13]*l[15],r[10]*l[1]+r[11]*l[6]+r[12]*l[11]+r[13]*l[16],r[10]*l[2]+r[11]*l[7]+r[12]*l[12]+r[13]*l[17],r[10]*l[3]+r[11]*l[8]+r[12]*l[13]+r[13]*l[18],r[10]*l[4]+r[11]*l[9]+r[12]*l[14]+r[13]*l[19]+r[14],r[15]*l[0]+r[16]*l[5]+r[17]*l[10]+r[18]*l[15],r[15]*l[1]+r[16]*l[6]+r[17]*l[11]+r[18]*l[16],r[15]*l[2]+r[16]*l[7]+r[17]*l[12]+r[18]*l[17],r[15]*l[3]+r[16]*l[8]+r[17]*l[13]+r[18]*l[18],r[15]*l[4]+r[16]*l[9]+r[17]*l[14]+r[18]*l[19]+r[19]]),this._dirty=!0,this}});u.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],u.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],u.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],u.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],u.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],u.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],u.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],u.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],u.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],u.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],u.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],o.exports=u},39298:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72283),u=new d({initialize:function(h,n,r){this._rgb=[0,0,0],this.onChangeCallback=x,this.dirty=!1,this.set(h,n,r)},set:function(l,h,n){return l===void 0&&(l=0),h===void 0&&(h=0),n===void 0&&(n=0),this._rgb=[l,h,n],this.onChange(),this},equals:function(l,h,n){var r=this._rgb;return r[0]===l&&r[1]===h&&r[2]===n},onChange:function(){this.dirty=!0;var l=this._rgb;this.onChangeCallback.call(this,l[0],l[1],l[2])},r:{get:function(){return this._rgb[0]},set:function(l){this._rgb[0]=l,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(l){this._rgb[1]=l,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(l){this._rgb[2]=l,this.onChange()}},destroy:function(){this.onChangeCallback=null}});o.exports=u},84093:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};o.exports=T},32058:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(59994),u=e(73174),l=e(28417),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)+f),u(n,d(r)+a),n};o.exports=h},85535:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(40163),u=e(73174),l=e(74465),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)-f),u(n,d(r)+a),n};o.exports=h},9605:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(70271),u=e(73174),l=e(19298),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)+f),u(n,d(r)+a),n};o.exports=h},22529:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21843),x=e(59994),u=e(29568),l=function(h,n,r,f){return r===void 0&&(r=0),f===void 0&&(f=0),d(h,x(n)+r,u(n)+f),h};o.exports=l},5739:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),x=e(40163),u=e(81711),l=e(74465),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)-f),u(n,d(r)+a),n};o.exports=h},40327:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),x=[];x[d.BOTTOM_CENTER]=e(32058),x[d.BOTTOM_LEFT]=e(85535),x[d.BOTTOM_RIGHT]=e(9605),x[d.CENTER]=e(22529),x[d.LEFT_CENTER]=e(5739),x[d.RIGHT_CENTER]=e(27683),x[d.TOP_CENTER]=e(96439),x[d.TOP_LEFT]=e(81447),x[d.TOP_RIGHT]=e(47888),x[d.LEFT_BOTTOM]=x[d.BOTTOM_LEFT],x[d.LEFT_TOP]=x[d.TOP_LEFT],x[d.RIGHT_BOTTOM]=x[d.BOTTOM_RIGHT],x[d.RIGHT_TOP]=x[d.TOP_RIGHT];var u=function(l,h,n,r,f){return x[n](l,h,r,f)};o.exports=u},27683:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),x=e(70271),u=e(81711),l=e(19298),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)+f),u(n,d(r)+a),n};o.exports=h},96439:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59994),x=e(47196),u=e(28417),l=e(84349),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)+f),l(n,x(r)-a),n};o.exports=h},81447:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),x=e(47196),u=e(74465),l=e(84349),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)-f),l(n,x(r)-a),n};o.exports=h},47888:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),x=e(47196),u=e(19298),l=e(84349),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)+f),l(n,x(r)-a),n};o.exports=h},46997:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:e(32058),BottomLeft:e(85535),BottomRight:e(9605),Center:e(22529),LeftCenter:e(5739),QuickSet:e(40327),RightCenter:e(27683),TopCenter:e(96439),TopLeft:e(81447),TopRight:e(47888)}},93545:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),x=e(98611),u={In:e(46997),To:e(86639)};u=x(!1,u,d),o.exports=u},27118:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(59994),u=e(28417),l=e(84349),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,x(r)+f),l(n,d(r)+a),n};o.exports=h},84469:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(40163),u=e(74465),l=e(84349),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,x(r)-f),l(n,d(r)+a),n};o.exports=h},51577:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(70271),u=e(19298),l=e(84349),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,x(r)+f),l(n,d(r)+a),n};o.exports=h},90271:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(40163),u=e(73174),l=e(19298),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)-f),u(n,d(r)+a),n};o.exports=h},30466:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),x=e(40163),u=e(81711),l=e(19298),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)-f),u(n,d(r)+a),n};o.exports=h},50087:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),x=e(47196),u=e(19298),l=e(84349),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)-f),l(n,x(r)-a),n};o.exports=h},82590:(o,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),x=[];x[d.BOTTOM_CENTER]=e(27118),x[d.BOTTOM_LEFT]=e(84469),x[d.BOTTOM_RIGHT]=e(51577),x[d.LEFT_BOTTOM]=e(90271),x[d.LEFT_CENTER]=e(30466),x[d.LEFT_TOP]=e(50087),x[d.RIGHT_BOTTOM]=e(13555),x[d.RIGHT_CENTER]=e(99049),x[d.RIGHT_TOP]=e(67788),x[d.TOP_CENTER]=e(78170),x[d.TOP_LEFT]=e(54145),x[d.TOP_RIGHT]=e(75548);var u=function(l,h,n,r,f){return x[n](l,h,r,f)};o.exports=u},13555:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(70271),u=e(73174),l=e(74465),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)+f),u(n,d(r)+a),n};o.exports=h},99049:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29568),x=e(70271),u=e(81711),l=e(74465),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,x(r)+f),u(n,d(r)+a),n};o.exports=h},67788:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),x=e(47196),u=e(74465),l=e(84349),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),u(n,d(r)+f),l(n,x(r)-a),n};o.exports=h},78170:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59994),x=e(47196),u=e(73174),l=e(28417),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,d(r)+f),u(n,x(r)-a),n};o.exports=h},54145:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(40163),x=e(47196),u=e(73174),l=e(74465),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,d(r)-f),u(n,x(r)-a),n};o.exports=h},75548:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70271),x=e(47196),u=e(73174),l=e(19298),h=function(n,r,f,a){return f===void 0&&(f=0),a===void 0&&(a=0),l(n,d(r)+f),u(n,x(r)-a),n};o.exports=h},86639:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BottomCenter:e(27118),BottomLeft:e(84469),BottomRight:e(51577),LeftBottom:e(90271),LeftCenter:e(30466),LeftTop:e(50087),QuickSet:e(82590),RightBottom:e(13555),RightCenter:e(99049),RightTop:e(67788),TopCenter:e(78170),TopLeft:e(54145),TopRight:e(75548)}},21843:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28417),x=e(81711),u=function(l,h,n){return d(l,h),x(l,n)};o.exports=u},97328:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y+e.height-e.height*e.originY};o.exports=T},7126:(o,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97328),x=e(40163),u=e(70271),l=e(47196),h=e(74118),n=function(r,f){f===void 0&&(f=new h);var a=x(r),c=l(r);return f.x=a,f.y=c,f.width=u(r)-a,f.height=d(r)-c,f};o.exports=n},59994:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX+e.width*.5};o.exports=T},29568:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY+e.height*.5};o.exports=T},40163:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x-e.width*e.originX};o.exports=T},52088:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.originX};o.exports=T},23379:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height*e.originY};o.exports=T},70271:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x+e.width-e.width*e.originX};o.exports=T},47196:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.y-e.height*e.originY};o.exports=T},73174:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.y=d-e.height+e.height*e.originY,e};o.exports=T},28417:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.width*e.originX;return e.x=d+x-e.width*.5,e};o.exports=T},81711:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.height*e.originY;return e.y=d+x-e.height*.5,e};o.exports=T},74465:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x=d+e.width*e.originX,e};o.exports=T},19298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x=d-e.width+e.width*e.originX,e};o.exports=T},84349:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.y=d+e.height*e.originY,e};o.exports=T},15252:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CenterOn:e(21843),GetBottom:e(97328),GetBounds:e(7126),GetCenterX:e(59994),GetCenterY:e(29568),GetLeft:e(40163),GetOffsetX:e(52088),GetOffsetY:e(23379),GetRight:e(70271),GetTop:e(47196),SetBottom:e(73174),SetCenterX:e(28417),SetCenterY:e(81711),SetLeft:e(74465),SetRight:e(19298),SetTop:e(84349)}},70616:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCrisp:function(e){var d=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return d.forEach(function(x){e.style["image-rendering"]=x}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};o.exports=T},61068:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86459),x=e(8213),u=[],l=!1,h=function(){var n=function(E,P,S,w,A){P===void 0&&(P=1),S===void 0&&(S=1),w===void 0&&(w=d.CANVAS),A===void 0&&(A=!1);var R,O=a(w);return O===null?(O={parent:E,canvas:document.createElement("canvas"),type:w},w===d.CANVAS&&u.push(O),R=O.canvas):(O.parent=E,R=O.canvas),A&&(O.parent=R),R.width=P,R.height=S,l&&w===d.CANVAS&&x.disable(R.getContext("2d",{willReadFrequently:!1})),R},r=function(E,P,S){return n(E,P,S,d.CANVAS)},f=function(E,P,S){return n(E,P,S,d.WEBGL)},a=function(E){if(E===void 0&&(E=d.CANVAS),E===d.WEBGL)return null;for(var P=0;P<u.length;P++){var S=u[P];if(!S.parent&&S.type===E)return S}return null},c=function(E){var P=E instanceof HTMLCanvasElement;u.forEach(function(S){(P&&S.canvas===E||!P&&S.parent===E)&&(S.parent=null,S.canvas.width=1,S.canvas.height=1)})},p=function(){var E=0;return u.forEach(function(P){P.parent&&E++}),E},v=function(){return u.length-p()},m=function(){l=!0},y=function(){l=!1};return{create2D:r,create:n,createWebGL:f,disableSmoothing:m,enableSmoothing:y,first:a,free:v,pool:u,remove:c,total:p}};o.exports=h()},8213:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="",e=function(){var d=function(h){for(var n=["i","webkitI","msI","mozI","oI"],r=0;r<n.length;r++){var f=n[r]+"mageSmoothingEnabled";if(f in h)return f}return null},x=function(h){return T===""&&(T=d(h)),T&&(h[T]=!0),h},u=function(h){return T===""&&(T=d(h)),T&&(h[T]=!1),h},l=function(h){return T!==null?h[T]:null};return{disable:u,enable:x,getPrefix:d,isEnabled:l}};o.exports=e()},59271:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d="none"),e.style.msTouchAction=d,e.style["ms-touch-action"]=d,e.style["touch-action"]=d,e};o.exports=T},36505:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d="none");var x=["-webkit-","-khtml-","-moz-","-ms-",""];return x.forEach(function(u){e.style[u+"user-select"]=d}),e.style["-webkit-touch-callout"]=d,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};o.exports=T},23514:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasInterpolation:e(70616),CanvasPool:e(61068),Smoothing:e(8213),TouchAction:e(59271),UserSelect:e(36505)}},27119:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(22946),u=e(5657),l=e(24650),h=e(68033),n=new d({initialize:function(f,a,c,p){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(f,a,c,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(r,f,a,c,p){return c===void 0&&(c=255),p===void 0&&(p=!0),this._locked=!0,this.red=r,this.green=f,this.blue=a,this.alpha=c,this._locked=!1,this.update(p)},setGLTo:function(r,f,a,c){return c===void 0&&(c=1),this._locked=!0,this.redGL=r,this.greenGL=f,this.blueGL=a,this.alphaGL=c,this._locked=!1,this.update(!0)},setFromRGB:function(r){return this._locked=!0,this.red=r.r,this.green=r.g,this.blue=r.b,r.hasOwnProperty("a")&&(this.alpha=r.a),this._locked=!1,this.update(!0)},setFromHSV:function(r,f,a){return l(r,f,a,this)},update:function(r){if(r===void 0&&(r=!1),this._locked)return this;var f=this.r,a=this.g,c=this.b,p=this.a;return this._color=x(f,a,c),this._color32=u(f,a,c,p),this._rgba="rgba("+f+","+a+","+c+","+p/255+")",r&&h(f,a,c,this),this},updateHSV:function(){var r=this.r,f=this.g,a=this.b;return h(r,f,a,this),this},clone:function(){return new n(this.r,this.g,this.b,this.a)},gray:function(r){return this.setTo(r,r,r)},random:function(r,f){r===void 0&&(r=0),f===void 0&&(f=255);var a=Math.floor(r+Math.random()*(f-r)),c=Math.floor(r+Math.random()*(f-r)),p=Math.floor(r+Math.random()*(f-r));return this.setTo(a,c,p)},randomGray:function(r,f){r===void 0&&(r=0),f===void 0&&(f=255);var a=Math.floor(r+Math.random()*(f-r));return this.setTo(a,a,a)},saturate:function(r){return this.s+=r/100,this},desaturate:function(r){return this.s-=r/100,this},lighten:function(r){return this.v+=r/100,this},darken:function(r){return this.v-=r/100,this},brighten:function(r){var f=this.r,a=this.g,c=this.b;return f=Math.max(0,Math.min(255,f-Math.round(255*-(r/100)))),a=Math.max(0,Math.min(255,a-Math.round(255*-(r/100)))),c=Math.max(0,Math.min(255,c-Math.round(255*-(r/100)))),this.setTo(f,a,c)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(r){this.gl[0]=Math.min(Math.abs(r),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(r){this.gl[1]=Math.min(Math.abs(r),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(r){this.gl[2]=Math.min(Math.abs(r),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(r){this.gl[3]=Math.min(Math.abs(r),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(r){r=Math.floor(Math.abs(r)),this.r=Math.min(r,255),this.gl[0]=r/255,this.update(!0)}},green:{get:function(){return this.g},set:function(r){r=Math.floor(Math.abs(r)),this.g=Math.min(r,255),this.gl[1]=r/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(r){r=Math.floor(Math.abs(r)),this.b=Math.min(r,255),this.gl[2]=r/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(r){r=Math.floor(Math.abs(r)),this.a=Math.min(r,255),this.gl[3]=r/255,this.update()}},h:{get:function(){return this._h},set:function(r){this._h=r,l(r,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(r){this._s=r,l(this._h,r,this._v,this)}},v:{get:function(){return this._v},set:function(r){this._v=r,l(this._h,this._s,r,this)}}});o.exports=n},30245:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946),x=function(u){u===void 0&&(u=1024);var l=[],h=255,n,r=255,f=0,a=0;for(n=0;n<=h;n++)l.push({r,g:n,b:a,color:d(r,n,a)});for(f=255,n=h;n>=0;n--)l.push({r:n,g:f,b:a,color:d(n,f,a)});for(r=0,n=0;n<=h;n++,f--)l.push({r,g:f,b:n,color:d(r,f,n)});for(f=0,a=255,n=0;n<=h;n++,a--,r++)l.push({r,g:f,b:a,color:d(r,f,a)});if(u===1024)return l;var c=[],p=0,v=1024/u;for(n=0;n<u;n++)c.push(l[Math.floor(p)]),p+=v;return c};o.exports=x},86672:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(d.a=e>>>24),d};o.exports=T},25409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=e.toString(16);return d.length===1?"0"+d:d};o.exports=T},22946:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e<<16|d<<8|x};o.exports=T},5657:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return u<<24|e<<16|d<<8|x};o.exports=T},74777:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=e(59998),u=function(l,h,n){var r=n,f=n,a=n;if(h!==0){var c=n<.5?n*(1+h):n+h-n*h,p=2*n-c;r=x(p,c,l+1/3),f=x(p,c,l),a=x(p,c,l-1/3)}var v=new d;return v.setGLTo(r,f,a,1)};o.exports=u},89263:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(24650),x=function(u,l){u===void 0&&(u=1),l===void 0&&(l=1);for(var h=[],n=0;n<=359;n++)h.push(d(n/359,u,l));return h};o.exports=x},24650:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946);function x(l,h,n,r){var f=(l+h*6)%6,a=Math.min(f,4-f,1);return Math.round(255*(r-r*n*Math.max(0,a)))}var u=function(l,h,n,r){h===void 0&&(h=1),n===void 0&&(n=1);var f=x(5,l,h,n),a=x(3,l,h,n),c=x(1,l,h,n);return r?r.setTo?r.setTo(f,a,c,r.alpha,!0):(r.r=f,r.g=a,r.b=c,r.color=d(f,a,c),r):{r:f,g:a,b:c,color:d(f,a,c)}};o.exports=u},91487:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=function(u){var l=new d;u=u.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,p,v){return c+c+p+p+v+v});var h=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);if(h){var n=parseInt(h[1],16),r=parseInt(h[2],16),f=parseInt(h[3],16);l.setTo(n,r,f)}return l};o.exports=x},59998:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?e+(d-e)*6*x:x<.5?d:x<.6666666666666666?e+(d-e)*(.6666666666666666-x)*6:e};o.exports=T},74853:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=e(15978),u=function(l){var h=x(l);return new d(h.r,h.g,h.b,h.a)};o.exports=u},15978:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};o.exports=T},53756:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42798),x=function(h,n,r,f,a,c,p,v){p===void 0&&(p=100),v===void 0&&(v=0);var m=v/p;return{r:d(h,f,m),g:d(n,a,m),b:d(r,c,m)}},u=function(h,n,r,f){return r===void 0&&(r=100),f===void 0&&(f=0),x(h.r,h.g,h.b,n.r,n.g,n.b,r,f)},l=function(h,n,r,f,a,c){return a===void 0&&(a=100),c===void 0&&(c=0),x(h.r,h.g,h.b,n,r,f,a,c)};o.exports={RGBWithRGB:x,ColorWithRGB:l,ColorWithColor:u}},73904:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=function(u){return new d(u.r,u.g,u.b,u.a)};o.exports=x},26841:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119),x=function(u){var l=new d,h=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(u.toLowerCase());if(h){var n=parseInt(h[1],10),r=parseInt(h[2],10),f=parseInt(h[3],10),a=h[4]!==void 0?parseFloat(h[4]):1;l.setTo(n,r,f,a*255)}return l};o.exports=x},68033:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){u===void 0&&(u={h:0,s:0,v:0}),e/=255,d/=255,x/=255;var l=Math.min(e,d,x),h=Math.max(e,d,x),n=h-l,r=0,f=h===0?0:n/h,a=h;return h!==l&&(h===e?r=(d-x)/n+(d<x?6:0):h===d?r=(x-e)/n+2:h===x&&(r=(e-d)/n+4),r/=6),u.hasOwnProperty("_h")?(u._h=r,u._s=f,u._v=a):(u.h=r,u.s=f,u.v=a),u};o.exports=T},4880:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25409),x=function(u,l,h,n,r){return n===void 0&&(n=255),r===void 0&&(r="#"),r==="#"?"#"+((1<<24)+(u<<16)+(l<<8)+h).toString(16).slice(1,7):"0x"+d(n)+d(u)+d(l)+d(h)};o.exports=x},37243:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),x=e(27119),u=function(l,h){return l===void 0&&(l=0),h===void 0&&(h=255),new x(d(l,h),d(l,h),d(l,h))};o.exports=u},93222:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(91487),x=e(74853),u=e(73904),l=e(26841),h=function(n){var r=typeof n;switch(r){case"string":return n.substr(0,3).toLowerCase()==="rgb"?l(n):d(n);case"number":return x(n);case"object":return u(n)}};o.exports=h},95509:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27119);d.ColorSpectrum=e(30245),d.ColorToRGBA=e(86672),d.ComponentToHex=e(25409),d.GetColor=e(22946),d.GetColor32=e(5657),d.HexStringToColor=e(91487),d.HSLToColor=e(74777),d.HSVColorWheel=e(89263),d.HSVToRGB=e(24650),d.HueToComponent=e(59998),d.IntegerToColor=e(74853),d.IntegerToRGB=e(15978),d.Interpolate=e(53756),d.ObjectToColor=e(73904),d.RandomRGB=e(37243),d.RGBStringToColor=e(26841),d.RGBToHSV=e(68033),d.RGBToString=e(4880),d.ValueToColor=e(93222),o.exports=d},24816:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Align:e(93545),BaseShader:e(31053),Bounds:e(15252),Canvas:e(23514),Color:e(95509),ColorMatrix:e(65246),Masks:e(93310),RGB:e(39298)}},76756:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(61286),u=new d({initialize:function(h,n,r,f,a,c){n||(n=h.sys.make.image({x:r,y:f,key:a,frame:c,add:!1})),this.bitmapMask=n,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(l){this.bitmapMask=l},preRenderWebGL:function(l,h,n){l.pipelines.BITMAPMASK_PIPELINE.beginMask(this,h,n)},postRenderWebGL:function(l,h,n){l.pipelines.BITMAPMASK_PIPELINE.endMask(this,h,n)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});x.register("bitmapMask",function(l,h,n,r,f){return new u(this.scene,l,h,n,r,f)}),o.exports=u},63037:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h){this.geometryMask=h,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(u){return this.geometryMask=u,this},setInvertAlpha:function(u){return u===void 0&&(u=!0),this.invertAlpha=u,this},preRenderWebGL:function(u,l,h){var n=u.gl;u.flush(),u.maskStack.length===0&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),u.maskCount=0),u.currentCameraMask.mask!==this&&(u.currentMask.mask=this),u.maskStack.push({mask:this,camera:h}),this.applyStencil(u,h,!0),u.maskCount++},applyStencil:function(u,l,h){var n=u.gl,r=this.geometryMask,f=u.maskCount,a=255;n.colorMask(!1,!1,!1,!1),h?(n.stencilFunc(n.EQUAL,f,a),n.stencilOp(n.KEEP,n.KEEP,n.INCR),f++):(n.stencilFunc(n.EQUAL,f+1,a),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),this.level=f,r.renderWebGL(u,r,l),u.flush(),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.invertAlpha?n.stencilFunc(n.NOTEQUAL,f,a):n.stencilFunc(n.EQUAL,f,a)},postRenderWebGL:function(u){var l=u.gl;u.maskStack.pop(),u.maskCount--,u.flush();var h=u.currentMask;if(u.maskStack.length===0)h.mask=null,l.disable(l.STENCIL_TEST);else{var n=u.maskStack[u.maskStack.length-1];n.mask.applyStencil(u,n.camera,!1),u.currentCameraMask.mask!==n.mask?(h.mask=n.mask,h.camera=n.camera):h.mask=null}},preRenderCanvas:function(u,l,h){var n=this.geometryMask;u.currentContext.save(),n.renderCanvas(u,n,h,null,null,!0),u.currentContext.clip()},postRenderCanvas:function(u){u.currentContext.restore()},destroy:function(){this.geometryMask=null}});o.exports=x},93310:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BitmapMask:e(76756),GeometryMask:e(63037)}},31053:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h,n,r){(!h||h==="")&&(h=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!n||n==="")&&(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),r===void 0&&(r=null),this.key=l,this.fragmentSrc=h,this.vertexSrc=n,this.uniforms=r}});o.exports=x},99584:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x;if(d)typeof d=="string"?x=document.getElementById(d):typeof d=="object"&&d.nodeType===1&&(x=d);else if(e.parentElement||d===null)return e;return x||(x=document.body),x.appendChild(e),e};o.exports=T},85178:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),x=function(u){var l=u.config;if(!(!l.parent||!l.domCreateContainer)){var h=document.createElement("div");h.style.cssText=["display: block;","width: "+u.scale.width+"px;","height: "+u.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+l.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),u.domContainer=h,d(h,l.parent)}};o.exports=x},21546:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36580),x=function(u){if(document.readyState==="complete"||document.readyState==="interactive"){u();return}var l=function(){document.removeEventListener("deviceready",l,!0),document.removeEventListener("DOMContentLoaded",l,!0),window.removeEventListener("load",l,!0),u()};document.body?d.cordova?document.addEventListener("deviceready",l,!1):(document.addEventListener("DOMContentLoaded",l,!0),window.addEventListener("load",l,!0)):window.setTimeout(l,20)};o.exports=x},74181:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e)return window.innerHeight;var d=Math.abs(window.orientation),x={w:0,h:0},u=document.createElement("div");return u.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(u),x.w=d===90?u.offsetHeight:window.innerWidth,x.h=d===90?window.innerWidth:u.offsetHeight,document.documentElement.removeChild(u),u=null,Math.abs(window.orientation)!==90?x.h:x.w};o.exports=T},9229:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(55301),x=function(u,l){var h=window.screen,n=h?h.orientation||h.mozOrientation||h.msOrientation:!1;if(n&&typeof n.type=="string")return n.type;if(typeof n=="string")return n;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return d.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return d.ORIENTATION.LANDSCAPE}else return l>u?d.ORIENTATION.PORTRAIT:d.ORIENTATION.LANDSCAPE};o.exports=x},2893:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d;return e!==""&&(typeof e=="string"?d=document.getElementById(e):e&&e.nodeType===1&&(d=e)),d||(d=document.body),d};o.exports=T},89200:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d="";try{if(window.DOMParser){var x=new DOMParser;d=x.parseFromString(e,"text/xml")}else d=new ActiveXObject("Microsoft.XMLDOM"),d.loadXML(e)}catch{d=null}return!d||!d.documentElement||d.getElementsByTagName("parsererror").length?null:d};o.exports=T},55638:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){e.parentNode&&e.parentNode.removeChild(e)};o.exports=T},27385:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72283),u=new d({initialize:function(){this.isRunning=!1,this.callback=x,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var h=this;this.step=function n(r){h.callback(r),h.isRunning&&(h.timeOutID=window.requestAnimationFrame(n))},this.stepTimeout=function n(){h.isRunning&&(h.timeOutID=window.setTimeout(n,h.delay)),h.callback(window.performance.now())}},start:function(l,h,n){this.isRunning||(this.callback=l,this.isSetTimeOut=h,this.delay=n,this.isRunning=!0,this.timeOutID=h?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=x}});o.exports=u},3590:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={AddToDOM:e(99584),DOMContentLoaded:e(21546),GetInnerHeight:e(74181),GetScreenOrientation:e(9229),GetTarget:e(2893),ParseXML:e(89200),RemoveFromDOM:e(55638),RequestAnimationFrame:e(27385)};o.exports=d},78491:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(91963),l=new d({Extends:x,initialize:function(){x.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});u.register("EventEmitter",l,"events"),o.exports=l},95146:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EventEmitter:e(78491)}},20170:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r){r===void 0&&(r=1),x.call(this,u.BARREL,n),this.amount=r}});o.exports=l},51182:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c,p,v){f===void 0&&(f=1),a===void 0&&(a=1),c===void 0&&(c=1),p===void 0&&(p=1),v===void 0&&(v=4),x.call(this,u.BLOOM,n),this.steps=v,this.offsetX=f,this.offsetY=a,this.blurStrength=c,this.strength=p,this.glcolor=[1,1,1],r!=null&&(this.color=r)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=l},51498:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c,p,v){f===void 0&&(f=2),a===void 0&&(a=2),c===void 0&&(c=1),v===void 0&&(v=4),x.call(this,u.BLUR,n),this.quality=0,this.x=f,this.y=a,this.steps=v,this.strength=c,this.glcolor=[1,1,1],p!=null&&(this.color=p)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=l},12042:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c,p,v,m){r===void 0&&(r=.5),f===void 0&&(f=1),a===void 0&&(a=.2),c===void 0&&(c=!1),p===void 0&&(p=1),v===void 0&&(v=1),m===void 0&&(m=1),x.call(this,u.BOKEH,n),this.radius=r,this.amount=f,this.contrast=a,this.isTiltShift=c,this.strength=m,this.blurX=p,this.blurY=v}});o.exports=l},69900:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c,p){r===void 0&&(r=8),c===void 0&&(c=1),p===void 0&&(p=.005),x.call(this,u.CIRCLE,n),this.scale=c,this.feather=p,this.thickness=r,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],f!=null&&(this.color=f),a!=null&&(this.backgroundColor=a)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}},backgroundColor:{get:function(){var h=this.glcolor2;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor2;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=l},48991:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(65246),u=e(47406),l=new d({Extends:x,initialize:function(n){x.call(this),this.type=u.COLOR_MATRIX,this.gameObject=n,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});o.exports=l},47551:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h){this.type=l,this.gameObject=h,this.active=!0},setActive:function(u){return this.active=u,this},destroy:function(){this.gameObject=null,this.active=!1}});o.exports=x},47909:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a){r===void 0&&(r="__WHITE"),f===void 0&&(f=.005),a===void 0&&(a=.005),x.call(this,u.DISPLACEMENT,n),this.x=f,this.y=a,this.glTexture,this.setTexture(r)},setTexture:function(h){var n=this.gameObject.scene.sys.textures.getFrame(h);return n&&(this.glTexture=n.glTexture),this}});o.exports=l},18919:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c){f===void 0&&(f=4),a===void 0&&(a=0),c===void 0&&(c=!1),x.call(this,u.GLOW,n),this.outerStrength=f,this.innerStrength=a,this.knockout=c,this.glcolor=[1,1,1,1],r!==void 0&&(this.color=r)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=l},62494:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c,p,v,m,y){a===void 0&&(a=.2),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=1),y===void 0&&(y=0),x.call(this,u.GRADIENT,n),this.alpha=a,this.size=y,this.fromX=c,this.fromY=p,this.toX=v,this.toY=m,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],r!=null&&(this.color1=r),f!=null&&(this.color2=f)},color1:{get:function(){var h=this.glcolor1;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var n=this.glcolor1;n[0]=h>>16&255,n[1]=h>>8&255,n[2]=h&255}},color2:{get:function(){var h=this.glcolor2;return(h[0]<<16)+(h[1]<<8)+(h[2]|0)},set:function(h){var n=this.glcolor2;n[0]=h>>16&255,n[1]=h>>8&255,n[2]=h&255}}});o.exports=l},68897:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r){r===void 0&&(r=1),x.call(this,u.PIXELATE,n),this.amount=r}});o.exports=l},58575:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c,p,v,m){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=.1),c===void 0&&(c=1),v===void 0&&(v=6),m===void 0&&(m=1),x.call(this,u.SHADOW,n),this.x=r,this.y=f,this.decay=a,this.power=c,this.glcolor=[0,0,0,1],this.samples=v,this.intensity=m,p!==void 0&&(this.color=p)},color:{get:function(){var h=this.glcolor;return(h[0]*255<<16)+(h[1]*255<<8)+(h[2]*255|0)},set:function(h){var n=this.glcolor;n[0]=(h>>16&255)/255,n[1]=(h>>8&255)/255,n[2]=(h&255)/255}}});o.exports=l},33755:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c){r===void 0&&(r=.5),f===void 0&&(f=.5),a===void 0&&(a=3),c===void 0&&(c=!1),x.call(this,u.SHINE,n),this.speed=r,this.lineWidth=f,this.gradient=a,this.reveal=c}});o.exports=l},24949:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c){r===void 0&&(r=.5),f===void 0&&(f=.5),a===void 0&&(a=.5),c===void 0&&(c=.5),x.call(this,u.VIGNETTE,n),this.x=r,this.y=f,this.radius=a,this.strength=c}});o.exports=l},66241:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47551),u=e(47406),l=new d({Extends:x,initialize:function(n,r,f,a,c){r===void 0&&(r=.1),f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=!1),x.call(this,u.WIPE,n),this.progress=0,this.wipeWidth=r,this.direction=f,this.axis=a,this.reveal=c}});o.exports=l},47406:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};o.exports=T},96910:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(47406),u={Barrel:e(20170),Controller:e(47551),Bloom:e(51182),Blur:e(51498),Bokeh:e(12042),Circle:e(69900),ColorMatrix:e(48991),Displacement:e(47909),Glow:e(18919),Gradient:e(62494),Pixelate:e(68897),Shadow:e(58575),Shine:e(33755),Vignette:e(24949),Wipe:e(66241)};u=d(!1,u,x),o.exports=u},88933:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(20494),u=function(l,h,n){h.x=x(n,"x",0),h.y=x(n,"y",0),h.depth=x(n,"depth",0),h.flipX=x(n,"flipX",!1),h.flipY=x(n,"flipY",!1);var r=x(n,"scale",null);typeof r=="number"?h.setScale(r):r!==null&&(h.scaleX=x(r,"x",1),h.scaleY=x(r,"y",1));var f=x(n,"scrollFactor",null);typeof f=="number"?h.setScrollFactor(f):f!==null&&(h.scrollFactorX=x(f,"x",1),h.scrollFactorY=x(f,"y",1)),h.rotation=x(n,"rotation",0);var a=x(n,"angle",null);a!==null&&(h.angle=a),h.alpha=x(n,"alpha",1);var c=x(n,"origin",null);if(typeof c=="number")h.setOrigin(c);else if(c!==null){var p=x(c,"x",.5),v=x(c,"y",.5);h.setOrigin(p,v)}h.blendMode=x(n,"blendMode",d.NORMAL),h.visible=x(n,"visible",!0);var m=x(n,"add",!0);return m&&l.sys.displayList.add(h),h.preUpdate&&l.sys.updateList.add(h),h};o.exports=u},32291:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(20494),x=function(u,l){var h=d(l,"anims",null);if(h===null)return u;if(typeof h=="string")u.anims.play(h);else if(typeof h=="object"){var n=u.anims,r=d(h,"key",void 0);if(r){var f=d(h,"startFrame",void 0),a=d(h,"delay",0),c=d(h,"repeat",0),p=d(h,"repeatDelay",0),v=d(h,"yoyo",!1),m=d(h,"play",!1),y=d(h,"delayedPlay",0),E={key:r,delay:a,repeat:c,repeatDelay:p,yoyo:v,startFrame:f};m?n.play(E):y>0?n.playAfterDelay(E,y):n.load(E)}}return u};o.exports=x},91713:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(71207),u=e(91963),l=e(56631),h=e(7599),n=e(17922),r=new d({Extends:x,initialize:function(a){x.call(this,a),this.sortChildrenFlag=!1,this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.events.once(h.DESTROY,this.destroy,this)},addChildCallback:function(f){f.displayList&&f.displayList!==this&&f.removeFromDisplayList(),f.parentContainer&&f.parentContainer.remove(f),f.displayList||(this.queueDepthSort(),f.displayList=this,f.emit(l.ADDED_TO_SCENE,f,this.scene),this.events.emit(h.ADDED_TO_SCENE,f,this.scene))},removeChildCallback:function(f){this.queueDepthSort(),f.displayList=null,f.emit(l.REMOVED_FROM_SCENE,f,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,f,this.scene)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(n(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(f,a){return f._depth-a._depth},getChildren:function(){return this.list},shutdown:function(){for(var f=this.list;f.length;)f[0].destroy(!0);this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});u.register("DisplayList",r,"displayList"),o.exports=r},89980:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(48129),u=e(81078),l=e(6659),h=e(56631),n=e(7599),r=new d({Extends:l,initialize:function(a,c){l.call(this),this.scene=a,this.displayList=null,this.type=c,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this),a.sys.queueDepthSort()},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},setState:function(f){return this.state=f,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(f,a){return this.data||(this.data=new u(this)),this.data.set(f,a),this},incData:function(f,a){return this.data||(this.data=new u(this)),this.data.inc(f,a),this},toggleData:function(f){return this.data||(this.data=new u(this)),this.data.toggle(f),this},getData:function(f){return this.data||(this.data=new u(this)),this.data.get(f)},setInteractive:function(f,a,c){return this.scene.sys.input.enable(this,f,a,c),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return x(this)},willRender:function(f){var a=this.displayList&&this.displayList.active?this.displayList.willRender(f):!0;return!(!a||r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},getIndexList:function(){for(var f=this,a=this.parentContainer,c=[];a&&(c.unshift(a.getIndex(f)),f=a,a.parentContainer);)a=a.parentContainer;return this.displayList?c.unshift(this.displayList.getIndex(f)):c.unshift(this.scene.sys.displayList.getIndex(f)),c},addToDisplayList:function(f){return f===void 0&&(f=this.scene.sys.displayList),this.displayList&&this.displayList!==f&&this.removeFromDisplayList(),f.exists(this)||(this.displayList=f,f.add(this,!0),f.queueDepthSort(),this.emit(h.ADDED_TO_SCENE,this,this.scene),f.events.emit(n.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var f=this.displayList||this.scene.sys.displayList;return f&&f.exists(this)&&(f.remove(this,!0),f.queueDepthSort(),this.displayList=null,this.emit(h.REMOVED_FROM_SCENE,this,this.scene),f.events.emit(n.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(f){!this.scene||this.ignoreDestroy||(f===void 0&&(f=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(h.DESTROY,this,f),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});r.RENDER_MASK=15,o.exports=r},99325:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91963),u=e(7599),l=new d({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,n){l.prototype.hasOwnProperty(h)||(l.prototype[h]=n)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},x.register("GameObjectCreator",l,"make"),o.exports=l},61286:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91963),u=e(7599),l=new d({initialize:function(n){this.scene=n,this.systems=n.sys,this.events=n.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},existing:function(h){return(h.renderCanvas||h.renderWebGL)&&this.displayList.add(h),h.preUpdate&&this.updateList.add(h),h},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(h,n){l.prototype.hasOwnProperty(h)||(l.prototype[h]=n)},l.remove=function(h){l.prototype.hasOwnProperty(h)&&delete l.prototype[h]},x.register("GameObjectFactory",l,"add"),o.exports=l},73329:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),x=new d,u=new d,l=new d,h={camera:x,sprite:u,calc:l},n=function(r,f,a){var c=x,p=u,v=l;return p.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),c.copyFrom(f.matrix),a?(c.multiplyWithOffset(a,-f.scrollX*r.scrollFactorX,-f.scrollY*r.scrollFactorY),p.e=r.x,p.f=r.y):(p.e-=f.scrollX*r.scrollFactorX,p.f-=f.scrollY*r.scrollFactorY),c.multiply(p,v),h};o.exports=n},92034:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(74623),u=e(91963),l=e(7599),h=new d({Extends:x,initialize:function(r){x.call(this),this.checkQueue=!0,this.scene=r,this.systems=r.sys,r.sys.events.once(l.BOOT,this.boot,this),r.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(l.PRE_UPDATE,this.update,this),n.on(l.UPDATE,this.sceneUpdate,this),n.once(l.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(n,r){for(var f=this._active,a=f.length,c=0;c<a;c++){var p=f[c];p.active&&p.preUpdate.call(p,n,r)}},shutdown:function(){for(var n=this._active.length;n--;)this._active[n].destroy(!0);for(n=this._pending.length;n--;)this._pending[n].destroy(!0);for(n=this._destroy.length;n--;)this._destroy[n].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var r=this.systems.events;r.off(l.PRE_UPDATE,this.update,this),r.off(l.UPDATE,this.sceneUpdate,this),r.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});u.register("UpdateList",h,"updateList"),o.exports=h},8810:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l,h,n,r,f,a,c,p,v,m,y){var E=x.x-d.displayOriginX+l,P=x.y-d.displayOriginY+h,S=E+x.w,w=P+x.h,A=n.getXRound(E,P,r),R=n.getYRound(E,P,r),O=n.getXRound(E,w,r),F=n.getYRound(E,w,r),L=n.getXRound(S,w,r),D=n.getYRound(S,w,r),I=n.getXRound(S,P,r),B=n.getYRound(S,P,r);e.batchQuad(d,A,R,O,F,L,D,I,B,u.u0,u.v0,u.u1,u.v1,f,a,c,p,v,m,y)};o.exports=T},82173:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){if(x===void 0&&(x=!1),u===void 0)return u={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},u;var l=e.text,h=l.length,n=e.maxWidth,r=e.wordWrapCharCode,f=Number.MAX_VALUE,a=Number.MAX_VALUE,c=0,p=0,v=e.fontData.chars,m=e.fontData.lineHeight,y=e.letterSpacing,E=e.lineSpacing,P=0,S=0,w=0,A=null,R=e._align,O=0,F=0,L=e.fontSize/e.fontData.size,D=L*e.scaleX,I=L*e.scaleY,B=null,V=0,Y=[],W=Number.MAX_VALUE,$=0,N=0,U=0,b,G=[],z=[],X=null;if(n>0){for(b=0;b<h;b++){if(w=l.charCodeAt(b),w===10){X!==null&&(G.push({word:X.word,i:X.i,x:X.x*D,y:X.y*I,w:X.w*D,h:X.h*I,cr:!0}),X=null),P=0,S+=m+E,B=null;continue}if(A=v[w],!!A){if(B!==null)var k=A.kerning[V];w===r?X!==null&&(G.push({word:X.word,i:X.i,x:X.x*D,y:X.y*I,w:X.w*D,h:X.h*I,cr:!1}),X=null):(X===null&&(X={word:"",i:b,x:P,y:S,w:0,h:m,cr:!1}),X.word=X.word.concat(l[b]),X.w+=A.xOffset+A.xAdvance+(k!==void 0?k:0)),P+=A.xAdvance+y,B=A,V=w}}X!==null&&G.push({word:X.word,i:X.i,x:X.x*D,y:X.y*I,w:X.w*D,h:X.h*I,cr:!1}),P=0,S=0,B=null,V=0;var H,K=0,Z=[];for(b=0;b<G.length;b++){var J=G[b],j=J.x,Q=J.x+J.w;if(H){var _=j-(H.x+H.w);K=j-(_+H.w),H=null}var q=j-K,et=Q-K;q>n||et>n?(Z.push(J.i-1),J.cr?(Z.push(J.i+J.word.length),K=0,H=null):H=J):J.cr&&(Z.push(J.i+J.word.length),K=0,H=null)}var at=function(Xt,Jt,ie){return Xt.substr(0,Jt)+ie+Xt.substr(Jt+1)};for(b=Z.length-1;b>=0;b--)l=at(l,Z[b],`
`);u.wrappedText=l,h=l.length,G=[],X=null}var ot=0;for(b=0;b<h;b++){if(w=l.charCodeAt(b),w===10){X!==null&&(G.push({word:X.word,i:X.i,x:X.x*D,y:X.y*I,w:X.w*D,h:X.h*I}),X=null),P=0,S+=m+E,B=null,Y[N]=U,U>$&&($=U),U<W&&(W=U),N++,U=0;continue}if(A=v[w],!!A){if(O=P,F=S,B!==null){var ht=A.kerning[V];O+=ht!==void 0?ht:0}f>O&&(f=O),a>F&&(a=F);var tt=O+A.xAdvance,rt=F+m;c<tt&&(c=tt),p<rt&&(p=rt);var nt=A.xOffset+A.xAdvance+(ht!==void 0?ht:0);w===r?X!==null&&(G.push({word:X.word,i:X.i,x:X.x*D,y:X.y*I,w:X.w*D,h:X.h*I}),X=null):(X===null&&(X={word:"",i:ot,x:P,y:S,w:0,h:m}),X.word=X.word.concat(l[b]),X.w+=nt),z.push({i:ot,idx:b,char:l[b],code:w,x:(A.xOffset+O)*L,y:(A.yOffset+S)*L,w:A.width*L,h:A.height*L,t:S*L,r:tt*L,b:m*L,line:N,glyph:A}),P+=A.xAdvance+y+(ht!==void 0?ht:0),B=A,V=w,U=tt*L,ot++}}if(X!==null&&G.push({word:X.word,i:X.i,x:X.x*D,y:X.y*I,w:X.w*D,h:X.h*I}),Y[N]=U,U>$&&($=U),U<W&&(W=U),R>0)for(var pt=0;pt<z.length;pt++){var vt=z[pt];if(R===1){var It=($-Y[vt.line])/2;vt.x+=It,vt.r+=It}else if(R===2){var Rt=$-Y[vt.line];vt.x+=Rt,vt.r+=Rt}}var St=u.local,mt=u.global,Ot=u.lines;return St.x=f*L,St.y=a*L,St.width=c*L,St.height=p*L,mt.x=e.x-e._displayOriginX+f*D,mt.y=e.y-e._displayOriginY+a*I,mt.width=c*D,mt.height=p*I,Ot.shortest=W,Ot.longest=$,Ot.lengths=Y,d&&(St.x=Math.ceil(St.x),St.y=Math.ceil(St.y),St.width=Math.ceil(St.width),St.height=Math.ceil(St.height),mt.x=Math.ceil(mt.x),mt.y=Math.ceil(mt.y),mt.width=Math.ceil(mt.width),mt.height=Math.ceil(mt.height),Ot.shortest=Math.ceil(W),Ot.longest=Math.ceil($)),x&&(e._displayOriginX=e.originX*St.width,e._displayOriginY=e.originY*St.height,mt.x=e.x-e._displayOriginX*e.scaleX,mt.y=e.y-e._displayOriginY*e.scaleY,d&&(mt.x=Math.ceil(mt.x),mt.y=Math.ceil(mt.y))),u.words=G,u.characters=z,u.lines.height=m,u.scale=L,u.scaleX=e.scaleX,u.scaleY=e.scaleY,u};o.exports=T},68298:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(31476),x=function(u,l,h,n,r,f,a){var c=u.sys.textures.get(h),p=c.get(n),v=u.sys.cache.xml.get(r);if(p&&v){var m=d(v,p,f,a,c);return u.sys.cache.bitmapFont.add(l,{data:m,texture:h,frame:n,fromAtlas:!0}),!0}else return!1};o.exports=x},39860:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x=function(u,l){var h=l.width,n=l.height,r=Math.floor(h/2),f=Math.floor(n/2),a=d(l,"chars","");if(a!==""){var c=d(l,"image",""),p=u.sys.textures.getFrame(c),v=p.cutX,m=p.cutY,y=p.source.width,E=p.source.height,P=d(l,"offset.x",0),S=d(l,"offset.y",0),w=d(l,"spacing.x",0),A=d(l,"spacing.y",0),R=d(l,"lineSpacing",0),O=d(l,"charsPerRow",null);O===null&&(O=y/h,O>a.length&&(O=a.length));for(var F=P,L=S,D={retroFont:!0,font:c,size:h,lineHeight:n+R,chars:{}},I=0,B=0;B<a.length;B++){var V=a.charCodeAt(B),Y=(v+F)/y,W=(m+L)/E,$=(v+F+h)/y,N=(m+L+n)/E;D.chars[V]={x:F,y:L,width:h,height:n,centerX:r,centerY:f,xOffset:0,yOffset:0,xAdvance:h,data:{},kerning:{},u0:Y,v0:W,u1:$,v1:N},I++,I===O?(I=0,F=P,L+=n+A):F+=h+w}var U={data:D,frame:null,texture:c};return U}};o.exports=x},31476:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(d,x){return parseInt(d.getAttribute(x),10)}var e=function(d,x,u,l,h){u===void 0&&(u=0),l===void 0&&(l=0);var n=x.cutX,r=x.cutY,f=x.source.width,a=x.source.height,c=x.sourceIndex,p={},v=d.getElementsByTagName("info")[0],m=d.getElementsByTagName("common")[0];p.font=v.getAttribute("face"),p.size=T(v,"size"),p.lineHeight=T(m,"lineHeight")+l,p.chars={};var y=d.getElementsByTagName("char"),E=x!==void 0&&x.trimmed;if(E)var P=x.height,S=x.width;for(var w=0;w<y.length;w++){var A=y[w],R=T(A,"id"),O=String.fromCharCode(R),F=T(A,"x"),L=T(A,"y"),D=T(A,"width"),I=T(A,"height");E&&(F<S&&(S=F),L<P&&(P=L)),E&&P!==0&&S!==0&&(F-=x.x,L-=x.y);var B=(n+F)/f,V=(r+L)/a,Y=(n+F+D)/f,W=(r+L+I)/a;if(p.chars[R]={x:F,y:L,width:D,height:I,centerX:Math.floor(D/2),centerY:Math.floor(I/2),xOffset:T(A,"xoffset"),yOffset:T(A,"yoffset"),xAdvance:T(A,"xadvance")+u,data:{},kerning:{},u0:B,v0:V,u1:Y,v1:W},h&&D!==0&&I!==0){var $=h.add(O,c,F,L,D,I);$&&$.setUVs(D,I,B,V,Y,W)}}var N=d.getElementsByTagName("kerning");for(w=0;w<N.length;w++){var U=N[w],b=T(U,"first"),G=T(U,"second"),z=T(U,"amount");p.chars[G].kerning[b]=z}return p};o.exports=e},55873:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66863),x=e(98611),u={Parse:e(39860)};u=x(!1,u,d),o.exports=u},66863:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};o.exports=T},13468:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),x=e(56694),u=e(88899),l=new x({Extends:d,Mixins:[u],initialize:function(n,r,f,a,c,p,v){d.call(this,n,r,f,a,c,p,v),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(h,n){return this.cropWidth=h,this.cropHeight=n,this},setDisplayCallback:function(h){return this.displayCallback=h,this},setScrollX:function(h){return this.scrollX=h,this},setScrollY:function(h){return this.scrollY=h,this}});o.exports=l},93438:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(49584),x=function(u,l,h,n){var r=l._text,f=r.length,a=u.currentContext;if(!(f===0||!d(u,a,l,h,n))){h.addToRenderList(l);var c=l.fromAtlas?l.frame:l.texture.frames.__BASE,p=l.displayCallback,v=l.callbackData,m=l.fontData.chars,y=l.fontData.lineHeight,E=l._letterSpacing,P=0,S=0,w=0,A=null,R=0,O=0,F=0,L=0,D=0,I=0,B=null,V=0,Y=l.frame.source.image,W=c.cutX,$=c.cutY,N=0,U=0,b=l._fontSize/l.fontData.size,G=l._align,z=0,X=0;l.getTextBounds(!1);var k=l._bounds.lines;G===1?X=(k.longest-k.lengths[0])/2:G===2&&(X=k.longest-k.lengths[0]),a.translate(-l.displayOriginX,-l.displayOriginY);var H=h.roundPixels;l.cropWidth>0&&l.cropHeight>0&&(a.beginPath(),a.rect(0,0,l.cropWidth,l.cropHeight),a.clip());for(var K=0;K<f;K++){if(U=b,N=0,w=r.charCodeAt(K),w===10){z++,G===1?X=(k.longest-k.lengths[z])/2:G===2&&(X=k.longest-k.lengths[z]),P=0,S+=y,B=null;continue}if(A=m[w],!!A){if(R=W+A.x,O=$+A.y,F=A.width,L=A.height,D=A.xOffset+P-l.scrollX,I=A.yOffset+S-l.scrollY,B!==null){var Z=A.kerning[V];D+=Z!==void 0?Z:0}if(p){v.index=K,v.charCode=w,v.x=D,v.y=I,v.scale=U,v.rotation=N,v.data=A.data;var J=p(v);D=J.x,I=J.y,U=J.scale,N=J.rotation}D*=U,I*=U,D+=X,P+=A.xAdvance+E+(Z!==void 0?Z:0),B=A,V=w,!(F===0||L===0||w===32)&&(H&&(D=Math.round(D),I=Math.round(I)),a.save(),a.translate(D,I),a.rotate(N),a.scale(U,U),a.drawImage(Y,R,O,F,L,0,0,F,L),a.restore())}}a.restore()}};o.exports=x},67513:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13468),x=e(88933),u=e(99325),l=e(20494);u.register("dynamicBitmapText",function(h,n){h===void 0&&(h={});var r=l(h,"font",""),f=l(h,"text",""),a=l(h,"size",!1),c=new d(this.scene,0,0,r,f,a);return n!==void 0&&(h.add=n),x(this.scene,c,h),c})},94145:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13468),x=e(61286);x.register("dynamicBitmapText",function(u,l,h,n,r){return this.displayList.add(new d(this.scene,u,l,h,n,r))})},88899:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(16873),u=e(93438),o.exports={renderWebGL:x,renderCanvas:u}},16873:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(69360),u=e(75512),l=new x,h=function(n,r,f,a){var c=r.text,p=c.length;if(p!==0){f.addToRenderList(r);var v=n.pipelines.set(r.pipeline,r),m=d(r,f,a);n.pipelines.preBatch(r);var y=m.sprite,E=m.calc,P=l,S=r.cropWidth>0||r.cropHeight>0;S&&(v.flush(),n.pushScissor(E.tx,E.ty,r.cropWidth*E.scaleX,r.cropHeight*E.scaleY));var w=r.frame,A=w.glTexture,R=r.tintFill,O=u.getTintAppendFloatAlpha(r.tintTopLeft,f.alpha*r._alphaTL),F=u.getTintAppendFloatAlpha(r.tintTopRight,f.alpha*r._alphaTR),L=u.getTintAppendFloatAlpha(r.tintBottomLeft,f.alpha*r._alphaBL),D=u.getTintAppendFloatAlpha(r.tintBottomRight,f.alpha*r._alphaBR),I=v.setGameObject(r),B=0,V=0,Y=0,W=0,$=r.letterSpacing,N,U=0,b=0,G,z=r.scrollX,X=r.scrollY,k=r.fontData,H=k.chars,K=k.lineHeight,Z=r.fontSize/k.size,J=0,j=r._align,Q=0,_=0,q=r.getTextBounds(!1);r.maxWidth>0&&(c=q.wrappedText,p=c.length);var et=r._bounds.lines;j===1?_=(et.longest-et.lengths[0])/2:j===2&&(_=et.longest-et.lengths[0]);for(var at=f.roundPixels,ot=r.displayCallback,ht=r.callbackData,tt=0;tt<p;tt++){if(Y=c.charCodeAt(tt),Y===10){Q++,j===1?_=(et.longest-et.lengths[Q])/2:j===2&&(_=et.longest-et.lengths[Q]),B=0,V+=K,G=null;continue}if(N=H[Y],!!N){U=N.width,b=N.height;var rt=N.xOffset+B-z,nt=N.yOffset+V-X;if(G!==null){var pt=N.kerning[W];rt+=pt!==void 0?pt:0}if(B+=N.xAdvance+$,G=N,W=Y,!(U===0||b===0||Y===32)){if(Z=r.fontSize/r.fontData.size,J=0,ot){ht.color=0,ht.tint.topLeft=O,ht.tint.topRight=F,ht.tint.bottomLeft=L,ht.tint.bottomRight=D,ht.index=tt,ht.charCode=Y,ht.x=rt,ht.y=nt,ht.scale=Z,ht.rotation=J,ht.data=N.data;var vt=ot(ht);rt=vt.x,nt=vt.y,Z=vt.scale,J=vt.rotation,vt.color?(O=vt.color,F=vt.color,L=vt.color,D=vt.color):(O=vt.tint.topLeft,F=vt.tint.topRight,L=vt.tint.bottomLeft,D=vt.tint.bottomRight),O=u.getTintAppendFloatAlpha(O,f.alpha*r._alphaTL),F=u.getTintAppendFloatAlpha(F,f.alpha*r._alphaTR),L=u.getTintAppendFloatAlpha(L,f.alpha*r._alphaBL),D=u.getTintAppendFloatAlpha(D,f.alpha*r._alphaBR)}rt*=Z,nt*=Z,rt-=r.displayOriginX,nt-=r.displayOriginY,rt+=_,P.applyITRS(rt,nt,J,Z,Z),E.multiply(P,y);var It=N.u0,Rt=N.v0,St=N.u1,mt=N.v1,Ot=U,Xt=b,Jt=y.e,ie=y.f,Pe=Xt*y.c+y.e,vs=Xt*y.d+y.f,ps=Ot*y.a+Xt*y.c+y.e,gs=Ot*y.b+Xt*y.d+y.f,ms=Ot*y.a+y.e,xs=Ot*y.b+y.f;at&&(Jt=Math.round(Jt),ie=Math.round(ie),Pe=Math.round(Pe),vs=Math.round(vs),ps=Math.round(ps),gs=Math.round(gs),ms=Math.round(ms),xs=Math.round(xs)),v.batchQuad(r,Jt,ie,Pe,vs,ps,gs,ms,xs,It,Rt,St,mt,O,F,L,D,R,A,I)}}}S&&(v.flush(),n.popScissor()),n.pipelines.postBatch(r)}};o.exports=h},44616:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82897),u=e(64937),l=e(89980),h=e(82173),n=e(68298),r=e(31476),f=e(74118),a=e(84557),c=new d({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,a],initialize:function(v,m,y,E,P,S,w){P===void 0&&(P=""),w===void 0&&(w=0),l.call(this,v,"BitmapText"),this.font=E;var A=this.scene.sys.cache.bitmapFont.get(E);A||console.warn("Invalid BitmapText key: "+E),this.fontData=A.data,this._text="",this._fontSize=S||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=w,this._bounds=h(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=A.fromAtlas,this.setTexture(A.texture,A.frame),this.setPosition(m,y),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(P)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setLineSpacing:function(p){return p===void 0&&(p=0),this.lineSpacing=p,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,v,m,y){return p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=.5),this.dropShadowX=p,this.dropShadowY=v,this.dropShadowColor=m,this.dropShadowAlpha=y,this},setCharacterTint:function(p,v,m,y,E,P,S){p===void 0&&(p=0),v===void 0&&(v=1),m===void 0&&(m=!1),y===void 0&&(y=-1),E===void 0&&(E=y,P=y,S=y);var w=this.text.length;v===-1&&(v=w),p<0&&(p=w+p),p=x(p,0,w-1);for(var A=x(p+v,p,w),R=this.charColors,O=p;O<A;O++){var F=R[O];if(y===-1)R[O]=null;else{var L=m?1:0;F?(F.tintEffect=L,F.tintTL=y,F.tintTR=E,F.tintBL=P,F.tintBR=S):R[O]={tintEffect:L,tintTL:y,tintTR:E,tintBL:P,tintBR:S}}}return this},setWordTint:function(p,v,m,y,E,P,S){v===void 0&&(v=1);for(var w=this.getTextBounds(),A=w.words,R=typeof p=="number",O=0,F=0;F<A.length;F++){var L=A[F];if((R&&F===p||!R&&L.word===p)&&(this.setCharacterTint(L.i,L.word.length,m,y,E,P,S),O++,O===v))return this}return this},getTextBounds:function(p){var v=this._bounds;return(this._dirty||p||this.scaleX!==v.scaleX||this.scaleY!==v.scaleY)&&(h(this,p,!0,v),this._dirty=!1),v},getCharacterAt:function(p,v,m){for(var y=this.getLocalPoint(p,v,null,m),E=this.getTextBounds(),P=E.characters,S=new f,w=0;w<P.length;w++){var A=P[w];if(S.setTo(A.x,A.t,A.r-A.x,A.b),S.contains(y.x,y.y))return A}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,v,m){if(v===void 0&&(v=this._fontSize),m===void 0&&(m=this._align),p!==this.font){var y=this.scene.sys.cache.bitmapFont.get(p);y&&(this.font=p,this.fontData=y.data,this._fontSize=v,this._align=m,this.fromAtlas=y.fromAtlas===!0,this.setTexture(y.texture,y.frame),h(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,v){return this._maxWidth=p,this._dirty=!0,v!==void 0&&(this.wordWrapCharCode=v),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(p){this._lineSpacing=p,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var p=u.ToJSON(this),v={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return p.data=v,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=n,c.ParseXMLBitmapFont=r,o.exports=c},97545:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(49584),x=function(u,l,h,n){var r=l._text,f=r.length,a=u.currentContext;if(!(f===0||!d(u,a,l,h,n))){h.addToRenderList(l);var c=l.fromAtlas?l.frame:l.texture.frames.__BASE,p=l.fontData.chars,v=l.fontData.lineHeight,m=l._letterSpacing,y=l._lineSpacing,E=0,P=0,S=0,w=null,A=0,R=0,O=0,F=0,L=0,D=0,I=null,B=0,V=c.source.image,Y=c.cutX,W=c.cutY,$=l._fontSize/l.fontData.size,N=l._align,U=0,b=0,G=l.getTextBounds(!1);l.maxWidth>0&&(r=G.wrappedText,f=r.length);var z=l._bounds.lines;N===1?b=(z.longest-z.lengths[0])/2:N===2&&(b=z.longest-z.lengths[0]),a.translate(-l.displayOriginX,-l.displayOriginY);for(var X=h.roundPixels,k=0;k<f;k++){if(S=r.charCodeAt(k),S===10){U++,N===1?b=(z.longest-z.lengths[U])/2:N===2&&(b=z.longest-z.lengths[U]),E=0,P+=v+y,I=null;continue}if(w=p[S],!!w){if(A=Y+w.x,R=W+w.y,O=w.width,F=w.height,L=w.xOffset+E,D=w.yOffset+P,I!==null){var H=w.kerning[B];L+=H!==void 0?H:0}L*=$,D*=$,L+=b,E+=w.xAdvance+m+(H!==void 0?H:0),I=w,B=S,!(O===0||F===0||S===32)&&(X&&(L=Math.round(L),D=Math.round(D)),a.save(),a.translate(L,D),a.scale($,$),a.drawImage(V,A,R,O,F,0,0,O,F),a.restore())}}a.restore()}};o.exports=x},95499:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),x=e(88933),u=e(99325),l=e(20494),h=e(10850);u.register("bitmapText",function(n,r){n===void 0&&(n={});var f=h(n,"font",""),a=l(n,"text",""),c=l(n,"size",!1),p=h(n,"align",0),v=new d(this.scene,0,0,f,a,c,p);return r!==void 0&&(n.add=r),x(this.scene,v,n),v})},21797:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44616),x=e(61286);x.register("bitmapText",function(u,l,h,n,r,f){return this.displayList.add(new d(this.scene,u,l,h,n,r,f))})},84557:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(26372),u=e(97545),o.exports={renderWebGL:x,renderCanvas:u}},26372:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8810),x=e(73329),u=e(75512),l=function(h,n,r,f){var a=n._text,c=a.length;if(c!==0){r.addToRenderList(n);var p=h.pipelines.set(n.pipeline,n),v=x(n,r,f).calc;h.pipelines.preBatch(n);var m=r.roundPixels,y=r.alpha,E=n.charColors,P=n.tintFill,S=u.getTintAppendFloatAlpha,w=S(n.tintTopLeft,y*n._alphaTL),A=S(n.tintTopRight,y*n._alphaTR),R=S(n.tintBottomLeft,y*n._alphaBL),O=S(n.tintBottomRight,y*n._alphaBR),F=n.frame.glTexture,L=p.setGameObject(n),D=n.getTextBounds(!1),I,B,V,Y=D.characters,W=n.dropShadowX,$=n.dropShadowY,N=W!==0||$!==0;if(N){var U=n.dropShadowColor,b=n.dropShadowAlpha,G=S(U,y*b*n._alphaTL),z=S(U,y*b*n._alphaTR),X=S(U,y*b*n._alphaBL),k=S(U,y*b*n._alphaBR);for(I=0;I<Y.length;I++)B=Y[I],V=B.glyph,!(B.code===32||V.width===0||V.height===0)&&d(p,n,B,V,W,$,v,m,G,z,X,k,1,F,L)}for(I=0;I<Y.length;I++)if(B=Y[I],V=B.glyph,!(B.code===32||V.width===0||V.height===0))if(E[B.i]){var H=E[B.i],K=H.tintEffect,Z=S(H.tintTL,y*n._alphaTL),J=S(H.tintTR,y*n._alphaTR),j=S(H.tintBL,y*n._alphaBL),Q=S(H.tintBR,y*n._alphaBR);d(p,n,B,V,0,0,v,m,Z,J,j,Q,K,F,L)}else d(p,n,B,V,0,0,v,m,w,A,R,O,P,F,L);h.pipelines.postBatch(n)}};o.exports=l},52816:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92246),x=e(41664),u=e(56694),l=e(64937),h=e(82047),n=e(89980),r=e(71207),f=new u({Extends:n,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,d],initialize:function(c,p,v,m,y){n.call(this,c,"Blitter"),this.setTexture(m,y),this.setPosition(p,v),this.initPipeline(),this.initPostPipeline(),this.children=new r,this.renderList=[],this.dirty=!1},create:function(a,c,p,v,m){v===void 0&&(v=!0),m===void 0&&(m=this.children.length),p===void 0?p=this.frame:p instanceof h||(p=this.texture.get(p));var y=new x(this,a,c,p,v);return this.children.addAt(y,m,!1),this.dirty=!0,y},createFromCallback:function(a,c,p,v){for(var m=this.createMultiple(c,p,v),y=0;y<m.length;y++){var E=m[y];a.call(this,E,y)}return m},createMultiple:function(a,c,p){c===void 0&&(c=this.frame.name),p===void 0&&(p=!0),Array.isArray(c)||(c=[c]);var v=[],m=this;return c.forEach(function(y){for(var E=0;E<a;E++)v.push(m.create(0,0,y,p))}),v},childCanRender:function(a){return a.visible&&a.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});o.exports=f},33177:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=d.getRenderList();if(l.length!==0){var h=e.currentContext,n=x.alpha*d.alpha;if(n!==0){x.addToRenderList(d),h.globalCompositeOperation=e.blendModes[d.blendMode],h.imageSmoothingEnabled=!d.frame.source.scaleMode;var r=d.x-x.scrollX*d.scrollFactorX,f=d.y-x.scrollY*d.scrollFactorY;h.save(),u&&u.copyToContext(h);for(var a=x.roundPixels,c=0;c<l.length;c++){var p=l[c],v=p.flipX||p.flipY,m=p.frame,y=m.canvasData,E=m.x,P=m.y,S=1,w=1,A=p.alpha*n;A!==0&&(h.globalAlpha=A,v?(p.flipX&&(S=-1,E-=y.width),p.flipY&&(w=-1,P-=y.height),y.width>0&&y.height>0&&(h.save(),h.translate(p.x+r,p.y+f),h.scale(S,w),h.drawImage(m.source.image,y.x,y.y,y.width,y.height,E,P,y.width,y.height),h.restore())):(a&&(E=Math.round(E),P=Math.round(P)),y.width>0&&y.height>0&&h.drawImage(m.source.image,y.x,y.y,y.width,y.height,E+p.x+r,P+p.y+f,y.width,y.height)))}h.restore()}}};o.exports=T},68452:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52816),x=e(88933),u=e(99325),l=e(20494);u.register("blitter",function(h,n){h===void 0&&(h={});var r=l(h,"key",null),f=l(h,"frame",null),a=new d(this.scene,0,0,r,f);return n!==void 0&&(h.add=n),x(this.scene,a,h),a})},38906:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52816),x=e(61286);x.register("blitter",function(u,l,h,n){return this.displayList.add(new d(this.scene,u,l,h,n))})},92246:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(89165),u=e(33177),o.exports={renderWebGL:x,renderCanvas:u}},89165:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),x=e(75512),u=new d,l=function(h,n,r,f){var a=n.getRenderList(),c=r.alpha*n.alpha;if(!(a.length===0||c===0)){r.addToRenderList(n);var p=h.pipelines.set(this.pipeline,n),v=r.scrollX*n.scrollFactorX,m=r.scrollY*n.scrollFactorY,y=u.copyFrom(r.matrix);f&&(y.multiplyWithOffset(f,-v,-m),v=0,m=0);var E=n.x-v,P=n.y-m,S=-1,w=!1,A=r.roundPixels;h.pipelines.preBatch(n);for(var R=0;R<a.length;R++){var O=a[R],F=O.frame,L=O.alpha*c;if(L!==0){var D=F.width,I=F.height,B=E+O.x+F.x,V=P+O.y+F.y;O.flipX&&(D*=-1,B+=F.width),O.flipY&&(I*=-1,V+=F.height);var Y=y.setQuad(B,V,B+D,V+I,A),W=x.getTintAppendFloatAlpha(O.tint,L);if(F.sourceIndex!==S){var $=p.setGameObject(n,F);S=F.sourceIndex}p.batchQuad(n,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],F.u0,F.v0,F.u1,F.v1,W,W,W,W,w,F.glTexture,$)&&(S=-1)}}h.pipelines.postBatch(n)}};o.exports=l},41664:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82047),u=new d({initialize:function(h,n,r,f,a){this.parent=h,this.x=n,this.y=r,this.frame=f,this.data={},this.tint=16777215,this._visible=a,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(l){return l===void 0?this.frame=this.parent.frame:l instanceof x&&l.texture===this.parent.texture?this.frame=l:this.frame=this.parent.texture.get(l),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(l,h,n){return this.x=l,this.y=h,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(l,h){return this.x=l,this.y=h,this},setFlipX:function(l){return this.flipX=l,this},setFlipY:function(l){return this.flipY=l,this},setFlip:function(l,h){return this.flipX=l,this.flipY=h,this},setVisible:function(l){return this.visible=l,this},setAlpha:function(l){return this.alpha=l,this},setTint:function(l){return this.tint=l,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(l){this.parent.dirty|=this._visible!==l,this._visible=l}},alpha:{get:function(){return this._alpha},set:function(l){this.parent.dirty|=this._alpha>0!=l>0,this._alpha=l}}});o.exports=u},97123:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=2,u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l,h,n,r){return l===void 0&&(l=1),h===void 0?this.alpha=l:(this._alphaTL=d(l,0,1),this._alphaTR=d(h,0,1),this._alphaBL=d(n,0,1),this._alphaBR=d(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(l){var h=d(l,0,1);this._alpha=h,this._alphaTL=h,this._alphaTR=h,this._alphaBL=h,this._alphaBR=h,h===0?this.renderFlags&=~x:this.renderFlags|=x}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(l){var h=d(l,0,1);this._alphaTL=h,h!==0&&(this.renderFlags|=x)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(l){var h=d(l,0,1);this._alphaTR=h,h!==0&&(this.renderFlags|=x)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(l){var h=d(l,0,1);this._alphaBL=h,h!==0&&(this.renderFlags|=x)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(l){var h=d(l,0,1);this._alphaBR=h,h!==0&&(this.renderFlags|=x)}}};o.exports=u},15720:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=2,u={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(l){return l===void 0&&(l=1),this.alpha=l,this},alpha:{get:function(){return this._alpha},set:function(l){var h=d(l,0,1);this._alpha=h,h===0?this.renderFlags&=~x:this.renderFlags|=x}}};o.exports=u},69732:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x={_blendMode:d.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(u){typeof u=="string"&&(u=d[u]),u|=0,u>=-1&&(this._blendMode=u)}},setBlendMode:function(u){return this.blendMode=u,this}};o.exports=x},28284:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,d){return this.width=e,this.height=d,this},setDisplaySize:function(e,d){return this.displayWidth=e,this.displayHeight=d,this}};o.exports=T},85293:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={texture:null,frame:null,isCropped:!1,setCrop:function(e,d,x,u){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,d,x,u,this.flipX,this.flipY);else{var l=e;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=T},14975:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};o.exports=T},88677:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(96910),u=e(72677),l=new d({initialize:function(n,r){this.gameObject=n,this.isPost=r,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(h){return h===void 0&&(h=0),this.padding=h,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(h){if(!this.isPost){var n=this.gameObject.scene.sys.renderer;n&&n.pipelines?(this.gameObject.pipeline=n.pipelines.FX_PIPELINE,h!==void 0&&(this.padding=h),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var h=this.list,n=0;n<h.length;n++)h[n].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(h){var n;if(this.isPost){var r=this.gameObject.getPostPipeline(String(h.type));for(Array.isArray(r)||(r=[r]),n=0;n<r.length;n++){var f=r[n];if(f.controller===h){this.gameObject.removePostPipeline(f),h.destroy();break}}}else{var a=this.list;for(n=0;n<a.length;n++)a[n]===h&&(u(a,n),h.destroy())}return this.gameObject},disable:function(h){return h===void 0&&(h=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,h&&this.clear(),this.gameObject},add:function(h,n){if(this.isPost){var r=String(h.type);this.gameObject.setPostPipeline(r,n);var f=this.gameObject.getPostPipeline(r);if(f)return Array.isArray(f)&&(f=f.pop()),f.controller=h,h}else return this.enabled||this.enable(),this.list.push(h),h},addGlow:function(h,n,r,f,a,c){return this.add(new x.Glow(this.gameObject,h,n,r,f),{quality:a,distance:c})},addShadow:function(h,n,r,f,a,c,p){return this.add(new x.Shadow(this.gameObject,h,n,r,f,a,c,p))},addPixelate:function(h){return this.add(new x.Pixelate(this.gameObject,h))},addVignette:function(h,n,r,f){return this.add(new x.Vignette(this.gameObject,h,n,r,f))},addShine:function(h,n,r,f){return this.add(new x.Shine(this.gameObject,h,n,r,f))},addBlur:function(h,n,r,f,a,c){return this.add(new x.Blur(this.gameObject,h,n,r,f,a,c))},addGradient:function(h,n,r,f,a,c,p,v){return this.add(new x.Gradient(this.gameObject,h,n,r,f,a,c,p,v))},addBloom:function(h,n,r,f,a,c){return this.add(new x.Bloom(this.gameObject,h,n,r,f,a,c))},addColorMatrix:function(){return this.add(new x.ColorMatrix(this.gameObject))},addCircle:function(h,n,r,f,a){return this.add(new x.Circle(this.gameObject,h,n,r,f,a))},addBarrel:function(h){return this.add(new x.Barrel(this.gameObject,h))},addDisplacement:function(h,n,r){return this.add(new x.Displacement(this.gameObject,h,n,r))},addWipe:function(h,n,r){return this.add(new x.Wipe(this.gameObject,h,n,r))},addReveal:function(h,n,r){return this.add(new x.Wipe(this.gameObject,h,n,r,!0))},addBokeh:function(h,n,r){return this.add(new x.Bokeh(this.gameObject,h,n,r))},addTiltShift:function(h,n,r,f,a,c){return this.add(new x.Bokeh(this.gameObject,h,n,r,!0,f,a,c))},destroy:function(){this.clear(),this.gameObject=null}});o.exports=l},92972:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,d){return this.flipX=e,this.flipY=d,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};o.exports=T},80693:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(2386),u=e(93736),l={prepareBoundsOutput:function(h,n){if(n===void 0&&(n=!1),this.rotation!==0&&x(h,this.x,this.y,this.rotation),n&&this.parentContainer){var r=this.parentContainer.getBoundsTransformMatrix();r.transformPoint(h.x,h.y,h)}return h},getCenter:function(h,n){return h===void 0&&(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getTopLeft:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getTopCenter:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getTopRight:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(h,n)},getLeftCenter:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getRightCenter:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(h,n)},getBottomLeft:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBottomCenter:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBottomRight:function(h,n){return h||(h=new u),h.x=this.x-this.displayWidth*this.originX+this.displayWidth,h.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(h,n)},getBounds:function(h){h===void 0&&(h=new d);var n,r,f,a,c,p,v,m;if(this.parentContainer){var y=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(h),y.transformPoint(h.x,h.y,h),n=h.x,r=h.y,this.getTopRight(h),y.transformPoint(h.x,h.y,h),f=h.x,a=h.y,this.getBottomLeft(h),y.transformPoint(h.x,h.y,h),c=h.x,p=h.y,this.getBottomRight(h),y.transformPoint(h.x,h.y,h),v=h.x,m=h.y}else this.getTopLeft(h),n=h.x,r=h.y,this.getTopRight(h),f=h.x,a=h.y,this.getBottomLeft(h),c=h.x,p=h.y,this.getBottomRight(h),v=h.x,m=h.y;return h.x=Math.min(n,f,c,v),h.y=Math.min(r,a,p,m),h.width=Math.max(n,f,c,v)-h.x,h.height=Math.max(r,a,p,m)-h.y,h}};o.exports=l},39171:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76756),x=e(63037),u={mask:null,setMask:function(l){return this.mask=l,this},clearMask:function(l){return l===void 0&&(l=!1),l&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(l,h,n,r,f){return l===void 0&&(this.texture||this.shader||this.geom)&&(l=this),new d(this.scene,l,h,n,r,f)},createGeometryMask:function(l){return l===void 0&&(this.type==="Graphics"||this.geom)&&(l=this),new x(this.scene,l)}};o.exports=u},28072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,d){return e===void 0&&(e=.5),d===void 0&&(d=e),this.originX=e,this.originY=d,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,d){return e===void 0&&(e=0),d===void 0&&(d=e),this.displayOriginX=e,this.displayOriginY=d,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};o.exports=T},54211:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75606),x=e(63130),u=e(10850),l=e(55303),h=e(93736),n={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function(r,f){f===void 0&&(f=this.pathConfig);var a=this.pathTween;return a&&a.isPlaying()&&a.stop(),this.path=r,f&&this.startFollow(f),this},setRotateToPath:function(r,f){return f===void 0&&(f=0),this.rotateToPath=r,this.pathRotationOffset=f,this},isFollowing:function(){var r=this.pathTween;return r&&r.isPlaying()},startFollow:function(r,f){r===void 0&&(r={}),f===void 0&&(f=0);var a=this.pathTween;a&&a.isPlaying()&&a.stop(),typeof r=="number"&&(r={duration:r}),r.from=u(r,"from",0),r.to=u(r,"to",1);var c=x(r,"positionOnPath",!1);this.rotateToPath=x(r,"rotateToPath",!1),this.pathRotationOffset=u(r,"rotationOffset",0);var p=u(r,"startAt",f);if(p&&(r.onStart=function(m){var y=m.data[0];y.progress=p,y.elapsed=y.duration*p;var E=y.ease(y.progress);y.current=y.start+(y.end-y.start)*E,y.setTargetValue()}),this.pathOffset||(this.pathOffset=new h(this.x,this.y)),this.pathVector||(this.pathVector=new h),this.pathDelta||(this.pathDelta=new h),this.pathDelta.reset(),r.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(r),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath){var v=this.path.getPoint(.1);this.rotation=Math.atan2(v.y-this.y,v.x-this.x)+d(this.pathRotationOffset)}return this.pathConfig=r,this},pauseFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.pause(),this},resumeFollow:function(){var r=this.pathTween;return r&&r.isPaused()&&r.resume(),this},stopFollow:function(){var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this},pathUpdate:function(){var r=this.pathTween;if(r){var f=r.data[0],a=this.pathDelta,c=this.pathVector;if(a.copy(c).negate(),f.state===l.COMPLETE){this.path.getPoint(f.end,c),a.add(c),c.add(this.pathOffset),this.setPosition(c.x,c.y);return}else if(f.state!==l.PLAYING_FORWARD&&f.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(r.getValue(),c),a.add(c),c.add(this.pathOffset);var p=this.x,v=this.y;this.setPosition(c.x,c.y);var m=this.x-p,y=this.y-v;if(m===0&&y===0)return;if(f.state!==this._prevDirection){this._prevDirection=f.state;return}this.rotateToPath&&(this.rotation=Math.atan2(y,m)+d(this.pathRotationOffset))}}};o.exports=n},58210:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28699),x={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(u){this.pipelineData={};var l=this.scene.sys.renderer;if(!l)return!1;var h=l.pipelines;if(h){u===void 0&&(u=h.default);var n=h.get(u);if(n)return this.defaultPipeline=n,this.pipeline=n,!0}return!1},setPipeline:function(u,l,h){var n=this.scene.sys.renderer;if(!n)return this;var r=n.pipelines;if(r){var f=r.get(u);f&&(this.pipeline=f),l&&(this.pipelineData=h?d(l):l)}return this},setPipelineData:function(u,l){var h=this.pipelineData;return l===void 0?delete h[u]:h[u]=l,this},resetPipeline:function(u){return u===void 0&&(u=!1),this.pipeline=this.defaultPipeline,u&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};o.exports=x},44086:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28699),x=e(88677),u=e(72677),l={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(h){this.postPipelines=[],this.postPipelineData={},this.postFX=new x(this,!0),h&&(this.preFX=new x(this,!1))},setPostPipeline:function(h,n,r){var f=this.scene.sys.renderer;if(!f)return this;var a=f.pipelines;if(a){Array.isArray(h)||(h=[h]);for(var c=0;c<h.length;c++){var p=a.getPostPipeline(h[c],this,n);p&&this.postPipelines.push(p)}n&&(this.postPipelineData=r?d(n):n)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(h,n){var r=this.postPipelineData;return n===void 0?delete r[h]:r[h]=n,this},getPostPipeline:function(h){for(var n=typeof h=="string",r=this.postPipelines,f=[],a=0;a<r.length;a++){var c=r[a];(n&&c.name===h||!n&&c instanceof h)&&f.push(c)}return f.length===1?f[0]:f},resetPostPipeline:function(h){h===void 0&&(h=!1);for(var n=this.postPipelines,r=0;r<n.length;r++)n[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,h&&(this.postPipelineData={})},removePostPipeline:function(h){for(var n=typeof h=="string",r=this.postPipelines,f=r.length-1;f>=0;f--){var a=r[f];(n&&a.name===h||!n&&a===h)&&(a.destroy(),u(r,f))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};o.exports=l},45900:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,d){return d===void 0&&(d=e),this.scrollFactorX=e,this.scrollFactorY=d,this}};o.exports=T},31654:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){e||(e=this.frame),this.width=e.realWidth,this.height=e.realHeight;var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this},setSize:function(e,d){return this.width=e,this.height=d,this},setDisplaySize:function(e,d){return this.displayWidth=e,this.displayHeight=d,this}};o.exports=T},82081:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82047),x=8,u={texture:null,frame:null,isCropped:!1,setTexture:function(l,h){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h)},setFrame:function(l,h,n){return h===void 0&&(h=!0),n===void 0&&(n=!0),l instanceof d?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};o.exports=u},21850:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82047),x=8,u={texture:null,frame:null,isCropped:!1,setCrop:function(l,h,n,r){if(l===void 0)this.isCropped=!1;else if(this.frame){if(typeof l=="number")this.frame.setCropUVs(this._crop,l,h,n,r,this.flipX,this.flipY);else{var f=l;this.frame.setCropUVs(this._crop,f.x,f.y,f.width,f.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(l,h){return this.texture=this.scene.sys.textures.get(l),this.setFrame(h)},setFrame:function(l,h,n){return h===void 0&&(h=!0),n===void 0&&(n=!0),l instanceof d?(this.texture=this.scene.sys.textures.get(l.texture.key),this.frame=l):this.frame=this.texture.get(l),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~x:this.renderFlags|=x,this._sizeComponent&&h&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};o.exports=u},58072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,d,x,u){return e===void 0&&(e=16777215),d===void 0&&(d=e,x=e,u=e),this.tintTopLeft=e,this.tintTopRight=d,this.tintBottomLeft=x,this.tintBottomRight=u,this.tintFill=!1,this},setTintFill:function(e,d,x,u){return this.setTint(e,d,x,u),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};o.exports=T},48129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(d.textureKey=e.texture.key,d.frameKey=e.frame.name),d};o.exports=T},56584:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(69360),u=e(64462),l=e(35786),h=e(62138),n=e(93736),r=4,f={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(a){this._scaleX=a,this._scaleY=a,a===0?this.renderFlags&=~r:this.renderFlags|=r}},scaleX:{get:function(){return this._scaleX},set:function(a){this._scaleX=a,a===0?this.renderFlags&=~r:this._scaleY!==0&&(this.renderFlags|=r)}},scaleY:{get:function(){return this._scaleY},set:function(a){this._scaleY=a,a===0?this.renderFlags&=~r:this._scaleX!==0&&(this.renderFlags|=r)}},angle:{get:function(){return h(this._rotation*d.RAD_TO_DEG)},set:function(a){this.rotation=h(a)*d.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(a){this._rotation=l(a)}},setPosition:function(a,c,p,v){return a===void 0&&(a=0),c===void 0&&(c=a),p===void 0&&(p=0),v===void 0&&(v=0),this.x=a,this.y=c,this.z=p,this.w=v,this},copyPosition:function(a){return a.x!==void 0&&(this.x=a.x),a.y!==void 0&&(this.y=a.y),a.z!==void 0&&(this.z=a.z),a.w!==void 0&&(this.w=a.w),this},setRandomPosition:function(a,c,p,v){return a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),v===void 0&&(v=this.scene.sys.scale.height),this.x=a+Math.random()*p,this.y=c+Math.random()*v,this},setRotation:function(a){return a===void 0&&(a=0),this.rotation=a,this},setAngle:function(a){return a===void 0&&(a=0),this.angle=a,this},setScale:function(a,c){return a===void 0&&(a=1),c===void 0&&(c=a),this.scaleX=a,this.scaleY=c,this},setX:function(a){return a===void 0&&(a=0),this.x=a,this},setY:function(a){return a===void 0&&(a=0),this.y=a,this},setZ:function(a){return a===void 0&&(a=0),this.z=a,this},setW:function(a){return a===void 0&&(a=0),this.w=a,this},getLocalTransformMatrix:function(a){return a===void 0&&(a=new x),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(a,c){a===void 0&&(a=new x);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(a);for(c||(c=new x),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)c.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),c.multiply(a,a),p=p.parentContainer;return a},getLocalPoint:function(a,c,p,v){p||(p=new n),v||(v=this.scene.sys.cameras.main);var m=v.scrollX,y=v.scrollY,E=a+m*this.scrollFactorX-m,P=c+y*this.scrollFactorY-y;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(E,P,p):u(E,P,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var a=0,c=this.parentContainer;c;)a+=c.rotation,c=c.parentContainer;return a}};o.exports=f},69360:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(83392),u=e(93736),l=new d({initialize:function(n,r,f,a,c,p){n===void 0&&(n=1),r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=1),c===void 0&&(c=0),p===void 0&&(p=0),this.matrix=new Float32Array([n,r,f,a,c,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(h){this.matrix[0]=h}},b:{get:function(){return this.matrix[1]},set:function(h){this.matrix[1]=h}},c:{get:function(){return this.matrix[2]},set:function(h){this.matrix[2]=h}},d:{get:function(){return this.matrix[3]},set:function(h){this.matrix[3]=h}},e:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},f:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},tx:{get:function(){return this.matrix[4]},set:function(h){this.matrix[4]=h}},ty:{get:function(){return this.matrix[5]},set:function(h){this.matrix[5]=h}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var h=this.matrix,n=h[0],r=h[1],f=h[2],a=h[3];return n||r?r>0?Math.acos(n/this.scaleX):-Math.acos(n/this.scaleX):f||a?x.TAU-(a>0?Math.acos(-f/this.scaleY):-Math.acos(f/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var h=this.matrix;return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,this},translate:function(h,n){var r=this.matrix;return r[4]=r[0]*h+r[2]*n+r[4],r[5]=r[1]*h+r[3]*n+r[5],this},scale:function(h,n){var r=this.matrix;return r[0]*=h,r[1]*=h,r[2]*=n,r[3]*=n,this},rotate:function(h){var n=Math.sin(h),r=Math.cos(h),f=this.matrix,a=f[0],c=f[1],p=f[2],v=f[3];return f[0]=a*r+p*n,f[1]=c*r+v*n,f[2]=a*-n+p*r,f[3]=c*-n+v*r,this},multiply:function(h,n){var r=this.matrix,f=h.matrix,a=r[0],c=r[1],p=r[2],v=r[3],m=r[4],y=r[5],E=f[0],P=f[1],S=f[2],w=f[3],A=f[4],R=f[5],O=n===void 0?r:n.matrix;return O[0]=E*a+P*p,O[1]=E*c+P*v,O[2]=S*a+w*p,O[3]=S*c+w*v,O[4]=A*a+R*p+m,O[5]=A*c+R*v+y,O},multiplyWithOffset:function(h,n,r){var f=this.matrix,a=h.matrix,c=f[0],p=f[1],v=f[2],m=f[3],y=f[4],E=f[5],P=n*c+r*v+y,S=n*p+r*m+E,w=a[0],A=a[1],R=a[2],O=a[3],F=a[4],L=a[5];return f[0]=w*c+A*v,f[1]=w*p+A*m,f[2]=R*c+O*v,f[3]=R*p+O*m,f[4]=F*c+L*v+P,f[5]=F*p+L*m+S,this},transform:function(h,n,r,f,a,c){var p=this.matrix,v=p[0],m=p[1],y=p[2],E=p[3],P=p[4],S=p[5];return p[0]=h*v+n*y,p[1]=h*m+n*E,p[2]=r*v+f*y,p[3]=r*m+f*E,p[4]=a*v+c*y+P,p[5]=a*m+c*E+S,this},transformPoint:function(h,n,r){r===void 0&&(r={x:0,y:0});var f=this.matrix,a=f[0],c=f[1],p=f[2],v=f[3],m=f[4],y=f[5];return r.x=h*a+n*p+m,r.y=h*c+n*v+y,r},invert:function(){var h=this.matrix,n=h[0],r=h[1],f=h[2],a=h[3],c=h[4],p=h[5],v=n*a-r*f;return h[0]=a/v,h[1]=-r/v,h[2]=-f/v,h[3]=n/v,h[4]=(f*p-a*c)/v,h[5]=-(n*p-r*c)/v,this},copyFrom:function(h){var n=this.matrix;return n[0]=h.a,n[1]=h.b,n[2]=h.c,n[3]=h.d,n[4]=h.e,n[5]=h.f,this},copyFromArray:function(h){var n=this.matrix;return n[0]=h[0],n[1]=h[1],n[2]=h[2],n[3]=h[3],n[4]=h[4],n[5]=h[5],this},copyToContext:function(h){var n=this.matrix;return h.transform(n[0],n[1],n[2],n[3],n[4],n[5]),h},setToContext:function(h){var n=this.matrix;return h.setTransform(n[0],n[1],n[2],n[3],n[4],n[5]),h},copyToArray:function(h){var n=this.matrix;return h===void 0?h=[n[0],n[1],n[2],n[3],n[4],n[5]]:(h[0]=n[0],h[1]=n[1],h[2]=n[2],h[3]=n[3],h[4]=n[4],h[5]=n[5]),h},setTransform:function(h,n,r,f,a,c){var p=this.matrix;return p[0]=h,p[1]=n,p[2]=r,p[3]=f,p[4]=a,p[5]=c,this},decomposeMatrix:function(){var h=this.decomposedMatrix,n=this.matrix,r=n[0],f=n[1],a=n[2],c=n[3],p=r*c-f*a;if(h.translateX=n[4],h.translateY=n[5],r||f){var v=Math.sqrt(r*r+f*f);h.rotation=f>0?Math.acos(r/v):-Math.acos(r/v),h.scaleX=v,h.scaleY=p/v}else if(a||c){var m=Math.sqrt(a*a+c*c);h.rotation=Math.PI*.5-(c>0?Math.acos(-a/m):-Math.acos(a/m)),h.scaleX=p/m,h.scaleY=m}else h.rotation=0,h.scaleX=0,h.scaleY=0;return h},applyITRS:function(h,n,r,f,a){var c=this.matrix,p=Math.sin(r),v=Math.cos(r);return c[4]=h,c[5]=n,c[0]=v*f,c[1]=p*f,c[2]=-p*a,c[3]=v*a,this},applyInverse:function(h,n,r){r===void 0&&(r=new u);var f=this.matrix,a=f[0],c=f[1],p=f[2],v=f[3],m=f[4],y=f[5],E=1/(a*v+p*-c);return r.x=v*E*h+-p*E*n+(y*p-m*v)*E,r.y=a*E*n+-c*E*h+(-y*a+m*c)*E,r},setQuad:function(h,n,r,f,a,c){c===void 0&&(c=this.quad);var p=this.matrix,v=p[0],m=p[1],y=p[2],E=p[3],P=p[4],S=p[5];return c[0]=h*v+n*y+P,c[1]=h*m+n*E+S,c[2]=h*v+f*y+P,c[3]=h*m+f*E+S,c[4]=r*v+f*y+P,c[5]=r*m+f*E+S,c[6]=r*v+n*y+P,c[7]=r*m+n*E+S,a&&c.forEach(function(w,A){c[A]=Math.round(w)}),c},getX:function(h,n){return h*this.a+n*this.c+this.e},getY:function(h,n){return h*this.b+n*this.d+this.f},getXRound:function(h,n,r){var f=this.getX(h,n);return r&&(f=Math.round(f)),f},getYRound:function(h,n,r){var f=this.getY(h,n);return r&&(f=Math.round(f)),f},getCSSMatrix:function(){var h=this.matrix;return"matrix("+h[0]+","+h[1]+","+h[2]+","+h[3]+","+h[4]+","+h[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});o.exports=l},59694:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(d){d?(this._visible=!0,this.renderFlags|=T):(this._visible=!1,this.renderFlags&=~T)}},setVisible:function(d){return this.visible=d,this}};o.exports=e},64937:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Alpha:e(97123),AlphaSingle:e(15720),BlendMode:e(69732),ComputedSize:e(28284),Crop:e(85293),Depth:e(14975),Flip:e(92972),FX:e(88677),GetBounds:e(80693),Mask:e(39171),Origin:e(28072),PathFollower:e(54211),Pipeline:e(58210),PostPipeline:e(44086),ScrollFactor:e(45900),Size:e(31654),Texture:e(82081),TextureCrop:e(21850),Tint:e(58072),ToJSON:e(48129),Transform:e(56584),TransformMatrix:e(69360),Visible:e(59694)}},70339:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59959),x=e(95723),u=e(56694),l=e(64937),h=e(56631),n=e(89980),r=e(74118),f=e(98524),a=e(58795),c=e(93736),p=new u({Extends:n,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.PostPipeline,l.Transform,l.Visible,f],initialize:function(m,y,E,P){n.call(this,m,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this.tempTransformMatrix=new l.TransformMatrix,this._sortKey="",this._sysEvents=m.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(y,E),this.setBlendMode(x.SKIP_CHECK),P&&this.add(P)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(v){return v===void 0&&(v=!0),this.exclusive=v,this},getBounds:function(v){if(v===void 0&&(v=new r),v.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix(),y=m.transformPoint(this.x,this.y);v.setTo(y.x,y.y,0,0)}if(this.list.length>0){var E=this.list,P=new r,S=!1;v.setEmpty();for(var w=0;w<E.length;w++){var A=E[w];A.getBounds&&(A.getBounds(P),S?a(P,v,v):(v.setTo(P.x,P.y,P.width,P.height),S=!0))}}return v},addHandler:function(v){v.once(h.DESTROY,this.remove,this),this.exclusive&&(v.parentContainer&&v.parentContainer.remove(v),v.parentContainer=this,v.removeFromDisplayList(),v.addedToScene())},removeHandler:function(v){v.off(h.DESTROY,this.remove,this),this.exclusive&&(v.parentContainer=null,v.removedFromScene(),v.addToDisplayList())},pointToContainer:function(v,m){m===void 0&&(m=new c),this.parentContainer?this.parentContainer.pointToContainer(v,m):(m.x=v.x,m.y=v.y);var y=this.tempTransformMatrix;return y.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),y.invert(),y.transformPoint(v.x,v.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(v){return d.Add(this.list,v,this.maxSize,this.addHandler,this),this},addAt:function(v,m){return d.AddAt(this.list,v,m,this.maxSize,this.addHandler,this),this},getAt:function(v){return this.list[v]},getIndex:function(v){return this.list.indexOf(v)},sort:function(v,m){return v?(m===void 0&&(m=function(y,E){return y[v]-E[v]}),d.StableSort(this.list,m),this):this},getByName:function(v){return d.GetFirst(this.list,"name",v)},getRandom:function(v,m){return d.GetRandom(this.list,v,m)},getFirst:function(v,m,y,E){return d.GetFirst(this.list,v,m,y,E)},getAll:function(v,m,y,E){return d.GetAll(this.list,v,m,y,E)},count:function(v,m,y,E){return d.CountAllMatching(this.list,v,m,y,E)},swap:function(v,m){return d.Swap(this.list,v,m),this},moveTo:function(v,m){return d.MoveTo(this.list,v,m),this},moveAbove:function(v,m){return d.MoveAbove(this.list,v,m),this},moveBelow:function(v,m){return d.MoveBelow(this.list,v,m),this},remove:function(v,m){var y=d.Remove(this.list,v,this.removeHandler,this);if(m&&y){Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++)y[E].destroy()}return this},removeAt:function(v,m){var y=d.RemoveAt(this.list,v,this.removeHandler,this);return m&&y&&y.destroy(),this},removeBetween:function(v,m,y){var E=d.RemoveBetween(this.list,v,m,this.removeHandler,this);if(y)for(var P=0;P<E.length;P++)E[P].destroy();return this},removeAll:function(v){var m=this.list;if(v){for(var y=0;y<m.length;y++)m[y]&&m[y].scene&&(m[y].off(h.DESTROY,this.remove,this),m[y].destroy());this.list=[]}else d.RemoveBetween(m,0,m.length,this.removeHandler,this);return this},bringToTop:function(v){return d.BringToTop(this.list,v),this},sendToBack:function(v){return d.SendToBack(this.list,v),this},moveUp:function(v){return d.MoveUp(this.list,v),this},moveDown:function(v){return d.MoveDown(this.list,v),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(v,m,y){var E=d.Replace(this.list,v,m);return E&&(this.addHandler(m),this.removeHandler(v),y&&v.destroy()),this},exists:function(v){return this.list.indexOf(v)>-1},setAll:function(v,m,y,E){return d.SetAll(this.list,v,m,y,E),this},each:function(v,m){var y=[null],E,P=this.list.slice(),S=P.length;for(E=2;E<arguments.length;E++)y.push(arguments[E]);for(E=0;E<S;E++)y[0]=P[E],v.apply(m,y);return this},iterate:function(v,m){var y=[null],E;for(E=2;E<arguments.length;E++)y.push(arguments[E]);for(E=0;E<this.list.length;E++)y[0]=this.list[E],v.apply(m,y);return this},setScrollFactor:function(v,m,y){return m===void 0&&(m=v),y===void 0&&(y=!1),this.scrollFactorX=v,this.scrollFactorY=m,y&&(d.SetAll(this.list,"scrollFactorX",v),d.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});o.exports=p},13916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d);var l=d.list;if(l.length!==0){var h=d.localTransform;u?(h.loadIdentity(),h.multiply(u),h.translate(d.x,d.y),h.rotate(d.rotation),h.scale(d.scaleX,d.scaleY)):h.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var n=d.blendMode!==-1;n||e.setBlendMode(0);var r=d._alpha,f=d.scrollFactorX,a=d.scrollFactorY;d.mask&&d.mask.preRenderCanvas(e,null,x);for(var c=0;c<l.length;c++){var p=l[c];if(!!p.willRender(x)){var v=p.alpha,m=p.scrollFactorX,y=p.scrollFactorY;!n&&p.blendMode!==e.currentBlendMode&&e.setBlendMode(p.blendMode),p.setScrollFactor(m*f,y*a),p.setAlpha(v*r),p.renderCanvas(e,p,x,h),p.setAlpha(v),p.setScrollFactor(m,y)}}d.mask&&d.mask.postRenderCanvas(e)}};o.exports=T},44516:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(70339),u=e(99325),l=e(20494);u.register("container",function(h,n){h===void 0&&(h={});var r=l(h,"x",0),f=l(h,"y",0),a=l(h,"children",null),c=new x(this.scene,r,f,a);return n!==void 0&&(h.add=n),d(this.scene,c,h),c})},23400:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70339),x=e(61286);x.register("container",function(u,l,h){return this.displayList.add(new d(this.scene,u,l,h))})},98524:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(36934),u=e(13916),o.exports={renderWebGL:x,renderCanvas:u}},36934:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d);var l=d.list,h=l.length;if(h!==0){var n=d.localTransform;u?(n.loadIdentity(),n.multiply(u),n.translate(d.x,d.y),n.rotate(d.rotation),n.scale(d.scaleX,d.scaleY)):n.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),e.pipelines.preBatch(d);var r=d.blendMode!==-1;r||e.setBlendMode(0);for(var f=d.alpha,a=d.scrollFactorX,c=d.scrollFactorY,p=0;p<h;p++){var v=l[p];if(!!v.willRender(x)){var m,y,E,P;if(v.alphaTopLeft!==void 0)m=v.alphaTopLeft,y=v.alphaTopRight,E=v.alphaBottomLeft,P=v.alphaBottomRight;else{var S=v.alpha;m=S,y=S,E=S,P=S}var w=v.scrollFactorX,A=v.scrollFactorY;!r&&v.blendMode!==e.currentBlendMode&&e.setBlendMode(v.blendMode);var R=v.mask;R&&R.preRenderWebGL(e,v,x);var O=v.type;O!==e.currentType&&(e.newType=!0,e.currentType=O),e.nextTypeMatch=p<h-1?l[p+1].type===e.currentType:!1,v.setScrollFactor(w*a,A*c),v.setAlpha(m*f,y*f,E*f,P*f),v.renderWebGL(e,v,x,n,d),v.setAlpha(m,y,E,P),v.setScrollFactor(w,A),R&&R.postRenderWebGL(e,x),e.newType=!1}}e.pipelines.postBatch(d)}};o.exports=T},2452:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(11603),l=e(89980),h=e(42911),n=e(55638),r=e(7599),f=e(51729),a=new d({Extends:l,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Origin,x.ScrollFactor,x.Transform,x.Visible,u],initialize:function(p,v,m,y,E,P){l.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new f,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(v,m),typeof y=="string"?y[0]==="#"?this.setElement(y.substr(1),E,P):this.createElement(y,E,P):y&&this.setElement(y,E,P),p.sys.events.on(r.SLEEP,this.handleSceneEvent,this),p.sys.events.on(r.WAKE,this.handleSceneEvent,this),p.sys.events.on(r.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(c){var p=this.node,v=p.style;p&&(v.display=c.settings.visible?"block":"none")},setSkew:function(c,p){return c===void 0&&(c=0),p===void 0&&(p=c),this.skewX=c,this.skewY=p,this},setPerspective:function(c){return this.parent.style.perspective=c+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(c){this.parent.style.perspective=c+"px"}},addListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.addEventListener(c[p],this.handler,!1)}return this},removeListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.removeEventListener(c[p],this.handler)}return this},dispatchNativeEvent:function(c){this.emit(c.type,c)},createElement:function(c,p,v){return this.setElement(document.createElement(c),p,v)},setElement:function(c,p,v){this.removeElement();var m;if(typeof c=="string"?(c[0]==="#"&&(c=c.substr(1)),m=document.getElementById(c)):typeof c=="object"&&c.nodeType===1&&(m=c),!m)return this;if(this.node=m,p&&h(p))for(var y in p)m.style[y]=p[y];else typeof p=="string"&&(m.style=p);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),v&&(m.innerText=v),this.updateSize()},createFromCache:function(c,p){var v=this.cache.get(c);return v&&this.createFromHTML(v,p),this},createFromHTML:function(c,p){p===void 0&&(p="div"),this.removeElement();var v=document.createElement(p);return this.node=v,v.style.zIndex="0",v.style.display="inline",v.style.position="absolute",v.phaser=this,this.parent&&this.parent.appendChild(v),v.innerHTML=c,this.updateSize()},removeElement:function(){return this.node&&(n(this.node),this.node=null),this},updateSize:function(){var c=this.node,p=c.getBoundingClientRect();return this.width=c.clientWidth,this.height=c.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(c,p){if(this.node){for(var v=this.node.querySelectorAll("*"),m=0;m<v.length;m++)if(v[m][c]===p)return v[m]}return null},getChildByID:function(c){return this.getChildByProperty("id",c)},getChildByName:function(c){return this.getChildByProperty("name",c)},setClassName:function(c){return this.node&&(this.node.className=c,this.updateSize()),this},setText:function(c){return this.node&&(this.node.innerText=c,this.updateSize()),this},setHTML:function(c){return this.node&&(this.node.innerHTML=c,this.updateSize()),this},preRender:function(){var c=this.parentContainer,p=this.node;p&&c&&!c.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(r.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(r.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(r.PRE_RENDER,this.preRender,this)}});o.exports=a},66070:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2452),x=e(89980),u=e(69360),l=new u,h=new u,n=new u,r=function(f,a,c,p){if(!!a.node){var v=a.node.style,m=a.scene.sys.settings;if(!v||!m.visible||x.RENDER_MASK!==a.renderFlags||a.cameraFilter!==0&&a.cameraFilter&c.id||a.parentContainer&&!a.parentContainer.willRender()){v.display="none";return}var y=a.parentContainer,E=c.alpha*a.alpha;y&&(E*=y.alpha);var P=l,S=h,w=n,A=0,R=0,O="0%",F="0%";p?(A=a.width*a.scaleX*a.originX,R=a.height*a.scaleY*a.originY,S.applyITRS(a.x-A,a.y-R,a.rotation,a.scaleX,a.scaleY),P.copyFrom(c.matrix),P.multiplyWithOffset(p,-c.scrollX*a.scrollFactorX,-c.scrollY*a.scrollFactorY),S.e=a.x-A,S.f=a.y-R,P.multiply(S,w)):(A=a.width*a.originX,R=a.height*a.originY,S.applyITRS(a.x-A,a.y-R,a.rotation,a.scaleX,a.scaleY),P.copyFrom(c.matrix),O=100*a.originX+"%",F=100*a.originY+"%",S.e-=c.scrollX*a.scrollFactorX,S.f-=c.scrollY*a.scrollFactorY,P.multiply(S,w)),a.transformOnly||(v.display="block",v.opacity=E,v.zIndex=a._depth,v.pointerEvents=a.pointerEvents,v.mixBlendMode=d[a._blendMode]),v.transform=w.getCSSMatrix()+" skew("+a.skewX+"rad, "+a.skewY+"rad) rotate3d("+a.rotate3d.x+","+a.rotate3d.y+","+a.rotate3d.z+","+a.rotate3d.w+a.rotate3dAngle+")",v.transformOrigin=O+" "+F}};o.exports=r},66788:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(38943),x=e(61286);x.register("dom",function(u,l,h,n,r){var f=new d(this.scene,u,l,h,n,r);return this.displayList.add(f),f})},11603:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(66070),u=e(66070),o.exports={renderWebGL:x,renderCanvas:u}},65492:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"},98398:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},40239:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"},17286:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},31496:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="created"},89587:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="error"},59792:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="locked"},96342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},6017:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="playing"},49614:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"},24418:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeked"},87318:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seeking"},50009:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stalled"},61922:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},79501:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="textureready"},4052:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"},54857:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unsupported"},56631:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:e(65492),DESTROY:e(98398),REMOVED_FROM_SCENE:e(40239),VIDEO_COMPLETE:e(17286),VIDEO_CREATED:e(31496),VIDEO_ERROR:e(89587),VIDEO_LOCKED:e(59792),VIDEO_LOOP:e(96342),VIDEO_PLAY:e(49614),VIDEO_PLAYING:e(6017),VIDEO_SEEKED:e(24418),VIDEO_SEEKING:e(87318),VIDEO_STALLED:e(50009),VIDEO_STOP:e(61922),VIDEO_TEXTURE:e(79501),VIDEO_UNLOCKED:e(4052),VIDEO_UNSUPPORTED:e(54857)}},39419:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),l=e(79394),h=new d({Extends:u,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.Origin,x.ScrollFactor,x.Size,x.Texture,x.Tint,x.Transform,x.Visible,l],initialize:function(r){u.call(this,r,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});o.exports=h},96699:()=>{},41155:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(39419),x=e(61286);x.register("extern",function(){var u=new d(this.scene);return this.displayList.add(u),u})},79394:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(81410),u=e(96699),o.exports={renderWebGL:x,renderCanvas:u}},81410:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,l,h,n){u.pipelines.clear();var r=d(l,h,n).calc;l.render.call(l,u,h,r),u.pipelines.rebind()};o.exports=x},36266:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51052),x=e(56694),u=e(36266),l=e(64937),h=e(95669),n=e(89980),r=e(72632),f=e(10850),a=e(83392),c=e(60898),p=new x({Extends:n,Mixins:[l.AlphaSingle,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.PostPipeline,l.Transform,l.Visible,l.ScrollFactor,c],initialize:function(m,y){var E=f(y,"x",0),P=f(y,"y",0);n.call(this,m,"Graphics"),this.setPosition(E,P),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(y)},setDefaultStyles:function(v){return f(v,"lineStyle",null)&&(this.defaultStrokeWidth=f(v,"lineStyle.width",1),this.defaultStrokeColor=f(v,"lineStyle.color",16777215),this.defaultStrokeAlpha=f(v,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),f(v,"fillStyle",null)&&(this.defaultFillColor=f(v,"fillStyle.color",16777215),this.defaultFillAlpha=f(v,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(v,m,y){return y===void 0&&(y=1),this.commandBuffer.push(u.LINE_STYLE,v,m,y),this._lineWidth=v,this},fillStyle:function(v,m){return m===void 0&&(m=1),this.commandBuffer.push(u.FILL_STYLE,v,m),this},fillGradientStyle:function(v,m,y,E,P,S,w,A){return P===void 0&&(P=1),S===void 0&&(S=P),w===void 0&&(w=P),A===void 0&&(A=P),this.commandBuffer.push(u.GRADIENT_FILL_STYLE,P,S,w,A,v,m,y,E),this},lineGradientStyle:function(v,m,y,E,P,S){return S===void 0&&(S=1),this.commandBuffer.push(u.GRADIENT_LINE_STYLE,v,S,m,y,E,P),this},beginPath:function(){return this.commandBuffer.push(u.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(u.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(u.FILL_PATH),this},fill:function(){return this.commandBuffer.push(u.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(u.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(u.STROKE_PATH),this},fillCircleShape:function(v){return this.fillCircle(v.x,v.y,v.radius)},strokeCircleShape:function(v){return this.strokeCircle(v.x,v.y,v.radius)},fillCircle:function(v,m,y){return this.beginPath(),this.arc(v,m,y,0,a.PI2),this.fillPath(),this},strokeCircle:function(v,m,y){return this.beginPath(),this.arc(v,m,y,0,a.PI2),this.strokePath(),this},fillRectShape:function(v){return this.fillRect(v.x,v.y,v.width,v.height)},strokeRectShape:function(v){return this.strokeRect(v.x,v.y,v.width,v.height)},fillRect:function(v,m,y,E){return this.commandBuffer.push(u.FILL_RECT,v,m,y,E),this},strokeRect:function(v,m,y,E){var P=this._lineWidth/2,S=v-P,w=v+P;return this.beginPath(),this.moveTo(v,m),this.lineTo(v,m+E),this.strokePath(),this.beginPath(),this.moveTo(v+y,m),this.lineTo(v+y,m+E),this.strokePath(),this.beginPath(),this.moveTo(S,m),this.lineTo(w+y,m),this.strokePath(),this.beginPath(),this.moveTo(S,m+E),this.lineTo(w+y,m+E),this.strokePath(),this},fillRoundedRect:function(v,m,y,E,P){P===void 0&&(P=20);var S=P,w=P,A=P,R=P;typeof P!="number"&&(S=r(P,"tl",20),w=r(P,"tr",20),A=r(P,"bl",20),R=r(P,"br",20));var O=S>=0,F=w>=0,L=A>=0,D=R>=0;return S=Math.abs(S),w=Math.abs(w),A=Math.abs(A),R=Math.abs(R),this.beginPath(),this.moveTo(v+S,m),this.lineTo(v+y-w,m),F?this.arc(v+y-w,m+w,w,-a.TAU,0):this.arc(v+y,m,w,Math.PI,a.TAU,!0),this.lineTo(v+y,m+E-R),D?this.arc(v+y-R,m+E-R,R,0,a.TAU):this.arc(v+y,m+E,R,-a.TAU,Math.PI,!0),this.lineTo(v+A,m+E),L?this.arc(v+A,m+E-A,A,a.TAU,Math.PI):this.arc(v,m+E,A,0,-a.TAU,!0),this.lineTo(v,m+S),O?this.arc(v+S,m+S,S,-Math.PI,-a.TAU):this.arc(v,m,S,a.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(v,m,y,E,P){P===void 0&&(P=20);var S=P,w=P,A=P,R=P,O=Math.min(y,E)/2;typeof P!="number"&&(S=r(P,"tl",20),w=r(P,"tr",20),A=r(P,"bl",20),R=r(P,"br",20));var F=S>=0,L=w>=0,D=A>=0,I=R>=0;return S=Math.min(Math.abs(S),O),w=Math.min(Math.abs(w),O),A=Math.min(Math.abs(A),O),R=Math.min(Math.abs(R),O),this.beginPath(),this.moveTo(v+S,m),this.lineTo(v+y-w,m),this.moveTo(v+y-w,m),L?this.arc(v+y-w,m+w,w,-a.TAU,0):this.arc(v+y,m,w,Math.PI,a.TAU,!0),this.lineTo(v+y,m+E-R),this.moveTo(v+y,m+E-R),I?this.arc(v+y-R,m+E-R,R,0,a.TAU):this.arc(v+y,m+E,R,-a.TAU,Math.PI,!0),this.lineTo(v+A,m+E),this.moveTo(v+A,m+E),D?this.arc(v+A,m+E-A,A,a.TAU,Math.PI):this.arc(v,m+E,A,0,-a.TAU,!0),this.lineTo(v,m+S),this.moveTo(v,m+S),F?this.arc(v+S,m+S,S,-Math.PI,-a.TAU):this.arc(v,m,S,a.TAU,0,!0),this.strokePath(),this},fillPointShape:function(v,m){return this.fillPoint(v.x,v.y,m)},fillPoint:function(v,m,y){return!y||y<1?y=1:(v-=y/2,m-=y/2),this.commandBuffer.push(u.FILL_RECT,v,m,y,y),this},fillTriangleShape:function(v){return this.fillTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},strokeTriangleShape:function(v){return this.strokeTriangle(v.x1,v.y1,v.x2,v.y2,v.x3,v.y3)},fillTriangle:function(v,m,y,E,P,S){return this.commandBuffer.push(u.FILL_TRIANGLE,v,m,y,E,P,S),this},strokeTriangle:function(v,m,y,E,P,S){return this.commandBuffer.push(u.STROKE_TRIANGLE,v,m,y,E,P,S),this},strokeLineShape:function(v){return this.lineBetween(v.x1,v.y1,v.x2,v.y2)},lineBetween:function(v,m,y,E){return this.beginPath(),this.moveTo(v,m),this.lineTo(y,E),this.strokePath(),this},lineTo:function(v,m){return this.commandBuffer.push(u.LINE_TO,v,m),this},moveTo:function(v,m){return this.commandBuffer.push(u.MOVE_TO,v,m),this},strokePoints:function(v,m,y,E){m===void 0&&(m=!1),y===void 0&&(y=!1),E===void 0&&(E=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var P=1;P<E;P++)this.lineTo(v[P].x,v[P].y);return m&&this.lineTo(v[0].x,v[0].y),y&&this.closePath(),this.strokePath(),this},fillPoints:function(v,m,y,E){m===void 0&&(m=!1),y===void 0&&(y=!1),E===void 0&&(E=v.length),this.beginPath(),this.moveTo(v[0].x,v[0].y);for(var P=1;P<E;P++)this.lineTo(v[P].x,v[P].y);return m&&this.lineTo(v[0].x,v[0].y),y&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(v,m){m===void 0&&(m=32);var y=v.getPoints(m);return this.strokePoints(y,!0)},strokeEllipse:function(v,m,y,E,P){P===void 0&&(P=32);var S=new h(v,m,y,E),w=S.getPoints(P);return this.strokePoints(w,!0)},fillEllipseShape:function(v,m){m===void 0&&(m=32);var y=v.getPoints(m);return this.fillPoints(y,!0)},fillEllipse:function(v,m,y,E,P){P===void 0&&(P=32);var S=new h(v,m,y,E),w=S.getPoints(P);return this.fillPoints(w,!0)},arc:function(v,m,y,E,P,S,w){return S===void 0&&(S=!1),w===void 0&&(w=0),this.commandBuffer.push(u.ARC,v,m,y,E,P,S,w),this},slice:function(v,m,y,E,P,S,w){return S===void 0&&(S=!1),w===void 0&&(w=0),this.commandBuffer.push(u.BEGIN_PATH),this.commandBuffer.push(u.MOVE_TO,v,m),this.commandBuffer.push(u.ARC,v,m,y,E,P,S,w),this.commandBuffer.push(u.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(u.SAVE),this},restore:function(){return this.commandBuffer.push(u.RESTORE),this},translateCanvas:function(v,m){return this.commandBuffer.push(u.TRANSLATE,v,m),this},scaleCanvas:function(v,m){return this.commandBuffer.push(u.SCALE,v,m),this},rotateCanvas:function(v){return this.commandBuffer.push(u.ROTATE,v),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(v,m,y){var E=this.scene.sys,P=E.game.renderer;m===void 0&&(m=E.scale.width),y===void 0&&(y=E.scale.height),p.TargetCamera.setScene(this.scene),p.TargetCamera.setViewport(0,0,m,y),p.TargetCamera.scrollX=this.x,p.TargetCamera.scrollY=this.y;var S,w,A={willReadFrequently:!0};if(typeof v=="string")if(E.textures.exists(v)){S=E.textures.get(v);var R=S.getSourceImage();R instanceof HTMLCanvasElement&&(w=R.getContext("2d",A))}else S=E.textures.createCanvas(v,m,y),w=S.getSourceImage().getContext("2d",A);else v instanceof HTMLCanvasElement&&(w=v.getContext("2d",A));return w&&(this.renderCanvas(P,this,p.TargetCamera,null,w,!1),S&&S.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});p.TargetCamera=new d,o.exports=p},91543:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36266),x=e(49584),u=function(l,h,n,r,f,a){var c=h.commandBuffer,p=c.length,v=f||l.currentContext;if(!(p===0||!x(l,v,h,n,r))){n.addToRenderList(h);var m=1,y=1,E=0,P=0,S=1,w=0,A=0,R=0;v.beginPath();for(var O=0;O<p;++O){var F=c[O];switch(F){case d.ARC:v.arc(c[O+1],c[O+2],c[O+3],c[O+4],c[O+5],c[O+6]),O+=7;break;case d.LINE_STYLE:S=c[O+1],E=c[O+2],m=c[O+3],w=(E&16711680)>>>16,A=(E&65280)>>>8,R=E&255,v.strokeStyle="rgba("+w+","+A+","+R+","+m+")",v.lineWidth=S,O+=3;break;case d.FILL_STYLE:P=c[O+1],y=c[O+2],w=(P&16711680)>>>16,A=(P&65280)>>>8,R=P&255,v.fillStyle="rgba("+w+","+A+","+R+","+y+")",O+=2;break;case d.BEGIN_PATH:v.beginPath();break;case d.CLOSE_PATH:v.closePath();break;case d.FILL_PATH:a||v.fill();break;case d.STROKE_PATH:a||v.stroke();break;case d.FILL_RECT:a?v.rect(c[O+1],c[O+2],c[O+3],c[O+4]):v.fillRect(c[O+1],c[O+2],c[O+3],c[O+4]),O+=4;break;case d.FILL_TRIANGLE:v.beginPath(),v.moveTo(c[O+1],c[O+2]),v.lineTo(c[O+3],c[O+4]),v.lineTo(c[O+5],c[O+6]),v.closePath(),a||v.fill(),O+=6;break;case d.STROKE_TRIANGLE:v.beginPath(),v.moveTo(c[O+1],c[O+2]),v.lineTo(c[O+3],c[O+4]),v.lineTo(c[O+5],c[O+6]),v.closePath(),a||v.stroke(),O+=6;break;case d.LINE_TO:v.lineTo(c[O+1],c[O+2]),O+=2;break;case d.MOVE_TO:v.moveTo(c[O+1],c[O+2]),O+=2;break;case d.LINE_FX_TO:v.lineTo(c[O+1],c[O+2]),O+=5;break;case d.MOVE_FX_TO:v.moveTo(c[O+1],c[O+2]),O+=5;break;case d.SAVE:v.save();break;case d.RESTORE:v.restore();break;case d.TRANSLATE:v.translate(c[O+1],c[O+2]),O+=2;break;case d.SCALE:v.scale(c[O+1],c[O+2]),O+=2;break;case d.ROTATE:v.rotate(c[O+1]),O+=1;break;case d.GRADIENT_FILL_STYLE:O+=5;break;case d.GRADIENT_LINE_STYLE:O+=6;break}}v.restore()}};o.exports=u},41286:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),x=e(33182);d.register("graphics",function(u,l){u===void 0&&(u={}),l!==void 0&&(u.add=l);var h=new x(this.scene,u);return u.add&&this.scene.sys.displayList.add(h),h})},13122:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(33182),x=e(61286);x.register("graphics",function(u){return this.displayList.add(new d(this.scene,u))})},60898:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(34429),u=e(91543),u=e(91543),o.exports={renderWebGL:x,renderCanvas:u}},34429:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(36266),x=e(73329),u=e(69360),l=e(75512),h=function(c,p,v){this.x=c,this.y=p,this.width=v},n=function(c,p,v){this.points=[],this.pointsLength=1,this.points[0]=new h(c,p,v)},r=[],f=new u,a=function(c,p,v,m){if(p.commandBuffer.length!==0){v.addToRenderList(p);var y=c.pipelines.set(p.pipeline,p);c.pipelines.preBatch(p);for(var E=x(p,v,m).calc,P=f.loadIdentity(),S=p.commandBuffer,w=v.alpha*p.alpha,A=1,R=y.fillTint,O=y.strokeTint,F=0,L=0,D=0,I=.01,B=Math.PI*2,V,Y=[],W=0,$=!0,N=null,U=l.getTintAppendFloatAlpha,b=0;b<S.length;b++)switch(V=S[b],V){case d.BEGIN_PATH:{Y.length=0,N=null,$=!0;break}case d.CLOSE_PATH:{$=!1,N&&N.points.length&&N.points.push(N.points[0]);break}case d.FILL_PATH:{for(W=0;W<Y.length;W++)y.batchFillPath(Y[W].points,P,E);break}case d.STROKE_PATH:{for(W=0;W<Y.length;W++)y.batchStrokePath(Y[W].points,A,$,P,E);break}case d.LINE_STYLE:{A=S[++b];var G=S[++b],z=S[++b]*w,X=U(G,z);O.TL=X,O.TR=X,O.BL=X,O.BR=X;break}case d.FILL_STYLE:{var k=S[++b],H=S[++b]*w,K=U(k,H);R.TL=K,R.TR=K,R.BL=K,R.BR=K;break}case d.GRADIENT_FILL_STYLE:{var Z=S[++b]*w,J=S[++b]*w,j=S[++b]*w,Q=S[++b]*w;R.TL=U(S[++b],Z),R.TR=U(S[++b],J),R.BL=U(S[++b],j),R.BR=U(S[++b],Q);break}case d.GRADIENT_LINE_STYLE:{A=S[++b];var _=S[++b]*w;O.TL=U(S[++b],_),O.TR=U(S[++b],_),O.BL=U(S[++b],_),O.BR=U(S[++b],_);break}case d.ARC:{var q=0,et=S[++b],at=S[++b],ot=S[++b],ht=S[++b],tt=S[++b],rt=S[++b],nt=S[++b];for(tt-=ht,rt?tt<-B?tt=-B:tt>0&&(tt=-B+tt%B):tt>B?tt=B:tt<0&&(tt=B+tt%B),N===null&&(N=new n(et+Math.cos(ht)*ot,at+Math.sin(ht)*ot,A),Y.push(N),q+=I);q<1+nt;)D=tt*q+ht,F=et+Math.cos(D)*ot,L=at+Math.sin(D)*ot,N.points.push(new h(F,L,A)),q+=I;D=tt+ht,F=et+Math.cos(D)*ot,L=at+Math.sin(D)*ot,N.points.push(new h(F,L,A));break}case d.FILL_RECT:{y.batchFillRect(S[++b],S[++b],S[++b],S[++b],P,E);break}case d.FILL_TRIANGLE:{y.batchFillTriangle(S[++b],S[++b],S[++b],S[++b],S[++b],S[++b],P,E);break}case d.STROKE_TRIANGLE:{y.batchStrokeTriangle(S[++b],S[++b],S[++b],S[++b],S[++b],S[++b],A,P,E);break}case d.LINE_TO:{N!==null?N.points.push(new h(S[++b],S[++b],A)):(N=new n(S[++b],S[++b],A),Y.push(N));break}case d.MOVE_TO:{N=new n(S[++b],S[++b],A),Y.push(N);break}case d.SAVE:{r.push(P.copyToArray());break}case d.RESTORE:{P.copyFromArray(r.pop());break}case d.TRANSLATE:{et=S[++b],at=S[++b],P.translate(et,at);break}case d.SCALE:{et=S[++b],at=S[++b],P.scale(et,at);break}case d.ROTATE:{P.rotate(S[++b]);break}}c.pipelines.postBatch(p)}};o.exports=a},59192:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83979),x=e(56694),u=e(56631),l=e(6659),h=e(71608),n=e(72632),r=e(10850),f=e(19256),a=e(42911),c=e(75757),p=e(58403),v=e(13747),m=new x({Extends:l,initialize:function(E,P,S){l.call(this),S?P&&!Array.isArray(P)&&(P=[P]):Array.isArray(P)?a(P[0])&&(S=P,P=null):a(P)&&(S=P,P=null),this.scene=E,this.children=new p,this.isParent=!0,this.type="Group",this.classType=n(S,"classType",v),this.name=n(S,"name",""),this.active=n(S,"active",!0),this.maxSize=n(S,"maxSize",-1),this.defaultKey=n(S,"defaultKey",null),this.defaultFrame=n(S,"defaultFrame",null),this.runChildUpdate=n(S,"runChildUpdate",!1),this.createCallback=n(S,"createCallback",null),this.removeCallback=n(S,"removeCallback",null),this.createMultipleCallback=n(S,"createMultipleCallback",null),this.internalCreateCallback=n(S,"internalCreateCallback",null),this.internalRemoveCallback=n(S,"internalRemoveCallback",null),P&&this.addMultiple(P),S&&this.createMultiple(S),this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(y,E,P,S,w,A){if(y===void 0&&(y=0),E===void 0&&(E=0),P===void 0&&(P=this.defaultKey),S===void 0&&(S=this.defaultFrame),w===void 0&&(w=!0),A===void 0&&(A=!0),this.isFull())return null;var R=new this.classType(this.scene,y,E,P,S);return R.addToDisplayList(this.scene.sys.displayList),R.addToUpdateList(),R.visible=w,R.setActive(A),this.add(R),R},createMultiple:function(y){if(this.isFull())return[];Array.isArray(y)||(y=[y]);var E=[];if(y[0].key)for(var P=0;P<y.length;P++){var S=this.createFromConfig(y[P]);E=E.concat(S)}return E},createFromConfig:function(y){if(this.isFull())return[];this.classType=n(y,"classType",this.classType);var E=n(y,"key",void 0),P=n(y,"frame",null),S=n(y,"visible",!0),w=n(y,"active",!0),A=[];if(E===void 0)return A;Array.isArray(E)||(E=[E]),Array.isArray(P)||(P=[P]);var R=n(y,"repeat",0),O=n(y,"randomKey",!1),F=n(y,"randomFrame",!1),L=n(y,"yoyo",!1),D=n(y,"quantity",!1),I=n(y,"frameQuantity",1),B=n(y,"max",0),V=c(E,P,{max:B,qty:D||I,random:O,randomB:F,repeat:R,yoyo:L});y.createCallback&&(this.createCallback=y.createCallback),y.removeCallback&&(this.removeCallback=y.removeCallback);for(var Y=0;Y<V.length;Y++){var W=this.create(0,0,V[Y].a,V[Y].b,S,w);if(!W)break;A.push(W)}if(f(y,"setXY")){var $=r(y,"setXY.x",0),N=r(y,"setXY.y",0),U=r(y,"setXY.stepX",0),b=r(y,"setXY.stepY",0);d.SetXY(A,$,N,U,b)}if(f(y,"setRotation")){var G=r(y,"setRotation.value",0),z=r(y,"setRotation.step",0);d.SetRotation(A,G,z)}if(f(y,"setScale")){var X=r(y,"setScale.x",1),k=r(y,"setScale.y",X),H=r(y,"setScale.stepX",0),K=r(y,"setScale.stepY",0);d.SetScale(A,X,k,H,K)}if(f(y,"setOrigin")){var Z=r(y,"setOrigin.x",.5),J=r(y,"setOrigin.y",Z),j=r(y,"setOrigin.stepX",0),Q=r(y,"setOrigin.stepY",0);d.SetOrigin(A,Z,J,j,Q)}if(f(y,"setAlpha")){var _=r(y,"setAlpha.value",1),q=r(y,"setAlpha.step",0);d.SetAlpha(A,_,q)}if(f(y,"setDepth")){var et=r(y,"setDepth.value",0),at=r(y,"setDepth.step",0);d.SetDepth(A,et,at)}if(f(y,"setScrollFactor")){var ot=r(y,"setScrollFactor.x",1),ht=r(y,"setScrollFactor.y",ot),tt=r(y,"setScrollFactor.stepX",0),rt=r(y,"setScrollFactor.stepY",0);d.SetScrollFactor(A,ot,ht,tt,rt)}var nt=n(y,"hitArea",null),pt=n(y,"hitAreaCallback",null);nt&&d.SetHitArea(A,nt,pt);var vt=n(y,"gridAlign",!1);return vt&&d.GridAlign(A,vt),this.createMultipleCallback&&this.createMultipleCallback.call(this,A),A},preUpdate:function(y,E){if(!(!this.runChildUpdate||this.children.size===0))for(var P=this.children.entries.slice(),S=0;S<P.length;S++){var w=P[S];w.active&&w.update(y,E)}},add:function(y,E){return E===void 0&&(E=!1),this.isFull()?this:(this.children.set(y),this.internalCreateCallback&&this.internalCreateCallback.call(this,y),this.createCallback&&this.createCallback.call(this,y),E&&(y.addToDisplayList(this.scene.sys.displayList),y.addToUpdateList()),y.on(u.DESTROY,this.remove,this),this)},addMultiple:function(y,E){if(E===void 0&&(E=!1),Array.isArray(y))for(var P=0;P<y.length;P++)this.add(y[P],E);return this},remove:function(y,E,P){return E===void 0&&(E=!1),P===void 0&&(P=!1),this.children.contains(y)?(this.children.delete(y),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,y),this.removeCallback&&this.removeCallback.call(this,y),y.off(u.DESTROY,this.remove,this),P?y.destroy():E&&(y.removeFromDisplayList(),y.removeFromUpdateList()),this):this},clear:function(y,E){y===void 0&&(y=!1),E===void 0&&(E=!1);for(var P=this.children,S=0;S<P.size;S++){var w=P.entries[S];w.off(u.DESTROY,this.remove,this),E?w.destroy():y&&(w.removeFromDisplayList(),w.removeFromUpdateList())}return this.children.clear(),this},contains:function(y){return this.children.contains(y)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(y,E,P,S){return h(this.children.entries,y,E,P,S)},getFirst:function(y,E,P,S,w,A,R){return this.getHandler(!0,1,y,E,P,S,w,A,R)},getFirstNth:function(y,E,P,S,w,A,R,O){return this.getHandler(!0,y,E,P,S,w,A,R,O)},getLast:function(y,E,P,S,w,A,R){return this.getHandler(!1,1,y,E,P,S,w,A,R)},getLastNth:function(y,E,P,S,w,A,R,O){return this.getHandler(!1,y,E,P,S,w,A,R,O)},getHandler:function(y,E,P,S,w,A,R,O,F){P===void 0&&(P=!1),S===void 0&&(S=!1);var L,D,I=0,B=this.children.entries;if(y)for(D=0;D<B.length;D++)if(L=B[D],L.active===P){if(I++,I===E)break}else L=null;else for(D=B.length-1;D>=0;D--)if(L=B[D],L.active===P){if(I++,I===E)break}else L=null;return L?(typeof w=="number"&&(L.x=w),typeof A=="number"&&(L.y=A),L):S?this.create(w,A,R,O,F):null},get:function(y,E,P,S,w){return this.getFirst(!1,!0,y,E,P,S,w)},getFirstAlive:function(y,E,P,S,w,A){return this.getFirst(!0,y,E,P,S,w,A)},getFirstDead:function(y,E,P,S,w,A){return this.getFirst(!1,y,E,P,S,w,A)},playAnimation:function(y,E){return d.PlayAnimation(this.children.entries,y,E),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(y){y===void 0&&(y=!0);for(var E=0,P=0;P<this.children.size;P++)this.children.entries[P].active===y&&E++;return E},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var y=this.getTotalUsed(),E=this.maxSize===-1?999999999999:this.maxSize;return E-y},setActive:function(y){return this.active=y,this},setName:function(y){return this.name=y,this},propertyValueSet:function(y,E,P,S,w){return d.PropertyValueSet(this.children.entries,y,E,P,S,w),this},propertyValueInc:function(y,E,P,S,w){return d.PropertyValueInc(this.children.entries,y,E,P,S,w),this},setX:function(y,E){return d.SetX(this.children.entries,y,E),this},setY:function(y,E){return d.SetY(this.children.entries,y,E),this},setXY:function(y,E,P,S){return d.SetXY(this.children.entries,y,E,P,S),this},incX:function(y,E){return d.IncX(this.children.entries,y,E),this},incY:function(y,E){return d.IncY(this.children.entries,y,E),this},incXY:function(y,E,P,S){return d.IncXY(this.children.entries,y,E,P,S),this},shiftPosition:function(y,E,P){return d.ShiftPosition(this.children.entries,y,E,P),this},angle:function(y,E){return d.Angle(this.children.entries,y,E),this},rotate:function(y,E){return d.Rotate(this.children.entries,y,E),this},rotateAround:function(y,E){return d.RotateAround(this.children.entries,y,E),this},rotateAroundDistance:function(y,E,P){return d.RotateAroundDistance(this.children.entries,y,E,P),this},setAlpha:function(y,E){return d.SetAlpha(this.children.entries,y,E),this},setTint:function(y,E,P,S){return d.SetTint(this.children.entries,y,E,P,S),this},setOrigin:function(y,E,P,S){return d.SetOrigin(this.children.entries,y,E,P,S),this},scaleX:function(y,E){return d.ScaleX(this.children.entries,y,E),this},scaleY:function(y,E){return d.ScaleY(this.children.entries,y,E),this},scaleXY:function(y,E,P,S){return d.ScaleXY(this.children.entries,y,E,P,S),this},setDepth:function(y,E){return d.SetDepth(this.children.entries,y,E),this},setBlendMode:function(y){return d.SetBlendMode(this.children.entries,y),this},setHitArea:function(y,E){return d.SetHitArea(this.children.entries,y,E),this},shuffle:function(){return d.Shuffle(this.children.entries),this},kill:function(y){this.children.contains(y)&&y.setActive(!1)},killAndHide:function(y){this.children.contains(y)&&(y.setActive(!1),y.setVisible(!1))},setVisible:function(y,E,P){return d.SetVisible(this.children.entries,y,E,P),this},toggleVisible:function(){return d.ToggleVisible(this.children.entries),this},destroy:function(y,E){y===void 0&&(y=!1),E===void 0&&(E=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(u.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(E,y),this.scene=void 0,this.children=void 0)}});o.exports=m},61295:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),x=e(59192);d.register("group",function(u){return new x(this.scene,null,u)})},62598:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59192),x=e(61286);x.register("group",function(u,l){return this.updateList.add(new d(this.scene,u,l))})},1539:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),l=e(57322),h=new d({Extends:u,Mixins:[x.Alpha,x.BlendMode,x.Depth,x.Flip,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.TextureCrop,x.Tint,x.Transform,x.Visible,l],initialize:function(r,f,a,c,p){u.call(this,r,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,p),this.setPosition(f,a),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=h},57786:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d),e.batchSprite(d,d.frame,x,u)};o.exports=T},83556:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(1539);x.register("image",function(h,n){h===void 0&&(h={});var r=u(h,"key",null),f=u(h,"frame",null),a=new l(this.scene,0,0,r,f);return n!==void 0&&(h.add=n),d(this.scene,a,h),a})},20927:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1539),x=e(61286);x.register("image",function(u,l,h,n){return this.displayList.add(new d(this.scene,u,l,h,n))})},57322:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(59390),u=e(57786),o.exports={renderWebGL:x,renderCanvas:u}},59390:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d),this.pipeline.batchSprite(d,x,u)};o.exports=T},48013:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Events:e(56631),DisplayList:e(91713),GameObjectCreator:e(99325),GameObjectFactory:e(61286),UpdateList:e(92034),Components:e(64937),GetCalcMatrix:e(73329),BuildGameObject:e(88933),BuildGameObjectAnimation:e(32291),GameObject:e(89980),BitmapText:e(44616),Blitter:e(52816),Bob:e(41664),Container:e(70339),DOMElement:e(38943),DynamicBitmapText:e(13468),Extern:e(39419),Graphics:e(33182),Group:e(59192),Image:e(1539),Layer:e(85305),Particles:e(27684),PathFollower:e(29598),RenderTexture:e(15996),RetroFont:e(55873),Rope:e(79968),Sprite:e(13747),Text:e(76555),GetTextSize:e(32979),MeasureText:e(27030),TextStyle:e(74744),TileSprite:e(35856),Zone:e(71030),Video:e(8630),Shape:e(91461),Arc:e(28593),Curve:e(15220),Ellipse:e(28591),Grid:e(39169),IsoBox:e(4415),IsoTriangle:e(65159),Line:e(579),Polygon:e(91249),Rectangle:e(517),Star:e(77843),Triangle:e(21873),Factories:{Blitter:e(38906),Container:e(23400),DOMElement:e(66788),DynamicBitmapText:e(94145),Extern:e(41155),Graphics:e(13122),Group:e(62598),Image:e(20927),Layer:e(17676),Particles:e(81212),PathFollower:e(19626),RenderTexture:e(29599),Rope:e(31982),Sprite:e(66135),StaticBitmapText:e(21797),Text:e(94627),TileSprite:e(20509),Zone:e(34546),Video:e(215),Arc:e(10369),Curve:e(10147),Ellipse:e(99869),Grid:e(9326),IsoBox:e(88154),IsoTriangle:e(67765),Line:e(85665),Polygon:e(88203),Rectangle:e(94355),Star:e(23962),Triangle:e(79296)},Creators:{Blitter:e(68452),Container:e(44516),DynamicBitmapText:e(67513),Graphics:e(41286),Group:e(61295),Image:e(83556),Layer:e(56378),Particles:e(765),RenderTexture:e(85692),Rope:e(96027),Sprite:e(89219),StaticBitmapText:e(95499),Text:e(75397),TileSprite:e(63950),Zone:e(24067),Video:e(65601)}};d.Shader=e(27902),d.Mesh=e(83321),d.NineSlice=e(44139),d.PointLight=e(13171),d.Plane=e(33412),d.Factories.Shader=e(51979),d.Factories.Mesh=e(8767),d.Factories.NineSlice=e(53778),d.Factories.PointLight=e(91201),d.Factories.Plane=e(58322),d.Creators.Shader=e(13908),d.Creators.Mesh=e(41839),d.Creators.NineSlice=e(40964),d.Creators.PointLight=e(162),d.Creators.Plane=e(10912),d.Light=e(14455),d.LightsManager=e(26193),d.LightsPlugin=e(50296),o.exports=d},85305:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(56694),u=e(64937),l=e(48129),h=e(81078),n=e(6659),r=e(56631),f=e(71207),a=e(58010),c=e(7599),p=e(17922),v=new x({Extends:f,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.PostPipeline,u.Visible,n,a],initialize:function(y,E){f.call(this,y),n.call(this),this.scene=y,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=y.sys,this.events=y.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(d.SKIP_CHECK),E&&this.add(E),y.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(m,y){return this.data||(this.data=new h(this)),this.data.set(m,y),this},incData:function(m,y){return this.data||(this.data=new h(this)),this.data.inc(m,y),this},toggleData:function(m){return this.data||(this.data=new h(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new h(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,y=this.parentContainer,E=[];y&&(E.unshift(y.getIndex(m)),m=y,y.parentContainer);)y=y.parentContainer;return E.unshift(this.displayList.getIndex(m)),E},addChildCallback:function(m){m.displayList&&m.displayList!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(r.ADDED_TO_SCENE,m,this.scene),this.events.emit(c.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(r.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,y){return m._depth-y._depth},getChildren:function(){return this.list},addToDisplayList:function(m){return m===void 0&&(m=this.scene.sys.displayList),this.displayList&&this.displayList!==m&&this.removeFromDisplayList(),m.exists(this)||(this.displayList=m,m.add(this,!0),m.queueDepthSort(),this.emit(r.ADDED_TO_SCENE,this,this.scene),m.events.emit(c.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var m=this.displayList||this.scene.sys.displayList;return m.exists(this)&&(m.remove(this,!0),m.queueDepthSort(),this.displayList=null,this.emit(r.REMOVED_FROM_SCENE,this,this.scene),m.events.emit(c.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(m){if(!(!this.scene||this.ignoreDestroy)){this.emit(r.DESTROY,this);for(var y=this.list;y.length;)y[0].destroy(m);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});o.exports=v},834:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=d.list;if(u.length!==0){d.depthSort();var l=d.blendMode!==-1;l||e.setBlendMode(0);var h=d._alpha;d.mask&&d.mask.preRenderCanvas(e,null,x);for(var n=0;n<u.length;n++){var r=u[n];if(!!r.willRender(x)){var f=r.alpha;!l&&r.blendMode!==e.currentBlendMode&&e.setBlendMode(r.blendMode),r.setAlpha(f*h),r.renderCanvas(e,r,x),r.setAlpha(f)}}d.mask&&d.mask.postRenderCanvas(e)}};o.exports=T},56378:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(85305),u=e(99325),l=e(20494);u.register("layer",function(h,n){h===void 0&&(h={});var r=l(h,"children",null),f=new x(this.scene,r);return n!==void 0&&(h.add=n),d(this.scene,f,h),f})},17676:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85305),x=e(61286);x.register("layer",function(u){return this.displayList.add(new d(this.scene,u))})},58010:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(17576),u=e(834),o.exports={renderWebGL:x,renderCanvas:u}},17576:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=d.list,l=u.length;if(l!==0){d.depthSort(),e.pipelines.preBatch(d);var h=d.blendMode!==-1;h||e.setBlendMode(0);for(var n=d.alpha,r=0;r<l;r++){var f=u[r];if(!!f.willRender(x)){var a,c,p,v;if(f.alphaTopLeft!==void 0)a=f.alphaTopLeft,c=f.alphaTopRight,p=f.alphaBottomLeft,v=f.alphaBottomRight;else{var m=f.alpha;a=m,c=m,p=m,v=m}!h&&f.blendMode!==e.currentBlendMode&&e.setBlendMode(f.blendMode);var y=f.mask;y&&y.preRenderWebGL(e,f,x);var E=f.type;E!==e.currentType&&(e.newType=!0,e.currentType=E),e.nextTypeMatch=r<l-1?u[r+1].type===e.currentType:!1,f.setAlpha(a*n,c*n,p*n,v*n),f.renderWebGL(e,f,x),f.setAlpha(a,c,p,v),y&&y.postRenderWebGL(e,x),e.newType=!1}}e.pipelines.postBatch(d)}};o.exports=T},14455:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),x=e(56694),u=e(64937),l=e(39298),h=e(75512),n=new x({Extends:d,Mixins:[u.Origin,u.ScrollFactor,u.Transform,u.Visible],initialize:function(f,a,c,p,v,m,y){d.call(this,f,a,c),this.color=new l(p,v,m),this.intensity=y,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(c)},displayWidth:{get:function(){return this.diameter},set:function(r){this.diameter=r}},displayHeight:{get:function(){return this.diameter},set:function(r){this.diameter=r}},width:{get:function(){return this.diameter},set:function(r){this.diameter=r}},height:{get:function(){return this.diameter},set:function(r){this.diameter=r}},willRender:function(r){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&r.id)},setColor:function(r){var f=h.getFloatsFromUintRGB(r);return this.color.set(f[0],f[1],f[2]),this},setIntensity:function(r){return this.intensity=r,this},setRadius:function(r){return this.radius=r,this}});n.RENDER_MASK=15,o.exports=n},26193:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26535),x=e(56694),u=e(53996),l=e(14455),h=e(13171),n=e(39298),r=e(72677),f=e(17922),a=e(75512),c=new x({initialize:function(){this.lights=[],this.ambientColor=new n(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,v,m,y,E,P){return this.systems.displayList.add(new h(this.scene,p,v,m,y,E,P))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var v=this.lights,m=p.worldView,y=[],E=0;E<v.length;E++){var P=v[E];P.willRender(p)&&d(P,m)&&y.push({light:P,distance:u(P.x,P.y,m.centerX,m.centerY)})}return y.length>this.maxLights&&(f(y,this.sortByDistance),y=y.slice(0,this.maxLights)),this.visibleLights=y.length,y},sortByDistance:function(p,v){return p.distance>=v.distance},setAmbientColor:function(p){var v=a.getFloatsFromUintRGB(p);return this.ambientColor.set(v[0],v[1],v[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,v,m,y,E){p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=128),y===void 0&&(y=16777215),E===void 0&&(E=1);var P=a.getFloatsFromUintRGB(y),S=new l(p,v,m,P[0],P[1],P[2],E);return this.lights.push(S),S},removeLight:function(p){var v=this.lights.indexOf(p);return v>=0&&r(this.lights,v),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});o.exports=c},50296:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(26193),u=e(91963),l=e(7599),h=new d({Extends:x,initialize:function(r){this.scene=r,this.systems=r.sys,r.sys.settings.isBooted||r.sys.events.once(l.BOOT,this.boot,this),x.call(this)},boot:function(){var n=this.systems.events;n.on(l.SHUTDOWN,this.shutdown,this),n.on(l.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});u.register("LightsPlugin",h,"lights"),o.exports=h},83321:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(75606),l=e(18693),h=e(89980),n=e(53267),r=e(67623),f=e(73329),a=e(16650),c=e(23464),p=e(23701),v=e(17922),m=e(70015),y=e(85769),E=new d({Extends:h,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Size,x.Texture,x.Transform,x.Visible,c],initialize:function(S,w,A,R,O,F,L,D,I,B,V,Y){w===void 0&&(w=0),A===void 0&&(A=0),R===void 0&&(R="__WHITE"),h.call(this,S,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new m,this.modelScale=new m(1,1,1),this.modelRotation=new m,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new a,this.viewPosition=new m,this.viewMatrix=new a,this.projectionMatrix=new a,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var W=S.sys.renderer;this.setPosition(w,A),this.setTexture(R,O),this.setSize(W.width,W.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(W.width,W.height),F&&this.addVertices(F,L,D,I,B,V,Y)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(P){return this.viewPosition.addScale(m.LEFT,P),this.dirtyCache[10]=1,this},panY:function(P){return this.viewPosition.y+=m.DOWN.y*P,this.dirtyCache[10]=1,this},panZ:function(P){return this.viewPosition.z+=P,this.dirtyCache[10]=1,this},setPerspective:function(P,S,w,A,R){return w===void 0&&(w=45),A===void 0&&(A=.01),R===void 0&&(R=1e3),this.fov=w,this.projectionMatrix.perspective(u(w),P/S,A,R),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(P,S,w,A){return P===void 0&&(P=this.scene.sys.renderer.getAspectRatio()),S===void 0&&(S=1),w===void 0&&(w=-1e3),A===void 0&&(A=1e3),this.fov=0,this.projectionMatrix.ortho(-P,P,-S,S,w,A),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(P){P.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(P,S,w,A,R,O,F,L,D){var I=this.scene.sys.cache.obj.get(P),B;return I&&(B=n(I,this,S,w,A,R,O,F,L,D)),(!B||B.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",P),this},sortByDepth:function(P,S){return P.depth-S.depth},depthSort:function(){return v(this.faces,this.sortByDepth),this},addVertex:function(P,S,w,A,R,O,F){var L=new y(P,S,w,A,R,O,F);return this.vertices.push(L),L},addFace:function(P,S,w){var A=new l(P,S,w);return this.faces.push(A),this.dirtyCache[9]=-1,A},addVertices:function(P,S,w,A,R,O,F){var L=r(P,S,w,A,R,O,F);return L?(this.faces=this.faces.concat(L.faces),this.vertices=this.vertices.concat(L.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(P){return this.faces[P]},hasFaceAt:function(P,S,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var A=f(this,w).calc,R=this.faces,O=0;O<R.length;O++){var F=R[O];if(F.contains(P,S,A))return!0}return!1},getFaceAt:function(P,S,w){w===void 0&&(w=this.scene.sys.cameras.main);for(var A=f(this,w).calc,R=this.faces,O=[],F=0;F<R.length;F++){var L=R[F];L.contains(P,S,A)&&O.push(L)}return v(O,this.sortByDepth)},setDebug:function(P,S){return this.debugGraphic=P,!P&&!S?this.debugCallback=null:S?this.debugCallback=S:this.debugCallback=this.renderDebug,this},isDirty:function(){var P=this.modelPosition,S=this.modelRotation,w=this.modelScale,A=this.dirtyCache,R=P.x,O=P.y,F=P.z,L=S.x,D=S.y,I=S.z,B=w.x,V=w.y,Y=w.z,W=this.getFaceCount(),$=A[0],N=A[1],U=A[2],b=A[3],G=A[4],z=A[5],X=A[6],k=A[7],H=A[8],K=A[9];return A[0]=R,A[1]=O,A[2]=F,A[3]=L,A[4]=D,A[5]=I,A[6]=B,A[7]=V,A[8]=Y,A[9]=W,$!==R||N!==O||U!==F||b!==L||G!==D||z!==I||X!==B||k!==V||H!==Y||K!==W},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var P=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!P[10]&&!this.isDirty())){var S=this.width,w=this.height,A=this.viewMatrix,R=this.viewPosition;P[10]&&(A.identity(),A.translate(R),A.invert(),P[10]=0);var O=this.transformMatrix;O.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var F=R.z,L=this.faces,D=0;D<L.length;D++)L[D].transformCoordinatesLocal(O,S,w,F);this.depthSort()}},renderDebug:function(P,S){for(var w=P.debugGraphic,A=0;A<S.length;A++){var R=S[A],O=R.vertex1.tx,F=R.vertex1.ty,L=R.vertex2.tx,D=R.vertex2.ty,I=R.vertex3.tx,B=R.vertex3.ty;w.strokeTriangle(O,F,L,D,I,B)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var P=this.faces,S=function(w,A,R){for(var O=0;O<P.length;O++){var F=P[O];if(F.contains(A,R))return!0}return!1};return this.scene.sys.input.enable(this,S),this},setTint:function(P){P===void 0&&(P=16777215);for(var S=this.vertices,w=0;w<S.length;w++)S[w].color=P;return this},uvScroll:function(P,S){for(var w=this.faces,A=0;A<w.length;A++)w[A].scrollUV(P,S);return this},uvScale:function(P,S){for(var w=this.faces,A=0;A<w.length;A++)w[A].scaleUV(P,S);return this},tint:{set:function(P){this.setTint(P)}},rotateX:{get:function(){return p(this.modelRotation.x)},set:function(P){this.modelRotation.x=u(P)}},rotateY:{get:function(){return p(this.modelRotation.y)},set:function(P){this.modelRotation.y=u(P)}},rotateZ:{get:function(){return p(this.modelRotation.z)},set:function(P){this.modelRotation.z=u(P)}}});o.exports=E},6317:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};o.exports=T},41839:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(10850),h=e(83321);x.register("mesh",function(n,r){n===void 0&&(n={});var f=u(n,"key",null),a=u(n,"frame",null),c=l(n,"vertices",[]),p=l(n,"uvs",[]),v=l(n,"indicies",[]),m=l(n,"containsZ",!1),y=l(n,"normals",[]),E=l(n,"colors",16777215),P=l(n,"alphas",1),S=new h(this.scene,0,0,f,a,c,p,v,m,y,E,P);return r!==void 0&&(n.add=r),d(this.scene,S,n),S})},8767:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83321),x=e(61286);x.register("mesh",function(u,l,h,n,r,f,a,c,p,v,m){return this.displayList.add(new d(this.scene,u,l,h,n,r,f,a,c,p,v,m))})},23464:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(57410),u=e(6317),o.exports={renderWebGL:x,renderCanvas:u}},57410:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,l,h,n){var r=l.faces,f=r.length;if(f!==0){h.addToRenderList(l);var a=u.pipelines.set(l.pipeline,l),c=d(l,h,n).calc;u.pipelines.preBatch(l);for(var p=a.setGameObject(l),v=a.vertexViewF32,m=a.vertexViewU32,y=a.vertexCount*a.currentShader.vertexComponentCount-1,E=l.tintFill,P=[],S=l.debugCallback,w=c.a,A=c.b,R=c.c,O=c.d,F=c.e,L=c.f,D=l.viewPosition.z,I=l.hideCCW,B=h.roundPixels,V=h.alpha*l.alpha,Y=0,W=0;W<f;W++){var $=r[W];!$.isInView(h,I,D,V,w,A,R,O,F,L,B)||(a.shouldFlush(3)&&(a.flush(),p=a.setGameObject(l),y=0),y=$.load(v,m,y,p,E),Y++,a.vertexCount+=3,a.currentBatch.count=a.vertexCount-a.currentBatch.start,S&&P.push($))}l.totalFrame+=Y,S&&S.call(l,l,P),u.pipelines.postBatch(l)}};o.exports=x},44139:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),l=e(94456),h=e(85769),n=new d({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,l],initialize:function(f,a,c,p,v,m,y,E,P,S,w){m===void 0&&(m=256),y===void 0&&(y=256),E===void 0&&(E=10),P===void 0&&(P=10),S===void 0&&(S=0),w===void 0&&(w=0),u.call(this,f,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=S===0&&w===0;for(var A=this.is3Slice?18:54,R=0;R<A;R++)this.vertices.push(new h);this.setPosition(a,c),this.setTexture(p,v),this.setSlices(m,y,E,P,S,w),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(r,f,a,c,p,v){r===void 0&&(r=256),f===void 0&&(f=256),a===void 0&&(a=10),c===void 0&&(c=10),p===void 0&&(p=0),v===void 0&&(v=0);var m=p===0&&v===0;return this.is3Slice!==m?console.warn("Cannot change 9 slice to 3 slice"):(this._width=r,this._height=f,this.leftWidth=a,this.rightWidth=c,this.topHeight=p,this.bottomHeight=v,this.is3Slice&&(f=this.frame.height,this._height=f,this.topHeight=f,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var r=this.leftWidth,f=this.rightWidth,a=this.topHeight,c=this.bottomHeight,p=this.frame.width,v=this.frame.height;this.updateQuadUVs(0,0,0,r/p,a/v),this.updateQuadUVs(6,r/p,0,1-f/p,a/v),this.updateQuadUVs(12,1-f/p,0,1,a/v),this.is3Slice||(this.updateQuadUVs(18,0,a/v,r/p,1-c/v),this.updateQuadUVs(24,r/p,a/v,1-f/p,1-c/v),this.updateQuadUVs(30,1-f/p,a/v,1,1-c/v),this.updateQuadUVs(36,0,1-c/v,r/p,1),this.updateQuadUVs(42,r/p,1-c/v,1-f/p,1),this.updateQuadUVs(48,1-f/p,1-c/v,1,1))},updateVertices:function(){var r=this.leftWidth,f=this.rightWidth,a=this.topHeight,c=this.bottomHeight,p=this.width,v=this.height;this.updateQuad(0,-.5,.5,-.5+r/p,.5-a/v),this.updateQuad(6,-.5+r/p,.5,.5-f/p,.5-a/v),this.updateQuad(12,.5-f/p,.5,.5,.5-a/v),this.is3Slice||(this.updateQuad(18,-.5,.5-a/v,-.5+r/p,-.5+c/v),this.updateQuad(24,-.5+r/p,.5-a/v,.5-f/p,-.5+c/v),this.updateQuad(30,.5-f/p,.5-a/v,.5,-.5+c/v),this.updateQuad(36,-.5,-.5+c/v,-.5+r/p,-.5),this.updateQuad(42,-.5+r/p,-.5+c/v,.5-f/p,-.5),this.updateQuad(48,.5-f/p,-.5+c/v,.5,-.5))},updateQuad:function(r,f,a,c,p){var v=this.width,m=this.height,y=this.originX,E=this.originY,P=this.vertices;P[r+0].resize(f,a,v,m,y,E),P[r+1].resize(f,p,v,m,y,E),P[r+2].resize(c,a,v,m,y,E),P[r+3].resize(f,p,v,m,y,E),P[r+4].resize(c,p,v,m,y,E),P[r+5].resize(c,a,v,m,y,E)},updateQuadUVs:function(r,f,a,c,p){var v=this.vertices,m=this.frame,y=m.u0,E=m.v0,P=m.u1,S=m.v1;if(y!==0||P!==1){var w=P-y;f=y+f*w,c=y+c*w}if(E!==0||S!==1){var A=S-E;a=E+a*A,p=E+p*A}v[r+0].setUVs(f,a),v[r+1].setUVs(f,p),v[r+2].setUVs(c,a),v[r+3].setUVs(f,p),v[r+4].setUVs(c,p),v[r+5].setUVs(c,a)},clearTint:function(){return this.setTint(16777215),this},setTint:function(r){return r===void 0&&(r=16777215),this.tint=r,this.tintFill=!1,this},setTintFill:function(r){return this.setTint(r),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(r){this._width=Math.max(r,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(r){this.is3Slice||(this._height=Math.max(r,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}},setSize:function(r,f){this.width=r,this.height=f;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setDisplaySize:function(r,f){return this.displayWidth=r,this.displayHeight=f,this},originX:{get:function(){return this._originX},set:function(r){this._originX=r,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(r){this._originY=r,this.updateVertices()}},setOrigin:function(r,f){return r===void 0&&(r=.5),f===void 0&&(f=r),this._originX=r,this._originY=f,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var r=this.frame.height;this._height=r,this.topHeight=r,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});o.exports=n},40964:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(10850),h=e(44139);x.register("nineslice",function(n,r){n===void 0&&(n={});var f=u(n,"key",null),a=u(n,"frame",null),c=l(n,"width",256),p=l(n,"height",256),v=l(n,"leftWidth",10),m=l(n,"rightWidth",10),y=l(n,"topHeight",0),E=l(n,"bottomHeight",0),P=new h(this.scene,0,0,f,a,c,p,v,m,y,E);return r!==void 0&&(n.add=r),d(this.scene,P,n),P})},53778:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44139),x=e(61286);x.register("nineslice",function(u,l,h,n,r,f,a,c,p,v){return this.displayList.add(new d(this.scene,u,l,h,n,r,f,a,c,p,v))})},94456:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(27420),o.exports={renderWebGL:x,renderCanvas:u}},27420:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(l,h,n,r){var f=h.vertices,a=f.length;if(a!==0){n.addToRenderList(h);var c=l.pipelines.set(h.pipeline,h),p=d(h,n,r,!1).calc;l.pipelines.preBatch(h);var v=c.setGameObject(h),m=c.vertexViewF32,y=c.vertexViewU32,E=c.vertexCount*c.currentShader.vertexComponentCount-1,P=n.roundPixels,S=h.tintFill,w=n.alpha*h.alpha,A=x.getTintAppendFloatAlpha(h.tint,w),R=c.vertexAvailable(),O=-1;R<a&&(O=R);for(var F=0;F<a;F++){var L=f[F];F===O&&(c.flush(),v=c.setGameObject(h),E=0),m[++E]=p.getXRound(L.vx,L.vy,P),m[++E]=p.getYRound(L.vx,L.vy,P),m[++E]=L.u,m[++E]=L.v,m[++E]=v,m[++E]=S,y[++E]=A,c.vertexCount++,c.currentBatch.count=c.vertexCount-c.currentBatch.start}l.pipelines.postBatch(h)}};o.exports=u},19737:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93025),u=e(22946),l=e(21902),h=e(4840),n=e(15978),r=new d({Extends:x,initialize:function(a){x.call(this,a,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var f=this.propertyValue,a=f,c=this.defaultEmit,p=this.defaultUpdate;if(this.method===9){this.start=f[0],this.ease=l("Linear"),this.interpolation=h("linear"),c=this.easedValueEmit,p=this.easeValueUpdate,a=f[0],this.active=!0;for(var v=0;v<f.length;v++){var m=n(f[v]);this.r.push(m.r),this.g.push(m.g),this.b.push(m.b)}}return this.onEmit=c,this.onUpdate=p,this.current=a,this},setEase:function(f){this.easeName=f,this.ease=l(f)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(f,a,c){var p=this.ease(c),v=this.interpolation(this.r,p),m=this.interpolation(this.g,p),y=this.interpolation(this.b,p),E=u(v,m,y);return this.current=E,E}});o.exports=r},93025:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),x=e(82897),u=e(56694),l=e(61616),h=e(21902),n=e(72632),r=e(4840),f=e(88462),a=e(1071),c=new u({initialize:function(v,m,y){y===void 0&&(y=!1),this.propertyKey=v,this.propertyValue=m,this.defaultValue=m,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=y,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(p,v){p===void 0&&(p={}),v&&(this.propertyKey=v),this.propertyValue=n(p,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(p){var v;switch(this.method){case 1:case 3:case 8:v=p;break;case 2:this.propertyValue.indexOf(p)>=0&&(v=p);break;case 4:var m=(this.end-this.start)/this.steps;v=f(p,m),this.counter=v;break;case 5:case 6:case 7:v=x(p,this.start,this.end);break;case 9:v=this.start[0];break}return this.current=v,this},getMethod:function(){var p=this.propertyValue;if(p===null)return 0;var v=typeof p;if(v==="number")return 1;if(Array.isArray(p))return 2;if(v==="function")return 3;if(v==="object"){if(this.hasBoth(p,"start","end"))return this.has(p,"steps")?4:5;if(this.hasBoth(p,"min","max"))return 6;if(this.has(p,"random"))return 7;if(this.hasEither(p,"onEmit","onUpdate"))return 8;if(this.has(p,"interpolation"))return 9}return 0},setMethods:function(){var p=this.propertyValue,v=p,m=this.defaultEmit,y=this.defaultUpdate;switch(this.method){case 1:m=this.staticValueEmit;break;case 2:m=this.randomStaticValueEmit,v=p[0];break;case 3:this._onEmit=p,m=this.proxyEmit;break;case 4:this.start=p.start,this.end=p.end,this.steps=p.steps,this.counter=this.start,this.yoyo=this.has(p,"yoyo")?p.yoyo:!1,this.direction=0,m=this.steppedEmit,v=this.start;break;case 5:this.start=p.start,this.end=p.end;var E=this.has(p,"ease")?p.ease:"Linear";this.ease=h(E,p.easeParams),m=this.has(p,"random")&&p.random?this.randomRangedValueEmit:this.easedValueEmit,y=this.easeValueUpdate,v=this.start;break;case 6:this.start=p.min,this.end=p.max,m=this.has(p,"int")&&p.int?this.randomRangedIntEmit:this.randomRangedValueEmit,v=this.start;break;case 7:var P=p.random;Array.isArray(P)&&(this.start=P[0],this.end=P[1]),m=this.randomRangedIntEmit,v=this.start;break;case 8:this._onEmit=this.has(p,"onEmit")?p.onEmit:this.defaultEmit,this._onUpdate=this.has(p,"onUpdate")?p.onUpdate:this.defaultUpdate,m=this.proxyEmit,y=this.proxyUpdate;break;case 9:this.start=p.values;var S=this.has(p,"ease")?p.ease:"Linear";this.ease=h(S,p.easeParams),this.interpolation=r(p.interpolation),m=this.easedValueEmit,y=this.easeValueUpdate,v=this.start[0];break}return this.onEmit=m,this.onUpdate=y,this.current=v,this},has:function(p,v){return p.hasOwnProperty(v)},hasBoth:function(p,v,m){return p.hasOwnProperty(v)&&p.hasOwnProperty(m)},hasEither:function(p,v,m){return p.hasOwnProperty(v)||p.hasOwnProperty(m)},defaultEmit:function(p,v,m){return m},defaultUpdate:function(p,v,m,y){return y},proxyEmit:function(p,v,m){var y=this._onEmit(p,v,m);return this.current=y,y},proxyUpdate:function(p,v,m,y){var E=this._onUpdate(p,v,m,y);return this.current=E,E},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var p=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[p],this.current},randomRangedValueEmit:function(p,v){var m=l(this.start,this.end);return p&&p.data[v]&&(p.data[v].min=m,p.data[v].max=this.end),this.current=m,m},randomRangedIntEmit:function(p,v){var m=d(this.start,this.end);return p&&p.data[v]&&(p.data[v].min=m,p.data[v].max=this.end),this.current=m,m},steppedEmit:function(){var p=this.counter,v=p,m=(this.end-this.start)/this.steps;if(this.yoyo){var y;this.direction===0?(v+=m,v>=this.end&&(y=v-this.end,v=this.end-y,this.direction=1)):(v-=m,v<=this.start&&(y=this.start-v,v=this.start+y,this.direction=0)),this.counter=v}else this.counter=a(v+m,this.start,this.end);return this.current=p,p},easedValueEmit:function(p,v){if(p&&p.data[v]){var m=p.data[v];m.min=this.start,m.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(p,v,m){var y=p.data[v],E,P=this.ease(m);return this.interpolation?E=this.interpolation(this.start,P):E=(y.max-y.min)*P+y.min,this.current=E,E},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});o.exports=c},87811:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(30891),l=new d({Extends:u,initialize:function(n,r,f,a,c){if(typeof n=="object"){var p=n;n=x(p,"x",0),r=x(p,"y",0),f=x(p,"power",0),a=x(p,"epsilon",100),c=x(p,"gravity",50)}else n===void 0&&(n=0),r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=100),c===void 0&&(c=50);u.call(this,n,r,!0),this._gravity=c,this._power=f*c,this._epsilon=a*a},update:function(h,n){var r=this.x-h.x,f=this.y-h.y,a=r*r+f*f;if(a!==0){var c=Math.sqrt(a);a<this._epsilon&&(a=this._epsilon);var p=this._power*n/(a*c)*100;h.velocityX+=r*p,h.velocityY+=f*p}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(h){this._epsilon=h*h}},power:{get:function(){return this._power/this._gravity},set:function(h){this._power=h*this._gravity}},gravity:{get:function(){return this._gravity},set:function(h){var n=this.power;this._gravity=h,this.power=n}}});o.exports=l},14909:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(82897),u=e(56694),l=e(75606),h=e(74118),n=e(2386),r=e(93736),f=new u({initialize:function(c){this.emitter=c,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new r,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=c.scene,this.anims=new d(this),this.bounds=new h},emit:function(a,c,p,v,m,y){return this.emitter.emit(a,c,p,v,m,y)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.x=a,this.y=c},fire:function(a,c){var p=this.emitter,v=p.ops,m=p.getAnim();if(m?this.anims.play(m):(this.frame=p.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(p.getEmitZone(this),a===void 0?this.x+=v.x.onEmit(this,"x"):v.x.steps>0?this.x+=a+v.x.onEmit(this,"x"):this.x+=a,c===void 0?this.y+=v.y.onEmit(this,"y"):v.y.steps>0?this.y+=c+v.y.onEmit(this,"y"):this.y+=c,this.life=v.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=v.delay.onEmit(this,"delay"),this.holdCurrent=v.hold.onEmit(this,"hold"),this.scaleX=v.scaleX.onEmit(this,"scaleX"),this.scaleY=v.scaleY.active?v.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=v.rotate.onEmit(this,"rotate"),this.rotation=l(this.angle),p.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&p.getDeathZone(this))return this.lifeCurrent=0,!1;var y=v.speedX.onEmit(this,"speedX"),E=v.speedY.active?v.speedY.onEmit(this,"speedY"):y;if(p.radial){var P=l(v.angle.onEmit(this,"angle"));this.velocityX=Math.cos(P)*Math.abs(y),this.velocityY=Math.sin(P)*Math.abs(E)}else if(p.moveTo){var S=v.moveToX.onEmit(this,"moveToX"),w=v.moveToY.onEmit(this,"moveToY"),A=this.life/1e3;this.velocityX=(S-this.x)/A,this.velocityY=(w-this.y)/A}else this.velocityX=y,this.velocityY=E;return p.acceleration&&(this.accelerationX=v.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=v.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=v.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=v.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=v.bounce.onEmit(this,"bounce"),this.alpha=v.alpha.onEmit(this,"alpha"),v.color.active?this.tint=v.color.onEmit(this,"tint"):this.tint=v.tint.onEmit(this,"tint"),!0},update:function(a,c,p){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=a,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=a,!1;this.anims.update(0,a);var v=this.emitter,m=v.ops,y=1-this.lifeCurrent/this.life;if(this.lifeT=y,this.x=m.x.onUpdate(this,"x",y,this.x),this.y=m.y.onUpdate(this,"y",y,this.y),v.moveTo){var E=m.moveToX.onUpdate(this,"moveToX",y,v.moveToX),P=m.moveToY.onUpdate(this,"moveToY",y,v.moveToY),S=this.lifeCurrent/1e3;this.velocityX=(E-this.x)/S,this.velocityY=(P-this.y)/S}return this.computeVelocity(v,a,c,p,y),this.scaleX=m.scaleX.onUpdate(this,"scaleX",y,this.scaleX),this.scaleY=this.scaleX,m.scaleY.active&&(this.scaleY=m.scaleY.onUpdate(this,"scaleY",y,this.scaleY)),this.angle=m.rotate.onUpdate(this,"rotate",y,this.angle),this.rotation=l(this.angle),v.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=m.alpha.onUpdate(this,"alpha",y,this.alpha),m.color.active?this.tint=m.color.onUpdate(this,"color",y,this.tint):this.tint=m.tint.onUpdate(this,"tint",y,this.tint),this.lifeCurrent-=a,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(a,c,p,v,m){var y=a.ops,E=this.velocityX,P=this.velocityY,S=y.accelerationX.onUpdate(this,"accelerationX",m,this.accelerationX),w=y.accelerationY.onUpdate(this,"accelerationY",m,this.accelerationY),A=y.maxVelocityX.onUpdate(this,"maxVelocityX",m,this.maxVelocityX),R=y.maxVelocityY.onUpdate(this,"maxVelocityY",m,this.maxVelocityY);this.bounce=y.bounce.onUpdate(this,"bounce",m,this.bounce),E+=a.gravityX*p+S*p,P+=a.gravityY*p+w*p,E=x(E,-A,A),P=x(P,-R,R),this.velocityX=E,this.velocityY=P,this.x+=E*p,this.y+=P*p,a.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var O=0;O<v.length;O++){var F=v[O];F.active&&F.update(this,c,p,m)}},setSizeToFrame:function(){},getBounds:function(a){a===void 0&&(a=this.emitter.getWorldTransformMatrix());var c=Math.abs(a.scaleX)*this.scaleX,p=Math.abs(a.scaleY)*this.scaleY,v=this.x,m=this.y,y=this.rotation,E=this.frame.width*c/2,P=this.frame.height*p/2,S=this.bounds,w=new r(v-E,m-P),A=new r(v+E,m-P),R=new r(v-E,m+P),O=new r(v+E,m+P);return y!==0&&(n(w,v,m,y),n(A,v,m,y),n(R,v,m,y),n(O,v,m,y)),a.transformPoint(w.x,w.y,w),a.transformPoint(A.x,A.y,A),a.transformPoint(R.x,R.y,R),a.transformPoint(O.x,O.y,O),S.x=Math.min(w.x,A.x,R.x,O.x),S.y=Math.min(w.y,A.y,R.y,O.y),S.width=Math.max(w.x,A.x,R.x,O.x)-S.x,S.height=Math.max(w.y,A.y,R.y,O.y)-S.y,S},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});o.exports=f},73106:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(30891),u=e(74118),l=new d({Extends:x,initialize:function(n,r,f,a,c,p,v,m){c===void 0&&(c=!0),p===void 0&&(p=!0),v===void 0&&(v=!0),m===void 0&&(m=!0),x.call(this,n,r,!0),this.bounds=new u(n,r,f,a),this.collideLeft=c,this.collideRight=p,this.collideTop=v,this.collideBottom=m},update:function(h){var n=this.bounds,r=-h.bounce,f=h.worldPosition;f.x<n.x&&this.collideLeft?(h.x+=n.x-f.x,h.velocityX*=r):f.x>n.right&&this.collideRight&&(h.x-=f.x-n.right,h.velocityX*=r),f.y<n.y&&this.collideTop?(h.y+=n.y-f.y,h.velocityY*=r):f.y>n.bottom&&this.collideBottom&&(h.y-=f.y-n.bottom,h.velocityY*=r)}});o.exports=l},9216:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(48129),l=e(29538),h=e(69361),n=e(54213),r=e(19737),f=e(93025),a=e(40629),c=e(89980),p=e(72632),v=e(72861),m=e(87811),y=e(53523),E=e(19256),P=e(7782),S=e(71207),w=e(14655),A=e(14909),R=e(68433),O=e(74118),F=e(90205),L=e(66458),D=e(69116),I=e(17922),B=e(69360),V=e(93736),Y=e(1071),W=e(73106),$=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],N=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],U=new d({Extends:c,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Texture,x.Transform,x.Visible,D],initialize:function(G,z,X,k,H){c.call(this,G,"ParticleEmitter"),this.particleClass=A,this.ops={accelerationX:new f("accelerationX",0),accelerationY:new f("accelerationY",0),alpha:new f("alpha",1),angle:new f("angle",{min:0,max:360},!0),bounce:new f("bounce",0),color:new r("color"),delay:new f("delay",0,!0),hold:new f("hold",0,!0),lifespan:new f("lifespan",1e3,!0),maxVelocityX:new f("maxVelocityX",1e4),maxVelocityY:new f("maxVelocityY",1e4),moveToX:new f("moveToX",0),moveToY:new f("moveToY",0),quantity:new f("quantity",1,!0),rotate:new f("rotate",0),scaleX:new f("scaleX",1),scaleY:new f("scaleY",1),speedX:new f("speedX",0,!0),speedY:new f("speedY",0,!0),tint:new f("tint",16777215),x:new f("x",0),y:new f("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new V,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new B,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new S(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(z,X),this.setTexture(k),H&&this.setConfig(H)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(b){if(!b)return this;var G=0,z="",X=this.ops;for(G=0;G<N.length;G++)z=N[G],X[z].loadConfig(b);for(G=0;G<$.length;G++)z=$[G],E(b,z)&&(this[z]=p(b,z));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,E(b,"speed")&&(X.speedX.loadConfig(b,"speed"),X.speedY.active=!1),(y(b,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),E(b,"scale")&&(X.scaleX.loadConfig(b,"scale"),X.scaleY.active=!1),E(b,"callbackScope")){var k=p(b,"callbackScope",null);this.emitCallbackScope=k,this.deathCallbackScope=k}if(E(b,"emitZone")&&this.addEmitZone(b.emitZone),E(b,"deathZone")&&this.addDeathZone(b.deathZone),E(b,"bounds")){var H=this.addParticleBounds(b.bounds);H.collideLeft=p(b,"collideLeft",!0),H.collideRight=p(b,"collideRight",!0),H.collideTop=p(b,"collideTop",!0),H.collideBottom=p(b,"collideBottom",!0)}return E(b,"followOffset")&&this.followOffset.setFromObject(p(b,"followOffset",0)),E(b,"texture")&&this.setTexture(b.texture),E(b,"frame")?this.setEmitterFrame(b.frame):E(b,"anim")&&this.setAnim(b.anim),E(b,"reserve")&&this.reserve(b.reserve),E(b,"advance")&&this.fastForward(b.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(a.START,this),this},toJSON:function(){var b=u(this),G=0,z="";for(G=0;G<$.length;G++)z=$[G],b[z]=this[z];var X=this.ops;for(G=0;G<N.length;G++)z=N[G],X[z]&&(b[z]=X[z].toJSON());return X.speedY.active||(delete b.speedX,b.speed=X.speedX.toJSON()),this.scaleX===this.scaleY&&(delete b.scaleX,delete b.scaleY,b.scale=X.scaleX.toJSON()),b},resetCounters:function(b,G){var z=this.counters;z.fill(0),z[0]=b,G&&(z[5]=1)},startFollow:function(b,G,z,X){return G===void 0&&(G=0),z===void 0&&(z=0),X===void 0&&(X=!1),this.follow=b,this.followOffset.set(G,z),this.trackVisible=X,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var b=this.frames,G=b.length,z;return G===1?z=b[0]:this.randomFrame?z=v(b):(z=b[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===G&&(this.currentFrame=0))),this.texture.get(z)},setEmitterFrame:function(b,G,z){G===void 0&&(G=!0),z===void 0&&(z=1),this.randomFrame=G,this.frameQuantity=z,this.currentFrame=0;var X=typeof b;if(this.frames.length=0,Array.isArray(b))this.frames=this.frames.concat(b);else if(X==="string"||X==="number")this.frames.push(b);else if(X==="object"){var k=b;b=p(k,"frames",null),b&&(this.frames=this.frames.concat(b));var H=p(k,"cycle",!1);this.randomFrame=!H,this.frameQuantity=p(k,"quantity",z)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var b=this.anims,G=b.length;if(G===0)return null;if(G===1)return b[0];if(this.randomAnim)return v(b);var z=b[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=Y(this.currentAnim+1,0,G-1)),z},setAnim:function(b,G,z){G===void 0&&(G=!0),z===void 0&&(z=1),this.randomAnim=G,this.animQuantity=z,this.currentAnim=0;var X=typeof b;if(this.anims.length=0,Array.isArray(b))this.anims=this.anims.concat(b);else if(X==="string")this.anims.push(b);else if(X==="object"){var k=b;b=p(k,"anims",null),b&&(this.anims=this.anims.concat(b));var H=p(k,"cycle",!1);this.randomAnim=!H,this.animQuantity=p(k,"quantity",z)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(b){return b===void 0&&(b=!0),this.radial=b,this},addParticleBounds:function(b,G,z,X,k,H,K,Z){if(typeof b=="object"){var J=b;b=J.x,G=J.y,z=E(J,"w")?J.w:J.width,X=E(J,"h")?J.h:J.height}return this.addParticleProcessor(new W(b,G,z,X,k,H,K,Z))},setParticleSpeed:function(b,G){return G===void 0&&(G=b),this.ops.speedX.onChange(b),b===G?this.ops.speedY.active=!1:this.ops.speedY.onChange(G),this.radial=!0,this},setParticleScale:function(b,G){return b===void 0&&(b=1),G===void 0&&(G=b),this.ops.scaleX.onChange(b),this.ops.scaleY.onChange(G),this},setParticleGravity:function(b,G){return this.gravityX=b,this.gravityY=G,this},setParticleAlpha:function(b){return this.ops.alpha.onChange(b),this},setParticleTint:function(b){return this.ops.tint.onChange(b),this},setEmitterAngle:function(b){return this.ops.angle.onChange(b),this},setParticleLifespan:function(b){return this.ops.lifespan.onChange(b),this},setQuantity:function(b){return this.quantity=b,this},setFrequency:function(b,G){return this.frequency=b,this.flowCounter=b>0?b:0,G&&(this.quantity=G),this},addDeathZone:function(b){Array.isArray(b)||(b=[b]);for(var G,z=this.deathZones,X=0;X<b.length;X++)if(G=b[X],G instanceof h)z.push(G);else if(typeof G.contains=="function")G=new h(G,!0),z.push(G);else{var k=p(G,"type","onEnter"),H=p(G,"source",null);if(H&&typeof H.contains=="function"){var K=k==="onEnter";G=new h(H,K),z.push(G)}}return G},removeDeathZone:function(b){return L(this.deathZones,b),this},addEmitZone:function(b){Array.isArray(b)||(b=[b]);for(var G,z=this.emitZones,X=[],k=0;k<b.length;k++){if(G=b[k],G instanceof R||G instanceof n)z.push(G);else{var H=p(G,"type","random"),K=p(G,"source",null);if(H==="random")G=new R(K);else if(H==="edge"){var Z=p(G,"quantity",1),J=p(G,"stepRate",0),j=p(G,"yoyo",!1),Q=p(G,"seamless",!0),_=p(G,"total",-1);G=new n(K,Z,J,j,Q,_)}G&&z.push(G)}X.push(G)}return X},removeEmitZone:function(b){return L(this.emitZones,b),this.zoneIndex=0,this},getEmitZone:function(b){var G=this.emitZones,z=G.length;if(z!==0){var X=G[this.zoneIndex];X.getPoint(b),X.total>-1&&(this.zoneTotal++,this.zoneTotal===X.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===z&&(this.zoneIndex=0)))}},getDeathZone:function(b){for(var G=this.deathZones,z=0;z<G.length;z++){var X=G[z];if(X.willKill(b))return this.emit(a.DEATH_ZONE,this,b,X),!0}return!1},setEmitZone:function(b){var G;return isFinite(b)?G=b:G=this.emitZones.indexOf(b),G>=0&&(this.zoneIndex=G),this},addParticleProcessor:function(b){return this.processors.exists(b)||(b.emitter&&b.emitter.removeParticleProcessor(b),this.processors.add(b),b.emitter=this),b},removeParticleProcessor:function(b){return this.processors.exists(b)&&(this.processors.remove(b,!0),b.emitter=null),b},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(b){return this.addParticleProcessor(new m(b))},reserve:function(b){var G=this.dead;if(this.maxParticles>0){var z=this.getParticleCount();z+b>this.maxParticles&&(b=this.maxParticles-(z+b))}for(var X=0;X<b;X++)G.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(b,G){return b===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof b=="function"&&(this.emitCallback=b,G&&(this.emitCallbackScope=G)),this},onParticleDeath:function(b,G){return b===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof b=="function"&&(this.deathCallback=b,G&&(this.deathCallbackScope=G)),this},killAll:function(){for(var b=this.dead,G=this.alive;G.length>0;)b.push(G.pop());return this},forEachAlive:function(b,G){for(var z=this.alive,X=z.length,k=0;k<X;k++)b.call(G,z[k],this);return this},forEachDead:function(b,G){for(var z=this.dead,X=z.length,k=0;k<X;k++)b.call(G,z[k],this);return this},start:function(b,G){return b===void 0&&(b=0),this.emitting||(b>0&&this.fastForward(b),this.emitting=!0,this.resetCounters(this.frequency,!0),G!==void 0&&(this.duration=Math.abs(G)),this.emit(a.START,this)),this},stop:function(b){return b===void 0&&(b=!1),this.emitting&&(this.emitting=!1,b&&this.killAll(),this.emit(a.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(b,G){return b===void 0&&(b=""),G===void 0&&(G=this.true),this.sortProperty=b,this.sortOrderAsc=G,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(b){return this.sortProperty!==""?b=this.depthSortCallback:b=null,this.sortCallback=b,this},depthSort:function(){return I(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(b,G){var z=this.sortProperty;return this.sortOrderAsc?b[z]-G[z]:G[z]-b[z]},flow:function(b,G,z){return G===void 0&&(G=1),this.emitting=!1,this.frequency=b,this.quantity=G,z!==void 0&&(this.stopAfter=z),this.start()},explode:function(b,G,z){this.frequency=-1,this.resetCounters(-1,!0);var X=this.emitParticle(b,G,z);return this.emit(a.EXPLODE,this,X),X},emitParticleAt:function(b,G,z){return this.emitParticle(z,b,G)},emitParticle:function(b,G,z){if(!this.atLimit()){b===void 0&&(b=this.ops.quantity.onEmit());for(var X=this.dead,k=this.stopAfter,H=this.follow?this.follow.x+this.followOffset.x:G,K=this.follow?this.follow.y+this.followOffset.y:z,Z=0;Z<b;Z++){var J=X.pop();if(J||(J=new this.particleClass(this)),J.fire(H,K)?(this.particleBringToTop?this.alive.push(J):this.alive.unshift(J),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,J,this)):this.dead.push(J),k>0&&(this.stopCounter++,this.stopCounter>=k)||this.atLimit())break}return J}},fastForward:function(b,G){G===void 0&&(G=1e3/60);var z=0;for(this.skipping=!0;z<Math.abs(b);)this.preUpdate(0,G),z+=G;return this.skipping=!1,this},preUpdate:function(b,G){G*=this.timeScale;var z=G/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var X=this.getProcessors(),k=this.alive,H=this.dead,K=0,Z=[],J=k.length;for(K=0;K<J;K++){var j=k[K];j.update(G,z,X)&&Z.push({index:K,particle:j})}if(J=Z.length,J>0){var Q=this.deathCallback,_=this.deathCallbackScope;for(K=J-1;K>=0;K--){var q=Z[K];k.splice(q.index,1),H.push(q.particle),Q&&Q.call(_,q.particle),q.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&k.length===0&&(this.completeFlag=0,this.emit(a.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=G;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=G,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(b){for(var G=this.getWorldTransformMatrix(),z=this.alive,X=z.length,k=[],H=0;H<X;H++){var K=z[H];F(b,K.getBounds(G))&&k.push(K)}return k},getBounds:function(b,G,z,X){b===void 0&&(b=0),G===void 0&&(G=0),z===void 0&&(z=1e3/60),X===void 0&&(X=new O);var k=this.getWorldTransformMatrix(),H,K,Z=this.alive,J=!1;if(X.setTo(0,0,0,0),G>0){var j=0;for(this.skipping=!0;j<Math.abs(G);){for(this.preUpdate(0,z),H=0;H<Z.length;H++)K=Z[H].getBounds(k),J?w(X,K):(J=!0,l(K,X));j+=z}this.skipping=!1}else for(H=0;H<Z.length;H++)K=Z[H].getBounds(k),J?w(X,K):(J=!0,l(K,X));return b>0&&P(X,b,b),X},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(b){this.ops.x.onChange(b)}},particleY:{get:function(){return this.ops.y.current},set:function(b){this.ops.y.onChange(b)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(b){this.ops.accelerationX.onChange(b)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(b){this.ops.accelerationY.onChange(b)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(b){this.ops.maxVelocityX.onChange(b)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(b){this.ops.maxVelocityY.onChange(b)}},speed:{get:function(){return this.ops.speedX.current},set:function(b){this.ops.speedX.onChange(b),this.ops.speedY.onChange(b)}},speedX:{get:function(){return this.ops.speedX.current},set:function(b){this.ops.speedX.onChange(b)}},speedY:{get:function(){return this.ops.speedY.current},set:function(b){this.ops.speedY.onChange(b)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(b){this.ops.moveToX.onChange(b)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(b){this.ops.moveToY.onChange(b)}},bounce:{get:function(){return this.ops.bounce.current},set:function(b){this.ops.bounce.onChange(b)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(b){this.ops.scaleX.onChange(b)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(b){this.ops.scaleY.onChange(b)}},particleColor:{get:function(){return this.ops.color.current},set:function(b){this.ops.color.onChange(b)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(b){this.ops.color.setEase(b)}},particleTint:{get:function(){return this.ops.tint.current},set:function(b){this.ops.tint.onChange(b)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(b){this.ops.alpha.onChange(b)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(b){this.ops.lifespan.onChange(b)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(b){this.ops.angle.onChange(b)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(b){this.ops.rotate.onChange(b)}},quantity:{get:function(){return this.ops.quantity.current},set:function(b){this.ops.quantity.onChange(b)}},delay:{get:function(){return this.ops.delay.current},set:function(b){this.ops.delay.onChange(b)}},hold:{get:function(){return this.ops.hold.current},set:function(b){this.ops.hold.onChange(b)}},flowCounter:{get:function(){return this.counters[0]},set:function(b){this.counters[0]=b}},frameCounter:{get:function(){return this.counters[1]},set:function(b){this.counters[1]=b}},animCounter:{get:function(){return this.counters[2]},set:function(b){this.counters[2]=b}},elapsed:{get:function(){return this.counters[3]},set:function(b){this.counters[3]=b}},stopCounter:{get:function(){return this.counters[4]},set:function(b){this.counters[4]=b}},completeFlag:{get:function(){return this.counters[5]},set:function(b){this.counters[5]=b}},zoneIndex:{get:function(){return this.counters[6]},set:function(b){this.counters[6]=b}},zoneTotal:{get:function(){return this.counters[7]},set:function(b){this.counters[7]=b}},currentFrame:{get:function(){return this.counters[8]},set:function(b){this.counters[8]=b}},currentAnim:{get:function(){return this.counters[9]},set:function(b){this.counters[9]=b}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var b,G=this.ops;for(b=0;b<N.length;b++){var z=N[b];G[z].destroy()}for(b=0;b<this.alive.length;b++)this.alive[b].destroy();for(b=0;b<this.dead.length;b++)this.dead[b].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});o.exports=U},10456:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90205),x=e(69360),u=new x,l=new x,h=new x,n=new x,r=function(f,a,c,p){var v=u,m=l,y=h,E=n;p?(E.loadIdentity(),E.multiply(p),E.translate(a.x,a.y),E.rotate(a.rotation),E.scale(a.scaleX,a.scaleY)):E.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var P=f.currentContext,S=c.roundPixels,w=c.alpha,A=a.alpha,R=a.alive,O=R.length,F=a.viewBounds;if(!(!a.visible||O===0||F&&!d(F,c.worldView))){a.sortCallback&&a.depthSort(),c.addToRenderList(a);var L=a.scrollFactorX,D=a.scrollFactorY;P.save(),P.globalCompositeOperation=f.blendModes[a.blendMode];for(var I=0;I<O;I++){var B=R[I],V=B.alpha*A*w;if(!(V<=0||B.scaleX===0||B.scaleY===0)){y.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),v.copyFrom(c.matrix),v.multiplyWithOffset(E,-c.scrollX*L,-c.scrollY*D),y.e=B.x,y.f=B.y,v.multiply(y,m);var Y=B.frame,W=Y.canvasData;if(W.width>0&&W.height>0){var $=-Y.halfWidth,N=-Y.halfHeight;P.globalAlpha=V,P.save(),m.setToContext(P),S&&($=Math.round($),N=Math.round(N)),P.imageSmoothingEnabled=!Y.source.scaleMode,P.drawImage(Y.source.image,W.x,W.y,W.width,W.height,$,N,W.width,W.height),P.restore()}}}P.restore()}};o.exports=r},765:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(72632),h=e(9216);x.register("particles",function(n,r){n===void 0&&(n={});var f=u(n,"key",null),a=l(n,"config",null),c=new h(this.scene,0,0,f);return r!==void 0&&(n.add=r),d(this.scene,c,n),a&&c.setConfig(a),c})},81212:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(9216);d.register("particles",function(u,l,h,n){return u!==void 0&&typeof u=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new x(this.scene,u,l,h,n))})},69116:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(10275),u=e(10456),o.exports={renderWebGL:x,renderCanvas:u}},10275:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90205),x=e(69360),u=e(75512),l=new x,h=new x,n=new x,r=new x,f=function(a,c,p,v){var m=a.pipelines.set(c.pipeline),y=l,E=h,P=n,S=r;v?(S.loadIdentity(),S.multiply(v),S.translate(c.x,c.y),S.rotate(c.rotation),S.scale(c.scaleX,c.scaleY)):S.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);var w=p.roundPixels,A=u.getTintAppendFloatAlpha,R=p.alpha,O=c.alpha,F=c.frame.glTexture;a.pipelines.preBatch(c);var L=c.alive,D=L.length,I=c.viewBounds;if(!(D===0||I&&!d(I,p.worldView))){c.sortCallback&&c.depthSort();var B=m.setGameObject(c,c.frame);p.addToRenderList(c),y.copyFrom(p.matrix),y.multiplyWithOffset(S,-p.scrollX*c.scrollFactorX,-p.scrollY*c.scrollFactorY),a.setBlendMode(c.blendMode),c.mask&&(c.mask.preRenderWebGL(a,c,p),a.pipelines.set(c.pipeline));for(var V=c.tintFill,Y=0;Y<D;Y++){var W=L[Y],$=W.alpha*O*R;if(!($<=0||W.scaleX===0||W.scaleY===0)){P.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),P.e=W.x,P.f=W.y,y.multiply(P,E);var N=W.frame,U=-N.halfWidth,b=-N.halfHeight,G=E.setQuad(U,b,U+N.width,b+N.height,w),z=A(W.tint,$);m.shouldFlush(6)&&(m.flush(),B=m.setGameObject(c,c.frame)),m.batchQuad(c,G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],N.u0,N.v0,N.u1,N.v1,z,z,z,z,V,F,B)}}c.mask&&c.mask.postRenderWebGL(a,p),a.pipelines.postBatch(c)}};o.exports=f},30891:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h,n){l===void 0&&(l=0),h===void 0&&(h=0),n===void 0&&(n=!0),this.emitter,this.x=l,this.y=h,this.active=n},update:function(){},destroy:function(){this.emitter=null}});o.exports=x},76100:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},26677:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="deathzone"},62736:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="explode"},56490:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},85715:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},40629:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:e(76100),DEATH_ZONE:e(26677),EXPLODE:e(62736),START:e(56490),STOP:e(85715)}},27684:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={EmitterColorOp:e(19737),EmitterOp:e(93025),Events:e(40629),GravityWell:e(87811),Particle:e(14909),ParticleBounds:e(73106),ParticleEmitter:e(9216),ParticleProcessor:e(30891),Zones:e(25962)}},69361:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h){this.source=l,this.killOnEnter=h},willKill:function(u){var l=u.worldPosition,h=this.source.contains(l.x,l.y);return h&&this.killOnEnter||!h&&!this.killOnEnter}});o.exports=x},54213:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h,n,r,f,a){r===void 0&&(r=!1),f===void 0&&(f=!0),a===void 0&&(a=-1),this.source=l,this.points=[],this.quantity=h,this.stepRate=n,this.yoyo=r,this.counter=-1,this.seamless=f,this._length=0,this._direction=0,this.total=a,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var u=this.points[0],l=this.points[this.points.length-1];u.x===l.x&&u.y===l.y&&this.points.pop()}var h=this._length;return this._length=this.points.length,this._length<h&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(u){return this.source=u,this.updateSource()},getPoint:function(u){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var l=this.points[this.counter];l&&(u.x=l.x,u.y=l.y)}});o.exports=x},68433:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93736),u=new d({initialize:function(h){this.source=h,this._tempVec=new x,this.total=-1},getPoint:function(l){var h=this._tempVec;this.source.getRandomPoint(h),l.x=h.x,l.y=h.y}});o.exports=u},25962:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DeathZone:e(69361),EdgeZone:e(54213),RandomZone:e(68433)}},29598:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(13747),l=new d({Extends:u,Mixins:[x.PathFollower],initialize:function(n,r,f,a,c,p){u.call(this,n,f,a,c,p),this.path=r},preUpdate:function(h,n){this.anims.update(h,n),this.pathUpdate(h)}});o.exports=l},19626:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(29598);d.register("follower",function(u,l,h,n,r){var f=new x(this.scene,u,l,h,n,r);return this.displayList.add(f),this.updateList.add(f),f})},33412:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(56694),u=e(99425),l=e(15978),h=e(83321),n=e(76583),r=new x({Extends:h,initialize:function(a,c,p,v,m,y,E,P){v||(v="__DEFAULT"),h.call(this,a,c,p,v,m),this.type="Plane",this.anims=new d(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(y,E,P),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(f,a,c){f===void 0&&(f=8),a===void 0&&(a=8),c===void 0&&(c=!1);var p=!1;return c&&(p=!0),this.gridWidth=f,this.gridHeight=a,this.isTiled=c,this.clear(),u({mesh:this,widthSegments:f,heightSegments:a,isOrtho:!1,tile:c,flipY:p}),this},setSizeToFrame:function(f){f===void 0&&(f=!0);var a=this.frame;if(this.setPerspective(this.width/a.width,this.height/a.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!f)return this;var c=this.gridWidth,p=this.gridHeight,v=this.vertices,m=a.u0,y=a.u1,E=a.v0,P=a.v1,S,w,A=0;if(this.isTiled)for(E=a.v1,P=a.v0,w=0;w<p;w++)for(S=0;S<c;S++)v[A++].setUVs(m,P),v[A++].setUVs(m,E),v[A++].setUVs(y,P),v[A++].setUVs(m,E),v[A++].setUVs(y,E),v[A++].setUVs(y,P);else{var R=c+1,O=p+1,F=y-m,L=P-E,D=[];for(w=0;w<O;w++)for(S=0;S<R;S++){var I=m+F*(S/c),B=E+L*(w/p);D.push(I,B)}for(w=0;w<p;w++)for(S=0;S<c;S++){var V=(S+R*w)*2,Y=(S+R*(w+1))*2,W=(S+1+R*(w+1))*2,$=(S+1+R*w)*2;v[A++].setUVs(D[V],D[V+1]),v[A++].setUVs(D[Y],D[Y+1]),v[A++].setUVs(D[$],D[$+1]),v[A++].setUVs(D[Y],D[Y+1]),v[A++].setUVs(D[W],D[W+1]),v[A++].setUVs(D[$],D[$+1])}}return this},setViewHeight:function(f){f===void 0&&(f=this.frame.height);var a=this.fov*(Math.PI/180);this.viewPosition.z=this.height/f/Math.tan(a/2),this.dirtyCache[10]=1},createCheckerboard:function(f,a,c,p,v){f===void 0&&(f=16777215),a===void 0&&(a=255),c===void 0&&(c=255),p===void 0&&(p=255),v===void 0&&(v=128);var m=this.scene.sys.renderer.gl,y=m.createTexture();m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,y),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);for(var E=l(f),P=l(a),S=[],w=0;w<16;w++)for(var A=0;A<16;A++)w<8&&A<8||w>7&&A>7?S.push(E.r,E.g,E.b,c):S.push(P.r,P.g,P.b,p);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,16,16,0,m.RGBA,m.UNSIGNED_BYTE,new Uint8Array(S)),y.isAlphaPremultiplied=!0,y.isRenderTexture=!1,y.width=16,y.height=16;var R=this.scene.sys.textures.addGLTexture(n(),y,16,16);return this.removeCheckerboard(),this._checkerboard=R,m.bindTexture(m.TEXTURE_2D,null),this.setTexture(R),this.setSizeToFrame(),this.setViewHeight(v),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(f,a){return this.anims.play(f,a)},playReverse:function(f,a){return this.anims.playReverse(f,a)},playAfterDelay:function(f,a){return this.anims.playAfterDelay(f,a)},playAfterRepeat:function(f,a){return this.anims.playAfterRepeat(f,a)},stop:function(){return this.anims.stop()},stopAfterDelay:function(f){return this.anims.stopAfterDelay(f)},stopAfterRepeat:function(f){return this.anims.stopAfterRepeat(f)},stopOnFrame:function(f){return this.anims.stopOnFrame(f)},preUpdate:function(f,a){h.prototype.preUpdate.call(this,f,a),this.anims.update(f,a)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});o.exports=r},10912:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(32291),u=e(99325),l=e(20494),h=e(10850),n=e(33412);u.register("plane",function(r,f){r===void 0&&(r={});var a=l(r,"key",null),c=l(r,"frame",null),p=h(r,"width",8),v=h(r,"height",8),m=h(r,"tile",!1),y=new n(this.scene,0,0,a,c,p,v,m);f!==void 0&&(r.add=f);var E=h(r,"checkerboard",null);if(E){var P=h(E,"color1",16777215),S=h(E,"color2",255),w=h(E,"alpha1",255),A=h(E,"alpha2",255),R=h(E,"height",128);y.createCheckerboard(P,S,w,A,R)}return d(this.scene,y,r),x(y,r),y})},58322:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(33412),x=e(61286);x.register("plane",function(u,l,h,n,r,f,a){return this.displayList.add(new d(this.scene,u,l,h,n,r,f,a))})},13171:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),l=e(74853),h=e(65641),n=e(71606),r=new d({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.Mask,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible,n],initialize:function(a,c,p,v,m,y,E){v===void 0&&(v=16777215),m===void 0&&(m=128),y===void 0&&(y=1),E===void 0&&(E=.1),u.call(this,a,"PointLight"),this.initPipeline(h.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(c,p),this.color=l(v),this.intensity=y,this.attenuation=E,this.width=m*2,this.height=m*2,this._radius=m},radius:{get:function(){return this._radius},set:function(f){this._radius=f,this.width=f*2,this.height=f*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});o.exports=r},162:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(13171);x.register("pointlight",function(h,n){h===void 0&&(h={});var r=u(h,"color",16777215),f=u(h,"radius",128),a=u(h,"intensity",1),c=u(h,"attenuation",.1),p=new l(this.scene,0,0,r,f,a,c);return n!==void 0&&(h.add=n),d(this.scene,p,h),p})},91201:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(13171);d.register("pointlight",function(u,l,h,n,r,f){return this.displayList.add(new x(this.scene,u,l,h,n,r,f))})},71606:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(80590),o.exports={renderWebGL:x,renderCanvas:u}},80590:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,l,h,n){h.addToRenderList(l);var r=u.pipelines.set(l.pipeline),f=d(l,h,n).calc,a=l.width,c=l.height,p=-l._radius,v=-l._radius,m=p+a,y=v+c,E=f.getX(0,0),P=f.getY(0,0),S=f.getX(p,v),w=f.getY(p,v),A=f.getX(p,y),R=f.getY(p,y),O=f.getX(m,y),F=f.getY(m,y),L=f.getX(m,v),D=f.getY(m,v);u.pipelines.preBatch(l),r.batchPointLight(l,h,S,w,A,R,O,F,L,D,E,P),u.pipelines.postBatch(l)};o.exports=x},15996:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(845),u=e(1539),l=new d({Extends:u,initialize:function(n,r,f,a,c){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=32),c===void 0&&(c=32);var p=new x(n.sys.textures,"",a,c);u.call(this,n,r,f,p),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(h,n){this.width=h,this.height=n,this.texture.setSize(h,n),this.updateDisplayOrigin();var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=h,r.hitArea.height=n),this},resize:function(h,n){return this.setSize(h,n),this},saveTexture:function(h){var n=this.texture;return n.key=h,n.manager.addDynamicTexture(n)&&(this._saved=!0),n},fill:function(h,n,r,f,a,c){return this.texture.fill(h,n,r,f,a,c),this},clear:function(){return this.texture.clear(),this},stamp:function(h,n,r,f,a){return this.texture.stamp(h,n,r,f,a),this},erase:function(h,n,r){return this.texture.erase(h,n,r),this},draw:function(h,n,r,f,a){return this.texture.draw(h,n,r,f,a),this},drawFrame:function(h,n,r,f,a,c){return this.texture.drawFrame(h,n,r,f,a,c),this},repeat:function(h,n,r,f,a,c,p,v,m){return this.texture.repeat(h,n,r,f,a,c,p,v,m),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(h,n,r,f,a){return this.texture.batchDraw(h,n,r,f,a),this},batchDrawFrame:function(h,n,r,f,a,c){return this.texture.batchDrawFrame(h,n,r,f,a,c),this},endDraw:function(h){return this.texture.endDraw(h),this},snapshotArea:function(h,n,r,f,a,c,p){return this.texture.snapshotArea(h,n,r,f,a,c,p),this},snapshot:function(h,n,r){return this.snapshotArea(0,0,this.width,this.height,h,n,r)},snapshotPixel:function(h,n,r){return this.snapshotArea(h,n,1,1,r,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});o.exports=l},85692:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(15996);x.register("renderTexture",function(h,n){h===void 0&&(h={});var r=u(h,"x",0),f=u(h,"y",0),a=u(h,"width",32),c=u(h,"height",32),p=new l(this.scene,r,f,a,c);return n!==void 0&&(h.add=n),d(this.scene,p,h),p})},29599:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(15996);d.register("renderTexture",function(u,l,h,n){return this.displayList.add(new x(this.scene,u,l,h,n))})},79968:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(56694),u=e(64937),l=e(89980),h=e(65641),n=e(58912),r=e(93736),f=new x({Extends:l,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Flip,u.Mask,u.Pipeline,u.PostPipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,n],initialize:function(c,p,v,m,y,E,P,S,w){m===void 0&&(m="__DEFAULT"),E===void 0&&(E=2),P===void 0&&(P=!0),l.call(this,c,"Rope"),this.anims=new d(this),this.points=E,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=m==="__DEFAULT",this.dirty=!1,this.horizontal=P,this._flipX=!1,this._flipY=!1,this._perp=new r,this.debugCallback=null,this.debugGraphic=null,this.setTexture(m,y),this.setPosition(p,v),this.setSizeToFrame(),this.initPipeline(h.ROPE_PIPELINE),Array.isArray(E)&&this.resizeArrays(E.length),this.setPoints(E,S,w),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(a,c){var p=this.anims.currentFrame;this.anims.update(a,c),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(a,c,p){return this.anims.play(a,c,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(a,c,p){return a===void 0&&(a=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(a,c,p))},setVertical:function(a,c,p){return a===void 0&&(a=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(a,c,p)):this},setTintFill:function(a){return a===void 0&&(a=!1),this.tintFill=a,this},setAlphas:function(a,c){var p=this.points.length;if(p<1)return this;var v=this.alphas;a===void 0?a=[1]:!Array.isArray(a)&&c===void 0&&(a=[a]);var m,y=0;if(c!==void 0)for(m=0;m<p;m++)y=m*2,v[y]=a,v[y+1]=c;else if(a.length===p)for(m=0;m<p;m++)y=m*2,v[y]=a[m],v[y+1]=a[m];else{var E=a[0];for(m=0;m<p;m++)y=m*2,a.length>y&&(E=a[y]),v[y]=E,a.length>y+1&&(E=a[y+1]),v[y+1]=E}return this},setColors:function(a){var c=this.points.length;if(c<1)return this;var p=this.colors;a===void 0?a=[16777215]:Array.isArray(a)||(a=[a]);var v,m=0;if(a.length===c)for(v=0;v<c;v++)m=v*2,p[m]=a[v],p[m+1]=a[v];else{var y=a[0];for(v=0;v<c;v++)m=v*2,a.length>m&&(y=a[m]),p[m]=y,a.length>m+1&&(y=a[m+1]),p[m+1]=y}return this},setPoints:function(a,c,p){if(a===void 0&&(a=2),typeof a=="number"){var v=a;v<2&&(v=2),a=[];var m,y,E;if(this.horizontal)for(E=-this.frame.halfWidth,y=this.frame.width/(v-1),m=0;m<v;m++)a.push({x:E+m*y,y:0});else for(E=-this.frame.halfHeight,y=this.frame.height/(v-1),m=0;m<v;m++)a.push({x:0,y:E+m*y})}var P=a.length,S=this.points.length;return P<1?(console.warn("Rope: Not enough points given"),this):(P===1&&(a.unshift({x:0,y:0}),P++),S!==P&&this.resizeArrays(P),this.dirty=!0,this.points=a,this.updateUVs(),c!=null&&this.setColors(c),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var a=this.uv,c=this.points.length,p=this.frame.u0,v=this.frame.v0,m=this.frame.u1,y=this.frame.v1,E=(m-p)/(c-1),P=(y-v)/(c-1),S=0;S<c;S++){var w=S*4,A,R,O,F;this.horizontal?(this._flipX?(A=m-S*E,O=m-S*E):(A=p+S*E,O=p+S*E),this._flipY?(R=y,F=v):(R=v,F=y)):(this._flipX?(A=p,O=m):(A=m,O=p),this._flipY?(R=y-S*P,F=y-S*P):(R=v+S*P,F=v+S*P)),a[w+0]=A,a[w+1]=R,a[w+2]=O,a[w+3]=F}return this},resizeArrays:function(a){var c=this.colors,p=this.alphas;this.vertices=new Float32Array(a*4),this.uv=new Float32Array(a*4),c=new Uint32Array(a*2),p=new Float32Array(a*2);for(var v=0;v<a*2;v++)c[v]=16777215,p[v]=1;return this.colors=c,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var a=this._perp,c=this.points,p=this.vertices,v=c.length;if(this.dirty=!1,!(v<1)){for(var m,y=c[0],E=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,P=0;P<v;P++){var S=c[P],w=P*4;P<v-1?m=c[P+1]:m=S,a.x=m.y-y.y,a.y=-(m.x-y.x);var A=a.length();a.x/=A,a.y/=A,a.x*=E,a.y*=E,p[w]=S.x+a.x,p[w+1]=S.y+a.y,p[w+2]=S.x-a.x,p[w+3]=S.y-a.y,y=S}return this}},setDebug:function(a,c){return this.debugGraphic=a,!a&&!c?this.debugCallback=null:c?this.debugCallback=c:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(a,c,p){var v=a.debugGraphic,m=p[0],y=p[1],E=p[2],P=p[3];v.lineBetween(m,y,E,P);for(var S=4;S<c;S+=4){var w=p[S+0],A=p[S+1],R=p[S+2],O=p[S+3];v.lineBetween(m,y,w,A),v.lineBetween(E,P,R,O),v.lineBetween(E,P,w,A),v.lineBetween(w,A,R,O),m=w,y=A,E=R,P=O}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(a){return this._flipX=a,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(a){return this._flipY=a,this.updateUVs()}}});o.exports=f},44598:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};o.exports=T},96027:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(10850),h=e(79968);x.register("rope",function(n,r){n===void 0&&(n={});var f=u(n,"key",null),a=u(n,"frame",null),c=u(n,"horizontal",!0),p=l(n,"points",void 0),v=l(n,"colors",void 0),m=l(n,"alphas",void 0),y=new h(this.scene,0,0,f,a,p,c,v,m);return r!==void 0&&(n.add=r),d(this.scene,y,n),y})},31982:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79968),x=e(61286);x.register("rope",function(u,l,h,n,r,f,a,c){return this.displayList.add(new d(this.scene,u,l,h,n,r,f,a,c))})},58912:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(49489),u=e(44598),o.exports={renderWebGL:x,renderCanvas:u}},49489:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(l,h,n,r){n.addToRenderList(h);var f=l.pipelines.set(h.pipeline,h),a=d(h,n,r).calc,c=h.vertices,p=h.uv,v=h.colors,m=h.alphas,y=h.alpha,E=x.getTintAppendFloatAlpha,P=n.roundPixels,S=c.length,w=Math.floor(S*.5);f.flush(),l.pipelines.preBatch(h);var A=f.setGameObject(h),R=f.vertexViewF32,O=f.vertexViewU32,F=f.vertexCount*f.currentShader.vertexComponentCount-1,L=0,D=h.tintFill;h.dirty&&h.updateVertices();for(var I=h.debugCallback,B=[],V=0;V<S;V+=2){var Y=c[V+0],W=c[V+1],$=Y*a.a+W*a.c+a.e,N=Y*a.b+W*a.d+a.f;P&&($=Math.round($),N=Math.round(N)),R[++F]=$,R[++F]=N,R[++F]=p[V+0],R[++F]=p[V+1],R[++F]=A,R[++F]=D,O[++F]=E(v[L],n.alpha*(m[L]*y)),L++,I&&(B[V+0]=$,B[V+1]=N)}I&&I.call(h,h,S,B),f.vertexCount+=w,f.currentBatch.count=f.vertexCount-f.currentBatch.start,l.pipelines.postBatch(h)};o.exports=u},27902:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),l=e(72632),h=e(98611),n=e(22440),r=e(24252),f=e(69360),a=new d({Extends:u,Mixins:[x.ComputedSize,x.Depth,x.GetBounds,x.Mask,x.Origin,x.ScrollFactor,x.Transform,x.Visible,r],initialize:function(p,v,m,y,E,P,S,w){m===void 0&&(m=0),y===void 0&&(y=0),E===void 0&&(E=128),P===void 0&&(P=128),u.call(this,p,"Shader"),this.blendMode=-1,this.shader;var A=p.sys.renderer;this.renderer=A,this.gl=A.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=A.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=A.width,this._rendererHeight=A.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,y),this.setSize(E,P),this.setOrigin(.5,.5),this.setShader(v,S,w)},willRender:function(c){return this.renderToTexture?!0:!(u.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setRenderToTexture:function(c,p){if(p===void 0&&(p=!1),!this.renderToTexture){var v=this.width,m=this.height,y=this.renderer;this.glTexture=y.createTextureFromSource(null,v,m,0),this.glTexture.flipY=p,this.framebuffer=y.createFramebuffer(v,m,this.glTexture,!1),this._rendererWidth=v,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),c&&(this.texture=this.scene.sys.textures.addGLTexture(c,this.glTexture,v,m))}return this.shader&&(y.pipelines.clear(),this.load(),this.flush(),y.pipelines.rebind()),this},setShader:function(c,p,v){if(p===void 0&&(p=[]),typeof c=="string"){var m=this.scene.sys.cache.shader;if(!m.has(c))return console.warn("Shader missing: "+c),this;this.shader=m.get(c)}else this.shader=c;var y=this.gl,E=this.renderer;this.program&&y.deleteProgram(this.program);var P=E.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);y.uniformMatrix4fv(y.getUniformLocation(P,"uViewMatrix"),!1,this.viewMatrix),y.uniformMatrix4fv(y.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),y.uniform2f(y.getUniformLocation(P,"uResolution"),this.width,this.height),this.program=P;var S=new Date,w={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[S.getFullYear(),S.getMonth(),S.getDate(),S.getHours()*60*60+S.getMinutes()*60+S.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=h(!0,{},this.shader.uniforms,w):this.uniforms=w;for(var A=0;A<4;A++)p[A]&&this.setSampler2D("iChannel"+A,p[A],A,v);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(c){return this.pointer=c,this},projOrtho:function(c,p,v,m){var y=-1e3,E=1e3,P=1/(c-p),S=1/(v-m),w=1/(y-E),A=this.projectionMatrix;A[0]=-2*P,A[5]=-2*S,A[10]=2*w,A[12]=(c+p)*P,A[13]=(m+v)*S,A[14]=(E+y)*w;var R=this.program,O=this.gl,F=this.renderer;F.setProgram(R),O.uniformMatrix4fv(O.getUniformLocation(R,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=v},initUniforms:function(){var c=this.gl,p=this.renderer.glFuncMap,v=this.program;this._textureCount=0;for(var m in this.uniforms){var y=this.uniforms[m],E=y.type,P=p[E];y.uniformLocation=c.getUniformLocation(v,m),E!=="sampler2D"&&(y.glMatrix=P.matrix,y.glValueLength=P.length,y.glFunc=P.func)}},setSampler2DBuffer:function(c,p,v,m,y,E){y===void 0&&(y=0),E===void 0&&(E={});var P=this.uniforms[c];return P.value=p,E.width=v,E.height=m,P.textureData=E,this._textureCount=y,this.initSampler2D(P),this},setSampler2D:function(c,p,v,m){v===void 0&&(v=0);var y=this.scene.sys.textures;if(y.exists(p)){var E=y.getFrame(p);if(E.glTexture&&E.glTexture.isRenderTexture)return this.setSampler2DBuffer(c,E.glTexture,E.width,E.height,v,m);var P=this.uniforms[c],S=E.source;P.textureKey=p,P.source=S.image,P.value=E.glTexture,S.isGLTexture&&(m||(m={}),m.width=S.width,m.height=S.height),m&&(P.textureData=m),this._textureCount=v,this.initSampler2D(P)}return this},setUniform:function(c,p){return n(this.uniforms,c,p),this},getUniform:function(c){return l(this.uniforms,c,null)},setChannel0:function(c,p){return this.setSampler2D("iChannel0",c,0,p)},setChannel1:function(c,p){return this.setSampler2D("iChannel1",c,1,p)},setChannel2:function(c,p){return this.setSampler2D("iChannel2",c,2,p)},setChannel3:function(c,p){return this.setSampler2D("iChannel3",c,3,p)},initSampler2D:function(c){if(!!c.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,c.value);var v=c.textureData;if(v&&!c.value.isRenderTexture){var m=p[l(v,"magFilter","linear").toUpperCase()],y=p[l(v,"minFilter","linear").toUpperCase()],E=p[l(v,"wrapS","repeat").toUpperCase()],P=p[l(v,"wrapT","repeat").toUpperCase()],S=p[l(v,"format","rgba").toUpperCase()];if(v.repeat&&(E=p.REPEAT,P=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!v.flipY),v.width){var w=l(v,"width",512),A=l(v,"height",2),R=l(v,"border",0);p.texImage2D(p.TEXTURE_2D,0,S,w,A,R,S,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,S,p.RGBA,p.UNSIGNED_BYTE,c.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,E),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,P)}this.renderer.setProgram(this.program),p.uniform1i(c.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var c=this.gl,p=this.uniforms,v,m,y,E,P,S=0;for(var w in p)v=p[w],y=v.glFunc,m=v.glValueLength,E=v.uniformLocation,P=v.value,P!==null&&(m===1?v.glMatrix?y.call(c,E,v.transpose,P):y.call(c,E,P):m===2?y.call(c,E,P.x,P.y):m===3?y.call(c,E,P.x,P.y,P.z):m===4?y.call(c,E,P.x,P.y,P.z,P.w):v.type==="sampler2D"&&(c.activeTexture(c.TEXTURE0+S),c.bindTexture(c.TEXTURE_2D,P),c.uniform1i(E,S),S++))},load:function(c){var p=this.gl,v=this.width,m=this.height,y=this.renderer,E=this.program,P=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,w=-this._displayOriginY;P[0]=c[0],P[1]=c[1],P[4]=c[2],P[5]=c[3],P[8]=c[4],P[9]=c[5],P[12]=P[0]*S+P[4]*w,P[13]=P[1]*S+P[5]*w}p.useProgram(E),p.uniformMatrix4fv(p.getUniformLocation(E,"uViewMatrix"),!1,P),p.uniform2f(p.getUniformLocation(E,"uResolution"),this.width,this.height);var A=this.uniforms,R=A.resolution;R.value.x=v,R.value.y=m,A.time.value=y.game.loop.getDuration();var O=this.pointer;if(O){var F=A.mouse,L=O.x/v,D=1-O.y/m;F.value.x=L.toFixed(2),F.value.y=D.toFixed(2)}this.syncUniforms()},flush:function(){var c=this.width,p=this.height,v=this.program,m=this.gl,y=this.vertexBuffer,E=this.renderer,P=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(E.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,y);var S=m.getAttribLocation(v,"inPosition");S!==-1&&(m.enableVertexAttribArray(S),m.vertexAttribPointer(S,2,m.FLOAT,!1,P,0));var w=this.vertexViewF32;w[3]=p,w[4]=c,w[5]=p,w[8]=c,w[9]=p,w[10]=c;var A=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,A*P)),m.drawArrays(m.TRIANGLES,0,A),this.renderToTexture&&E.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var c=this.gl;c.deleteProgram(this.program),c.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});o.exports=a},10612:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};o.exports=T},13908:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(27902);x.register("shader",function(h,n){h===void 0&&(h={});var r=u(h,"key",null),f=u(h,"x",0),a=u(h,"y",0),c=u(h,"width",128),p=u(h,"height",128),v=new l(this.scene,r,f,a,c,p);return n!==void 0&&(h.add=n),d(this.scene,v,h),v})},51979:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27902),x=e(61286);x.register("shader",function(u,l,h,n,r,f,a){return this.displayList.add(new d(this.scene,u,l,h,n,r,f,a))})},24252:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(19782),u=e(10612),o.exports={renderWebGL:x,renderCanvas:u}},19782:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,l,h,n){if(!!l.shader){if(h.addToRenderList(l),u.pipelines.clear(),l.renderToTexture)l.load(),l.flush();else{var r=d(l,h,n).calc;(u.width!==l._rendererWidth||u.height!==l._rendererHeight)&&l.projOrtho(0,u.width,u.height,0),l.load(r.matrix),l.flush()}u.pipelines.rebind()}};o.exports=x},19543:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,l,h,n,r,f){for(var a=d.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*n),c=h.pathData,p=h.pathIndexes,v=0;v<p.length;v+=3){var m=p[v]*2,y=p[v+1]*2,E=p[v+2]*2,P=c[m+0]-r,S=c[m+1]-f,w=c[y+0]-r,A=c[y+1]-f,R=c[E+0]-r,O=c[E+1]-f,F=l.getX(P,S),L=l.getY(P,S),D=l.getX(w,A),I=l.getY(w,A),B=l.getX(R,O),V=l.getY(R,O);u.batchTri(h,F,L,D,I,B,V,0,0,1,1,a,a,a,2)}};o.exports=x},15608:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=x||d.fillColor,h=u||d.fillAlpha,n=(l&16711680)>>>16,r=(l&65280)>>>8,f=l&255;e.fillStyle="rgba("+n+","+r+","+f+","+h+")"};o.exports=T},17876:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=x||d.strokeColor,h=u||d.strokeAlpha,n=(l&16711680)>>>16,r=(l&65280)>>>8,f=l&255;e.strokeStyle="rgba("+n+","+r+","+f+","+h+")",e.lineWidth=d.lineWidth};o.exports=T},91461:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),l=e(88829),h=new d({Extends:u,Mixins:[x.AlphaSingle,x.BlendMode,x.Depth,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.ScrollFactor,x.Transform,x.Visible],initialize:function(r,f,a){f===void 0&&(f="Shape"),u.call(this,r,f),this.geom=a,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new l,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(n,r){return r===void 0&&(r=1),n===void 0?this.isFilled=!1:(this.fillColor=n,this.fillAlpha=r,this.isFilled=!0),this},setStrokeStyle:function(n,r,f){return f===void 0&&(f=1),n===void 0?this.isStroked=!1:(this.lineWidth=n,this.strokeColor=r,this.strokeAlpha=f,this.isStroked=!0),this},setClosePath:function(n){return this.closePath=n,this},setSize:function(n,r){return this.width=n,this.height=r,this},setDisplaySize:function(n,r){return this.displayWidth=n,this.displayHeight=r,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}}});o.exports=h},50262:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,l,h,n,r){var f=u.strokeTint,a=d.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*h);f.TL=a,f.TR=a,f.BL=a,f.BR=a;var c=l.pathData,p=c.length-1,v=l.lineWidth,m=v/2,y=c[0]-n,E=c[1]-r;l.closePath||(p-=2);for(var P=2;P<p;P+=2){var S=c[P]-n,w=c[P+1]-r;u.batchLine(y,E,S,w,m,m,v,P-2,l.closePath?P===p-1:!1),y=S,E=w}};o.exports=x},28593:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2213),x=e(56694),u=e(75606),l=e(11117),h=e(26673),n=e(83392),r=e(91461),f=new x({Extends:r,Mixins:[d],initialize:function(c,p,v,m,y,E,P,S,w){p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=128),y===void 0&&(y=0),E===void 0&&(E=360),P===void 0&&(P=!1),r.call(this,c,"Arc",new h(0,0,m)),this._startAngle=y,this._endAngle=E,this._anticlockwise=P,this._iterations=.01,this.setPosition(p,v);var A=this.geom.radius*2;this.setSize(A,A),S!==void 0&&this.setFillStyle(S,w),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(a){this._iterations=a,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(a){this.geom.radius=a;var c=a*2;this.setSize(c,c),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(a){this._startAngle=a,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(a){this._endAngle=a,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(a){this._anticlockwise=a,this.updateData()}},setRadius:function(a){return this.radius=a,this},setIterations:function(a){return a===void 0&&(a=.01),this.iterations=a,this},setStartAngle:function(a,c){return this._startAngle=a,c!==void 0&&(this._anticlockwise=c),this.updateData()},setEndAngle:function(a,c){return this._endAngle=a,c!==void 0&&(this._anticlockwise=c),this.updateData()},updateData:function(){var a=this._iterations,c=a,p=this.geom.radius,v=u(this._startAngle),m=u(this._endAngle),y=this._anticlockwise,E=p,P=p;m-=v,y?m<-n.PI2?m=-n.PI2:m>0&&(m=-n.PI2+m%n.PI2):m>n.PI2?m=n.PI2:m<0&&(m=n.PI2+m%n.PI2);for(var S=[E+Math.cos(v)*p,P+Math.sin(v)*p],w;c<1;)w=m*c+v,S.push(E+Math.cos(w)*p,P+Math.sin(w)*p),c+=a;return w=m+v,S.push(E+Math.cos(w)*p,P+Math.sin(w)*p),S.push(E+Math.cos(v)*p,P+Math.sin(v)*p),this.pathIndexes=l(S),this.pathData=S,this}});o.exports=f},23560:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75606),x=e(15608),u=e(17876),l=e(49584),h=function(n,r,f,a){f.addToRenderList(r);var c=n.currentContext;if(l(n,c,r,f,a)){var p=r.radius;c.beginPath(),c.arc(p-r.originX*(p*2),p-r.originY*(p*2),p,d(r._startAngle),d(r._endAngle),r.anticlockwise),r.closePath&&c.closePath(),r.isFilled&&(x(c,r),c.fill()),r.isStroked&&(u(c,r),c.stroke()),c.restore()}};o.exports=h},10369:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28593),x=e(61286);x.register("arc",function(u,l,h,n,r,f,a,c){return this.displayList.add(new d(this.scene,u,l,h,n,r,f,a,c))}),x.register("circle",function(u,l,h,n,r){return this.displayList.add(new d(this.scene,u,l,h,0,360,!1,n,r))})},2213:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(58356),u=e(23560),o.exports={renderWebGL:x,renderCanvas:u}},58356:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(19543),u=e(50262),l=function(h,n,r,f){r.addToRenderList(n);var a=h.pipelines.set(n.pipeline),c=d(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX,m=n._displayOriginY,y=r.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&x(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),h.pipelines.postBatch(n)};o.exports=l},15220:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(87203),u=e(11117),l=e(74118),h=e(91461),n=new d({Extends:h,Mixins:[x],initialize:function(f,a,c,p,v,m){a===void 0&&(a=0),c===void 0&&(c=0),h.call(this,f,"Curve",p),this._smoothness=32,this._curveBounds=new l,this.closePath=!1,this.setPosition(a,c),v!==void 0&&this.setFillStyle(v,m),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){var r=this._curveBounds,f=this._smoothness;this.geom.getBounds(r,f),this.setSize(r.width,r.height),this.updateDisplayOrigin();for(var a=[],c=this.geom.getPoints(f),p=0;p<c.length;p++)a.push(c[p].x,c[p].y);return a.push(c[0].x,c[0].y),this.pathIndexes=u(a),this.pathData=a,this}});o.exports=n},4024:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),l=function(h,n,r,f){r.addToRenderList(n);var a=h.currentContext;if(u(h,a,n,r,f)){var c=n._displayOriginX+n._curveBounds.x,p=n._displayOriginY+n._curveBounds.y,v=n.pathData,m=v.length-1,y=v[0]-c,E=v[1]-p;a.beginPath(),a.moveTo(y,E),n.closePath||(m-=2);for(var P=2;P<m;P+=2){var S=v[P]-c,w=v[P+1]-p;a.lineTo(S,w)}n.closePath&&a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};o.exports=l},10147:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(15220);d.register("curve",function(u,l,h,n,r){return this.displayList.add(new x(this.scene,u,l,h,n,r))})},87203:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(82958),u=e(4024),o.exports={renderWebGL:x,renderCanvas:u}},82958:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),x=e(73329),u=e(50262),l=function(h,n,r,f){r.addToRenderList(n);var a=h.pipelines.set(n.pipeline),c=x(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX+n._curveBounds.x,m=n._displayOriginY+n._curveBounds.y,y=r.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&d(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),h.pipelines.postBatch(n)};o.exports=l},28591:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(11117),u=e(84171),l=e(95669),h=e(91461),n=new d({Extends:h,Mixins:[u],initialize:function(f,a,c,p,v,m,y){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=128),v===void 0&&(v=128),h.call(this,f,"Ellipse",new l(p/2,v/2,p,v)),this._smoothness=64,this.setPosition(a,c),this.width=p,this.height=v,m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(r){this._smoothness=r,this.updateData()}},setSize:function(r,f){return this.width=r,this.height=f,this.geom.setPosition(r/2,f/2),this.geom.setSize(r,f),this.updateData()},setSmoothness:function(r){return this._smoothness=r,this.updateData()},updateData:function(){for(var r=[],f=this.geom.getPoints(this._smoothness),a=0;a<f.length;a++)r.push(f[a].x,f[a].y);return r.push(f[0].x,f[0].y),this.pathIndexes=x(r),this.pathData=r,this}});o.exports=n},55881:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),l=function(h,n,r,f){r.addToRenderList(n);var a=h.currentContext;if(u(h,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY,v=n.pathData,m=v.length-1,y=v[0]-c,E=v[1]-p;a.beginPath(),a.moveTo(y,E),n.closePath||(m-=2);for(var P=2;P<m;P+=2){var S=v[P]-c,w=v[P+1]-p;a.lineTo(S,w)}a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};o.exports=l},99869:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28591),x=e(61286);x.register("ellipse",function(u,l,h,n,r,f){return this.displayList.add(new d(this.scene,u,l,h,n,r,f))})},84171:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(17554),u=e(55881),o.exports={renderWebGL:x,renderCanvas:u}},17554:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),x=e(73329),u=e(50262),l=function(h,n,r,f){r.addToRenderList(n);var a=h.pipelines.set(n.pipeline),c=x(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX,m=n._displayOriginY,y=r.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&d(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),h.pipelines.postBatch(n)};o.exports=l},39169:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91461),u=e(88059),l=new d({Extends:x,Mixins:[u],initialize:function(n,r,f,a,c,p,v,m,y,E,P){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=128),c===void 0&&(c=128),p===void 0&&(p=32),v===void 0&&(v=32),x.call(this,n,"Grid",null),this.cellWidth=p,this.cellHeight=v,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(r,f),this.setSize(a,c),this.setFillStyle(m,y),E!==void 0&&this.setOutlineStyle(E,P),this.updateDisplayOrigin()},setFillStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showCells=!1:(this.fillColor=h,this.fillAlpha=n,this.showCells=!0),this},setAltFillStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showAltCells=!1:(this.altFillColor=h,this.altFillAlpha=n,this.showAltCells=!0),this},setOutlineStyle:function(h,n){return n===void 0&&(n=1),h===void 0?this.showOutline=!1:(this.outlineFillColor=h,this.outlineFillAlpha=n,this.showOutline=!0),this}});o.exports=l},95525:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),l=function(h,n,r,f){r.addToRenderList(n);var a=h.currentContext;if(u(h,a,n,r,f)){var c=-n._displayOriginX,p=-n._displayOriginY,v=r.alpha*n.alpha,m=n.width,y=n.height,E=n.cellWidth,P=n.cellHeight,S=Math.ceil(m/E),w=Math.ceil(y/P),A=E,R=P,O=E-(S*E-m),F=P-(w*P-y),L=n.showCells,D=n.showAltCells,I=n.showOutline,B=0,V=0,Y=0,W=0,$=0;if(I&&(A--,R--,O===E&&O--,F===P&&F--),L&&n.fillAlpha>0)for(d(a,n),V=0;V<w;V++)for(D&&(Y=V%2),B=0;B<S;B++){if(D&&Y){Y=0;continue}Y++,W=B<S-1?A:O,$=V<w-1?R:F,a.fillRect(c+B*E,p+V*P,W,$)}if(D&&n.altFillAlpha>0)for(d(a,n,n.altFillColor,n.altFillAlpha*v),V=0;V<w;V++)for(D&&(Y=V%2),B=0;B<S;B++){if(D&&!Y){Y=1;continue}Y=0,W=B<S-1?A:O,$=V<w-1?R:F,a.fillRect(c+B*E,p+V*P,W,$)}if(I&&n.outlineFillAlpha>0){for(x(a,n,n.outlineFillColor,n.outlineFillAlpha*v),B=1;B<S;B++){var N=B*E;a.beginPath(),a.moveTo(N+c,p),a.lineTo(N+c,y+p),a.stroke()}for(V=1;V<w;V++){var U=V*P;a.beginPath(),a.moveTo(c,U+p),a.lineTo(c+m,U+p),a.stroke()}}a.restore()}};o.exports=l},9326:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(39169);d.register("grid",function(u,l,h,n,r,f,a,c,p,v){return this.displayList.add(new x(this.scene,u,l,h,n,r,f,a,c,p,v))})},88059:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(50639),u=e(95525),o.exports={renderWebGL:x,renderCanvas:u}},50639:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(l,h,n,r){n.addToRenderList(h);var f=l.pipelines.set(h.pipeline),a=d(h,n,r),c=f.calcMatrix.copyFrom(a.calc);c.translate(-h._displayOriginX,-h._displayOriginY);var p=n.alpha*h.alpha,v=h.width,m=h.height,y=h.cellWidth,E=h.cellHeight,P=Math.ceil(v/y),S=Math.ceil(m/E),w=y,A=E,R=y-(P*y-v),O=E-(S*E-m),F,L,D=h.showCells,I=h.showAltCells,B=h.showOutline,V=0,Y=0,W=0,$=0,N=0;if(B&&(w--,A--,R===y&&R--,O===E&&O--),l.pipelines.preBatch(h),D&&h.fillAlpha>0)for(F=f.fillTint,L=x.getTintAppendFloatAlpha(h.fillColor,h.fillAlpha*p),F.TL=L,F.TR=L,F.BL=L,F.BR=L,Y=0;Y<S;Y++)for(I&&(W=Y%2),V=0;V<P;V++){if(I&&W){W=0;continue}W++,$=V<P-1?w:R,N=Y<S-1?A:O,f.batchFillRect(V*y,Y*E,$,N)}if(I&&h.altFillAlpha>0)for(F=f.fillTint,L=x.getTintAppendFloatAlpha(h.altFillColor,h.altFillAlpha*p),F.TL=L,F.TR=L,F.BL=L,F.BR=L,Y=0;Y<S;Y++)for(I&&(W=Y%2),V=0;V<P;V++){if(I&&!W){W=1;continue}W=0,$=V<P-1?w:R,N=Y<S-1?A:O,f.batchFillRect(V*y,Y*E,$,N)}if(B&&h.outlineFillAlpha>0){var U=f.strokeTint,b=x.getTintAppendFloatAlpha(h.outlineFillColor,h.outlineFillAlpha*p);for(U.TL=b,U.TR=b,U.BL=b,U.BR=b,V=1;V<P;V++){var G=V*y;f.batchLine(G,0,G,m,1,1,1,0,!1)}for(Y=1;Y<S;Y++){var z=Y*E;f.batchLine(0,z,v,z,1,1,1,0,!1)}}l.pipelines.postBatch(h)};o.exports=u},4415:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72296),x=e(56694),u=e(91461),l=new x({Extends:u,Mixins:[d],initialize:function(n,r,f,a,c,p,v,m){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=48),c===void 0&&(c=32),p===void 0&&(p=15658734),v===void 0&&(v=10066329),m===void 0&&(m=13421772),u.call(this,n,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=v,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(r,f),this.setSize(a,c),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setFaces:function(h,n,r){return h===void 0&&(h=!0),n===void 0&&(n=!0),r===void 0&&(r=!0),this.showTop=h,this.showLeft=n,this.showRight=r,this},setFillStyle:function(h,n,r){return this.fillTop=h,this.fillLeft=n,this.fillRight=r,this.isFilled=!0,this}});o.exports=l},32884:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(49584),u=function(l,h,n,r){n.addToRenderList(h);var f=l.currentContext;if(x(l,f,h,n,r)&&h.isFilled){var a=h.width,c=h.height,p=a/2,v=a/h.projection;h.showTop&&(d(f,h,h.fillTop),f.beginPath(),f.moveTo(-p,-c),f.lineTo(0,-v-c),f.lineTo(p,-c),f.lineTo(p,-1),f.lineTo(0,v-1),f.lineTo(-p,-1),f.lineTo(-p,-c),f.fill()),h.showLeft&&(d(f,h,h.fillLeft),f.beginPath(),f.moveTo(-p,0),f.lineTo(0,v),f.lineTo(0,v-c),f.lineTo(-p,-c),f.lineTo(-p,0),f.fill()),h.showRight&&(d(f,h,h.fillRight),f.beginPath(),f.moveTo(p,0),f.lineTo(0,v),f.lineTo(0,v-c),f.lineTo(p,-c),f.lineTo(p,0),f.fill()),f.restore()}};o.exports=u},88154:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(4415);d.register("isobox",function(u,l,h,n,r,f,a){return this.displayList.add(new x(this.scene,u,l,h,n,r,f,a))})},72296:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(33101),u=e(32884),o.exports={renderWebGL:x,renderCanvas:u}},33101:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(l,h,n,r){n.addToRenderList(h);var f=l.pipelines.set(h.pipeline),a=d(h,n,r),c=f.calcMatrix.copyFrom(a.calc),p=h.width,v=h.height,m=p/2,y=p/h.projection,E=n.alpha*h.alpha;if(!!h.isFilled){var P,S,w,A,R,O,F,L,D;l.pipelines.preBatch(h),h.showTop&&(P=x.getTintAppendFloatAlpha(h.fillTop,E),S=c.getX(-m,-v),w=c.getY(-m,-v),A=c.getX(0,-y-v),R=c.getY(0,-y-v),O=c.getX(m,-v),F=c.getY(m,-v),L=c.getX(0,y-v),D=c.getY(0,y-v),f.batchQuad(h,S,w,A,R,O,F,L,D,0,0,1,1,P,P,P,P,2)),h.showLeft&&(P=x.getTintAppendFloatAlpha(h.fillLeft,E),S=c.getX(-m,0),w=c.getY(-m,0),A=c.getX(0,y),R=c.getY(0,y),O=c.getX(0,y-v),F=c.getY(0,y-v),L=c.getX(-m,-v),D=c.getY(-m,-v),f.batchQuad(h,S,w,A,R,O,F,L,D,0,0,1,1,P,P,P,P,2)),h.showRight&&(P=x.getTintAppendFloatAlpha(h.fillRight,E),S=c.getX(m,0),w=c.getY(m,0),A=c.getX(0,y),R=c.getY(0,y),O=c.getX(0,y-v),F=c.getY(0,y-v),L=c.getX(m,-v),D=c.getY(m,-v),f.batchQuad(h,S,w,A,R,O,F,L,D,0,0,1,1,P,P,P,P,2)),l.pipelines.postBatch(h)}};o.exports=u},65159:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93387),u=e(91461),l=new d({Extends:u,Mixins:[x],initialize:function(n,r,f,a,c,p,v,m,y){r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a=48),c===void 0&&(c=32),p===void 0&&(p=!1),v===void 0&&(v=15658734),m===void 0&&(m=10066329),y===void 0&&(y=13421772),u.call(this,n,"IsoTriangle",null),this.projection=4,this.fillTop=v,this.fillLeft=m,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(r,f),this.setSize(a,c),this.updateDisplayOrigin()},setProjection:function(h){return this.projection=h,this},setReversed:function(h){return this.isReversed=h,this},setFaces:function(h,n,r){return h===void 0&&(h=!0),n===void 0&&(n=!0),r===void 0&&(r=!0),this.showTop=h,this.showLeft=n,this.showRight=r,this},setFillStyle:function(h,n,r){return this.fillTop=h,this.fillLeft=n,this.fillRight=r,this.isFilled=!0,this}});o.exports=l},9923:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(49584),u=function(l,h,n,r){n.addToRenderList(h);var f=l.currentContext;if(x(l,f,h,n,r)&&h.isFilled){var a=h.width,c=h.height,p=a/2,v=a/h.projection,m=h.isReversed;h.showTop&&m&&(d(f,h,h.fillTop),f.beginPath(),f.moveTo(-p,-c),f.lineTo(0,-v-c),f.lineTo(p,-c),f.lineTo(0,v-c),f.fill()),h.showLeft&&(d(f,h,h.fillLeft),f.beginPath(),m?(f.moveTo(-p,-c),f.lineTo(0,v),f.lineTo(0,v-c)):(f.moveTo(-p,0),f.lineTo(0,v),f.lineTo(0,v-c)),f.fill()),h.showRight&&(d(f,h,h.fillRight),f.beginPath(),m?(f.moveTo(p,-c),f.lineTo(0,v),f.lineTo(0,v-c)):(f.moveTo(p,0),f.lineTo(0,v),f.lineTo(0,v-c)),f.fill()),f.restore()}};o.exports=u},67765:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(65159);d.register("isotriangle",function(u,l,h,n,r,f,a,c){return this.displayList.add(new x(this.scene,u,l,h,n,r,f,a,c))})},93387:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(54946),u=e(9923),o.exports={renderWebGL:x,renderCanvas:u}},54946:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(l,h,n,r){n.addToRenderList(h);var f=l.pipelines.set(h.pipeline),a=d(h,n,r),c=f.calcMatrix.copyFrom(a.calc),p=h.width,v=h.height,m=p/2,y=p/h.projection,E=h.isReversed,P=n.alpha*h.alpha;if(!!h.isFilled){l.pipelines.preBatch(h);var S,w,A,R,O,F,L;if(h.showTop&&E){S=x.getTintAppendFloatAlpha(h.fillTop,P),w=c.getX(-m,-v),A=c.getY(-m,-v),R=c.getX(0,-y-v),O=c.getY(0,-y-v),F=c.getX(m,-v),L=c.getY(m,-v);var D=c.getX(0,y-v),I=c.getY(0,y-v);f.batchQuad(h,w,A,R,O,F,L,D,I,0,0,1,1,S,S,S,S,2)}h.showLeft&&(S=x.getTintAppendFloatAlpha(h.fillLeft,P),E?(w=c.getX(-m,-v),A=c.getY(-m,-v),R=c.getX(0,y),O=c.getY(0,y),F=c.getX(0,y-v),L=c.getY(0,y-v)):(w=c.getX(-m,0),A=c.getY(-m,0),R=c.getX(0,y),O=c.getY(0,y),F=c.getX(0,y-v),L=c.getY(0,y-v)),f.batchTri(h,w,A,R,O,F,L,0,0,1,1,S,S,S,2)),h.showRight&&(S=x.getTintAppendFloatAlpha(h.fillRight,P),E?(w=c.getX(m,-v),A=c.getY(m,-v),R=c.getX(0,y),O=c.getY(0,y),F=c.getX(0,y-v),L=c.getY(0,y-v)):(w=c.getX(m,0),A=c.getY(m,0),R=c.getX(0,y),O=c.getY(0,y),F=c.getX(0,y-v),L=c.getY(0,y-v)),f.batchTri(h,w,A,R,O,F,L,0,0,1,1,S,S,S,2)),l.pipelines.postBatch(h)}};o.exports=u},579:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91461),u=e(88829),l=e(52660),h=new d({Extends:x,Mixins:[l],initialize:function(r,f,a,c,p,v,m,y,E){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=128),m===void 0&&(m=0),x.call(this,r,"Line",new u(c,p,v,m));var P=Math.max(1,this.geom.right-this.geom.left),S=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(f,a),this.setSize(P,S),y!==void 0&&this.setStrokeStyle(1,y,E),this.updateDisplayOrigin()},setLineWidth:function(n,r){return r===void 0&&(r=n),this._startWidth=n,this._endWidth=r,this.lineWidth=n,this},setTo:function(n,r,f,a){return this.geom.setTo(n,r,f,a),this}});o.exports=h},52044:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17876),x=e(49584),u=function(l,h,n,r){n.addToRenderList(h);var f=l.currentContext;if(x(l,f,h,n,r)){var a=h._displayOriginX,c=h._displayOriginY;h.isStroked&&(d(f,h),f.beginPath(),f.moveTo(h.geom.x1-a,h.geom.y1-c),f.lineTo(h.geom.x2-a,h.geom.y2-c),f.stroke()),f.restore()}};o.exports=u},85665:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(579);d.register("line",function(u,l,h,n,r,f,a,c){return this.displayList.add(new x(this.scene,u,l,h,n,r,f,a,c))})},52660:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(46952),u=e(52044),o.exports={renderWebGL:x,renderCanvas:u}},46952:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(75512),u=function(l,h,n,r){n.addToRenderList(h);var f=l.pipelines.set(h.pipeline),a=d(h,n,r);f.calcMatrix.copyFrom(a.calc);var c=h._displayOriginX,p=h._displayOriginY,v=n.alpha*h.alpha;if(l.pipelines.preBatch(h),h.isStroked){var m=f.strokeTint,y=x.getTintAppendFloatAlpha(h.strokeColor,h.strokeAlpha*v);m.TL=y,m.TR=y,m.BL=y,m.BR=y;var E=h._startWidth,P=h._endWidth;f.batchLine(h.geom.x1-c,h.geom.y1-p,h.geom.x2-c,h.geom.y2-p,E,P,1,0,!1,a.sprite,a.camera)}l.pipelines.postBatch(h)};o.exports=u},91249:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70573),x=e(56694),u=e(11117),l=e(14045),h=e(8580),n=e(91461),r=e(18974),f=new x({Extends:n,Mixins:[d],initialize:function(c,p,v,m,y,E){p===void 0&&(p=0),v===void 0&&(v=0),n.call(this,c,"Polygon",new h(m));var P=l(this.geom);this.setPosition(p,v),this.setSize(P.width,P.height),y!==void 0&&this.setFillStyle(y,E),this.updateDisplayOrigin(),this.updateData()},smooth:function(a){a===void 0&&(a=1);for(var c=0;c<a;c++)r(this.geom);return this.updateData()},setTo:function(a){this.geom.setTo(a);var c=l(this.geom);return this.setSize(c.width,c.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var a=[],c=this.geom.points,p=0;p<c.length;p++)a.push(c[p].x,c[p].y);return a.push(c[0].x,c[0].y),this.pathIndexes=u(a),this.pathData=a,this}});o.exports=f},40834:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),l=function(h,n,r,f){r.addToRenderList(n);var a=h.currentContext;if(u(h,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY,v=n.pathData,m=v.length-1,y=v[0]-c,E=v[1]-p;a.beginPath(),a.moveTo(y,E),n.closePath||(m-=2);for(var P=2;P<m;P+=2){var S=v[P]-c,w=v[P+1]-p;a.lineTo(S,w)}n.closePath&&a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};o.exports=l},88203:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(91249);d.register("polygon",function(u,l,h,n,r){return this.displayList.add(new x(this.scene,u,l,h,n,r))})},70573:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(72841),u=e(40834),o.exports={renderWebGL:x,renderCanvas:u}},72841:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),x=e(73329),u=e(50262),l=function(h,n,r,f){r.addToRenderList(n);var a=h.pipelines.set(n.pipeline),c=x(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX,m=n._displayOriginY,y=r.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&d(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),h.pipelines.postBatch(n)};o.exports=l},517:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(74118),u=e(91461),l=e(37673),h=new d({Extends:u,Mixins:[l],initialize:function(r,f,a,c,p,v,m){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=128),p===void 0&&(p=128),u.call(this,r,"Rectangle",new x(0,0,c,p)),this.setPosition(f,a),this.setSize(c,p),v!==void 0&&this.setFillStyle(v,m),this.updateDisplayOrigin(),this.updateData()},setSize:function(n,r){this.width=n,this.height=r,this.geom.setSize(n,r),this.updateData(),this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=n,f.hitArea.height=r),this},updateData:function(){var n=[],r=this.geom,f=this._tempLine;return r.getLineA(f),n.push(f.x1,f.y1,f.x2,f.y2),r.getLineB(f),n.push(f.x2,f.y2),r.getLineC(f),n.push(f.x2,f.y2),r.getLineD(f),n.push(f.x2,f.y2),this.pathData=n,this}});o.exports=h},4091:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),l=function(h,n,r,f){r.addToRenderList(n);var a=h.currentContext;if(u(h,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY;n.isFilled&&(d(a,n),a.fillRect(-c,-p,n.width,n.height)),n.isStroked&&(x(a,n),a.beginPath(),a.rect(-c,-p,n.width,n.height),a.stroke()),a.restore()}};o.exports=l},94355:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(517);d.register("rectangle",function(u,l,h,n,r,f){return this.displayList.add(new x(this.scene,u,l,h,n,r,f))})},37673:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(43532),u=e(4091),o.exports={renderWebGL:x,renderCanvas:u}},43532:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(50262),u=e(75512),l=function(h,n,r,f){r.addToRenderList(n);var a=h.pipelines.set(n.pipeline),c=d(n,r,f);a.calcMatrix.copyFrom(c.calc);var p=n._displayOriginX,v=n._displayOriginY,m=r.alpha*n.alpha;if(h.pipelines.preBatch(n),n.isFilled){var y=a.fillTint,E=u.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*m);y.TL=E,y.TR=E,y.BL=E,y.BR=E,a.batchFillRect(-p,-v,n.width,n.height)}n.isStroked&&x(a,n,m,p,v),h.pipelines.postBatch(n)};o.exports=l},77843:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87956),x=e(56694),u=e(11117),l=e(91461),h=new x({Extends:l,Mixins:[d],initialize:function(r,f,a,c,p,v,m,y){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=5),p===void 0&&(p=32),v===void 0&&(v=64),l.call(this,r,"Star",null),this._points=c,this._innerRadius=p,this._outerRadius=v,this.setPosition(f,a),this.setSize(v*2,v*2),m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},setPoints:function(n){return this._points=n,this.updateData()},setInnerRadius:function(n){return this._innerRadius=n,this.updateData()},setOuterRadius:function(n){return this._outerRadius=n,this.updateData()},points:{get:function(){return this._points},set:function(n){this._points=n,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(n){this._innerRadius=n,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(n){this._outerRadius=n,this.updateData()}},updateData:function(){var n=[],r=this._points,f=this._innerRadius,a=this._outerRadius,c=Math.PI/2*3,p=Math.PI/r,v=a,m=a;n.push(v,m+-a);for(var y=0;y<r;y++)n.push(v+Math.cos(c)*a,m+Math.sin(c)*a),c+=p,n.push(v+Math.cos(c)*f,m+Math.sin(c)*f),c+=p;return n.push(v,m+-a),this.pathIndexes=u(n),this.pathData=n,this}});o.exports=h},11401:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),l=function(h,n,r,f){r.addToRenderList(n);var a=h.currentContext;if(u(h,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY,v=n.pathData,m=v.length-1,y=v[0]-c,E=v[1]-p;a.beginPath(),a.moveTo(y,E),n.closePath||(m-=2);for(var P=2;P<m;P+=2){var S=v[P]-c,w=v[P+1]-p;a.lineTo(S,w)}a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};o.exports=l},23962:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77843),x=e(61286);x.register("star",function(u,l,h,n,r,f,a){return this.displayList.add(new d(this.scene,u,l,h,n,r,f,a))})},87956:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(12037),u=e(11401),o.exports={renderWebGL:x,renderCanvas:u}},12037:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19543),x=e(73329),u=e(50262),l=function(h,n,r,f){r.addToRenderList(n);var a=h.pipelines.set(n.pipeline),c=x(n,r,f),p=a.calcMatrix.copyFrom(c.calc),v=n._displayOriginX,m=n._displayOriginY,y=r.alpha*n.alpha;h.pipelines.preBatch(n),n.isFilled&&d(a,p,n,y,v,m),n.isStroked&&u(a,n,y,v,m),h.pipelines.postBatch(n)};o.exports=l},21873:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91461),u=e(66349),l=e(70498),h=new d({Extends:x,Mixins:[l],initialize:function(r,f,a,c,p,v,m,y,E,P,S){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=128),v===void 0&&(v=64),m===void 0&&(m=0),y===void 0&&(y=128),E===void 0&&(E=128),x.call(this,r,"Triangle",new u(c,p,v,m,y,E));var w=this.geom.right-this.geom.left,A=this.geom.bottom-this.geom.top;this.setPosition(f,a),this.setSize(w,A),P!==void 0&&this.setFillStyle(P,S),this.updateDisplayOrigin(),this.updateData()},setTo:function(n,r,f,a,c,p){return this.geom.setTo(n,r,f,a,c,p),this.updateData()},updateData:function(){var n=[],r=this.geom,f=this._tempLine;return r.getLineA(f),n.push(f.x1,f.y1,f.x2,f.y2),r.getLineB(f),n.push(f.x2,f.y2),r.getLineC(f),n.push(f.x2,f.y2),this.pathData=n,this}});o.exports=h},60213:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15608),x=e(17876),u=e(49584),l=function(h,n,r,f){r.addToRenderList(n);var a=h.currentContext;if(u(h,a,n,r,f)){var c=n._displayOriginX,p=n._displayOriginY,v=n.geom.x1-c,m=n.geom.y1-p,y=n.geom.x2-c,E=n.geom.y2-p,P=n.geom.x3-c,S=n.geom.y3-p;a.beginPath(),a.moveTo(v,m),a.lineTo(y,E),a.lineTo(P,S),a.closePath(),n.isFilled&&(d(a,n),a.fill()),n.isStroked&&(x(a,n),a.stroke()),a.restore()}};o.exports=l},79296:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(21873);d.register("triangle",function(u,l,h,n,r,f,a,c,p,v){return this.displayList.add(new x(this.scene,u,l,h,n,r,f,a,c,p,v))})},70498:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(72291),u=e(60213),o.exports={renderWebGL:x,renderCanvas:u}},72291:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=e(50262),u=e(75512),l=function(h,n,r,f){r.addToRenderList(n);var a=h.pipelines.set(n.pipeline),c=d(n,r,f);a.calcMatrix.copyFrom(c.calc);var p=n._displayOriginX,v=n._displayOriginY,m=r.alpha*n.alpha;if(h.pipelines.preBatch(n),n.isFilled){var y=a.fillTint,E=u.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*m);y.TL=E,y.TR=E,y.BL=E,y.BR=E;var P=n.geom.x1-p,S=n.geom.y1-v,w=n.geom.x2-p,A=n.geom.y2-v,R=n.geom.x3-p,O=n.geom.y3-v;a.batchFillTriangle(P,S,w,A,R,O,c.sprite,c.camera)}n.isStroked&&x(a,n,m,p,v),h.pipelines.postBatch(n)};o.exports=l},13747:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(56694),u=e(64937),l=e(89980),h=e(20791),n=new x({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,h],initialize:function(f,a,c,p,v){l.call(this,f,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(p,v),this.setPosition(a,c),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(r,f){this.anims.update(r,f)},play:function(r,f){return this.anims.play(r,f)},playReverse:function(r,f){return this.anims.playReverse(r,f)},playAfterDelay:function(r,f){return this.anims.playAfterDelay(r,f)},playAfterRepeat:function(r,f){return this.anims.playAfterRepeat(r,f)},chain:function(r){return this.anims.chain(r)},stop:function(){return this.anims.stop()},stopAfterDelay:function(r){return this.anims.stopAfterDelay(r)},stopAfterRepeat:function(r){return this.anims.stopAfterRepeat(r)},stopOnFrame:function(r){return this.anims.stopOnFrame(r)},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});o.exports=n},27573:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d),e.batchSprite(d,d.frame,x,u)};o.exports=T},89219:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(32291),u=e(99325),l=e(20494),h=e(13747);u.register("sprite",function(n,r){n===void 0&&(n={});var f=l(n,"key",null),a=l(n,"frame",null),c=new h(this.scene,0,0,f,a);return r!==void 0&&(n.add=r),d(this.scene,c,n),x(c,n),c})},66135:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(13747);d.register("sprite",function(u,l,h,n){return this.displayList.add(new x(this.scene,u,l,h,n))})},20791:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(21034),u=e(27573),o.exports={renderWebGL:x,renderCanvas:u}},21034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x.addToRenderList(d),d.pipeline.batchSprite(d,x,u)};o.exports=T},32979:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.canvas,l=e.context,h=e.style,n=[],r=0,f=x.length;h.maxLines>0&&h.maxLines<x.length&&(f=h.maxLines),h.syncFont(u,l);for(var a=0;a<f;a++){var c=h.strokeThickness;c+=l.measureText(x[a]).width,h.wordWrap&&(c-=l.measureText(" ").width),n[a]=Math.ceil(c),r=Math.max(r,n[a])}var p=d.fontSize+h.strokeThickness,v=p*f,m=e.lineSpacing;return f>1&&(v+=m*(f-1)),{width:r,height:v,lines:f,lineWidths:n,lineSpacing:m,lineHeight:p}};o.exports=T},27030:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=function(u){var l=d.create(this),h=l.getContext("2d",{willReadFrequently:!0});u.syncFont(l,h);var n=h.measureText(u.testString);if("actualBoundingBoxAscent"in n){var r=n.actualBoundingBoxAscent,f=n.actualBoundingBoxDescent;return d.remove(l),{ascent:r,descent:f,fontSize:r+f}}var a=Math.ceil(n.width*u.baselineX),c=a,p=2*c;c=c*u.baselineY|0,l.width=a,l.height=p,h.fillStyle="#f00",h.fillRect(0,0,a,p),h.font=u._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(u.testString,0,c);var v={ascent:0,descent:0,fontSize:0},m=h.getImageData(0,0,a,p);if(!m)return v.ascent=c,v.descent=c+6,v.fontSize=v.ascent+v.descent,d.remove(l),v;var y=m.data,E=y.length,P=a*4,S,w,A=0,R=!1;for(S=0;S<c;S++){for(w=0;w<P;w+=4)if(y[A+w]!==255){R=!0;break}if(!R)A+=P;else break}for(v.ascent=c-S,A=E-P,R=!1,S=p;S>c;S--){for(w=0;w<P;w+=4)if(y[A+w]!==255){R=!0;break}if(!R)A-=P;else break}return v.descent=S-c,v.fontSize=v.ascent+v.descent,d.remove(l),v};o.exports=x},76555:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99584),x=e(61068),u=e(56694),l=e(64937),h=e(89980),n=e(32979),r=e(10850),f=e(55638),a=e(80032),c=e(74744),p=new u({Extends:h,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.PostPipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,a],initialize:function(m,y,E,P,S){y===void 0&&(y=0),E===void 0&&(E=0),h.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(y,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=x.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new c(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(P),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",d(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(v){var m=this.style;if(m.wordWrapCallback){var y=m.wordWrapCallback.call(m.wordWrapCallbackScope,v,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(v,this.context,this.style.wordWrapWidth):this.basicWordWrap(v,this.context,this.style.wordWrapWidth):v},advancedWordWrap:function(v,m,y){for(var E="",P=v.replace(/ +/gi," ").split(this.splitRegExp),S=P.length,w=0;w<S;w++){var A=P[w],R="";A=A.replace(/^ *|\s*$/gi,"");var O=m.measureText(A).width;if(O<y){E+=A+`
`;continue}for(var F=y,L=A.split(" "),D=0;D<L.length;D++){var I=L[D],B=I+" ",V=m.measureText(B).width;if(V>F){if(D===0){for(var Y=B;Y.length&&(Y=Y.slice(0,-1),V=m.measureText(Y).width,!(V<=F)););if(!Y.length)throw new Error("wordWrapWidth < a single character");var W=I.substr(Y.length);L[D]=W,R+=Y}var $=L[D].length?D:D+1,N=L.slice($).join(" ").replace(/[ \n]*$/gi,"");P.splice(w+1,0,N),S=P.length;break}else R+=B,F-=V}E+=R.replace(/[ \n]*$/gi,"")+`
`}return E=E.replace(/[\s|\n]*$/gi,""),E},basicWordWrap:function(v,m,y){for(var E="",P=v.split(this.splitRegExp),S=P.length-1,w=m.measureText(" ").width,A=0;A<=S;A++){for(var R=y,O=P[A].split(" "),F=O.length-1,L=0;L<=F;L++){var D=O[L],I=m.measureText(D).width,B=I;L<F&&(B+=w),B>R&&L>0&&(E+=`
`,R=y),E+=D,L<F?(E+=" ",R-=B):R-=I}A<S&&(E+=`
`)}return E},getWrappedText:function(v){v===void 0&&(v=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(v);return m.split(this.splitRegExp)},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this._text&&(this._text=v.toString(),this.updateText()),this},appendText:function(v,m){m===void 0&&(m=!0),!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v=v.toString();var y=this._text.concat(m?`
`+v:v);return y!==this._text&&(this._text=y,this.updateText()),this},setStyle:function(v){return this.style.setStyle(v)},setFont:function(v){return this.style.setFont(v)},setFontFamily:function(v){return this.style.setFontFamily(v)},setFontSize:function(v){return this.style.setFontSize(v)},setFontStyle:function(v){return this.style.setFontStyle(v)},setFixedSize:function(v,m){return this.style.setFixedSize(v,m)},setBackgroundColor:function(v){return this.style.setBackgroundColor(v)},setFill:function(v){return this.style.setFill(v)},setColor:function(v){return this.style.setColor(v)},setStroke:function(v,m){return this.style.setStroke(v,m)},setShadow:function(v,m,y,E,P,S){return this.style.setShadow(v,m,y,E,P,S)},setShadowOffset:function(v,m){return this.style.setShadowOffset(v,m)},setShadowColor:function(v){return this.style.setShadowColor(v)},setShadowBlur:function(v){return this.style.setShadowBlur(v)},setShadowStroke:function(v){return this.style.setShadowStroke(v)},setShadowFill:function(v){return this.style.setShadowFill(v)},setWordWrapWidth:function(v,m){return this.style.setWordWrapWidth(v,m)},setWordWrapCallback:function(v,m){return this.style.setWordWrapCallback(v,m)},setAlign:function(v){return this.style.setAlign(v)},setResolution:function(v){return this.style.setResolution(v)},setLineSpacing:function(v){return this.lineSpacing=v,this.updateText()},setPadding:function(v,m,y,E){if(typeof v=="object"){var P=v,S=r(P,"x",null);S!==null?(v=S,y=S):(v=r(P,"left",0),y=r(P,"right",v));var w=r(P,"y",null);w!==null?(m=w,E=w):(m=r(P,"top",0),E=r(P,"bottom",m))}else v===void 0&&(v=0),m===void 0&&(m=v),y===void 0&&(y=v),E===void 0&&(E=m);return this.padding.left=v,this.padding.top=m,this.padding.right=y,this.padding.bottom=E,this.updateText()},setMaxLines:function(v){return this.style.setMaxLines(v)},updateText:function(){var v=this.canvas,m=this.context,y=this.style,E=y.resolution,P=y.metrics;y.syncFont(v,m);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var w=S.split(this.splitRegExp),A=n(this,P,w),R=this.padding,O;y.fixedWidth===0?(this.width=A.width+R.left+R.right,O=A.width):(this.width=y.fixedWidth,O=this.width-R.left-R.right,O<A.width&&(O=A.width)),y.fixedHeight===0?this.height=A.height+R.top+R.bottom:this.height=y.fixedHeight;var F=this.width,L=this.height;this.updateDisplayOrigin(),F*=E,L*=E,F=Math.max(F,1),L=Math.max(L,1),v.width!==F||v.height!==L?(v.width=F,v.height=L,this.frame.setSize(F,L),y.syncFont(v,m),y.rtl&&(m.direction="rtl")):m.clearRect(0,0,F,L),m.save(),m.scale(E,E),y.backgroundColor&&(m.fillStyle=y.backgroundColor,m.fillRect(0,0,F,L)),y.syncStyle(v,m),m.translate(R.left,R.top);for(var D,I,B=0;B<A.lines;B++){if(D=y.strokeThickness/2,I=y.strokeThickness/2+B*A.lineHeight+P.ascent,B>0&&(I+=A.lineSpacing*B),y.rtl)D=F-D-R.left-R.right;else if(y.align==="right")D+=O-A.lineWidths[B];else if(y.align==="center")D+=(O-A.lineWidths[B])/2;else if(y.align==="justify"){var V=.85;if(A.lineWidths[B]/A.width>=V){var Y=A.width-A.lineWidths[B],W=m.measureText(" ").width,$=w[B].trim(),N=$.split(" ");Y+=(w[B].length-$.length)*W;for(var U=Math.floor(Y/W),b=0;U>0;)N[b]+=" ",b=(b+1)%(N.length-1||1),--U;w[B]=N.join(" ")}}this.autoRound&&(D=Math.round(D),I=Math.round(I)),y.strokeThickness&&(y.syncShadow(m,y.shadowStroke),m.strokeText(w[B],D,I)),y.color&&(y.syncShadow(m,y.shadowFill),m.fillText(w[B],D,I))}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(v,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var G=this.input;return G&&!G.customHitArea&&(G.hitArea.width=this.width,G.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(v){this.setText(v)}},toJSON:function(){var v=l.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return v.data=m,v},preDestroy:function(){this.style.rtl&&f(this.canvas),x.remove(this.canvas),this.texture.destroy()}});o.exports=p},71649:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d.width===0||d.height===0||(x.addToRenderList(d),e.batchSprite(d,d.frame,x,u))};o.exports=T},75397:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(76555);x.register("text",function(h,n){h===void 0&&(h={});var r=u(h,"text",""),f=u(h,"style",null),a=u(h,"padding",null);a!==null&&(f.padding=a);var c=new l(this.scene,0,0,r,f);return n!==void 0&&(h.add=n),d(this.scene,c,h),c.autoRound=u(h,"autoRound",!0),c.resolution=u(h,"resolution",1),c})},94627:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76555),x=e(61286);x.register("text",function(u,l,h,n){return this.displayList.add(new d(this.scene,u,l,h,n))})},80032:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(76128),u=e(71649),o.exports={renderWebGL:x,renderCanvas:u}},74744:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(20494),u=e(10850),l=e(27030),h={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},n=new d({initialize:function(f,a){this.parent=f,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(a,!1,!0)},setStyle:function(r,f,a){f===void 0&&(f=!0),a===void 0&&(a=!1),r&&r.hasOwnProperty("fontSize")&&typeof r.fontSize=="number"&&(r.fontSize=r.fontSize.toString()+"px");for(var c in h){var p=a?h[c][1]:this[c];c==="wordWrapCallback"||c==="wordWrapCallbackScope"?this[c]=u(r,h[c][0],p):this[c]=x(r,h[c][0],p)}var v=u(r,"font",null);v!==null&&this.setFont(v,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=u(r,"fill",null);m!==null&&(this.color=m);var y=u(r,"metrics",!1);return y?this.metrics={ascent:u(y,"ascent",0),descent:u(y,"descent",0),fontSize:u(y,"fontSize",0)}:(f||!this.metrics)&&(this.metrics=l(this)),f?this.parent.updateText():this.parent},syncFont:function(r,f){f.font=this._font},syncStyle:function(r,f){f.textBaseline="alphabetic",f.fillStyle=this.color,f.strokeStyle=this.stroke,f.lineWidth=this.strokeThickness,f.lineCap="round",f.lineJoin="round"},syncShadow:function(r,f){f?(r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY,r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur):(r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowColor=0,r.shadowBlur=0)},update:function(r){return r&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=l(this)),this.parent.updateText()},setFont:function(r,f){f===void 0&&(f=!0);var a=r,c="",p="";if(typeof r!="string")a=u(r,"fontFamily","Courier"),c=u(r,"fontSize","16px"),p=u(r,"fontStyle","");else{var v=r.split(" "),m=0;p=v.length>2?v[m++]:"",c=v[m++]||"16px",a=v[m++]||"Courier"}return(a!==this.fontFamily||c!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=a,this.fontSize=c,this.fontStyle=p,f&&this.update(!0)),this.parent},setFontFamily:function(r){return this.fontFamily!==r&&(this.fontFamily=r,this.update(!0)),this.parent},setFontStyle:function(r){return this.fontStyle!==r&&(this.fontStyle=r,this.update(!0)),this.parent},setFontSize:function(r){return typeof r=="number"&&(r=r.toString()+"px"),this.fontSize!==r&&(this.fontSize=r,this.update(!0)),this.parent},setTestString:function(r){return this.testString=r,this.update(!0)},setFixedSize:function(r,f){return this.fixedWidth=r,this.fixedHeight=f,r&&(this.parent.width=r),f&&(this.parent.height=f),this.update(!1)},setBackgroundColor:function(r){return this.backgroundColor=r,this.update(!1)},setFill:function(r){return this.color=r,this.update(!1)},setColor:function(r){return this.color=r,this.update(!1)},setResolution:function(r){return this.resolution=r,this.update(!1)},setStroke:function(r,f){return f===void 0&&(f=this.strokeThickness),r===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==r||this.strokeThickness!==f)&&(this.stroke=r,this.strokeThickness=f,this.update(!0)),this.parent},setShadow:function(r,f,a,c,p,v){return r===void 0&&(r=0),f===void 0&&(f=0),a===void 0&&(a="#000"),c===void 0&&(c=0),p===void 0&&(p=!1),v===void 0&&(v=!0),this.shadowOffsetX=r,this.shadowOffsetY=f,this.shadowColor=a,this.shadowBlur=c,this.shadowStroke=p,this.shadowFill=v,this.update(!1)},setShadowOffset:function(r,f){return r===void 0&&(r=0),f===void 0&&(f=r),this.shadowOffsetX=r,this.shadowOffsetY=f,this.update(!1)},setShadowColor:function(r){return r===void 0&&(r="#000"),this.shadowColor=r,this.update(!1)},setShadowBlur:function(r){return r===void 0&&(r=0),this.shadowBlur=r,this.update(!1)},setShadowStroke:function(r){return this.shadowStroke=r,this.update(!1)},setShadowFill:function(r){return this.shadowFill=r,this.update(!1)},setWordWrapWidth:function(r,f){return f===void 0&&(f=!1),this.wordWrapWidth=r,this.wordWrapUseAdvanced=f,this.update(!1)},setWordWrapCallback:function(r,f){return f===void 0&&(f=null),this.wordWrapCallback=r,this.wordWrapCallbackScope=f,this.update(!1)},setAlign:function(r){return r===void 0&&(r="left"),this.align=r,this.update(!1)},setMaxLines:function(r){return r===void 0&&(r=0),this.maxLines=r,this.update(!1)},getTextMetrics:function(){var r=this.metrics;return{ascent:r.ascent,descent:r.descent,fontSize:r.fontSize}},toJSON:function(){var r={};for(var f in h)r[f]=this[f];return r.metrics=this.getTextMetrics(),r},destroy:function(){this.parent=void 0}});o.exports=n},76128:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,l,h,n){if(!(l.width===0||l.height===0)){h.addToRenderList(l);var r=l.frame,f=r.width,a=r.height,c=d.getTintAppendFloatAlpha,p=u.pipelines.set(l.pipeline,l),v=p.setTexture2D(r.glTexture,l);p.batchTexture(l,r.glTexture,f,a,l.x,l.y,f/l.style.resolution,a/l.style.resolution,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.displayOriginX,l.displayOriginY,0,0,f,a,c(l.tintTopLeft,h.alpha*l._alphaTL),c(l.tintTopRight,h.alpha*l._alphaTR),c(l.tintBottomLeft,h.alpha*l._alphaBL),c(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,0,0,h,n,!1,v)}};o.exports=x},35856:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(56694),u=e(64937),l=e(89980),h=e(3504),n=e(8213),r=e(9271),f=e(93736),a=8,c=new x({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,r],initialize:function(v,m,y,E,P,S,w){var A=v.sys.renderer;l.call(this,v,"TileSprite");var R=v.sys.textures.get(S),O=R.get(w);O.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),R=v.sys.textures.get("__MISSING"),O=R.get()),R.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),R=v.sys.textures.get("__MISSING"),O=R.get()),!E||!P?(E=O.width,P=O.height):(E=Math.floor(E),P=Math.floor(P)),this._tilePosition=new f,this._tileScale=new f(1,1),this.dirty=!1,this.renderer=A,this.canvas=d.create(this,E,P),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=R,this.displayFrame=O,this._crop=this.resetCropObject(),this.texture=v.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=h(O.width),this.potHeight=h(O.height),this.fillCanvas=d.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(m,y),this.setSize(E,P),this.setFrame(w),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(p,v){return this.displayTexture=this.scene.sys.textures.get(p),this.setFrame(v)},setFrame:function(p){var v=this.displayTexture.get(p);return this.potWidth=h(v.width),this.potHeight=h(v.height),this.canvas.width=0,!v.cutWidth||!v.cutHeight?this.renderFlags&=~a:this.renderFlags|=a,this.displayFrame=v,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(p,v){return p!==void 0&&(this.tilePositionX=p),v!==void 0&&(this.tilePositionY=v),this},setTileScale:function(p,v){return p===void 0&&(p=this.tileScaleX),v===void 0&&(v=p),this.tileScaleX=p,this.tileScaleY=v,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var p=this.displayFrame;if(p.source.isRenderTexture||p.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var v=this.fillContext,m=this.fillCanvas,y=this.potWidth,E=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=p.cutWidth,E=p.cutHeight),v.clearRect(0,0,y,E),m.width=y,m.height=E,v.drawImage(p.source.image,p.cutX,p.cutY,p.cutWidth,p.cutHeight,0,0,y,E),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=v.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var p=this.canvas;if((p.width!==this.width||p.height!==this.height)&&(p.width=this.width,p.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var v=this.context;this.scene.sys.game.config.antialias||n.disable(v);var m=this._tileScale.x,y=this._tileScale.y,E=this._tilePosition.x,P=this._tilePosition.y;v.clearRect(0,0,this.width,this.height),v.save(),v.scale(m,y),v.translate(-E,-P),v.fillStyle=this.fillPattern,v.fillRect(E,P,this.width/m,this.height/y),v.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),d.remove(this.canvas),d.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(p){this._tilePosition.x=p,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(p){this._tilePosition.y=p,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(p){this._tileScale.x=p,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(p){this._tileScale.y=p,this.dirty=!0}}});o.exports=c},93305:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d.updateCanvas(),x.addToRenderList(d),e.batchSprite(d,d.frame,x,u)};o.exports=T},63950:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(35856);x.register("tileSprite",function(h,n){h===void 0&&(h={});var r=u(h,"x",0),f=u(h,"y",0),a=u(h,"width",512),c=u(h,"height",512),p=u(h,"key",""),v=u(h,"frame",""),m=new l(this.scene,r,f,a,c,p,v);return n!==void 0&&(h.add=n),d(this.scene,m,h),m})},20509:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35856),x=e(61286);x.register("tileSprite",function(u,l,h,n,r,f){return this.displayList.add(new d(this.scene,u,l,h,n,r,f))})},9271:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(74287),u=e(93305),o.exports={renderWebGL:x,renderCanvas:u}},74287:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,l,h,n){l.updateCanvas();var r=l.width,f=l.height;if(!(r===0||f===0)){h.addToRenderList(l);var a=d.getTintAppendFloatAlpha,c=u.pipelines.set(l.pipeline,l),p=c.setTexture2D(l.fillPattern,l);c.batchTexture(l,l.fillPattern,l.displayFrame.width*l.tileScaleX,l.displayFrame.height*l.tileScaleY,l.x,l.y,r,f,l.scaleX,l.scaleY,l.rotation,l.flipX,l.flipY,l.scrollFactorX,l.scrollFactorY,l.originX*r,l.originY*f,0,0,r,f,a(l.tintTopLeft,h.alpha*l._alphaTL),a(l.tintTopRight,h.alpha*l._alphaTR),a(l.tintBottomLeft,h.alpha*l._alphaBL),a(l.tintBottomRight,h.alpha*l._alphaBR),l.tintFill,l.tilePositionX%l.displayFrame.width/l.displayFrame.width,l.tilePositionY%l.displayFrame.height/l.displayFrame.height,h,n,!1,p)}};o.exports=x},8630:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(64937),l=e(56631),h=e(97081),n=e(89980),r=e(83392),f=e(76038),a=e(76583),c=e(77974),p=new x({Extends:n,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,c],initialize:function(m,y,E,P){n.call(this,m,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=a(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var S=m.sys.game;this._device=S.device.video,this.setPosition(y,E),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),S.events.on(h.PAUSE,this.globalPause,this),S.events.on(h.RESUME,this.globalResume,this);var w=m.sys.sound;w&&w.on(f.GLOBAL_MUTE,this.globalMute,this),P&&this.load(P)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(v){var m=this.scene.sys.cache.video.get(v);return m?(this.cacheKey=v,this.loadHandler(m.url,m.noAudio,m.crossOrigin)):console.warn("No video in cache for key: "+v),this},changeSource:function(v,m,y,E,P){m===void 0&&(m=!0),y===void 0&&(y=!1),this.cacheKey!==v&&(this.load(v),m&&this.play(y,E,P))},getVideoKey:function(){return this.cacheKey},loadURL:function(v,m,y){m===void 0&&(m=!1);var E=this._device.getVideoURL(v);return E?(this.cacheKey="",this.loadHandler(E.url,m,y)):console.warn("No supported video format found for "+v),this},loadMediaStream:function(v,m,y){return this.loadHandler(null,m,y,v)},loadHandler:function(v,m,y,E){m||(m=!1);var P=this.video;if(P?(this.removeLoadEventHandlers(),this.stop()):(P=document.createElement("video"),P.controls=!1,P.setAttribute("playsinline","playsinline"),P.setAttribute("preload","auto"),P.setAttribute("disablePictureInPicture","true")),m?(P.muted=!0,P.defaultMuted=!0,P.setAttribute("autoplay","autoplay")):(P.muted=!1,P.defaultMuted=!1,P.removeAttribute("autoplay")),y?P.setAttribute("crossorigin",y):P.removeAttribute("crossorigin"),E)if("srcObject"in P)try{P.srcObject=E}catch(S){if(S.name!=="TypeError")throw S;P.src=URL.createObjectURL(E)}else P.src=URL.createObjectURL(E);else P.src=v;return this.addLoadEventHandlers(),this.retry=0,this.video=P,this._playCalled=!1,P.load(),this},requestVideoFrame:function(v,m){var y=this.video;if(!!y){var E=m.width,P=m.height,S=this.videoTexture,w=this.videoTextureSource,A=!S||w.source!==y;A?(this._codePaused=y.paused,this._codeMuted=y.muted,S?(w.source=y,w.width=E,w.height=P,S.get().setSize(E,P)):(S=this.scene.sys.textures.create(this._key,y,E,P),S.add("__BASE",0,0,0,E,P),this.setTexture(S),this.videoTexture=S,this.videoTextureSource=S.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(l.VIDEO_TEXTURE,this,S)),this.setSizeToFrame(),this.updateDisplayOrigin()):w.update(),this.isStalled=!1,this.metadata=m;var R=m.mediaTime;A&&(this._lastUpdate=R,this.emit(l.VIDEO_CREATED,this,E,P),this.frameReady||(this.frameReady=!0,this.emit(l.VIDEO_PLAY,this))),this._playingMarker?R>=this._markerOut&&(y.loop?(y.currentTime=this._markerIn,this.emit(l.VIDEO_LOOP,this)):(this.stop(!1),this.emit(l.VIDEO_COMPLETE,this))):R<this._lastUpdate&&this.emit(l.VIDEO_LOOP,this),this._lastUpdate=R,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(v,m,y){m===void 0&&(m=-1),y===void 0&&(y=r.MAX_SAFE_INTEGER);var E=this.video;return!E||this.isPlaying()?(E||console.warn("Video not loaded"),this):(v===void 0&&(v=E.loop),E.loop=v,this._markerIn=m,this._markerOut=y,this._playingMarker=m>-1&&y>m&&y<r.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=E.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var v=this.video;v&&(v.addEventListener("error",this._loadCallbackHandler),v.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var v=this.video;v&&(v.removeEventListener("error",this._loadCallbackHandler),v.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var v=this.video;if(v){var m=this._callbacks;for(var y in m)v.addEventListener(y,m[y])}},removeEventHandlers:function(){var v=this.video;if(v){var m=this._callbacks;for(var y in m)v.removeEventListener(y,m[y])}},createPlayPromise:function(v){v===void 0&&(v=!0);var m=this.video,y=m.play();if(y!==void 0){var E=this.playSuccess.bind(this),P=this.playError.bind(this);if(!v){var S=this;P=function(){S.failedPlayAttempts++}}y.then(E).catch(P)}else m.addEventListener("playing",this._callbacks.legacy),v||this.failedPlayAttempts++},addMarker:function(v,m,y){return!isNaN(m)&&m>=0&&!isNaN(y)&&y>m&&(this.markers[v]=[m,y]),this},playMarker:function(v,m){var y=this.markers[v];return y&&this.play(m,y[0],y[1]),this},removeMarker:function(v){return delete this.markers[v],this},snapshot:function(v,m){return v===void 0&&(v=this.width),m===void 0&&(m=this.height),this.snapshotArea(0,0,this.width,this.height,v,m)},snapshotArea:function(v,m,y,E,P,S){v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=this.width),E===void 0&&(E=this.height),P===void 0&&(P=y),S===void 0&&(S=E);var w=this.video,A=this.snapshotTexture;return A?(A.setSize(P,S),w&&A.context.drawImage(w,v,m,y,E,0,0,P,S)):(A=this.scene.sys.textures.createCanvas(a(),P,S),this.snapshotTexture=A,w&&A.context.drawImage(w,v,m,y,E,0,0,P,S)),A.update()},saveSnapshotTexture:function(v){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,v):this.snapshotTexture=this.scene.sys.textures.createCanvas(v,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(!!this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(l.VIDEO_UNLOCKED,this));var v=this.scene.sys.sound;v&&v.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(v){var m=v.name;m==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(l.VIDEO_LOCKED,this)):m==="NotSupportedError"?(this.stop(!1),this.emit(l.VIDEO_UNSUPPORTED,this,v)):(this.stop(!1),this.emit(l.VIDEO_ERROR,this,v))},legacyPlayHandler:function(){var v=this.video;v&&(this.playSuccess(),v.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(l.VIDEO_PLAYING,this)},loadErrorHandler:function(v){this.stop(!1),this.emit(l.VIDEO_ERROR,this,v)},stalledHandler:function(v){this.isStalled=!0,this.emit(l.VIDEO_STALLED,this,v)},completeHandler:function(){this._playCalled=!1,this.emit(l.VIDEO_COMPLETE,this)},preUpdate:function(v,m){var y=this.video;!y||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=m,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(v){var m=this.video;if(m){var y=m.duration;if(y!==1/0&&!isNaN(y)){var E=y*v;this.setCurrentTime(E)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(v){var m=this.video;if(m){if(typeof v=="string"){var y=v[0],E=parseFloat(v.substr(1));y==="+"?v=m.currentTime+E:y==="-"&&(v=m.currentTime-E)}m.currentTime=v}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(l.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(l.VIDEO_SEEKED,this)},getProgress:function(){var v=this.video;if(v){var m=v.duration;if(m!==1/0&&!isNaN(m))return v.currentTime/m}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(v){v===void 0&&(v=!0),this._codeMuted=v;var m=this.video;return m&&(m.muted=this._systemMuted?!0:v),this},isMuted:function(){return this._codeMuted},globalMute:function(v,m){this._systemMuted=m;var y=this.video;y&&(y.muted=this._codeMuted?!0:m)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(v){v===void 0&&(v=!0);var m=this.video;return this._codePaused=v,m&&!m.ended&&(v?m.paused||(this.removeEventHandlers(),m.pause()):v||(this._playCalled?m.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(v){return v===void 0&&(v=1),this.video&&(this.video.volume=d(v,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(v){return this.video&&(this.video.playbackRate=v),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(v){return v===void 0&&(v=!0),this.video&&(this.video.loop=v),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(v,m){return m===void 0&&(m=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,v),this.videoTextureSource.setFlipY(m)),this._key=v,this.flipY=m,!!this.videoTexture},stop:function(v){v===void 0&&(v=!0);var m=this.video;return m&&(this.removeEventHandlers(),m.cancelVideoFrameCallback(this._rfvCallbackId),m.pause()),this.retry=0,this._playCalled=!1,v&&this.emit(l.VIDEO_STOP,this),this},removeVideoElement:function(){var v=this.video;if(!!v){for(v.parentNode&&v.parentNode.removeChild(v);v.hasChildNodes();)v.removeChild(v.firstChild);v.removeAttribute("autoplay"),v.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var v=this.scene.sys.game.events;v.off(h.PAUSE,this.globalPause,this),v.off(h.RESUME,this.globalResume,this);var m=this.scene.sys.sound;m&&m.off(f.GLOBAL_MUTE,this.globalMute,this)}});o.exports=p},56933:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d.videoTexture&&(x.addToRenderList(d),e.batchSprite(d,d.frame,x,u))};o.exports=T},65601:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88933),x=e(99325),u=e(20494),l=e(8630);x.register("video",function(h,n){h===void 0&&(h={});var r=u(h,"key",null),f=new l(this.scene,0,0,r);return n!==void 0&&(h.add=n),d(this.scene,f,h),f})},215:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8630),x=e(61286);x.register("video",function(u,l,h){return this.displayList.add(new d(this.scene,u,l,h))})},77974:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(83572),u=e(56933),o.exports={renderWebGL:x,renderCanvas:u}},83572:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d.videoTexture&&(x.addToRenderList(d),d.pipeline.batchSprite(d,x,u))};o.exports=T},71030:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(26673),u=e(65650),l=e(56694),h=e(64937),n=e(89980),r=e(74118),f=e(94287),a=new l({Extends:n,Mixins:[h.Depth,h.GetBounds,h.Origin,h.Transform,h.ScrollFactor,h.Visible],initialize:function(p,v,m,y,E){y===void 0&&(y=1),E===void 0&&(E=y),n.call(this,p,"Zone"),this.setPosition(v,m),this.width=y,this.height=E,this.blendMode=d.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,p,v){v===void 0&&(v=!0),this.width=c,this.height=p,this.updateDisplayOrigin();var m=this.input;return v&&m&&!m.customHitArea&&(m.hitArea.width=c,m.hitArea.height=p),this},setDisplaySize:function(c,p){return this.displayWidth=c,this.displayHeight=p,this},setCircleDropZone:function(c){return this.setDropZone(new x(0,0,c),u)},setRectangleDropZone:function(c,p){return this.setDropZone(new r(0,0,c,p),f)},setDropZone:function(c,p){return this.input||this.setInteractive(c,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(c,p,v){v.addToRenderList(p)},renderWebGL:function(c,p,v){v.addToRenderList(p)}});o.exports=a},24067:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),x=e(20494),u=e(71030);d.register("zone",function(l){var h=x(l,"x",0),n=x(l,"y",0),r=x(l,"width",1),f=x(l,"height",r);return new u(this.scene,h,n,r,f)})},34546:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71030),x=e(61286);x.register("zone",function(u,l,h,n){return this.displayList.add(new d(this.scene,u,l,h,n))})},95847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};o.exports=T},26673:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(65650),u=e(94026),l=e(62941),h=e(52394),n=e(30977),r=new d({initialize:function(a,c,p){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),this.type=h.CIRCLE,this.x=a,this.y=c,this._radius=p,this._diameter=p*2},contains:function(f,a){return x(this,f,a)},getPoint:function(f,a){return u(this,f,a)},getPoints:function(f,a,c){return l(this,f,a,c)},getRandomPoint:function(f){return n(this,f)},setTo:function(f,a,c){return this.x=f,this.y=a,this._radius=c,this._diameter=c*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(f,a){return a===void 0&&(a=f),this.x=f,this.y=a,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(f){this._radius=f,this._diameter=f*2}},diameter:{get:function(){return this._diameter},set:function(f){this._diameter=f,this._radius=f*.5}},left:{get:function(){return this.x-this._radius},set:function(f){this.x=f+this._radius}},right:{get:function(){return this.x+this._radius},set:function(f){this.x=f-this._radius}},top:{get:function(){return this.y-this._radius},set:function(f){this.y=f+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(f){this.y=f-this._radius}}});o.exports=r},37964:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(Math.PI*e.radius)};o.exports=T},72233:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l,h){return h===void 0&&(h=new d),h.x=u.x+u.radius*Math.cos(l),h.y=u.y+u.radius*Math.sin(l),h};o.exports=x},61761:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),x=function(u){return new d(u.x,u.y,u.radius)};o.exports=x},65650:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(e.radius>0&&d>=e.left&&d<=e.right&&x>=e.top&&x<=e.bottom){var u=(e.x-d)*(e.x-d),l=(e.y-x)*(e.y-x);return u+l<=e.radius*e.radius}else return!1};o.exports=T},39187:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),x=function(u,l){return d(u,l.x,l.y)};o.exports=x},58672:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),x=function(u,l){return d(u,l.x,l.y)&&d(u,l.right,l.y)&&d(u,l.x,l.bottom)&&d(u,l.right,l.bottom)};o.exports=x},42997:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x,e.y,e.radius)};o.exports=T},94894:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x===d.x&&e.y===d.y&&e.radius===d.radius};o.exports=T},48027:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,l){return l===void 0&&(l=new d),l.x=u.left,l.y=u.top,l.width=u.diameter,l.height=u.diameter,l};o.exports=x},94026:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72233),x=e(91806),u=e(83392),l=e(79967),h=function(n,r,f){f===void 0&&(f=new l);var a=x(r,0,u.PI2);return d(n,a,f)};o.exports=h},62941:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(37964),x=e(72233),u=e(91806),l=e(83392),h=function(n,r,f,a){a===void 0&&(a=[]),!r&&f>0&&(r=d(n)/f);for(var c=0;c<r;c++){var p=u(c/r,0,l.PI2);a.push(x(n,p))}return a};o.exports=h},34585:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x+=d,e.y+=x,e};o.exports=T},88665:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x+=d.x,e.y+=d.y,e};o.exports=T},30977:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){l===void 0&&(l=new d);var h=2*Math.PI*Math.random(),n=Math.random()+Math.random(),r=n>1?2-n:n,f=r*Math.cos(h),a=r*Math.sin(h);return l.x=u.x+f*u.radius,l.y=u.y+a*u.radius,l};o.exports=x},6112:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673);d.Area=e(95847),d.Circumference=e(37964),d.CircumferencePoint=e(72233),d.Clone=e(61761),d.Contains=e(65650),d.ContainsPoint=e(39187),d.ContainsRect=e(58672),d.CopyFrom=e(42997),d.Equals=e(94894),d.GetBounds=e(48027),d.GetPoint=e(94026),d.GetPoints=e(62941),d.Offset=e(34585),d.OffsetPoint=e(88665),d.Random=e(30977),o.exports=d},52394:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};o.exports=T},58605:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};o.exports=T},39507:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=e.width/2,x=e.height/2,u=Math.pow(d-x,2)/Math.pow(d+x,2);return Math.PI*(d+x)*(1+3*u/(10+Math.sqrt(4-3*u)))};o.exports=T},86998:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l,h){h===void 0&&(h=new d);var n=u.width/2,r=u.height/2;return h.x=u.x+n*Math.cos(l),h.y=u.y+r*Math.sin(l),h};o.exports=x},81773:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95669),x=function(u){return new d(u.x,u.y,u.width,u.height)};o.exports=x},72313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(e.width<=0||e.height<=0)return!1;var u=(d-e.x)/e.width,l=(x-e.y)/e.height;return u*=u,l*=l,u+l<.25};o.exports=T},34368:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72313),x=function(u,l){return d(u,l.x,l.y)};o.exports=x},71431:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72313),x=function(u,l){return d(u,l.x,l.y)&&d(u,l.right,l.y)&&d(u,l.x,l.bottom)&&d(u,l.right,l.bottom)};o.exports=x},75459:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x,e.y,e.width,e.height)};o.exports=T},95669:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72313),u=e(95340),l=e(54978),h=e(52394),n=e(72006),r=new d({initialize:function(a,c,p,v){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),this.type=h.ELLIPSE,this.x=a,this.y=c,this.width=p,this.height=v},contains:function(f,a){return x(this,f,a)},getPoint:function(f,a){return u(this,f,a)},getPoints:function(f,a,c){return l(this,f,a,c)},getRandomPoint:function(f){return n(this,f)},setTo:function(f,a,c,p){return this.x=f,this.y=a,this.width=c,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(f,a){return a===void 0&&(a=f),this.x=f,this.y=a,this},setSize:function(f,a){return a===void 0&&(a=f),this.width=f,this.height=a,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(f){this.x=f+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(f){this.x=f-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(f){this.y=f+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(f){this.y=f-this.height/2}}});o.exports=r},98068:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x===d.x&&e.y===d.y&&e.width===d.width&&e.height===d.height};o.exports=T},72897:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,l){return l===void 0&&(l=new d),l.x=u.left,l.y=u.top,l.width=u.width,l.height=u.height,l};o.exports=x},95340:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86998),x=e(91806),u=e(83392),l=e(79967),h=function(n,r,f){f===void 0&&(f=new l);var a=x(r,0,u.PI2);return d(n,a,f)};o.exports=h},54978:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(39507),x=e(86998),u=e(91806),l=e(83392),h=function(n,r,f,a){a===void 0&&(a=[]),!r&&f>0&&(r=d(n)/f);for(var c=0;c<r;c++){var p=u(c/r,0,l.PI2);a.push(x(n,p))}return a};o.exports=h},77951:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x+=d,e.y+=x,e};o.exports=T},36233:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x+=d.x,e.y+=d.y,e};o.exports=T},72006:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){l===void 0&&(l=new d);var h=Math.random()*Math.PI*2,n=Math.sqrt(Math.random());return l.x=u.x+n*Math.cos(h)*u.width/2,l.y=u.y+n*Math.sin(h)*u.height/2,l};o.exports=x},40652:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95669);d.Area=e(58605),d.Circumference=e(39507),d.CircumferencePoint=e(86998),d.Clone=e(81773),d.Contains=e(72313),d.ContainsPoint=e(34368),d.ContainsRect=e(71431),d.CopyFrom=e(75459),d.Equals=e(98068),d.GetBounds=e(72897),d.GetPoint=e(95340),d.GetPoints=e(54978),d.Offset=e(77951),d.OffsetPoint=e(36233),d.Random=e(72006),o.exports=d},84068:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(52394),x=e(98611),u={Circle:e(6112),Ellipse:e(40652),Intersects:e(7563),Line:e(28482),Mesh:e(14293),Point:e(63472),Polygon:e(44359),Rectangle:e(66658),Triangle:e(87619)};u=x(!1,u,d),o.exports=u},22184:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53996),x=function(u,l){return d(u.x,u.y,l.x,l.y)<=u.radius+l.radius};o.exports=x},26535:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=d.width/2,u=d.height/2,l=Math.abs(e.x-d.x-x),h=Math.abs(e.y-d.y-u),n=x+e.radius,r=u+e.radius;if(l>n||h>r)return!1;if(l<=x||h<=u)return!0;var f=l-x,a=h-u,c=f*f,p=a*a,v=e.radius*e.radius;return c+p<=v};o.exports=T},71145:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(22184),u=function(l,h,n){if(n===void 0&&(n=[]),x(l,h)){var r=l.x,f=l.y,a=l.radius,c=h.x,p=h.y,v=h.radius,m,y,E,P,S;if(f===p)S=(v*v-a*a-c*c+r*r)/(2*(r-c)),m=1,y=-2*p,E=c*c+S*S-2*c*S+p*p-v*v,P=y*y-4*m*E,P===0?n.push(new d(S,-y/(2*m))):P>0&&(n.push(new d(S,(-y+Math.sqrt(P))/(2*m))),n.push(new d(S,(-y-Math.sqrt(P))/(2*m))));else{var w=(r-c)/(f-p),A=(v*v-a*a-c*c+r*r-p*p+f*f)/(2*(f-p));m=w*w+1,y=2*f*w-2*A*w-2*r,E=r*r+f*f+A*A-a*a-2*f*A,P=y*y-4*m*E,P===0?(S=-y/(2*m),n.push(new d(S,A-S*w))):P>0&&(S=(-y+Math.sqrt(P))/(2*m),n.push(new d(S,A-S*w)),S=(-y-Math.sqrt(P))/(2*m),n.push(new d(S,A-S*w)))}}return n};o.exports=u},62508:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26111),x=e(26535),u=function(l,h,n){if(n===void 0&&(n=[]),x(l,h)){var r=h.getLineA(),f=h.getLineB(),a=h.getLineC(),c=h.getLineD();d(r,l,n),d(f,l,n),d(a,l,n),d(c,l,n)}return n};o.exports=u},26111:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(61472),u=function(l,h,n){if(n===void 0&&(n=[]),x(l,h)){var r=l.x1,f=l.y1,a=l.x2,c=l.y2,p=h.x,v=h.y,m=h.radius,y=a-r,E=c-f,P=r-p,S=f-v,w=y*y+E*E,A=2*(y*P+E*S),R=P*P+S*S-m*m,O=A*A-4*w*R,F,L;if(O===0){var D=-A/(2*w);F=r+D*y,L=f+D*E,D>=0&&D<=1&&n.push(new d(F,L))}else if(O>0){var I=(-A-Math.sqrt(O))/(2*w);F=r+I*y,L=f+I*E,I>=0&&I<=1&&n.push(new d(F,L));var B=(-A+Math.sqrt(O))/(2*w);F=r+B*y,L=f+B*E,B>=0&&B<=1&&n.push(new d(F,L))}}return n};o.exports=u},96537:(o,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),x=function(u,l,h,n){h===void 0&&(h=!1);var r=u.x1,f=u.y1,a=u.x2,c=u.y2,p=l.x1,v=l.y1,m=l.x2,y=l.y2,E=a-r,P=c-f,S=m-p,w=y-v,A=E*w-P*S;if(A===0)return null;var R,O,F;if(h){if(R=(E*(v-f)+P*(r-p))/(S*P-w*E),O=(p+S*R-r)/E,O<0||R<0||R>1)return null;F=O}else{if(R=((p-r)*w-(v-f)*S)/A,O=((f-v)*E-(r-p)*P)/A,R<0||R>1||O<0||O>1)return null;F=R}return n===void 0&&(n=new d),n.set(r+E*F,f+P*F,F)};o.exports=x},17647:(o,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(96537),x=e(88829),u=e(70015),l=new x,h=new u,n=function(r,f,a,c){a===void 0&&(a=!1),c===void 0&&(c=new u);var p=!1;c.set(),h.set();for(var v=f[0],m=1;m<f.length;m++){var y=f[m];l.setTo(v.x,v.y,y.x,y.y),v=y,d(r,l,a,h)&&(!p||h.z<c.z)&&(c.copy(h),p=!0)}return p?c:null};o.exports=n},68439:(o,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),x=e(51729),u=e(17647),l=new d,h=function(n,r,f,a){a===void 0&&(a=new x),Array.isArray(r)||(r=[r]);var c=!1;a.set(),l.set();for(var p=0;p<r.length;p++)u(n,r[p].points,f,l)&&(!c||l.z<a.z)&&(a.set(l.x,l.y,l.z,p),c=!0);return c?a:null};o.exports=h},9569:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(25227),u=e(47910),l=function(h,n,r){if(r===void 0&&(r=[]),u(h,n))for(var f=n.getLineA(),a=n.getLineB(),c=n.getLineC(),p=n.getLineD(),v=[new d,new d,new d,new d],m=[x(f,h,v[0]),x(a,h,v[1]),x(c,h,v[2]),x(p,h,v[3])],y=0;y<4;y++)m[y]&&r.push(v[y]);return r};o.exports=l},7449:(o,T,e)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(51729),x=e(68439),u=e(88829),l=new u;function h(f,a,c,p,v){var m=Math.cos(f),y=Math.sin(f);l.setTo(a,c,a+m,c+y);var E=x(l,p,!0);E&&v.push(new d(E.x,E.y,f,E.w))}function n(f,a){return f.z-a.z}var r=function(f,a,c){Array.isArray(c)||(c=[c]);for(var p=[],v=[],m=0;m<c.length;m++)for(var y=c[m].points,E=0;E<y.length;E++){var P=Math.atan2(y[E].y-a,y[E].x-f);v.indexOf(P)===-1&&(h(P,f,a,c,p),h(P-1e-5,f,a,c,p),h(P+1e-5,f,a,c,p),v.push(P))}return p.sort(n)};o.exports=r},82931:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(90205),u=function(l,h,n){return n===void 0&&(n=new d),x(l,h)&&(n.x=Math.max(l.x,h.x),n.y=Math.max(l.y,h.y),n.width=Math.min(l.right,h.right)-n.x,n.height=Math.min(l.bottom,h.bottom)-n.y),n};o.exports=u},1946:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(9569),x=e(90205),u=function(l,h,n){if(n===void 0&&(n=[]),x(l,h)){var r=l.getLineA(),f=l.getLineB(),a=l.getLineC(),c=l.getLineD();d(r,h,n),d(f,h,n),d(a,h,n),d(c,h,n)}return n};o.exports=u},34211:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(20370),x=e(9569),u=function(l,h,n){if(n===void 0&&(n=[]),d(l,h)){var r=h.getLineA(),f=h.getLineB(),a=h.getLineC();x(r,l,n),x(f,l,n),x(a,l,n)}return n};o.exports=u},80511:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26111),x=e(48411),u=function(l,h,n){if(n===void 0&&(n=[]),x(l,h)){var r=l.getLineA(),f=l.getLineB(),a=l.getLineC();d(r,h,n),d(f,h,n),d(a,h,n)}return n};o.exports=u},31343:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(86117),u=e(25227),l=function(h,n,r){if(r===void 0&&(r=[]),x(h,n))for(var f=h.getLineA(),a=h.getLineB(),c=h.getLineC(),p=[new d,new d,new d],v=[u(f,n,p[0]),u(a,n,p[1]),u(c,n,p[2])],m=0;m<3;m++)v[m]&&r.push(p[m]);return r};o.exports=l},70534:(o,T,e)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(23589),x=e(31343),u=function(l,h,n){if(n===void 0&&(n=[]),d(l,h)){var r=h.getLineA(),f=h.getLineB(),a=h.getLineC();x(l,r,n),x(l,f,n),x(l,a,n)}return n};o.exports=u},61472:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),x=e(79967),u=new x,l=function(h,n,r){if(r===void 0&&(r=u),d(n,h.x1,h.y1))return r.x=h.x1,r.y=h.y1,!0;if(d(n,h.x2,h.y2))return r.x=h.x2,r.y=h.y2,!0;var f=h.x2-h.x1,a=h.y2-h.y1,c=n.x-h.x1,p=n.y-h.y1,v=f*f+a*a,m=f,y=a;if(v>0){var E=(c*f+p*a)/v;m*=E,y*=E}r.x=h.x1+m,r.y=h.y1+y;var P=m*m+y*y;return P<=v&&m*f+y*a>=0&&d(n,r.x,r.y)};o.exports=l},25227:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.x1,l=e.y1,h=e.x2,n=e.y2,r=d.x1,f=d.y1,a=d.x2,c=d.y2;if(u===h&&l===n||r===a&&f===c)return!1;var p=(c-f)*(h-u)-(a-r)*(n-l);if(p===0)return!1;var v=((a-r)*(l-f)-(c-f)*(u-r))/p,m=((h-u)*(l-f)-(n-l)*(u-r))/p;return v<0||v>1||m<0||m>1?!1:(x&&(x.x=u+v*(h-u),x.y=l+v*(n-l)),!0)};o.exports=T},47910:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x1,u=e.y1,l=e.x2,h=e.y2,n=d.x,r=d.y,f=d.right,a=d.bottom,c=0;if(x>=n&&x<=f&&u>=r&&u<=a||l>=n&&l<=f&&h>=r&&h<=a)return!0;if(x<n&&l>=n){if(c=u+(h-u)*(n-x)/(l-x),c>r&&c<=a)return!0}else if(x>f&&l<=f&&(c=u+(h-u)*(f-x)/(l-x),c>=r&&c<=a))return!0;if(u<r&&h>=r){if(c=x+(l-x)*(r-u)/(h-u),c>=n&&c<=f)return!0}else if(u>a&&h<=a&&(c=x+(l-x)*(a-u)/(h-u),c>=n&&c<=f))return!0;return!1};o.exports=T},34426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){x===void 0&&(x=1);var u=d.x1,l=d.y1,h=d.x2,n=d.y2,r=e.x,f=e.y,a=(h-u)*(h-u)+(n-l)*(n-l);if(a===0)return!1;var c=((r-u)*(h-u)+(f-l)*(n-l))/a;if(c<0)return Math.sqrt((u-r)*(u-r)+(l-f)*(l-f))<=x;if(c>=0&&c<=1){var p=((l-f)*(h-u)-(u-r)*(n-l))/a;return Math.abs(p)*Math.sqrt(a)<=x}else return Math.sqrt((h-r)*(h-r)+(n-f)*(n-f))<=x};o.exports=T},81414:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(34426),x=function(u,l){if(!d(u,l))return!1;var h=Math.min(l.x1,l.x2),n=Math.max(l.x1,l.x2),r=Math.min(l.y1,l.y2),f=Math.max(l.y1,l.y2);return u.x>=h&&u.x<=n&&u.y>=r&&u.y<=f};o.exports=x},90205:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.width<=0||e.height<=0||d.width<=0||d.height<=0?!1:!(e.right<d.x||e.bottom<d.y||e.x>d.right||e.y>d.bottom)};o.exports=T},20370:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25227),x=e(94287),u=e(86875),l=e(87279),h=function(n,r){if(r.left>n.right||r.right<n.left||r.top>n.bottom||r.bottom<n.top)return!1;var f=r.getLineA(),a=r.getLineB(),c=r.getLineC();if(x(n,f.x1,f.y1)||x(n,f.x2,f.y2)||x(n,a.x1,a.y1)||x(n,a.x2,a.y2)||x(n,c.x1,c.y1)||x(n,c.x2,c.y2))return!0;var p=n.getLineA(),v=n.getLineB(),m=n.getLineC(),y=n.getLineD();if(d(f,p)||d(f,v)||d(f,m)||d(f,y)||d(a,p)||d(a,v)||d(a,m)||d(a,y)||d(c,p)||d(c,v)||d(c,m)||d(c,y))return!0;var E=l(n),P=u(r,E,!0);return P.length>0};o.exports=h},8786:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l,h){return h===void 0&&(h=0),!(d>e.right+h||x<e.left-h||u>e.bottom+h||l<e.top-h)};o.exports=T},48411:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61472),x=e(60689),u=function(l,h){return l.left>h.right||l.right<h.left||l.top>h.bottom||l.bottom<h.top?!1:!!(x(l,h.x,h.y)||d(l.getLineA(),h)||d(l.getLineB(),h)||d(l.getLineC(),h))};o.exports=u},86117:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25227),x=function(u,l){return!!(u.contains(l.x1,l.y1)||u.contains(l.x2,l.y2)||d(u.getLineA(),l)||d(u.getLineB(),l)||d(u.getLineC(),l))};o.exports=x},23589:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(86875),x=e(18680),u=e(25227),l=function(h,n){if(h.left>n.right||h.right<n.left||h.top>n.bottom||h.bottom<n.top)return!1;var r=h.getLineA(),f=h.getLineB(),a=h.getLineC(),c=n.getLineA(),p=n.getLineB(),v=n.getLineC();if(u(r,c)||u(r,p)||u(r,v)||u(f,c)||u(f,p)||u(f,v)||u(a,c)||u(a,p)||u(a,v))return!0;var m=x(h),y=d(n,m,!0);return y.length>0||(m=x(n),y=d(h,m,!0),y.length>0)};o.exports=l},7563:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CircleToCircle:e(22184),CircleToRectangle:e(26535),GetCircleToCircle:e(71145),GetCircleToRectangle:e(62508),GetLineToCircle:e(26111),GetLineToLine:e(96537),GetLineToPoints:e(17647),GetLineToPolygon:e(68439),GetLineToRectangle:e(9569),GetRaysFromPointToPolygon:e(7449),GetRectangleIntersection:e(82931),GetRectangleToRectangle:e(1946),GetRectangleToTriangle:e(34211),GetTriangleToCircle:e(80511),GetTriangleToLine:e(31343),GetTriangleToTriangle:e(70534),LineToCircle:e(61472),LineToLine:e(25227),LineToRectangle:e(47910),PointToLine:e(34426),PointToLineSegment:e(81414),RectangleToRectangle:e(90205),RectangleToTriangle:e(20370),RectangleToValues:e(8786),TriangleToCircle:e(48411),TriangleToLine:e(86117),TriangleToTriangle:e(23589)}},50599:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};o.exports=T},58813:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=1),x===void 0&&(x=[]);var u=Math.round(e.x1),l=Math.round(e.y1),h=Math.round(e.x2),n=Math.round(e.y2),r=Math.abs(h-u),f=Math.abs(n-l),a=u<h?1:-1,c=l<n?1:-1,p=r-f;x.push({x:u,y:l});for(var v=1;!(u===h&&l===n);){var m=p<<1;m>-f&&(p-=f,u+=a),m<r&&(p+=r,l+=c),v%d===0&&x.push({x:u,y:l}),v++}return x};o.exports=T},88513:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=d-(e.x1+e.x2)/2,l=x-(e.y1+e.y2)/2;return e.x1+=u,e.y1+=l,e.x2+=u,e.y2+=l,e};o.exports=T},26718:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88829),x=function(u){return new d(u.x1,u.y1,u.x2,u.y2)};o.exports=x},88930:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x1,e.y1,e.x2,e.y2)};o.exports=T},90656:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x1===d.x1&&e.y1===d.y1&&e.x2===d.x2&&e.y2===d.y2};o.exports=T},30897:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=function(u,l,h){h===void 0&&(h=l);var n=d(u),r=u.x2-u.x1,f=u.y2-u.y1;return l&&(u.x1=u.x1-r/n*l,u.y1=u.y1-f/n*l),h&&(u.x2=u.x2+r/n*h,u.y2=u.y2+f/n*h),u};o.exports=x},30684:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92951),x=e(21902),u=e(79967),l=function(h,n,r,f,a){f===void 0&&(f=0),a===void 0&&(a=[]);var c=[],p=h.x1,v=h.y1,m=h.x2-p,y=h.y2-v,E=x(n,a),P,S,w=r-1;for(P=0;P<w;P++)S=E(P/w),c.push(new u(p+m*S,v+y*S));if(S=E(1),c.push(new u(p+m*S,v+y*S)),f>0){var A=c[0],R=[A];for(P=1;P<c.length-1;P++){var O=c[P];d(A,O)>=f&&(R.push(O),A=O)}var F=c[c.length-1];return d(A,F)<f&&R.pop(),R.push(F),R}else return c};o.exports=l},20487:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){return l===void 0&&(l=new d),l.x=(u.x1+u.x2)/2,l.y=(u.y1+u.y2)/2,l};o.exports=x},11222:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l,h){h===void 0&&(h=new d);var n=u.x1,r=u.y1,f=u.x2,a=u.y2,c=(f-n)*(f-n)+(a-r)*(a-r);if(c===0)return h;var p=((l.x-n)*(f-n)+(l.y-r)*(a-r))/c;return h.x=n+p*(f-n),h.y=r+p*(a-r),h};o.exports=x},7377:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(50599),u=e(79967),l=function(h,n){n===void 0&&(n=new u);var r=x(h)-d.TAU;return n.x=Math.cos(r),n.y=Math.sin(r),n};o.exports=l},66464:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l,h){return h===void 0&&(h=new d),h.x=u.x1+(u.x2-u.x1)*l,h.y=u.y1+(u.y2-u.y1)*l,h};o.exports=x},8570:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=e(79967),u=function(l,h,n,r){r===void 0&&(r=[]),!h&&n>0&&(h=d(l)/n);for(var f=l.x1,a=l.y1,c=l.x2,p=l.y2,v=0;v<h;v++){var m=v/h,y=f+(c-f)*m,E=a+(p-a)*m;r.push(new x(y,E))}return r};o.exports=u},65269:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x1,u=e.y1,l=e.x2,h=e.y2,n=(l-x)*(l-x)+(h-u)*(h-u);if(n===0)return!1;var r=((u-d.y)*(l-x)-(x-d.x)*(h-u))/n;return Math.abs(r)*Math.sqrt(n)};o.exports=T},82996:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.y1-e.y2)};o.exports=T},16028:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};o.exports=T},88829:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(66464),u=e(8570),l=e(52394),h=e(74077),n=e(93736),r=new d({initialize:function(a,c,p,v){a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),this.type=l.LINE,this.x1=a,this.y1=c,this.x2=p,this.y2=v},getPoint:function(f,a){return x(this,f,a)},getPoints:function(f,a,c){return u(this,f,a,c)},getRandomPoint:function(f){return h(this,f)},setTo:function(f,a,c,p){return f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),this.x1=f,this.y1=a,this.x2=c,this.y2=p,this},getPointA:function(f){return f===void 0&&(f=new n),f.set(this.x1,this.y1),f},getPointB:function(f){return f===void 0&&(f=new n),f.set(this.x2,this.y2),f},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(f){this.x1<=this.x2?this.x1=f:this.x2=f}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(f){this.x1>this.x2?this.x1=f:this.x2=f}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(f){this.y1<=this.y2?this.y1=f:this.y2=f}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(f){this.y1>this.y2?this.y1=f:this.y2=f}}});o.exports=r},73273:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(1071),u=e(50599),l=function(h){var n=u(h)-d.TAU;return x(n,-Math.PI,Math.PI)};o.exports=l},96936:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(50599),u=function(l){return Math.cos(x(l)-d.TAU)};o.exports=u},43581:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(50599),u=function(l){return Math.sin(x(l)-d.TAU)};o.exports=u},13990:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x1+=d,e.y1+=x,e.x2+=d,e.y2+=x,e};o.exports=T},1298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};o.exports=T},74077:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){l===void 0&&(l=new d);var h=Math.random();return l.x=u.x1+h*(u.x2-u.x1),l.y=u.y1+h*(u.y2-u.y1),l};o.exports=x},30473:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50599),x=e(73273),u=function(l,h){return 2*x(h)-Math.PI-d(l)};o.exports=u},25968:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1809),x=function(u,l){var h=(u.x1+u.x2)/2,n=(u.y1+u.y2)/2;return d(u,h,n,l)};o.exports=x},24296:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1809),x=function(u,l,h){return d(u,l.x,l.y,h)};o.exports=x},1809:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=Math.cos(u),h=Math.sin(u),n=e.x1-d,r=e.y1-x;return e.x1=n*l-r*h+d,e.y1=n*h+r*l+x,n=e.x2-d,r=e.y2-x,e.x2=n*l-r*h+d,e.y2=n*h+r*l+x,e};o.exports=T},88171:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l){return e.x1=d,e.y1=x,e.x2=d+Math.cos(u)*l,e.y2=x+Math.sin(u)*l,e};o.exports=T},82797:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};o.exports=T},41067:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.abs(e.x1-e.x2)};o.exports=T},28482:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(88829);d.Angle=e(50599),d.BresenhamPoints=e(58813),d.CenterOn=e(88513),d.Clone=e(26718),d.CopyFrom=e(88930),d.Equals=e(90656),d.Extend=e(30897),d.GetEasedPoints=e(30684),d.GetMidPoint=e(20487),d.GetNearestPoint=e(11222),d.GetNormal=e(7377),d.GetPoint=e(66464),d.GetPoints=e(8570),d.GetShortestDistance=e(65269),d.Height=e(82996),d.Length=e(16028),d.NormalAngle=e(73273),d.NormalX=e(96936),d.NormalY=e(43581),d.Offset=e(13990),d.PerpSlope=e(1298),d.Random=e(74077),d.ReflectAngle=e(30473),d.Rotate=e(25968),d.RotateAroundPoint=e(24296),d.RotateAroundXY=e(1809),d.SetToAngle=e(88171),d.Slope=e(82797),d.Width=e(41067),o.exports=d},18693:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(74118),u=e(93736);function l(n,r,f,a){var c=n-f,p=r-a,v=c*c+p*p;return Math.sqrt(v)}var h=new d({initialize:function(r,f,a){this.vertex1=r,this.vertex2=f,this.vertex3=a,this.bounds=new x,this._inCenter=new u},getInCenter:function(n){n===void 0&&(n=!0);var r=this.vertex1,f=this.vertex2,a=this.vertex3,c,p,v,m,y,E;n?(c=r.x,p=r.y,v=f.x,m=f.y,y=a.x,E=a.y):(c=r.vx,p=r.vy,v=f.vx,m=f.vy,y=a.vx,E=a.vy);var P=l(y,E,v,m),S=l(c,p,y,E),w=l(v,m,c,p),A=P+S+w;return this._inCenter.set((c*P+v*S+y*w)/A,(p*P+m*S+E*w)/A)},contains:function(n,r,f){var a=this.vertex1,c=this.vertex2,p=this.vertex3,v=a.vx,m=a.vy,y=c.vx,E=c.vy,P=p.vx,S=p.vy;if(f){var w=f.a,A=f.b,R=f.c,O=f.d,F=f.e,L=f.f;v=a.vx*w+a.vy*R+F,m=a.vx*A+a.vy*O+L,y=c.vx*w+c.vy*R+F,E=c.vx*A+c.vy*O+L,P=p.vx*w+p.vy*R+F,S=p.vx*A+p.vy*O+L}var D=P-v,I=S-m,B=y-v,V=E-m,Y=n-v,W=r-m,$=D*D+I*I,N=D*B+I*V,U=D*Y+I*W,b=B*B+V*V,G=B*Y+V*W,z=$*b-N*N,X=z===0?0:1/z,k=(b*U-N*G)*X,H=($*G-N*U)*X;return k>=0&&H>=0&&k+H<1},isCounterClockwise:function(n){var r=this.vertex1,f=this.vertex2,a=this.vertex3,c=(f.vx-r.vx)*(a.vy-r.vy)-(f.vy-r.vy)*(a.vx-r.vx);return n<=0?c>=0:c<0},load:function(n,r,f,a,c){return f=this.vertex1.load(n,r,f,a,c),f=this.vertex2.load(n,r,f,a,c),f=this.vertex3.load(n,r,f,a,c),f},transformCoordinatesLocal:function(n,r,f,a){return this.vertex1.transformCoordinatesLocal(n,r,f,a),this.vertex2.transformCoordinatesLocal(n,r,f,a),this.vertex3.transformCoordinatesLocal(n,r,f,a),this},updateBounds:function(){var n=this.vertex1,r=this.vertex2,f=this.vertex3,a=this.bounds;return a.x=Math.min(n.vx,r.vx,f.vx),a.y=Math.min(n.vy,r.vy,f.vy),a.width=Math.max(n.vx,r.vx,f.vx)-a.x,a.height=Math.max(n.vy,r.vy,f.vy)-a.y,this},isInView:function(n,r,f,a,c,p,v,m,y,E,P){this.update(a,c,p,v,m,y,E,P);var S=this.vertex1,w=this.vertex2,A=this.vertex3;if(S.ta<=0&&w.ta<=0&&A.ta<=0||r&&!this.isCounterClockwise(f))return!1;var R=this.bounds;R.x=Math.min(S.tx,w.tx,A.tx),R.y=Math.min(S.ty,w.ty,A.ty),R.width=Math.max(S.tx,w.tx,A.tx)-R.x,R.height=Math.max(S.ty,w.ty,A.ty)-R.y;var O=n.x+n.width,F=n.y+n.height;return R.width<=0||R.height<=0||n.width<=0||n.height<=0?!1:!(R.right<n.x||R.bottom<n.y||R.x>O||R.y>F)},scrollUV:function(n,r){return this.vertex1.scrollUV(n,r),this.vertex2.scrollUV(n,r),this.vertex3.scrollUV(n,r),this},scaleUV:function(n,r){return this.vertex1.scaleUV(n,r),this.vertex2.scaleUV(n,r),this.vertex3.scaleUV(n,r),this},setColor:function(n){return this.vertex1.color=n,this.vertex2.color=n,this.vertex3.color=n,this},update:function(n,r,f,a,c,p,v,m){return this.vertex1.update(r,f,a,c,p,v,m,n),this.vertex2.update(r,f,a,c,p,v,m,n),this.vertex3.update(r,f,a,c,p,v,m,n),this},translate:function(n,r){r===void 0&&(r=0);var f=this.vertex1,a=this.vertex2,c=this.vertex3;return f.x+=n,f.y+=r,a.x+=n,a.y+=r,c.x+=n,c.y+=r,this},x:{get:function(){return this.getInCenter().x},set:function(n){var r=this.getInCenter();this.translate(n-r.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(n){var r=this.getInCenter();this.translate(0,n-r.y)}},alpha:{get:function(){var n=this.vertex1,r=this.vertex2,f=this.vertex3;return(n.alpha+r.alpha+f.alpha)/3},set:function(n){this.vertex1.alpha=n,this.vertex2.alpha=n,this.vertex3.alpha=n}},depth:{get:function(){var n=this.vertex1,r=this.vertex2,f=this.vertex3;return(n.vz+r.vz+f.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});o.exports=h},99425:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),x=e(72632),u=e(16650),l=e(70015),h=e(85769),n=new l,r=new l,f=new u,a=function(c){var p=x(c,"mesh"),v=x(c,"texture",null),m=x(c,"frame"),y=x(c,"width",1),E=x(c,"height",y),P=x(c,"widthSegments",1),S=x(c,"heightSegments",P),w=x(c,"x",0),A=x(c,"y",0),R=x(c,"z",0),O=x(c,"rotateX",0),F=x(c,"rotateY",0),L=x(c,"rotateZ",0),D=x(c,"zIsUp",!0),I=x(c,"isOrtho",p?p.dirtyCache[11]:!1),B=x(c,"colors",[16777215]),V=x(c,"alphas",[1]),Y=x(c,"tile",!1),W=x(c,"flipY",!1),$=x(c,"width",null),N={faces:[],verts:[]};n.set(w,A,R),r.set(O,F,L),f.fromRotationXYTranslation(r,n,D);var U;if(!v&&p)v=p.texture,m||(U=p.frame);else if(p&&typeof v=="string")v=p.scene.sys.textures.get(v);else if(!v)return N;U||(U=v.get(m)),!$&&I&&v&&p&&(y=U.width/p.height,E=U.height/p.height);var b=y/2,G=E/2,z=Math.floor(P),X=Math.floor(S),k=z+1,H=X+1,K=y/z,Z=E/X,J=[],j=[],Q,_,q=0,et=1,at=0,ot=1;U&&(q=U.u0,et=U.u1,W?(at=U.v1,ot=U.v0):(at=U.v0,ot=U.v1));var ht=et-q,tt=ot-at;for(_=0;_<H;_++){var rt=_*Z-G;for(Q=0;Q<k;Q++){var nt=Q*K-b;j.push(nt,-rt);var pt=q+ht*(Q/z),vt=at+tt*(_/X);J.push(pt,vt)}}Array.isArray(B)||(B=[B]),Array.isArray(V)||(V=[V]);var It=0,Rt=0;for(_=0;_<X;_++)for(Q=0;Q<z;Q++){var St=(Q+k*_)*2,mt=(Q+k*(_+1))*2,Ot=(Q+1+k*(_+1))*2,Xt=(Q+1+k*_)*2,Jt=B[Rt],ie=V[It],Pe=new h(j[St],j[St+1],0,J[St],J[St+1],Jt,ie).transformMat4(f),vs=new h(j[mt],j[mt+1],0,J[mt],J[mt+1],Jt,ie).transformMat4(f),ps=new h(j[Xt],j[Xt+1],0,J[Xt],J[Xt+1],Jt,ie).transformMat4(f),gs=new h(j[mt],j[mt+1],0,J[mt],J[mt+1],Jt,ie).transformMat4(f),ms=new h(j[Ot],j[Ot+1],0,J[Ot],J[Ot+1],Jt,ie).transformMat4(f),xs=new h(j[Xt],j[Xt+1],0,J[Xt],J[Xt+1],Jt,ie).transformMat4(f);Y&&(Pe.setUVs(q,ot),vs.setUVs(q,at),ps.setUVs(et,ot),gs.setUVs(q,at),ms.setUVs(et,at),xs.setUVs(et,ot)),Rt++,Rt===B.length&&(Rt=0),It++,It===V.length&&(It=0),N.verts.push(Pe,vs,ps,gs,ms,xs),N.faces.push(new d(Pe,vs,ps),new d(gs,ms,xs))}return p&&(p.faces=p.faces.concat(N.faces),p.vertices=p.vertices.concat(N.verts)),N};o.exports=a},53267:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),x=e(16650),u=e(70015),l=e(85769),h=new u,n=new u,r=new x,f=function(a,c,p,v,m,y,E,P,S,w){p===void 0&&(p=1),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),E===void 0&&(E=0),P===void 0&&(P=0),S===void 0&&(S=0),w===void 0&&(w=!0);var A={faces:[],verts:[]},R=a.materials;h.set(v,m,y),n.set(E,P,S),r.fromRotationXYTranslation(n,h,w);for(var O=0;O<a.models.length;O++)for(var F=a.models[O],L=F.vertices,D=F.textureCoords,I=F.faces,B=0;B<I.length;B++){var V=I[B],Y=V.vertices[0],W=V.vertices[1],$=V.vertices[2],N=L[Y.vertexIndex],U=L[W.vertexIndex],b=L[$.vertexIndex],G=Y.textureCoordsIndex,z=W.textureCoordsIndex,X=$.textureCoordsIndex,k=G===-1?{u:0,v:1}:D[G],H=z===-1?{u:0,v:0}:D[z],K=X===-1?{u:1,v:1}:D[X],Z=16777215;V.material!==""&&R[V.material]&&(Z=R[V.material]);var J=new l(N.x*p,N.y*p,N.z*p,k.u,k.v,Z).transformMat4(r),j=new l(U.x*p,U.y*p,U.z*p,H.u,H.v,Z).transformMat4(r),Q=new l(b.x*p,b.y*p,b.z*p,K.u,K.v,Z).transformMat4(r);A.verts.push(J,j,Q),A.faces.push(new d(J,j,Q))}return c&&(c.faces=c.faces.concat(A.faces),c.vertices=c.vertices.concat(A.verts)),A};o.exports=f},67623:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(18693),x=e(85769),u=function(l,h,n,r,f,a,c,p){if(r===void 0&&(r=!1),a===void 0&&(a=16777215),c===void 0&&(c=1),p===void 0&&(p=!1),l.length!==h.length&&!r){console.warn("GenerateVerts: vertices and uvs count not equal");return}var v={faces:[],vertices:[]},m,y,E,P,S,w,A,R,O,F,L,D=r?3:2,I=Array.isArray(a),B=Array.isArray(c);if(Array.isArray(n)&&n.length>0)for(m=0;m<n.length;m++){var V=n[m],Y=n[m]*2,W=n[m]*D;y=l[W],E=l[W+1],P=r?l[W+2]:0,S=h[Y],w=h[Y+1],p&&(w=1-w),A=I?a[V]:a,R=B?c[V]:c,O=0,F=0,L=0,f&&(O=f[W],F=f[W+1],L=r?f[W+2]:0),v.vertices.push(new x(y,E,P,S,w,A,R,O,F,L))}else{var $=0,N=0;for(m=0;m<l.length;m+=D)y=l[m],E=l[m+1],P=r?l[m+2]:0,S=h[$],w=h[$+1],A=I?a[N]:a,R=B?c[N]:c,O=0,F=0,L=0,f&&(O=f[m],F=f[m+1],L=r?f[m+2]:0),v.vertices.push(new x(y,E,P,S,w,A,R,O,F,L)),$+=2,N++}for(m=0;m<v.vertices.length;m+=3){var U=v.vertices[m],b=v.vertices[m+1],G=v.vertices[m+2];v.faces.push(new d(U,b,G))}return v};o.exports=u},27291:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=!0,e="untitled",d="",x="";function u(y){var E=y.indexOf("#");return E>-1?y.substring(0,E):y}function l(y){return y.models.length===0&&y.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),d="",y.models[y.models.length-1]}function h(y,E){var P=y.length>=2?y[1]:e;E.models.push({faces:[],name:P,textureCoords:[],vertexNormals:[],vertices:[]}),d=""}function n(y){y.length===2&&(d=y[1])}function r(y,E){var P=y.length,S=P>=2?parseFloat(y[1]):0,w=P>=3?parseFloat(y[2]):0,A=P>=4?parseFloat(y[3]):0;l(E).vertices.push({x:S,y:w,z:A})}function f(y,E){var P=y.length,S=P>=2?parseFloat(y[1]):0,w=P>=3?parseFloat(y[2]):0,A=P>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(w)&&(w=0),isNaN(A)&&(A=0),T&&(w=1-w),l(E).textureCoords.push({u:S,v:w,w:A})}function a(y,E){var P=y.length,S=P>=2?parseFloat(y[1]):0,w=P>=3?parseFloat(y[2]):0,A=P>=4?parseFloat(y[3]):0;l(E).vertexNormals.push({x:S,y:w,z:A})}function c(y,E){var P=y.length-1;if(!(P<3)){for(var S={group:d,material:x,vertices:[]},w=0;w<P;w++){var A=y[w+1],R=A.split("/"),O=R.length;if(!(O<1||O>3)){var F=0,L=0,D=0;F=parseInt(R[0],10),O>1&&R[1]!==""&&(L=parseInt(R[1],10)),O>2&&(D=parseInt(R[2],10)),F!==0&&(F<0&&(F=l(E).vertices.length+1+F),L-=1,F-=1,D-=1,S.vertices.push({textureCoordsIndex:L,vertexIndex:F,vertexNormalIndex:D}))}}l(E).faces.push(S)}}function p(y,E){y.length>=2&&E.materialLibraries.push(y[1])}function v(y){y.length>=2&&(x=y[1])}var m=function(y,E){E===void 0&&(E=!0),T=E;var P={materials:{},materialLibraries:[],models:[]};d="",x="";for(var S=y.split(`
`),w=0;w<S.length;w++){var A=u(S[w]),R=A.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":h(R,P);break;case"g":n(R);break;case"v":r(R,P);break;case"vt":f(R,P);break;case"vn":a(R,P);break;case"f":c(R,P);break;case"mtllib":p(R,P);break;case"usemtl":v(R);break}}return P};o.exports=m},76799:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22946),x=function(u){for(var l={},h=u.split(`
`),n="",r=0;r<h.length;r++){var f=h[r].trim();if(!(f.indexOf("#")===0||f==="")){var a=f.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":{n=a[1];break}case"kd":{var c=Math.floor(a[1]*255),p=a.length>=2?Math.floor(a[2]*255):c,v=a.length>=3?Math.floor(a[3]*255):c;l[n]=d(c,p,v);break}}}}return l};o.exports=x},15313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l,h;if(x===void 0&&u===void 0){var n=e.getInCenter();l=n.x,h=n.y}var r=Math.cos(d),f=Math.sin(d),a=e.vertex1,c=e.vertex2,p=e.vertex3,v=a.x-l,m=a.y-h;a.set(v*r-m*f+l,v*f+m*r+h),v=c.x-l,m=c.y-h,c.set(v*r-m*f+l,v*f+m*r+h),v=p.x-l,m=p.y-h,p.set(v*r-m*f+l,v*f+m*r+h)};o.exports=T},85769:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(75512),u=e(70015),l=new d({Extends:u,initialize:function(n,r,f,a,c,p,v,m,y,E){p===void 0&&(p=16777215),v===void 0&&(v=1),m===void 0&&(m=0),y===void 0&&(y=0),E===void 0&&(E=0),u.call(this,n,r,f),this.vx=0,this.vy=0,this.vz=0,this.nx=m,this.ny=y,this.nz=E,this.u=a,this.v=c,this.color=p,this.alpha=v,this.tx=0,this.ty=0,this.ta=0,this.tu=a,this.tv=c},setUVs:function(h,n){return this.u=h,this.v=n,this.tu=h,this.tv=n,this},scrollUV:function(h,n){return this.tu+=h,this.tv+=n,this},scaleUV:function(h,n){return this.tu=this.u*h,this.tv=this.v*n,this},transformCoordinatesLocal:function(h,n,r,f){var a=this.x,c=this.y,p=this.z,v=h.val,m=a*v[0]+c*v[4]+p*v[8]+v[12],y=a*v[1]+c*v[5]+p*v[9]+v[13],E=a*v[2]+c*v[6]+p*v[10]+v[14],P=a*v[3]+c*v[7]+p*v[11]+v[15];this.vx=m/P*n,this.vy=-(y/P)*r,f<=0?this.vz=E/P:this.vz=-(E/P)},resize:function(h,n,r,f,a,c){return this.x=h,this.y=n,this.vx=this.x*r,this.vy=-this.y*f,this.vz=0,a<.5?this.vx+=r*(.5-a):a>.5&&(this.vx-=r*(a-.5)),c<.5?this.vy+=f*(.5-c):c>.5&&(this.vy-=f*(c-.5)),this},update:function(h,n,r,f,a,c,p,v){var m=this.vx*h+this.vy*r+a,y=this.vx*n+this.vy*f+c;return p&&(m=Math.round(m),y=Math.round(y)),this.tx=m,this.ty=y,this.ta=this.alpha*v,this},load:function(h,n,r,f,a){return h[++r]=this.tx,h[++r]=this.ty,h[++r]=this.tu,h[++r]=this.tv,h[++r]=f,h[++r]=a,n[++r]=x.getTintAppendFloatAlpha(this.color,this.ta),r}});o.exports=l},14293:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Face:e(18693),GenerateGridVerts:e(99425),GenerateObjVerts:e(53267),GenerateVerts:e(67623),ParseObj:e(27291),ParseObjMaterial:e(76799),RotateFace:e(15313),Vertex:e(85769)};o.exports=d},77601:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};o.exports=T},38933:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u){return new d(u.x,u.y)};o.exports=x},47103:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x,e.y)};o.exports=T},13625:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x===d.x&&e.y===d.y};o.exports=T},12536:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};o.exports=T},54205:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){if(l===void 0&&(l=new d),!Array.isArray(u))throw new Error("GetCentroid points argument must be an array");var h=u.length;if(h<1)throw new Error("GetCentroid points array must not be empty");if(h===1)l.x=u[0].x,l.y=u[0].y;else{for(var n=0;n<h;n++)l.x+=u[n].x,l.y+=u[n].y;l.x/=h,l.y/=h}return l};o.exports=x},50083:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};o.exports=T},82712:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x*e.x+e.y*e.y};o.exports=T},20052:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,l){l===void 0&&(l=new d);for(var h=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY,a=0;a<u.length;a++){var c=u[a];c.x>h&&(h=c.x),c.x<n&&(n=c.x),c.y>r&&(r=c.y),c.y<f&&(f=c.y)}return l.x=n,l.y=f,l.width=h-n,l.height=r-f,l};o.exports=x},77154:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l,h,n){return h===void 0&&(h=0),n===void 0&&(n=new d),n.x=u.x+(l.x-u.x)*h,n.y=u.y+(l.y-u.y)*h,n};o.exports=x},42397:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.setTo(e.y,e.x)};o.exports=T},59464:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){return l===void 0&&(l=new d),l.setTo(-u.x,-u.y)};o.exports=x},79967:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(52394),u=new d({initialize:function(h,n){h===void 0&&(h=0),n===void 0&&(n=h),this.type=x.POINT,this.x=h,this.y=n},setTo:function(l,h){return l===void 0&&(l=0),h===void 0&&(h=l),this.x=l,this.y=h,this}});o.exports=u},53581:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(82712),u=function(l,h,n){n===void 0&&(n=new d);var r=l.x*h.x+l.y*h.y,f=r/x(h);return f!==0&&(n.x=f*h.x,n.y=f*h.y),n};o.exports=u},50817:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l,h){h===void 0&&(h=new d);var n=u.x*l.x+u.y*l.y;return n!==0&&(h.x=n*l.x,h.y=n*l.y),h};o.exports=x},40525:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50083),x=function(u,l){if(u.x!==0||u.y!==0){var h=d(u);u.x/=h,u.y/=h}return u.x*=l,u.y*=l,u};o.exports=x},63472:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967);d.Ceil=e(77601),d.Clone=e(38933),d.CopyFrom=e(47103),d.Equals=e(13625),d.Floor=e(12536),d.GetCentroid=e(54205),d.GetMagnitude=e(50083),d.GetMagnitudeSq=e(82712),d.GetRectangleFromPoints=e(20052),d.Interpolate=e(77154),d.Invert=e(42397),d.Negative=e(59464),d.Project=e(53581),d.ProjectUnit=e(50817),d.SetMagnitude=e(40525),o.exports=d},19631:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8580),x=function(u){return new d(u.points)};o.exports=x},45604:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=!1,l=-1,h=e.points.length-1;++l<e.points.length;h=l){var n=e.points[l].x,r=e.points[l].y,f=e.points[h].x,a=e.points[h].y;(r<=x&&x<a||a<=x&&x<r)&&d<(f-n)*(x-r)/(a-r)+n&&(u=!u)}return u};o.exports=T},87289:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45604),x=function(u,l){return d(u,l.x,l.y)};o.exports=x},11117:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(N,U,b){b=b||2;var G=U&&U.length,z=G?U[0]*b:N.length,X=e(N,0,z,b,!0),k=[];if(!X||X.next===X.prev)return k;var H,K,Z,J,j,Q,_;if(G&&(X=r(N,U,X,b)),N.length>80*b){H=Z=N[0],K=J=N[1];for(var q=b;q<z;q+=b)j=N[q],Q=N[q+1],j<H&&(H=j),Q<K&&(K=Q),j>Z&&(Z=j),Q>J&&(J=Q);_=Math.max(Z-H,J-K),_=_!==0?32767/_:0}return x(X,k,b,H,K,_,0),k}function e(N,U,b,G,z){var X,k;if(z===$(N,U,b,G)>0)for(X=U;X<b;X+=G)k=V(X,N[X],N[X+1],k);else for(X=b-G;X>=U;X-=G)k=V(X,N[X],N[X+1],k);return k&&A(k,k.next)&&(Y(k),k=k.next),k}function d(N,U){if(!N)return N;U||(U=N);var b=N,G;do if(G=!1,!b.steiner&&(A(b,b.next)||w(b.prev,b,b.next)===0)){if(Y(b),b=U=b.prev,b===b.next)break;G=!0}else b=b.next;while(G||b!==U);return U}function x(N,U,b,G,z,X,k){if(!!N){!k&&X&&v(N,G,z,X);for(var H=N,K,Z;N.prev!==N.next;){if(K=N.prev,Z=N.next,X?l(N,G,z,X):u(N)){U.push(K.i/b|0),U.push(N.i/b|0),U.push(Z.i/b|0),Y(N),N=Z.next,H=Z.next;continue}if(N=Z,N===H){k?k===1?(N=h(d(N),U,b),x(N,U,b,G,z,X,2)):k===2&&n(N,U,b,G,z,X):x(d(N),U,b,G,z,X,1);break}}}}function u(N){var U=N.prev,b=N,G=N.next;if(w(U,b,G)>=0)return!1;for(var z=U.x,X=b.x,k=G.x,H=U.y,K=b.y,Z=G.y,J=z<X?z<k?z:k:X<k?X:k,j=H<K?H<Z?H:Z:K<Z?K:Z,Q=z>X?z>k?z:k:X>k?X:k,_=H>K?H>Z?H:Z:K>Z?K:Z,q=G.next;q!==U;){if(q.x>=J&&q.x<=Q&&q.y>=j&&q.y<=_&&P(z,H,X,K,k,Z,q.x,q.y)&&w(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function l(N,U,b,G){var z=N.prev,X=N,k=N.next;if(w(z,X,k)>=0)return!1;for(var H=z.x,K=X.x,Z=k.x,J=z.y,j=X.y,Q=k.y,_=H<K?H<Z?H:Z:K<Z?K:Z,q=J<j?J<Q?J:Q:j<Q?j:Q,et=H>K?H>Z?H:Z:K>Z?K:Z,at=J>j?J>Q?J:Q:j>Q?j:Q,ot=y(_,q,U,b,G),ht=y(et,at,U,b,G),tt=N.prevZ,rt=N.nextZ;tt&&tt.z>=ot&&rt&&rt.z<=ht;){if(tt.x>=_&&tt.x<=et&&tt.y>=q&&tt.y<=at&&tt!==z&&tt!==k&&P(H,J,K,j,Z,Q,tt.x,tt.y)&&w(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,rt.x>=_&&rt.x<=et&&rt.y>=q&&rt.y<=at&&rt!==z&&rt!==k&&P(H,J,K,j,Z,Q,rt.x,rt.y)&&w(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;tt&&tt.z>=ot;){if(tt.x>=_&&tt.x<=et&&tt.y>=q&&tt.y<=at&&tt!==z&&tt!==k&&P(H,J,K,j,Z,Q,tt.x,tt.y)&&w(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;rt&&rt.z<=ht;){if(rt.x>=_&&rt.x<=et&&rt.y>=q&&rt.y<=at&&rt!==z&&rt!==k&&P(H,J,K,j,Z,Q,rt.x,rt.y)&&w(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function h(N,U,b){var G=N;do{var z=G.prev,X=G.next.next;!A(z,X)&&R(z,G,G.next,X)&&D(z,X)&&D(X,z)&&(U.push(z.i/b|0),U.push(G.i/b|0),U.push(X.i/b|0),Y(G),Y(G.next),G=N=X),G=G.next}while(G!==N);return d(G)}function n(N,U,b,G,z,X){var k=N;do{for(var H=k.next.next;H!==k.prev;){if(k.i!==H.i&&S(k,H)){var K=B(k,H);k=d(k,k.next),K=d(K,K.next),x(k,U,b,G,z,X,0),x(K,U,b,G,z,X,0);return}H=H.next}k=k.next}while(k!==N)}function r(N,U,b,G){var z=[],X,k,H,K,Z;for(X=0,k=U.length;X<k;X++)H=U[X]*G,K=X<k-1?U[X+1]*G:N.length,Z=e(N,H,K,G,!1),Z===Z.next&&(Z.steiner=!0),z.push(E(Z));for(z.sort(f),X=0;X<z.length;X++)b=a(z[X],b);return b}function f(N,U){return N.x-U.x}function a(N,U){var b=c(N,U);if(!b)return U;var G=B(b,N);return d(G,G.next),d(b,b.next)}function c(N,U){var b=U,G=N.x,z=N.y,X=-1/0,k;do{if(z<=b.y&&z>=b.next.y&&b.next.y!==b.y){var H=b.x+(z-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(H<=G&&H>X&&(X=H,k=b.x<b.next.x?b:b.next,H===G))return k}b=b.next}while(b!==U);if(!k)return null;var K=k,Z=k.x,J=k.y,j=1/0,Q;b=k;do G>=b.x&&b.x>=Z&&G!==b.x&&P(z<J?G:X,z,Z,J,z<J?X:G,z,b.x,b.y)&&(Q=Math.abs(z-b.y)/(G-b.x),D(b,N)&&(Q<j||Q===j&&(b.x>k.x||b.x===k.x&&p(k,b)))&&(k=b,j=Q)),b=b.next;while(b!==K);return k}function p(N,U){return w(N.prev,N,U.prev)<0&&w(U.next,N,N.next)<0}function v(N,U,b,G){var z=N;do z.z===0&&(z.z=y(z.x,z.y,U,b,G)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==N);z.prevZ.nextZ=null,z.prevZ=null,m(z)}function m(N){var U,b,G,z,X,k,H,K,Z=1;do{for(b=N,N=null,X=null,k=0;b;){for(k++,G=b,H=0,U=0;U<Z&&(H++,G=G.nextZ,!!G);U++);for(K=Z;H>0||K>0&&G;)H!==0&&(K===0||!G||b.z<=G.z)?(z=b,b=b.nextZ,H--):(z=G,G=G.nextZ,K--),X?X.nextZ=z:N=z,z.prevZ=X,X=z;b=G}X.nextZ=null,Z*=2}while(k>1);return N}function y(N,U,b,G,z){return N=(N-b)*z|0,U=(U-G)*z|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,N|U<<1}function E(N){var U=N,b=N;do(U.x<b.x||U.x===b.x&&U.y<b.y)&&(b=U),U=U.next;while(U!==N);return b}function P(N,U,b,G,z,X,k,H){return(z-k)*(U-H)>=(N-k)*(X-H)&&(N-k)*(G-H)>=(b-k)*(U-H)&&(b-k)*(X-H)>=(z-k)*(G-H)}function S(N,U){return N.next.i!==U.i&&N.prev.i!==U.i&&!L(N,U)&&(D(N,U)&&D(U,N)&&I(N,U)&&(w(N.prev,N,U.prev)||w(N,U.prev,U))||A(N,U)&&w(N.prev,N,N.next)>0&&w(U.prev,U,U.next)>0)}function w(N,U,b){return(U.y-N.y)*(b.x-U.x)-(U.x-N.x)*(b.y-U.y)}function A(N,U){return N.x===U.x&&N.y===U.y}function R(N,U,b,G){var z=F(w(N,U,b)),X=F(w(N,U,G)),k=F(w(b,G,N)),H=F(w(b,G,U));return!!(z!==X&&k!==H||z===0&&O(N,b,U)||X===0&&O(N,G,U)||k===0&&O(b,N,G)||H===0&&O(b,U,G))}function O(N,U,b){return U.x<=Math.max(N.x,b.x)&&U.x>=Math.min(N.x,b.x)&&U.y<=Math.max(N.y,b.y)&&U.y>=Math.min(N.y,b.y)}function F(N){return N>0?1:N<0?-1:0}function L(N,U){var b=N;do{if(b.i!==N.i&&b.next.i!==N.i&&b.i!==U.i&&b.next.i!==U.i&&R(b,b.next,N,U))return!0;b=b.next}while(b!==N);return!1}function D(N,U){return w(N.prev,N,N.next)<0?w(N,U,N.next)>=0&&w(N,N.prev,U)>=0:w(N,U,N.prev)<0||w(N,N.next,U)<0}function I(N,U){var b=N,G=!1,z=(N.x+U.x)/2,X=(N.y+U.y)/2;do b.y>X!=b.next.y>X&&b.next.y!==b.y&&z<(b.next.x-b.x)*(X-b.y)/(b.next.y-b.y)+b.x&&(G=!G),b=b.next;while(b!==N);return G}function B(N,U){var b=new W(N.i,N.x,N.y),G=new W(U.i,U.x,U.y),z=N.next,X=U.prev;return N.next=U,U.prev=N,b.next=z,z.prev=b,G.next=b,b.prev=G,X.next=G,G.prev=X,G}function V(N,U,b,G){var z=new W(N,U,b);return G?(z.next=G.next,z.prev=G,G.next.prev=z,G.next=z):(z.prev=z,z.next=z),z}function Y(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function W(N,U,b){this.i=N,this.x=U,this.y=b,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T.deviation=function(N,U,b,G){var z=U&&U.length,X=z?U[0]*b:N.length,k=Math.abs($(N,0,X,b));if(z)for(var H=0,K=U.length;H<K;H++){var Z=U[H]*b,J=H<K-1?U[H+1]*b:N.length;k-=Math.abs($(N,Z,J,b))}var j=0;for(H=0;H<G.length;H+=3){var Q=G[H]*b,_=G[H+1]*b,q=G[H+2]*b;j+=Math.abs((N[Q]-N[q])*(N[_+1]-N[Q+1])-(N[Q]-N[_])*(N[q+1]-N[Q+1]))}return k===0&&j===0?0:Math.abs((j-k)/k)};function $(N,U,b,G){for(var z=0,X=U,k=b-G;X<b;X+=G)z+=(N[k]-N[X])*(N[X+1]+N[k+1]),k=X;return z}T.flatten=function(N){for(var U=N[0][0].length,b={vertices:[],holes:[],dimensions:U},G=0,z=0;z<N.length;z++){for(var X=0;X<N[z].length;X++)for(var k=0;k<U;k++)b.vertices.push(N[z][X][k]);z>0&&(G+=N[z-1].length,b.holes.push(G))}return b},o.exports=T},14045:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,l){l===void 0&&(l=new d);for(var h=1/0,n=1/0,r=-h,f=-n,a,c=0;c<u.points.length;c++)a=u.points[c],h=Math.min(h,a.x),n=Math.min(n,a.y),r=Math.max(r,a.x),f=Math.max(f,a.y);return l.x=h,l.y=n,l.width=r-h,l.height=f-n,l};o.exports=x},98286:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=[]);for(var x=0;x<e.points.length;x++)d.push(e.points[x].x),d.push(e.points[x].y);return d};o.exports=T},89294:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=e(88829),u=e(5159),l=function(h,n,r,f){f===void 0&&(f=[]);var a=h.points,c=u(h);!n&&r>0&&(n=c/r);for(var p=0;p<n;p++)for(var v=c*(p/n),m=0,y=0;y<a.length;y++){var E=a[y],P=a[(y+1)%a.length],S=new x(E.x,E.y,P.x,P.y),w=d(S);if(v<m||v>m+w){m+=w;continue}var A=S.getPoint((v-m)/w);f.push(A);break}return f};o.exports=l},5159:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=e(88829),u=function(l){for(var h=l.points,n=0,r=0;r<h.length;r++){var f=h[r],a=h[(r+1)%h.length],c=new x(f.x,f.y,a.x,a.y);n+=d(c)}return n};o.exports=u},8580:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(45604),u=e(89294),l=e(52394),h=new d({initialize:function(r){this.type=l.POLYGON,this.area=0,this.points=[],r&&this.setTo(r)},contains:function(n,r){return x(this,n,r)},setTo:function(n){if(this.area=0,this.points=[],typeof n=="string"&&(n=n.split(" ")),!Array.isArray(n))return this;for(var r,f=Number.MAX_VALUE,a=0;a<n.length;a++)r={x:0,y:0},typeof n[a]=="number"||typeof n[a]=="string"?(r.x=parseFloat(n[a]),r.y=parseFloat(n[a+1]),a++):Array.isArray(n[a])?(r.x=n[a][0],r.y=n[a][1]):(r.x=n[a].x,r.y=n[a].y),this.points.push(r),r.y<f&&(f=r.y);return this.calculateArea(f),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var n=0,r,f,a=0;a<this.points.length-1;a++)r=this.points[a],f=this.points[a+1],n+=(f.x-r.x)*(r.y+f.y);return r=this.points[0],f=this.points[this.points.length-1],n+=(r.x-f.x)*(f.y+r.y),this.area=-n*.5,this.area},getPoints:function(n,r,f){return u(this,n,r,f)}});o.exports=h},32244:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.points.reverse(),e};o.exports=T},95874:o=>{function T(h,n){var r=h.x-n.x,f=h.y-n.y;return r*r+f*f}function e(h,n,r){var f=n.x,a=n.y,c=r.x-f,p=r.y-a;if(c!==0||p!==0){var v=((h.x-f)*c+(h.y-a)*p)/(c*c+p*p);v>1?(f=r.x,a=r.y):v>0&&(f+=c*v,a+=p*v)}return c=h.x-f,p=h.y-a,c*c+p*p}function d(h,n){for(var r=h[0],f=[r],a,c=1,p=h.length;c<p;c++)a=h[c],T(a,r)>n&&(f.push(a),r=a);return r!==a&&f.push(a),f}function x(h,n,r,f,a){for(var c=f,p,v=n+1;v<r;v++){var m=e(h[v],h[n],h[r]);m>c&&(p=v,c=m)}c>f&&(p-n>1&&x(h,n,p,f,a),a.push(h[p]),r-p>1&&x(h,p,r,f,a))}function u(h,n){var r=h.length-1,f=[h[0]];return x(h,0,r,n,f),f.push(h[r]),f}var l=function(h,n,r){n===void 0&&(n=1),r===void 0&&(r=!1);var f=h.points;if(f.length>2){var a=n*n;r||(f=d(f,a)),h.setTo(u(f,a))}return h};o.exports=l},18974:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(d,x){return d[0]=x[0],d[1]=x[1],d},e=function(d){var x,u=[],l=d.points;for(x=0;x<l.length;x++)u.push([l[x].x,l[x].y]);var h=[];for(u.length>0&&h.push(T([0,0],u[0])),x=0;x<u.length-1;x++){var n=u[x],r=u[x+1],f=n[0],a=n[1],c=r[0],p=r[1];h.push([.85*f+.15*c,.85*a+.15*p]),h.push([.15*f+.85*c,.15*a+.85*p])}return u.length>1&&h.push(T([0,0],u[u.length-1])),d.setTo(h)};o.exports=e},23490:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){for(var u=e.points,l=0;l<u.length;l++)u[l].x+=d,u[l].y+=x;return e};o.exports=T},44359:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8580);d.Clone=e(19631),d.Contains=e(45604),d.ContainsPoint=e(87289),d.Earcut=e(11117),d.GetAABB=e(14045),d.GetNumberArray=e(98286),d.GetPoints=e(89294),d.Perimeter=e(5159),d.Reverse=e(32244),d.Simplify=e(95874),d.Smooth=e(18974),d.Translate=e(23490),o.exports=d},1653:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.width*e.height};o.exports=T},33943:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};o.exports=T},58662:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};o.exports=T},79993:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x=d-e.width/2,e.y=x-e.height/2,e};o.exports=T},81572:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u){return new d(u.x,u.y,u.width,u.height)};o.exports=x},94287:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.width<=0||e.height<=0?!1:e.x<=d&&e.x+e.width>=d&&e.y<=x&&e.y+e.height>=x};o.exports=T},28687:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94287),x=function(u,l){return d(u,l.x,l.y)};o.exports=x},73222:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.width*d.height>e.width*e.height?!1:d.x>e.x&&d.x<e.right&&d.right>e.x&&d.right<e.right&&d.y>e.y&&d.y<e.bottom&&d.bottom>e.y&&d.bottom<e.bottom};o.exports=T},29538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x,e.y,e.width,e.height)};o.exports=T},87279:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=[]),d.push({x:e.x,y:e.y}),d.push({x:e.right,y:e.y}),d.push({x:e.right,y:e.bottom}),d.push({x:e.x,y:e.bottom}),d};o.exports=T},19989:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x===d.x&&e.y===d.y&&e.width===d.width&&e.height===d.height};o.exports=T},92628:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6700),x=function(u,l){var h=d(u);return h<d(l)?u.setSize(l.height*h,l.height):u.setSize(l.width,l.width/h),u.setPosition(l.centerX-u.width/2,l.centerY-u.height/2)};o.exports=x},85028:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6700),x=function(u,l){var h=d(u);return h>d(l)?u.setSize(l.height*h,l.height):u.setSize(l.width,l.width/h),u.setPosition(l.centerX-u.width/2,l.centerY-u.height/2)};o.exports=x},71356:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};o.exports=T},21687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};o.exports=T},80222:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(83392),u=function(l,h){if(h===void 0&&(h=new d),l.length===0)return h;for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,f=x.MIN_SAFE_INTEGER,a=x.MIN_SAFE_INTEGER,c,p,v,m=0;m<l.length;m++)c=l[m],Array.isArray(c)?(p=c[0],v=c[1]):(p=c.x,v=c.y),n=Math.min(n,p),r=Math.min(r,v),f=Math.max(f,p),a=Math.max(a,v);return h.x=n,h.y=r,h.width=f-n,h.height=a-r,h};o.exports=u},75785:(o,T,e)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,l,h,n,r){return r===void 0&&(r=new d),r.setTo(Math.min(u,h),Math.min(l,n),Math.abs(u-h),Math.abs(l-n))};o.exports=x},6700:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.height===0?NaN:e.width/e.height};o.exports=T},35242:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){return l===void 0&&(l=new d),l.x=u.centerX,l.y=u.centerY,l};o.exports=x},47698:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85876),x=e(79967),u=function(l,h,n){if(n===void 0&&(n=new x),h<=0||h>=1)return n.x=l.x,n.y=l.y,n;var r=d(l)*h;return h>.5?(r-=l.width+l.height,r<=l.width?(n.x=l.right-r,n.y=l.bottom):(n.x=l.x,n.y=l.bottom-(r-l.width))):r<=l.width?(n.x=l.x+r,n.y=l.y):(n.x=l.right,n.y=l.y+(r-l.width)),n};o.exports=u},54932:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47698),x=e(85876),u=function(l,h,n,r){r===void 0&&(r=[]),!h&&n>0&&(h=x(l)/n);for(var f=0;f<h;f++){var a=f/h;r.push(d(l,a))}return r};o.exports=u},31591:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){return l===void 0&&(l=new d),l.x=u.width,l.y=u.height,l};o.exports=x},7782:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79993),x=function(u,l,h){var n=u.centerX,r=u.centerY;return u.setSize(u.width+l*2,u.height+h*2),d(u,n,r)};o.exports=x},66217:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(90205),u=function(l,h,n){return n===void 0&&(n=new d),x(l,h)?(n.x=Math.max(l.x,h.x),n.y=Math.max(l.y,h.y),n.width=Math.min(l.right,h.right)-n.x,n.height=Math.min(l.bottom,h.bottom)-n.y):n.setEmpty(),n};o.exports=u},40053:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(85876),x=e(79967),u=function(l,h,n,r){if(r===void 0&&(r=[]),!h&&!n)return r;h?n=Math.round(d(l)/h):h=d(l)/n;for(var f=l.x,a=l.y,c=0,p=0;p<n;p++)switch(r.push(new x(f,a)),c){case 0:f+=h,f>=l.right&&(c=1,a+=f-l.right,f=l.right);break;case 1:a+=h,a>=l.bottom&&(c=2,f-=a-l.bottom,a=l.bottom);break;case 2:f-=h,f<=l.left&&(c=3,a-=l.left-f,f=l.left);break;case 3:a-=h,a<=l.top&&(c=0,a=l.top);break}return r};o.exports=u},86673:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){for(var x=e.x,u=e.right,l=e.y,h=e.bottom,n=0;n<d.length;n++)x=Math.min(x,d[n].x),u=Math.max(u,d[n].x),l=Math.min(l,d[n].y),h=Math.max(h,d[n].y);return e.x=x,e.y=l,e.width=u-x,e.height=h-l,e};o.exports=T},14655:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=Math.min(e.x,d.x),u=Math.max(e.right,d.right);e.x=x,e.width=u-x;var l=Math.min(e.y,d.y),h=Math.max(e.bottom,d.bottom);return e.y=l,e.height=h-l,e};o.exports=T},44755:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=Math.min(e.x,d),l=Math.max(e.right,d);e.x=u,e.width=l-u;var h=Math.min(e.y,x),n=Math.max(e.bottom,x);return e.y=h,e.height=n-h,e};o.exports=T},74466:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x+=d,e.y+=x,e};o.exports=T},55946:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x+=d.x,e.y+=d.y,e};o.exports=T},97474:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x<d.right&&e.right>d.x&&e.y<d.bottom&&e.bottom>d.y};o.exports=T},85876:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 2*(e.width+e.height)};o.exports=T},20243:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(75606),u=function(l,h,n){n===void 0&&(n=new d),h=x(h);var r=Math.sin(h),f=Math.cos(h),a=f>0?l.width/2:l.width/-2,c=r>0?l.height/2:l.height/-2;return Math.abs(a*r)<Math.abs(c*f)?c=a*r/f:a=c*f/r,n.x=a+l.centerX,n.y=c+l.centerY,n};o.exports=u},30001:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){return l===void 0&&(l=new d),l.x=u.x+Math.random()*u.width,l.y=u.y+Math.random()*u.height,l};o.exports=x},97691:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),x=e(73222),u=e(79967),l=function(h,n,r){if(r===void 0&&(r=new u),x(h,n))switch(d(0,3)){case 0:r.x=h.x+Math.random()*(n.right-h.x),r.y=h.y+Math.random()*(n.top-h.y);break;case 1:r.x=n.x+Math.random()*(h.right-n.x),r.y=n.bottom+Math.random()*(h.bottom-n.bottom);break;case 2:r.x=h.x+Math.random()*(n.x-h.x),r.y=n.y+Math.random()*(h.bottom-n.y);break;case 3:r.x=n.right+Math.random()*(h.right-n.right),r.y=h.y+Math.random()*(n.bottom-h.y);break}return r};o.exports=l},74118:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(94287),u=e(47698),l=e(54932),h=e(52394),n=e(88829),r=e(30001),f=new d({initialize:function(c,p,v,m){c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),this.type=h.RECTANGLE,this.x=c,this.y=p,this.width=v,this.height=m},contains:function(a,c){return x(this,a,c)},getPoint:function(a,c){return u(this,a,c)},getPoints:function(a,c,p){return l(this,a,c,p)},getRandomPoint:function(a){return r(this,a)},setTo:function(a,c,p,v){return this.x=a,this.y=c,this.width=p,this.height=v,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(a,c){return c===void 0&&(c=a),this.x=a,this.y=c,this},setSize:function(a,c){return c===void 0&&(c=a),this.width=a,this.height=c,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(a){return a===void 0&&(a=new n),a.setTo(this.x,this.y,this.right,this.y),a},getLineB:function(a){return a===void 0&&(a=new n),a.setTo(this.right,this.y,this.right,this.bottom),a},getLineC:function(a){return a===void 0&&(a=new n),a.setTo(this.right,this.bottom,this.x,this.bottom),a},getLineD:function(a){return a===void 0&&(a=new n),a.setTo(this.x,this.bottom,this.x,this.y),a},left:{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}},right:{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}},top:{get:function(){return this.y},set:function(a){a>=this.bottom?this.height=0:this.height=this.bottom-a,this.y=a}},bottom:{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(a){this.x=a-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(a){this.y=a-this.height/2}}});o.exports=f},51828:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.width===d.width&&e.height===d.height};o.exports=T},5691:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=d),e.width*=d,e.height*=x,e};o.exports=T},58795:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=function(u,l,h){h===void 0&&(h=new d);var n=Math.min(u.x,l.x),r=Math.min(u.y,l.y),f=Math.max(u.right,l.right)-n,a=Math.max(u.bottom,l.bottom)-r;return h.setTo(n,r,f,a)};o.exports=x},66658:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118);d.Area=e(1653),d.Ceil=e(33943),d.CeilAll=e(58662),d.CenterOn=e(79993),d.Clone=e(81572),d.Contains=e(94287),d.ContainsPoint=e(28687),d.ContainsRect=e(73222),d.CopyFrom=e(29538),d.Decompose=e(87279),d.Equals=e(19989),d.FitInside=e(92628),d.FitOutside=e(85028),d.Floor=e(71356),d.FloorAll=e(21687),d.FromPoints=e(80222),d.FromXY=e(75785),d.GetAspectRatio=e(6700),d.GetCenter=e(35242),d.GetPoint=e(47698),d.GetPoints=e(54932),d.GetSize=e(31591),d.Inflate=e(7782),d.Intersection=e(66217),d.MarchingAnts=e(40053),d.MergePoints=e(86673),d.MergeRect=e(14655),d.MergeXY=e(44755),d.Offset=e(74466),d.OffsetPoint=e(55946),d.Overlaps=e(97474),d.Perimeter=e(85876),d.PerimeterPoint=e(20243),d.Random=e(30001),d.RandomOutside=e(97691),d.SameDimensions=e(51828),d.Scale=e(5691),d.Union=e(58795),o.exports=d},19108:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=e.x1,x=e.y1,u=e.x2,l=e.y2,h=e.x3,n=e.y3;return Math.abs(((h-d)*(l-x)-(u-d)*(n-x))/2)};o.exports=T},41199:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),x=function(u,l,h){var n=h*(Math.sqrt(3)/2),r=u,f=l,a=u+h/2,c=l+n,p=u-h/2,v=l+n;return new d(r,f,a,c,p,v)};o.exports=x},88730:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(11117),x=e(66349),u=function(l,h,n,r,f){h===void 0&&(h=null),n===void 0&&(n=1),r===void 0&&(r=1),f===void 0&&(f=[]);for(var a=d(l,h),c,p,v,m,y,E,P,S,w,A=0;A<a.length;A+=3)c=a[A],p=a[A+1],v=a[A+2],m=l[c*2]*n,y=l[c*2+1]*r,E=l[p*2]*n,P=l[p*2+1]*r,S=l[v*2]*n,w=l[v*2+1]*r,f.push(new x(m,y,E,P,S,w));return f};o.exports=u},3635:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),x=function(u,l,h,n){n===void 0&&(n=h);var r=u,f=l,a=u,c=l-n,p=u+h,v=l;return new d(r,f,a,c,p,v)};o.exports=x},1882:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56595),x=e(9640),u=function(l,h,n,r){r===void 0&&(r=d);var f=r(l),a=h-f.x,c=n-f.y;return x(l,a,c)};o.exports=u},56595:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){return l===void 0&&(l=new d),l.x=(u.x1+u.x2+u.x3)/3,l.y=(u.y1+u.y2+u.y3)/3,l};o.exports=x},91835:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736);function x(l,h,n,r){return l*r-h*n}var u=function(l,h){h===void 0&&(h=new d);var n=l.x3,r=l.y3,f=l.x1-n,a=l.y1-r,c=l.x2-n,p=l.y2-r,v=2*x(f,a,c,p),m=x(a,f*f+a*a,p,c*c+p*p),y=x(f,f*f+a*a,c,c*c+p*p);return h.x=n-m/v,h.y=r+y/v,h};o.exports=u},97073:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),x=function(u,l){l===void 0&&(l=new d);var h=u.x1,n=u.y1,r=u.x2,f=u.y2,a=u.x3,c=u.y3,p=r-h,v=f-n,m=a-h,y=c-n,E=p*(h+r)+v*(n+f),P=m*(h+a)+y*(n+c),S=2*(p*(c-f)-v*(a-r)),w,A;if(Math.abs(S)<1e-6){var R=Math.min(h,r,a),O=Math.min(n,f,c);w=(Math.max(h,r,a)-R)*.5,A=(Math.max(n,f,c)-O)*.5,l.x=R+w,l.y=O+A,l.radius=Math.sqrt(w*w+A*A)}else l.x=(y*E-v*P)/S,l.y=(p*P-m*E)/S,w=l.x-h,A=l.y-n,l.radius=Math.sqrt(w*w+A*A);return l};o.exports=x},75974:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349),x=function(u){return new d(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)};o.exports=x},60689:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.x3-e.x1,l=e.y3-e.y1,h=e.x2-e.x1,n=e.y2-e.y1,r=d-e.x1,f=x-e.y1,a=u*u+l*l,c=u*h+l*n,p=u*r+l*f,v=h*h+n*n,m=h*r+n*f,y=a*v-c*c,E=y===0?0:1/y,P=(v*p-c*m)*E,S=(a*m-c*p)*E;return P>=0&&S>=0&&P+S<1};o.exports=T},86875:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x===void 0&&(x=!1),u===void 0&&(u=[]);for(var l=e.x3-e.x1,h=e.y3-e.y1,n=e.x2-e.x1,r=e.y2-e.y1,f=l*l+h*h,a=l*n+h*r,c=n*n+r*r,p=f*c-a*a,v=p===0?0:1/p,m,y,E,P,S,w,A=e.x1,R=e.y1,O=0;O<d.length&&(E=d[O].x-A,P=d[O].y-R,S=l*E+h*P,w=n*E+r*P,m=(c*S-a*w)*v,y=(f*w-a*S)*v,!(m>=0&&y>=0&&m+y<1&&(u.push({x:d[O].x,y:d[O].y}),x)));O++);return u};o.exports=T},51532:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60689),x=function(u,l){return d(u,l.x,l.y)};o.exports=x},42538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};o.exports=T},18680:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=[]),d.push({x:e.x1,y:e.y1}),d.push({x:e.x2,y:e.y2}),d.push({x:e.x3,y:e.y3}),d};o.exports=T},29977:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.x1===d.x1&&e.y1===d.y1&&e.x2===d.x2&&e.y2===d.y2&&e.x3===d.x3&&e.y3===d.y3};o.exports=T},56088:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=e(16028),u=function(l,h,n){n===void 0&&(n=new d);var r=l.getLineA(),f=l.getLineB(),a=l.getLineC();if(h<=0||h>=1)return n.x=r.x1,n.y=r.y1,n;var c=x(r),p=x(f),v=x(a),m=c+p+v,y=m*h,E=0;return y<c?(E=y/c,n.x=r.x1+(r.x2-r.x1)*E,n.y=r.y1+(r.y2-r.y1)*E):y>c+p?(y-=c+p,E=y/v,n.x=a.x1+(a.x2-a.x1)*E,n.y=a.y1+(a.y2-a.y1)*E):(y-=c,E=y/p,n.x=f.x1+(f.x2-f.x1)*E,n.y=f.y1+(f.y2-f.y1)*E),n};o.exports=u},24402:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=e(79967),u=function(l,h,n,r){r===void 0&&(r=[]);var f=l.getLineA(),a=l.getLineB(),c=l.getLineC(),p=d(f),v=d(a),m=d(c),y=p+v+m;!h&&n>0&&(h=y/n);for(var E=0;E<h;E++){var P=y*(E/h),S=0,w=new x;P<p?(S=P/p,w.x=f.x1+(f.x2-f.x1)*S,w.y=f.y1+(f.y2-f.y1)*S):P>p+v?(P-=p+v,S=P/m,w.x=c.x1+(c.x2-c.x1)*S,w.y=c.y1+(c.y2-c.y1)*S):(P-=p,S=P/v,w.x=a.x1+(a.x2-a.x1)*S,w.y=a.y1+(a.y2-a.y1)*S),r.push(w)}return r};o.exports=u},83648:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967);function x(l,h,n,r){var f=l-n,a=h-r,c=f*f+a*a;return Math.sqrt(c)}var u=function(l,h){h===void 0&&(h=new d);var n=l.x1,r=l.y1,f=l.x2,a=l.y2,c=l.x3,p=l.y3,v=x(c,p,f,a),m=x(n,r,c,p),y=x(f,a,n,r),E=v+m+y;return h.x=(n*v+f*m+c*y)/E,h.y=(r*v+a*m+p*y)/E,h};o.exports=u},9640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e.x1+=d,e.y1+=x,e.x2+=d,e.y2+=x,e.x3+=d,e.y3+=x,e};o.exports=T},95290:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16028),x=function(u){var l=u.getLineA(),h=u.getLineB(),n=u.getLineC();return d(l)+d(h)+d(n)};o.exports=x},99761:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(79967),x=function(u,l){l===void 0&&(l=new d);var h=u.x2-u.x1,n=u.y2-u.y1,r=u.x3-u.x1,f=u.y3-u.y1,a=Math.random(),c=Math.random();return a+c>=1&&(a=1-a,c=1-c),l.x=u.x1+(h*a+r*c),l.y=u.y1+(n*a+f*c),l};o.exports=x},21934:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19211),x=e(83648),u=function(l,h){var n=x(l);return d(l,n.x,n.y,h)};o.exports=u},68454:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19211),x=function(u,l,h){return d(u,l.x,l.y,h)};o.exports=x},19211:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=Math.cos(u),h=Math.sin(u),n=e.x1-d,r=e.y1-x;return e.x1=n*l-r*h+d,e.y1=n*h+r*l+x,n=e.x2-d,r=e.y2-x,e.x2=n*l-r*h+d,e.y2=n*h+r*l+x,n=e.x3-d,r=e.y3-x,e.x3=n*l-r*h+d,e.y3=n*h+r*l+x,e};o.exports=T},66349:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(60689),u=e(56088),l=e(24402),h=e(52394),n=e(88829),r=e(99761),f=new d({initialize:function(c,p,v,m,y,E){c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),E===void 0&&(E=0),this.type=h.TRIANGLE,this.x1=c,this.y1=p,this.x2=v,this.y2=m,this.x3=y,this.y3=E},contains:function(a,c){return x(this,a,c)},getPoint:function(a,c){return u(this,a,c)},getPoints:function(a,c,p){return l(this,a,c,p)},getRandomPoint:function(a){return r(this,a)},setTo:function(a,c,p,v,m,y){return a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=0),y===void 0&&(y=0),this.x1=a,this.y1=c,this.x2=p,this.y2=v,this.x3=m,this.y3=y,this},getLineA:function(a){return a===void 0&&(a=new n),a.setTo(this.x1,this.y1,this.x2,this.y2),a},getLineB:function(a){return a===void 0&&(a=new n),a.setTo(this.x2,this.y2,this.x3,this.y3),a},getLineC:function(a){return a===void 0&&(a=new n),a.setTo(this.x3,this.y3,this.x1,this.y1),a},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(a){var c=0;this.x1<=this.x2&&this.x1<=this.x3?c=this.x1-a:this.x2<=this.x1&&this.x2<=this.x3?c=this.x2-a:c=this.x3-a,this.x1-=c,this.x2-=c,this.x3-=c}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(a){var c=0;this.x1>=this.x2&&this.x1>=this.x3?c=this.x1-a:this.x2>=this.x1&&this.x2>=this.x3?c=this.x2-a:c=this.x3-a,this.x1-=c,this.x2-=c,this.x3-=c}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(a){var c=0;this.y1<=this.y2&&this.y1<=this.y3?c=this.y1-a:this.y2<=this.y1&&this.y2<=this.y3?c=this.y2-a:c=this.y3-a,this.y1-=c,this.y2-=c,this.y3-=c}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(a){var c=0;this.y1>=this.y2&&this.y1>=this.y3?c=this.y1-a:this.y2>=this.y1&&this.y2>=this.y3?c=this.y2-a:c=this.y3-a,this.y1-=c,this.y2-=c,this.y3-=c}}});o.exports=f},87619:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66349);d.Area=e(19108),d.BuildEquilateral=e(41199),d.BuildFromPolygon=e(88730),d.BuildRight=e(3635),d.CenterOn=e(1882),d.Centroid=e(56595),d.CircumCenter=e(91835),d.CircumCircle=e(97073),d.Clone=e(75974),d.Contains=e(60689),d.ContainsArray=e(86875),d.ContainsPoint=e(51532),d.CopyFrom=e(42538),d.Decompose=e(18680),d.Equals=e(29977),d.GetPoint=e(56088),d.GetPoints=e(24402),d.InCenter=e(83648),d.Perimeter=e(95290),d.Offset=e(9640),d.Random=e(99761),d.Rotate=e(21934),d.RotateAroundPoint=e(68454),d.RotateAroundXY=e(19211),o.exports=d},27395:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return{gameObject:e,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:d,hitAreaCallback:x,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};o.exports=T},18104:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return function(x,u,l,h){var n=e.getPixelAlpha(u,l,h.texture.key,h.frame.name);return n&&n>=d}};o.exports=T},69898:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72687),u=e(6659),l=e(33963),h=e(97081),n=e(71064),r=e(7905),f=e(40398),a=e(37579),c=e(69360),p=e(64462),v=new d({initialize:function(y,E){this.game=y,this.scaleManager,this.canvas,this.config=E,this.enabled=!0,this.events=new u,this.isOver=!0,this.defaultCursor="",this.keyboard=E.inputKeyboard?new n(this):null,this.mouse=E.inputMouse?new r(this):null,this.touch=E.inputTouch?new a(this):null,this.pointers=[],this.pointersTotal=E.inputActivePointers,E.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var P=0;P<=this.pointersTotal;P++){var S=new f(this,P);S.smoothFactor=E.inputSmoothFactor,this.pointers.push(S)}this.mousePointer=E.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new c,this._tempMatrix2=new c,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],y.events.once(h.BOOT,this.boot,this)},boot:function(){var m=this.game,y=m.events;this.canvas=m.canvas,this.scaleManager=m.scale,this.events.emit(l.MANAGER_BOOT),y.on(h.PRE_RENDER,this.preRender,this),y.once(h.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(l.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(l.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,y=this.game.loop.delta,E=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(l.MANAGER_UPDATE);for(var P=0;P<E.length;P++){var S=E[P];if(S.sys.input&&S.sys.input.updatePoll(m,y)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var y=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var E=0;E<m;E++){var P=this.pointers.length,S=new f(this,P);S.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(S),this.pointersTotal++,y.push(S)}return y},updateInputPlugins:function(m,y){var E=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var P=0;P<E.length;P++){var S=E[P];if(S.sys.input){var w=S.sys.input.update(m,y);if(w&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(m){for(var y=this.pointers,E=[],P=0;P<m.changedTouches.length;P++)for(var S=m.changedTouches[P],w=1;w<this.pointersTotal;w++){var A=y[w];if(!A.active){A.touchstart(S,m),this.activePointer=A,E.push(A);break}}this.updateInputPlugins(x.TOUCH_START,E)},onTouchMove:function(m){for(var y=this.pointers,E=[],P=0;P<m.changedTouches.length;P++)for(var S=m.changedTouches[P],w=1;w<this.pointersTotal;w++){var A=y[w];if(A.active&&A.identifier===S.identifier){var R=document.elementFromPoint(S.pageX,S.pageY),O=R===this.canvas;!this.isOver&&O?this.setCanvasOver(m):this.isOver&&!O&&this.setCanvasOut(m),this.isOver&&(A.touchmove(S,m),this.activePointer=A,E.push(A));break}}this.updateInputPlugins(x.TOUCH_MOVE,E)},onTouchEnd:function(m){for(var y=this.pointers,E=[],P=0;P<m.changedTouches.length;P++)for(var S=m.changedTouches[P],w=1;w<this.pointersTotal;w++){var A=y[w];if(A.active&&A.identifier===S.identifier){A.touchend(S,m),E.push(A);break}}this.updateInputPlugins(x.TOUCH_END,E)},onTouchCancel:function(m){for(var y=this.pointers,E=[],P=0;P<m.changedTouches.length;P++)for(var S=m.changedTouches[P],w=1;w<this.pointersTotal;w++){var A=y[w];if(A.active&&A.identifier===S.identifier){A.touchcancel(S,m),E.push(A);break}}this.updateInputPlugins(x.TOUCH_CANCEL,E)},onMouseDown:function(m){var y=this.mousePointer;y.down(m),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(x.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var y=this.mousePointer;y.move(m),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(x.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var y=this.mousePointer;y.up(m),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(x.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var y=this.mousePointer;y.wheel(m),this.activePointer=y,this.updateInputPlugins(x.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var y=this.mouse.locked;this.mousePointer.locked=y,this.events.emit(l.POINTERLOCK_CHANGE,m,y)},inputCandidate:function(m,y){var E=m.input;if(!E||!E.enabled||!m.willRender(y))return!1;var P=!0,S=m.parentContainer;if(S)do{if(!S.willRender(y)){P=!1;break}S=S.parentContainer}while(S);return P},hitTest:function(m,y,E,P){P===void 0&&(P=this._tempHitTest);var S=this._tempPoint,w=E.scrollX,A=E.scrollY;P.length=0;var R=m.x,O=m.y;E.getWorldPoint(R,O,S),m.worldX=S.x,m.worldY=S.y;for(var F={x:0,y:0},L=this._tempMatrix,D=this._tempMatrix2,I=0;I<y.length;I++){var B=y[I];if(!!this.inputCandidate(B,E)){var V=S.x+w*B.scrollFactorX-w,Y=S.y+A*B.scrollFactorY-A;B.parentContainer?(B.getWorldTransformMatrix(L,D),L.applyInverse(V,Y,F)):p(V,Y,B.x,B.y,B.rotation,B.scaleX,B.scaleY,F),this.pointWithinHitArea(B,F.x,F.y)&&P.push(B)}}return P},pointWithinHitArea:function(m,y,E){y+=m.displayOriginX,E+=m.displayOriginY;var P=m.input;return P&&P.hitAreaCallback(P.hitArea,y,E,m)?(P.localX=y,P.localY=E,!0):!1},pointWithinInteractiveObject:function(m,y,E){return m.hitArea?(y+=m.gameObject.displayOriginX,E+=m.gameObject.displayOriginY,m.localX=y,m.localY=E,m.hitAreaCallback(m.hitArea,y,E,m)):!1},transformPointer:function(m,y,E,P){var S=m.position,w=m.prevPosition;w.x=S.x,w.y=S.y;var A=this.scaleManager.transformX(y),R=this.scaleManager.transformY(E),O=m.smoothFactor;!P||O===0?(S.x=A,S.y=R):(S.x=A*O+w.x*(1-O),S.y=R*O+w.y*(1-O))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(h.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});o.exports=v},12499:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(26673),x=e(65650),u=e(56694),l=e(72687),h=e(27395),n=e(18104),r=e(53996),f=e(95669),a=e(72313),c=e(33963),p=e(6659),v=e(72632),m=e(52394),y=e(63399),E=e(42911),P=e(91963),S=e(74118),w=e(94287),A=e(7599),R=e(66349),O=e(60689),F=new u({Extends:p,initialize:function(D){p.call(this),this.scene=D,this.systems=D.sys,this.settings=D.sys.settings,this.manager=D.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,y.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var I={cancelled:!1};this._eventContainer={stopPropagation:function(){I.cancelled=!0}},this._eventData=I,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,D.sys.events.once(A.BOOT,this.boot,this),D.sys.events.on(A.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(A.DESTROY,this.destroy,this),this.pluginEvents.emit(c.BOOT)},start:function(){var L=this.systems.events;L.on(A.TRANSITION_START,this.transitionIn,this),L.on(A.TRANSITION_OUT,this.transitionOut,this),L.on(A.TRANSITION_COMPLETE,this.transitionComplete,this),L.on(A.PRE_UPDATE,this.preUpdate,this),L.once(A.SHUTDOWN,this.shutdown,this),this.manager.events.on(c.GAME_OUT,this.onGameOut,this),this.manager.events.on(c.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(c.START)},onGameOver:function(L){this.isActive()&&this.emit(c.GAME_OVER,L.timeStamp,L)},onGameOut:function(L){this.isActive()&&this.emit(c.GAME_OUT,L.timeStamp,L)},preUpdate:function(){this.pluginEvents.emit(c.PRE_UPDATE);var L=this._pendingRemoval,D=this._pendingInsertion,I=L.length,B=D.length;if(!(I===0&&B===0)){for(var V=this._list,Y=0;Y<I;Y++){var W=L[Y],$=V.indexOf(W);$>-1&&(V.splice($,1),this.clear(W,!0))}this._pendingRemoval.length=0,this._list=V.concat(D.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(L,D){if(!this.isActive())return!1;if(this.pluginEvents.emit(c.UPDATE,L,D),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var I,B=this.manager,V=B.pointers,Y=B.pointersTotal;for(I=0;I<Y;I++)V[I].updateMotion();if(this._list.length===0)return!1;var W=this.pollRate;if(W===-1)return!1;if(W>0)if(this._pollTimer-=D,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var $=!1;for(I=0;I<Y;I++){var N=0,U=V[I];this._tempZones=[],this._temp=this.hitTestPointer(U),this.sortGameObjects(this._temp,U),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),N+=this.processOverOutEvents(U),this.getDragState(U)===2&&this.processDragThresholdEvent(U,L),N>0&&($=!0)}return $},update:function(L,D){if(!this.isActive())return!1;for(var I=D.length,B=!1,V=0;V<I;V++){var Y=0,W=D[V];switch(this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),L){case l.MOUSE_DOWN:Y+=this.processDragDownEvent(W),Y+=this.processDownEvents(W),Y+=this.processOverOutEvents(W);break;case l.MOUSE_UP:Y+=this.processDragUpEvent(W),Y+=this.processUpEvents(W),Y+=this.processOverOutEvents(W);break;case l.TOUCH_START:Y+=this.processDragDownEvent(W),Y+=this.processDownEvents(W),Y+=this.processOverEvents(W);break;case l.TOUCH_END:case l.TOUCH_CANCEL:Y+=this.processDragUpEvent(W),Y+=this.processUpEvents(W),Y+=this.processOutEvents(W);break;case l.MOUSE_MOVE:case l.TOUCH_MOVE:Y+=this.processDragMoveEvent(W),Y+=this.processMoveEvents(W),Y+=this.processOverOutEvents(W);break;case l.MOUSE_WHEEL:Y+=this.processWheelEvent(W);break}Y>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(L,D){D===void 0&&(D=!1),this.disable(L);var I=L.input;I&&(this.removeDebug(L),I.gameObject=void 0,I.target=void 0,I.hitArea=void 0,I.hitAreaCallback=void 0,I.callbackContext=void 0,L.input=null),D||this.queueForRemoval(L);var B=this._draggable.indexOf(L);return B>-1&&this._draggable.splice(B,1),L},disable:function(L){var D=L.input;D&&(D.enabled=!1,D.dragState=0);var I=this._temp,B=this._drag,V=this._over,Y=this.manager,W=I.indexOf(L);W>-1&&I.splice(W,1);for(var $=0;$<Y.pointersTotal;$++)W=B[$].indexOf(L),W>-1&&B[$].splice(W,1),W=V[$].indexOf(L),W>-1&&(V[$].splice(W,1),Y.resetCursor(D));return this},enable:function(L,D,I,B){return B===void 0&&(B=!1),L.input?L.input.enabled=!0:this.setHitArea(L,D,I),L.input&&B&&!L.input.dropZone&&(L.input.dropZone=B),this},hitTestPointer:function(L){for(var D=this.cameras.getCamerasBelowPointer(L),I=0;I<D.length;I++){for(var B=D[I],V=this.manager.hitTest(L,this._list,B),Y=0;Y<V.length;Y++){var W=V[Y];W.input.dropZone&&this._tempZones.push(W)}if(V.length>0)return L.camera=B,V}return L.camera=D[0],[]},processDownEvents:function(L){var D=0,I=this._temp,B=this._eventData,V=this._eventContainer;B.cancelled=!1;for(var Y=!1,W=0;W<I.length;W++){var $=I[W];if(!(!$.input||!$.input.enabled)){if(D++,$.emit(c.GAMEOBJECT_POINTER_DOWN,L,$.input.localX,$.input.localY,V),B.cancelled||!$.input||!$.input.enabled){Y=!0;break}if(this.emit(c.GAMEOBJECT_DOWN,L,$,V),B.cancelled||!$.input){Y=!0;break}}}return!Y&&this.manager&&(L.downElement===this.manager.game.canvas?this.emit(c.POINTER_DOWN,L,I):this.emit(c.POINTER_DOWN_OUTSIDE,L)),D},getDragState:function(L){return this._dragState[L.id]},setDragState:function(L,D){this._dragState[L.id]=D},processDragThresholdEvent:function(L,D){var I=!1,B=this.dragTimeThreshold,V=this.dragDistanceThreshold;if((V>0&&r(L.x,L.y,L.downX,L.downY)>=V||B>0&&D>=L.downTime+B)&&(I=!0),I)return this.setDragState(L,3),this.processDragStartList(L)},processDragStartList:function(L){if(this.getDragState(L)!==3)return 0;for(var D=this._drag[L.id],I=0;I<D.length;I++){var B=D[I],V=B.input;V.dragState=2,V.dragStartX=B.x,V.dragStartY=B.y,V.dragStartXGlobal=L.worldX,V.dragStartYGlobal=L.worldY,V.dragX=V.dragStartXGlobal-V.dragStartX,V.dragY=V.dragStartYGlobal-V.dragStartY,B.emit(c.GAMEOBJECT_DRAG_START,L,V.dragX,V.dragY),this.emit(c.DRAG_START,L,B)}return this.setDragState(L,4),D.length},processDragDownEvent:function(L){var D=this._temp;if(this._draggable.length===0||D.length===0||!L.primaryDown||this.getDragState(L)!==0)return 0;this.setDragState(L,1);for(var I=[],B=0;B<D.length;B++){var V=D[B];V.input.draggable&&V.input.dragState===0&&I.push(V)}return I.length===0?(this.setDragState(L,0),0):(I.length>1&&(this.sortGameObjects(I,L),this.topOnly&&I.splice(1)),this._drag[L.id]=I,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(L,3),this.processDragStartList(L)):(this.setDragState(L,2),0))},processDragMoveEvent:function(L){if(this.getDragState(L)===2&&this.processDragThresholdEvent(L,this.manager.game.loop.now),this.getDragState(L)!==4)return 0;for(var D=this._tempZones,I=this._drag[L.id],B=0;B<I.length;B++){var V=I[B],Y=V.input,W=Y.target;if(W){var $=D.indexOf(W);$===0?(V.emit(c.GAMEOBJECT_DRAG_OVER,L,W),this.emit(c.DRAG_OVER,L,V,W)):$>0?(V.emit(c.GAMEOBJECT_DRAG_LEAVE,L,W),this.emit(c.DRAG_LEAVE,L,V,W),Y.target=D[0],W=Y.target,V.emit(c.GAMEOBJECT_DRAG_ENTER,L,W),this.emit(c.DRAG_ENTER,L,V,W)):(V.emit(c.GAMEOBJECT_DRAG_LEAVE,L,W),this.emit(c.DRAG_LEAVE,L,V,W),D[0]?(Y.target=D[0],W=Y.target,V.emit(c.GAMEOBJECT_DRAG_ENTER,L,W),this.emit(c.DRAG_ENTER,L,V,W)):Y.target=null)}else!W&&D[0]&&(Y.target=D[0],W=Y.target,V.emit(c.GAMEOBJECT_DRAG_ENTER,L,W),this.emit(c.DRAG_ENTER,L,V,W));var N,U;if(!V.parentContainer)N=L.worldX-Y.dragX,U=L.worldY-Y.dragY;else{var b=L.worldX-Y.dragStartXGlobal,G=L.worldY-Y.dragStartYGlobal,z=V.getParentRotation(),X=b*Math.cos(z)+G*Math.sin(z),k=G*Math.cos(z)-b*Math.sin(z);X*=1/V.parentContainer.scaleX,k*=1/V.parentContainer.scaleY,N=X+Y.dragStartX,U=k+Y.dragStartY}V.emit(c.GAMEOBJECT_DRAG,L,N,U),this.emit(c.DRAG,L,V,N,U)}return I.length},processDragUpEvent:function(L){for(var D=this._drag[L.id],I=0;I<D.length;I++){var B=D[I],V=B.input;if(V&&V.dragState===2){V.dragState=0,V.dragX=V.localX-B.displayOriginX,V.dragY=V.localY-B.displayOriginY;var Y=!1,W=V.target;W&&(B.emit(c.GAMEOBJECT_DROP,L,W),this.emit(c.DROP,L,B,W),V.target=null,Y=!0),B.input&&B.input.enabled&&(B.emit(c.GAMEOBJECT_DRAG_END,L,V.dragX,V.dragY,Y),this.emit(c.DRAG_END,L,B,Y))}}return this.setDragState(L,0),D.splice(0),0},processMoveEvents:function(L){var D=0,I=this._temp,B=this._eventData,V=this._eventContainer;B.cancelled=!1;for(var Y=!1,W=0;W<I.length;W++){var $=I[W];if(!(!$.input||!$.input.enabled)){if(D++,$.emit(c.GAMEOBJECT_POINTER_MOVE,L,$.input.localX,$.input.localY,V),B.cancelled||!$.input||!$.input.enabled){Y=!0;break}if(this.emit(c.GAMEOBJECT_MOVE,L,$,V),B.cancelled||!$.input||!$.input.enabled){Y=!0;break}if(this.topOnly)break}}return Y||this.emit(c.POINTER_MOVE,L,I),D},processWheelEvent:function(L){var D=0,I=this._temp,B=this._eventData,V=this._eventContainer;B.cancelled=!1;for(var Y=!1,W=L.deltaX,$=L.deltaY,N=L.deltaZ,U=0;U<I.length;U++){var b=I[U];if(!(!b.input||!b.input.enabled)){if(D++,b.emit(c.GAMEOBJECT_POINTER_WHEEL,L,W,$,N,V),B.cancelled||!b.input||!b.input.enabled){Y=!0;break}if(this.emit(c.GAMEOBJECT_WHEEL,L,b,W,$,N,V),B.cancelled||!b.input||!b.input.enabled){Y=!0;break}}}return Y||this.emit(c.POINTER_WHEEL,L,I,W,$,N),D},processOverEvents:function(L){var D=this._temp,I=0,B=D.length,V=[];if(B>0){var Y=this.manager,W=this._eventData,$=this._eventContainer;W.cancelled=!1;for(var N=!1,U=0;U<B;U++){var b=D[U];if(!(!b.input||!b.input.enabled)){if(V.push(b),Y.setCursor(b.input),b.emit(c.GAMEOBJECT_POINTER_OVER,L,b.input.localX,b.input.localY,$),I++,W.cancelled||!b.input||!b.input.enabled){N=!0;break}if(this.emit(c.GAMEOBJECT_OVER,L,b,$),W.cancelled||!b.input||!b.input.enabled){N=!0;break}}}N||this.emit(c.POINTER_OVER,L,V)}return this._over[L.id]=V,I},processOutEvents:function(L){var D=this._over[L.id],I=0,B=D.length;if(B>0){var V=this.manager,Y=this._eventData,W=this._eventContainer;Y.cancelled=!1;var $=!1;this.sortGameObjects(D,L);for(var N=0;N<B;N++){var U=D[N];if(U=D[N],!(!U.input||!U.input.enabled)){if(V.resetCursor(U.input),U.emit(c.GAMEOBJECT_POINTER_OUT,L,W),I++,Y.cancelled||!U.input||!U.input.enabled){$=!0;break}if(this.emit(c.GAMEOBJECT_OUT,L,U,W),Y.cancelled||!U.input||!U.input.enabled){$=!0;break}$||this.emit(c.POINTER_OUT,L,D)}}this._over[L.id]=[]}return I},processOverOutEvents:function(L){var D=this._temp,I,B,V=[],Y=[],W=[],$=this._over[L.id],N=this._drag[L.id],U=this.manager;for(I=0;I<$.length;I++)B=$[I],D.indexOf(B)===-1&&N.indexOf(B)===-1?V.push(B):W.push(B);for(I=0;I<D.length;I++)B=D[I],$.indexOf(B)===-1&&Y.push(B);var b=V.length,G=0,z=this._eventData,X=this._eventContainer;z.cancelled=!1;var k=!1;if(b>0){for(this.sortGameObjects(V,L),I=0;I<b;I++)if(B=V[I],!(!B.input||!B.input.enabled)){if(U.resetCursor(B.input),B.emit(c.GAMEOBJECT_POINTER_OUT,L,X),G++,z.cancelled||!B.input||!B.input.enabled){k=!0;break}if(this.emit(c.GAMEOBJECT_OUT,L,B,X),z.cancelled||!B.input||!B.input.enabled){k=!0;break}}k||this.emit(c.POINTER_OUT,L,V)}if(b=Y.length,z.cancelled=!1,k=!1,b>0){for(this.sortGameObjects(Y,L),I=0;I<b;I++)if(B=Y[I],!(!B.input||!B.input.enabled)){if(U.setCursor(B.input),B.emit(c.GAMEOBJECT_POINTER_OVER,L,B.input.localX,B.input.localY,X),G++,z.cancelled||!B.input||!B.input.enabled){k=!0;break}if(this.emit(c.GAMEOBJECT_OVER,L,B,X),z.cancelled||!B.input||!B.input.enabled){k=!0;break}}k||this.emit(c.POINTER_OVER,L,Y)}return $=W.concat(Y),this._over[L.id]=this.sortGameObjects($,L),G},processUpEvents:function(L){var D=this._temp,I=this._eventData,B=this._eventContainer;I.cancelled=!1;for(var V=!1,Y=0;Y<D.length;Y++){var W=D[Y];if(!(!W.input||!W.input.enabled)){if(W.emit(c.GAMEOBJECT_POINTER_UP,L,W.input.localX,W.input.localY,B),I.cancelled||!W.input||!W.input.enabled){V=!0;break}if(this.emit(c.GAMEOBJECT_UP,L,W,B),I.cancelled||!W.input||!W.input.enabled){V=!0;break}}}return!V&&this.manager&&(L.upElement===this.manager.game.canvas?this.emit(c.POINTER_UP,L,D):this.emit(c.POINTER_UP_OUTSIDE,L)),D.length},queueForInsertion:function(L){return this._pendingInsertion.indexOf(L)===-1&&this._list.indexOf(L)===-1&&this._pendingInsertion.push(L),this},queueForRemoval:function(L){return this._pendingRemoval.push(L),this},setDraggable:function(L,D){D===void 0&&(D=!0),Array.isArray(L)||(L=[L]);for(var I=0;I<L.length;I++){var B=L[I];B.input.draggable=D;var V=this._draggable.indexOf(B);D&&V===-1?this._draggable.push(B):!D&&V>-1&&this._draggable.splice(V,1)}return this},makePixelPerfect:function(L){L===void 0&&(L=1);var D=this.systems.textures;return n(D,L)},setHitArea:function(L,D,I){if(D===void 0)return this.setHitAreaFromTexture(L);Array.isArray(L)||(L=[L]);var B=!1,V=!1,Y=!1,W=!1,$=!1,N=!0;if(E(D)){var U=D;D=v(U,"hitArea",null),I=v(U,"hitAreaCallback",null),B=v(U,"draggable",!1),V=v(U,"dropZone",!1),Y=v(U,"cursor",!1),W=v(U,"useHandCursor",!1),$=v(U,"pixelPerfect",!1);var b=v(U,"alphaTolerance",1);$&&(D={},I=this.makePixelPerfect(b)),(!D||!I)&&(this.setHitAreaFromTexture(L),N=!1)}else typeof D=="function"&&!I&&(I=D,D={});for(var G=0;G<L.length;G++){var z=L[G];if($&&z.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var X=z.input?z.input:h(z,D,I);X.customHitArea=N,X.dropZone=V,X.cursor=W?"pointer":Y,z.input=X,B&&this.setDraggable(z),this.queueForInsertion(z)}return this},setHitAreaCircle:function(L,D,I,B,V){V===void 0&&(V=x);var Y=new d(D,I,B);return this.setHitArea(L,Y,V)},setHitAreaEllipse:function(L,D,I,B,V,Y){Y===void 0&&(Y=a);var W=new f(D,I,B,V);return this.setHitArea(L,W,Y)},setHitAreaFromTexture:function(L,D){D===void 0&&(D=w),Array.isArray(L)||(L=[L]);for(var I=0;I<L.length;I++){var B=L[I],V=B.frame,Y=0,W=0;if(B.width?(Y=B.width,W=B.height):V&&(Y=V.realWidth,W=V.realHeight),B.type==="Container"&&(Y===0||W===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}Y!==0&&W!==0&&(B.input=h(B,new S(0,0,Y,W),D),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(L,D,I,B,V,Y){Y===void 0&&(Y=w);var W=new S(D,I,B,V);return this.setHitArea(L,W,Y)},setHitAreaTriangle:function(L,D,I,B,V,Y,W,$){$===void 0&&($=O);var N=new R(D,I,B,V,Y,W);return this.setHitArea(L,N,$)},enableDebug:function(L,D){D===void 0&&(D=65280);var I=L.input;if(!I||!I.hitArea)return this;var B=I.hitArea,V=B.type,Y=I.hitAreaDebug,W=this.systems.add,$=this.systems.updateList;Y&&($.remove(Y),Y.destroy(),Y=null);var N=0,U=0;switch(V){case m.CIRCLE:Y=W.arc(0,0,B.radius),N=B.x-B.radius,U=B.y-B.radius;break;case m.ELLIPSE:Y=W.ellipse(0,0,B.width,B.height),N=B.x-B.width/2,U=B.y-B.height/2;break;case m.LINE:Y=W.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case m.POLYGON:Y=W.polygon(0,0,B.points);break;case m.RECTANGLE:Y=W.rectangle(0,0,B.width,B.height),N=B.x,U=B.y;break;case m.TRIANGLE:Y=W.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return Y&&(Y.isFilled=!1,Y.strokeColor=D,Y.preUpdate=function(){Y.setStrokeStyle(1/L.scale,Y.strokeColor),Y.setDisplayOrigin(L.displayOriginX,L.displayOriginY);var b=L.x,G=L.y,z=L.rotation,X=L.scaleX,k=L.scaleY;if(L.parentContainer){var H=L.getWorldTransformMatrix();b=H.tx,G=H.ty,z=H.rotation,X=H.scaleX,k=H.scaleY}Y.setRotation(z),Y.setScale(X,k),Y.setPosition(b+N*X,G+U*k),Y.setScrollFactor(L.scrollFactorX,L.scrollFactorY),Y.setDepth(L.depth)},$.add(Y),I.hitAreaDebug=Y),this},removeDebug:function(L){var D=L.input;if(D&&D.hitAreaDebug){var I=D.hitAreaDebug;this.systems.updateList.remove(I),I.destroy(),D.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(L){return this.pollRate=L,this._pollTimer=0,this},setGlobalTopOnly:function(L){return this.manager.globalTopOnly=L,this},setTopOnly:function(L){return this.topOnly=L,this},sortGameObjects:function(L,D){if(L.length<2||!D.camera)return L;var I=D.camera.renderList;return L.sort(function(B,V){var Y=Math.max(I.indexOf(B),0),W=Math.max(I.indexOf(V),0);return W-Y})},sortDropZones:function(L){return L.length<2?L:(this.scene.sys.depthSort(),L.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(L,D){if(!L.parentContainer&&!D.parentContainer)return this.displayList.getIndex(D)-this.displayList.getIndex(L);if(L.parentContainer===D.parentContainer)return D.parentContainer.getIndex(D)-L.parentContainer.getIndex(L);if(L.parentContainer===D)return-1;if(D.parentContainer===L)return 1;for(var I=L.getIndexList(),B=D.getIndexList(),V=Math.min(I.length,B.length),Y=0;Y<V;Y++){var W=I[Y],$=B[Y];if(W!==$)return $-W}return B.length-I.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(L){return this.manager.addPointer(L)},setDefaultCursor:function(L){return this.manager.setDefaultCursor(L),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(c.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var L=0;L<10;L++)this._drag[L]=[],this._over[L]=[];this.removeAllListeners();var D=this.manager;D.canvas.style.cursor=D.defaultCursor;var I=this.systems.events;I.off(A.TRANSITION_START,this.transitionIn,this),I.off(A.TRANSITION_OUT,this.transitionOut,this),I.off(A.TRANSITION_COMPLETE,this.transitionComplete,this),I.off(A.PRE_UPDATE,this.preUpdate,this),D.events.off(c.GAME_OUT,this.onGameOut,this),D.events.off(c.GAME_OVER,this.onGameOver,this),I.off(A.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var L=this.manager.pointers,D=0;D<L.length;D++)L[D].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(c.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(A.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});P.register("InputPlugin",F,"input"),o.exports=F},63399:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x={},u={};u.register=function(l,h,n,r,f){x[l]={plugin:h,mapping:n,settingsKey:r,configKey:f}},u.getPlugin=function(l){return x[l]},u.install=function(l){var h=l.scene.sys,n=h.settings.input,r=h.game.config;for(var f in x){var a=x[f].plugin,c=x[f].mapping,p=x[f].settingsKey,v=x[f].configKey;d(n,p,r[v])&&(l[c]=new a(l))}},u.remove=function(l){x.hasOwnProperty(l)&&delete x[l]},o.exports=u},40398:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(90447),x=e(56694),u=e(53996),l=e(88456),h=e(44521),n=e(93736),r=e(36580),f=new x({initialize:function(c,p){this.manager=c,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new n,this.prevPosition=new n,this.midPoint=new n(-1,-1),this.velocity=new n,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(a){var c=a.getWorldPoint(this.x,this.y);return this.worldX=c.x,this.worldY=c.y,this},positionToCamera:function(a,c){return a.getWorldPoint(this.x,this.y,c)},updateMotion:function(){var a=this.position.x,c=this.position.y,p=this.midPoint.x,v=this.midPoint.y;if(!(a===p&&c===v)){var m=h(this.motionFactor,p,a),y=h(this.motionFactor,v,c);l(m,a,.1)&&(m=a),l(y,c,.1)&&(y=c),this.midPoint.set(m,y);var E=a-m,P=c-y;this.velocity.set(E,P),this.angle=d(m,y,a,c),this.distance=Math.sqrt(E*E+P*P)}},up:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=a.timeStamp,this.wasTouch=!1)},down:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.button=a.button,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),a.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),r.macOS&&a.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=a.timeStamp),this.wasTouch=!1},move:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.locked&&(this.movementX=a.movementX||a.mozMovementX||a.webkitMovementX||0,this.movementY=a.movementY||a.mozMovementY||a.webkitMovementY||0),this.moveTime=a.timeStamp,this.wasTouch=!1},wheel:function(a){"buttons"in a&&(this.buttons=a.buttons),this.event=a,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.deltaX=a.deltaX,this.deltaY=a.deltaY,this.deltaZ=a.deltaZ,this.wasTouch=!1},touchstart:function(a,c){a.pointerId&&(this.pointerId=a.pointerId),this.identifier=a.identifier,this.target=a.target,this.active=!0,this.buttons=1,this.event=c,this.downElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=c.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(a,c){this.event=c,this.manager.transformPointer(this,a.pageX,a.pageY,!0),this.moveTime=c.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(a,c){this.buttons=0,this.event=c,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(a,c){this.buttons=0,this.event=c,this.upElement=a.target,this.manager.transformPointer(this,a.pageX,a.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(a,c){a===void 0&&(a=10),c===void 0&&(c=[]);for(var p=this.prevPosition.x,v=this.prevPosition.y,m=this.position.x,y=this.position.y,E=0;E<a;E++){var P=1/a*E;c[E]={x:h(P,p,m),y:h(P,v,y)}}return c},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},time:{get:function(){return this.event?this.event.timeStamp:0}}});o.exports=f},72687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};o.exports=T},14874:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},54168:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},526:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},81623:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"},94472:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},9304:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"},34265:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"},50151:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},98134:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"},56773:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectdown"},45824:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},39578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragenter"},72072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},82569:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragleave"},70833:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragover"},81442:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},32936:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drop"},99658:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectmove"},60515:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectout"},55254:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectover"},34782:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"},41769:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"},65588:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"},61640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"},49342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"},82662:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"},13058:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectup"},52426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameobjectwheel"},78072:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameout"},1545:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="gameover"},67137:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},27678:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="process"},22257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},90379:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerlockchange"},88909:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdown"},36548:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerdownoutside"},18483:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointermove"},22355:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerout"},7997:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerover"},66318:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerup"},94812:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pointerupoutside"},37310:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wheel"},24196:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"},27053:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"},29413:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},25165:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},33963:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BOOT:e(14874),DESTROY:e(54168),DRAG_END:e(526),DRAG_ENTER:e(81623),DRAG:e(94472),DRAG_LEAVE:e(9304),DRAG_OVER:e(34265),DRAG_START:e(50151),DROP:e(98134),GAME_OUT:e(78072),GAME_OVER:e(1545),GAMEOBJECT_DOWN:e(56773),GAMEOBJECT_DRAG_END:e(45824),GAMEOBJECT_DRAG_ENTER:e(39578),GAMEOBJECT_DRAG:e(72072),GAMEOBJECT_DRAG_LEAVE:e(82569),GAMEOBJECT_DRAG_OVER:e(70833),GAMEOBJECT_DRAG_START:e(81442),GAMEOBJECT_DROP:e(32936),GAMEOBJECT_MOVE:e(99658),GAMEOBJECT_OUT:e(60515),GAMEOBJECT_OVER:e(55254),GAMEOBJECT_POINTER_DOWN:e(34782),GAMEOBJECT_POINTER_MOVE:e(41769),GAMEOBJECT_POINTER_OUT:e(65588),GAMEOBJECT_POINTER_OVER:e(61640),GAMEOBJECT_POINTER_UP:e(49342),GAMEOBJECT_POINTER_WHEEL:e(82662),GAMEOBJECT_UP:e(13058),GAMEOBJECT_WHEEL:e(52426),MANAGER_BOOT:e(67137),MANAGER_PROCESS:e(27678),MANAGER_UPDATE:e(22257),POINTER_DOWN:e(88909),POINTER_DOWN_OUTSIDE:e(36548),POINTER_MOVE:e(18483),POINTER_OUT:e(22355),POINTER_OVER:e(7997),POINTER_UP:e(66318),POINTER_UP_OUTSIDE:e(94812),POINTER_WHEEL:e(37310),POINTERLOCK_CHANGE:e(90379),PRE_UPDATE:e(24196),SHUTDOWN:e(27053),START:e(29413),UPDATE:e(25165)}},70848:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h){this.pad=l,this.events=l.events,this.index=h,this.value=0,this.threshold=.1},update:function(u){this.value=u},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});o.exports=x},21274:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(43200),u=new d({initialize:function(h,n){this.pad=h,this.events=h.manager,this.index=n,this.value=0,this.threshold=1,this.pressed=!1},update:function(l){this.value=l;var h=this.pad,n=this.index;l>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(x.BUTTON_DOWN,h,this,l),this.pad.emit(x.GAMEPAD_BUTTON_DOWN,n,l,this)):this.pressed&&(this.pressed=!1,this.events.emit(x.BUTTON_UP,h,this,l),this.pad.emit(x.GAMEPAD_BUTTON_UP,n,l,this))},destroy:function(){this.pad=null,this.events=null}});o.exports=u},75956:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70848),x=e(21274),u=e(56694),l=e(6659),h=e(93736),n=new u({Extends:l,initialize:function(f,a){l.call(this),this.manager=f,this.pad=a,this.id=a.id,this.index=a.index;for(var c=[],p=0;p<a.buttons.length;p++)c.push(new x(this,p));this.buttons=c;var v=[];for(p=0;p<a.axes.length;p++)v.push(new d(this,p));this.axes=v,this.vibration=a.vibrationActuator;var m={value:0,pressed:!1};this._LCLeft=c[14]?c[14]:m,this._LCRight=c[15]?c[15]:m,this._LCTop=c[12]?c[12]:m,this._LCBottom=c[13]?c[13]:m,this._RCLeft=c[2]?c[2]:m,this._RCRight=c[1]?c[1]:m,this._RCTop=c[3]?c[3]:m,this._RCBottom=c[0]?c[0]:m,this._FBLeftTop=c[4]?c[4]:m,this._FBLeftBottom=c[6]?c[6]:m,this._FBRightTop=c[5]?c[5]:m,this._FBRightBottom=c[7]?c[7]:m;var y={value:0};this._HAxisLeft=v[0]?v[0]:y,this._VAxisLeft=v[1]?v[1]:y,this._HAxisRight=v[2]?v[2]:y,this._VAxisRight=v[3]?v[3]:y,this.leftStick=new h,this.rightStick=new h,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(r){return this.axes[r].getValue()},setAxisThreshold:function(r){for(var f=0;f<this.axes.length;f++)this.axes[f].threshold=r},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(r){return this.buttons[r].value},isButtonDown:function(r){return this.buttons[r].pressed},update:function(r){if(!(r.timestamp<this._created)){var f,a=this.buttons,c=r.buttons,p=a.length;for(f=0;f<p;f++)a[f].update(c[f].value);var v=this.axes,m=r.axes;for(p=v.length,f=0;f<p;f++)v[f].update(m[f]);p>=2&&(this.leftStick.set(v[0].getValue(),v[1].getValue()),p>=4&&this.rightStick.set(v[2].getValue(),v[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var r;for(r=0;r<this.buttons.length;r++)this.buttons[r].destroy();for(r=0;r<this.axes.length;r++)this.axes[r].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});o.exports=n},1379:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(43200),l=e(75956),h=e(10850),n=e(63399),r=e(33963),f=new d({Extends:x,initialize:function(c){x.call(this),this.scene=c.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=c,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,c.pluginEvents.once(r.BOOT,this.boot,this),c.pluginEvents.on(r.START,this.start,this)},boot:function(){var a=this.scene.sys.game,c=this.settings.input,p=a.config;this.enabled=h(c,"gamepad",p.inputGamepad)&&a.device.input.gamepads,this.target=h(c,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var a=this,c=this.target,p=function(v){v.defaultPrevented||!a.isActive()||(a.refreshPads(),a.queue.push(v))};this.onGamepadHandler=p,c.addEventListener("gamepadconnected",p,!1),c.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(r.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(r.UPDATE,this.update);for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].removeAllListeners()},disconnectAll:function(){for(var a=0;a<this.gamepads.length;a++)this.gamepads[a].pad.connected=!1},refreshPads:function(){var a=navigator.getGamepads();if(!a)this.disconnectAll();else for(var c=this.gamepads,p=0;p<a.length;p++){var v=a[p];if(!!v){var m=v.id,y=v.index,E=c[y];if(E)E.id!==m?(E.destroy(),c[y]=new l(this,v)):E.update(v);else{var P=new l(this,v);c[y]=P,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=P):this._pad3=P:this._pad2=P:this._pad1=P}}}},getAll:function(){for(var a=[],c=this.gamepads,p=0;p<c.length;p++)c[p]&&a.push(c[p]);return a},getPad:function(a){for(var c=this.gamepads,p=0;p<c.length;p++)if(c[p]&&c[p].index===a)return c[p]},update:function(){if(!!this.enabled){this.refreshPads();var a=this.queue.length;if(a!==0)for(var c=this.queue.splice(0,a),p=0;p<a;p++){var v=c[p],m=this.getPad(v.gamepad.index);v.type==="gamepadconnected"?this.emit(u.CONNECTED,m,v):v.type==="gamepaddisconnected"&&this.emit(u.DISCONNECTED,m,v)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var a=0;a<this.gamepads.length;a++)this.gamepads[a]&&this.gamepads[a].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});n.register("GamepadPlugin",f,"gamepad","gamepad","inputGamepad"),o.exports=f},33171:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={DUALSHOCK_4:e(74982),SNES_USB:e(33171),XBOX_360:e(43247)}},17344:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},36635:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},85724:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="connected"},55832:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="disconnected"},772:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},33608:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},43200:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BUTTON_DOWN:e(17344),BUTTON_UP:e(36635),CONNECTED:e(85724),DISCONNECTED:e(55832),GAMEPAD_BUTTON_DOWN:e(772),GAMEPAD_BUTTON_UP:e(33608)}},92636:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Axis:e(70848),Button:e(21274),Events:e(43200),Gamepad:e(75956),GamepadPlugin:e(1379),Configs:e(4898)}},20873:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72687),x=e(98611),u={CreatePixelPerfectHandler:e(18104),CreateInteractiveObject:e(27395),Events:e(33963),Gamepad:e(92636),InputManager:e(69898),InputPlugin:e(12499),InputPluginCache:e(63399),Keyboard:e(28388),Mouse:e(11343),Pointer:e(40398),Touch:e(77423)};u=x(!1,u,d),o.exports=u},71064:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),x=e(56694),u=e(97081),l=e(33963),h=e(11873),n=e(72283),r=new x({initialize:function(a){this.manager=a,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=n,this.onKeyUp=n,a.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var f=this.manager.config;this.enabled=f.inputKeyboard,this.target=f.inputKeyboardEventTarget,this.addCapture(f.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(u.POST_STEP,this.postUpdate,this)},startListeners:function(){var f=this;this.onKeyDown=function(c){if(!(c.defaultPrevented||!f.enabled||!f.manager)){f.queue.push(c),f.manager.events.emit(l.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;f.preventDefault&&!p&&f.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}},this.onKeyUp=function(c){if(!(c.defaultPrevented||!f.enabled||!f.manager)){f.queue.push(c),f.manager.events.emit(l.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;f.preventDefault&&!p&&f.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}};var a=this.target;a&&(a.addEventListener("keydown",this.onKeyDown,!1),a.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var f=this.target;f.removeEventListener("keydown",this.onKeyDown,!1),f.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(f){typeof f=="string"&&(f=f.split(",")),Array.isArray(f)||(f=[f]);for(var a=this.captures,c=0;c<f.length;c++){var p=f[c];typeof p=="string"&&(p=h[p.trim().toUpperCase()]),a.indexOf(p)===-1&&a.push(p)}this.preventDefault=a.length>0},removeCapture:function(f){typeof f=="string"&&(f=f.split(",")),Array.isArray(f)||(f=[f]);for(var a=this.captures,c=0;c<f.length;c++){var p=f[c];typeof p=="string"&&(p=h[p.toUpperCase()]),d(a,p)}this.preventDefault=a.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(u.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});o.exports=r},89666:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(94030),l=e(97081),h=e(10850),n=e(33963),r=e(63399),f=e(50165),a=e(11873),c=e(95625),p=e(48044),v=e(7599),m=e(84314),y=new d({Extends:x,initialize:function(P){x.call(this),this.game=P.systems.game,this.scene=P.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=P,this.manager=P.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,P.pluginEvents.once(n.BOOT,this.boot,this),P.pluginEvents.on(n.START,this.start,this)},boot:function(){var E=this.settings.input;this.enabled=h(E,"keyboard",!0);var P=h(E,"keyboard.capture",null);P&&this.addCaptures(P),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(n.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this),this.game.events.on(l.BLUR,this.resetKeys,this),this.scene.sys.events.on(v.PAUSE,this.resetKeys,this),this.scene.sys.events.on(v.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(E){return this.manager.addCapture(E),this},removeCapture:function(E){return this.manager.removeCapture(E),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:a.UP,down:a.DOWN,left:a.LEFT,right:a.RIGHT,space:a.SPACE,shift:a.SHIFT})},addKeys:function(E,P,S){P===void 0&&(P=!0),S===void 0&&(S=!1);var w={};if(typeof E=="string"){E=E.split(",");for(var A=0;A<E.length;A++){var R=E[A].trim();R&&(w[R]=this.addKey(R,P,S))}}else for(var O in E)w[O]=this.addKey(E[O],P,S);return w},addKey:function(E,P,S){P===void 0&&(P=!0),S===void 0&&(S=!1);var w=this.keys;if(E instanceof f){var A=w.indexOf(E);return A>-1?w[A]=E:w[E.keyCode]=E,P&&this.addCapture(E.keyCode),E.setEmitOnRepeat(S),E}return typeof E=="string"&&(E=a[E.toUpperCase()]),w[E]||(w[E]=new f(this,E),P&&this.addCapture(E),w[E].setEmitOnRepeat(S)),w[E]},removeKey:function(E,P,S){P===void 0&&(P=!1),S===void 0&&(S=!1);var w=this.keys,A;if(E instanceof f){var R=w.indexOf(E);R>-1&&(A=this.keys[R],this.keys[R]=void 0)}else typeof E=="string"&&(E=a[E.toUpperCase()]);return w[E]&&(A=w[E],w[E]=void 0),A&&(A.plugin=null,S&&this.removeCapture(A.keyCode),P&&A.destroy()),this},removeAllKeys:function(E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);for(var S=this.keys,w=0;w<S.length;w++){var A=S[w];A&&(S[w]=void 0,P&&this.removeCapture(A.keyCode),E&&A.destroy())}return this},createCombo:function(E,P){return new c(this,E,P)},checkDown:function(E,P){if(P===void 0&&(P=0),this.enabled&&E.isDown){var S=m(this.time-E.timeDown,P);if(S>E._tick)return E._tick=S,!0}return!1},update:function(){var E=this.manager.queue,P=E.length;if(!(!this.isActive()||P===0))for(var S=this.keys,w=0;w<P;w++){var A=E[w],R=A.keyCode,O=S[R],F=!1;A.cancelled===void 0&&(A.cancelled=0,A.stopImmediatePropagation=function(){A.cancelled=1},A.stopPropagation=function(){A.cancelled=-1}),A.cancelled!==-1&&(R===this.prevCode&&A.timeStamp===this.prevTime&&A.type===this.prevType||(this.prevCode=R,this.prevTime=A.timeStamp,this.prevType=A.type,A.type==="keydown"?(O&&(F=O.isDown,O.onDown(A)),!A.cancelled&&(!O||!F)&&(p[R]&&this.emit(u.KEY_DOWN+p[R],A),A.cancelled||this.emit(u.ANY_KEY_DOWN,A))):(O&&O.onUp(A),A.cancelled||(p[R]&&this.emit(u.KEY_UP+p[R],A),A.cancelled||this.emit(u.ANY_KEY_UP,A))),A.cancelled===1&&(A.cancelled=0)))}},resetKeys:function(){for(var E=this.keys,P=0;P<E.length;P++)E[P]&&E[P].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(n.MANAGER_PROCESS,this.update,this),this.game.events.off(l.BLUR,this.resetKeys),this.scene.sys.events.off(v.PAUSE,this.resetKeys,this),this.scene.sys.events.off(v.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var E=this.keys,P=0;P<E.length;P++)E[P]&&E[P].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});r.register("KeyboardPlugin",y,"keyboard","keyboard","inputKeyboard"),o.exports=y},60258:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d.timeLastMatched=e.timeStamp,d.index++,d.index===d.size?!0:(d.current=d.keyCodes[d.index],!1)};o.exports=T},95625:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(94030),u=e(72632),l=e(2544),h=e(88754),n=new d({initialize:function(f,a,c){if(c===void 0&&(c={}),a.length<2)return!1;this.manager=f,this.enabled=!0,this.keyCodes=[];for(var p=0;p<a.length;p++){var v=a[p];typeof v=="string"?this.keyCodes.push(v.toUpperCase().charCodeAt(0)):typeof v=="number"?this.keyCodes.push(v):v.hasOwnProperty("keyCode")&&this.keyCodes.push(v.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=u(c,"resetOnWrongKey",!0),this.maxKeyDelay=u(c,"maxKeyDelay",0),this.resetOnMatch=u(c,"resetOnMatch",!1),this.deleteOnMatch=u(c,"deleteOnMatch",!1);var m=this,y=function(E){if(!(m.matched||!m.enabled)){var P=l(E,m);P&&(m.manager.emit(x.COMBO_MATCH,m,E),m.resetOnMatch?h(m):m.deleteOnMatch&&m.destroy())}};this.onKeyDown=y,this.manager.on(x.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(x.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});o.exports=n},2544:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60258),x=function(u,l){if(l.matched)return!0;var h=!1,n=!1;if(u.keyCode===l.current)if(l.index>0&&l.maxKeyDelay>0){var r=l.timeLastMatched+l.maxKeyDelay;u.timeStamp<=r&&(n=!0,h=d(u,l))}else n=!0,h=d(u,l);return!n&&l.resetOnWrongKey&&(l.index=0,l.current=l.keyCodes[0]),h&&(l.timeLastMatched=u.timeStamp,l.matched=!0,l.timeMatched=u.timeStamp),h};o.exports=x},88754:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};o.exports=T},5044:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown"},40813:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup"},89319:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keycombomatch"},43267:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="down"},78595:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keydown-"},30056:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="keyup-"},81939:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="up"},94030:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ANY_KEY_DOWN:e(5044),ANY_KEY_UP:e(40813),COMBO_MATCH:e(89319),DOWN:e(43267),KEY_DOWN:e(78595),KEY_UP:e(30056),UP:e(81939)}},28388:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:e(94030),KeyboardManager:e(71064),KeyboardPlugin:e(89666),Key:e(50165),KeyCodes:e(11873),KeyCombo:e(95625),AdvanceKeyCombo:e(60258),ProcessKeyCombo:e(2544),ResetKeyCombo:e(88754),JustDown:e(42460),JustUp:e(53162),DownDuration:e(64964),UpDuration:e(70331)}},64964:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=50);var x=e.plugin.game.loop.time-e.timeDown;return e.isDown&&x<d};o.exports=T},42460:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justDown?(e._justDown=!1,!0):!1};o.exports=T},53162:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e._justUp?(e._justUp=!1,!0):!1};o.exports=T},50165:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(94030),l=new d({Extends:x,initialize:function(n,r){x.call(this),this.plugin=n,this.keyCode=r,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(h){return this.emitOnRepeat=h,this},onDown:function(h){this.originalEvent=h,this.enabled&&(this.altKey=h.altKey,this.ctrlKey=h.ctrlKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.location=h.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u.DOWN,this,h):(this.isDown=!0,this.isUp=!1,this.timeDown=h.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u.DOWN,this,h)))},onUp:function(h){this.originalEvent=h,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=h.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u.UP,this,h))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});o.exports=l},11873:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};o.exports=T},48044:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(11873),x={};for(var u in d)x[d[u]]=u;o.exports=x},70331:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=50);var x=e.plugin.game.loop.time-e.timeUp;return e.isUp&&x<d};o.exports=T},7905:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(90185),u=e(33963),l=e(72283),h=new d({initialize:function(r){this.manager=r,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=l,this.onMouseDown=l,this.onMouseUp=l,this.onMouseDownWindow=l,this.onMouseUpWindow=l,this.onMouseOver=l,this.onMouseOut=l,this.onMouseWheel=l,this.pointerLockChange=l,this.isTop=!0,r.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var n=this.manager.config;this.enabled=n.inputMouse,this.target=n.inputMouseEventTarget,this.passive=n.inputMousePassive,this.preventDefaultDown=n.inputMousePreventDefaultDown,this.preventDefaultUp=n.inputMousePreventDefaultUp,this.preventDefaultMove=n.inputMousePreventDefaultMove,this.preventDefaultWheel=n.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,n.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(n){return n.preventDefault(),!1}),this},requestPointerLock:function(){if(x.pointerLock){var n=this.target;n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.requestPointerLock()}},releasePointerLock:function(){x.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var n=this.target;if(!!n){var r=this,f=this.manager,a=f.canvas,c=window&&window.focus&&f.game.config.autoFocus;this.onMouseMove=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&(f.onMouseMove(v),r.preventDefaultMove&&v.preventDefault())},this.onMouseDown=function(v){c&&window.focus(),!v.defaultPrevented&&r.enabled&&f&&f.enabled&&(f.onMouseDown(v),r.preventDefaultDown&&v.target===a&&v.preventDefault())},this.onMouseDownWindow=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&v.target!==a&&f.onMouseDown(v)},this.onMouseUp=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&(f.onMouseUp(v),r.preventDefaultUp&&v.target===a&&v.preventDefault())},this.onMouseUpWindow=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&v.target!==a&&f.onMouseUp(v)},this.onMouseOver=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&f.setCanvasOver(v)},this.onMouseOut=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&f.setCanvasOut(v)},this.onMouseWheel=function(v){!v.defaultPrevented&&r.enabled&&f&&f.enabled&&f.onMouseWheel(v),r.preventDefaultWheel&&v.target===a&&v.preventDefault()};var p={passive:!0};if(n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("mouseover",this.onMouseOver,p),n.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?n.addEventListener("wheel",this.onMouseWheel,{passive:!1}):n.addEventListener("wheel",this.onMouseWheel,p),window&&f.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}x.pointerLock&&(this.pointerLockChange=function(v){var m=r.target;r.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,f.onPointerLockChange(v)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var n=this.target;n.removeEventListener("mousemove",this.onMouseMove),n.removeEventListener("mousedown",this.onMouseDown),n.removeEventListener("mouseup",this.onMouseUp),n.removeEventListener("mouseover",this.onMouseOver),n.removeEventListener("mouseout",this.onMouseOut),window&&(n=this.isTop?window.top:window,n.removeEventListener("mousedown",this.onMouseDownWindow),n.removeEventListener("mouseup",this.onMouseUpWindow)),x.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=h},11343:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={MouseManager:e(7905)}},37579:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(33963),u=e(72283),l=new d({initialize:function(n){this.manager=n,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=u,this.onTouchStartWindow=u,this.onTouchMove=u,this.onTouchEnd=u,this.onTouchEndWindow=u,this.onTouchCancel=u,this.onTouchCancelWindow=u,this.isTop=!0,n.events.once(x.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputTouch,this.target=h.inputTouchEventTarget,this.capture=h.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,h.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(h){return h.preventDefault(),!1}),this},startListeners:function(){var h=this.target;if(!!h){var n=this,r=this.manager,f=r.canvas,a=window&&window.focus&&r.game.config.autoFocus;this.onTouchMove=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onTouchMove(m),n.capture&&m.cancelable&&m.preventDefault())},this.onTouchStart=function(m){a&&window.focus(),!m.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onTouchStart(m),n.capture&&m.cancelable&&m.target===f&&m.preventDefault())},this.onTouchStartWindow=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&m.target!==f&&r.onTouchStart(m)},this.onTouchEnd=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onTouchEnd(m),n.capture&&m.cancelable&&m.target===f&&m.preventDefault())},this.onTouchEndWindow=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&m.target!==f&&r.onTouchEnd(m)},this.onTouchCancel=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&(r.onTouchCancel(m),n.capture&&m.preventDefault())},this.onTouchCancelWindow=function(m){!m.defaultPrevented&&n.enabled&&r&&r.enabled&&r.onTouchCancel(m)};var c=this.capture,p={passive:!0},v={passive:!1};if(h.addEventListener("touchstart",this.onTouchStart,c?v:p),h.addEventListener("touchmove",this.onTouchMove,c?v:p),h.addEventListener("touchend",this.onTouchEnd,c?v:p),h.addEventListener("touchcancel",this.onTouchCancel,c?v:p),window&&r.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,v),window.top.addEventListener("touchend",this.onTouchEndWindow,v),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,v)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,v),window.addEventListener("touchend",this.onTouchEndWindow,v),window.addEventListener("touchcancel",this.onTouchCancelWindow,v),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var h=this.target;h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd),h.removeEventListener("touchcancel",this.onTouchCancel),window&&(h=this.isTop?window.top:window,h.removeEventListener("touchstart",this.onTouchStartWindow),h.removeEventListener("touchend",this.onTouchEndWindow),h.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});o.exports=l},77423:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TouchManager:e(37579)}},98035:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(683),l=e(72632),h=e(30750),n=e(43531),r=e(88490),f=e(33868),a=new d({initialize:function(p,v){if(this.loader=p,this.cache=l(v,"cache",!1),this.type=l(v,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=l(v,"key",!1);var m=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+m),!this.key)throw new Error("Invalid File key: "+this.key);var y=l(v,"url");y===void 0?y=p.path+m+"."+l(v,"extension",""):typeof y=="string"&&!y.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(y=p.path+y),this.url=y,this.src="",this.xhrSettings=f(l(v,"responseType",void 0)),l(v,"xhrSettings",!1)&&(this.xhrSettings=n(this.xhrSettings,l(v,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?x.FILE_POPULATED:x.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(v,"config",{}),this.multiFile,this.linkFile},setLink:function(c){this.linkFile=c,c.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===x.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=x.FILE_LOADING,this.src=h(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=r(this,this.loader.xhr))},onLoad:function(c,p){var v=c.responseURL&&this.loader.localSchemes.some(function(E){return c.responseURL.indexOf(E)===0}),m=v&&p.target.status===0,y=!(p.target&&p.target.status!==200)||m;c.readyState===4&&c.status>=400&&c.status<=599&&(y=!1),this.state=x.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,y)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(c){c.lengthComputable&&(this.bytesLoaded=c.loaded,this.bytesTotal=c.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=x.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=x.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=x.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(c){if(this.state!==x.FILE_PENDING_DESTROY){c===void 0&&(c=this.data);var p=this.key,v=this.type;this.loader.emit(u.FILE_COMPLETE,p,v,c),this.loader.emit(u.FILE_KEY_COMPLETE+v+"-"+p,p,v,c),this.loader.flagForRemoval(this),this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});a.createObjectURL=function(c,p,v){if(typeof URL=="function")c.src=URL.createObjectURL(p);else{var m=new FileReader;m.onload=function(){c.removeAttribute("crossOrigin"),c.src="data:"+(p.type||v)+";base64,"+m.result.split(",")[1]},m.onerror=c.onerror,m.readAsDataURL(p)}},a.revokeObjectURL=function(c){typeof URL=="function"&&URL.revokeObjectURL(c.src)},o.exports=a},76846:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={install:function(d){for(var x in T)d[x]=T[x]},register:function(d,x){T[d]=x},destroy:function(){T={}}};o.exports=e},30750:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.url?e.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?e.url:d+e.url:!1};o.exports=T},67285:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(58403),l=e(6659),h=e(683),n=e(76846),r=e(72632),f=e(10850),a=e(91963),c=e(7599),p=e(33868),v=new d({Extends:l,initialize:function(y){l.call(this);var E=y.sys.game.config,P=y.sys.settings.loader;this.scene=y,this.systems=y.sys,this.cacheManager=y.sys.cache,this.textureManager=y.sys.textures,this.sceneManager=y.sys.game.scene,n.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(r(P,"baseURL",E.loaderBaseURL)),this.setPath(r(P,"path",E.loaderPath)),this.setPrefix(r(P,"prefix",E.loaderPrefix)),this.maxParallelDownloads=r(P,"maxParallelDownloads",E.loaderMaxParallelDownloads),this.xhr=p(r(P,"responseType",E.loaderResponseType),r(P,"async",E.loaderAsync),r(P,"user",E.loaderUser),r(P,"password",E.loaderPassword),r(P,"timeout",E.loaderTimeout),r(P,"withCredentials",E.loaderWithCredentials)),this.crossOrigin=r(P,"crossOrigin",E.loaderCrossOrigin),this.imageLoadType=r(P,"imageLoadType",E.loaderImageLoadType),this.localSchemes=r(P,"localScheme",E.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new u,this.inflight=new u,this.queue=new u,this._deleteQueue=new u,this.totalFailed=0,this.totalComplete=0,this.state=x.LOADER_IDLE,this.multiKeyIndex=0,y.sys.events.once(c.BOOT,this.boot,this),y.sys.events.on(c.START,this.pluginStart,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.baseURL=m,this},setPath:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.path=m,this},setPrefix:function(m){return m===void 0&&(m=""),this.prefix=m,this},setCORS:function(m){return this.crossOrigin=m,this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++){var E=m[y];this.keyExists(E)||(this.list.set(E),this.emit(h.ADD,E.key,E.type,this,E),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var y=m.hasCacheConflict();return y||this.list.iterate(function(E){if(E.type===m.type&&E.key===m.key)return y=!0,!1}),!y&&this.isLoading()&&(this.inflight.iterate(function(E){if(E.type===m.type&&E.key===m.key)return y=!0,!1}),this.queue.iterate(function(E){if(E.type===m.type&&E.key===m.key)return y=!0,!1})),y},addPack:function(m,y){if(typeof y=="string"){var E=f(m,y);E&&(m={packKey:E})}var P=0,S=this.baseURL,w=this.path,A=this.prefix;for(var R in m)if(!!Object.prototype.hasOwnProperty.call(m,R)){var O=m[R],F=r(O,"baseURL",S),L=r(O,"path",w),D=r(O,"prefix",A),I=r(O,"files",null),B=r(O,"defaultType","void");if(Array.isArray(I)){this.setBaseURL(F),this.setPath(L),this.setPrefix(D);for(var V=0;V<I.length;V++){var Y=I[V],W=Y.hasOwnProperty("type")?Y.type:B;this[W]&&(this[W](Y),P++)}}}return this.setBaseURL(S),this.setPath(w),this.setPrefix(A),P>0},isLoading:function(){return this.state===x.LOADER_LOADING||this.state===x.LOADER_PROCESSING},isReady:function(){return this.state===x.LOADER_IDLE||this.state===x.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(h.START,this),this.list.size===0?this.loadComplete():(this.state=x.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(c.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(h.PROGRESS,this.progress)},update:function(){this.state===x.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if((m.state===x.FILE_POPULATED||m.state===x.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=this.crossOrigin),m.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,y){!this.inflight||(this.inflight.delete(m),this.updateProgress(),y?(this.totalComplete++,this.queue.set(m),this.emit(h.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(h.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(m.state===x.FILE_ERRORED?m.multiFile&&m.multiFile.onFileFailed(m):m.state===x.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&(m.multiFile.addToCache(),m.multiFile.pendingDestroy()):(m.addToCache(),m.pendingDestroy())),this.queue.delete(m),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(h.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=x.LOADER_COMPLETE,this.systems.events.off(c.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(h.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,y){return this.save(JSON.stringify(m),y)},save:function(m,y,E){y===void 0&&(y="file.json"),E===void 0&&(E="application/json");var P=new Blob([m],{type:E}),S=URL.createObjectURL(P),w=document.createElement("a");return w.download=y,w.textContent="Download "+y,w.href=S,w.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var m=this.systems.game.config,y=this.systems.settings.loader;this.setBaseURL(r(y,"baseURL",m.loaderBaseURL)),this.setPath(r(y,"path",m.loaderPath)),this.setPrefix(r(y,"prefix",m.loaderPrefix)),this.state=x.LOADER_IDLE},shutdown:function(){this.reset(),this.state=x.LOADER_SHUTDOWN,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=x.LOADER_DESTROYED,this.systems.events.off(c.UPDATE,this.update,this),this.systems.events.off(c.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});a.register("Loader",v,"load"),o.exports=v},43531:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(33868),u=function(l,h){var n=l===void 0?x():d({},l);if(h)for(var r in h)h[r]!==void 0&&(n[r]=h[r]);return n};o.exports=u},45176:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(683),l=new d({initialize:function(n,r,f,a){var c=[];a.forEach(function(v){v&&c.push(v)}),this.loader=n,this.type=r,this.key=f,this.multiKeyIndex=n.multiKeyIndex++,this.files=c,this.state=x.FILE_PENDING,this.complete=!1,this.pending=c.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var p=0;p<c.length;p++)c[p].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(h){return this.files.push(h),h.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(h){var n=this.files.indexOf(h);n!==-1&&this.pending--},onFileFailed:function(h){var n=this.files.indexOf(h);n!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,h.type,h.key))},pendingDestroy:function(){if(this.state!==x.FILE_PENDING_DESTROY){var h=this.key,n=this.type;this.loader.emit(u.FILE_COMPLETE,h,n),this.loader.emit(u.FILE_KEY_COMPLETE+n+"-"+h,h,n),this.loader.flagForRemoval(this);for(var r=0;r<this.files.length;r++)this.files[r].pendingDestroy();this.state=x.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});o.exports=l},88490:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(43531),x=function(u,l){var h=d(l,u.xhrSettings),n=new XMLHttpRequest;if(n.open("GET",u.src,h.async,h.user,h.password),n.responseType=u.xhrSettings.responseType,n.timeout=h.timeout,h.headers)for(var r in h.headers)n.setRequestHeader(r,h.headers[r]);return h.header&&h.headerValue&&n.setRequestHeader(h.header,h.headerValue),h.requestedWith&&n.setRequestHeader("X-Requested-With",h.requestedWith),h.overrideMimeType&&n.overrideMimeType(h.overrideMimeType),h.withCredentials&&(n.withCredentials=!0),n.onload=u.onLoad.bind(u,n),n.onerror=u.onError.bind(u,n),n.onprogress=u.onProgress.bind(u),n.send(),n};o.exports=x},33868:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l,h){return e===void 0&&(e=""),d===void 0&&(d=!0),x===void 0&&(x=""),u===void 0&&(u=""),l===void 0&&(l=0),h===void 0&&(h=!1),{responseType:e,async:d,user:x,password:u,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}};o.exports=T},12117:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};o.exports=T},7398:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addfile"},52187:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},36627:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete"},81925:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="filecomplete-"},29774:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loaderror"},20943:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="load"},74693:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fileprogress"},71176:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postprocess"},88984:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="progress"},72753:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},683:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(7398),COMPLETE:e(52187),FILE_COMPLETE:e(36627),FILE_KEY_COMPLETE:e(81925),FILE_LOAD_ERROR:e(29774),FILE_LOAD:e(20943),FILE_PROGRESS:e(74693),POST_PROCESS:e(71176),PROGRESS:e(88984),START:e(72753)}},46468:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(70806),l=e(683),h=new d({Extends:u,initialize:function(r,f,a,c,p){u.call(this,r,f,a,c,p),this.type="animationJSON"},onProcess:function(){this.loader.once(l.POST_PROCESS,this.onLoadComplete,this),u.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});x.register("animation",function(n,r,f,a){if(Array.isArray(n))for(var c=0;c<n.length;c++)this.addFile(new h(this,n[c]));else this.addFile(new h(this,n,r,a,f));return this}),o.exports=h},31648:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),l=e(42927),h=e(42911),n=e(70806),r=e(45176),f=new d({Extends:r,initialize:function(c,p,v,m,y,E){var P,S;if(h(p)){var w=p;p=u(w,"key"),P=new l(c,{key:p,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),S=new n(c,{key:p,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","json"),xhrSettings:u(w,"atlasXhrSettings")})}else P=new l(c,p,v,y),S=new n(c,p,m,E);P.linkFile?r.call(this,c,"atlasjson",p,[P,S,P.linkFile]):r.call(this,c,"atlasjson",p,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,c.data,p),c.addToCache(),this.complete=!0}}});x.register("aseprite",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var E=0;E<a.length;E++)y=new f(this,a[E]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),o.exports=f},73152:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),l=e(42927),h=e(42911),n=e(70806),r=e(45176),f=new d({Extends:r,initialize:function(c,p,v,m,y,E){var P,S;if(h(p)){var w=p;p=u(w,"key"),P=new l(c,{key:p,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),S=new n(c,{key:p,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","json"),xhrSettings:u(w,"atlasXhrSettings")})}else P=new l(c,p,v,y),S=new n(c,p,m,E);P.linkFile?r.call(this,c,"atlasjson",p,[P,S,P.linkFile]):r.call(this,c,"atlasjson",p,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(a.key,a.data,c.data,p),this.complete=!0}}});x.register("atlas",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var E=0;E<a.length;E++)y=new f(this,a[E]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),o.exports=f},24616:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),l=e(42927),h=e(42911),n=e(45176),r=e(15297),f=new d({Extends:n,initialize:function(c,p,v,m,y,E){var P,S;if(h(p)){var w=p;p=u(w,"key"),P=new l(c,{key:p,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),S=new r(c,{key:p,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","xml"),xhrSettings:u(w,"atlasXhrSettings")})}else P=new l(c,p,v,y),S=new r(c,p,m,E);P.linkFile?n.call(this,c,"atlasxml",p,[P,S,P.linkFile]):n.call(this,c,"atlasxml",p,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(a.key,a.data,c.data,p),this.complete=!0}}});x.register("atlasXML",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var E=0;E<a.length;E++)y=new f(this,a[E]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),o.exports=f},67448:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(30929),r=e(42911),f=new d({Extends:u,initialize:function(c,p,v,m,y){if(r(p)){var E=p;p=h(E,"key"),m=h(E,"xhrSettings"),y=h(E,"context",y)}var P={type:"audio",cache:c.cacheManager.audio,extension:v.type,responseType:"arraybuffer",key:p,url:v.url,xhrSettings:m,config:{context:y}};u.call(this,c,P)},onProcess:function(){this.state=x.FILE_PROCESSING;var a=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(c){a.data=c,a.onProcessComplete()},function(c){console.error("Error decoding audio: "+a.key+" - ",c?c.message:null),a.onProcessError()}),this.config.context=null}});f.create=function(a,c,p,v,m){var y=a.systems.game,E=y.config.audio,P=y.device.audio;r(c)&&(p=h(c,"url",[]),v=h(c,"config",{}));var S=f.getAudioURL(y,p);return S?P.webAudio&&!E.disableWebAudio?new f(a,c,S,m,y.sound.context):new n(a,c,S,v):(console.warn('No audio URLs for "%s" matched this device',c),null)},f.getAudioURL=function(a,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var v=h(c[p],"url",c[p]);if(v.indexOf("blob:")===0||v.indexOf("data:")===0)return{url:v,type:""};var m=v.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=h(c[p],"type",m?m[1]:"").toLowerCase(),a.device.audio[m])return{url:v,type:m}}return null},l.register("audio",function(a,c,p,v){var m=this.systems.game,y=m.config.audio,E=m.device.audio;if(y.noAudio||!E.webAudio&&!E.audioData)return this;var P;if(Array.isArray(a))for(var S=0;S<a.length;S++)P=f.create(this,a[S]),P&&this.addFile(P);else P=f.create(this,a,c,p,v),P&&this.addFile(P);return this}),o.exports=f},66109:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(67448),x=e(56694),u=e(76846),l=e(72632),h=e(42911),n=e(70806),r=e(45176),f=new x({Extends:r,initialize:function(c,p,v,m,y,E,P){if(h(p)){var S=p;p=l(S,"key"),v=l(S,"jsonURL"),m=l(S,"audioURL"),y=l(S,"audioConfig"),E=l(S,"audioXhrSettings"),P=l(S,"jsonXhrSettings")}var w;if(!m)w=new n(c,p,v,P),r.call(this,c,"audiosprite",p,[w]),this.config.resourceLoad=!0,this.config.audioConfig=y,this.config.audioXhrSettings=E;else{var A=d.create(c,p,m,y,E);A&&(w=new n(c,p,v,P),r.call(this,c,"audiosprite",p,[A,w]),this.config.resourceLoad=!1)}},onFileComplete:function(a){var c=this.files.indexOf(a);if(c!==-1&&(this.pending--,this.config.resourceLoad&&a.type==="json"&&a.data.hasOwnProperty("resources"))){var p=a.data.resources,v=l(this.config,"audioConfig"),m=l(this.config,"audioXhrSettings"),y=d.create(this.loader,a.key,p,v,m);y&&(this.addToMultiFile(y),this.loader.addFile(y))}},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1];a.addToCache(),c.addToCache(),this.complete=!0}}});u.register("audioSprite",function(a,c,p,v,m,y){var E=this.systems.game,P=E.config.audio,S=E.device.audio;if(P&&P.noAudio||!S.webAudio&&!S.audioData)return this;var w;if(Array.isArray(a))for(var A=0;A<a.length;A++)w=new f(this,a[A]),w.files&&this.addFile(w.files);else w=new f(this,a,c,p,v,m,y),w.files&&this.addFile(w.files);return this})},40612:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m){var y="bin";if(n(c)){var E=c;c=h(E,"key"),p=h(E,"url"),v=h(E,"xhrSettings"),y=h(E,"extension",y),m=h(E,"dataType",m)}var P={type:"binary",cache:a.cacheManager.binary,extension:y,responseType:"arraybuffer",key:c,url:p,xhrSettings:v,config:{dataType:m}};u.call(this,a,P)},onProcess:function(){this.state=x.FILE_PROCESSING;var f=this.config.dataType;this.data=f?new f(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});l.register("binary",function(f,a,c,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new r(this,f[v]));else this.addFile(new r(this,f,a,p,c));return this}),o.exports=r},54565:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),l=e(42927),h=e(42911),n=e(45176),r=e(31476),f=e(15297),a=new d({Extends:n,initialize:function(p,v,m,y,E,P){var S,w;if(h(v)){var A=v;v=u(A,"key"),S=new l(p,{key:v,url:u(A,"textureURL"),extension:u(A,"textureExtension","png"),normalMap:u(A,"normalMap"),xhrSettings:u(A,"textureXhrSettings")}),w=new f(p,{key:v,url:u(A,"fontDataURL"),extension:u(A,"fontDataExtension","xml"),xhrSettings:u(A,"fontDataXhrSettings")})}else S=new l(p,v,m,E),w=new f(p,v,y,P);S.linkFile?n.call(this,p,"bitmapfont",v,[S,w,S.linkFile]):n.call(this,p,"bitmapfont",v,[S,w])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1];c.addToCache();var v=c.cache.get(c.key),m=r(p.data,c.cache.getFrame(c.key),0,0,v);this.loader.cacheManager.bitmapFont.add(c.key,{data:m,texture:c.key,frame:null}),this.complete=!0}}});x.register("bitmapFont",function(c,p,v,m,y){var E;if(Array.isArray(c))for(var P=0;P<c.length;P++)E=new a(this,c[P]),this.addFile(E.files);else E=new a(this,c,p,v,m,y),this.addFile(E.files);return this}),o.exports=a},99898:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){var m="css";if(n(c)){var y=c;c=h(y,"key"),p=h(y,"url"),v=h(y,"xhrSettings"),m=h(y,"extension",m)}var E={type:"script",cache:!1,extension:m,responseType:"text",key:c,url:p,xhrSettings:v};u.call(this,a,E)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("css",function(f,a,c){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new r(this,f[p]));else this.addFile(new r(this,f,a,c));return this}),o.exports=r},47375:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73152),x=e(40612),u=e(56694),l=e(76846),h=e(72632),n=e(42927),r=e(42911),f=e(70806),a=e(67409),c=e(30657),p=e(80802),v=e(45176),m=e(24904),y=new u({Extends:v,initialize:function(P,S,w,A){if(w.multiAtlasURL){var R=new f(P,{key:S,url:w.multiAtlasURL,xhrSettings:A,config:w});v.call(this,P,"texture",S,[R])}else{var O=w.textureURL.substr(w.textureURL.length-3);w.type||(w.type=O.toLowerCase()==="ktx"?"KTX":"PVR");var F=new x(P,{key:S,url:w.textureURL,extension:O,xhrSettings:A,config:w});if(w.atlasURL){var L=new f(P,{key:S,url:w.atlasURL,xhrSettings:A,config:w});v.call(this,P,"texture",S,[F,L])}else v.call(this,P,"texture",S,[F])}this.config=w},onFileComplete:function(E){var P=this.files.indexOf(E);if(P!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(E.type==="json"&&E.data.hasOwnProperty("textures")){var S=E.data.textures,w=this.config,A=this.loader,R=A.baseURL,O=A.path,F=A.prefix,L=h(w,"multiBaseURL",this.baseURL),D=h(w,"multiPath",this.path),I=h(w,"prefix",this.prefix),B=h(w,"textureXhrSettings");L&&A.setBaseURL(L),D&&A.setPath(D),I&&A.setPrefix(I);for(var V=0;V<S.length;V++){var Y=S[V].image,W="CMA"+this.multiKeyIndex+"_"+Y,$=new x(A,W,Y,B);if(this.addToMultiFile($),A.addFile($),S[V].normalMap){var N=new x(A,W,S[V].normalMap,B);N.type="normalMap",$.setLink(N),this.addToMultiFile(N),A.addFile(N)}}A.setBaseURL(R),A.setPath(O),A.setPrefix(F)}}},addToCache:function(){if(this.isReadyToProcess()){var E=this.config;if(E.multiAtlasURL)this.addMultiToCache();else{var P=this.loader.systems.renderer,S=this.loader.textureManager,w,A=this.files[0],R=this.files[1];if(E.type==="PVR"?w=m(A.data):E.type==="KTX"&&(w=a(A.data)),w&&P.supportsCompressedTexture(E.format,w.internalFormat)){w.format=P.getCompressedTextureName(E.format,w.internalFormat);var O=R&&R.data?R.data:null;S.addCompressedTexture(A.key,w,O)}}this.complete=!0}},addMultiToCache:function(){for(var E=this.config,P=this.files[0],S=[],w=[],A=[],R=this.loader.systems.renderer,O=this.loader.textureManager,F,L=1;L<this.files.length;L++){var D=this.files[L];if(D.type!=="normalMap")for(var I=D.key.indexOf("_"),B=D.key.substr(I+1),V=D.data,Y=0;Y<P.data.textures.length;Y++){var W=P.data.textures[Y];if(W.image===B){E.type==="PVR"?F=m(V):E.type==="KTX"&&(F=a(V)),F&&R.supportsCompressedTexture(E.format,F.internalFormat)&&(F.format=R.getCompressedTextureName(E.format,F.internalFormat),w.push(F),S.push(W),D.linkFile&&A.push(D.linkFile.data));break}}}A.length===0&&(A=void 0),O.addAtlasJSONArray(this.key,w,S,A),this.complete=!0}});l.register("texture",function(E,P,S){var w=this.systems.renderer,A=function(O,F,L,D){var I={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(r(F)){var B=F;F=h(B,"key"),L=h(B,"url"),D=h(B,"xhrSettings")}var V=!1;for(var Y in L)if(w.supportsCompressedTexture(Y)){var W=L[Y];typeof W=="string"?I.textureURL=W:I=c(W,I),I.format=Y.toUpperCase(),V=!0;break}if(!V)console.warn("No supported compressed texture format or IMG fallback",F);else if(I.format==="IMG"){var $,N;I.multiAtlasURL?(N=new p(O,F,I.multiAtlasURL,I.multiPath,I.multiBaseURL,D),$=N.files):I.atlasURL?(N=new d(O,F,I.textureURL,I.atlasURL,D),$=N.files):$=new n(O,F,I.textureURL,D),O.addFile($)}else{var U=new y(O,F,I,D);O.addFile(U.files)}};if(Array.isArray(E))for(var R=0;R<E.length;R++)A(this,E[R]);else A(this,E,P,S);return this}),o.exports=y},46568:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=e(31053),f=new d({Extends:u,initialize:function(c,p,v,m,y){var E="glsl";if(n(p)){var P=p;p=h(P,"key"),v=h(P,"url"),m=h(P,"shaderType","fragment"),y=h(P,"xhrSettings"),E=h(P,"extension",E)}else m===void 0&&(m="fragment");var S={type:"glsl",cache:c.cacheManager.shader,extension:E,responseType:"text",key:p,url:v,config:{shaderType:m},xhrSettings:y};u.call(this,c,S)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a=this.data.split(`
`),c=this.extractBlock(a,0);if(c)for(;c;){var p=this.getShaderName(c.header),v=this.getShaderType(c.header),m=this.getShaderUniforms(c.header),y=c.shader;if(this.cache.has(p)){var E=this.cache.get(p);v==="fragment"?E.fragmentSrc=y:E.vertexSrc=y,E.uniforms||(E.uniforms=m)}else v==="fragment"?this.cache.add(p,new r(p,y,"",m)):this.cache.add(p,new r(p,"",y,m));c=this.extractBlock(a,c.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new r(this.key,this.data)):this.cache.add(this.key,new r(this.key,"",this.data))},getShaderName:function(a){for(var c=0;c<a.length;c++){var p=a[c].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(a){for(var c=0;c<a.length;c++){var p=a[c].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(a){for(var c={},p=0;p<a.length;p++){var v=a[p].trim();if(v.substring(0,8)==="uniform."){var m=v.indexOf(":");if(m){var y=v.substring(8,m);try{c[y]=JSON.parse(v.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+y)}}}}return c},extractBlock:function(a,c){for(var p=-1,v=-1,m=-1,y=!1,E=!1,P=[],S=[],w=c;w<a.length;w++){var A=a[w].trim();if(A==="---")if(p===-1)p=w,y=!0;else if(y)v=w,y=!1,E=!0;else{E=!1;break}else y?P.push(A):E&&(S.push(A),m=w)}return!y&&v!==-1?{header:P,shader:S.join(`
`),offset:m}:null}});l.register("glsl",function(a,c,p,v){if(Array.isArray(a))for(var m=0;m<a.length;m++)this.addFile(new f(this,a[m]));else this.addFile(new f(this,a,c,p,v));return this}),o.exports=f},30929:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(683),u=e(98035),l=e(72632),h=e(30750),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){if(n(c)){var m=c;c=l(m,"key"),v=l(m,"config",v)}var y={type:"audio",cache:a.cacheManager.audio,extension:p.type,key:c,url:p.url,config:v};u.call(this,a,y),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var f=0;f<this.data.length;f++){var a=this.data[f];a.oncanplaythrough=null,a.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(f){var a=f.target;a.oncanplaythrough=null,a.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(x.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var f=this.config&&this.config.instances||1;this.filesTotal=f,this.filesLoaded=0,this.percentComplete=0;for(var a=0;a<f;a++){var c=new Audio;c.dataset||(c.dataset={}),c.dataset.name=this.key+("0"+a).slice(-2),c.dataset.used="false",this.locked?c.dataset.locked="true":(c.dataset.locked="false",c.preload="auto",c.oncanplaythrough=this.onProgress.bind(this),c.onerror=this.onError.bind(this)),this.data.push(c)}for(a=0;a<this.data.length;a++)c=this.data[a],c.src=h(this,this.loader.baseURL),this.locked||c.load();this.locked&&setTimeout(this.onLoad.bind(this))}});o.exports=r},77459:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){var m="html";if(n(c)){var y=c;c=h(y,"key"),p=h(y,"url"),v=h(y,"xhrSettings"),m=h(y,"extension",m)}var E={type:"text",cache:a.cacheManager.html,extension:m,responseType:"text",key:c,url:p,xhrSettings:v};u.call(this,a,E)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("html",function(f,a,c){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new r(this,f[p]));else this.addFile(new r(this,f,a,c));return this}),o.exports=r},9755:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m,y){v===void 0&&(v=512),m===void 0&&(m=512);var E="html";if(n(c)){var P=c;c=h(P,"key"),p=h(P,"url"),y=h(P,"xhrSettings"),E=h(P,"extension",E),v=h(P,"width",v),m=h(P,"height",m)}var S={type:"html",cache:a.textureManager,extension:E,responseType:"text",key:c,url:p,xhrSettings:y,config:{width:v,height:m}};u.call(this,a,S)},onProcess:function(){this.state=x.FILE_PROCESSING;var f=this.config.width,a=this.config.height,c=[];c.push('<svg width="'+f+'px" height="'+a+'px" viewBox="0 0 '+f+" "+a+'" xmlns="http://www.w3.org/2000/svg">'),c.push('<foreignObject width="100%" height="100%">'),c.push('<body xmlns="http://www.w3.org/1999/xhtml">'),c.push(this.xhrLoader.responseText),c.push("</body>"),c.push("</foreignObject>"),c.push("</svg>");var p=[c.join(`
`)],v=this;try{var m=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{v.state=x.FILE_ERRORED,v.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){u.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(v.data),v.onProcessError()},u.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("htmlTexture",function(f,a,c,p,v){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new r(this,f[m]));else this.addFile(new r(this,f,a,c,p,v));return this}),o.exports=r},42927:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=e(30750),f=new d({Extends:u,initialize:function a(c,p,v,m,y){var E="png",P;if(n(p)){var S=p;p=h(S,"key"),v=h(S,"url"),P=h(S,"normalMap"),m=h(S,"xhrSettings"),E=h(S,"extension",E),y=h(S,"frameConfig")}Array.isArray(v)&&(P=v[1],v=v[0]);var w={type:"image",cache:c.textureManager,extension:E,responseType:"blob",key:p,url:v,xhrSettings:m,config:y};if(u.call(this,c,w),P){var A=new a(c,this.key,P,m,y);A.type="normalMap",this.setLink(A),c.addFile(A)}this.useImageElementLoad=c.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){u.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(a.data),a.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var a=this.state;this.state=x.FILE_PROCESSING,a===x.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=x.FILE_LOADING,this.src=r(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){a.state=x.FILE_LOADED,a.loader.nextFile(a,!0)},this.data.onerror=function(){a.loader.nextFile(a,!1)},this.data.src=this.src}},addToCache:function(){var a=this.linkFile;a?a.state>=x.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,a.data,this.data):this.cache.addImage(this.key,this.data,a.data)):this.cache.addImage(this.key,this.data)}});l.register("image",function(a,c,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new f(this,a[v]));else this.addFile(new f(this,a,c,p));return this}),o.exports=f},70806:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(10850),r=e(42911),f=new d({Extends:u,initialize:function(c,p,v,m,y){var E="json";if(r(p)){var P=p;p=h(P,"key"),v=h(P,"url"),m=h(P,"xhrSettings"),E=h(P,"extension",E),y=h(P,"dataKey",y)}var S={type:"json",cache:c.cacheManager.json,extension:E,responseType:"text",key:p,url:v,xhrSettings:m,config:y};u.call(this,c,S),r(v)&&(y?this.data=n(v,y):this.data=v,this.state=x.FILE_POPULATED)},onProcess:function(){if(this.state!==x.FILE_POPULATED){this.state=x.FILE_PROCESSING;try{var a=JSON.parse(this.xhrLoader.responseText)}catch(p){throw this.onProcessError(),p}var c=this.config;typeof c=="string"?this.data=n(a,c,a):this.data=a}this.onProcessComplete()}});l.register("json",function(a,c,p,v){if(Array.isArray(a))for(var m=0;m<a.length;m++)this.addFile(new f(this,a[m]));else this.addFile(new f(this,a,c,v,p));return this}),o.exports=f},80802:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),l=e(42927),h=e(42911),n=e(70806),r=e(45176),f=new d({Extends:r,initialize:function(c,p,v,m,y,E,P){if(h(p)){var S=p;p=u(S,"key"),u(S,"url",!1)?v=u(S,"url"):v=u(S,"atlasURL"),E=u(S,"xhrSettings"),m=u(S,"path"),y=u(S,"baseURL"),P=u(S,"textureXhrSettings")}var w=new n(c,p,v,E);r.call(this,c,"multiatlas",p,[w]),this.config.path=m,this.config.baseURL=y,this.config.textureXhrSettings=P},onFileComplete:function(a){var c=this.files.indexOf(a);if(c!==-1&&(this.pending--,a.type==="json"&&a.data.hasOwnProperty("textures"))){var p=a.data.textures,v=this.config,m=this.loader,y=m.baseURL,E=m.path,P=m.prefix,S=u(v,"baseURL",this.baseURL),w=u(v,"path",this.path),A=u(v,"prefix",this.prefix),R=u(v,"textureXhrSettings");m.setBaseURL(S),m.setPath(w),m.setPrefix(A);for(var O=0;O<p.length;O++){var F=p[O].image,L="MA"+this.multiKeyIndex+"_"+F,D=new l(m,L,F,R);if(this.addToMultiFile(D),m.addFile(D),p[O].normalMap){var I=new l(m,L,p[O].normalMap,R);I.type="normalMap",D.setLink(I),this.addToMultiFile(I),m.addFile(I)}}m.setBaseURL(y),m.setPath(E),m.setPrefix(P)}},addToCache:function(){if(this.isReadyToProcess()){for(var a=this.files[0],c=[],p=[],v=[],m=1;m<this.files.length;m++){var y=this.files[m];if(y.type!=="normalMap")for(var E=y.key.indexOf("_"),P=y.key.substr(E+1),S=y.data,w=0;w<a.data.textures.length;w++){var A=a.data.textures[w];if(A.image===P){p.push(S),c.push(A),y.linkFile&&v.push(y.linkFile.data);break}}}v.length===0&&(v=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,c,v),this.complete=!0}}});x.register("multiatlas",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var E=0;E<a.length;E++)y=new f(this,a[E]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),o.exports=f},39034:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),l=e(42911),h=e(45176),n=e(55188),r=new d({Extends:h,initialize:function(a,c,p,v){var m="js",y=[];if(l(c)){var E=c;c=u(E,"key"),p=u(E,"url"),v=u(E,"xhrSettings"),m=u(E,"extension",m)}Array.isArray(p)||(p=[p]);for(var P=0;P<p.length;P++){var S=new n(a,{key:c+"_"+P.toString(),url:p[P],extension:m,xhrSettings:v});S.onProcess=function(){this.onProcessComplete()},y.push(S)}h.call(this,a,"scripts",c,y)},addToCache:function(){if(this.isReadyToProcess()){for(var f=0;f<this.files.length;f++){var a=this.files[f];a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=a.xhrLoader.responseText,document.head.appendChild(a.data)}this.complete=!0}}});x.register("scripts",function(f,a,c){var p;if(Array.isArray(f))for(var v=0;v<f.length;v++)p=new r(this,f[v]),this.addFile(p.files);else p=new r(this,f,a,c),this.addFile(p.files);return this}),o.exports=r},85527:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),l=e(42911),h=e(45176),n=e(27291),r=e(76799),f=e(86897),a=new d({Extends:h,initialize:function(p,v,m,y,E,P){var S,w,A=p.cacheManager.obj;if(l(v)){var R=v;v=u(R,"key"),S=new f(p,{key:v,type:"obj",cache:A,url:u(R,"url"),extension:u(R,"extension","obj"),xhrSettings:u(R,"xhrSettings"),config:{flipUV:u(R,"flipUV",E)}}),y=u(R,"matURL"),y&&(w=new f(p,{key:v,type:"mat",cache:A,url:y,extension:u(R,"matExtension","mat"),xhrSettings:u(R,"xhrSettings")}))}else S=new f(p,{key:v,url:m,type:"obj",cache:A,extension:"obj",xhrSettings:P,config:{flipUV:E}}),y&&(w=new f(p,{key:v,url:y,type:"mat",cache:A,extension:"mat",xhrSettings:P}));h.call(this,p,"obj",v,[S,w])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1],v=n(c.data,c.config.flipUV);p&&(v.materials=r(p.data)),c.cache.add(c.key,v),this.complete=!0}}});x.register("obj",function(c,p,v,m,y){var E;if(Array.isArray(c))for(var P=0;P<c.length;P++)E=new a(this,c[P]),this.addFile(E.files);else E=new a(this,c,p,v,m,y),this.addFile(E.files);return this}),o.exports=a},3616:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(76846),l=e(70806),h=new d({Extends:l,initialize:function(r,f,a,c,p){l.call(this,r,f,a,c,p),this.type="packfile"},onProcess:function(){if(this.state!==x.FILE_POPULATED&&(this.state=x.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var n={};n[this.config]=this.data,this.data=n}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});u.register("pack",function(n,r,f,a){if(Array.isArray(n))for(var c=0;c<n.length;c++)this.addFile(new h(this,n[c]));else this.addFile(new h(this,n,r,a,f));return this}),o.exports=h},12217:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m,y){var E="js";if(n(c)){var P=c;c=h(P,"key"),p=h(P,"url"),y=h(P,"xhrSettings"),E=h(P,"extension",E),v=h(P,"start"),m=h(P,"mapping")}var S={type:"plugin",cache:!1,extension:E,responseType:"text",key:c,url:p,xhrSettings:y,config:{start:v,mapping:m}};u.call(this,a,S),typeof p=="function"&&(this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){var f=this.loader.systems.plugins,a=this.config,c=h(a,"start",!1),p=h(a,"mapping",null);if(this.state===x.FILE_POPULATED)f.install(this.key,this.data,c,p);else{this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var v=f.install(this.key,window[this.key],c,p);(c||p)&&(this.loader.systems[p]=v,this.loader.scene[p]=v)}this.onProcessComplete()}});l.register("plugin",function(f,a,c,p,v){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new r(this,f[m]));else this.addFile(new r(this,f,a,c,p,v));return this}),o.exports=r},4474:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m){var y="svg";if(n(c)){var E=c;c=h(E,"key"),p=h(E,"url"),v=h(E,"svgConfig",{}),m=h(E,"xhrSettings"),y=h(E,"extension",y)}var P={type:"svg",cache:a.textureManager,extension:y,responseType:"text",key:c,url:p,xhrSettings:m,config:{width:h(v,"width"),height:h(v,"height"),scale:h(v,"scale")}};u.call(this,a,P)},onProcess:function(){this.state=x.FILE_PROCESSING;var f=this.xhrLoader.responseText,a=[f],c=this.config.width,p=this.config.height,v=this.config.scale;t:if(c&&p||v){var m=null,y=new DOMParser;m=y.parseFromString(f,"text/xml");var E=m.getElementsByTagName("svg")[0],P=E.hasAttribute("viewBox"),S=parseFloat(E.getAttribute("width")),w=parseFloat(E.getAttribute("height"));if(!P&&S&&w)E.setAttribute("viewBox","0  0 "+S+" "+w);else if(P&&!S&&!w){var A=E.getAttribute("viewBox").split(/\s+|,/);S=A[2],w=A[3]}if(v)if(S&&w)c=S*v,p=w*v;else break t;E.setAttribute("width",c.toString()+"px"),E.setAttribute("height",p.toString()+"px"),a=[new XMLSerializer().serializeToString(E)]}try{var R=new window.Blob(a,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var O=this,F=!1;this.data.onload=function(){F||u.revokeObjectURL(O.data),O.onProcessComplete()},this.data.onerror=function(){F?O.onProcessError():(F=!0,u.revokeObjectURL(O.data),O.data.src="data:image/svg+xml,"+encodeURIComponent(a.join("")))},u.createObjectURL(this.data,R,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});l.register("svg",function(f,a,c,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new r(this,f[v]));else this.addFile(new r(this,f,a,c,p));return this}),o.exports=r},95171:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){var m="js";if(n(c)){var y=c;c=h(y,"key"),p=h(y,"url"),v=h(y,"xhrSettings"),m=h(y,"extension",m)}var E={type:"text",extension:m,responseType:"text",key:c,url:p,xhrSettings:v};u.call(this,a,E)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),a=eval;this.loader.sceneManager.add(this.key,a(f)),this.complete=!0}});l.register("sceneFile",function(f,a,c){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new r(this,f[p]));else this.addFile(new r(this,f,a,c));return this}),o.exports=r},82458:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m,y){var E="js";if(n(c)){var P=c;c=h(P,"key"),p=h(P,"url"),y=h(P,"xhrSettings"),E=h(P,"extension",E),v=h(P,"systemKey"),m=h(P,"sceneKey")}var S={type:"scenePlugin",cache:!1,extension:E,responseType:"text",key:c,url:p,xhrSettings:y,config:{systemKey:v,sceneKey:m}};u.call(this,a,S),typeof p=="function"&&(this.data=p,this.state=x.FILE_POPULATED)},onProcess:function(){var f=this.loader.systems.plugins,a=this.config,c=this.key,p=h(a,"systemKey",c),v=h(a,"sceneKey",c);this.state===x.FILE_POPULATED?f.installScenePlugin(p,this.data,v,this.loader.scene,!0):(this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),f.installScenePlugin(p,window[this.key],v,this.loader.scene,!0)),this.onProcessComplete()}});l.register("scenePlugin",function(f,a,c,p,v){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new r(this,f[m]));else this.addFile(new r(this,f,a,c,p,v));return this}),o.exports=r},55188:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v,m){var y="js";if(n(c)){var E=c;c=h(E,"key"),p=h(E,"url"),v=h(E,"type","script"),m=h(E,"xhrSettings"),y=h(E,"extension",y)}else v===void 0&&(v="script");var P={type:v,cache:!1,extension:y,responseType:"text",key:c,url:p,xhrSettings:m};u.call(this,a,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("script",function(f,a,c,p){if(Array.isArray(f))for(var v=0;v<f.length;v++)this.addFile(new r(this,f[v]));else this.addFile(new r(this,f,a,c,p));return this}),o.exports=r},33536:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(76846),l=e(42927),h=new d({Extends:l,initialize:function(r,f,a,c,p){l.call(this,r,f,a,p,c),this.type="spritesheet"},addToCache:function(){var n=this.linkFile;n?n.state>=x.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,n.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,n.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});u.register("spritesheet",function(n,r,f,a){if(Array.isArray(n))for(var c=0;c<n.length;c++)this.addFile(new h(this,n[c]));else this.addFile(new h(this,n,r,f,a));return this}),o.exports=h},86897:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=new d({Extends:u,initialize:function(a,c,p,v){var m="text",y="txt",E=a.cacheManager.text;if(n(c)){var P=c;c=h(P,"key"),p=h(P,"url"),v=h(P,"xhrSettings"),y=h(P,"extension",y),m=h(P,"type",m),E=h(P,"cache",E)}var S={type:m,cache:E,extension:y,responseType:"text",key:c,url:p,xhrSettings:v};u.call(this,a,S)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",function(f,a,c){if(Array.isArray(f))for(var p=0;p<f.length;p++)this.addFile(new r(this,f[p]));else this.addFile(new r(this,f,a,c));return this}),o.exports=r},58673:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=e(93560),f=new d({Extends:u,initialize:function(c,p,v,m){var y="csv";if(n(p)){var E=p;p=h(E,"key"),v=h(E,"url"),m=h(E,"xhrSettings"),y=h(E,"extension",y)}var P={type:"tilemapCSV",cache:c.cacheManager.tilemap,extension:y,responseType:"text",key:p,url:v,xhrSettings:m};u.call(this,c,P),this.tilemapFormat=r.CSV},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,a)}});l.register("tilemapCSV",function(a,c,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new f(this,a[v]));else this.addFile(new f(this,a,c,p));return this}),o.exports=f},98896:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(70806),l=e(93560),h=new d({Extends:u,initialize:function(r,f,a,c){u.call(this,r,f,a,c),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var n={format:l.WELTMEISTER,data:this.data};this.cache.add(this.key,n)}});x.register("tilemapImpact",function(n,r,f){if(Array.isArray(n))for(var a=0;a<n.length;a++)this.addFile(new h(this,n[a]));else this.addFile(new h(this,n,r,f));return this}),o.exports=h},50563:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(70806),l=e(93560),h=new d({Extends:u,initialize:function(r,f,a,c){u.call(this,r,f,a,c),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var n={format:l.TILED_JSON,data:this.data};this.cache.add(this.key,n)}});x.register("tilemapTiledJSON",function(n,r,f){if(Array.isArray(n))for(var a=0;a<n.length;a++)this.addFile(new h(this,n[a]));else this.addFile(new h(this,n,r,f));return this}),o.exports=h},82857:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(76846),u=e(72632),l=e(42927),h=e(42911),n=e(45176),r=e(86897),f=new d({Extends:n,initialize:function(c,p,v,m,y,E){var P,S;if(h(p)){var w=p;p=u(w,"key"),P=new l(c,{key:p,url:u(w,"textureURL"),extension:u(w,"textureExtension","png"),normalMap:u(w,"normalMap"),xhrSettings:u(w,"textureXhrSettings")}),S=new r(c,{key:p,url:u(w,"atlasURL"),extension:u(w,"atlasExtension","txt"),xhrSettings:u(w,"atlasXhrSettings")})}else P=new l(c,p,v,y),S=new r(c,p,m,E);P.linkFile?n.call(this,c,"unityatlas",p,[P,S,P.linkFile]):n.call(this,c,"unityatlas",p,[P,S])},addToCache:function(){if(this.isReadyToProcess()){var a=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(a.key,a.data,c.data,p),this.complete=!0}}});x.register("unityAtlas",function(a,c,p,v,m){var y;if(Array.isArray(a))for(var E=0;E<a.length;E++)y=new f(this,a[E]),this.addFile(y.files);else y=new f(this,a,c,p,v,m),this.addFile(y.files);return this}),o.exports=f},22833:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(30750),n=e(72632),r=e(42911),f=new d({Extends:u,initialize:function(c,p,v,m){if(m===void 0&&(m=!1),r(p)){var y=p;p=n(y,"key"),v=n(y,"url",[]),m=n(y,"noAudio",!1)}var E=c.systems.game.device.video.getVideoURL(v);E||console.warn("VideoFile: No supported format for "+p);var P={type:"video",cache:c.cacheManager.video,extension:E.type,key:p,url:E.url,config:{noAudio:m}};u.call(this,c,P)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=h(this,this.loader.baseURL),this.state=x.FILE_LOADED,this.loader.nextFile(this,!0)}});l.register("video",function(a,c,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new f(this,a[v]));else this.addFile(new f(this,a,c,p));return this}),o.exports=f},15297:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12117),u=e(98035),l=e(76846),h=e(72632),n=e(42911),r=e(89200),f=new d({Extends:u,initialize:function(c,p,v,m){var y="xml";if(n(p)){var E=p;p=h(E,"key"),v=h(E,"url"),m=h(E,"xhrSettings"),y=h(E,"extension",y)}var P={type:"xml",cache:c.cacheManager.xml,extension:y,responseType:"text",key:p,url:v,xhrSettings:m};u.call(this,c,P)},onProcess:function(){this.state=x.FILE_PROCESSING,this.data=r(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});l.register("xml",function(a,c,p){if(Array.isArray(a))for(var v=0;v<a.length;v++)this.addFile(new f(this,a[v]));else this.addFile(new f(this,a,c,p));return this}),o.exports=f},34034:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AnimationJSONFile:e(46468),AsepriteFile:e(31648),AtlasJSONFile:e(73152),AtlasXMLFile:e(24616),AudioFile:e(67448),AudioSpriteFile:e(66109),BinaryFile:e(40612),BitmapFontFile:e(54565),CompressedTextureFile:e(47375),CSSFile:e(99898),GLSLFile:e(46568),HTML5AudioFile:e(30929),HTMLFile:e(77459),HTMLTextureFile:e(9755),ImageFile:e(42927),JSONFile:e(70806),MultiAtlasFile:e(80802),MultiScriptFile:e(39034),OBJFile:e(85527),PackFile:e(3616),PluginFile:e(12217),SceneFile:e(95171),ScenePluginFile:e(82458),ScriptFile:e(55188),SpriteSheetFile:e(33536),SVGFile:e(4474),TextFile:e(86897),TilemapCSVFile:e(58673),TilemapImpactFile:e(98896),TilemapJSONFile:e(50563),UnityAtlasFile:e(82857),VideoFile:e(22833),XMLFile:e(15297)}},95695:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12117),x=e(98611),u={Events:e(683),FileTypes:e(34034),File:e(98035),FileTypesManager:e(76846),GetURL:e(30750),LoaderPlugin:e(67285),MergeXHRSettings:e(43531),MultiFile:e(45176),XHRLoader:e(88490),XHRSettings:e(33868)};u=x(!1,u,d),o.exports=u},26042:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=0,x=0;x<e.length;x++)d+=+e[x];return d/e.length};o.exports=T},22824:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(8034),x=function(u,l){return d(u)/d(l)/d(u-l)};o.exports=x},17489:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.floor(Math.random()*(d-e+1)+e)};o.exports=T},14976:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l){var h=(u-d)*.5,n=(l-x)*.5,r=e*e,f=e*r;return(2*x-2*u+h+n)*f+(-3*x+3*u-2*h-n)*r+h*e+x};o.exports=T},89129:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var u=Math.pow(x,-d);return Math.ceil(e*u)/u};o.exports=T},82897:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return Math.max(d,Math.min(x,e))};o.exports=T},75606:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=function(u){return u*d.DEG_TO_RAD};o.exports=x},767:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.abs(e-d)};o.exports=T},9849:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(16650),l=e(72283),h=new u,n=new x({initialize:function r(f,a,c,p){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p=r.DefaultOrder),this._x=f,this._y=a,this._z=c,this._order=p,this.onChangeCallback=l},x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(r){this._order=r,this.onChangeCallback(this)}},set:function(r,f,a,c){return c===void 0&&(c=this._order),this._x=r,this._y=f,this._z=a,this._order=c,this.onChangeCallback(this),this},copy:function(r){return this.set(r.x,r.y,r.z,r.order)},setFromQuaternion:function(r,f,a){return f===void 0&&(f=this._order),a===void 0&&(a=!1),h.fromQuat(r),this.setFromRotationMatrix(h,f,a)},setFromRotationMatrix:function(r,f,a){f===void 0&&(f=this._order),a===void 0&&(a=!1);var c=r.val,p=c[0],v=c[4],m=c[8],y=c[1],E=c[5],P=c[9],S=c[2],w=c[6],A=c[10],R=0,O=0,F=0,L=.99999;switch(f){case"XYZ":{O=Math.asin(d(m,-1,1)),Math.abs(m)<L?(R=Math.atan2(-P,A),F=Math.atan2(-v,p)):R=Math.atan2(w,E);break}case"YXZ":{R=Math.asin(-d(P,-1,1)),Math.abs(P)<L?(O=Math.atan2(m,A),F=Math.atan2(y,E)):O=Math.atan2(-S,p);break}case"ZXY":{R=Math.asin(d(w,-1,1)),Math.abs(w)<L?(O=Math.atan2(-S,A),F=Math.atan2(-v,E)):F=Math.atan2(y,p);break}case"ZYX":{O=Math.asin(-d(S,-1,1)),Math.abs(S)<L?(R=Math.atan2(w,A),F=Math.atan2(y,p)):F=Math.atan2(-v,E);break}case"YZX":{F=Math.asin(d(y,-1,1)),Math.abs(y)<L?(R=Math.atan2(-P,E),O=Math.atan2(-S,p)):O=Math.atan2(m,A);break}case"XZY":{F=Math.asin(-d(v,-1,1)),Math.abs(v)<L?(R=Math.atan2(w,E),O=Math.atan2(m,p)):R=Math.atan2(-P,A);break}}return this._x=R,this._y=O,this._z=F,this._order=f,a&&this.onChangeCallback(this),this}});n.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],n.DefaultOrder="XYZ",o.exports=n},8034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(e===0)return 1;for(var d=e;--e;)d*=e;return d};o.exports=T},61616:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.random()*(d-e)+e};o.exports=T},60679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var u=Math.pow(x,-d);return Math.floor(e*u)/u};o.exports=T},91806:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=function(u,l,h){return u=d(u,0,1),(h-l)*u+l};o.exports=x},79366:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e/d/1e3};o.exports=T},43776:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e==parseFloat(e)?!(e%2):void 0};o.exports=T},58442:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===parseFloat(e)?!(e%2):void 0};o.exports=T},42798:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return(d-e)*x+e};o.exports=T},61072:o=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=0),e.clone().lerp(d,x)};o.exports=T},5341:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l){this.val=new Float32Array(9),l?this.copy(l):this.identity()},clone:function(){return new x(this)},set:function(u){return this.copy(u)},copy:function(u){var l=this.val,h=u.val;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],this},fromMat4:function(u){var l=u.val,h=this.val;return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=l[4],h[4]=l[5],h[5]=l[6],h[6]=l[8],h[7]=l[9],h[8]=l[10],this},fromArray:function(u){var l=this.val;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=u[6],l[7]=u[7],l[8]=u[8],this},identity:function(){var u=this.val;return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=1,u[5]=0,u[6]=0,u[7]=0,u[8]=1,this},transpose:function(){var u=this.val,l=u[1],h=u[2],n=u[5];return u[1]=u[3],u[2]=u[6],u[3]=l,u[5]=u[7],u[6]=h,u[7]=n,this},invert:function(){var u=this.val,l=u[0],h=u[1],n=u[2],r=u[3],f=u[4],a=u[5],c=u[6],p=u[7],v=u[8],m=v*f-a*p,y=-v*r+a*c,E=p*r-f*c,P=l*m+h*y+n*E;return P?(P=1/P,u[0]=m*P,u[1]=(-v*h+n*p)*P,u[2]=(a*h-n*f)*P,u[3]=y*P,u[4]=(v*l-n*c)*P,u[5]=(-a*l+n*r)*P,u[6]=E*P,u[7]=(-p*l+h*c)*P,u[8]=(f*l-h*r)*P,this):null},adjoint:function(){var u=this.val,l=u[0],h=u[1],n=u[2],r=u[3],f=u[4],a=u[5],c=u[6],p=u[7],v=u[8];return u[0]=f*v-a*p,u[1]=n*p-h*v,u[2]=h*a-n*f,u[3]=a*c-r*v,u[4]=l*v-n*c,u[5]=n*r-l*a,u[6]=r*p-f*c,u[7]=h*c-l*p,u[8]=l*f-h*r,this},determinant:function(){var u=this.val,l=u[0],h=u[1],n=u[2],r=u[3],f=u[4],a=u[5],c=u[6],p=u[7],v=u[8];return l*(v*f-a*p)+h*(-v*r+a*c)+n*(p*r-f*c)},multiply:function(u){var l=this.val,h=l[0],n=l[1],r=l[2],f=l[3],a=l[4],c=l[5],p=l[6],v=l[7],m=l[8],y=u.val,E=y[0],P=y[1],S=y[2],w=y[3],A=y[4],R=y[5],O=y[6],F=y[7],L=y[8];return l[0]=E*h+P*f+S*p,l[1]=E*n+P*a+S*v,l[2]=E*r+P*c+S*m,l[3]=w*h+A*f+R*p,l[4]=w*n+A*a+R*v,l[5]=w*r+A*c+R*m,l[6]=O*h+F*f+L*p,l[7]=O*n+F*a+L*v,l[8]=O*r+F*c+L*m,this},translate:function(u){var l=this.val,h=u.x,n=u.y;return l[6]=h*l[0]+n*l[3]+l[6],l[7]=h*l[1]+n*l[4]+l[7],l[8]=h*l[2]+n*l[5]+l[8],this},rotate:function(u){var l=this.val,h=l[0],n=l[1],r=l[2],f=l[3],a=l[4],c=l[5],p=Math.sin(u),v=Math.cos(u);return l[0]=v*h+p*f,l[1]=v*n+p*a,l[2]=v*r+p*c,l[3]=v*f-p*h,l[4]=v*a-p*n,l[5]=v*c-p*r,this},scale:function(u){var l=this.val,h=u.x,n=u.y;return l[0]=h*l[0],l[1]=h*l[1],l[2]=h*l[2],l[3]=n*l[3],l[4]=n*l[4],l[5]=n*l[5],this},fromQuat:function(u){var l=u.x,h=u.y,n=u.z,r=u.w,f=l+l,a=h+h,c=n+n,p=l*f,v=l*a,m=l*c,y=h*a,E=h*c,P=n*c,S=r*f,w=r*a,A=r*c,R=this.val;return R[0]=1-(y+P),R[3]=v+A,R[6]=m-w,R[1]=v-A,R[4]=1-(p+P),R[7]=E+S,R[2]=m+w,R[5]=E-S,R[8]=1-(p+y),this},normalFromMat4:function(u){var l=u.val,h=this.val,n=l[0],r=l[1],f=l[2],a=l[3],c=l[4],p=l[5],v=l[6],m=l[7],y=l[8],E=l[9],P=l[10],S=l[11],w=l[12],A=l[13],R=l[14],O=l[15],F=n*p-r*c,L=n*v-f*c,D=n*m-a*c,I=r*v-f*p,B=r*m-a*p,V=f*m-a*v,Y=y*A-E*w,W=y*R-P*w,$=y*O-S*w,N=E*R-P*A,U=E*O-S*A,b=P*O-S*R,G=F*b-L*U+D*N+I*$-B*W+V*Y;return G?(G=1/G,h[0]=(p*b-v*U+m*N)*G,h[1]=(v*$-c*b-m*W)*G,h[2]=(c*U-p*$+m*Y)*G,h[3]=(f*U-r*b-a*N)*G,h[4]=(n*b-f*$+a*W)*G,h[5]=(r*$-n*U-a*Y)*G,h[6]=(A*V-R*B+O*I)*G,h[7]=(R*D-w*V-O*L)*G,h[8]=(w*B-A*D+O*F)*G,this):null}});o.exports=x},16650:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(70015),u=1e-6,l=new d({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new l(this)},set:function(c){return this.copy(c)},setValues:function(c,p,v,m,y,E,P,S,w,A,R,O,F,L,D,I){var B=this.val;return B[0]=c,B[1]=p,B[2]=v,B[3]=m,B[4]=y,B[5]=E,B[6]=P,B[7]=S,B[8]=w,B[9]=A,B[10]=R,B[11]=O,B[12]=F,B[13]=L,B[14]=D,B[15]=I,this},copy:function(c){var p=c.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(c){return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(c,p,v){var m=h.fromQuat(v),y=m.val,E=p.x,P=p.y,S=p.z;return this.setValues(y[0]*E,y[1]*E,y[2]*E,0,y[4]*P,y[5]*P,y[6]*P,0,y[8]*S,y[9]*S,y[10]*S,0,c.x,c.y,c.z,1)},xyz:function(c,p,v){this.identity();var m=this.val;return m[12]=c,m[13]=p,m[14]=v,this},scaling:function(c,p,v){this.zero();var m=this.val;return m[0]=c,m[5]=p,m[10]=v,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var c=this.val,p=c[1],v=c[2],m=c[3],y=c[6],E=c[7],P=c[11];return c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=p,c[6]=c[9],c[7]=c[13],c[8]=v,c[9]=y,c[11]=c[14],c[12]=m,c[13]=E,c[14]=P,this},getInverse:function(c){return this.copy(c),this.invert()},invert:function(){var c=this.val,p=c[0],v=c[1],m=c[2],y=c[3],E=c[4],P=c[5],S=c[6],w=c[7],A=c[8],R=c[9],O=c[10],F=c[11],L=c[12],D=c[13],I=c[14],B=c[15],V=p*P-v*E,Y=p*S-m*E,W=p*w-y*E,$=v*S-m*P,N=v*w-y*P,U=m*w-y*S,b=A*D-R*L,G=A*I-O*L,z=A*B-F*L,X=R*I-O*D,k=R*B-F*D,H=O*B-F*I,K=V*H-Y*k+W*X+$*z-N*G+U*b;return K?(K=1/K,this.setValues((P*H-S*k+w*X)*K,(m*k-v*H-y*X)*K,(D*U-I*N+B*$)*K,(O*N-R*U-F*$)*K,(S*z-E*H-w*G)*K,(p*H-m*z+y*G)*K,(I*W-L*U-B*Y)*K,(A*U-O*W+F*Y)*K,(E*k-P*z+w*b)*K,(v*z-p*k-y*b)*K,(L*N-D*W+B*V)*K,(R*W-A*N-F*V)*K,(P*G-E*X-S*b)*K,(p*X-v*G+m*b)*K,(D*Y-L*$-I*V)*K,(A*$-R*Y+O*V)*K)):this},adjoint:function(){var c=this.val,p=c[0],v=c[1],m=c[2],y=c[3],E=c[4],P=c[5],S=c[6],w=c[7],A=c[8],R=c[9],O=c[10],F=c[11],L=c[12],D=c[13],I=c[14],B=c[15];return this.setValues(P*(O*B-F*I)-R*(S*B-w*I)+D*(S*F-w*O),-(v*(O*B-F*I)-R*(m*B-y*I)+D*(m*F-y*O)),v*(S*B-w*I)-P*(m*B-y*I)+D*(m*w-y*S),-(v*(S*F-w*O)-P*(m*F-y*O)+R*(m*w-y*S)),-(E*(O*B-F*I)-A*(S*B-w*I)+L*(S*F-w*O)),p*(O*B-F*I)-A*(m*B-y*I)+L*(m*F-y*O),-(p*(S*B-w*I)-E*(m*B-y*I)+L*(m*w-y*S)),p*(S*F-w*O)-E*(m*F-y*O)+A*(m*w-y*S),E*(R*B-F*D)-A*(P*B-w*D)+L*(P*F-w*R),-(p*(R*B-F*D)-A*(v*B-y*D)+L*(v*F-y*R)),p*(P*B-w*D)-E*(v*B-y*D)+L*(v*w-y*P),-(p*(P*F-w*R)-E*(v*F-y*R)+A*(v*w-y*P)),-(E*(R*I-O*D)-A*(P*I-S*D)+L*(P*O-S*R)),p*(R*I-O*D)-A*(v*I-m*D)+L*(v*O-m*R),-(p*(P*I-S*D)-E*(v*I-m*D)+L*(v*S-m*P)),p*(P*O-S*R)-E*(v*O-m*R)+A*(v*S-m*P))},determinant:function(){var c=this.val,p=c[0],v=c[1],m=c[2],y=c[3],E=c[4],P=c[5],S=c[6],w=c[7],A=c[8],R=c[9],O=c[10],F=c[11],L=c[12],D=c[13],I=c[14],B=c[15],V=p*P-v*E,Y=p*S-m*E,W=p*w-y*E,$=v*S-m*P,N=v*w-y*P,U=m*w-y*S,b=A*D-R*L,G=A*I-O*L,z=A*B-F*L,X=R*I-O*D,k=R*B-F*D,H=O*B-F*I;return V*H-Y*k+W*X+$*z-N*G+U*b},multiply:function(c){var p=this.val,v=p[0],m=p[1],y=p[2],E=p[3],P=p[4],S=p[5],w=p[6],A=p[7],R=p[8],O=p[9],F=p[10],L=p[11],D=p[12],I=p[13],B=p[14],V=p[15],Y=c.val,W=Y[0],$=Y[1],N=Y[2],U=Y[3];return p[0]=W*v+$*P+N*R+U*D,p[1]=W*m+$*S+N*O+U*I,p[2]=W*y+$*w+N*F+U*B,p[3]=W*E+$*A+N*L+U*V,W=Y[4],$=Y[5],N=Y[6],U=Y[7],p[4]=W*v+$*P+N*R+U*D,p[5]=W*m+$*S+N*O+U*I,p[6]=W*y+$*w+N*F+U*B,p[7]=W*E+$*A+N*L+U*V,W=Y[8],$=Y[9],N=Y[10],U=Y[11],p[8]=W*v+$*P+N*R+U*D,p[9]=W*m+$*S+N*O+U*I,p[10]=W*y+$*w+N*F+U*B,p[11]=W*E+$*A+N*L+U*V,W=Y[12],$=Y[13],N=Y[14],U=Y[15],p[12]=W*v+$*P+N*R+U*D,p[13]=W*m+$*S+N*O+U*I,p[14]=W*y+$*w+N*F+U*B,p[15]=W*E+$*A+N*L+U*V,this},multiplyLocal:function(c){var p=this.val,v=c.val;return this.setValues(p[0]*v[0]+p[1]*v[4]+p[2]*v[8]+p[3]*v[12],p[0]*v[1]+p[1]*v[5]+p[2]*v[9]+p[3]*v[13],p[0]*v[2]+p[1]*v[6]+p[2]*v[10]+p[3]*v[14],p[0]*v[3]+p[1]*v[7]+p[2]*v[11]+p[3]*v[15],p[4]*v[0]+p[5]*v[4]+p[6]*v[8]+p[7]*v[12],p[4]*v[1]+p[5]*v[5]+p[6]*v[9]+p[7]*v[13],p[4]*v[2]+p[5]*v[6]+p[6]*v[10]+p[7]*v[14],p[4]*v[3]+p[5]*v[7]+p[6]*v[11]+p[7]*v[15],p[8]*v[0]+p[9]*v[4]+p[10]*v[8]+p[11]*v[12],p[8]*v[1]+p[9]*v[5]+p[10]*v[9]+p[11]*v[13],p[8]*v[2]+p[9]*v[6]+p[10]*v[10]+p[11]*v[14],p[8]*v[3]+p[9]*v[7]+p[10]*v[11]+p[11]*v[15],p[12]*v[0]+p[13]*v[4]+p[14]*v[8]+p[15]*v[12],p[12]*v[1]+p[13]*v[5]+p[14]*v[9]+p[15]*v[13],p[12]*v[2]+p[13]*v[6]+p[14]*v[10]+p[15]*v[14],p[12]*v[3]+p[13]*v[7]+p[14]*v[11]+p[15]*v[15])},premultiply:function(c){return this.multiplyMatrices(c,this)},multiplyMatrices:function(c,p){var v=c.val,m=p.val,y=v[0],E=v[4],P=v[8],S=v[12],w=v[1],A=v[5],R=v[9],O=v[13],F=v[2],L=v[6],D=v[10],I=v[14],B=v[3],V=v[7],Y=v[11],W=v[15],$=m[0],N=m[4],U=m[8],b=m[12],G=m[1],z=m[5],X=m[9],k=m[13],H=m[2],K=m[6],Z=m[10],J=m[14],j=m[3],Q=m[7],_=m[11],q=m[15];return this.setValues(y*$+E*G+P*H+S*j,w*$+A*G+R*H+O*j,F*$+L*G+D*H+I*j,B*$+V*G+Y*H+W*j,y*N+E*z+P*K+S*Q,w*N+A*z+R*K+O*Q,F*N+L*z+D*K+I*Q,B*N+V*z+Y*K+W*Q,y*U+E*X+P*Z+S*_,w*U+A*X+R*Z+O*_,F*U+L*X+D*Z+I*_,B*U+V*X+Y*Z+W*_,y*b+E*k+P*J+S*q,w*b+A*k+R*J+O*q,F*b+L*k+D*J+I*q,B*b+V*k+Y*J+W*q)},translate:function(c){return this.translateXYZ(c.x,c.y,c.z)},translateXYZ:function(c,p,v){var m=this.val;return m[12]=m[0]*c+m[4]*p+m[8]*v+m[12],m[13]=m[1]*c+m[5]*p+m[9]*v+m[13],m[14]=m[2]*c+m[6]*p+m[10]*v+m[14],m[15]=m[3]*c+m[7]*p+m[11]*v+m[15],this},scale:function(c){return this.scaleXYZ(c.x,c.y,c.z)},scaleXYZ:function(c,p,v){var m=this.val;return m[0]=m[0]*c,m[1]=m[1]*c,m[2]=m[2]*c,m[3]=m[3]*c,m[4]=m[4]*p,m[5]=m[5]*p,m[6]=m[6]*p,m[7]=m[7]*p,m[8]=m[8]*v,m[9]=m[9]*v,m[10]=m[10]*v,m[11]=m[11]*v,this},makeRotationAxis:function(c,p){var v=Math.cos(p),m=Math.sin(p),y=1-v,E=c.x,P=c.y,S=c.z,w=y*E,A=y*P;return this.setValues(w*E+v,w*P-m*S,w*S+m*P,0,w*P+m*S,A*P+v,A*S-m*E,0,w*S-m*P,A*S+m*E,y*S*S+v,0,0,0,0,1)},rotate:function(c,p){var v=this.val,m=p.x,y=p.y,E=p.z,P=Math.sqrt(m*m+y*y+E*E);if(Math.abs(P)<u)return this;P=1/P,m*=P,y*=P,E*=P;var S=Math.sin(c),w=Math.cos(c),A=1-w,R=v[0],O=v[1],F=v[2],L=v[3],D=v[4],I=v[5],B=v[6],V=v[7],Y=v[8],W=v[9],$=v[10],N=v[11],U=v[12],b=v[13],G=v[14],z=v[15],X=m*m*A+w,k=y*m*A+E*S,H=E*m*A-y*S,K=m*y*A-E*S,Z=y*y*A+w,J=E*y*A+m*S,j=m*E*A+y*S,Q=y*E*A-m*S,_=E*E*A+w;return this.setValues(R*X+D*k+Y*H,O*X+I*k+W*H,F*X+B*k+$*H,L*X+V*k+N*H,R*K+D*Z+Y*J,O*K+I*Z+W*J,F*K+B*Z+$*J,L*K+V*Z+N*J,R*j+D*Q+Y*_,O*j+I*Q+W*_,F*j+B*Q+$*_,L*j+V*Q+N*_,U,b,G,z)},rotateX:function(c){var p=this.val,v=Math.sin(c),m=Math.cos(c),y=p[4],E=p[5],P=p[6],S=p[7],w=p[8],A=p[9],R=p[10],O=p[11];return p[4]=y*m+w*v,p[5]=E*m+A*v,p[6]=P*m+R*v,p[7]=S*m+O*v,p[8]=w*m-y*v,p[9]=A*m-E*v,p[10]=R*m-P*v,p[11]=O*m-S*v,this},rotateY:function(c){var p=this.val,v=Math.sin(c),m=Math.cos(c),y=p[0],E=p[1],P=p[2],S=p[3],w=p[8],A=p[9],R=p[10],O=p[11];return p[0]=y*m-w*v,p[1]=E*m-A*v,p[2]=P*m-R*v,p[3]=S*m-O*v,p[8]=y*v+w*m,p[9]=E*v+A*m,p[10]=P*v+R*m,p[11]=S*v+O*m,this},rotateZ:function(c){var p=this.val,v=Math.sin(c),m=Math.cos(c),y=p[0],E=p[1],P=p[2],S=p[3],w=p[4],A=p[5],R=p[6],O=p[7];return p[0]=y*m+w*v,p[1]=E*m+A*v,p[2]=P*m+R*v,p[3]=S*m+O*v,p[4]=w*m-y*v,p[5]=A*m-E*v,p[6]=R*m-P*v,p[7]=O*m-S*v,this},fromRotationTranslation:function(c,p){var v=c.x,m=c.y,y=c.z,E=c.w,P=v+v,S=m+m,w=y+y,A=v*P,R=v*S,O=v*w,F=m*S,L=m*w,D=y*w,I=E*P,B=E*S,V=E*w;return this.setValues(1-(F+D),R+V,O-B,0,R-V,1-(A+D),L+I,0,O+B,L-I,1-(A+F),0,p.x,p.y,p.z,1)},fromQuat:function(c){var p=c.x,v=c.y,m=c.z,y=c.w,E=p+p,P=v+v,S=m+m,w=p*E,A=p*P,R=p*S,O=v*P,F=v*S,L=m*S,D=y*E,I=y*P,B=y*S;return this.setValues(1-(O+L),A+B,R-I,0,A-B,1-(w+L),F+D,0,R+I,F-D,1-(w+O),0,0,0,0,1)},frustum:function(c,p,v,m,y,E){var P=1/(p-c),S=1/(m-v),w=1/(y-E);return this.setValues(y*2*P,0,0,0,0,y*2*S,0,0,(p+c)*P,(m+v)*S,(E+y)*w,-1,0,0,E*y*2*w,0)},perspective:function(c,p,v,m){var y=1/Math.tan(c/2),E=1/(v-m);return this.setValues(y/p,0,0,0,0,y,0,0,0,0,(m+v)*E,-1,0,0,2*m*v*E,0)},perspectiveLH:function(c,p,v,m){return this.setValues(2*v/c,0,0,0,0,2*v/p,0,0,0,0,-m/(v-m),1,0,0,v*m/(v-m),0)},ortho:function(c,p,v,m,y,E){var P=c-p,S=v-m,w=y-E;return P=P===0?P:1/P,S=S===0?S:1/S,w=w===0?w:1/w,this.setValues(-2*P,0,0,0,0,-2*S,0,0,0,0,2*w,0,(c+p)*P,(m+v)*S,(E+y)*w,1)},lookAtRH:function(c,p,v){var m=this.val;return a.subVectors(c,p),a.getLengthSquared()===0&&(a.z=1),a.normalize(),r.crossVectors(v,a),r.getLengthSquared()===0&&(Math.abs(v.z)===1?a.x+=1e-4:a.z+=1e-4,a.normalize(),r.crossVectors(v,a)),r.normalize(),f.crossVectors(a,r),m[0]=r.x,m[1]=r.y,m[2]=r.z,m[4]=f.x,m[5]=f.y,m[6]=f.z,m[8]=a.x,m[9]=a.y,m[10]=a.z,this},lookAt:function(c,p,v){var m=c.x,y=c.y,E=c.z,P=v.x,S=v.y,w=v.z,A=p.x,R=p.y,O=p.z;if(Math.abs(m-A)<u&&Math.abs(y-R)<u&&Math.abs(E-O)<u)return this.identity();var F=m-A,L=y-R,D=E-O,I=1/Math.sqrt(F*F+L*L+D*D);F*=I,L*=I,D*=I;var B=S*D-w*L,V=w*F-P*D,Y=P*L-S*F;I=Math.sqrt(B*B+V*V+Y*Y),I?(I=1/I,B*=I,V*=I,Y*=I):(B=0,V=0,Y=0);var W=L*Y-D*V,$=D*B-F*Y,N=F*V-L*B;return I=Math.sqrt(W*W+$*$+N*N),I?(I=1/I,W*=I,$*=I,N*=I):(W=0,$=0,N=0),this.setValues(B,W,F,0,V,$,L,0,Y,N,D,0,-(B*m+V*y+Y*E),-(W*m+$*y+N*E),-(F*m+L*y+D*E),1)},yawPitchRoll:function(c,p,v){this.zero(),h.zero(),n.zero();var m=this.val,y=h.val,E=n.val,P=Math.sin(v),S=Math.cos(v);return m[10]=1,m[15]=1,m[0]=S,m[1]=P,m[4]=-P,m[5]=S,P=Math.sin(p),S=Math.cos(p),y[0]=1,y[15]=1,y[5]=S,y[10]=S,y[9]=-P,y[6]=P,P=Math.sin(c),S=Math.cos(c),E[5]=1,E[15]=1,E[0]=S,E[2]=-P,E[8]=P,E[10]=S,this.multiplyLocal(h),this.multiplyLocal(n),this},setWorldMatrix:function(c,p,v,m,y){return this.yawPitchRoll(c.y,c.x,c.z),h.scaling(v.x,v.y,v.z),n.xyz(p.x,p.y,p.z),this.multiplyLocal(h),this.multiplyLocal(n),m&&this.multiplyLocal(m),y&&this.multiplyLocal(y),this},multiplyToMat4:function(c,p){var v=this.val,m=c.val,y=v[0],E=v[1],P=v[2],S=v[3],w=v[4],A=v[5],R=v[6],O=v[7],F=v[8],L=v[9],D=v[10],I=v[11],B=v[12],V=v[13],Y=v[14],W=v[15],$=m[0],N=m[1],U=m[2],b=m[3],G=m[4],z=m[5],X=m[6],k=m[7],H=m[8],K=m[9],Z=m[10],J=m[11],j=m[12],Q=m[13],_=m[14],q=m[15];return p.setValues($*y+N*w+U*F+b*B,N*E+N*A+U*L+b*V,U*P+N*R+U*D+b*Y,b*S+N*O+U*I+b*W,G*y+z*w+X*F+k*B,G*E+z*A+X*L+k*V,G*P+z*R+X*D+k*Y,G*S+z*O+X*I+k*W,H*y+K*w+Z*F+J*B,H*E+K*A+Z*L+J*V,H*P+K*R+Z*D+J*Y,H*S+K*O+Z*I+J*W,j*y+Q*w+_*F+q*B,j*E+Q*A+_*L+q*V,j*P+Q*R+_*D+q*Y,j*S+Q*O+_*I+q*W)},fromRotationXYTranslation:function(c,p,v){var m=p.x,y=p.y,E=p.z,P=Math.sin(c.x),S=Math.cos(c.x),w=Math.sin(c.y),A=Math.cos(c.y),R=m,O=y,F=E,L=-P,D=0-L*w,I=0-S*w,B=L*A,V=S*A;return v||(R=A*m+w*E,O=D*m+S*y+B*E,F=I*m+P*y+V*E),this.setValues(A,D,I,0,0,S,P,0,w,B,V,0,R,O,F,1)},getMaxScaleOnAxis:function(){var c=this.val,p=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],v=c[4]*c[4]+c[5]*c[5]+c[6]*c[6],m=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(p,v,m))}}),h=new l,n=new l,r=new x,f=new x,a=new x;o.exports=l},69635:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return Math.min(e+d,x)};o.exports=T},37394:o=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=e.length;if(d===0)return 0;e.sort(function(u,l){return u-l});var x=Math.floor(d/2);return d%2===0?(e[x]+e[x-1])/2:e[x]};o.exports=T},17259:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return Math.max(e-d,x)};o.exports=T},61820:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){x===void 0&&(x=d+1);var l=(e-d)/(x-d);return l>1?u!==void 0?(l=(u-e)/(u-x),l<0&&(l=0)):l=1:l<0&&(l=0),l};o.exports=T},75003:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(5341),u=e(72283),l=e(70015),h=1e-6,n=new Int8Array([1,2,0]),r=new Float32Array([0,0,0]),f=new l(1,0,0),a=new l(0,1,0),c=new l,p=new x,v=new d({initialize:function(y,E,P,S){this.onChangeCallback=u,this.set(y,E,P,S)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,y,E,P,S){return S===void 0&&(S=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=y||0,this._z=E||0,this._w=P||0),S&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,y=this.y,E=this.z,P=this.w;return Math.sqrt(m*m+y*y+E*E+P*P)},lengthSq:function(){var m=this.x,y=this.y,E=this.z,P=this.w;return m*m+y*y+E*E+P*P},normalize:function(){var m=this.x,y=this.y,E=this.z,P=this.w,S=m*m+y*y+E*E+P*P;return S>0&&(S=1/Math.sqrt(S),this._x=m*S,this._y=y*S,this._z=E*S,this._w=P*S),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,y){y===void 0&&(y=0);var E=this.x,P=this.y,S=this.z,w=this.w;return this.set(E+y*(m.x-E),P+y*(m.y-P),S+y*(m.z-S),w+y*(m.w-w))},rotationTo:function(m,y){var E=m.x*y.x+m.y*y.y+m.z*y.z;return E<-.999999?(c.copy(f).cross(m).length()<h&&c.copy(a).cross(m),c.normalize(),this.setAxisAngle(c,Math.PI)):E>.999999?this.set(0,0,0,1):(c.copy(m).cross(y),this._x=c.x,this._y=c.y,this._z=c.z,this._w=1+E,this.normalize())},setAxes:function(m,y,E){var P=p.val;return P[0]=y.x,P[3]=y.y,P[6]=y.z,P[1]=E.x,P[4]=E.y,P[7]=E.z,P[2]=-m.x,P[5]=-m.y,P[8]=-m.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,y){y=y*.5;var E=Math.sin(y);return this.set(E*m.x,E*m.y,E*m.z,Math.cos(y))},multiply:function(m){var y=this.x,E=this.y,P=this.z,S=this.w,w=m.x,A=m.y,R=m.z,O=m.w;return this.set(y*O+S*w+E*R-P*A,E*O+S*A+P*w-y*R,P*O+S*R+y*A-E*w,S*O-y*w-E*A-P*R)},slerp:function(m,y){var E=this.x,P=this.y,S=this.z,w=this.w,A=m.x,R=m.y,O=m.z,F=m.w,L=E*A+P*R+S*O+w*F;L<0&&(L=-L,A=-A,R=-R,O=-O,F=-F);var D=1-y,I=y;if(1-L>h){var B=Math.acos(L),V=Math.sin(B);D=Math.sin((1-y)*B)/V,I=Math.sin(y*B)/V}return this.set(D*E+I*A,D*P+I*R,D*S+I*O,D*w+I*F)},invert:function(){var m=this.x,y=this.y,E=this.z,P=this.w,S=m*m+y*y+E*E+P*P,w=S?1/S:0;return this.set(-m*w,-y*w,-E*w,P*w)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var y=this.x,E=this.y,P=this.z,S=this.w,w=Math.sin(m),A=Math.cos(m);return this.set(y*A+S*w,E*A+P*w,P*A-E*w,S*A-y*w)},rotateY:function(m){m*=.5;var y=this.x,E=this.y,P=this.z,S=this.w,w=Math.sin(m),A=Math.cos(m);return this.set(y*A-P*w,E*A+S*w,P*A+y*w,S*A-E*w)},rotateZ:function(m){m*=.5;var y=this.x,E=this.y,P=this.z,S=this.w,w=Math.sin(m),A=Math.cos(m);return this.set(y*A+E*w,E*A-y*w,P*A+S*w,S*A-P*w)},calculateW:function(){var m=this.x,y=this.y,E=this.z;return this.w=-Math.sqrt(1-m*m-y*y-E*E),this},setFromEuler:function(m,y){var E=m.x/2,P=m.y/2,S=m.z/2,w=Math.cos(E),A=Math.cos(P),R=Math.cos(S),O=Math.sin(E),F=Math.sin(P),L=Math.sin(S);switch(m.order){case"XYZ":{this.set(O*A*R+w*F*L,w*F*R-O*A*L,w*A*L+O*F*R,w*A*R-O*F*L,y);break}case"YXZ":{this.set(O*A*R+w*F*L,w*F*R-O*A*L,w*A*L-O*F*R,w*A*R+O*F*L,y);break}case"ZXY":{this.set(O*A*R-w*F*L,w*F*R+O*A*L,w*A*L+O*F*R,w*A*R-O*F*L,y);break}case"ZYX":{this.set(O*A*R-w*F*L,w*F*R+O*A*L,w*A*L-O*F*R,w*A*R+O*F*L,y);break}case"YZX":{this.set(O*A*R+w*F*L,w*F*R+O*A*L,w*A*L-O*F*R,w*A*R-O*F*L,y);break}case"XZY":{this.set(O*A*R-w*F*L,w*F*R-O*A*L,w*A*L+O*F*R,w*A*R+O*F*L,y);break}}return this},setFromRotationMatrix:function(m){var y=m.val,E=y[0],P=y[4],S=y[8],w=y[1],A=y[5],R=y[9],O=y[2],F=y[6],L=y[10],D=E+A+L,I;return D>0?(I=.5/Math.sqrt(D+1),this.set((F-R)*I,(S-O)*I,(w-P)*I,.25/I)):E>A&&E>L?(I=2*Math.sqrt(1+E-A-L),this.set(.25*I,(P+w)/I,(S+O)/I,(F-R)/I)):A>L?(I=2*Math.sqrt(1+A-E-L),this.set((P+w)/I,.25*I,(R+F)/I,(S-O)/I)):(I=2*Math.sqrt(1+L-E-A),this.set((S+O)/I,(R+F)/I,.25*I,(w-P)/I)),this},fromMat3:function(m){var y=m.val,E=y[0]+y[4]+y[8],P;if(E>0)P=Math.sqrt(E+1),this.w=.5*P,P=.5/P,this._x=(y[7]-y[5])*P,this._y=(y[2]-y[6])*P,this._z=(y[3]-y[1])*P;else{var S=0;y[4]>y[0]&&(S=1),y[8]>y[S*3+S]&&(S=2);var w=n[S],A=n[w];P=Math.sqrt(y[S*3+S]-y[w*3+w]-y[A*3+A]+1),r[S]=.5*P,P=.5/P,r[w]=(y[w*3+S]+y[S*3+w])*P,r[A]=(y[A*3+S]+y[S*3+A])*P,this._x=r[0],this._y=r[1],this._z=r[2],this._w=(y[A*3+w]-y[w*3+A])*P}return this.onChangeCallback(this),this}});o.exports=v},23701:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=function(u){return u*d.RAD_TO_DEG};o.exports=x},16906:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1);var x=Math.random()*2*Math.PI;return e.x=Math.cos(x)*d,e.y=Math.sin(x)*d,e};o.exports=T},52417:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1);var x=Math.random()*2*Math.PI,u=Math.random()*2-1,l=Math.sqrt(1-u*u)*d;return e.x=Math.cos(x)*l,e.y=Math.sin(x)*l,e.z=u*d,e};o.exports=T},17915:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1),e.x=(Math.random()*2-1)*d,e.y=(Math.random()*2-1)*d,e.z=(Math.random()*2-1)*d,e.w=(Math.random()*2-1)*d,e};o.exports=T},52257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x,u=e.y;return e.x=x*Math.cos(d)-u*Math.sin(d),e.y=x*Math.sin(d)+u*Math.cos(d),e};o.exports=T},2386:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=Math.cos(u),h=Math.sin(u),n=e.x-d,r=e.y-x;return e.x=n*l-r*h+d,e.y=n*h+r*l+x,e};o.exports=T},72395:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l){var h=u+Math.atan2(e.y-x,e.x-d);return e.x=d+l*Math.cos(h),e.y=x+l*Math.sin(h),e};o.exports=T},41061:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l){return e.x=d+l*Math.cos(u),e.y=x+l*Math.sin(u),e};o.exports=T},93709:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(70015),x=e(16650),u=e(75003),l=new x,h=new u,n=new d,r=function(f,a,c){return h.setAxisAngle(a,c),l.fromRotationTranslation(h,n.set(0,0,0)),f.transformMat4(l)};o.exports=r},67233:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0?Math.ceil(e):Math.floor(e)};o.exports=T},64333:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=0),x===void 0&&(x=10);var u=Math.pow(x,-d);return Math.round(e*u)/u};o.exports=T},59533:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d===void 0&&(d=1),x===void 0&&(x=1),u===void 0&&(u=1),u*=Math.PI/e;for(var l=[],h=[],n=0;n<e;n++)x-=d*u,d+=x*u,l[n]=x,h[n]=d;return{sin:h,cos:l,length:e}};o.exports=T},5514:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e<=d?0:e>=x?1:(e=(e-d)/(x-d),e*e*(3-2*e))};o.exports=T},87736:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e=Math.max(0,Math.min(1,(e-d)/(x-d))),e*e*e*(e*(e*6-15)+10)};o.exports=T},55805:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n){n===void 0&&(n=new d);var r=0,f=0,a=l*h;return u>0&&u<=a&&(u>l-1?(f=Math.floor(u/l),r=u-f*l):r=u),n.set(r,f)};o.exports=x},64462:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r,f,a,c){c===void 0&&(c=new d);var p=Math.sin(r),v=Math.cos(r),m=v*f,y=p*f,E=-p*a,P=v*a,S=1/(m*P+E*-y);return c.x=P*S*u+-E*S*l+(n*E-h*P)*S,c.y=m*S*l+-y*S*u+(-n*m+h*y)*S,c};o.exports=x},93736:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(88456),u=new d({initialize:function(h,n){this.x=0,this.y=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0):(n===void 0&&(n=h),this.x=h||0,this.y=n||0)},clone:function(){return new u(this.x,this.y)},copy:function(l){return this.x=l.x||0,this.y=l.y||0,this},setFromObject:function(l){return this.x=l.x||0,this.y=l.y||0,this},set:function(l,h){return h===void 0&&(h=l),this.x=l,this.y=h,this},setTo:function(l,h){return this.set(l,h)},setToPolar:function(l,h){return h==null&&(h=1),this.x=Math.cos(l)*h,this.y=Math.sin(l)*h,this},equals:function(l){return this.x===l.x&&this.y===l.y},fuzzyEquals:function(l,h){return x(this.x,l.x,h)&&x(this.y,l.y,h)},angle:function(){var l=Math.atan2(this.y,this.x);return l<0&&(l+=2*Math.PI),l},setAngle:function(l){return this.setToPolar(l,this.length())},add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this},scale:function(l){return isFinite(l)?(this.x*=l,this.y*=l):(this.x=0,this.y=0),this},divide:function(l){return this.x/=l.x,this.y/=l.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(l){var h=l.x-this.x,n=l.y-this.y;return Math.sqrt(h*h+n*n)},distanceSq:function(l){var h=l.x-this.x,n=l.y-this.y;return h*h+n*n},length:function(){var l=this.x,h=this.y;return Math.sqrt(l*l+h*h)},setLength:function(l){return this.normalize().scale(l)},lengthSq:function(){var l=this.x,h=this.y;return l*l+h*h},normalize:function(){var l=this.x,h=this.y,n=l*l+h*h;return n>0&&(n=1/Math.sqrt(n),this.x=l*n,this.y=h*n),this},normalizeRightHand:function(){var l=this.x;return this.x=this.y*-1,this.y=l,this},normalizeLeftHand:function(){var l=this.x;return this.x=this.y,this.y=l*-1,this},dot:function(l){return this.x*l.x+this.y*l.y},cross:function(l){return this.x*l.y-this.y*l.x},lerp:function(l,h){h===void 0&&(h=0);var n=this.x,r=this.y;return this.x=n+h*(l.x-n),this.y=r+h*(l.y-r),this},transformMat3:function(l){var h=this.x,n=this.y,r=l.val;return this.x=r[0]*h+r[3]*n+r[6],this.y=r[1]*h+r[4]*n+r[7],this},transformMat4:function(l){var h=this.x,n=this.y,r=l.val;return this.x=r[0]*h+r[4]*n+r[12],this.y=r[1]*h+r[5]*n+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(l){var h=this.length();return h&&h>l&&this.scale(l/h),this},reflect:function(l){return l=l.clone().normalize(),this.subtract(l.scale(2*this.dot(l)))},mirror:function(l){return this.reflect(l).negate()},rotate:function(l){var h=Math.cos(l),n=Math.sin(l);return this.set(h*this.x-n*this.y,n*this.x+h*this.y)},project:function(l){var h=this.dot(l)/l.dot(l);return this.copy(l).scale(h)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),o.exports=u},70015:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h,n){this.x=0,this.y=0,this.z=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0):(this.x=l||0,this.y=h||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(u){return this.x=Math.min(this.x,u.x),this.y=Math.min(this.y,u.y),this.z=Math.min(this.z,u.z),this},max:function(u){return this.x=Math.max(this.x,u.x),this.y=Math.max(this.y,u.y),this.z=Math.max(this.z,u.z),this},clone:function(){return new x(this.x,this.y,this.z)},addVectors:function(u,l){return this.x=u.x+l.x,this.y=u.y+l.y,this.z=u.z+l.z,this},crossVectors:function(u,l){var h=u.x,n=u.y,r=u.z,f=l.x,a=l.y,c=l.z;return this.x=n*c-r*a,this.y=r*f-h*c,this.z=h*a-n*f,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this},set:function(u,l,h){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=l||0,this.z=h||0),this},setFromMatrixPosition:function(u){return this.fromArray(u.val,12)},setFromMatrixColumn:function(u,l){return this.fromArray(u.val,l*4)},fromArray:function(u,l){return l===void 0&&(l=0),this.x=u[l],this.y=u[l+1],this.z=u[l+2],this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this},addScalar:function(u){return this.x+=u,this.y+=u,this.z+=u,this},addScale:function(u,l){return this.x+=u.x*l,this.y+=u.y*l,this.z+=u.z*l||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u,this.z*=u):(this.x=0,this.y=0,this.z=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(u){var l=u.x-this.x,h=u.y-this.y,n=u.z-this.z||0;return Math.sqrt(l*l+h*h+n*n)},distanceSq:function(u){var l=u.x-this.x,h=u.y-this.y,n=u.z-this.z||0;return l*l+h*h+n*n},length:function(){var u=this.x,l=this.y,h=this.z;return Math.sqrt(u*u+l*l+h*h)},lengthSq:function(){var u=this.x,l=this.y,h=this.z;return u*u+l*l+h*h},normalize:function(){var u=this.x,l=this.y,h=this.z,n=u*u+l*l+h*h;return n>0&&(n=1/Math.sqrt(n),this.x=u*n,this.y=l*n,this.z=h*n),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z},cross:function(u){var l=this.x,h=this.y,n=this.z,r=u.x,f=u.y,a=u.z;return this.x=h*a-n*f,this.y=n*r-l*a,this.z=l*f-h*r,this},lerp:function(u,l){l===void 0&&(l=0);var h=this.x,n=this.y,r=this.z;return this.x=h+l*(u.x-h),this.y=n+l*(u.y-n),this.z=r+l*(u.z-r),this},applyMatrix3:function(u){var l=this.x,h=this.y,n=this.z,r=u.val;return this.x=r[0]*l+r[3]*h+r[6]*n,this.y=r[1]*l+r[4]*h+r[7]*n,this.z=r[2]*l+r[5]*h+r[8]*n,this},applyMatrix4:function(u){var l=this.x,h=this.y,n=this.z,r=u.val,f=1/(r[3]*l+r[7]*h+r[11]*n+r[15]);return this.x=(r[0]*l+r[4]*h+r[8]*n+r[12])*f,this.y=(r[1]*l+r[5]*h+r[9]*n+r[13])*f,this.z=(r[2]*l+r[6]*h+r[10]*n+r[14])*f,this},transformMat3:function(u){var l=this.x,h=this.y,n=this.z,r=u.val;return this.x=l*r[0]+h*r[3]+n*r[6],this.y=l*r[1]+h*r[4]+n*r[7],this.z=l*r[2]+h*r[5]+n*r[8],this},transformMat4:function(u){var l=this.x,h=this.y,n=this.z,r=u.val;return this.x=r[0]*l+r[4]*h+r[8]*n+r[12],this.y=r[1]*l+r[5]*h+r[9]*n+r[13],this.z=r[2]*l+r[6]*h+r[10]*n+r[14],this},transformCoordinates:function(u){var l=this.x,h=this.y,n=this.z,r=u.val,f=l*r[0]+h*r[4]+n*r[8]+r[12],a=l*r[1]+h*r[5]+n*r[9]+r[13],c=l*r[2]+h*r[6]+n*r[10]+r[14],p=l*r[3]+h*r[7]+n*r[11]+r[15];return this.x=f/p,this.y=a/p,this.z=c/p,this},transformQuat:function(u){var l=this.x,h=this.y,n=this.z,r=u.x,f=u.y,a=u.z,c=u.w,p=c*l+f*n-a*h,v=c*h+a*l-r*n,m=c*n+r*h-f*l,y=-r*l-f*h-a*n;return this.x=p*c+y*-r+v*-a-m*-f,this.y=v*c+y*-f+m*-r-p*-a,this.z=m*c+y*-a+p*-f-v*-r,this},project:function(u){var l=this.x,h=this.y,n=this.z,r=u.val,f=r[0],a=r[1],c=r[2],p=r[3],v=r[4],m=r[5],y=r[6],E=r[7],P=r[8],S=r[9],w=r[10],A=r[11],R=r[12],O=r[13],F=r[14],L=r[15],D=1/(l*p+h*E+n*A+L);return this.x=(l*f+h*v+n*P+R)*D,this.y=(l*a+h*m+n*S+O)*D,this.z=(l*c+h*y+n*w+F)*D,this},projectViewMatrix:function(u,l){return this.applyMatrix4(u).applyMatrix4(l)},unprojectViewMatrix:function(u,l){return this.applyMatrix4(u).applyMatrix4(l)},unproject:function(u,l){var h=u.x,n=u.y,r=u.z,f=u.w,a=this.x-h,c=f-this.y-1-n,p=this.z;return this.x=2*a/r-1,this.y=2*c/f-1,this.z=2*p-1,this.project(l)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});x.ZERO=new x,x.RIGHT=new x(1,0,0),x.LEFT=new x(-1,0,0),x.UP=new x(0,-1,0),x.DOWN=new x(0,1,0),x.FORWARD=new x(0,0,1),x.BACK=new x(0,0,-1),x.ONE=new x(1,1,1),o.exports=x},51729:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h,n,r){this.x=0,this.y=0,this.z=0,this.w=0,typeof l=="object"?(this.x=l.x||0,this.y=l.y||0,this.z=l.z||0,this.w=l.w||0):(this.x=l||0,this.y=h||0,this.z=n||0,this.w=r||0)},clone:function(){return new x(this.x,this.y,this.z,this.w)},copy:function(u){return this.x=u.x,this.y=u.y,this.z=u.z||0,this.w=u.w||0,this},equals:function(u){return this.x===u.x&&this.y===u.y&&this.z===u.z&&this.w===u.w},set:function(u,l,h,n){return typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=l||0,this.z=h||0,this.w=n||0),this},add:function(u){return this.x+=u.x,this.y+=u.y,this.z+=u.z||0,this.w+=u.w||0,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this.z-=u.z||0,this.w-=u.w||0,this},scale:function(u){return this.x*=u,this.y*=u,this.z*=u,this.w*=u,this},length:function(){var u=this.x,l=this.y,h=this.z,n=this.w;return Math.sqrt(u*u+l*l+h*h+n*n)},lengthSq:function(){var u=this.x,l=this.y,h=this.z,n=this.w;return u*u+l*l+h*h+n*n},normalize:function(){var u=this.x,l=this.y,h=this.z,n=this.w,r=u*u+l*l+h*h+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=u*r,this.y=l*r,this.z=h*r,this.w=n*r),this},dot:function(u){return this.x*u.x+this.y*u.y+this.z*u.z+this.w*u.w},lerp:function(u,l){l===void 0&&(l=0);var h=this.x,n=this.y,r=this.z,f=this.w;return this.x=h+l*(u.x-h),this.y=n+l*(u.y-n),this.z=r+l*(u.z-r),this.w=f+l*(u.w-f),this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this.z*=u.z||1,this.w*=u.w||1,this},divide:function(u){return this.x/=u.x,this.y/=u.y,this.z/=u.z||1,this.w/=u.w||1,this},distance:function(u){var l=u.x-this.x,h=u.y-this.y,n=u.z-this.z||0,r=u.w-this.w||0;return Math.sqrt(l*l+h*h+n*n+r*r)},distanceSq:function(u){var l=u.x-this.x,h=u.y-this.y,n=u.z-this.z||0,r=u.w-this.w||0;return l*l+h*h+n*n+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(u){var l=this.x,h=this.y,n=this.z,r=this.w,f=u.val;return this.x=f[0]*l+f[4]*h+f[8]*n+f[12]*r,this.y=f[1]*l+f[5]*h+f[9]*n+f[13]*r,this.z=f[2]*l+f[6]*h+f[10]*n+f[14]*r,this.w=f[3]*l+f[7]*h+f[11]*n+f[15]*r,this},transformQuat:function(u){var l=this.x,h=this.y,n=this.z,r=u.x,f=u.y,a=u.z,c=u.w,p=c*l+f*n-a*h,v=c*h+a*l-r*n,m=c*n+r*h-f*l,y=-r*l-f*h-a*n;return this.x=p*c+y*-r+v*-a-m*-f,this.y=v*c+y*-f+m*-r-p*-a,this.z=m*c+y*-a+p*-f-v*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});x.prototype.sub=x.prototype.subtract,x.prototype.mul=x.prototype.multiply,x.prototype.div=x.prototype.divide,x.prototype.dist=x.prototype.distance,x.prototype.distSq=x.prototype.distanceSq,x.prototype.len=x.prototype.length,x.prototype.lenSq=x.prototype.lengthSq,o.exports=x},9557:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return Math.abs(e-d)<=x};o.exports=T},1071:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(e>=d&&e<=x)return e;var u=x-d;return d+((e-d)%u+u)%u};o.exports=T},90447:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return Math.atan2(u-d,x-e)};o.exports=T},94240:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.atan2(d.y-e.y,d.x-e.x)};o.exports=T},84066:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return Math.atan2(d.x-e.x,d.y-e.y)};o.exports=T},9678:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return Math.atan2(x-e,u-d)};o.exports=T},76861:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=function(u){return u>Math.PI&&(u-=d.PI2),Math.abs(((u+d.TAU)%d.PI2-d.PI2)%d.PI2)};o.exports=x},37570:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};o.exports=T},87597:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61616),x=function(){return d(-Math.PI,Math.PI)};o.exports=x},74493:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61616),x=function(){return d(-180,180)};o.exports=x},19049:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(37570),x=function(u){return d(u+Math.PI)};o.exports=x},90612:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=function(u,l,h){return h===void 0&&(h=.05),u===l||(Math.abs(l-u)<=h||Math.abs(l-u)>=d.PI2-h?u=l:(Math.abs(l-u)>Math.PI&&(l<u?l+=d.PI2:l-=d.PI2),l>u?u+=h:l<u&&(u-=h))),u};o.exports=x},93954:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=d-e;if(x===0)return 0;var u=Math.floor((x- -180)/360);return x-u*360};o.exports=T},35786:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),x=function(u){return d(u,-Math.PI,Math.PI)};o.exports=x},62138:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(1071),x=function(u){return d(u,-180,180)};o.exports=x},22153:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:e(90447),BetweenPoints:e(94240),BetweenPointsY:e(84066),BetweenY:e(9678),CounterClockwise:e(76861),Normalize:e(37570),Random:e(87597),RandomDegrees:e(74493),Reverse:e(19049),RotateTo:e(90612),ShortestBetween:e(93954),Wrap:e(35786),WrapDegrees:e(62138)}},83392:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};o.exports=T},53996:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=e-x,h=d-u;return Math.sqrt(l*l+h*h)};o.exports=T},92951:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x-d.x,u=e.y-d.y;return Math.sqrt(x*x+u*u)};o.exports=T},12161:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.x-d.x,u=e.y-d.y;return x*x+u*u};o.exports=T},38057:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return Math.max(Math.abs(e-x),Math.abs(d-u))};o.exports=T},33297:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l){return l===void 0&&(l=2),Math.sqrt(Math.pow(x-e,l)+Math.pow(u-d,l))};o.exports=T},90366:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return Math.abs(e-x)+Math.abs(d-u)};o.exports=T},35032:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=e-x,h=d-u;return l*l+h*h};o.exports=T},10130:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Between:e(53996),BetweenPoints:e(92951),BetweenPointsSquared:e(12161),Chebyshev:e(38057),Power:e(33297),Snake:e(90366),Squared:e(35032)}},35060:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25265),x=e(57428),u=e(73214),l=e(71778),h=e(36468),n=e(88258),r=e(52910),f=e(67799),a=e(74083),c=e(92284),p=e(28035),v=e(8754);o.exports={Power0:r,Power1:f.Out,Power2:l.Out,Power3:a.Out,Power4:c.Out,Linear:r,Quad:f.Out,Cubic:l.Out,Quart:a.Out,Quint:c.Out,Sine:p.Out,Expo:n.Out,Circ:u.Out,Elastic:h.Out,Back:d.Out,Bounce:x.Out,Stepped:v,"Quad.easeIn":f.In,"Cubic.easeIn":l.In,"Quart.easeIn":a.In,"Quint.easeIn":c.In,"Sine.easeIn":p.In,"Expo.easeIn":n.In,"Circ.easeIn":u.In,"Elastic.easeIn":h.In,"Back.easeIn":d.In,"Bounce.easeIn":x.In,"Quad.easeOut":f.Out,"Cubic.easeOut":l.Out,"Quart.easeOut":a.Out,"Quint.easeOut":c.Out,"Sine.easeOut":p.Out,"Expo.easeOut":n.Out,"Circ.easeOut":u.Out,"Elastic.easeOut":h.Out,"Back.easeOut":d.Out,"Bounce.easeOut":x.Out,"Quad.easeInOut":f.InOut,"Cubic.easeInOut":l.InOut,"Quart.easeInOut":a.InOut,"Quint.easeInOut":c.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":n.InOut,"Circ.easeInOut":u.InOut,"Elastic.easeInOut":h.InOut,"Back.easeInOut":d.InOut,"Bounce.easeInOut":x.InOut}},25860:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1.70158),e*e*((d+1)*e-d)};o.exports=T},45264:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1.70158);var x=d*1.525;return(e*=2)<1?.5*(e*e*((x+1)*e-x)):.5*((e-=2)*e*((x+1)*e+x)+2)};o.exports=T},36699:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1.70158),--e*e*((d+1)*e+d)+1};o.exports=T},25265:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(25860),Out:e(36699),InOut:e(45264)}},62191:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};o.exports=T},24799:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=!1;return e<.5?(e=1-e*2,d=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,d?(1-e)*.5:e*.5+.5};o.exports=T},60819:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};o.exports=T},57428:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(62191),Out:e(60819),InOut:e(24799)}},86855:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.sqrt(1-e*e)};o.exports=T},7280:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};o.exports=T},18058:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.sqrt(1- --e*e)};o.exports=T},73214:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(86855),Out:e(18058),InOut:e(7280)}},91532:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e};o.exports=T},63180:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};o.exports=T},16518:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e+1};o.exports=T},71778:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(91532),Out:e(16518),InOut:e(63180)}},24729:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return d<1?d=1:u=x*Math.asin(1/d)/(2*Math.PI),-(d*Math.pow(2,10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x))};o.exports=T},50325:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return d<1?d=1:u=x*Math.asin(1/d)/(2*Math.PI),(e*=2)<1?-.5*(d*Math.pow(2,10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x)):d*Math.pow(2,-10*(e-=1))*Math.sin((e-u)*(2*Math.PI)/x)*.5+1};o.exports=T},84074:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===void 0&&(d=.1),x===void 0&&(x=.1),e===0)return 0;if(e===1)return 1;var u=x/4;return d<1?d=1:u=x*Math.asin(1/d)/(2*Math.PI),d*Math.pow(2,-10*e)*Math.sin((e-u)*(2*Math.PI)/x)+1};o.exports=T},36468:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(24729),Out:e(84074),InOut:e(50325)}},95638:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return Math.pow(2,10*(e-1))-.001};o.exports=T},10357:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};o.exports=T},14894:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1-Math.pow(2,-10*e)};o.exports=T},88258:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(95638),Out:e(14894),InOut:e(10357)}},33063:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Back:e(25265),Bounce:e(57428),Circular:e(73214),Cubic:e(71778),Elastic:e(36468),Expo:e(88258),Linear:e(52910),Quadratic:e(67799),Quartic:e(74083),Quintic:e(92284),Sine:e(28035),Stepped:e(8754)}},43927:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e};o.exports=T},52910:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=e(43927)},77471:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e};o.exports=T},83863:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};o.exports=T},44383:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*(2-e)};o.exports=T},67799:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(77471),Out:e(44383),InOut:e(83863)}},48311:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e};o.exports=T},55248:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};o.exports=T},23135:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return 1- --e*e*e*e};o.exports=T},74083:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(48311),Out:e(23135),InOut:e(55248)}},7313:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e*e*e*e*e};o.exports=T},98759:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};o.exports=T},26670:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return--e*e*e*e*e+1};o.exports=T},92284:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(7313),Out:e(26670),InOut:e(98759)}},52929:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};o.exports=T},66333:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};o.exports=T},37255:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};o.exports=T},28035:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={In:e(52929),Out:e(37255),InOut:e(66333)}},52770:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1),e<=0?0:e>=1?1:((d*e|0)+1)*(1/d)};o.exports=T},8754:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=e(52770)},17247:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1e-4),Math.ceil(e-d)};o.exports=T},88456:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=1e-4),Math.abs(e-d)<x};o.exports=T},61824:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===void 0&&(d=1e-4),Math.floor(e+d)};o.exports=T},41935:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=1e-4),e>d-x};o.exports=T},54726:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return x===void 0&&(x=1e-4),e<d+x};o.exports=T},52778:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:e(17247),Equal:e(88456),Floor:e(61824),GreaterThan:e(41935),LessThan:e(54726)}},5923:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(83392),x=e(98611),u={Angle:e(22153),Distance:e(10130),Easing:e(33063),Fuzzy:e(52778),Interpolation:e(48528),Pow2:e(73773),Snap:e(23679),RandomDataGenerator:e(81429),Average:e(26042),Bernstein:e(22824),Between:e(17489),CatmullRom:e(14976),CeilTo:e(89129),Clamp:e(82897),DegToRad:e(75606),Difference:e(767),Euler:e(9849),Factorial:e(8034),FloatBetween:e(61616),FloorTo:e(60679),FromPercent:e(91806),GetSpeed:e(79366),IsEven:e(43776),IsEvenStrict:e(58442),Linear:e(42798),LinearXY:e(61072),MaxAdd:e(69635),Median:e(37394),MinSub:e(17259),Percent:e(61820),RadToDeg:e(23701),RandomXY:e(16906),RandomXYZ:e(52417),RandomXYZW:e(17915),Rotate:e(52257),RotateAround:e(2386),RotateAroundDistance:e(72395),RotateTo:e(41061),RoundAwayFromZero:e(67233),RoundTo:e(64333),SinCosTableGenerator:e(59533),SmootherStep:e(87736),SmoothStep:e(5514),ToXY:e(55805),TransformXY:e(64462),Within:e(9557),Wrap:e(1071),Vector2:e(93736),Vector3:e(70015),Vector4:e(51729),Matrix3:e(5341),Matrix4:e(16650),Quaternion:e(75003),RotateVec3:e(93709)};u=x(!1,u,d),o.exports=u},63210:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(22824),x=function(u,l){for(var h=0,n=u.length-1,r=0;r<=n;r++)h+=Math.pow(1-l,n-r)*Math.pow(l,r)*u[r]*d(n,r);return h};o.exports=x},88332:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14976),x=function(u,l){var h=u.length-1,n=h*l,r=Math.floor(n);return u[0]===u[h]?(l<0&&(r=Math.floor(n=h*(1+l))),d(n-r,u[(r-1+h)%h],u[r],u[(r+1)%h],u[(r+2)%h])):l<0?u[0]-(d(-n,u[0],u[0],u[1],u[1])-u[0]):l>1?u[h]-(d(n-h,u[h],u[h],u[h-1],u[h-1])-u[h]):d(n-r,u[r?r-1:0],u[r],u[h<r+1?h:r+1],u[h<r+2?h:r+2])};o.exports=x},34631:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(l,h){var n=1-l;return n*n*n*h}function e(l,h){var n=1-l;return 3*n*n*l*h}function d(l,h){return 3*(1-l)*l*l*h}function x(l,h){return l*l*l*h}var u=function(l,h,n,r,f){return T(l,h)+e(l,n)+d(l,r)+x(l,f)};o.exports=u},47614:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42798),x=function(u,l){var h=u.length-1,n=h*l,r=Math.floor(n);return l<0?d(u[0],u[1],n):l>1?d(u[h],u[h-1],h-n):d(u[r],u[r+1>h?h:r+1],n-r)};o.exports=x},16252:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(u,l){var h=1-u;return h*h*l}function e(u,l){return 2*(1-u)*u*l}function d(u,l){return u*u*l}var x=function(u,l,h,n){return T(u,l)+e(u,h)+d(u,n)};o.exports=x},44521:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5514),x=function(u,l,h){return l+(h-l)*d(u,0,1)};o.exports=x},45507:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(87736),x=function(u,l,h){return l+(h-l)*d(u,0,1)};o.exports=x},48528:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bezier:e(63210),CatmullRom:e(88332),CubicBezier:e(34631),Linear:e(47614),QuadraticBezier:e(16252),SmoothStep:e(44521),SmootherStep:e(45507)}},3504:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=Math.log(e)/.6931471805599453;return 1<<Math.ceil(d)};o.exports=T},28621:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e>0&&(e&e-1)===0&&d>0&&(d&d-1)===0};o.exports=T},2018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e>0&&(e&e-1)===0};o.exports=T},73773:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetNext:e(3504),IsSize:e(28621),IsValue:e(2018)}},81429:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l){l===void 0&&(l=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],l&&this.init(l)},rnd:function(){var u=2091639*this.s0+this.c*23283064365386963e-26;return this.c=u|0,this.s0=this.s1,this.s1=this.s2,this.s2=u-this.c,this.s2},hash:function(u){var l,h=this.n;u=u.toString();for(var n=0;n<u.length;n++)h+=u.charCodeAt(n),l=.02519603282416938*h,h=l>>>0,l-=h,l*=h,h=l>>>0,l-=h,h+=l*4294967296;return this.n=h,(h>>>0)*23283064365386963e-26},init:function(u){typeof u=="string"?this.state(u):this.sow(u)},sow:function(u){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!u)for(var l=0;l<u.length&&u[l]!=null;l++){var h=u[l];this.s0-=this.hash(h),this.s0+=~~(this.s0<0),this.s1-=this.hash(h),this.s1+=~~(this.s1<0),this.s2-=this.hash(h),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(u,l){return Math.floor(this.realInRange(0,l-u+1)+u)},between:function(u,l){return Math.floor(this.realInRange(0,l-u+1)+u)},realInRange:function(u,l){return this.frac()*(l-u)+u},normal:function(){return 1-2*this.frac()},uuid:function(){var u="",l="";for(l=u="";u++<36;l+=~u%5|u*3&4?(u^15?8^this.frac()*(u^20?16:4):4).toString(16):"-");return l},pick:function(u){return u[this.integerInRange(0,u.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(u){return u[~~(Math.pow(this.frac(),2)*(u.length-1)+.5)]},timestamp:function(u,l){return this.realInRange(u||9466848e5,l||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(u){return typeof u=="string"&&u.match(/^!rnd/)&&(u=u.split(","),this.c=parseFloat(u[1]),this.s0=parseFloat(u[2]),this.s1=parseFloat(u[3]),this.s2=parseFloat(u[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(u){for(var l=u.length-1,h=l;h>0;h--){var n=Math.floor(this.frac()*(h+1)),r=u[n];u[n]=u[h],u[h]=r}return u}});o.exports=x},82127:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return x===void 0&&(x=0),d===0?e:(e-=x,e=d*Math.ceil(e/d),u?(x+e)/d:x+e)};o.exports=T},84314:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return x===void 0&&(x=0),d===0?e:(e-=x,e=d*Math.floor(e/d),u?(x+e)/d:x+e)};o.exports=T},88462:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){return x===void 0&&(x=0),d===0?e:(e-=x,e=d*Math.round(e/d),u?(x+e)/d:x+e)};o.exports=T},23679:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Ceil:e(82127),Floor:e(84314),To:e(88462)}},92491:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e(75205);var d=e(86459),x=e(98611),u={Actions:e(83979),Animations:e(13517),BlendModes:e(95723),Cache:e(45820),Cameras:e(44143),Core:e(80293),Class:e(56694),Create:e(84106),Curves:e(73962),Data:e(1999),Display:e(24816),DOM:e(3590),Events:e(95146),FX:e(96910),Game:e(15213),GameObjects:e(48013),Geom:e(84068),Input:e(20873),Loader:e(95695),Math:e(5923),Physics:e(53954),Plugins:e(45615),Renderer:e(42069),Scale:e(86754),ScaleModes:e(27394),Scene:e(87157),Scenes:e(20436),Structs:e(20010),Textures:e(87499),Tilemaps:e(52678),Time:e(97121),Tweens:e(75193),Utils:e(22178)};u.Sound=e(56751),u=x(!1,u,d),o.exports=u,e.g.Phaser=u},62832:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(7864),u=e(1539),l=new d({Extends:u,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(n,r,f,a,c){u.call(this,n,r,f,a,c),this.body=null}});o.exports=l},66150:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(75606),u=e(53996),l=e(35032),h=e(99523),n=e(72632),r=e(30657),f=e(2732),a=e(15147),c=e(91963),p=e(7599),v=e(93736),m=e(85233),y=new d({initialize:function(P){this.scene=P,this.systems=P.sys,this.config=this.getConfig(),this.world,this.add,P.sys.events.once(p.BOOT,this.boot,this),P.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new h(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new h(this.world));var E=this.systems.events;n(this.config,"customUpdate",!1)||E.on(p.UPDATE,this.world.update,this.world),E.on(p.POST_UPDATE,this.world.postUpdate,this.world),E.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var E=this.systems.game.config.physics,P=this.systems.settings.physics,S=r(n(P,"arcade",{}),n(E,"arcade",{}));return S},overlap:function(E,P,S,w,A){return S===void 0&&(S=null),w===void 0&&(w=null),A===void 0&&(A=S),this.world.collideObjects(E,P,S,w,A,!0)},collide:function(E,P,S,w,A){return S===void 0&&(S=null),w===void 0&&(w=null),A===void 0&&(A=S),this.world.collideObjects(E,P,S,w,A,!1)},collideTiles:function(E,P,S,w,A){return this.world.collideTiles(E,P,S,w,A)},overlapTiles:function(E,P,S,w,A){return this.world.overlapTiles(E,P,S,w,A)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(E,P,S,w,A,R){w===void 0&&(w=60);var O=Math.atan2(S-E.y,P-E.x);return E.body.acceleration.setToPolar(O,w),A!==void 0&&R!==void 0&&E.body.maxVelocity.set(A,R),O},accelerateToObject:function(E,P,S,w,A){return this.accelerateTo(E,P.x,P.y,S,w,A)},closest:function(E,P){P||(P=this.world.bodies.entries);for(var S=Number.MAX_VALUE,w=null,A=E.x,R=E.y,O=P.length,F=0;F<O;F++){var L=P[F],D=L.body||L;if(!(E===L||E===D||E===D.gameObject||E===D.center)){var I=l(A,R,D.center.x,D.center.y);I<S&&(w=L,S=I)}}return w},furthest:function(E,P){P||(P=this.world.bodies.entries);for(var S=-1,w=null,A=E.x,R=E.y,O=P.length,F=0;F<O;F++){var L=P[F],D=L.body||L;if(!(E===L||E===D||E===D.gameObject||E===D.center)){var I=l(A,R,D.center.x,D.center.y);I>S&&(w=L,S=I)}}return w},moveTo:function(E,P,S,w,A){w===void 0&&(w=60),A===void 0&&(A=0);var R=Math.atan2(S-E.y,P-E.x);return A>0&&(w=u(E.x,E.y,P,S)/(A/1e3)),E.body.velocity.setToPolar(R,w),R},moveToObject:function(E,P,S,w){return this.moveTo(E,P.x,P.y,S,w)},velocityFromAngle:function(E,P,S){return P===void 0&&(P=60),S===void 0&&(S=new v),S.setToPolar(x(E),P)},velocityFromRotation:function(E,P,S){return P===void 0&&(P=60),S===void 0&&(S=new v),S.setToPolar(E,P)},overlapRect:function(E,P,S,w,A,R){return a(this.world,E,P,S,w,A,R)},overlapCirc:function(E,P,S,w,A){return f(this.world,E,P,S,w,A)},shutdown:function(){if(!!this.world){var E=this.systems.events;E.off(p.UPDATE,this.world.update,this.world),E.off(p.POST_UPDATE,this.world.postUpdate,this.world),E.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});c.register("ArcadePhysics",y,"arcadePhysics"),o.exports=y},25084:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(7864),u=e(13747),l=new d({Extends:u,Mixins:[x.Acceleration,x.Angular,x.Bounce,x.Debug,x.Drag,x.Enable,x.Friction,x.Gravity,x.Immovable,x.Mass,x.Pushable,x.Size,x.Velocity],initialize:function(n,r,f,a,c){u.call(this,n,r,f,a,c),this.body=null}});o.exports=l},97602:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(47401),u=e(27037),l=e(23701),h=e(74118),n=e(94287),r=e(93736),f=new d({initialize:function(c,p){var v=64,m=64,y={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=p!==void 0;E&&p.displayWidth&&(v=p.displayWidth,m=p.displayHeight),E||(p=y),this.world=c,this.gameObject=E?p:void 0,this.isBody=!0,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=c.defaults.debugShowBody,this.debugShowVelocity=c.defaults.debugShowVelocity,this.debugBodyColor=c.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new r,this.position=new r(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=v,this.height=m,this.sourceWidth=v,this.sourceHeight=m,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(v/2),this.halfHeight=Math.abs(m/2),this.center=new r(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new r,this.newVelocity=new r,this.deltaMax=new r,this.acceleration=new r,this.allowDrag=!0,this.drag=new r,this.allowGravity=!0,this.gravity=new r,this.bounce=new r,this.worldBounce=null,this.customBoundsRectangle=c.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new r(1e4,1e4),this.maxSpeed=-1,this.friction=new r(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=x.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=x.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new h},updateBounds:function(){var a=this.gameObject,c=this.transform;if(a.parentContainer){var p=a.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);c.x=p.tx,c.y=p.ty,c.rotation=l(p.rotation),c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.displayOriginX=a.displayOriginX,c.displayOriginY=a.displayOriginY}else c.x=a.x,c.y=a.y,c.rotation=a.angle,c.scaleX=a.scaleX,c.scaleY=a.scaleY,c.displayOriginX=a.displayOriginX,c.displayOriginY=a.displayOriginY;var v=!1;if(this.syncBounds){var m=a.getBounds(this._bounds);this.width=m.width,this.height=m.height,v=!0}else{var y=Math.abs(c.scaleX),E=Math.abs(c.scaleY);(this._sx!==y||this._sy!==E)&&(this.width=this.sourceWidth*y,this.height=this.sourceHeight*E,this._sx=y,this._sy=E,v=!0)}v&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var a=this.transform;this.position.x=a.x+a.scaleX*(this.offset.x-a.displayOriginX),this.position.y=a.y+a.scaleY*(this.offset.y-a.displayOriginY),this.updateCenter()},resetFlags:function(a){a===void 0&&(a=!1);var c=this.wasTouching,p=this.touching,v=this.blocked;a?(c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1):(c.none=p.none,c.up=p.up,c.down=p.down,c.left=p.left,c.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(a,c){a&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),a&&this.update(c)},update:function(a){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,a);var c=this.velocity.x,p=this.velocity.y;this.newVelocity.set(c*a,p*a),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,c),this.speed=Math.sqrt(c*c+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(u.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var a=this.position.x-this.prevFrame.x,c=this.position.y-this.prevFrame.y,p=this.gameObject;if(this.moves){var v=this.deltaMax.x,m=this.deltaMax.y;v!==0&&a!==0&&(a<0&&a<-v?a=-v:a>0&&a>v&&(a=v)),m!==0&&c!==0&&(c<0&&c<-m?c=-m:c>0&&c>m&&(c=m)),p&&(p.x+=a,p.y+=c)}a<0?this.facing=x.FACING_LEFT:a>0&&(this.facing=x.FACING_RIGHT),c<0?this.facing=x.FACING_UP:c>0&&(this.facing=x.FACING_DOWN),this.allowRotation&&p&&(p.angle+=this.deltaZ()),this._tx=a,this._ty=c},setBoundsRectangle:function(a){return this.customBoundsRectangle=a||this.world.bounds,this},checkWorldBounds:function(){var a=this.position,c=this.customBoundsRectangle,p=this.world.checkCollision,v=this.worldBounce?-this.worldBounce.x:-this.bounce.x,m=this.worldBounce?-this.worldBounce.y:-this.bounce.y,y=!1;return a.x<c.x&&p.left?(a.x=c.x,this.velocity.x*=v,this.blocked.left=!0,y=!0):this.right>c.right&&p.right&&(a.x=c.right-this.width,this.velocity.x*=v,this.blocked.right=!0,y=!0),a.y<c.y&&p.up?(a.y=c.y,this.velocity.y*=m,this.blocked.up=!0,y=!0):this.bottom>c.bottom&&p.down&&(a.y=c.bottom-this.height,this.velocity.y*=m,this.blocked.down=!0,y=!0),y&&(this.blocked.none=!1,this.updateCenter()),y},setOffset:function(a,c){return c===void 0&&(c=a),this.offset.set(a,c),this},setGameObject:function(a,c){return c===void 0&&(c=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=a,a.body&&(a.body=this),this.setSize(),this.world.add(this),this.enable=c,this},setSize:function(a,c,p){p===void 0&&(p=!0);var v=this.gameObject;if(v&&(!a&&v.frame&&(a=v.frame.realWidth),!c&&v.frame&&(c=v.frame.realHeight)),this.sourceWidth=a,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&v&&v.getCenter){var m=(v.width-a)/2,y=(v.height-c)/2;this.offset.set(m,y)}return this.isCircle=!1,this.radius=0,this},setCircle:function(a,c,p){return c===void 0&&(c=this.offset.x),p===void 0&&(p=this.offset.y),a>0?(this.isCircle=!0,this.radius=a,this.sourceWidth=a*2,this.sourceHeight=a*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,p),this.updateCenter()):this.isCircle=!1,this},reset:function(a,c){this.stop();var p=this.gameObject;p&&(p.setPosition(a,c),this.rotation=p.angle,this.preRotation=p.angle);var v=this.position;p&&p.getTopLeft?p.getTopLeft(v):v.set(a,c),this.prev.copy(v),this.prevFrame.copy(v),p&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(a){return a.x=this.x,a.y=this.y,a.right=this.right,a.bottom=this.bottom,a},hitTest:function(a,c){if(!this.isCircle)return n(this,a,c);if(this.radius>0&&a>=this.left&&a<=this.right&&c>=this.top&&c<=this.bottom){var p=(this.center.x-a)*(this.center.x-a),v=(this.center.y-c)*(this.center.y-c);return p+v<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(a){var c=this.position,p=c.x+this.halfWidth,v=c.y+this.halfHeight;this.debugShowBody&&(a.lineStyle(a.defaultStrokeWidth,this.debugBodyColor),this.isCircle?a.strokeCircle(p,v,this.width/2):(this.checkCollision.up&&a.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&a.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&a.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&a.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(a.lineStyle(a.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),a.lineBetween(p,v,p+this.velocity.x/2,v+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(a,c,p,v){a===void 0&&(a=!0),this.collideWorldBounds=a;var m=c!==void 0,y=p!==void 0;return(m||y)&&(this.worldBounce||(this.worldBounce=new r),m&&(this.worldBounce.x=c),y&&(this.worldBounce.y=p)),v!==void 0&&(this.onWorldBounds=v),this},setVelocity:function(a,c){return this.velocity.set(a,c),a=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(a*a+c*c),this},setVelocityX:function(a){return this.setVelocity(a,this.velocity.y)},setVelocityY:function(a){return this.setVelocity(this.velocity.x,a)},setMaxVelocity:function(a,c){return this.maxVelocity.set(a,c),this},setMaxVelocityX:function(a){return this.maxVelocity.x=a,this},setMaxVelocityY:function(a){return this.maxVelocity.y=a,this},setMaxSpeed:function(a){return this.maxSpeed=a,this},setBounce:function(a,c){return this.bounce.set(a,c),this},setBounceX:function(a){return this.bounce.x=a,this},setBounceY:function(a){return this.bounce.y=a,this},setAcceleration:function(a,c){return this.acceleration.set(a,c),this},setAccelerationX:function(a){return this.acceleration.x=a,this},setAccelerationY:function(a){return this.acceleration.y=a,this},setAllowDrag:function(a){return a===void 0&&(a=!0),this.allowDrag=a,this},setAllowGravity:function(a){return a===void 0&&(a=!0),this.allowGravity=a,this},setAllowRotation:function(a){return a===void 0&&(a=!0),this.allowRotation=a,this},setDrag:function(a,c){return this.drag.set(a,c),this},setDamping:function(a){return this.useDamping=a,this},setDragX:function(a){return this.drag.x=a,this},setDragY:function(a){return this.drag.y=a,this},setGravity:function(a,c){return this.gravity.set(a,c),this},setGravityX:function(a){return this.gravity.x=a,this},setGravityY:function(a){return this.gravity.y=a,this},setFriction:function(a,c){return this.friction.set(a,c),this},setFrictionX:function(a){return this.friction.x=a,this},setFrictionY:function(a){return this.friction.y=a,this},setAngularVelocity:function(a){return this.angularVelocity=a,this},setAngularAcceleration:function(a){return this.angularAcceleration=a,this},setAngularDrag:function(a){return this.angularDrag=a,this},setMass:function(a){return this.mass=a,this},setImmovable:function(a){return a===void 0&&(a=!0),this.immovable=a,this},setEnable:function(a){return a===void 0&&(a=!0),this.enable=a,this},processX:function(a,c,p,v){this.x+=a,this.updateCenter(),c!==null&&(this.velocity.x=c);var m=this.blocked;p&&(m.left=!0,m.none=!1),v&&(m.right=!0,m.none=!1)},processY:function(a,c,p,v){this.y+=a,this.updateCenter(),c!==null&&(this.velocity.y=c);var m=this.blocked;p&&(m.up=!0,m.none=!1),v&&(m.down=!0,m.none=!1)},x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=f},3909:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h,n,r,f,a,c){this.world=l,this.name="",this.active=!0,this.overlapOnly=h,this.object1=n,this.object2=r,this.collideCallback=f,this.processCallback=a,this.callbackContext=c},setName:function(u){return this.name=u,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});o.exports=x},99523:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62832),x=e(25084),u=e(97602),l=e(56694),h=e(47401),n=e(10481),r=e(66634),f=e(46346),a=new l({initialize:function(p){this.world=p,this.scene=p.scene,this.sys=p.scene.sys},collider:function(c,p,v,m,y){return this.world.addCollider(c,p,v,m,y)},overlap:function(c,p,v,m,y){return this.world.addOverlap(c,p,v,m,y)},existing:function(c,p){var v=p?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(c,v),c},staticImage:function(c,p,v,m){var y=new d(this.scene,c,p,v,m);return this.sys.displayList.add(y),this.world.enableBody(y,h.STATIC_BODY),y},image:function(c,p,v,m){var y=new d(this.scene,c,p,v,m);return this.sys.displayList.add(y),this.world.enableBody(y,h.DYNAMIC_BODY),y},staticSprite:function(c,p,v,m){var y=new x(this.scene,c,p,v,m);return this.sys.displayList.add(y),this.sys.updateList.add(y),this.world.enableBody(y,h.STATIC_BODY),y},sprite:function(c,p,v,m){var y=new x(this.scene,c,p,v,m);return this.sys.displayList.add(y),this.sys.updateList.add(y),this.world.enableBody(y,h.DYNAMIC_BODY),y},staticGroup:function(c,p){return this.sys.updateList.add(new f(this.world,this.world.scene,c,p))},group:function(c,p){return this.sys.updateList.add(new n(this.world,this.world.scene,c,p))},body:function(c,p,v,m){var y=new u(this.world);return y.position.set(c,p),v&&m&&y.setSize(v,m),this.world.add(y,h.DYNAMIC_BODY),y},staticBody:function(c,p,v,m){var y=new r(this.world);return y.position.set(c,p),v&&m&&y.setSize(v,m),this.world.add(y,h.STATIC_BODY),y},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=a},75671:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),x=function(u,l,h,n){var r=0,f=u.deltaAbsX()+l.deltaAbsX()+n;return u._dx===0&&l._dx===0?(u.embedded=!0,l.embedded=!0):u._dx>l._dx?(r=u.right-l.x,r>f&&!h||u.checkCollision.right===!1||l.checkCollision.left===!1?r=0:(u.touching.none=!1,u.touching.right=!0,l.touching.none=!1,l.touching.left=!0,l.physicsType===d.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.right=!0),u.physicsType===d.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.left=!0))):u._dx<l._dx&&(r=u.x-l.width-l.x,-r>f&&!h||u.checkCollision.left===!1||l.checkCollision.right===!1?r=0:(u.touching.none=!1,u.touching.left=!0,l.touching.none=!1,l.touching.right=!0,l.physicsType===d.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.left=!0),u.physicsType===d.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.right=!0))),u.overlapX=r,l.overlapX=r,r};o.exports=x},66185:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),x=function(u,l,h,n){var r=0,f=u.deltaAbsY()+l.deltaAbsY()+n;return u._dy===0&&l._dy===0?(u.embedded=!0,l.embedded=!0):u._dy>l._dy?(r=u.bottom-l.y,r>f&&!h||u.checkCollision.down===!1||l.checkCollision.up===!1?r=0:(u.touching.none=!1,u.touching.down=!0,l.touching.none=!1,l.touching.up=!0,l.physicsType===d.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.down=!0),u.physicsType===d.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.up=!0))):u._dy<l._dy&&(r=u.y-l.bottom,-r>f&&!h||u.checkCollision.up===!1||l.checkCollision.down===!1?r=0:(u.touching.none=!1,u.touching.up=!0,l.touching.none=!1,l.touching.down=!0,l.physicsType===d.STATIC_BODY&&!h&&(u.blocked.none=!1,u.blocked.up=!0),u.physicsType===d.STATIC_BODY&&!h&&(l.blocked.none=!1,l.blocked.down=!0))),u.overlapY=r,l.overlapY=r,r};o.exports=x},10481:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25084),x=e(56694),u=e(47401),l=e(72632),h=e(59192),n=e(42911),r=new x({Extends:h,initialize:function(a,c,p,v){if(!p&&!v)v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(n(p))v=p,p=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&n(p[0])){v=p[0];var m=this;p.forEach(function(y){y.internalCreateCallback=m.createCallbackHandler,y.internalRemoveCallback=m.removeCallbackHandler}),p=null}else v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=a,v.classType=l(v,"classType",d),this.physicsType=u.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:l(v,"collideWorldBounds",!1),setBoundsRectangle:l(v,"customBoundsRectangle",null),setAccelerationX:l(v,"accelerationX",0),setAccelerationY:l(v,"accelerationY",0),setAllowDrag:l(v,"allowDrag",!0),setAllowGravity:l(v,"allowGravity",!0),setAllowRotation:l(v,"allowRotation",!0),setDamping:l(v,"useDamping",!1),setBounceX:l(v,"bounceX",0),setBounceY:l(v,"bounceY",0),setDragX:l(v,"dragX",0),setDragY:l(v,"dragY",0),setEnable:l(v,"enable",!0),setGravityX:l(v,"gravityX",0),setGravityY:l(v,"gravityY",0),setFrictionX:l(v,"frictionX",0),setFrictionY:l(v,"frictionY",0),setMaxSpeed:l(v,"maxSpeed",-1),setMaxVelocityX:l(v,"maxVelocityX",1e4),setMaxVelocityY:l(v,"maxVelocityY",1e4),setVelocityX:l(v,"velocityX",0),setVelocityY:l(v,"velocityY",0),setAngularVelocity:l(v,"angularVelocity",0),setAngularAcceleration:l(v,"angularAcceleration",0),setAngularDrag:l(v,"angularDrag",0),setMass:l(v,"mass",1),setImmovable:l(v,"immovable",!1)},h.call(this,c,p,v),this.type="PhysicsGroup"},createCallbackHandler:function(f){f.body||this.world.enableBody(f,u.DYNAMIC_BODY);var a=f.body;for(var c in this.defaults)a[c](this.defaults[c])},removeCallbackHandler:function(f){f.body&&this.world.disableBody(f)},setVelocity:function(f,a,c){c===void 0&&(c=0);for(var p=this.getChildren(),v=0;v<p.length;v++)p[v].body.velocity.set(f+v*c,a+v*c);return this},setVelocityX:function(f,a){a===void 0&&(a=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.x=f+p*a;return this},setVelocityY:function(f,a){a===void 0&&(a=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.y=f+p*a;return this}});o.exports=r},22916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,d,x,u,l,h,n,r,f,a,c,p,v,m,y,E,P=function(F,L,D){T=F,e=L;var I=T.velocity.x,B=e.velocity.x;return d=T.pushable,r=T._dx<0,f=T._dx>0,a=T._dx===0,m=Math.abs(T.right-e.x)<=Math.abs(e.right-T.x),h=B-I*T.bounce.x,x=e.pushable,c=e._dx<0,p=e._dx>0,v=e._dx===0,y=!m,n=I-B*e.bounce.x,E=Math.abs(D),S()},S=function(){return f&&m&&e.blocked.right?(T.processX(-E,h,!1,!0),1):r&&y&&e.blocked.left?(T.processX(E,h,!0),1):p&&y&&T.blocked.right?(e.processX(-E,n,!1,!0),2):c&&m&&T.blocked.left?(e.processX(E,n,!0),2):0},w=function(){var F=T.velocity.x,L=e.velocity.x,D=Math.sqrt(L*L*e.mass/T.mass)*(L>0?1:-1),I=Math.sqrt(F*F*T.mass/e.mass)*(F>0?1:-1),B=(D+I)*.5;return D-=B,I-=B,u=B+D*T.bounce.x,l=B+I*e.bounce.x,r&&y?A(0):c&&m?A(1):f&&m?A(2):p&&y?A(3):!1},A=function(F){if(d&&x)E*=.5,F===0||F===3?(T.processX(E,u),e.processX(-E,l)):(T.processX(-E,u),e.processX(E,l));else if(d&&!x)F===0||F===3?T.processX(E,h,!0):T.processX(-E,h,!1,!0);else if(!d&&x)F===0||F===3?e.processX(-E,n,!1,!0):e.processX(E,n,!0);else{var L=E*.5;F===0?v?(T.processX(E,0,!0),e.processX(0,null,!1,!0)):p?(T.processX(L,0,!0),e.processX(-L,0,!1,!0)):(T.processX(L,e.velocity.x,!0),e.processX(-L,null,!1,!0)):F===1?a?(T.processX(0,null,!1,!0),e.processX(E,0,!0)):f?(T.processX(-L,0,!1,!0),e.processX(L,0,!0)):(T.processX(-L,null,!1,!0),e.processX(L,T.velocity.x,!0)):F===2?v?(T.processX(-E,0,!1,!0),e.processX(0,null,!0)):c?(T.processX(-L,0,!1,!0),e.processX(L,0,!0)):(T.processX(-L,e.velocity.x,!1,!0),e.processX(L,null,!0)):F===3&&(a?(T.processX(0,null,!0),e.processX(-E,0,!1,!0)):r?(T.processX(L,0,!0),e.processX(-L,0,!1,!0)):(T.processX(L,e.velocity.y,!0),e.processX(-L,null,!1,!0)))}return!0},R=function(F){F===1?e.velocity.x=0:m?e.processX(E,n,!0):e.processX(-E,n,!1,!0),T.moves&&(e.y+=(T.y-T.prev.y)*T.friction.y,e._dy=e.y-e.prev.y)},O=function(F){F===2?T.velocity.x=0:y?T.processX(E,h,!0):T.processX(-E,h,!1,!0),e.moves&&(T.y+=(e.y-e.prev.y)*e.friction.y,T._dy=T.y-T.prev.y)};o.exports={BlockCheck:S,Check:w,Set:P,Run:A,RunImmovableBody1:R,RunImmovableBody2:O}},67050:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T,e,d,x,u,l,h,n,r,f,a,c,p,v,m,y,E,P=function(F,L,D){T=F,e=L;var I=T.velocity.y,B=e.velocity.y;return d=T.pushable,r=T._dy<0,f=T._dy>0,a=T._dy===0,m=Math.abs(T.bottom-e.y)<=Math.abs(e.bottom-T.y),h=B-I*T.bounce.y,x=e.pushable,c=e._dy<0,p=e._dy>0,v=e._dy===0,y=!m,n=I-B*e.bounce.y,E=Math.abs(D),S()},S=function(){return f&&m&&e.blocked.down?(T.processY(-E,h,!1,!0),1):r&&y&&e.blocked.up?(T.processY(E,h,!0),1):p&&y&&T.blocked.down?(e.processY(-E,n,!1,!0),2):c&&m&&T.blocked.up?(e.processY(E,n,!0),2):0},w=function(){var F=T.velocity.y,L=e.velocity.y,D=Math.sqrt(L*L*e.mass/T.mass)*(L>0?1:-1),I=Math.sqrt(F*F*T.mass/e.mass)*(F>0?1:-1),B=(D+I)*.5;return D-=B,I-=B,u=B+D*T.bounce.y,l=B+I*e.bounce.y,r&&y?A(0):c&&m?A(1):f&&m?A(2):p&&y?A(3):!1},A=function(F){if(d&&x)E*=.5,F===0||F===3?(T.processY(E,u),e.processY(-E,l)):(T.processY(-E,u),e.processY(E,l));else if(d&&!x)F===0||F===3?T.processY(E,h,!0):T.processY(-E,h,!1,!0);else if(!d&&x)F===0||F===3?e.processY(-E,n,!1,!0):e.processY(E,n,!0);else{var L=E*.5;F===0?v?(T.processY(E,0,!0),e.processY(0,null,!1,!0)):p?(T.processY(L,0,!0),e.processY(-L,0,!1,!0)):(T.processY(L,e.velocity.y,!0),e.processY(-L,null,!1,!0)):F===1?a?(T.processY(0,null,!1,!0),e.processY(E,0,!0)):f?(T.processY(-L,0,!1,!0),e.processY(L,0,!0)):(T.processY(-L,null,!1,!0),e.processY(L,T.velocity.y,!0)):F===2?v?(T.processY(-E,0,!1,!0),e.processY(0,null,!0)):c?(T.processY(-L,0,!1,!0),e.processY(L,0,!0)):(T.processY(-L,e.velocity.y,!1,!0),e.processY(L,null,!0)):F===3&&(a?(T.processY(0,null,!0),e.processY(-E,0,!1,!0)):r?(T.processY(L,0,!0),e.processY(-L,0,!1,!0)):(T.processY(L,e.velocity.y,!0),e.processY(-L,null,!1,!0)))}return!0},R=function(F){F===1?e.velocity.y=0:m?e.processY(E,n,!0):e.processY(-E,n,!1,!0),T.moves&&(e.x+=(T.x-T.prev.x)*T.friction.x,e._dx=e.x-e.prev.x)},O=function(F){F===2?T.velocity.y=0:y?T.processY(E,h,!0):T.processY(-E,h,!1,!0),e.moves&&(T.x+=(e.x-e.prev.x)*e.friction.x,T._dx=T.x-T.prev.x)};o.exports={BlockCheck:S,Check:w,Set:P,Run:A,RunImmovableBody1:R,RunImmovableBody2:O}},61777:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75671),x=e(22916),u=function(l,h,n,r,f){f===void 0&&(f=d(l,h,n,r));var a=l.immovable,c=h.immovable;if(n||f===0||a&&c||l.customSeparateX||h.customSeparateX)return f!==0||l.embedded&&h.embedded;var p=x.Set(l,h,f);return!a&&!c?p>0?!0:x.Check():(a?x.RunImmovableBody1(p):c&&x.RunImmovableBody2(p),!0)};o.exports=u},25299:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66185),x=e(67050),u=function(l,h,n,r,f){f===void 0&&(f=d(l,h,n,r));var a=l.immovable,c=h.immovable;if(n||f===0||a&&c||l.customSeparateY||h.customSeparateY)return f!==0||l.embedded&&h.embedded;var p=x.Set(l,h,f);return!a&&!c?p>0?!0:x.Check():(a?x.RunImmovableBody1(p):c&&x.RunImmovableBody2(p),!0)};o.exports=u},66634:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65650),x=e(56694),u=e(47401),l=e(94287),h=e(93736),n=new x({initialize:function(f,a){var c=64,p=64,v={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},m=a!==void 0;m&&a.displayWidth&&(c=a.displayWidth,p=a.displayHeight),m||(a=v),this.world=f,this.gameObject=m?a:void 0,this.isBody=!0,this.debugShowBody=f.defaults.debugShowStaticBody,this.debugBodyColor=f.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new h,this.position=new h(a.x-c*a.originX,a.y-p*a.originY),this.width=c,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new h(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=h.ZERO,this.allowGravity=!1,this.gravity=h.ZERO,this.bounce=h.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=u.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(r,f){return r&&r!==this.gameObject&&(this.gameObject.body=null,r.body=this,this.gameObject=r),f&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var r=this.gameObject;return r.getTopLeft(this.position),this.width=r.displayWidth,this.height=r.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(r,f){return f===void 0&&(f=r),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(r,f),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(r,f,a){a===void 0&&(a=!0);var c=this.gameObject;if(!r&&c.frame&&(r=c.frame.realWidth),!f&&c.frame&&(f=c.frame.realHeight),this.world.staticTree.remove(this),this.width=r,this.height=f,this.halfWidth=Math.floor(r/2),this.halfHeight=Math.floor(f/2),a&&c.getCenter){var p=c.displayWidth/2,v=c.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,v-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(r,f,a){return f===void 0&&(f=this.offset.x),a===void 0&&(a=this.offset.y),r>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=r,this.width=r*2,this.height=r*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(f,a),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(r,f){var a=this.gameObject;r===void 0&&(r=a.x),f===void 0&&(f=a.y),this.world.staticTree.remove(this),a.setPosition(r,f),a.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(r){return r.x=this.x,r.y=this.y,r.right=this.right,r.bottom=this.bottom,r},hitTest:function(r,f){return this.isCircle?d(this,r,f):l(this,r,f)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(r){var f=this.position,a=f.x+this.halfWidth,c=f.y+this.halfHeight;this.debugShowBody&&(r.lineStyle(r.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?r.strokeCircle(a,c,this.width/2):r.strokeRect(f.x,f.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(r){return r<=0&&(r=.1),this.mass=r,this},x:{get:function(){return this.position.x},set:function(r){this.world.staticTree.remove(this),this.position.x=r,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(r){this.world.staticTree.remove(this),this.position.y=r,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});o.exports=n},46346:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25084),x=e(56694),u=e(47401),l=e(72632),h=e(59192),n=e(42911),r=new x({Extends:h,initialize:function(a,c,p,v){!p&&!v?v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:d}:n(p)?(v=p,p=null,v.internalCreateCallback=this.createCallbackHandler,v.internalRemoveCallback=this.removeCallbackHandler,v.createMultipleCallback=this.createMultipleCallbackHandler,v.classType=l(v,"classType",d)):Array.isArray(p)&&n(p[0])?(v=p,p=null,v.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=l(m,"classType",d)})):v={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=a,this.physicsType=u.STATIC_BODY,h.call(this,c,p,v),this.type="StaticPhysicsGroup"},createCallbackHandler:function(f){f.body||this.world.enableBody(f,u.STATIC_BODY)},removeCallbackHandler:function(f){f.body&&this.world.disableBody(f)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var f=this.children.entries,a=0;a<f.length;a++)f[a].body.reset();return this}});o.exports=r},85233:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94240),x=e(97602),u=e(82897),l=e(56694),h=e(3909),n=e(47401),r=e(53996),f=e(92951),a=e(6659),c=e(27037),p=e(88456),v=e(41935),m=e(54726),y=e(75671),E=e(66185),P=e(44662),S=e(10850),w=e(83392),A=e(74623),R=e(25163),O=e(74118),F=e(68687),L=e(27354),D=e(61777),I=e(25299),B=e(58403),V=e(66634),Y=e(28808),W=e(69360),$=e(93736),N=e(1071),U=new l({Extends:a,initialize:function(G,z){a.call(this),this.scene=G,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new A,this.gravity=new $(S(z,"gravity.x",0),S(z,"gravity.y",0)),this.bounds=new O(S(z,"x",0),S(z,"y",0),S(z,"width",G.sys.scale.width),S(z,"height",G.sys.scale.height)),this.checkCollision={up:S(z,"checkCollision.up",!0),down:S(z,"checkCollision.down",!0),left:S(z,"checkCollision.left",!0),right:S(z,"checkCollision.right",!0)},this.fps=S(z,"fps",60),this.fixedStep=S(z,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=S(z,"timeScale",1),this.OVERLAP_BIAS=S(z,"overlapBias",4),this.TILE_BIAS=S(z,"tileBias",16),this.forceX=S(z,"forceX",!1),this.isPaused=S(z,"isPaused",!1),this._total=0,this.drawDebug=S(z,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:S(z,"debugShowBody",!0),debugShowStaticBody:S(z,"debugShowStaticBody",!0),debugShowVelocity:S(z,"debugShowVelocity",!0),bodyDebugColor:S(z,"debugBodyColor",16711935),staticBodyDebugColor:S(z,"debugStaticBodyColor",255),velocityDebugColor:S(z,"debugVelocityColor",65280)},this.maxEntries=S(z,"maxEntries",16),this.useTree=S(z,"useTree",!0),this.tree=new F(this.maxEntries),this.staticTree=new F(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new W,this._tempMatrix2=new W,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(b,G){G===void 0&&(G=n.DYNAMIC_BODY),Array.isArray(b)||(b=[b]);for(var z=0;z<b.length;z++){var X=b[z];if(X.isParent)for(var k=X.getChildren(),H=0;H<k.length;H++){var K=k[H];K.isParent?this.enable(K,G):this.enableBody(K,G)}else this.enableBody(X,G)}},enableBody:function(b,G){return G===void 0&&(G=n.DYNAMIC_BODY),b.hasTransformComponent&&(b.body||(G===n.DYNAMIC_BODY?b.body=new x(this,b):G===n.STATIC_BODY&&(b.body=new V(this,b))),this.add(b.body)),b},add:function(b){return b.physicsType===n.DYNAMIC_BODY?this.bodies.set(b):b.physicsType===n.STATIC_BODY&&(this.staticBodies.set(b),this.staticTree.insert(b)),b.enable=!0,b},disable:function(b){Array.isArray(b)||(b=[b]);for(var G=0;G<b.length;G++){var z=b[G];if(z.isParent)for(var X=z.getChildren(),k=0;k<X.length;k++){var H=X[k];H.isParent?this.disable(H):this.disableBody(H.body)}else this.disableBody(z.body)}},disableBody:function(b){this.remove(b),b.enable=!1},remove:function(b){b.physicsType===n.DYNAMIC_BODY?(this.tree.remove(b),this.bodies.delete(b)):b.physicsType===n.STATIC_BODY&&(this.staticBodies.delete(b),this.staticTree.remove(b))},createDebugGraphic:function(){var b=this.scene.sys.add.graphics({x:0,y:0});return b.setDepth(Number.MAX_VALUE),this.debugGraphic=b,this.drawDebug=!0,b},setBounds:function(b,G,z,X,k,H,K,Z){return this.bounds.setTo(b,G,z,X),k!==void 0&&this.setBoundsCollision(k,H,K,Z),this},setBoundsCollision:function(b,G,z,X){return b===void 0&&(b=!0),G===void 0&&(G=!0),z===void 0&&(z=!0),X===void 0&&(X=!0),this.checkCollision.left=b,this.checkCollision.right=G,this.checkCollision.up=z,this.checkCollision.down=X,this},pause:function(){return this.isPaused=!0,this.emit(c.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(c.RESUME),this},addCollider:function(b,G,z,X,k){z===void 0&&(z=null),X===void 0&&(X=null),k===void 0&&(k=z);var H=new h(this,!1,b,G,z,X,k);return this.colliders.add(H),H},addOverlap:function(b,G,z,X,k){z===void 0&&(z=null),X===void 0&&(X=null),k===void 0&&(k=z);var H=new h(this,!0,b,G,z,X,k);return this.colliders.add(H),H},removeCollider:function(b){return this.colliders.remove(b),this},setFPS:function(b){return this.fps=b,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(b,G){if(!(this.isPaused||this.bodies.size===0)){var z,X=this._frameTime,k=this._frameTimeMS*this.timeScale;this._elapsed+=G;var H,K=this.bodies.entries,Z=this._elapsed>=k;for(this.fixedStep||(X=G*.001,Z=!0,this._elapsed=0),z=0;z<K.length;z++)H=K[z],H.enable&&H.preUpdate(Z,X);if(Z){this._elapsed-=k,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(K));var J=this.colliders.update();for(z=0;z<J.length;z++){var j=J[z];j.active&&j.update()}this.emit(c.WORLD_STEP,X)}for(;this._elapsed>=k;)this._elapsed-=k,this.step(X)}},step:function(b){var G,z,X=this.bodies.entries,k=X.length;for(G=0;G<k;G++)z=X[G],z.enable&&z.update(b);this.useTree&&(this.tree.clear(),this.tree.load(X));var H=this.colliders.update();for(G=0;G<H.length;G++){var K=H[G];K.active&&K.update()}this.emit(c.WORLD_STEP,b),this.stepsLastFrame++},postUpdate:function(){var b,G,z=this.bodies.entries,X=z.length,k=this.bodies,H=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,b=0;b<X;b++)G=z[b],G.enable&&G.postUpdate();if(this.drawDebug){var K=this.debugGraphic;for(K.clear(),b=0;b<X;b++)G=z[b],G.willDrawDebug()&&G.drawDebug(K);for(z=H.entries,X=z.length,b=0;b<X;b++)G=z[b],G.willDrawDebug()&&G.drawDebug(K)}var Z=this.pendingDestroy;if(Z.size>0){var J=this.tree,j=this.staticTree;for(z=Z.entries,X=z.length,b=0;b<X;b++)G=z[b],G.physicsType===n.DYNAMIC_BODY?(J.remove(G),k.delete(G)):G.physicsType===n.STATIC_BODY&&(j.remove(G),H.delete(G)),G.world=void 0,G.gameObject=void 0;Z.clear()}},updateMotion:function(b,G){b.allowRotation&&this.computeAngularVelocity(b,G),this.computeVelocity(b,G)},computeAngularVelocity:function(b,G){var z=b.angularVelocity,X=b.angularAcceleration,k=b.angularDrag,H=b.maxAngular;X?z+=X*G:b.allowDrag&&k&&(k*=G,v(z-k,0,.1)?z-=k:m(z+k,0,.1)?z+=k:z=0),z=u(z,-H,H);var K=z-b.angularVelocity;b.angularVelocity+=K,b.rotation+=b.angularVelocity*G},computeVelocity:function(b,G){var z=b.velocity.x,X=b.acceleration.x,k=b.drag.x,H=b.maxVelocity.x,K=b.velocity.y,Z=b.acceleration.y,J=b.drag.y,j=b.maxVelocity.y,Q=b.speed,_=b.maxSpeed,q=b.allowDrag,et=b.useDamping;b.allowGravity&&(z+=(this.gravity.x+b.gravity.x)*G,K+=(this.gravity.y+b.gravity.y)*G),X?z+=X*G:q&&k&&(et?(k=Math.pow(k,G),z*=k,Q=Math.sqrt(z*z+K*K),p(Q,0,.001)&&(z=0)):(k*=G,v(z-k,0,.01)?z-=k:m(z+k,0,.01)?z+=k:z=0)),Z?K+=Z*G:q&&J&&(et?(J=Math.pow(J,G),K*=J,Q=Math.sqrt(z*z+K*K),p(Q,0,.001)&&(K=0)):(J*=G,v(K-J,0,.01)?K-=J:m(K+J,0,.01)?K+=J:K=0)),z=u(z,-H,H),K=u(K,-j,j),b.velocity.set(z,K),_>-1&&b.velocity.length()>_&&(b.velocity.normalize().scale(_),Q=_),b.speed=Q},separate:function(b,G,z,X,k){var H,K,Z=!1,J=!0;if(!b.enable||!G.enable||b.checkCollision.none||G.checkCollision.none||!this.intersects(b,G)||z&&z.call(X,b.gameObject,G.gameObject)===!1)return Z;if(b.isCircle||G.isCircle){var j=this.separateCircle(b,G,k);j.result?(Z=!0,J=!1):(H=j.x,K=j.y,J=!0)}if(J){var Q=!1,_=!1,q=this.OVERLAP_BIAS;k?(Q=D(b,G,k,q,H),_=I(b,G,k,q,K)):this.forceX||Math.abs(this.gravity.y+b.gravity.y)<Math.abs(this.gravity.x+b.gravity.x)?(Q=D(b,G,k,q,H),this.intersects(b,G)&&(_=I(b,G,k,q,K))):(_=I(b,G,k,q,K),this.intersects(b,G)&&(Q=D(b,G,k,q,H))),Z=Q||_}return Z&&(k?(b.onOverlap||G.onOverlap)&&this.emit(c.OVERLAP,b.gameObject,G.gameObject,b,G):(b.onCollide||G.onCollide)&&this.emit(c.COLLIDE,b.gameObject,G.gameObject,b,G)),Z},separateCircle:function(b,G,z){y(b,G,!1,0),E(b,G,!1,0);var X=b.isCircle,k=G.isCircle,H=b.center,K=G.center,Z=b.immovable,J=G.immovable,j=b.velocity,Q=G.velocity,_=0,q=!0;if(X!==k){q=!1;var et=H.x,at=H.y,ot=b.halfWidth,ht=G.position.x,tt=G.position.y,rt=G.right,nt=G.bottom;k&&(et=K.x,at=K.y,ot=G.halfWidth,ht=b.position.x,tt=b.position.y,rt=b.right,nt=b.bottom),at<tt?et<ht?_=r(et,at,ht,tt)-ot:et>rt&&(_=r(et,at,rt,tt)-ot):at>nt&&(et<ht?_=r(et,at,ht,nt)-ot:et>rt&&(_=r(et,at,rt,nt)-ot)),_*=-1}else _=b.halfWidth+G.halfWidth-f(H,K);b.overlapR=_,G.overlapR=_;var pt=d(H,K),vt=(_+w.EPSILON)*Math.cos(pt),It=(_+w.EPSILON)*Math.sin(pt),Rt={overlap:_,result:!1,x:vt,y:It};if(z&&(!q||q&&_!==0))return Rt.result=!0,Rt;if(!q&&_===0||Z&&J||b.customSeparateX||G.customSeparateX)return Rt.x=void 0,Rt.y=void 0,Rt;var St=!b.pushable&&!G.pushable;if(q){var mt=H.x-K.x,Ot=H.y-K.y,Xt=Math.sqrt(Math.pow(mt,2)+Math.pow(Ot,2)),Jt=(K.x-H.x)/Xt||0,ie=(K.y-H.y)/Xt||0,Pe=2*(j.x*Jt+j.y*ie-Q.x*Jt-Q.y*ie)/(b.mass+G.mass);(Z||J)&&(Pe*=2),Z||(j.x=j.x-Pe/b.mass*Jt,j.y=j.y-Pe/b.mass*ie,j.multiply(b.bounce)),J||(Q.x=Q.x+Pe/G.mass*Jt,Q.y=Q.y+Pe/G.mass*ie,Q.multiply(G.bounce)),!Z&&!J&&(vt*=.5,It*=.5),Z||(b.x-=vt,b.y-=It,b.updateCenter()),J||(G.x+=vt,G.y+=It,G.updateCenter()),Rt.result=!0}else!Z||b.pushable||St?(b.x-=vt,b.y-=It,b.updateCenter()):(!J||G.pushable||St)&&(G.x+=vt,G.y+=It,G.updateCenter()),Rt.x=void 0,Rt.y=void 0;return Rt},intersects:function(b,G){return b===G?!1:!b.isCircle&&!G.isCircle?!(b.right<=G.left||b.bottom<=G.top||b.left>=G.right||b.top>=G.bottom):b.isCircle?G.isCircle?f(b.center,G.center)<=b.halfWidth+G.halfWidth:this.circleBodyIntersects(b,G):this.circleBodyIntersects(G,b)},circleBodyIntersects:function(b,G){var z=u(b.center.x,G.left,G.right),X=u(b.center.y,G.top,G.bottom),k=(b.center.x-z)*(b.center.x-z),H=(b.center.y-X)*(b.center.y-X);return k+H<=b.halfWidth*b.halfWidth},overlap:function(b,G,z,X,k){return z===void 0&&(z=null),X===void 0&&(X=null),k===void 0&&(k=z),this.collideObjects(b,G,z,X,k,!0)},collide:function(b,G,z,X,k){return z===void 0&&(z=null),X===void 0&&(X=null),k===void 0&&(k=z),this.collideObjects(b,G,z,X,k,!1)},collideObjects:function(b,G,z,X,k,H){var K,Z;b.isParent&&(b.physicsType===void 0||G===void 0||b===G)&&(b=b.children.entries),G&&G.isParent&&G.physicsType===void 0&&(G=G.children.entries);var J=Array.isArray(b),j=Array.isArray(G);if(this._total=0,!J&&!j)this.collideHandler(b,G,z,X,k,H);else if(!J&&j)for(K=0;K<G.length;K++)this.collideHandler(b,G[K],z,X,k,H);else if(J&&!j)if(G)for(K=0;K<b.length;K++)this.collideHandler(b[K],G,z,X,k,H);else for(K=0;K<b.length;K++){var Q=b[K];for(Z=K+1;Z<b.length;Z++)K!==Z&&this.collideHandler(Q,b[Z],z,X,k,H)}else for(K=0;K<b.length;K++)for(Z=0;Z<G.length;Z++)this.collideHandler(b[K],G[Z],z,X,k,H);return this._total>0},collideHandler:function(b,G,z,X,k,H){if(G===void 0&&b.isParent)return this.collideGroupVsGroup(b,b,z,X,k,H);if(!b||!G)return!1;if(b.body||b.isBody){if(G.body||G.isBody)return this.collideSpriteVsSprite(b,G,z,X,k,H);if(G.isParent)return this.collideSpriteVsGroup(b,G,z,X,k,H);if(G.isTilemap)return this.collideSpriteVsTilemapLayer(b,G,z,X,k,H)}else if(b.isParent){if(G.body||G.isBody)return this.collideSpriteVsGroup(G,b,z,X,k,H);if(G.isParent)return this.collideGroupVsGroup(b,G,z,X,k,H);if(G.isTilemap)return this.collideGroupVsTilemapLayer(b,G,z,X,k,H)}else if(b.isTilemap){if(G.body||G.isBody)return this.collideSpriteVsTilemapLayer(G,b,z,X,k,H);if(G.isParent)return this.collideGroupVsTilemapLayer(G,b,z,X,k,H)}},collideSpriteVsSprite:function(b,G,z,X,k,H){var K=b.isBody?b:b.body,Z=G.isBody?G:G.body;return!K||!Z?!1:(this.separate(K,Z,X,k,H)&&(z&&z.call(k,b,G),this._total++),!0)},collideSpriteVsGroup:function(b,G,z,X,k,H){var K=b.isBody?b:b.body;if(!(G.length===0||!K||!K.enable||K.checkCollision.none)){var Z,J,j;if(this.useTree||G.physicsType===n.STATIC_BODY){var Q=this.treeMinMax;Q.minX=K.left,Q.minY=K.top,Q.maxX=K.right,Q.maxY=K.bottom;var _=G.physicsType===n.DYNAMIC_BODY?this.tree.search(Q):this.staticTree.search(Q);for(J=_.length,Z=0;Z<J;Z++)j=_[Z],!(K===j||!j.enable||j.checkCollision.none||!G.contains(j.gameObject))&&this.separate(K,j,X,k,H)&&(z&&z.call(k,K.gameObject,j.gameObject),this._total++)}else{var q=G.getChildren(),et=G.children.entries.indexOf(b);for(J=q.length,Z=0;Z<J;Z++)j=q[Z].body,!(!j||Z===et||!j.enable)&&this.separate(K,j,X,k,H)&&(z&&z.call(k,K.gameObject,j.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(b,G,z,X,k,H){var K=b.getChildren();if(K.length===0)return!1;for(var Z=!1,J=0;J<K.length;J++)(K[J].body||K[J].isBody)&&this.collideSpriteVsTilemapLayer(K[J],G,z,X,k,H)&&(Z=!0);return Z},collideTiles:function(b,G,z,X,k){return G.length===0||b.body&&!b.body.enable||b.isBody&&!b.enable?!1:this.collideSpriteVsTilesHandler(b,G,z,X,k,!1,!1)},overlapTiles:function(b,G,z,X,k){return G.length===0||b.body&&!b.body.enable||b.isBody&&!b.enable?!1:this.collideSpriteVsTilesHandler(b,G,z,X,k,!0,!1)},collideSpriteVsTilemapLayer:function(b,G,z,X,k,H){var K=b.isBody?b:b.body;if(!K.enable||K.checkCollision.none)return!1;var Z=K.x,J=K.y,j=K.width,Q=K.height,_=G.layer;if(_.tileWidth>_.baseTileWidth){var q=(_.tileWidth-_.baseTileWidth)*G.scaleX;Z-=q,j+=q}if(_.tileHeight>_.baseTileHeight){var et=(_.tileHeight-_.baseTileHeight)*G.scaleY;Q+=et}var at=H?null:this.tileFilterOptions,ot=P(Z,J,j,Q,at,G.scene.cameras.main,G.layer);return ot.length===0?!1:this.collideSpriteVsTilesHandler(b,ot,z,X,k,H,!0)},collideSpriteVsTilesHandler:function(b,G,z,X,k,H,K){for(var Z=b.isBody?b:b.body,J,j={left:0,right:0,top:0,bottom:0},Q,_=!1,q=0;q<G.length;q++){J=G[q],Q=J.tilemapLayer;var et=Q.tileToWorldXY(J.x,J.y);j.left=et.x,j.top=et.y,J.baseHeight!==J.height&&(j.top-=(J.height-J.baseHeight)*Q.scaleY),j.right=j.left+J.width*Q.scaleX,j.bottom=j.top+J.height*Q.scaleY,Y(j,Z)&&(!X||X.call(k,b,J))&&R(J,b)&&(H||L(q,Z,J,j,Q,this.TILE_BIAS,K))&&(this._total++,_=!0,z&&z.call(k,b,J),H&&Z.onOverlap?this.emit(c.TILE_OVERLAP,b,J,Z):Z.onCollide&&this.emit(c.TILE_COLLIDE,b,J,Z))}return _},collideGroupVsGroup:function(b,G,z,X,k,H){if(!(b.length===0||G.length===0))for(var K=b.getChildren(),Z=0;Z<K.length;Z++)this.collideSpriteVsGroup(K[Z],G,z,X,k,H)},wrap:function(b,G){b.body?this.wrapObject(b,G):b.getChildren?this.wrapArray(b.getChildren(),G):Array.isArray(b)?this.wrapArray(b,G):this.wrapObject(b,G)},wrapArray:function(b,G){for(var z=0;z<b.length;z++)this.wrapObject(b[z],G)},wrapObject:function(b,G){G===void 0&&(G=0),b.x=N(b.x,this.bounds.left-G,this.bounds.right+G),b.y=N(b.y,this.bounds.top-G,this.bounds.bottom+G)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});o.exports=U},5321:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAcceleration:function(e,d){return this.body.acceleration.set(e,d),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};o.exports=T},29257:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};o.exports=T},62122:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e,d){return this.body.bounce.set(e,d),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,d,x,u){return this.body.setCollideWorldBounds(e,d,x,u),this}};o.exports=T},99803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDebug:function(e,d,x){return this.debugShowBody=e,this.debugShowVelocity=d,this.debugBodyColor=x,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};o.exports=T},87145:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setDrag:function(e,d){return this.body.drag.set(e,d),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};o.exports=T},96174:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={enableBody:function(e,d,x,u,l){return e&&this.body.reset(d,x),u&&(this.body.gameObject.active=!0),l&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,d){return e===void 0&&(e=!1),d===void 0&&(d=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),d&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};o.exports=T},51702:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,d){return this.body.friction.set(e,d),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};o.exports=T},25578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setGravity:function(e,d){return this.body.gravity.set(e,d),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};o.exports=T},72029:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};o.exports=T},34566:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setMass:function(e){return this.body.mass=e,this}};o.exports=T},2732:(o,T,e)=>{var d=e(15147),x=e(26673),u=e(22184),l=e(26535),h=function(n,r,f,a,c,p){var v=d(n,r-a,f-a,2*a,2*a,c,p);if(v.length===0)return v;for(var m=new x(r,f,a),y=new x,E=[],P=0;P<v.length;P++){var S=v[P];S.isCircle?(y.setTo(S.center.x,S.center.y,S.halfWidth),u(m,y)&&E.push(S)):l(m,S)&&E.push(S)}return E};o.exports=h},15147:o=>{var T=function(e,d,x,u,l,h,n){h===void 0&&(h=!0),n===void 0&&(n=!1);var r=[],f=[],a=e.treeMinMax;if(a.minX=d,a.minY=x,a.maxX=d+u,a.maxY=x+l,n&&(f=e.staticTree.search(a)),h&&e.useTree)r=e.tree.search(a);else if(h){var c=e.bodies,p={position:{x:d,y:x},left:d,top:x,right:d+u,bottom:x+l,isCircle:!1},v=e.intersects;c.iterate(function(m){v(m,p)&&r.push(m)})}return f.concat(r)};o.exports=T},57527:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};o.exports=T},77687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setOffset:function(e,d){return this.body.setOffset(e,d),this},setSize:function(e,d,x){return this.body.setSize(e,d,x),this},setBodySize:function(e,d,x){return this.body.setSize(e,d,x),this},setCircle:function(e,d,x){return this.body.setCircle(e,d,x),this}};o.exports=T},66536:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setVelocity:function(e,d){return this.body.setVelocity(e,d),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,d){return this.body.maxVelocity.set(e,d),this}};o.exports=T},7864:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Acceleration:e(5321),Angular:e(29257),Bounce:e(62122),Debug:e(99803),Drag:e(87145),Enable:e(96174),Friction:e(51702),Gravity:e(25578),Immovable:e(72029),Mass:e(34566),OverlapCirc:e(2732),OverlapRect:e(15147),Pushable:e(57527),Size:e(77687),Velocity:e(66536)}},47401:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};o.exports=T},22346:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collide"},95092:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="overlap"},15775:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},74142:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},22825:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tilecollide"},10851:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="tileoverlap"},7543:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldbounds"},1487:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="worldstep"},27037:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COLLIDE:e(22346),OVERLAP:e(95092),PAUSE:e(15775),RESUME:e(74142),TILE_COLLIDE:e(22825),TILE_OVERLAP:e(10851),WORLD_BOUNDS:e(7543),WORLD_STEP:e(1487)}},39977:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47401),x=e(98611),u={ArcadePhysics:e(66150),Body:e(97602),Collider:e(3909),Components:e(7864),Events:e(27037),Factory:e(99523),GetOverlapX:e(75671),GetOverlapY:e(66185),SeparateX:e(61777),SeparateY:e(25299),Group:e(10481),Image:e(62832),Sprite:e(25084),StaticBody:e(66634),StaticGroup:e(46346),Tilemap:e(8413),World:e(85233)};u=x(!1,u,d),o.exports=u},25163:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,d,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,d,e):!0};o.exports=T},98209:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d<0?(e.blocked.none=!1,e.blocked.left=!0):d>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=d,e.updateCenter(),e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};o.exports=T},72792:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d<0?(e.blocked.none=!1,e.blocked.up=!0):d>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=d,e.updateCenter(),e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};o.exports=T},27354:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14405),x=e(52926),u=e(28808),l=function(h,n,r,f,a,c,p){var v=f.left,m=f.top,y=f.right,E=f.bottom,P=r.faceLeft||r.faceRight,S=r.faceTop||r.faceBottom;if(p||(P=!0,S=!0),!P&&!S)return!1;var w=0,A=0,R=0,O=1;if(n.deltaAbsX()>n.deltaAbsY()?R=-1:n.deltaAbsX()<n.deltaAbsY()&&(O=-1),n.deltaX()!==0&&n.deltaY()!==0&&P&&S&&(R=Math.min(Math.abs(n.position.x-y),Math.abs(n.right-v)),O=Math.min(Math.abs(n.position.y-E),Math.abs(n.bottom-m))),R<O){if(P&&(w=d(n,r,v,y,c,p),w!==0&&!u(f,n)))return!0;S&&(A=x(n,r,m,E,c,p))}else{if(S&&(A=x(n,r,m,E,c,p),A!==0&&!u(f,n)))return!0;P&&(w=d(n,r,v,y,c,p))}return w!==0||A!==0};o.exports=l},14405:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98209),x=function(u,l,h,n,r,f){var a=0,c=l.faceLeft,p=l.faceRight,v=l.collideLeft,m=l.collideRight;return f||(c=!0,p=!0,v=!0,m=!0),u.deltaX()<0&&m&&u.checkCollision.left?p&&u.x<n&&(a=u.x-n,a<-r&&(a=0)):u.deltaX()>0&&v&&u.checkCollision.right&&c&&u.right>h&&(a=u.right-h,a>r&&(a=0)),a!==0&&(u.customSeparateX?u.overlapX=a:d(u,a)),a};o.exports=x},52926:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72792),x=function(u,l,h,n,r,f){var a=0,c=l.faceTop,p=l.faceBottom,v=l.collideUp,m=l.collideDown;return f||(c=!0,p=!0,v=!0,m=!0),u.deltaY()<0&&m&&u.checkCollision.up?p&&u.y<n&&(a=u.y-n,a<-r&&(a=0)):u.deltaY()>0&&v&&u.checkCollision.down&&c&&u.bottom>h&&(a=u.bottom-h,a>r&&(a=0)),a!==0&&(u.customSeparateY?u.overlapY=a:d(u,a)),a};o.exports=x},28808:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return!(d.right<=e.left||d.bottom<=e.top||d.position.x>=e.right||d.position.y>=e.bottom)};o.exports=T},8413:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ProcessTileCallbacks:e(25163),ProcessTileSeparationX:e(98209),ProcessTileSeparationY:e(72792),SeparateTile:e(27354),TileCheckX:e(14405),TileCheckY:e(52926),TileIntersectsBody:e(28808)};o.exports=d},53954:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Arcade:e(39977),Matter:e(45949)}},63568:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93736),u=new d({initialize:function(){this.boundsCenter=new x,this.centerDiff=new x},parseBody:function(l){if(l=l.hasOwnProperty("body")?l.body:l,!l.hasOwnProperty("bounds")||!l.hasOwnProperty("centerOfMass"))return!1;var h=this.boundsCenter,n=this.centerDiff,r=l.bounds.max.x-l.bounds.min.x,f=l.bounds.max.y-l.bounds.min.y,a=r*l.centerOfMass.x,c=f*l.centerOfMass.y;return h.set(r/2,f/2),n.set(a-h.x,c-h.y),!0},getTopLeft:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.boundsCenter,f=this.centerDiff;return new x(h+r.x+f.x,n+r.y+f.y)}return!1},getTopCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.boundsCenter,f=this.centerDiff;return new x(h+f.x,n+r.y+f.y)}return!1},getTopRight:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.boundsCenter,f=this.centerDiff;return new x(h-(r.x-f.x),n+r.y+f.y)}return!1},getLeftCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.boundsCenter,f=this.centerDiff;return new x(h+r.x+f.x,n+f.y)}return!1},getCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.centerDiff;return new x(h+r.x,n+r.y)}return!1},getRightCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.boundsCenter,f=this.centerDiff;return new x(h-(r.x-f.x),n+f.y)}return!1},getBottomLeft:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.boundsCenter,f=this.centerDiff;return new x(h+r.x+f.x,n-(r.y-f.y))}return!1},getBottomCenter:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.boundsCenter,f=this.centerDiff;return new x(h+f.x,n-(r.y-f.y))}return!1},getBottomRight:function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),this.parseBody(l)){var r=this.boundsCenter,f=this.centerDiff;return new x(h-(r.x-f.x),n-(r.y-f.y))}return!1}});o.exports=u},18171:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16929);d.Body=e(84125),d.Composite=e(11299),d.World=e(72005),d.Collision=e(63454),d.Detector=e(13657),d.Pairs=e(91327),d.Pair=e(70584),d.Query=e(13390),d.Resolver=e(44272),d.Constraint=e(52838),d.Common=e(68758),d.Engine=e(45775),d.Events=e(39073),d.Sleeping=e(22806),d.Plugin=e(84474),d.Bodies=e(68516),d.Composites=e(56643),d.Axes=e(50658),d.Bounds=e(84091),d.Svg=e(92765),d.Vector=e(10438),d.Vertices=e(39745),d.World.add=d.Composite.add,d.World.remove=d.Composite.remove,d.World.addComposite=d.Composite.addComposite,d.World.addBody=d.Composite.addBody,d.World.addConstraint=d.Composite.addConstraint,d.World.clear=d.Composite.clear,o.exports=d},72653:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(56694),u=e(56643),l=e(52838),h=e(92765),n=e(3860),r=e(7030),f=e(73658),a=e(84720),c=e(10998),p=e(72829),v=e(88596),m=e(39745),y=new x({initialize:function(P){this.world=P,this.scene=P.scene,this.sys=P.scene.sys},rectangle:function(E,P,S,w,A){var R=d.rectangle(E,P,S,w,A);return this.world.add(R),R},trapezoid:function(E,P,S,w,A,R){var O=d.trapezoid(E,P,S,w,A,R);return this.world.add(O),O},circle:function(E,P,S,w,A){var R=d.circle(E,P,S,w,A);return this.world.add(R),R},polygon:function(E,P,S,w,A){var R=d.polygon(E,P,S,w,A);return this.world.add(R),R},fromVertices:function(E,P,S,w,A,R,O){typeof S=="string"&&(S=m.fromPath(S));var F=d.fromVertices(E,P,S,w,A,R,O);return this.world.add(F),F},fromPhysicsEditor:function(E,P,S,w,A){A===void 0&&(A=!0);var R=c.parseBody(E,P,S,w);return A&&!this.world.has(R)&&this.world.add(R),R},fromSVG:function(E,P,S,w,A,R){w===void 0&&(w=1),A===void 0&&(A={}),R===void 0&&(R=!0);for(var O=S.getElementsByTagName("path"),F=[],L=0;L<O.length;L++){var D=h.pathToVertices(O[L],30);w!==1&&m.scale(D,w,w),F.push(D)}var I=d.fromVertices(E,P,F,A);return R&&this.world.add(I),I},fromJSON:function(E,P,S,w,A){w===void 0&&(w={}),A===void 0&&(A=!0);var R=p.parseBody(E,P,S,w);return R&&A&&this.world.add(R),R},imageStack:function(E,P,S,w,A,R,O,F,L){O===void 0&&(O=0),F===void 0&&(F=0),L===void 0&&(L={});var D=this.world,I=this.sys.displayList;L.addToWorld=!1;var B=u.stack(S,w,A,R,O,F,function(V,Y){var W=new r(D,V,Y,E,P,L);return I.add(W),W.body});return D.add(B),B},stack:function(E,P,S,w,A,R,O){var F=u.stack(E,P,S,w,A,R,O);return this.world.add(F),F},pyramid:function(E,P,S,w,A,R,O){var F=u.pyramid(E,P,S,w,A,R,O);return this.world.add(F),F},chain:function(E,P,S,w,A,R){return u.chain(E,P,S,w,A,R)},mesh:function(E,P,S,w,A){return u.mesh(E,P,S,w,A)},newtonsCradle:function(E,P,S,w,A){var R=u.newtonsCradle(E,P,S,w,A);return this.world.add(R),R},car:function(E,P,S,w,A){var R=u.car(E,P,S,w,A);return this.world.add(R),R},softBody:function(E,P,S,w,A,R,O,F,L,D){var I=u.softBody(E,P,S,w,A,R,O,F,L,D);return this.world.add(I),I},joint:function(E,P,S,w,A){return this.constraint(E,P,S,w,A)},spring:function(E,P,S,w,A){return this.constraint(E,P,S,w,A)},constraint:function(E,P,S,w,A){w===void 0&&(w=1),A===void 0&&(A={}),A.bodyA=E.type==="body"?E:E.body,A.bodyB=P.type==="body"?P:P.body,isNaN(S)||(A.length=S),A.stiffness=w;var R=l.create(A);return this.world.add(R),R},worldConstraint:function(E,P,S,w){S===void 0&&(S=1),w===void 0&&(w={}),w.bodyB=E.type==="body"?E:E.body,isNaN(P)||(w.length=P),w.stiffness=S;var A=l.create(w);return this.world.add(A),A},mouseSpring:function(E){return this.pointerConstraint(E)},pointerConstraint:function(E){E===void 0&&(E={}),E.hasOwnProperty("render")||(E.render={visible:!1});var P=new v(this.scene,this.world,E);return this.world.add(P.constraint),P},image:function(E,P,S,w,A){var R=new r(this.world,E,P,S,w,A);return this.sys.displayList.add(R),R},tileBody:function(E,P){return new a(this.world,E,P)},sprite:function(E,P,S,w,A){var R=new f(this.world,E,P,S,w,A);return this.sys.displayList.add(R),this.sys.updateList.add(R),R},gameObject:function(E,P,S){return n(this.world,E,P,S)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});o.exports=y},3860:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74527),x=e(72632),u=e(93736);function l(n){return!!n.get&&typeof n.get=="function"||!!n.set&&typeof n.set=="function"}var h=function(n,r,f,a){f===void 0&&(f={}),a===void 0&&(a=!0);var c=r.x,p=r.y;r.body={temp:!0,position:{x:c,y:p}};var v=[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity];if(v.forEach(function(y){for(var E in y)l(y[E])?Object.defineProperty(r,E,{get:y[E].get,set:y[E].set}):Object.defineProperty(r,E,{value:y[E]})}),r.world=n,r._tempVec2=new u(c,p),f.hasOwnProperty("type")&&f.type==="body")r.setExistingBody(f,a);else{var m=x(f,"shape",null);m||(m="rectangle"),f.addToWorld=a,r.setBody(m,f)}return r};o.exports=h},7030:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(74527),u=e(89980),l=e(72632),h=e(1539),n=e(58210),r=e(93736),f=new d({Extends:h,Mixins:[x.Bounce,x.Collision,x.Force,x.Friction,x.Gravity,x.Mass,x.Sensor,x.SetBody,x.Sleep,x.Static,x.Transform,x.Velocity,n],initialize:function(c,p,v,m,y,E){u.call(this,c.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,y),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new r(p,v);var P=l(E,"shape",null);P?this.setBody(P,E):this.setRectangle(this.width,this.height,E),this.setPosition(p,v),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=f},50583:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84093),x=e(50658),u=e(68516),l=e(84125),h=e(63568),n=e(84091),r=e(56694),f=e(63454),a=e(68758),c=e(11299),p=e(56643),v=e(52838),m=e(13657),y=e(53996),E=e(72653),P=e(72632),S=e(10850),w=e(1675),A=e(80391),R=e(16929),O=e(44097),F=e(30657),L=e(70584),D=e(91327),I=e(84474),B=e(91963),V=e(13390),Y=e(44272),W=e(7599),$=e(92765),N=e(10438),U=e(39745),b=e(31468);a.setDecomp(e(81084));var G=new r({initialize:function(X){this.scene=X,this.systems=X.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=l,this.composite=c,this.collision=f,this.detector=m,this.pair=L,this.pairs=D,this.query=V,this.resolver=Y,this.constraint=v,this.bodies=u,this.composites=p,this.axes=x,this.bounds=n,this.svg=$,this.vector=N,this.vertices=U,this.verts=U,this._tempVec2=N.create(),S(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),S(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),S(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),Y._restingThresh=S(this.config,"restingThresh",4),Y._restingThreshTangent=S(this.config,"restingThreshTangent",6),Y._positionDampen=S(this.config,"positionDampen",.9),Y._positionWarming=S(this.config,"positionWarming",.8),Y._frictionNormalMultiplier=S(this.config,"frictionNormalMultiplier",5),X.sys.events.once(W.BOOT,this.boot,this),X.sys.events.on(W.START,this.start,this)},boot:function(){this.world=new b(this.scene,this.config),this.add=new E(this.world),this.bodyBounds=new h,this.systems.events.once(W.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new b(this.scene,this.config),this.add=new E(this.world));var z=this.systems.events;z.on(W.UPDATE,this.world.update,this.world),z.on(W.POST_UPDATE,this.world.postUpdate,this.world),z.once(W.SHUTDOWN,this.shutdown,this)},getConfig:function(){var z=this.systems.game.config.physics,X=this.systems.settings.physics,k=F(P(X,"matter",{}),P(z,"matter",{}));return k},enableAttractorPlugin:function(){return I.register(w),I.use(R,w),this},enableWrapPlugin:function(){return I.register(O),I.use(R,O),this},enableCollisionEventsPlugin:function(){return I.register(A),I.use(R,A),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(z,X){this.world.step(z,X)},containsPoint:function(z,X,k){z=this.getMatterBodies(z);var H=N.create(X,k),K=V.point(z,H);return K.length>0},intersectPoint:function(z,X,k){k=this.getMatterBodies(k);var H=N.create(z,X),K=[],Z=V.point(k,H);return Z.forEach(function(J){K.indexOf(J)===-1&&K.push(J)}),K},intersectRect:function(z,X,k,H,K,Z){K===void 0&&(K=!1),Z=this.getMatterBodies(Z);var J={min:{x:z,y:X},max:{x:z+k,y:X+H}},j=[],Q=V.region(Z,J,K);return Q.forEach(function(_){j.indexOf(_)===-1&&j.push(_)}),j},intersectRay:function(z,X,k,H,K,Z){K===void 0&&(K=1),Z=this.getMatterBodies(Z);for(var J=[],j=V.ray(Z,N.create(z,X),N.create(k,H),K),Q=0;Q<j.length;Q++)J.push(j[Q].body);return J},intersectBody:function(z,X){X=this.getMatterBodies(X);for(var k=[],H=V.collides(z,X),K=0;K<H.length;K++){var Z=H[K];Z.bodyA===z?k.push(Z.bodyB):k.push(Z.bodyA)}return k},overlap:function(z,X,k,H,K){k===void 0&&(k=null),H===void 0&&(H=null),K===void 0&&(K=k),Array.isArray(z)||(z=[z]),z=this.getMatterBodies(z),X=this.getMatterBodies(X);for(var Z=!1,J=0;J<z.length;J++)for(var j=z[J],Q=V.collides(j,X),_=0;_<Q.length;_++){var q=Q[_],et=q.bodyA.id===j.id?q.bodyB:q.bodyA;if(!H||H.call(K,j,et,q)){if(Z=!0,k)k.call(K,j,et,q);else if(!H)return!0}}return Z},setCollisionCategory:function(z,X){return z=this.getMatterBodies(z),z.forEach(function(k){k.collisionFilter.category=X}),this},setCollisionGroup:function(z,X){return z=this.getMatterBodies(z),z.forEach(function(k){k.collisionFilter.group=X}),this},setCollidesWith:function(z,X){z=this.getMatterBodies(z);var k=0;if(!Array.isArray(X))k=X;else for(var H=0;H<X.length;H++)k|=X[H];return z.forEach(function(K){K.collisionFilter.mask=k}),this},getMatterBodies:function(z){if(!z)return this.world.getAllBodies();Array.isArray(z)||(z=[z]);for(var X=[],k=0;k<z.length;k++){var H=z[k].hasOwnProperty("body")?z[k].body:z[k];X.push(H)}return X},setVelocity:function(z,X,k){z=this.getMatterBodies(z);var H=this._tempVec2;return H.x=X,H.y=k,z.forEach(function(K){l.setVelocity(K,H)}),this},setVelocityX:function(z,X){z=this.getMatterBodies(z);var k=this._tempVec2;return k.x=X,z.forEach(function(H){k.y=H.velocity.y,l.setVelocity(H,k)}),this},setVelocityY:function(z,X){z=this.getMatterBodies(z);var k=this._tempVec2;return k.y=X,z.forEach(function(H){k.x=H.velocity.x,l.setVelocity(H,k)}),this},setAngularVelocity:function(z,X){return z=this.getMatterBodies(z),z.forEach(function(k){l.setAngularVelocity(k,X)}),this},applyForce:function(z,X){z=this.getMatterBodies(z);var k=this._tempVec2;return z.forEach(function(H){k.x=H.position.x,k.y=H.position.y,l.applyForce(H,k,X)}),this},applyForceFromPosition:function(z,X,k,H){z=this.getMatterBodies(z);var K=this._tempVec2;return z.forEach(function(Z){H===void 0&&(H=Z.angle),K.x=k*Math.cos(H),K.y=k*Math.sin(H),l.applyForce(Z,X,K)}),this},applyForceFromAngle:function(z,X,k){z=this.getMatterBodies(z);var H=this._tempVec2;return z.forEach(function(K){k===void 0&&(k=K.angle),H.x=X*Math.cos(k),H.y=X*Math.sin(k),l.applyForce(K,{x:K.position.x,y:K.position.y},H)}),this},getConstraintLength:function(z){var X=z.pointA.x,k=z.pointA.y,H=z.pointB.x,K=z.pointB.y;return z.bodyA&&(X+=z.bodyA.position.x,k+=z.bodyA.position.y),z.bodyB&&(H+=z.bodyB.position.x,K+=z.bodyB.position.y),y(X,k,H,K)},alignBody:function(z,X,k,H){z=z.hasOwnProperty("body")?z.body:z;var K;switch(H){case d.TOP_LEFT:case d.LEFT_TOP:K=this.bodyBounds.getTopLeft(z,X,k);break;case d.TOP_CENTER:K=this.bodyBounds.getTopCenter(z,X,k);break;case d.TOP_RIGHT:case d.RIGHT_TOP:K=this.bodyBounds.getTopRight(z,X,k);break;case d.LEFT_CENTER:K=this.bodyBounds.getLeftCenter(z,X,k);break;case d.CENTER:K=this.bodyBounds.getCenter(z,X,k);break;case d.RIGHT_CENTER:K=this.bodyBounds.getRightCenter(z,X,k);break;case d.LEFT_BOTTOM:case d.BOTTOM_LEFT:K=this.bodyBounds.getBottomLeft(z,X,k);break;case d.BOTTOM_CENTER:K=this.bodyBounds.getBottomCenter(z,X,k);break;case d.BOTTOM_RIGHT:case d.RIGHT_BOTTOM:K=this.bodyBounds.getBottomRight(z,X,k);break}return K&&l.setPosition(z,K),this},shutdown:function(){var z=this.systems.events;this.world&&(z.off(W.UPDATE,this.world.update,this.world),z.off(W.POST_UPDATE,this.world.postUpdate,this.world)),z.off(W.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(W.START,this.start,this),this.scene=null,this.systems=null}});B.register("MatterPhysics",G,"matterPhysics"),o.exports=G},73658:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(16569),x=e(56694),u=e(74527),l=e(89980),h=e(72632),n=e(58210),r=e(13747),f=e(93736),a=new x({Extends:r,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,n],initialize:function(p,v,m,y,E,P){l.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new d(this),this.setTexture(y,E),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new f(v,m);var S=h(P,"shape",null);S?this.setBody(S,P):this.setRectangle(this.width,this.height,P),this.setPosition(v,m),this.initPipeline(),this.initPostPipeline(!0)}});o.exports=a},84720:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u=e(56694),l=e(74527),h=e(28699),n=e(6659),r=e(72632),f=e(19256),a=e(39745),c=new u({Extends:n,Mixins:[l.Bounce,l.Collision,l.Friction,l.Gravity,l.Mass,l.Sensor,l.Sleep,l.Static],initialize:function(v,m,y){n.call(this),this.tile=m,this.world=v,m.physics.matterBody&&m.physics.matterBody.destroy(),m.physics.matterBody=this;var E=r(y,"body",null),P=r(y,"addToWorld",!0);if(E)this.setBody(E,P);else{var S=m.getCollisionGroup(),w=r(S,"objects",[]);w.length>0?this.setFromTileCollision(y):this.setFromTileRectangle(y)}if(m.flipX||m.flipY){var A={x:m.getCenterX(),y:m.getCenterY()},R=m.flipX?-1:1,O=m.flipY?-1:1;x.scale(E,R,O,A)}},setFromTileRectangle:function(p){p===void 0&&(p={}),f(p,"isStatic")||(p.isStatic=!0),f(p,"addToWorld")||(p.addToWorld=!0);var v=this.tile.getBounds(),m=v.x+v.width/2,y=v.y+v.height/2,E=d.rectangle(m,y,v.width,v.height,p);return this.setBody(E,p.addToWorld),this},setFromTileCollision:function(p){p===void 0&&(p={}),f(p,"isStatic")||(p.isStatic=!0),f(p,"addToWorld")||(p.addToWorld=!0);for(var v=this.tile.tilemapLayer.scaleX,m=this.tile.tilemapLayer.scaleY,y=this.tile.getLeft(),E=this.tile.getTop(),P=this.tile.getCollisionGroup(),S=r(P,"objects",[]),w=[],A=0;A<S.length;A++){var R=S[A],O=y+R.x*v,F=E+R.y*m,L=R.width*v,D=R.height*m,I=null;if(R.rectangle)I=d.rectangle(O+L/2,F+D/2,L,D,p);else if(R.ellipse)I=d.circle(O+L/2,F+D/2,L/2,p);else if(R.polygon||R.polyline){var B=R.polygon?R.polygon:R.polyline,V=B.map(function(N){return{x:N.x*v,y:N.y*m}}),Y=a.create(V),W=a.centre(Y);O+=W.x,F+=W.y,I=d.fromVertices(O,F,Y,p)}I&&w.push(I)}if(w.length===1)this.setBody(w[0],p.addToWorld);else if(w.length>1){var $=h(p);$.parts=w,this.setBody(x.create($),$.addToWorld)}return this},setBody:function(p,v){return v===void 0&&(v=!0),this.body&&this.removeBody(),this.body=p,this.body.gameObject=this,v&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});o.exports=c},10998:(o,T,e)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u=e(68758),l=e(72632),h=e(39745),n={parseBody:function(r,f,a,c){c===void 0&&(c={});for(var p=l(a,"fixtures",[]),v=[],m=0;m<p.length;m++)for(var y=this.parseFixture(p[m]),E=0;E<y.length;E++)v.push(y[E]);var P=u.clone(a,!0);u.extend(P,c,!0),delete P.fixtures,delete P.type;var S=x.create(P);return x.setParts(S,v),x.setPosition(S,{x:r,y:f}),S},parseFixture:function(r){var f=u.extend({},!1,r);delete f.circle,delete f.vertices;var a;if(r.circle){var c=l(r.circle,"x"),p=l(r.circle,"y"),v=l(r.circle,"radius");a=[d.circle(c,p,v,f)]}else r.vertices&&(a=this.parseVertices(r.vertices,f));return a},parseVertices:function(r,f){f===void 0&&(f={});for(var a=[],c=0;c<r.length;c++)h.clockwiseSort(r[c]),a.push(x.create(u.extend({position:h.centre(r[c]),vertices:r[c]},f)));return d.flagCoincidentParts(a)}};o.exports=n},72829:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u={parseBody:function(l,h,n,r){r===void 0&&(r={});var f,a=n.vertices;if(a.length===1)r.vertices=a[0],f=x.create(r),d.flagCoincidentParts(f.parts);else{for(var c=[],p=0;p<a.length;p++){var v=x.create({vertices:a[p]});c.push(v)}d.flagCoincidentParts(c),r.parts=c,f=x.create(r)}return f.label=n.label,x.setPosition(f,{x:l,y:h}),f}};o.exports=u},88596:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84091),x=e(56694),u=e(11299),l=e(52838),h=e(13657),n=e(35416),r=e(33963),f=e(30657),a=e(22806),c=e(93736),p=e(39745),v=new x({initialize:function(y,E,P){P===void 0&&(P={});var S={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=y,this.world=E,this.camera=null,this.pointer=null,this.active=!0,this.position=new c,this.body=null,this.part=null,this.constraint=l.create(f(P,S)),this.world.on(n.BEFORE_UPDATE,this.update,this),y.sys.input.on(r.POINTER_DOWN,this.onDown,this),y.sys.input.on(r.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var y=this.position,E=this.constraint;this.camera.getWorldPoint(m.x,m.y,y);for(var P=u.allBodies(this.world.localWorld),S=0;S<P.length;S++){var w=P[S];if(!w.ignorePointer&&d.contains(w.bounds,y)&&h.canCollide(w.collisionFilter,E.collisionFilter)&&this.hitTestBody(w,y))return this.world.emit(n.DRAG_START,w,this.part,this),!0}return!1},hitTestBody:function(m,y){for(var E=this.constraint,P=m.parts.length,S=P>1?1:0,w=S;w<P;w++){var A=m.parts[w];if(p.contains(A.vertices,y))return E.pointA=y,E.pointB={x:y.x-m.position.x,y:y.y-m.position.y},E.bodyB=m,E.angleB=m.angle,a.set(m,!1),this.part=A,this.body=m,!0}return!1},update:function(){var m=this.pointer,y=this.body;if(!this.active||!m){y&&this.stopDrag();return}if(!m.isDown&&y){this.stopDrag();return}else if(m.isDown){if(!y&&!this.getBody(m))return;y=this.body;var E=this.position,P=this.constraint;this.camera.getWorldPoint(m.x,m.y,E),P.pointA.x=E.x,P.pointA.y=E.y,a.set(y,!1),this.world.emit(n.DRAG,y,this)}},stopDrag:function(){var m=this.body,y=this.constraint;y.bodyB=null,y.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(n.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(n.BEFORE_UPDATE,this.update),this.scene.sys.input.off(r.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(r.POINTER_UP,this.onUp,this)}});o.exports=v},31468:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u=e(56694),l=e(68758),h=e(11299),n=e(45775),r=e(6659),f=e(35416),a=e(72632),c=e(10850),p=e(84125),v=e(39073),m=e(84720),y=e(72005),E=e(10438),P=new u({Extends:r,initialize:function(w,A){r.call(this),this.scene=w,this.engine=n.create(A),this.localWorld=this.engine.world;var R=c(A,"gravity",null);R?this.setGravity(R.x,R.y,R.scale):R===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=c(A,"enabled",!0),this.getDelta=c(A,"getDelta",this.update60Hz);var O=a(A,"runner",{}),F=a(O,"fps",!1),L=a(O,"fps",60),D=a(O,"delta",1e3/L),I=a(O,"deltaMin",1e3/L),B=a(O,"deltaMax",1e3/(L*.5));F||(L=1e3/D),this.runner={fps:L,deltaSampleSize:a(O,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:a(O,"isFixed",!1),delta:D,deltaMin:I,deltaMax:B},this.autoUpdate=c(A,"autoUpdate",!0);var V=c(A,"debug",!1);if(this.drawDebug=typeof V=="object"?!0:V,this.debugGraphic,this.debugConfig={showAxes:a(V,"showAxes",!1),showAngleIndicator:a(V,"showAngleIndicator",!1),angleColor:a(V,"angleColor",15208787),showBroadphase:a(V,"showBroadphase",!1),broadphaseColor:a(V,"broadphaseColor",16757760),showBounds:a(V,"showBounds",!1),boundsColor:a(V,"boundsColor",16777215),showVelocity:a(V,"showVelocity",!1),velocityColor:a(V,"velocityColor",44783),showCollisions:a(V,"showCollisions",!1),collisionColor:a(V,"collisionColor",16094476),showSeparations:a(V,"showSeparations",!1),separationColor:a(V,"separationColor",16753920),showBody:a(V,"showBody",!0),showStaticBody:a(V,"showStaticBody",!0),showInternalEdges:a(V,"showInternalEdges",!1),renderFill:a(V,"renderFill",!1),renderLine:a(V,"renderLine",!0),fillColor:a(V,"fillColor",1075465),fillOpacity:a(V,"fillOpacity",1),lineColor:a(V,"lineColor",2678297),lineOpacity:a(V,"lineOpacity",1),lineThickness:a(V,"lineThickness",1),staticFillColor:a(V,"staticFillColor",857979),staticLineColor:a(V,"staticLineColor",1255396),showSleeping:a(V,"showSleeping",!1),staticBodySleepOpacity:a(V,"staticBodySleepOpacity",.7),sleepFillColor:a(V,"sleepFillColor",4605510),sleepLineColor:a(V,"sleepLineColor",10066585),showSensors:a(V,"showSensors",!0),sensorFillColor:a(V,"sensorFillColor",857979),sensorLineColor:a(V,"sensorLineColor",1255396),showPositions:a(V,"showPositions",!0),positionSize:a(V,"positionSize",4),positionColor:a(V,"positionColor",14697178),showJoint:a(V,"showJoint",!0),jointColor:a(V,"jointColor",14737474),jointLineOpacity:a(V,"jointLineOpacity",1),jointLineThickness:a(V,"jointLineThickness",2),pinSize:a(V,"pinSize",4),pinColor:a(V,"pinColor",4382944),springColor:a(V,"springColor",14697184),anchorColor:a(V,"anchorColor",15724527),anchorSize:a(V,"anchorSize",4),showConvexHulls:a(V,"showConvexHulls",!1),hullColor:a(V,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),a(A,"setBounds",!1)){var Y=A.setBounds;if(typeof Y=="boolean")this.setBounds();else{var W=a(Y,"x",0),$=a(Y,"y",0),N=a(Y,"width",w.sys.scale.width),U=a(Y,"height",w.sys.scale.height),b=a(Y,"thickness",64),G=a(Y,"left",!0),z=a(Y,"right",!0),X=a(Y,"top",!0),k=a(Y,"bottom",!0);this.setBounds(W,$,N,U,b,G,z,X,k)}}},setCompositeRenderStyle:function(S){var w=S.bodies,A=S.constraints,R=S.composites,O,F,L;for(O=0;O<w.length;O++)F=w[O],L=F.render,this.setBodyRenderStyle(F,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity);for(O=0;O<A.length;O++)F=A[O],L=F.render,this.setConstraintRenderStyle(F,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize);for(O=0;O<R.length;O++)F=R[O],this.setCompositeRenderStyle(F);return this},setBodyRenderStyle:function(S,w,A,R,O,F){var L=S.render,D=this.debugConfig;return L?(w==null&&(w=S.isStatic?D.staticLineColor:D.lineColor),A==null&&(A=D.lineOpacity),R==null&&(R=D.lineThickness),O==null&&(O=S.isStatic?D.staticFillColor:D.fillColor),F==null&&(F=D.fillOpacity),w!==!1&&(L.lineColor=w),A!==!1&&(L.lineOpacity=A),R!==!1&&(L.lineThickness=R),O!==!1&&(L.fillColor=O),F!==!1&&(L.fillOpacity=F),this):this},setConstraintRenderStyle:function(S,w,A,R,O,F,L){var D=S.render,I=this.debugConfig;if(!D)return this;if(w==null){var B=D.type;B==="line"?w=I.jointColor:B==="pin"?w=I.pinColor:B==="spring"&&(w=I.springColor)}return A==null&&(A=I.jointLineOpacity),R==null&&(R=I.jointLineThickness),O==null&&(O=I.pinSize),F==null&&(F=I.anchorColor),L==null&&(L=I.anchorSize),w!==!1&&(D.lineColor=w),A!==!1&&(D.lineOpacity=A),R!==!1&&(D.lineThickness=R),O!==!1&&(D.pinSize=O),F!==!1&&(D.anchorColor=F),L!==!1&&(D.anchorSize=L),this},setEventsProxy:function(){var S=this,w=this.engine,A=this.localWorld;this.drawDebug&&(v.on(A,"compositeModified",function(R){S.setCompositeRenderStyle(R)}),v.on(A,"beforeAdd",function(R){for(var O=[].concat(R.object),F=0;F<O.length;F++){var L=O[F],D=L.render;L.type==="body"?S.setBodyRenderStyle(L,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):L.type==="composite"?S.setCompositeRenderStyle(L):L.type==="constraint"&&S.setConstraintRenderStyle(L,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),v.on(A,"beforeAdd",function(R){S.emit(f.BEFORE_ADD,R)}),v.on(A,"afterAdd",function(R){S.emit(f.AFTER_ADD,R)}),v.on(A,"beforeRemove",function(R){S.emit(f.BEFORE_REMOVE,R)}),v.on(A,"afterRemove",function(R){S.emit(f.AFTER_REMOVE,R)}),v.on(w,"beforeUpdate",function(R){S.emit(f.BEFORE_UPDATE,R)}),v.on(w,"afterUpdate",function(R){S.emit(f.AFTER_UPDATE,R)}),v.on(w,"collisionStart",function(R){var O=R.pairs,F,L;O.length>0&&(F=O[0].bodyA,L=O[0].bodyB),S.emit(f.COLLISION_START,R,F,L)}),v.on(w,"collisionActive",function(R){var O=R.pairs,F,L;O.length>0&&(F=O[0].bodyA,L=O[0].bodyB),S.emit(f.COLLISION_ACTIVE,R,F,L)}),v.on(w,"collisionEnd",function(R){var O=R.pairs,F,L;O.length>0&&(F=O[0].bodyA,L=O[0].bodyB),S.emit(f.COLLISION_END,R,F,L)})},setBounds:function(S,w,A,R,O,F,L,D,I){return S===void 0&&(S=0),w===void 0&&(w=0),A===void 0&&(A=this.scene.sys.scale.width),R===void 0&&(R=this.scene.sys.scale.height),O===void 0&&(O=64),F===void 0&&(F=!0),L===void 0&&(L=!0),D===void 0&&(D=!0),I===void 0&&(I=!0),this.updateWall(F,"left",S-O,w-O,O,R+O*2),this.updateWall(L,"right",S+A,w-O,O,R+O*2),this.updateWall(D,"top",S,w-O,A,O),this.updateWall(I,"bottom",S,w+R,A,O),this},updateWall:function(S,w,A,R,O,F){var L=this.walls[w];S?(L&&y.remove(this.localWorld,L),A+=O/2,R+=F/2,this.walls[w]=this.create(A,R,O,F,{isStatic:!0,friction:0,frictionStatic:0})):(L&&y.remove(this.localWorld,L),this.walls[w]=null)},createDebugGraphic:function(){var S=this.scene.sys.add.graphics({x:0,y:0});return S.setDepth(Number.MAX_VALUE),this.debugGraphic=S,this.drawDebug=!0,S},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(S,w,A){return S===void 0&&(S=0),w===void 0&&(w=1),A===void 0&&(A=.001),this.localWorld.gravity.x=S,this.localWorld.gravity.y=w,this.localWorld.gravity.scale=A,this},create:function(S,w,A,R,O){var F=d.rectangle(S,w,A,R,O);return y.add(this.localWorld,F),F},add:function(S){return y.add(this.localWorld,S),this},remove:function(S,w){Array.isArray(S)||(S=[S]);for(var A=0;A<S.length;A++){var R=S[A],O=R.body?R.body:R;h.remove(this.localWorld,O,w)}return this},removeConstraint:function(S,w){return h.remove(this.localWorld,S,w),this},convertTilemapLayer:function(S,w){var A=S.layer,R=S.getTilesWithin(0,0,A.width,A.height,{isColliding:!0});return this.convertTiles(R,w),this},convertTiles:function(S,w){if(S.length===0)return this;for(var A=0;A<S.length;A++)new m(this,S[A],w);return this},nextGroup:function(S){return p.nextGroup(S)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(f.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(f.RESUME),this},update:function(S,w){if(!(!this.enabled||!this.autoUpdate)){var A=this.engine,R=this.runner,O=A.timing;R.isFixed?w=this.getDelta(S,w):(w=S-R.timePrev||R.delta,R.timePrev=S,R.deltaHistory.push(w),R.deltaHistory=R.deltaHistory.slice(-R.deltaSampleSize),w=Math.min.apply(null,R.deltaHistory),w=w<R.deltaMin?R.deltaMin:w,w=w>R.deltaMax?R.deltaMax:w,R.delta=w),R.timeScalePrev=O.timeScale,R.frameCounter+=1,S-R.counterTimestamp>=1e3&&(R.fps=R.frameCounter*((S-R.counterTimestamp)/1e3),R.counterTimestamp=S,R.frameCounter=0),n.update(A,w)}},step:function(S){n.update(this.engine,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(S){var w=S.hasOwnProperty("body")?S.body:S;return h.get(this.localWorld,w.id,w.type)!==null},getAllBodies:function(){return h.allBodies(this.localWorld)},getAllConstraints:function(){return h.allConstraints(this.localWorld)},getAllComposites:function(){return h.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var S=this.debugConfig,w=this.engine,A=this.debugGraphic,R=h.allBodies(this.localWorld);this.debugGraphic.clear(),S.showBroadphase&&w.broadphase.controller&&this.renderGrid(w.broadphase,A,S.broadphaseColor,.5),S.showBounds&&this.renderBodyBounds(R,A,S.boundsColor,.5),(S.showBody||S.showStaticBody)&&this.renderBodies(R),S.showJoint&&this.renderJoints(),(S.showAxes||S.showAngleIndicator)&&this.renderBodyAxes(R,A,S.showAxes,S.angleColor,.5),S.showVelocity&&this.renderBodyVelocity(R,A,S.velocityColor,1,2),S.showSeparations&&this.renderSeparations(w.pairs.list,A,S.separationColor),S.showCollisions&&this.renderCollisions(w.pairs.list,A,S.collisionColor)}},renderGrid:function(S,w,A,R){w.lineStyle(1,A,R);for(var O=l.keys(S.buckets),F=0;F<O.length;F++){var L=O[F];if(!(S.buckets[L].length<2)){var D=L.split(/C|R/);w.strokeRect(parseInt(D[1],10)*S.bucketWidth,parseInt(D[2],10)*S.bucketHeight,S.bucketWidth,S.bucketHeight)}}return this},renderSeparations:function(S,w,A){w.lineStyle(1,A,1);for(var R=0;R<S.length;R++){var O=S[R];if(!!O.isActive){var F=O.collision,L=F.bodyA,D=F.bodyB,I=L.position,B=D.position,V=F.penetration,Y=!L.isStatic&&!D.isStatic?4:1;D.isStatic&&(Y=0),w.lineBetween(B.x,B.y,B.x-V.x*Y,B.y-V.y*Y),Y=!L.isStatic&&!D.isStatic?4:1,L.isStatic&&(Y=0),w.lineBetween(I.x,I.y,I.x-V.x*Y,I.y-V.y*Y)}}return this},renderCollisions:function(S,w,A){w.lineStyle(1,A,.5),w.fillStyle(A,1);var R,O;for(R=0;R<S.length;R++)if(O=S[R],!!O.isActive)for(var F=0;F<O.activeContacts.length;F++){var L=O.activeContacts[F],D=L.vertex;w.fillRect(D.x-2,D.y-2,5,5)}for(R=0;R<S.length;R++)if(O=S[R],!!O.isActive){var I=O.collision,B=O.activeContacts;if(B.length>0){var V=B[0].vertex.x,Y=B[0].vertex.y;B.length===2&&(V=(B[0].vertex.x+B[1].vertex.x)/2,Y=(B[0].vertex.y+B[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic?w.lineBetween(V-I.normal.x*8,Y-I.normal.y*8,V,Y):w.lineBetween(V+I.normal.x*8,Y+I.normal.y*8,V,Y)}}return this},renderBodyBounds:function(S,w,A,R){w.lineStyle(1,A,R);for(var O=0;O<S.length;O++){var F=S[O];if(!!F.render.visible){var L=F.bounds;if(L)w.strokeRect(L.min.x,L.min.y,L.max.x-L.min.x,L.max.y-L.min.y);else for(var D=F.parts,I=D.length>1?1:0;I<D.length;I++){var B=D[I];w.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(S,w,A,R,O){w.lineStyle(1,R,O);for(var F=0;F<S.length;F++){var L=S[F],D=L.parts;if(!!L.render.visible){var I,B,V;if(A)for(B=D.length>1?1:0;B<D.length;B++)for(I=D[B],V=0;V<I.axes.length;V++){var Y=I.axes[V];w.lineBetween(I.position.x,I.position.y,I.position.x+Y.x*20,I.position.y+Y.y*20)}else for(B=D.length>1?1:0;B<D.length;B++)for(I=D[B],V=0;V<I.axes.length;V++)w.lineBetween(I.position.x,I.position.y,(I.vertices[0].x+I.vertices[I.vertices.length-1].x)/2,(I.vertices[0].y+I.vertices[I.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(S,w,A,R,O){w.lineStyle(O,A,R);for(var F=0;F<S.length;F++){var L=S[F];!L.render.visible||w.lineBetween(L.position.x,L.position.y,L.position.x+(L.position.x-L.positionPrev.x)*2,L.position.y+(L.position.y-L.positionPrev.y)*2)}return this},renderBodies:function(S){for(var w=this.debugGraphic,A=this.debugConfig,R=A.showBody,O=A.showStaticBody,F=A.showSleeping,L=A.showInternalEdges,D=A.showConvexHulls,I=A.renderFill,B=A.renderLine,V=A.staticBodySleepOpacity,Y=A.sleepFillColor,W=A.sleepLineColor,$=A.hullColor,N=0;N<S.length;N++){var U=S[N];if(!!U.render.visible&&!(!O&&U.isStatic||!R&&!U.isStatic)){var b=U.render.lineColor,G=U.render.lineOpacity,z=U.render.lineThickness,X=U.render.fillColor,k=U.render.fillOpacity;F&&U.isSleeping&&(U.isStatic?(G*=V,k*=V):(b=W,X=Y)),I||(X=null),B||(b=null),this.renderBody(U,w,L,b,G,z,X,k);var H=U.parts.length;D&&H>1&&this.renderConvexHull(U,w,$,z)}}},renderBody:function(S,w,A,R,O,F,L,D){R===void 0&&(R=null),O===void 0&&(O=null),F===void 0&&(F=1),L===void 0&&(L=null),D===void 0&&(D=null);for(var I=this.debugConfig,B=I.sensorFillColor,V=I.sensorLineColor,Y=S.parts,W=Y.length,$=W>1?1:0;$<W;$++){var N=Y[$],U=N.render,b=U.opacity;if(!(!U.visible||b===0||N.isSensor&&!I.showSensors)){var G=N.circleRadius;if(w.beginPath(),N.isSensor?(L!==null&&w.fillStyle(B,D*b),R!==null&&w.lineStyle(F,V,O*b)):(L!==null&&w.fillStyle(L,D*b),R!==null&&w.lineStyle(F,R,O*b)),G)w.arc(N.position.x,N.position.y,G,0,2*Math.PI);else{var z=N.vertices,X=z.length;w.moveTo(z[0].x,z[0].y);for(var k=1;k<X;k++){var H=z[k];if(!z[k-1].isInternal||A?w.lineTo(H.x,H.y):w.moveTo(H.x,H.y),k<X&&H.isInternal&&!A){var K=(k+1)%X;w.moveTo(z[K].x,z[K].y)}}w.closePath()}L!==null&&w.fillPath(),R!==null&&w.strokePath()}}if(I.showPositions&&!S.isStatic){var Z=S.position.x,J=S.position.y,j=Math.ceil(I.positionSize/2);w.fillStyle(I.positionColor,1),w.fillRect(Z-j,J-j,I.positionSize,I.positionSize)}return this},renderConvexHull:function(S,w,A,R){R===void 0&&(R=1);var O=S.parts,F=O.length;if(F>1){var L=S.vertices;w.lineStyle(R,A),w.beginPath(),w.moveTo(L[0].x,L[0].y);for(var D=1;D<L.length;D++)w.lineTo(L[D].x,L[D].y);w.lineTo(L[0].x,L[0].y),w.strokePath()}return this},renderJoints:function(){for(var S=this.debugGraphic,w=h.allConstraints(this.localWorld),A=0;A<w.length;A++){var R=w[A].render,O=R.lineColor,F=R.lineOpacity,L=R.lineThickness,D=R.pinSize,I=R.anchorColor,B=R.anchorSize;this.renderConstraint(w[A],S,O,F,L,D,I,B)}},renderConstraint:function(S,w,A,R,O,F,L,D){var I=S.render;if(!I.visible||!S.pointA||!S.pointB)return this;w.lineStyle(O,A,R);var B=S.bodyA,V=S.bodyB,Y,W;if(B?Y=E.add(B.position,S.pointA):Y=S.pointA,I.type==="pin")w.strokeCircle(Y.x,Y.y,F);else{if(V?W=E.add(V.position,S.pointB):W=S.pointB,w.beginPath(),w.moveTo(Y.x,Y.y),I.type==="spring")for(var $=E.sub(W,Y),N=E.perp(E.normalise($)),U=Math.ceil(l.clamp(S.length/5,12,20)),b,G=1;G<U;G+=1)b=G%2===0?1:-1,w.lineTo(Y.x+$.x*(G/U)+N.x*b*4,Y.y+$.y*(G/U)+N.y*b*4);w.lineTo(W.x,W.y)}return w.strokePath(),I.anchors&&D>0&&(w.fillStyle(L),w.fillCircle(Y.x,Y.y,D),w.fillCircle(W.x,W.y,D)),this},resetCollisionIDs:function(){return x._nextCollidingGroupId=1,x._nextNonCollidingGroupId=-1,x._nextCategory=1,this},shutdown:function(){v.off(this.engine),this.removeAllListeners(),y.clear(this.localWorld,!1),n.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});o.exports=P},95349:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setBounce:function(e){return this.body.restitution=e,this}};o.exports=T},70679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var d=0;if(!Array.isArray(e))d=e;else for(var x=0;x<e.length;x++)d|=e[x];return this.body.collisionFilter.mask=d,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,d){Array.isArray(e)||(e=[e]);for(var x=0;x<e.length;x++){var u=e[x].hasOwnProperty("body")?e[x].body:e[x];this.body.setOnCollideWith(u,d)}return this}};o.exports=T},77178:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x={applyForce:function(u){return this._tempVec2.set(this.body.position.x,this.body.position.y),d.applyForce(this.body,this._tempVec2,u),this},applyForceFrom:function(u,l){return d.applyForce(this.body,u,l),this},thrust:function(u){var l=this.body.angle;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(u){var l=this.body.angle-Math.PI/2;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(u){var l=this.body.angle+Math.PI/2;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(u){var l=this.body.angle-Math.PI;return this._tempVec2.set(u*Math.cos(l),u*Math.sin(l)),d.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};o.exports=x},74015:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setFriction:function(e,d,x){return this.body.friction=e,d!==void 0&&(this.body.frictionAir=d),x!==void 0&&(this.body.frictionStatic=x),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};o.exports=T},11535:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};o.exports=T},74497:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x=e(93736),u={setMass:function(l){return d.setMass(this.body,l),this},setDensity:function(l){return d.setDensity(this.body,l),this},centerOfMass:{get:function(){return new x(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};o.exports=u},75529:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};o.exports=T},64024:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68516),x=e(84125),u=e(88456),l=e(72632),h=e(10998),n=e(72829),r=e(39745),f={setRectangle:function(a,c,p){return this.setBody({type:"rectangle",width:a,height:c},p)},setCircle:function(a,c){return this.setBody({type:"circle",radius:a},c)},setPolygon:function(a,c,p){return this.setBody({type:"polygon",sides:c,radius:a},p)},setTrapezoid:function(a,c,p,v){return this.setBody({type:"trapezoid",width:a,height:c,slope:p},v)},setExistingBody:function(a,c){c===void 0&&(c=!0),this.body&&this.world.remove(this.body,!0),this.body=a;for(var p=0;p<a.parts.length;p++)a.parts[p].gameObject=this;var v=this;if(a.destroy=function(){v.world.remove(v.body,!0),v.body.gameObject=null},c&&(this.world.has(a)&&this.world.remove(a,!0),this.world.add(a)),this._originComponent){var m=a.render.sprite.xOffset,y=a.render.sprite.yOffset,E=a.centerOfMass.x,P=a.centerOfMass.y;if(u(E,.5)&&u(P,.5))this.setOrigin(m+.5,y+.5);else{var S=a.centerOffset.x,w=a.centerOffset.y;this.setOrigin(m+S/this.displayWidth,y+w/this.displayHeight)}}return this},setBody:function(a,c){if(!a)return this;var p;typeof a=="string"&&(a={type:a});var v=l(a,"type","rectangle"),m=l(a,"x",this._tempVec2.x),y=l(a,"y",this._tempVec2.y),E=l(a,"width",this.width),P=l(a,"height",this.height);switch(v){case"rectangle":p=d.rectangle(m,y,E,P,c);break;case"circle":var S=l(a,"radius",Math.max(E,P)/2),w=l(a,"maxSides",25);p=d.circle(m,y,S,c,w);break;case"trapezoid":var A=l(a,"slope",.5);p=d.trapezoid(m,y,E,P,A,c);break;case"polygon":var R=l(a,"sides",5),O=l(a,"radius",Math.max(E,P)/2);p=d.polygon(m,y,R,O,c);break;case"fromVertices":case"fromVerts":var F=l(a,"verts",null);if(F)if(typeof F=="string"&&(F=r.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))x.setVertices(this.body,F),p=this.body;else{var L=l(a,"flagInternal",!1),D=l(a,"removeCollinear",.01),I=l(a,"minimumArea",10);p=d.fromVertices(m,y,F,c,L,D,I)}break;case"fromPhysicsEditor":p=h.parseBody(m,y,a,c);break;case"fromPhysicsTracer":p=n.parseBody(m,y,a,c);break}return p&&this.setExistingBody(p,a.addToWorld),this}};o.exports=f},25106:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35416),x=e(22806),u=e(39073),l={setToSleep:function(){return x.set(this.body,!0),this},setAwake:function(){return x.set(this.body,!1),this},setSleepThreshold:function(h){return h===void 0&&(h=60),this.body.sleepThreshold=h,this},setSleepEvents:function(h,n){return this.setSleepStartEvent(h),this.setSleepEndEvent(n),this},setSleepStartEvent:function(h){if(h){var n=this.world;u.on(this.body,"sleepStart",function(r){n.emit(d.SLEEP_START,r,this)})}else u.off(this.body,"sleepStart");return this},setSleepEndEvent:function(h){if(h){var n=this.world;u.on(this.body,"sleepEnd",function(r){n.emit(d.SLEEP_END,r,this)})}else u.off(this.body,"sleepEnd");return this}};o.exports=l},82884:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x={setStatic:function(u){return d.setStatic(this.body,u),this},isStatic:function(){return this.body.isStatic}};o.exports=x},4753:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x=e(83392),u=e(35786),l=e(62138),h=4,n={x:{get:function(){return this.body.position.x},set:function(r){this._tempVec2.set(r,this.y),d.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(r){this._tempVec2.set(this.x,r),d.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(r){var f=1/this._scaleX,a=1/this._scaleY;this._scaleX=r,this._scaleX===0?this.renderFlags&=~h:this.renderFlags|=h,d.scale(this.body,f,a),d.scale(this.body,r,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(r){var f=1/this._scaleX,a=1/this._scaleY;this._scaleY=r,this._scaleY===0?this.renderFlags&=~h:this.renderFlags|=h,d.scale(this.body,f,a),d.scale(this.body,this._scaleX,r)}},angle:{get:function(){return l(this.body.angle*x.RAD_TO_DEG)},set:function(r){this.rotation=l(r)*x.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(r){this._rotation=u(r),d.setAngle(this.body,this._rotation)}},setPosition:function(r,f){return r===void 0&&(r=0),f===void 0&&(f=r),this._tempVec2.set(r,f),d.setPosition(this.body,this._tempVec2),this},setRotation:function(r){return r===void 0&&(r=0),this._rotation=u(r),d.setAngle(this.body,r),this},setFixedRotation:function(){return d.setInertia(this.body,1/0),this},setAngle:function(r){return r===void 0&&(r=0),this.angle=r,d.setAngle(this.body,this.rotation),this},setScale:function(r,f,a){r===void 0&&(r=1),f===void 0&&(f=r);var c=1/this._scaleX,p=1/this._scaleY;return this._scaleX=r,this._scaleY=f,d.scale(this.body,c,p,a),d.scale(this.body,r,f,a),this}};o.exports=n},37268:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84125),x={setVelocityX:function(u){return this._tempVec2.set(u,this.body.velocity.y),d.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(u){return this._tempVec2.set(this.body.velocity.x,u),d.setVelocity(this.body,this._tempVec2),this},setVelocity:function(u,l){return this._tempVec2.set(u,l),d.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return d.getVelocity(this.body)},setAngularVelocity:function(u){return d.setAngularVelocity(this.body,u),this},getAngularVelocity:function(){return d.getAngularVelocity(this.body)},setAngularSpeed:function(u){return d.setAngularSpeed(this.body,u),this},getAngularSpeed:function(){return d.getAngularSpeed(this.body)}};o.exports=x},74527:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Bounce:e(95349),Collision:e(70679),Force:e(77178),Friction:e(74015),Gravity:e(11535),Mass:e(74497),Sensor:e(75529),SetBody:e(64024),Sleep:e(25106),Static:e(82884),Transform:e(4753),Velocity:e(37268)}},63201:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afteradd"},30474:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterremove"},44822:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="afterupdate"},88820:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeadd"},94849:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeremove"},6391:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="beforeupdate"},96738:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionactive"},7916:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionend"},59529:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="collisionstart"},10219:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragend"},183:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="drag"},39143:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="dragstart"},16483:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},35806:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},22106:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepend"},5803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleepstart"},35416:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_ADD:e(63201),AFTER_REMOVE:e(30474),AFTER_UPDATE:e(44822),BEFORE_ADD:e(88820),BEFORE_REMOVE:e(94849),BEFORE_UPDATE:e(6391),COLLISION_ACTIVE:e(96738),COLLISION_END:e(7916),COLLISION_START:e(59529),DRAG_END:e(10219),DRAG:e(183),DRAG_START:e(39143),PAUSE:e(16483),RESUME:e(35806),SLEEP_END:e(22106),SLEEP_START:e(5803)}},45949:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BodyBounds:e(63568),Components:e(74527),Events:e(35416),Factory:e(72653),MatterGameObject:e(3860),Image:e(7030),Matter:e(18171),MatterPhysics:e(50583),PolyDecomp:e(81084),Sprite:e(73658),TileBody:e(84720),PhysicsEditorParser:e(10998),PhysicsJSONParser:e(72829),PointerConstraint:e(88596),World:e(31468)}},84125:(o,T,e)=>{var d={};o.exports=d;var x=e(39745),u=e(10438),l=e(22806),h=e(68758),n=e(84091),r=e(50658);(function(){d._timeCorrection=!0,d._inertiaScale=4,d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,d._baseDelta=16.666666666666668,d.create=function(a){var c={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!a.hasOwnProperty("position")&&a.hasOwnProperty("vertices")?a.position=x.centre(a.vertices):a.hasOwnProperty("vertices")||(c.vertices=x.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=h.extend(c,a);return f(p,a),p.setOnCollideWith=function(v,m){return m?this.onCollideWith[v.id]=m:delete this.onCollideWith[v.id],this},p},d.nextGroup=function(a){return a?d._nextNonCollidingGroupId--:d._nextCollidingGroupId++},d.nextCategory=function(){return d._nextCategory=d._nextCategory<<1,d._nextCategory};var f=function(a,c){if(c=c||{},d.set(a,{bounds:a.bounds||n.create(a.vertices),positionPrev:a.positionPrev||u.clone(a.position),anglePrev:a.anglePrev||a.angle,vertices:a.vertices,parts:a.parts||[a],isStatic:a.isStatic,isSleeping:a.isSleeping,parent:a.parent||a}),x.rotate(a.vertices,a.angle,a.position),r.rotate(a.axes,a.angle),n.update(a.bounds,a.vertices,a.velocity),d.set(a,{axes:c.axes||a.axes,area:c.area||a.area,mass:c.mass||a.mass,inertia:c.inertia||a.inertia}),a.parts.length===1){var p=a.bounds,v=a.centerOfMass,m=a.centerOffset,y=p.max.x-p.min.x,E=p.max.y-p.min.y;v.x=-(p.min.x-a.position.x)/y,v.y=-(p.min.y-a.position.y)/E,m.x=y*v.x,m.y=E*v.y}};d.set=function(a,c,p){var v;typeof c=="string"&&(v=c,c={},c[v]=p);for(v in c)if(!!Object.prototype.hasOwnProperty.call(c,v))switch(p=c[v],v){case"isStatic":d.setStatic(a,p);break;case"isSleeping":l.set(a,p);break;case"mass":d.setMass(a,p);break;case"density":d.setDensity(a,p);break;case"inertia":d.setInertia(a,p);break;case"vertices":d.setVertices(a,p);break;case"position":d.setPosition(a,p);break;case"angle":d.setAngle(a,p);break;case"velocity":d.setVelocity(a,p);break;case"angularVelocity":d.setAngularVelocity(a,p);break;case"speed":d.setSpeed(a,p);break;case"angularSpeed":d.setAngularSpeed(a,p);break;case"parts":d.setParts(a,p);break;case"centre":d.setCentre(a,p);break;default:a[v]=p}},d.setStatic=function(a,c){for(var p=0;p<a.parts.length;p++){var v=a.parts[p];c?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=c}},d.setMass=function(a,c){var p=a.inertia/(a.mass/6);a.inertia=p*(c/6),a.inverseInertia=1/a.inertia,a.mass=c,a.inverseMass=1/a.mass,a.density=a.mass/a.area},d.setDensity=function(a,c){d.setMass(a,c*a.area),a.density=c},d.setInertia=function(a,c){a.inertia=c,a.inverseInertia=1/a.inertia},d.setVertices=function(a,c){c[0].body===a?a.vertices=c:a.vertices=x.create(c,a),a.axes=r.fromVertices(a.vertices),a.area=x.area(a.vertices),d.setMass(a,a.density*a.area);var p=x.centre(a.vertices);x.translate(a.vertices,p,-1),d.setInertia(a,d._inertiaScale*x.inertia(a.vertices,a.mass)),x.translate(a.vertices,a.position),n.update(a.bounds,a.vertices,a.velocity)},d.setParts=function(a,c,p){var v;for(c=c.slice(0),a.parts.length=0,a.parts.push(a),a.parent=a,v=0;v<c.length;v++){var m=c[v];m!==a&&(m.parent=a,a.parts.push(m))}if(a.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var y=[];for(v=0;v<c.length;v++)y=y.concat(c[v].vertices);x.clockwiseSort(y);var E=x.hull(y),P=x.centre(E);d.setVertices(a,E),x.translate(a.vertices,P)}var S=d._totalProperties(a),w=S.centre.x,A=S.centre.y,R=a.bounds,O=a.centerOfMass,F=a.centerOffset;n.update(R,a.vertices,a.velocity),O.x=-(R.min.x-w)/(R.max.x-R.min.x),O.y=-(R.min.y-A)/(R.max.y-R.min.y),F.x=w,F.y=A,a.area=S.area,a.parent=a,a.position.x=w,a.position.y=A,a.positionPrev.x=w,a.positionPrev.y=A,d.setMass(a,S.mass),d.setInertia(a,S.inertia),d.setPosition(a,S.centre)}},d.setCentre=function(a,c,p){p?(a.positionPrev.x+=c.x,a.positionPrev.y+=c.y,a.position.x+=c.x,a.position.y+=c.y):(a.positionPrev.x=c.x-(a.position.x-a.positionPrev.x),a.positionPrev.y=c.y-(a.position.y-a.positionPrev.y),a.position.x=c.x,a.position.y=c.y)},d.setPosition=function(a,c,p){var v=u.sub(c,a.position);p?(a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.velocity.x=v.x,a.velocity.y=v.y,a.speed=u.magnitude(v)):(a.positionPrev.x+=v.x,a.positionPrev.y+=v.y);for(var m=0;m<a.parts.length;m++){var y=a.parts[m];y.position.x+=v.x,y.position.y+=v.y,x.translate(y.vertices,v),n.update(y.bounds,y.vertices,a.velocity)}},d.setAngle=function(a,c,p){var v=c-a.angle;p?(a.anglePrev=a.angle,a.angularVelocity=v,a.angularSpeed=Math.abs(v)):a.anglePrev+=v;for(var m=0;m<a.parts.length;m++){var y=a.parts[m];y.angle+=v,x.rotate(y.vertices,v,a.position),r.rotate(y.axes,v),n.update(y.bounds,y.vertices,a.velocity),m>0&&u.rotateAbout(y.position,v,a.position,y.position)}},d.setVelocity=function(a,c){var p=a.deltaTime/d._baseDelta;a.positionPrev.x=a.position.x-c.x*p,a.positionPrev.y=a.position.y-c.y*p,a.velocity.x=(a.position.x-a.positionPrev.x)/p,a.velocity.y=(a.position.y-a.positionPrev.y)/p,a.speed=u.magnitude(a.velocity)},d.getVelocity=function(a){var c=d._baseDelta/a.deltaTime;return{x:(a.position.x-a.positionPrev.x)*c,y:(a.position.y-a.positionPrev.y)*c}},d.getSpeed=function(a){return u.magnitude(d.getVelocity(a))},d.setSpeed=function(a,c){d.setVelocity(a,u.mult(u.normalise(d.getVelocity(a)),c))},d.setAngularVelocity=function(a,c){var p=a.deltaTime/d._baseDelta;a.anglePrev=a.angle-c*p,a.angularVelocity=(a.angle-a.anglePrev)/p,a.angularSpeed=Math.abs(a.angularVelocity)},d.getAngularVelocity=function(a){return(a.angle-a.anglePrev)*d._baseDelta/a.deltaTime},d.getAngularSpeed=function(a){return Math.abs(d.getAngularVelocity(a))},d.setAngularSpeed=function(a,c){d.setAngularVelocity(a,h.sign(d.getAngularVelocity(a))*c)},d.translate=function(a,c,p){d.setPosition(a,u.add(a.position,c),p)},d.rotate=function(a,c,p,v){if(!p)d.setAngle(a,a.angle+c,v);else{var m=Math.cos(c),y=Math.sin(c),E=a.position.x-p.x,P=a.position.y-p.y;d.setPosition(a,{x:p.x+(E*m-P*y),y:p.y+(E*y+P*m)},v),d.setAngle(a,a.angle+c,v)}},d.scale=function(a,c,p,v){var m=0,y=0;v=v||a.position;for(var E=0;E<a.parts.length;E++){var P=a.parts[E];P.scale.x=c,P.scale.y=p,x.scale(P.vertices,c,p,v),P.axes=r.fromVertices(P.vertices),P.area=x.area(P.vertices),d.setMass(P,a.density*P.area),x.translate(P.vertices,{x:-P.position.x,y:-P.position.y}),d.setInertia(P,d._inertiaScale*x.inertia(P.vertices,P.mass)),x.translate(P.vertices,{x:P.position.x,y:P.position.y}),E>0&&(m+=P.area,y+=P.inertia),P.position.x=v.x+(P.position.x-v.x)*c,P.position.y=v.y+(P.position.y-v.y)*p,n.update(P.bounds,P.vertices,a.velocity)}a.parts.length>1&&(a.area=m,a.isStatic||(d.setMass(a,a.density*m),d.setInertia(a,y))),a.circleRadius&&(c===p?a.circleRadius*=c:a.circleRadius=null)},d.update=function(a,c){c=(typeof c<"u"?c:16.666666666666668)*a.timeScale;var p=c*c,v=d._timeCorrection?c/(a.deltaTime||c):1,m=1-a.frictionAir*(c/h._baseDelta),y=(a.position.x-a.positionPrev.x)*v,E=(a.position.y-a.positionPrev.y)*v;a.velocity.x=y*m+a.force.x/a.mass*p,a.velocity.y=E*m+a.force.y/a.mass*p,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.position.x+=a.velocity.x,a.position.y+=a.velocity.y,a.deltaTime=c,a.angularVelocity=(a.angle-a.anglePrev)*m*v+a.torque/a.inertia*p,a.anglePrev=a.angle,a.angle+=a.angularVelocity,a.speed=u.magnitude(a.velocity),a.angularSpeed=Math.abs(a.angularVelocity);for(var P=0;P<a.parts.length;P++){var S=a.parts[P];x.translate(S.vertices,a.velocity),P>0&&(S.position.x+=a.velocity.x,S.position.y+=a.velocity.y),a.angularVelocity!==0&&(x.rotate(S.vertices,a.angularVelocity,a.position),r.rotate(S.axes,a.angularVelocity),P>0&&u.rotateAbout(S.position,a.angularVelocity,a.position,S.position)),n.update(S.bounds,S.vertices,a.velocity)}},d.updateVelocities=function(a){var c=d._baseDelta/a.deltaTime,p=a.velocity;p.x=(a.position.x-a.positionPrev.x)*c,p.y=(a.position.y-a.positionPrev.y)*c,a.speed=Math.sqrt(p.x*p.x+p.y*p.y),a.angularVelocity=(a.angle-a.anglePrev)*c,a.angularSpeed=Math.abs(a.angularVelocity)},d.applyForce=function(a,c,p){var v={x:c.x-a.position.x,y:c.y-a.position.y};a.force.x+=p.x,a.force.y+=p.y,a.torque+=v.x*p.y-v.y*p.x},d._totalProperties=function(a){for(var c={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=a.parts.length===1?0:1;p<a.parts.length;p++){var v=a.parts[p],m=v.mass!==1/0?v.mass:1;c.mass+=m,c.area+=v.area,c.inertia+=v.inertia,c.centre=u.add(c.centre,u.mult(v.position,m))}return c.centre=u.div(c.centre,c.mass),c}})()},11299:(o,T,e)=>{var d={};o.exports=d;var x=e(39073),u=e(68758),l=e(84091),h=e(84125);(function(){d.create=function(n){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},n)},d.setModified=function(n,r,f,a){if(x.trigger(n,"compositeModified",n),n.isModified=r,r&&n.cache&&(n.cache.allBodies=null,n.cache.allConstraints=null,n.cache.allComposites=null),f&&n.parent&&d.setModified(n.parent,r,f,a),a)for(var c=0;c<n.composites.length;c++){var p=n.composites[c];d.setModified(p,r,f,a)}},d.add=function(n,r){var f=[].concat(r);x.trigger(n,"beforeAdd",{object:r});for(var a=0;a<f.length;a++){var c=f[a];switch(c.type){case"body":if(c.parent!==c){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(n,c);break;case"constraint":d.addConstraint(n,c);break;case"composite":d.addComposite(n,c);break;case"mouseConstraint":d.addConstraint(n,c.constraint);break}}return x.trigger(n,"afterAdd",{object:r}),n},d.remove=function(n,r,f){var a=[].concat(r);x.trigger(n,"beforeRemove",{object:r});for(var c=0;c<a.length;c++){var p=a[c];switch(p.type){case"body":d.removeBody(n,p,f);break;case"constraint":d.removeConstraint(n,p,f);break;case"composite":d.removeComposite(n,p,f);break;case"mouseConstraint":d.removeConstraint(n,p.constraint);break}}return x.trigger(n,"afterRemove",{object:r}),n},d.addComposite=function(n,r){return n.composites.push(r),r.parent=n,d.setModified(n,!0,!0,!1),n},d.removeComposite=function(n,r,f){var a=u.indexOf(n.composites,r);if(a!==-1&&d.removeCompositeAt(n,a),f)for(var c=0;c<n.composites.length;c++)d.removeComposite(n.composites[c],r,!0);return n},d.removeCompositeAt=function(n,r){return n.composites.splice(r,1),d.setModified(n,!0,!0,!1),n},d.addBody=function(n,r){return n.bodies.push(r),d.setModified(n,!0,!0,!1),n},d.removeBody=function(n,r,f){var a=u.indexOf(n.bodies,r);if(a!==-1&&d.removeBodyAt(n,a),f)for(var c=0;c<n.composites.length;c++)d.removeBody(n.composites[c],r,!0);return n},d.removeBodyAt=function(n,r){return n.bodies.splice(r,1),d.setModified(n,!0,!0,!1),n},d.addConstraint=function(n,r){return n.constraints.push(r),d.setModified(n,!0,!0,!1),n},d.removeConstraint=function(n,r,f){var a=u.indexOf(n.constraints,r);if(a!==-1&&d.removeConstraintAt(n,a),f)for(var c=0;c<n.composites.length;c++)d.removeConstraint(n.composites[c],r,!0);return n},d.removeConstraintAt=function(n,r){return n.constraints.splice(r,1),d.setModified(n,!0,!0,!1),n},d.clear=function(n,r,f){if(f)for(var a=0;a<n.composites.length;a++)d.clear(n.composites[a],r,!0);return r?n.bodies=n.bodies.filter(function(c){return c.isStatic}):n.bodies.length=0,n.constraints.length=0,n.composites.length=0,d.setModified(n,!0,!0,!1),n},d.allBodies=function(n){if(n.cache&&n.cache.allBodies)return n.cache.allBodies;for(var r=[].concat(n.bodies),f=0;f<n.composites.length;f++)r=r.concat(d.allBodies(n.composites[f]));return n.cache&&(n.cache.allBodies=r),r},d.allConstraints=function(n){if(n.cache&&n.cache.allConstraints)return n.cache.allConstraints;for(var r=[].concat(n.constraints),f=0;f<n.composites.length;f++)r=r.concat(d.allConstraints(n.composites[f]));return n.cache&&(n.cache.allConstraints=r),r},d.allComposites=function(n){if(n.cache&&n.cache.allComposites)return n.cache.allComposites;for(var r=[].concat(n.composites),f=0;f<n.composites.length;f++)r=r.concat(d.allComposites(n.composites[f]));return n.cache&&(n.cache.allComposites=r),r},d.get=function(n,r,f){var a,c;switch(f){case"body":a=d.allBodies(n);break;case"constraint":a=d.allConstraints(n);break;case"composite":a=d.allComposites(n).concat(n);break}return a?(c=a.filter(function(p){return p.id.toString()===r.toString()}),c.length===0?null:c[0]):null},d.move=function(n,r,f){return d.remove(n,r),d.add(f,r),n},d.rebase=function(n){for(var r=d.allBodies(n).concat(d.allConstraints(n)).concat(d.allComposites(n)),f=0;f<r.length;f++)r[f].id=u.nextId();return n},d.translate=function(n,r,f){for(var a=f?d.allBodies(n):n.bodies,c=0;c<a.length;c++)h.translate(a[c],r);return n},d.rotate=function(n,r,f,a){for(var c=Math.cos(r),p=Math.sin(r),v=a?d.allBodies(n):n.bodies,m=0;m<v.length;m++){var y=v[m],E=y.position.x-f.x,P=y.position.y-f.y;h.setPosition(y,{x:f.x+(E*c-P*p),y:f.y+(E*p+P*c)}),h.rotate(y,r)}return n},d.scale=function(n,r,f,a,c){for(var p=c?d.allBodies(n):n.bodies,v=0;v<p.length;v++){var m=p[v],y=m.position.x-a.x,E=m.position.y-a.y;h.setPosition(m,{x:a.x+y*r,y:a.y+E*f}),h.scale(m,r,f)}return n},d.bounds=function(n){for(var r=d.allBodies(n),f=[],a=0;a<r.length;a+=1){var c=r[a];f.push(c.bounds.min,c.bounds.max)}return l.create(f)}})()},72005:(o,T,e)=>{var d={};o.exports=d;var x=e(11299);(function(){d.create=x.create,d.add=x.add,d.remove=x.remove,d.clear=x.clear,d.addComposite=x.addComposite,d.addBody=x.addBody,d.addConstraint=x.addConstraint})()},63454:(o,T,e)=>{var d={};o.exports=d;var x=e(39745),u=e(70584);(function(){var l=[],h={overlap:0,axis:null},n={overlap:0,axis:null};d.create=function(r,f){return{pair:null,collided:!1,bodyA:r,bodyB:f,parentA:r.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},d.collides=function(r,f,a){if(d._overlapAxes(h,r.vertices,f.vertices,r.axes),h.overlap<=0||(d._overlapAxes(n,f.vertices,r.vertices,f.axes),n.overlap<=0))return null;var c=a&&a.table[u.id(r,f)],p;c?p=c.collision:(p=d.create(r,f),p.collided=!0,p.bodyA=r.id<f.id?r:f,p.bodyB=r.id<f.id?f:r,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent),r=p.bodyA,f=p.bodyB;var v;h.overlap<n.overlap?v=h:v=n;var m=p.normal,y=p.supports,E=v.axis,P=E.x,S=E.y;P*(f.position.x-r.position.x)+S*(f.position.y-r.position.y)<0?(m.x=P,m.y=S):(m.x=-P,m.y=-S),p.tangent.x=-m.y,p.tangent.y=m.x,p.depth=v.overlap,p.penetration.x=m.x*p.depth,p.penetration.y=m.y*p.depth;var w=d._findSupports(r,f,m,1),A=0;if(x.contains(r.vertices,w[0])&&(y[A++]=w[0]),x.contains(r.vertices,w[1])&&(y[A++]=w[1]),A<2){var R=d._findSupports(f,r,m,-1);x.contains(f.vertices,R[0])&&(y[A++]=R[0]),A<2&&x.contains(f.vertices,R[1])&&(y[A++]=R[1])}return A===0&&(y[A++]=w[0]),y.length=A,p},d._overlapAxes=function(r,f,a,c){var p=f.length,v=a.length,m=f[0].x,y=f[0].y,E=a[0].x,P=a[0].y,S=c.length,w=Number.MAX_VALUE,A=0,R,O,F,L,D,I;for(D=0;D<S;D++){var B=c[D],V=B.x,Y=B.y,W=m*V+y*Y,$=E*V+P*Y,N=W,U=$;for(I=1;I<p;I+=1)L=f[I].x*V+f[I].y*Y,L>N?N=L:L<W&&(W=L);for(I=1;I<v;I+=1)L=a[I].x*V+a[I].y*Y,L>U?U=L:L<$&&($=L);if(O=N-$,F=U-W,R=O<F?O:F,R<w&&(w=R,A=D,R<=0))break}r.axis=c[A],r.overlap=w},d._projectToAxis=function(r,f,a){for(var c=f[0].x*a.x+f[0].y*a.y,p=c,v=1;v<f.length;v+=1){var m=f[v].x*a.x+f[v].y*a.y;m>p?p=m:m<c&&(c=m)}r.min=c,r.max=p},d._findSupports=function(r,f,a,c){var p=f.vertices,v=p.length,m=r.position.x,y=r.position.y,E=a.x*c,P=a.y*c,S=Number.MAX_VALUE,w,A,R,O,F;for(F=0;F<v;F+=1)A=p[F],O=E*(m-A.x)+P*(y-A.y),O<S&&(S=O,w=A);return R=p[(v+w.index-1)%v],S=E*(m-R.x)+P*(y-R.y),A=p[(w.index+1)%v],E*(m-A.x)+P*(y-A.y)<S?(l[0]=w,l[1]=A,l):(l[0]=w,l[1]=R,l)}})()},17319:o=>{var T={};o.exports=T,function(){T.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},13657:(o,T,e)=>{var d={};o.exports=d;var x=e(68758),u=e(63454);(function(){d.create=function(l){var h={bodies:[],pairs:null};return x.extend(h,l)},d.setBodies=function(l,h){l.bodies=h.slice(0)},d.clear=function(l){l.bodies=[]},d.collisions=function(l){var h=[],n=l.pairs,r=l.bodies,f=r.length,a=d.canCollide,c=u.collides,p,v;for(r.sort(d._compareBoundsX),p=0;p<f;p++){var m=r[p],y=m.bounds,E=m.bounds.max.x,P=m.bounds.max.y,S=m.bounds.min.y,w=m.isStatic||m.isSleeping,A=m.parts.length,R=A===1;for(v=p+1;v<f;v++){var O=r[v],F=O.bounds;if(F.min.x>E)break;if(!(P<F.min.y||S>F.max.y)&&!(w&&(O.isStatic||O.isSleeping))&&!!a(m.collisionFilter,O.collisionFilter)){var L=O.parts.length;if(R&&L===1){var D=c(m,O,n);D&&h.push(D)}else for(var I=A>1?1:0,B=L>1?1:0,V=I;V<A;V++)for(var Y=m.parts[V],y=Y.bounds,W=B;W<L;W++){var $=O.parts[W],F=$.bounds;if(!(y.min.x>F.max.x||y.max.x<F.min.x||y.max.y<F.min.y||y.min.y>F.max.y)){var D=c(Y,$,n);D&&h.push(D)}}}}}return h},d.canCollide=function(l,h){return l.group===h.group&&l.group!==0?l.group>0:(l.mask&h.category)!==0&&(h.mask&l.category)!==0},d._compareBoundsX=function(l,h){return l.bounds.min.x-h.bounds.min.x}})()},70584:(o,T,e)=>{var d={};o.exports=d;var x=e(17319);(function(){d.create=function(u,l){var h=u.bodyA,n=u.bodyB,r={id:d.id(h,n),bodyA:h,bodyB:n,collision:u,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:h.isSensor||n.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return d.update(r,u,l),r},d.update=function(u,l,h){var n=u.contacts,r=l.supports,f=u.activeContacts,a=l.parentA,c=l.parentB,p=a.vertices.length;u.isActive=!0,u.timeUpdated=h,u.collision=l,u.separation=l.depth,u.inverseMass=a.inverseMass+c.inverseMass,u.friction=a.friction<c.friction?a.friction:c.friction,u.frictionStatic=a.frictionStatic>c.frictionStatic?a.frictionStatic:c.frictionStatic,u.restitution=a.restitution>c.restitution?a.restitution:c.restitution,u.slop=a.slop>c.slop?a.slop:c.slop,l.pair=u,f.length=0;for(var v=0;v<r.length;v++){var m=r[v],y=m.body===a?m.index:p+m.index,E=n[y];E?f.push(E):f.push(n[y]=x.create(m))}},d.setActive=function(u,l,h){l?(u.isActive=!0,u.timeUpdated=h):(u.isActive=!1,u.activeContacts.length=0)},d.id=function(u,l){return u.id<l.id?"A"+u.id+"B"+l.id:"A"+l.id+"B"+u.id}})()},91327:(o,T,e)=>{var d={};o.exports=d;var x=e(70584),u=e(68758);(function(){d.create=function(l){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},d.update=function(l,h,n){var r=l.list,f=r.length,a=l.table,c=h.length,p=l.collisionStart,v=l.collisionEnd,m=l.collisionActive,y,E,P,S;for(p.length=0,v.length=0,m.length=0,S=0;S<f;S++)r[S].confirmedActive=!1;for(S=0;S<c;S++)y=h[S],P=y.pair,P?(P.isActive?m.push(P):p.push(P),x.update(P,y,n),P.confirmedActive=!0):(P=x.create(y,n),a[P.id]=P,p.push(P),r.push(P));var w=[];for(f=r.length,S=0;S<f;S++)P=r[S],P.confirmedActive||(x.setActive(P,!1,n),v.push(P),!P.collision.bodyA.isSleeping&&!P.collision.bodyB.isSleeping&&w.push(S));for(S=0;S<w.length;S++)E=w[S]-S,P=r[E],r.splice(E,1),delete a[P.id]},d.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},13390:(o,T,e)=>{var d={};o.exports=d;var x=e(10438),u=e(63454),l=e(84091),h=e(68516),n=e(39745);(function(){d.collides=function(r,f){for(var a=[],c=f.length,p=r.bounds,v=u.collides,m=l.overlaps,y=0;y<c;y++){var E=f[y],P=E.parts.length,S=P===1?0:1;if(r!==E&&m(E.bounds,p))for(var w=S;w<P;w++){var A=E.parts[w];if(m(A.bounds,p)){var R=v(A,r);if(R){a.push(R);break}}}}return a},d.ray=function(r,f,a,c){c=c||1e-100;for(var p=x.angle(f,a),v=x.magnitude(x.sub(f,a)),m=(a.x+f.x)*.5,y=(a.y+f.y)*.5,E=h.rectangle(m,y,v,c,{angle:p}),P=d.collides(E,r),S=0;S<P.length;S+=1){var w=P[S];w.body=w.bodyB=w.bodyA}return P},d.region=function(r,f,a){for(var c=[],p=0;p<r.length;p++){var v=r[p],m=l.overlaps(v.bounds,f);(m&&!a||!m&&a)&&c.push(v)}return c},d.point=function(r,f){for(var a=[],c=0;c<r.length;c++){var p=r[c];if(l.contains(p.bounds,f))for(var v=p.parts.length===1?0:1;v<p.parts.length;v++){var m=p.parts[v];if(l.contains(m.bounds,f)&&n.contains(m.vertices,f)){a.push(p);break}}}return a}})()},44272:(o,T,e)=>{var d={};o.exports=d;var x=e(39745),u=e(68758),l=e(84091);(function(){d._restingThresh=2,d._restingThreshTangent=Math.sqrt(6),d._positionDampen=.9,d._positionWarming=.8,d._frictionNormalMultiplier=5,d._frictionMaxStatic=Number.MAX_VALUE,d.preSolvePosition=function(h){var n,r,f,a=h.length;for(n=0;n<a;n++)r=h[n],r.isActive&&(f=r.activeContacts.length,r.collision.parentA.totalContacts+=f,r.collision.parentB.totalContacts+=f)},d.solvePosition=function(h,n,r){var f,a,c,p,v,m,y,E,P=d._positionDampen*(r||1),S=u.clamp(n/u._baseDelta,0,1),w=h.length;for(f=0;f<w;f++)a=h[f],!(!a.isActive||a.isSensor)&&(c=a.collision,p=c.parentA,v=c.parentB,m=c.normal,a.separation=m.x*(v.positionImpulse.x+c.penetration.x-p.positionImpulse.x)+m.y*(v.positionImpulse.y+c.penetration.y-p.positionImpulse.y));for(f=0;f<w;f++)a=h[f],!(!a.isActive||a.isSensor)&&(c=a.collision,p=c.parentA,v=c.parentB,m=c.normal,E=a.separation-a.slop*S,(p.isStatic||v.isStatic)&&(E*=2),p.isStatic||p.isSleeping||(y=P/p.totalContacts,p.positionImpulse.x+=m.x*E*y,p.positionImpulse.y+=m.y*E*y),v.isStatic||v.isSleeping||(y=P/v.totalContacts,v.positionImpulse.x-=m.x*E*y,v.positionImpulse.y-=m.y*E*y))},d.postSolvePosition=function(h){for(var n=d._positionWarming,r=h.length,f=x.translate,a=l.update,c=0;c<r;c++){var p=h[c],v=p.positionImpulse,m=v.x,y=v.y,E=p.velocity;if(p.totalContacts=0,m!==0||y!==0){for(var P=0;P<p.parts.length;P++){var S=p.parts[P];f(S.vertices,v),a(S.bounds,S.vertices,E),S.position.x+=m,S.position.y+=y}p.positionPrev.x+=m,p.positionPrev.y+=y,m*E.x+y*E.y<0?(v.x=0,v.y=0):(v.x*=n,v.y*=n)}}},d.preSolveVelocity=function(h){var n=h.length,r,f;for(r=0;r<n;r++){var a=h[r];if(!(!a.isActive||a.isSensor)){var c=a.activeContacts,p=c.length,v=a.collision,m=v.parentA,y=v.parentB,E=v.normal,P=v.tangent;for(f=0;f<p;f++){var S=c[f],w=S.vertex,A=S.normalImpulse,R=S.tangentImpulse;if(A!==0||R!==0){var O=E.x*A+P.x*R,F=E.y*A+P.y*R;m.isStatic||m.isSleeping||(m.positionPrev.x+=O*m.inverseMass,m.positionPrev.y+=F*m.inverseMass,m.anglePrev+=m.inverseInertia*((w.x-m.position.x)*F-(w.y-m.position.y)*O)),y.isStatic||y.isSleeping||(y.positionPrev.x-=O*y.inverseMass,y.positionPrev.y-=F*y.inverseMass,y.anglePrev-=y.inverseInertia*((w.x-y.position.x)*F-(w.y-y.position.y)*O))}}}}},d.solveVelocity=function(h,n){var r=n/u._baseDelta,f=r*r,a=f*r,c=-d._restingThresh*r,p=d._restingThreshTangent,v=d._frictionNormalMultiplier*r,m=d._frictionMaxStatic,y=h.length,E,P,S,w;for(S=0;S<y;S++){var A=h[S];if(!(!A.isActive||A.isSensor)){var R=A.collision,O=R.parentA,F=R.parentB,L=O.velocity,D=F.velocity,I=R.normal.x,B=R.normal.y,V=R.tangent.x,Y=R.tangent.y,W=A.activeContacts,$=W.length,N=1/$,U=O.inverseMass+F.inverseMass,b=A.friction*A.frictionStatic*v;for(L.x=O.position.x-O.positionPrev.x,L.y=O.position.y-O.positionPrev.y,D.x=F.position.x-F.positionPrev.x,D.y=F.position.y-F.positionPrev.y,O.angularVelocity=O.angle-O.anglePrev,F.angularVelocity=F.angle-F.anglePrev,w=0;w<$;w++){var G=W[w],z=G.vertex,X=z.x-O.position.x,k=z.y-O.position.y,H=z.x-F.position.x,K=z.y-F.position.y,Z=L.x-k*O.angularVelocity,J=L.y+X*O.angularVelocity,j=D.x-K*F.angularVelocity,Q=D.y+H*F.angularVelocity,_=Z-j,q=J-Q,et=I*_+B*q,at=V*_+Y*q,ot=A.separation+et,ht=Math.min(ot,1);ht=ot<0?0:ht;var tt=ht*b;at<-tt||at>tt?(P=at>0?at:-at,E=A.friction*(at>0?1:-1)*a,E<-P?E=-P:E>P&&(E=P)):(E=at,P=m);var rt=X*B-k*I,nt=H*B-K*I,pt=N/(U+O.inverseInertia*rt*rt+F.inverseInertia*nt*nt),vt=(1+A.restitution)*et*pt;if(E*=pt,et<c)G.normalImpulse=0;else{var It=G.normalImpulse;G.normalImpulse+=vt,G.normalImpulse>0&&(G.normalImpulse=0),vt=G.normalImpulse-It}if(at<-p||at>p)G.tangentImpulse=0;else{var Rt=G.tangentImpulse;G.tangentImpulse+=E,G.tangentImpulse<-P&&(G.tangentImpulse=-P),G.tangentImpulse>P&&(G.tangentImpulse=P),E=G.tangentImpulse-Rt}var St=I*vt+V*E,mt=B*vt+Y*E;O.isStatic||O.isSleeping||(O.positionPrev.x+=St*O.inverseMass,O.positionPrev.y+=mt*O.inverseMass,O.anglePrev+=(X*mt-k*St)*O.inverseInertia),F.isStatic||F.isSleeping||(F.positionPrev.x-=St*F.inverseMass,F.positionPrev.y-=mt*F.inverseMass,F.anglePrev-=(H*mt-K*St)*F.inverseInertia)}}}}})()},52838:(o,T,e)=>{var d={};o.exports=d;var x=e(39745),u=e(10438),l=e(22806),h=e(84091),n=e(50658),r=e(68758);(function(){d._warming=.4,d._torqueDampen=1,d._minLength=1e-6,d.create=function(f){var a=f;a.bodyA&&!a.pointA&&(a.pointA={x:0,y:0}),a.bodyB&&!a.pointB&&(a.pointB={x:0,y:0});var c=a.bodyA?u.add(a.bodyA.position,a.pointA):a.pointA,p=a.bodyB?u.add(a.bodyB.position,a.pointB):a.pointB,v=u.magnitude(u.sub(c,p));a.length=typeof a.length<"u"?a.length:v,a.id=a.id||r.nextId(),a.label=a.label||"Constraint",a.type="constraint",a.stiffness=a.stiffness||(a.length>0?1:.7),a.damping=a.damping||0,a.angularStiffness=a.angularStiffness||0,a.angleA=a.bodyA?a.bodyA.angle:a.angleA,a.angleB=a.bodyB?a.bodyB.angle:a.angleB,a.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return a.length===0&&a.stiffness>.1?(m.type="pin",m.anchors=!1):a.stiffness<.9&&(m.type="spring"),a.render=r.extend(m,a.render),a},d.preSolveAll=function(f){for(var a=0;a<f.length;a+=1){var c=f[a],p=c.constraintImpulse;c.isStatic||p.x===0&&p.y===0&&p.angle===0||(c.position.x+=p.x,c.position.y+=p.y,c.angle+=p.angle)}},d.solveAll=function(f,a){for(var c=r.clamp(a/r._baseDelta,0,1),p=0;p<f.length;p+=1){var v=f[p],m=!v.bodyA||v.bodyA&&v.bodyA.isStatic,y=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(m||y)&&d.solve(f[p],c)}for(p=0;p<f.length;p+=1)v=f[p],m=!v.bodyA||v.bodyA&&v.bodyA.isStatic,y=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!m&&!y&&d.solve(f[p],c)},d.solve=function(f,a){var c=f.bodyA,p=f.bodyB,v=f.pointA,m=f.pointB;if(!(!c&&!p)){c&&!c.isStatic&&(u.rotate(v,c.angle-f.angleA,v),f.angleA=c.angle),p&&!p.isStatic&&(u.rotate(m,p.angle-f.angleB,m),f.angleB=p.angle);var y=v,E=m;if(c&&(y=u.add(c.position,v)),p&&(E=u.add(p.position,m)),!(!y||!E)){var P=u.sub(y,E),S=u.magnitude(P);S<d._minLength&&(S=d._minLength);var w=(S-f.length)/S,A=f.stiffness>=1||f.length===0,R=A?f.stiffness*a:f.stiffness*a*a,O=f.damping*a,F=u.mult(P,w*R),L=(c?c.inverseMass:0)+(p?p.inverseMass:0),D=(c?c.inverseInertia:0)+(p?p.inverseInertia:0),I=L+D,B,V,Y,W,$;if(O>0){var N=u.create();Y=u.div(P,S),$=u.sub(p&&u.sub(p.position,p.positionPrev)||N,c&&u.sub(c.position,c.positionPrev)||N),W=u.dot(Y,$)}c&&!c.isStatic&&(V=c.inverseMass/L,c.constraintImpulse.x-=F.x*V,c.constraintImpulse.y-=F.y*V,c.position.x-=F.x*V,c.position.y-=F.y*V,O>0&&(c.positionPrev.x-=O*Y.x*W*V,c.positionPrev.y-=O*Y.y*W*V),B=u.cross(v,F)/I*d._torqueDampen*c.inverseInertia*(1-f.angularStiffness),c.constraintImpulse.angle-=B,c.angle-=B),p&&!p.isStatic&&(V=p.inverseMass/L,p.constraintImpulse.x+=F.x*V,p.constraintImpulse.y+=F.y*V,p.position.x+=F.x*V,p.position.y+=F.y*V,O>0&&(p.positionPrev.x+=O*Y.x*W*V,p.positionPrev.y+=O*Y.y*W*V),B=u.cross(m,F)/I*d._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle+=B,p.angle+=B)}}},d.postSolveAll=function(f){for(var a=0;a<f.length;a++){var c=f[a],p=c.constraintImpulse;if(!(c.isStatic||p.x===0&&p.y===0&&p.angle===0)){l.set(c,!1);for(var v=0;v<c.parts.length;v++){var m=c.parts[v];x.translate(m.vertices,p),v>0&&(m.position.x+=p.x,m.position.y+=p.y),p.angle!==0&&(x.rotate(m.vertices,p.angle,c.position),n.rotate(m.axes,p.angle),v>0&&u.rotateAbout(m.position,p.angle,c.position,m.position)),h.update(m.bounds,m.vertices,c.velocity)}p.angle*=d._warming,p.x*=d._warming,p.y*=d._warming}}},d.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},d.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},d.currentLength=function(f){var a=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),c=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),p=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),v=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),m=a-p,y=c-v;return Math.sqrt(m*m+y*y)}})()},68758:(o,T,e)=>{var d={};o.exports=d,function(){d._baseDelta=16.666666666666668,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(u,l){var h,n;typeof l=="boolean"?(h=2,n=l):(h=1,n=!0);for(var r=h;r<arguments.length;r++){var f=arguments[r];if(f)for(var a in f)n&&f[a]&&f[a].constructor===Object&&(!u[a]||u[a].constructor===Object)?(u[a]=u[a]||{},d.extend(u[a],n,f[a])):u[a]=f[a]}return u},d.clone=function(u,l){return d.extend({},l,u)},d.keys=function(u){if(Object.keys)return Object.keys(u);var l=[];for(var h in u)l.push(h);return l},d.values=function(u){var l=[];if(Object.keys){for(var h=Object.keys(u),n=0;n<h.length;n++)l.push(u[h[n]]);return l}for(var r in u)l.push(u[r]);return l},d.get=function(u,l,h,n){l=l.split(".").slice(h,n);for(var r=0;r<l.length;r+=1)u=u[l[r]];return u},d.set=function(u,l,h,n,r){var f=l.split(".").slice(n,r);return d.get(u,l,0,-1)[f[f.length-1]]=h,h},d.shuffle=function(u){for(var l=u.length-1;l>0;l--){var h=Math.floor(d.random()*(l+1)),n=u[l];u[l]=u[h],u[h]=n}return u},d.choose=function(u){return u[Math.floor(d.random()*u.length)]},d.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},d.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},d.isFunction=function(u){return typeof u=="function"},d.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},d.isString=function(u){return toString.call(u)==="[object String]"},d.clamp=function(u,l,h){return u<l?l:u>h?h:u},d.sign=function(u){return u<0?-1:1},d.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(u,l){return u=typeof u<"u"?u:0,l=typeof l<"u"?l:1,u+x()*(l-u)};var x=function(){return d._seed=(d._seed*9301+49297)%233280,d._seed/233280};d.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[u]||(d.warn(u),d._warnedOnce[u]=!0)},d.deprecated=function(u,l,h){u[l]=d.chain(function(){d.warnOnce("\u{1F505} deprecated \u{1F505}",h)},u[l])},d.nextId=function(){return d._nextId++},d.indexOf=function(u,l){if(u.indexOf)return u.indexOf(l);for(var h=0;h<u.length;h++)if(u[h]===l)return h;return-1},d.map=function(u,l){if(u.map)return u.map(l);for(var h=[],n=0;n<u.length;n+=1)h.push(l(u[n]));return h},d.topologicalSort=function(u){var l=[],h=[],n=[];for(var r in u)!h[r]&&!n[r]&&d._topologicalSort(r,h,n,u,l);return l},d._topologicalSort=function(u,l,h,n,r){var f=n[u]||[];h[u]=!0;for(var a=0;a<f.length;a+=1){var c=f[a];h[c]||l[c]||d._topologicalSort(c,l,h,n,r)}h[u]=!1,l[u]=!0,r.push(u)},d.chain=function(){for(var u=[],l=0;l<arguments.length;l+=1){var h=arguments[l];h._chained?u.push.apply(u,h._chained):u.push(h)}var n=function(){for(var r,f=new Array(arguments.length),a=0,c=arguments.length;a<c;a++)f[a]=arguments[a];for(a=0;a<u.length;a+=1){var p=u[a].apply(r,f);typeof p<"u"&&(r=p)}return r};return n._chained=u,n},d.chainPathBefore=function(u,l,h){return d.set(u,l,d.chain(h,d.get(u,l)))},d.chainPathAfter=function(u,l,h){return d.set(u,l,d.chain(d.get(u,l),h))},d.setDecomp=function(u){d._decomp=u},d.getDecomp=function(){var u=d._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof e.g<"u"&&(u=e.g.decomp)}catch{u=null}return u}}()},45775:(o,T,e)=>{var d={};o.exports=d;var x=e(22806),u=e(44272),l=e(13657),h=e(91327),n=e(39073),r=e(11299),f=e(52838),a=e(68758),c=e(84125);(function(){d.create=function(p){p=p||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},m=a.extend(v,p);return m.world=p.world||r.create({label:"World"}),m.pairs=p.pairs||h.create(),m.detector=p.detector||l.create(),m.grid={buckets:[]},m.world.gravity=m.gravity,m.broadphase=m.grid,m.metrics={},m},d.update=function(p,v){var m=a.now(),y=p.world,E=p.detector,P=p.pairs,S=p.timing,w=S.timestamp,A;v=typeof v<"u"?v:a._baseDelta,v*=S.timeScale,S.timestamp+=v,S.lastDelta=v;var R={timestamp:S.timestamp,delta:v};n.trigger(p,"beforeUpdate",R);var O=r.allBodies(y),F=r.allConstraints(y);for(y.isModified&&(l.setBodies(E,O),r.setModified(y,!1,!1,!0)),p.enableSleeping&&x.update(O,v),d._bodiesApplyGravity(O,p.gravity),v>0&&d._bodiesUpdate(O,v),n.trigger(p,"beforeSolve",R),f.preSolveAll(O),A=0;A<p.constraintIterations;A++)f.solveAll(F,v);f.postSolveAll(O),E.pairs=p.pairs;var L=l.collisions(E);h.update(P,L,w),p.enableSleeping&&x.afterCollisions(P.list),P.collisionStart.length>0&&n.trigger(p,"collisionStart",{pairs:P.collisionStart,timestamp:S.timestamp,delta:v});var D=a.clamp(20/p.positionIterations,0,1);for(u.preSolvePosition(P.list),A=0;A<p.positionIterations;A++)u.solvePosition(P.list,v,D);for(u.postSolvePosition(O),f.preSolveAll(O),A=0;A<p.constraintIterations;A++)f.solveAll(F,v);for(f.postSolveAll(O),u.preSolveVelocity(P.list),A=0;A<p.velocityIterations;A++)u.solveVelocity(P.list,v);return d._bodiesUpdateVelocities(O),P.collisionActive.length>0&&n.trigger(p,"collisionActive",{pairs:P.collisionActive,timestamp:S.timestamp,delta:v}),P.collisionEnd.length>0&&n.trigger(p,"collisionEnd",{pairs:P.collisionEnd,timestamp:S.timestamp,delta:v}),d._bodiesClearForces(O),n.trigger(p,"afterUpdate",R),p.timing.lastElapsed=a.now()-m,p},d.merge=function(p,v){if(a.extend(p,v),v.world){p.world=v.world,d.clear(p);for(var m=r.allBodies(p.world),y=0;y<m.length;y++){var E=m[y];x.set(E,!1),E.id=a.nextId()}}},d.clear=function(p){h.clear(p.pairs),l.clear(p.detector)},d._bodiesClearForces=function(p){for(var v=p.length,m=0;m<v;m++){var y=p[m];y.force.x=0,y.force.y=0,y.torque=0}},d._bodiesApplyGravity=function(p,v){var m=typeof v.scale<"u"?v.scale:.001,y=p.length;if(!(v.x===0&&v.y===0||m===0))for(var E=0;E<y;E++){var P=p[E];P.isStatic||P.isSleeping||(P.force.y+=P.mass*v.y*m,P.force.x+=P.mass*v.x*m)}},d._bodiesUpdate=function(p,v){for(var m=p.length,y=0;y<m;y++){var E=p[y];E.isStatic||E.isSleeping||c.update(E,v)}},d._bodiesUpdateVelocities=function(p){for(var v=p.length,m=0;m<v;m++)c.updateVelocities(p[m])}})()},39073:(o,T,e)=>{var d={};o.exports=d;var x=e(68758);(function(){d.on=function(u,l,h){for(var n=l.split(" "),r,f=0;f<n.length;f++)r=n[f],u.events=u.events||{},u.events[r]=u.events[r]||[],u.events[r].push(h);return h},d.off=function(u,l,h){if(!l){u.events={};return}typeof l=="function"&&(h=l,l=x.keys(u.events).join(" "));for(var n=l.split(" "),r=0;r<n.length;r++){var f=u.events[n[r]],a=[];if(h&&f)for(var c=0;c<f.length;c++)f[c]!==h&&a.push(f[c]);u.events[n[r]]=a}},d.trigger=function(u,l,h){var n,r,f,a,c=u.events;if(c&&x.keys(c).length>0){h||(h={}),n=l.split(" ");for(var p=0;p<n.length;p++)if(r=n[p],f=c[r],f){a=x.clone(h,!1),a.name=r,a.source=u;for(var v=0;v<f.length;v++)f[v].apply(u,[a])}}}})()},16929:(o,T,e)=>{var d={};o.exports=d;var x=e(84474),u=e(68758);(function(){d.name="matter-js",d.version="0.19.0",d.uses=[],d.used=[],d.use=function(){x.use(d,Array.prototype.slice.call(arguments))},d.before=function(l,h){return l=l.replace(/^Matter./,""),u.chainPathBefore(d,l,h)},d.after=function(l,h){return l=l.replace(/^Matter./,""),u.chainPathAfter(d,l,h)}})()},84474:(o,T,e)=>{var d={};o.exports=d;var x=e(68758);(function(){d._registry={},d.register=function(u){if(d.isPlugin(u)||x.warn("Plugin.register:",d.toString(u),"does not implement all required fields."),u.name in d._registry){var l=d._registry[u.name],h=d.versionParse(u.version).number,n=d.versionParse(l.version).number;h>n?(x.warn("Plugin.register:",d.toString(l),"was upgraded to",d.toString(u)),d._registry[u.name]=u):h<n?x.warn("Plugin.register:",d.toString(l),"can not be downgraded to",d.toString(u)):u!==l&&x.warn("Plugin.register:",d.toString(u),"is already registered to different plugin object")}else d._registry[u.name]=u;return u},d.resolve=function(u){return d._registry[d.dependencyParse(u).name]},d.toString=function(u){return typeof u=="string"?u:(u.name||"anonymous")+"@"+(u.version||u.range||"0.0.0")},d.isPlugin=function(u){return u&&u.name&&u.version&&u.install},d.isUsed=function(u,l){return u.used.indexOf(l)>-1},d.isFor=function(u,l){var h=u.for&&d.dependencyParse(u.for);return!u.for||l.name===h.name&&d.versionSatisfies(l.version,h.range)},d.use=function(u,l){if(u.uses=(u.uses||[]).concat(l||[]),u.uses.length===0){x.warn("Plugin.use:",d.toString(u),"does not specify any dependencies to install.");return}for(var h=d.dependencies(u),n=x.topologicalSort(h),r=[],f=0;f<n.length;f+=1)if(n[f]!==u.name){var a=d.resolve(n[f]);if(!a){r.push("\u274C "+n[f]);continue}d.isUsed(u,a.name)||(d.isFor(a,u)||(x.warn("Plugin.use:",d.toString(a),"is for",a.for,"but installed on",d.toString(u)+"."),a._warned=!0),a.install?a.install(u):(x.warn("Plugin.use:",d.toString(a),"does not specify an install function."),a._warned=!0),a._warned?(r.push("\u{1F536} "+d.toString(a)),delete a._warned):r.push("\u2705 "+d.toString(a)),u.used.push(a.name))}r.length>0&&!a.silent&&x.info(r.join("  "))},d.dependencies=function(u,l){var h=d.dependencyParse(u),n=h.name;if(l=l||{},!(n in l)){u=d.resolve(u)||u,l[n]=x.map(u.uses||[],function(f){d.isPlugin(f)&&d.register(f);var a=d.dependencyParse(f),c=d.resolve(f);return c&&!d.versionSatisfies(c.version,a.range)?(x.warn("Plugin.dependencies:",d.toString(c),"does not satisfy",d.toString(a),"used by",d.toString(h)+"."),c._warned=!0,u._warned=!0):c||(x.warn("Plugin.dependencies:",d.toString(f),"used by",d.toString(h),"could not be resolved."),u._warned=!0),a.name});for(var r=0;r<l[n].length;r+=1)d.dependencies(l[n][r],l);return l}},d.dependencyParse=function(u){if(x.isString(u)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(u)||x.warn("Plugin.dependencyParse:",u,"is not a valid dependency string."),{name:u.split("@")[0],range:u.split("@")[1]||"*"}}return{name:u.name,range:u.range||u.version}},d.versionParse=function(u){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(u)||x.warn("Plugin.versionParse:",u,"is not a valid version or range.");var h=l.exec(u),n=Number(h[4]),r=Number(h[5]),f=Number(h[6]);return{isRange:Boolean(h[1]||h[2]),version:h[3],range:u,operator:h[1]||h[2]||"",major:n,minor:r,patch:f,parts:[n,r,f],prerelease:h[7],number:n*1e8+r*1e4+f}},d.versionSatisfies=function(u,l){l=l||"*";var h=d.versionParse(l),n=d.versionParse(u);if(h.isRange){if(h.operator==="*"||u==="*")return!0;if(h.operator===">")return n.number>h.number;if(h.operator===">=")return n.number>=h.number;if(h.operator==="~")return n.major===h.major&&n.minor===h.minor&&n.patch>=h.patch;if(h.operator==="^")return h.major>0?n.major===h.major&&n.number>=h.number:h.minor>0?n.minor===h.minor&&n.patch>=h.patch:n.patch===h.patch}return u===l||u==="*"}})()},22806:(o,T,e)=>{var d={};o.exports=d;var x=e(84125),u=e(39073),l=e(68758);(function(){d._motionWakeThreshold=.18,d._motionSleepThreshold=.08,d._minBias=.9,d.update=function(h,n){for(var r=n/l._baseDelta,f=d._motionSleepThreshold,a=0;a<h.length;a++){var c=h[a],p=x.getSpeed(c),v=x.getAngularSpeed(c),m=p*p+v*v;if(c.force.x!==0||c.force.y!==0){d.set(c,!1);continue}var y=Math.min(c.motion,m),E=Math.max(c.motion,m);c.motion=d._minBias*y+(1-d._minBias)*E,c.sleepThreshold>0&&c.motion<f?(c.sleepCounter+=1,c.sleepCounter>=c.sleepThreshold/r&&d.set(c,!0)):c.sleepCounter>0&&(c.sleepCounter-=1)}},d.afterCollisions=function(h){for(var n=d._motionSleepThreshold,r=0;r<h.length;r++){var f=h[r];if(!!f.isActive){var a=f.collision,c=a.bodyA.parent,p=a.bodyB.parent;if(!(c.isSleeping&&p.isSleeping||c.isStatic||p.isStatic)&&(c.isSleeping||p.isSleeping)){var v=c.isSleeping&&!c.isStatic?c:p,m=v===c?p:c;!v.isStatic&&m.motion>n&&d.set(v,!1)}}}},d.set=function(h,n){var r=h.isSleeping;n?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,r||u.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,r&&u.trigger(h,"sleepEnd"))}})()},68516:(o,T,e)=>{var d={};o.exports=d;var x=e(39745),u=e(68758),l=e(84125),h=e(84091),n=e(10438);(function(){d.rectangle=function(r,f,a,c,p){p=p||{};var v={label:"Rectangle Body",position:{x:r,y:f},vertices:x.fromPath("L 0 0 L "+a+" 0 L "+a+" "+c+" L 0 "+c)};if(p.chamfer){var m=p.chamfer;v.vertices=x.chamfer(v.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete p.chamfer}return l.create(u.extend({},v,p))},d.trapezoid=function(r,f,a,c,p,v){v=v||{},p*=.5;var m=(1-p*2)*a,y=a*p,E=y+m,P=E+y,S;p<.5?S="L 0 0 L "+y+" "+-c+" L "+E+" "+-c+" L "+P+" 0":S="L 0 0 L "+E+" "+-c+" L "+P+" 0";var w={label:"Trapezoid Body",position:{x:r,y:f},vertices:x.fromPath(S)};if(v.chamfer){var A=v.chamfer;w.vertices=x.chamfer(w.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete v.chamfer}return l.create(u.extend({},w,v))},d.circle=function(r,f,a,c,p){c=c||{};var v={label:"Circle Body",circleRadius:a};p=p||25;var m=Math.ceil(Math.max(10,Math.min(p,a)));return m%2===1&&(m+=1),d.polygon(r,f,m,a,u.extend({},v,c))},d.polygon=function(r,f,a,c,p){if(p=p||{},a<3)return d.circle(r,f,c,p);for(var v=2*Math.PI/a,m="",y=v*.5,E=0;E<a;E+=1){var P=y+E*v,S=Math.cos(P)*c,w=Math.sin(P)*c;m+="L "+S.toFixed(3)+" "+w.toFixed(3)+" "}var A={label:"Polygon Body",position:{x:r,y:f},vertices:x.fromPath(m)};if(p.chamfer){var R=p.chamfer;A.vertices=x.chamfer(A.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete p.chamfer}return l.create(u.extend({},A,p))},d.fromVertices=function(r,f,a,c,p,v,m,y){var E=u.getDecomp(),P,S,w,A,R,O,F,L,D,I,B;for(P=Boolean(E&&E.quickDecomp),c=c||{},w=[],p=typeof p<"u"?p:!1,v=typeof v<"u"?v:.01,m=typeof m<"u"?m:10,y=typeof y<"u"?y:.01,u.isArray(a[0])||(a=[a]),I=0;I<a.length;I+=1)if(O=a[I],A=x.isConvex(O),R=!A,R&&!P&&u.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),A||!P)A?O=x.clockwiseSort(O):O=x.hull(O),w.push({position:{x:r,y:f},vertices:O});else{var V=O.map(function(H){return[H.x,H.y]});E.makeCCW(V),v!==!1&&E.removeCollinearPoints(V,v),y!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(V,y);var Y=E.quickDecomp(V);for(F=0;F<Y.length;F++){var W=Y[F],$=W.map(function(H){return{x:H[0],y:H[1]}});m>0&&x.area($)<m||w.push({position:x.centre($),vertices:$})}}for(F=0;F<w.length;F++)w[F]=l.create(u.extend(w[F],c));if(p){var N=5;for(F=0;F<w.length;F++){var U=w[F];for(L=F+1;L<w.length;L++){var b=w[L];if(h.overlaps(U.bounds,b.bounds)){var G=U.vertices,z=b.vertices;for(D=0;D<U.vertices.length;D++)for(B=0;B<b.vertices.length;B++){var X=n.magnitudeSquared(n.sub(G[(D+1)%G.length],z[B])),k=n.magnitudeSquared(n.sub(G[D],z[(B+1)%z.length]));X<N&&k<N&&(G[D].isInternal=!0,z[B].isInternal=!0)}}}}}return w.length>1?(S=l.create(u.extend({parts:w.slice(0)},c)),l.setPosition(S,{x:r,y:f}),S):w[0]},d.flagCoincidentParts=function(r,f){f===void 0&&(f=5);for(var a=0;a<r.length;a++)for(var c=r[a],p=a+1;p<r.length;p++){var v=r[p];if(h.overlaps(c.bounds,v.bounds))for(var m=c.vertices,y=v.vertices,E=0;E<c.vertices.length;E++)for(var P=0;P<v.vertices.length;P++){var S=n.magnitudeSquared(n.sub(m[(E+1)%m.length],y[P])),w=n.magnitudeSquared(n.sub(m[E],y[(P+1)%y.length]));S<f&&w<f&&(m[E].isInternal=!0,y[P].isInternal=!0)}}return r}})()},56643:(o,T,e)=>{var d={};o.exports=d;var x=e(11299),u=e(52838),l=e(68758),h=e(84125),n=e(68516);(function(){d.stack=function(r,f,a,c,p,v,m){for(var y=x.create({label:"Stack"}),E=r,P=f,S,w=0,A=0;A<c;A++){for(var R=0,O=0;O<a;O++){var F=m(E,P,O,A,S,w);if(F){var L=F.bounds.max.y-F.bounds.min.y,D=F.bounds.max.x-F.bounds.min.x;L>R&&(R=L),h.translate(F,{x:D*.5,y:L*.5}),E=F.bounds.max.x+p,x.addBody(y,F),S=F,w+=1}else E+=p}P+=R+v,E=r}return y},d.chain=function(r,f,a,c,p,v){for(var m=r.bodies,y=1;y<m.length;y++){var E=m[y-1],P=m[y],S=E.bounds.max.y-E.bounds.min.y,w=E.bounds.max.x-E.bounds.min.x,A=P.bounds.max.y-P.bounds.min.y,R=P.bounds.max.x-P.bounds.min.x,O={bodyA:E,pointA:{x:w*f,y:S*a},bodyB:P,pointB:{x:R*c,y:A*p}},F=l.extend(O,v);x.addConstraint(r,u.create(F))}return r.label+=" Chain",r},d.mesh=function(r,f,a,c,p){var v=r.bodies,m,y,E,P,S;for(m=0;m<a;m++){for(y=1;y<f;y++)E=v[y-1+m*f],P=v[y+m*f],x.addConstraint(r,u.create(l.extend({bodyA:E,bodyB:P},p)));if(m>0)for(y=0;y<f;y++)E=v[y+(m-1)*f],P=v[y+m*f],x.addConstraint(r,u.create(l.extend({bodyA:E,bodyB:P},p))),c&&y>0&&(S=v[y-1+(m-1)*f],x.addConstraint(r,u.create(l.extend({bodyA:S,bodyB:P},p)))),c&&y<f-1&&(S=v[y+1+(m-1)*f],x.addConstraint(r,u.create(l.extend({bodyA:S,bodyB:P},p))))}return r.label+=" Mesh",r},d.pyramid=function(r,f,a,c,p,v,m){return d.stack(r,f,a,c,p,v,function(y,E,P,S,w,A){var R=Math.min(c,Math.ceil(a/2)),O=w?w.bounds.max.x-w.bounds.min.x:0;if(!(S>R)){S=R-S;var F=S,L=a-1-S;if(!(P<F||P>L)){A===1&&h.translate(w,{x:(P+(a%2===1?1:-1))*O,y:0});var D=w?P*O:0;return m(r+D+P*p,E,P,S,w,A)}}})},d.newtonsCradle=function(r,f,a,c,p){for(var v=x.create({label:"Newtons Cradle"}),m=0;m<a;m++){var y=1.9,E=n.circle(r+m*(c*y),f+p,c,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),P=u.create({pointA:{x:r+m*(c*y),y:f},bodyB:E});x.addBody(v,E),x.addConstraint(v,P)}return v},d.car=function(r,f,a,c,p){var v=h.nextGroup(!0),m=20,y=-a*.5+m,E=a*.5-m,P=0,S=x.create({label:"Car"}),w=n.rectangle(r,f,a,c,{collisionFilter:{group:v},chamfer:{radius:c*.5},density:2e-4}),A=n.circle(r+y,f+P,p,{collisionFilter:{group:v},friction:.8}),R=n.circle(r+E,f+P,p,{collisionFilter:{group:v},friction:.8}),O=u.create({bodyB:w,pointB:{x:y,y:P},bodyA:A,stiffness:1,length:0}),F=u.create({bodyB:w,pointB:{x:E,y:P},bodyA:R,stiffness:1,length:0});return x.addBody(S,w),x.addBody(S,A),x.addBody(S,R),x.addConstraint(S,O),x.addConstraint(S,F),S},d.softBody=function(r,f,a,c,p,v,m,y,E,P){E=l.extend({inertia:1/0},E),P=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},P);var S=d.stack(r,f,a,c,p,v,function(w,A){return n.circle(w,A,y,E)});return d.mesh(S,a,c,m,P),S.label="Soft Body",S}})()},50658:(o,T,e)=>{var d={};o.exports=d;var x=e(10438),u=e(68758);(function(){d.fromVertices=function(l){for(var h={},n=0;n<l.length;n++){var r=(n+1)%l.length,f=x.normalise({x:l[r].y-l[n].y,y:l[n].x-l[r].x}),a=f.y===0?1/0:f.x/f.y;a=a.toFixed(3).toString(),h[a]=f}return u.values(h)},d.rotate=function(l,h){if(h!==0)for(var n=Math.cos(h),r=Math.sin(h),f=0;f<l.length;f++){var a=l[f],c;c=a.x*n-a.y*r,a.y=a.x*r+a.y*n,a.x=c}}})()},84091:o=>{var T={};o.exports=T,function(){T.create=function(e){var d={min:{x:0,y:0},max:{x:0,y:0}};return e&&T.update(d,e),d},T.update=function(e,d,x){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var u=0;u<d.length;u++){var l=d[u];l.x>e.max.x&&(e.max.x=l.x),l.x<e.min.x&&(e.min.x=l.x),l.y>e.max.y&&(e.max.y=l.y),l.y<e.min.y&&(e.min.y=l.y)}x&&(x.x>0?e.max.x+=x.x:e.min.x+=x.x,x.y>0?e.max.y+=x.y:e.min.y+=x.y)},T.contains=function(e,d){return d.x>=e.min.x&&d.x<=e.max.x&&d.y>=e.min.y&&d.y<=e.max.y},T.overlaps=function(e,d){return e.min.x<=d.max.x&&e.max.x>=d.min.x&&e.max.y>=d.min.y&&e.min.y<=d.max.y},T.translate=function(e,d){e.min.x+=d.x,e.max.x+=d.x,e.min.y+=d.y,e.max.y+=d.y},T.shift=function(e,d){var x=e.max.x-e.min.x,u=e.max.y-e.min.y;e.min.x=d.x,e.max.x=d.x+x,e.min.y=d.y,e.max.y=d.y+u}}()},92765:(o,T,e)=>{var d={};o.exports=d,e(84091);var x=e(68758);(function(){d.pathToVertices=function(u,l){typeof window<"u"&&!("SVGPathSeg"in window)&&x.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,n,r,f,a,c,p,v,m,y,E=[],P,S,w=0,A=0,R=0;l=l||15;var O=function(L,D,I){var B=I%2===1&&I>1;if(!m||L!=m.x||D!=m.y){m&&B?(P=m.x,S=m.y):(P=0,S=0);var V={x:P+L,y:S+D};(B||!m)&&(m=V),E.push(V),A=P+L,R=S+D}},F=function(L){var D=L.pathSegTypeAsLetter.toUpperCase();if(D!=="Z"){switch(D){case"M":case"L":case"T":case"C":case"S":case"Q":A=L.x,R=L.y;break;case"H":A=L.x;break;case"V":R=L.y;break}O(A,R,L.pathSegType)}};for(d._svgPathToAbsolute(u),r=u.getTotalLength(),c=[],h=0;h<u.pathSegList.numberOfItems;h+=1)c.push(u.pathSegList.getItem(h));for(p=c.concat();w<r;){if(y=u.getPathSegAtLength(w),a=c[y],a!=v){for(;p.length&&p[0]!=a;)F(p.shift());v=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=u.getPointAtLength(w),O(f.x,f.y,0);break}w+=l}for(h=0,n=p.length;h<n;++h)F(p[h]);return E},d._svgPathToAbsolute=function(u){for(var l,h,n,r,f,a,c=u.pathSegList,p=0,v=0,m=c.numberOfItems,y=0;y<m;++y){var E=c.getItem(y),P=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(P))"x"in E&&(p=E.x),"y"in E&&(v=E.y);else switch("x1"in E&&(n=p+E.x1),"x2"in E&&(f=p+E.x2),"y1"in E&&(r=v+E.y1),"y2"in E&&(a=v+E.y2),"x"in E&&(p+=E.x),"y"in E&&(v+=E.y),P){case"m":c.replaceItem(u.createSVGPathSegMovetoAbs(p,v),y);break;case"l":c.replaceItem(u.createSVGPathSegLinetoAbs(p,v),y);break;case"h":c.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(p),y);break;case"v":c.replaceItem(u.createSVGPathSegLinetoVerticalAbs(v),y);break;case"c":c.replaceItem(u.createSVGPathSegCurvetoCubicAbs(p,v,n,r,f,a),y);break;case"s":c.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(p,v,f,a),y);break;case"q":c.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(p,v,n,r),y);break;case"t":c.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(p,v),y);break;case"a":c.replaceItem(u.createSVGPathSegArcAbs(p,v,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),y);break;case"z":case"Z":p=l,v=h;break}(P=="M"||P=="m")&&(l=p,h=v)}}})()},10438:o=>{var T={};o.exports=T,function(){T.create=function(e,d){return{x:e||0,y:d||0}},T.clone=function(e){return{x:e.x,y:e.y}},T.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},T.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},T.rotate=function(e,d,x){var u=Math.cos(d),l=Math.sin(d);x||(x={});var h=e.x*u-e.y*l;return x.y=e.x*l+e.y*u,x.x=h,x},T.rotateAbout=function(e,d,x,u){var l=Math.cos(d),h=Math.sin(d);u||(u={});var n=x.x+((e.x-x.x)*l-(e.y-x.y)*h);return u.y=x.y+((e.x-x.x)*h+(e.y-x.y)*l),u.x=n,u},T.normalise=function(e){var d=T.magnitude(e);return d===0?{x:0,y:0}:{x:e.x/d,y:e.y/d}},T.dot=function(e,d){return e.x*d.x+e.y*d.y},T.cross=function(e,d){return e.x*d.y-e.y*d.x},T.cross3=function(e,d,x){return(d.x-e.x)*(x.y-e.y)-(d.y-e.y)*(x.x-e.x)},T.add=function(e,d,x){return x||(x={}),x.x=e.x+d.x,x.y=e.y+d.y,x},T.sub=function(e,d,x){return x||(x={}),x.x=e.x-d.x,x.y=e.y-d.y,x},T.mult=function(e,d){return{x:e.x*d,y:e.y*d}},T.div=function(e,d){return{x:e.x/d,y:e.y/d}},T.perp=function(e,d){return d=d===!0?-1:1,{x:d*-e.y,y:d*e.x}},T.neg=function(e){return{x:-e.x,y:-e.y}},T.angle=function(e,d){return Math.atan2(d.y-e.y,d.x-e.x)},T._temp=[T.create(),T.create(),T.create(),T.create(),T.create(),T.create()]}()},39745:(o,T,e)=>{var d={};o.exports=d;var x=e(10438),u=e(68758);(function(){d.create=function(l,h){for(var n=[],r=0;r<l.length;r++){var f=l[r],a={x:f.x,y:f.y,index:r,body:h,isInternal:!1};n.push(a)}return n},d.fromPath=function(l,h){var n=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,r=[];return l.replace(n,function(f,a,c){r.push({x:parseFloat(a),y:parseFloat(c)})}),d.create(r,h)},d.centre=function(l){for(var h=d.area(l,!0),n={x:0,y:0},r,f,a,c=0;c<l.length;c++)a=(c+1)%l.length,r=x.cross(l[c],l[a]),f=x.mult(x.add(l[c],l[a]),r),n=x.add(n,f);return x.div(n,6*h)},d.mean=function(l){for(var h={x:0,y:0},n=0;n<l.length;n++)h.x+=l[n].x,h.y+=l[n].y;return x.div(h,l.length)},d.area=function(l,h){for(var n=0,r=l.length-1,f=0;f<l.length;f++)n+=(l[r].x-l[f].x)*(l[r].y+l[f].y),r=f;return h?n/2:Math.abs(n)/2},d.inertia=function(l,h){for(var n=0,r=0,f=l,a,c,p=0;p<f.length;p++)c=(p+1)%f.length,a=Math.abs(x.cross(f[c],f[p])),n+=a*(x.dot(f[c],f[c])+x.dot(f[c],f[p])+x.dot(f[p],f[p])),r+=a;return h/6*(n/r)},d.translate=function(l,h,n){n=typeof n<"u"?n:1;var r=l.length,f=h.x*n,a=h.y*n,c;for(c=0;c<r;c++)l[c].x+=f,l[c].y+=a;return l},d.rotate=function(l,h,n){if(h!==0){var r=Math.cos(h),f=Math.sin(h),a=n.x,c=n.y,p=l.length,v,m,y,E;for(E=0;E<p;E++)v=l[E],m=v.x-a,y=v.y-c,v.x=a+(m*r-y*f),v.y=c+(m*f+y*r);return l}},d.contains=function(l,h){for(var n=h.x,r=h.y,f=l.length,a=l[f-1],c,p=0;p<f;p++){if(c=l[p],(n-a.x)*(c.y-a.y)+(r-a.y)*(a.x-c.x)>0)return!1;a=c}return!0},d.scale=function(l,h,n,r){if(h===1&&n===1)return l;r=r||d.centre(l);for(var f,a,c=0;c<l.length;c++)f=l[c],a=x.sub(f,r),l[c].x=r.x+a.x*h,l[c].y=r.y+a.y*n;return l},d.chamfer=function(l,h,n,r,f){typeof h=="number"?h=[h]:h=h||[8],n=typeof n<"u"?n:-1,r=r||2,f=f||14;for(var a=[],c=0;c<l.length;c++){var p=l[c-1>=0?c-1:l.length-1],v=l[c],m=l[(c+1)%l.length],y=h[c<h.length?c:h.length-1];if(y===0){a.push(v);continue}var E=x.normalise({x:v.y-p.y,y:p.x-v.x}),P=x.normalise({x:m.y-v.y,y:v.x-m.x}),S=Math.sqrt(2*Math.pow(y,2)),w=x.mult(u.clone(E),y),A=x.normalise(x.mult(x.add(E,P),.5)),R=x.sub(v,x.mult(A,S)),O=n;n===-1&&(O=Math.pow(y,.32)*1.75),O=u.clamp(O,r,f),O%2===1&&(O+=1);for(var F=Math.acos(x.dot(E,P)),L=F/O,D=0;D<O;D++)a.push(x.add(x.rotate(w,L*D),R))}return a},d.clockwiseSort=function(l){var h=d.mean(l);return l.sort(function(n,r){return x.angle(h,n)-x.angle(h,r)}),l},d.isConvex=function(l){var h=0,n=l.length,r,f,a,c;if(n<3)return null;for(r=0;r<n;r++)if(f=(r+1)%n,a=(r+2)%n,c=(l[f].x-l[r].x)*(l[a].y-l[f].y),c-=(l[f].y-l[r].y)*(l[a].x-l[f].x),c<0?h|=1:c>0&&(h|=2),h===3)return!1;return h!==0?!0:null},d.hull=function(l){var h=[],n=[],r,f;for(l=l.slice(0),l.sort(function(a,c){var p=a.x-c.x;return p!==0?p:a.y-c.y}),f=0;f<l.length;f+=1){for(r=l[f];n.length>=2&&x.cross3(n[n.length-2],n[n.length-1],r)<=0;)n.pop();n.push(r)}for(f=l.length-1;f>=0;f-=1){for(r=l[f];h.length>=2&&x.cross3(h[h.length-2],h[h.length-1],r)<=0;)h.pop();h.push(r)}return h.pop(),n.pop(),h.concat(n)}})()},1675:(o,T,e)=>{var d=e(18171),x={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(u){u.after("Body.create",function(){x.Body.init(this)}),u.before("Engine.update",function(l){x.Engine.update(l)})},Body:{init:function(u){u.plugin.attractors=u.plugin.attractors||[]}},Engine:{update:function(u){for(var l=d.Composite.allBodies(u.world),h=0;h<l.length;h++){var n=l[h],r=n.plugin.attractors;if(r&&r.length>0)for(var f=0;f<l.length;f++){var a=l[f];if(h!==f)for(var c=0;c<r.length;c++){var p=r[c],v=p;d.Common.isFunction(p)&&(v=p(n,a)),v&&d.Body.applyForce(a,a.position,v)}}}}},Attractors:{gravityConstant:.001,gravity:function(u,l){var h=d.Vector.sub(l.position,u.position),n=d.Vector.magnitudeSquared(h)||1e-4,r=d.Vector.normalise(h),f=-x.Attractors.gravityConstant*(u.mass*l.mass/n),a=d.Vector.mult(r,f);d.Body.applyForce(u,u.position,d.Vector.neg(a)),d.Body.applyForce(l,l.position,a)}}};o.exports=x},80391:o=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(d){d.pairs.map(function(x){var u=x.bodyA,l=x.bodyB;u.gameObject&&u.gameObject.emit("collide",u,l,x),l.gameObject&&l.gameObject.emit("collide",l,u,x),e.Events.trigger(u,"onCollide",{pair:x}),e.Events.trigger(l,"onCollide",{pair:x}),u.onCollideCallback&&u.onCollideCallback(x),l.onCollideCallback&&l.onCollideCallback(x),u.onCollideWith[l.id]&&u.onCollideWith[l.id](l,x),l.onCollideWith[u.id]&&l.onCollideWith[u.id](u,x)})}),e.Events.on(this,"collisionActive",function(d){d.pairs.map(function(x){var u=x.bodyA,l=x.bodyB;u.gameObject&&u.gameObject.emit("collideActive",u,l,x),l.gameObject&&l.gameObject.emit("collideActive",l,u,x),e.Events.trigger(u,"onCollideActive",{pair:x}),e.Events.trigger(l,"onCollideActive",{pair:x}),u.onCollideActiveCallback&&u.onCollideActiveCallback(x),l.onCollideActiveCallback&&l.onCollideActiveCallback(x)})}),e.Events.on(this,"collisionEnd",function(d){d.pairs.map(function(x){var u=x.bodyA,l=x.bodyB;u.gameObject&&u.gameObject.emit("collideEnd",u,l,x),l.gameObject&&l.gameObject.emit("collideEnd",l,u,x),e.Events.trigger(u,"onCollideEnd",{pair:x}),e.Events.trigger(l,"onCollideEnd",{pair:x}),u.onCollideEndCallback&&u.onCollideEndCallback(x),l.onCollideEndCallback&&l.onCollideEndCallback(x)})})})}};o.exports=T},44097:(o,T,e)=>{var d=e(18171),x={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(u){u.after("Engine.update",function(){x.Engine.update(this)})},Engine:{update:function(u){for(var l=u.world,h=d.Composite.allBodies(l),n=d.Composite.allComposites(l),r=0;r<h.length;r+=1){var f=h[r];f.plugin.wrap&&x.Body.wrap(f,f.plugin.wrap)}for(r=0;r<n.length;r+=1){var a=n[r];a.plugin.wrap&&x.Composite.wrap(a,a.plugin.wrap)}}},Bounds:{wrap:function(u,l){var h=null,n=null;if(typeof l.min.x<"u"&&typeof l.max.x<"u"&&(u.min.x>l.max.x?h=l.min.x-u.max.x:u.max.x<l.min.x&&(h=l.max.x-u.min.x)),typeof l.min.y<"u"&&typeof l.max.y<"u"&&(u.min.y>l.max.y?n=l.min.y-u.max.y:u.max.y<l.min.y&&(n=l.max.y-u.min.y)),h!==null||n!==null)return{x:h||0,y:n||0}}},Body:{wrap:function(u,l){var h=x.Bounds.wrap(u.bounds,l);return h&&d.Body.translate(u,h),h}},Composite:{bounds:function(u){for(var l=d.Composite.allBodies(u),h=[],n=0;n<l.length;n+=1){var r=l[n];h.push(r.bounds.min,r.bounds.max)}return d.Bounds.create(h)},wrap:function(u,l){var h=x.Bounds.wrap(x.Composite.bounds(u),l);return h&&d.Composite.translate(u,h),h}}};o.exports=x},81084:o=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={decomp:F,quickDecomp:B,isSimple:D,removeCollinearPoints:V,removeDuplicatePoints:Y,makeCCW:m};function T(N,U,b){b=b||0;var G=[0,0],z,X,k,H,K,Z,J;return z=N[1][1]-N[0][1],X=N[0][0]-N[1][0],k=z*N[0][0]+X*N[0][1],H=U[1][1]-U[0][1],K=U[0][0]-U[1][0],Z=H*U[0][0]+K*U[0][1],J=z*K-H*X,W(J,0,b)||(G[0]=(K*k-X*Z)/J,G[1]=(z*Z-H*k)/J),G}function e(N,U,b,G){var z=U[0]-N[0],X=U[1]-N[1],k=G[0]-b[0],H=G[1]-b[1];if(k*X-H*z===0)return!1;var K=(z*(b[1]-N[1])+X*(N[0]-b[0]))/(k*X-H*z),Z=(k*(N[1]-b[1])+H*(b[0]-N[0]))/(H*z-k*X);return K>=0&&K<=1&&Z>=0&&Z<=1}function d(N,U,b){return(U[0]-N[0])*(b[1]-N[1])-(b[0]-N[0])*(U[1]-N[1])}function x(N,U,b){return d(N,U,b)>0}function u(N,U,b){return d(N,U,b)>=0}function l(N,U,b){return d(N,U,b)<0}function h(N,U,b){return d(N,U,b)<=0}var n=[],r=[];function f(N,U,b,G){if(G){var z=n,X=r;z[0]=U[0]-N[0],z[1]=U[1]-N[1],X[0]=b[0]-U[0],X[1]=b[1]-U[1];var k=z[0]*X[0]+z[1]*X[1],H=Math.sqrt(z[0]*z[0]+z[1]*z[1]),K=Math.sqrt(X[0]*X[0]+X[1]*X[1]),Z=Math.acos(k/(H*K));return Z<G}else return d(N,U,b)===0}function a(N,U){var b=U[0]-N[0],G=U[1]-N[1];return b*b+G*G}function c(N,U){var b=N.length;return N[U<0?U%b+b:U%b]}function p(N){N.length=0}function v(N,U,b,G){for(var z=b;z<G;z++)N.push(U[z])}function m(N){for(var U=0,b=N,G=1;G<N.length;++G)(b[G][1]<b[U][1]||b[G][1]===b[U][1]&&b[G][0]>b[U][0])&&(U=G);return x(c(N,U-1),c(N,U),c(N,U+1))?!1:(y(N),!0)}function y(N){for(var U=[],b=N.length,G=0;G!==b;G++)U.push(N.pop());for(var G=0;G!==b;G++)N[G]=U[G]}function E(N,U){return l(c(N,U-1),c(N,U),c(N,U+1))}var P=[],S=[];function w(N,U,b){var G,z,X=P,k=S;if(u(c(N,U+1),c(N,U),c(N,b))&&h(c(N,U-1),c(N,U),c(N,b)))return!1;z=a(c(N,U),c(N,b));for(var H=0;H!==N.length;++H)if(!((H+1)%N.length===U||H===U)&&u(c(N,U),c(N,b),c(N,H+1))&&h(c(N,U),c(N,b),c(N,H))&&(X[0]=c(N,U),X[1]=c(N,b),k[0]=c(N,H),k[1]=c(N,H+1),G=T(X,k),a(c(N,U),G)<z))return!1;return!0}function A(N,U,b){for(var G=0;G!==N.length;++G)if(!(G===U||G===b||(G+1)%N.length===U||(G+1)%N.length===b)&&e(c(N,U),c(N,b),c(N,G),c(N,G+1)))return!1;return!0}function R(N,U,b,G){var z=G||[];if(p(z),U<b)for(var X=U;X<=b;X++)z.push(N[X]);else{for(var X=0;X<=b;X++)z.push(N[X]);for(var X=U;X<N.length;X++)z.push(N[X])}return z}function O(N){for(var U=[],b=[],G=[],z=[],X=Number.MAX_VALUE,k=0;k<N.length;++k)if(E(N,k)){for(var H=0;H<N.length;++H)if(w(N,k,H)){b=O(R(N,k,H,z)),G=O(R(N,H,k,z));for(var K=0;K<G.length;K++)b.push(G[K]);b.length<X&&(U=b,X=b.length,U.push([c(N,k),c(N,H)]))}}return U}function F(N){var U=O(N);return U.length>0?L(N,U):[N]}function L(N,U){if(U.length===0)return[N];if(U instanceof Array&&U.length&&U[0]instanceof Array&&U[0].length===2&&U[0][0]instanceof Array){for(var b=[N],G=0;G<U.length;G++)for(var z=U[G],X=0;X<b.length;X++){var k=b[X],H=L(k,z);if(H){b.splice(X,1),b.push(H[0],H[1]);break}}return b}else{var z=U,G=N.indexOf(z[0]),X=N.indexOf(z[1]);return G!==-1&&X!==-1?[R(N,G,X),R(N,X,G)]:!1}}function D(N){var U=N,b;for(b=0;b<U.length-1;b++)for(var G=0;G<b-1;G++)if(e(U[b],U[b+1],U[G],U[G+1]))return!1;for(b=1;b<U.length-2;b++)if(e(U[0],U[U.length-1],U[b],U[b+1]))return!1;return!0}function I(N,U,b,G,z){z=z||0;var X=U[1]-N[1],k=N[0]-U[0],H=X*N[0]+k*N[1],K=G[1]-b[1],Z=b[0]-G[0],J=K*b[0]+Z*b[1],j=X*Z-K*k;return W(j,0,z)?[0,0]:[(Z*H-k*J)/j,(X*J-K*H)/j]}function B(N,U,b,G,z,X,k){X=X||100,k=k||0,z=z||25,U=typeof U<"u"?U:[],b=b||[],G=G||[];var H=[0,0],K=[0,0],Z=[0,0],J=0,j=0,Q=0,_=0,q=0,et=0,at=0,ot=[],ht=[],tt=N,rt=N;if(rt.length<3)return U;if(k++,k>X)return console.warn("quickDecomp: max level ("+X+") reached."),U;for(var nt=0;nt<N.length;++nt)if(E(tt,nt)){b.push(tt[nt]),J=j=Number.MAX_VALUE;for(var pt=0;pt<N.length;++pt)x(c(tt,nt-1),c(tt,nt),c(tt,pt))&&h(c(tt,nt-1),c(tt,nt),c(tt,pt-1))&&(Z=I(c(tt,nt-1),c(tt,nt),c(tt,pt),c(tt,pt-1)),l(c(tt,nt+1),c(tt,nt),Z)&&(Q=a(tt[nt],Z),Q<j&&(j=Q,K=Z,et=pt))),x(c(tt,nt+1),c(tt,nt),c(tt,pt+1))&&h(c(tt,nt+1),c(tt,nt),c(tt,pt))&&(Z=I(c(tt,nt+1),c(tt,nt),c(tt,pt),c(tt,pt+1)),x(c(tt,nt-1),c(tt,nt),Z)&&(Q=a(tt[nt],Z),Q<J&&(J=Q,H=Z,q=pt)));if(et===(q+1)%N.length)Z[0]=(K[0]+H[0])/2,Z[1]=(K[1]+H[1])/2,G.push(Z),nt<q?(v(ot,tt,nt,q+1),ot.push(Z),ht.push(Z),et!==0&&v(ht,tt,et,tt.length),v(ht,tt,0,nt+1)):(nt!==0&&v(ot,tt,nt,tt.length),v(ot,tt,0,q+1),ot.push(Z),ht.push(Z),v(ht,tt,et,nt+1));else{if(et>q&&(q+=N.length),_=Number.MAX_VALUE,q<et)return U;for(var pt=et;pt<=q;++pt)u(c(tt,nt-1),c(tt,nt),c(tt,pt))&&h(c(tt,nt+1),c(tt,nt),c(tt,pt))&&(Q=a(c(tt,nt),c(tt,pt)),Q<_&&A(tt,nt,pt)&&(_=Q,at=pt%N.length));nt<at?(v(ot,tt,nt,at+1),at!==0&&v(ht,tt,at,rt.length),v(ht,tt,0,nt+1)):(nt!==0&&v(ot,tt,nt,rt.length),v(ot,tt,0,at+1),v(ht,tt,at,nt+1))}return ot.length<ht.length?(B(ot,U,b,G,z,X,k),B(ht,U,b,G,z,X,k)):(B(ht,U,b,G,z,X,k),B(ot,U,b,G,z,X,k)),U}return U.push(N),U}function V(N,U){for(var b=0,G=N.length-1;N.length>3&&G>=0;--G)f(c(N,G-1),c(N,G),c(N,G+1),U)&&(N.splice(G%N.length,1),b++);return b}function Y(N,U){for(var b=N.length-1;b>=1;--b)for(var G=N[b],z=b-1;z>=0;--z)if($(G,N[z],U)){N.splice(b,1);continue}}function W(N,U,b){return b=b||0,Math.abs(N-U)<=b}function $(N,U,b){return W(N[0],U[0],b)&&W(N[1],U[1],b)}},88257:(o,T,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=e(56694),x=new d({initialize:function(l){this.pluginManager=l,this.game=l.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=x},18360:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};o.exports=T},91963:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={},e={},d={};d.register=function(x,u,l,h){h===void 0&&(h=!1),T[x]={plugin:u,mapping:l,custom:h}},d.registerCustom=function(x,u,l,h){e[x]={plugin:u,mapping:l,data:h}},d.hasCore=function(x){return T.hasOwnProperty(x)},d.hasCustom=function(x){return e.hasOwnProperty(x)},d.getCore=function(x){return T[x]},d.getCustom=function(x){return e[x]},d.getCustomClass=function(x){return e.hasOwnProperty(x)?e[x].plugin:null},d.remove=function(x){T.hasOwnProperty(x)&&delete T[x]},d.removeCustom=function(x){e.hasOwnProperty(x)&&delete e[x]},d.destroyCorePlugins=function(){for(var x in T)T.hasOwnProperty(x)&&delete T[x]},d.destroyCustomPlugins=function(){for(var x in e)e.hasOwnProperty(x)&&delete e[x]},o.exports=d},49274:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(97081),u=e(6659),l=e(76846),h=e(99325),n=e(61286),r=e(72632),f=e(91963),a=e(66458),c=new d({Extends:u,initialize:function(v){u.call(this),this.game=v,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],v.isBooted?this.boot():v.events.once(x.BOOT,this.boot,this)},boot:function(){var p,v,m,y,E,P,S,w=this.game.config,A=w.installGlobalPlugins;for(A=A.concat(this._pendingGlobal),p=0;p<A.length;p++)v=A[p],m=r(v,"key",null),y=r(v,"plugin",null),E=r(v,"start",!1),P=r(v,"mapping",null),S=r(v,"data",null),m&&(y?this.install(m,y,E,P,S):console.warn("Missing `plugin` for key: "+m));for(A=w.installScenePlugins,A=A.concat(this._pendingScene),p=0;p<A.length;p++)v=A[p],m=r(v,"key",null),y=r(v,"plugin",null),P=r(v,"mapping",null),m&&(y?this.installScenePlugin(m,y,P):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(x.DESTROY,this.destroy,this)},addToScene:function(p,v,m){var y,E,P,S=this.game,w=p.scene,A=p.settings.map,R=p.settings.isBooted;for(y=0;y<v.length;y++)E=v[y],S[E]?(p[E]=S[E],A.hasOwnProperty(E)&&(w[A[E]]=p[E])):E==="game"&&A.hasOwnProperty(E)&&(w[A[E]]=S);for(var O=0;O<m.length;O++)for(P=m[O],y=0;y<P.length;y++)if(E=P[y],!!f.hasCore(E)){var F=f.getCore(E),L=F.mapping,D=new F.plugin(w,this,L);p[L]=D,F.custom?w[L]=D:A.hasOwnProperty(L)&&(w[A[L]]=D),R&&D.boot()}for(P=this.plugins,y=0;y<P.length;y++){var I=P[y];I.mapping&&(w[I.mapping]=I.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,v,m,y,E){if(E===void 0&&(E=!1),typeof v!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(f.hasCore(p)||f.register(p,v,m,!0),this.scenePlugins.indexOf(p)===-1)this.scenePlugins.push(p);else if(!E&&f.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(y){var P=new v(y,this,p);y.sys[p]=P,m&&m!==""&&(y[m]=P),P.boot()}},install:function(p,v,m,y,E){if(m===void 0&&(m=!1),y===void 0&&(y=null),E===void 0&&(E=null),typeof v!="function")return console.warn("Invalid Plugin: "+p),null;if(f.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(y!==null&&(m=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:v,start:m,mapping:y,data:E});else if(f.registerCustom(p,v,y,E),m)return this.start(p);return null},getIndex:function(p){for(var v=this.plugins,m=0;m<v.length;m++){var y=v[m];if(y.key===p)return m}return-1},getEntry:function(p){var v=this.getIndex(p);if(v!==-1)return this.plugins[v]},isActive:function(p){var v=this.getEntry(p);return v&&v.active},start:function(p,v){v===void 0&&(v=p);var m=this.getEntry(v);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(p,v)),m?m.plugin:null},createEntry:function(p,v){var m=f.getCustom(p);if(m){var y=new m.plugin(this);m={key:v,plugin:y,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),y.init(m.data),y.start()}return m},stop:function(p){var v=this.getEntry(p);return v&&v.active&&(v.active=!1,v.plugin.stop()),this},get:function(p,v){v===void 0&&(v=!0);var m=this.getEntry(p);if(m)return m.plugin;var y=this.getClass(p);return y&&v?(m=this.createEntry(p,p),m?m.plugin:null):y||null},getClass:function(p){return f.getCustomClass(p)},removeGlobalPlugin:function(p){var v=this.getEntry(p);v&&a(this.plugins,v),f.removeCustom(p)},removeScenePlugin:function(p){a(this.scenePlugins,p),f.remove(p)},registerGameObject:function(p,v,m){return v&&n.register(p,v),m&&h.register(p,m),this},removeGameObject:function(p,v,m){return v===void 0&&(v=!0),m===void 0&&(m=!0),v&&n.remove(p),m&&h.remove(p),this},registerFileType:function(p,v,m){l.register(p,v),m&&m.sys.load&&(m.sys.load[p]=v)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();f.destroyCustomPlugins(),this.game.noReturn&&f.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});o.exports=c},39283:(o,T,e)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var d=e(88257),x=e(56694),u=e(7599),l=new x({Extends:d,initialize:function(n,r,f){d.call(this,r),this.scene=n,this.systems=n.sys,this.pluginKey=f,n.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});o.exports=l},45615:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={BasePlugin:e(88257),DefaultPlugins:e(18360),PluginCache:e(91963),PluginManager:e(49274),ScenePlugin:e(39283)}},75205:()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(o){const T=performance.now(),e=this.getVideoPlaybackQuality(),d=this.mozPresentedFrames||this.mozPaintedFrames||e.totalVideoFrames-e.droppedVideoFrames,x=(u,l)=>{const h=this.getVideoPlaybackQuality(),n=this.mozPresentedFrames||this.mozPaintedFrames||h.totalVideoFrames-h.droppedVideoFrames;if(n>d){const r=this.mozFrameDelay||h.totalFrameDelay-e.totalFrameDelay||0,f=l-u;o(l,{presentationTime:l+r*1e3,expectedDisplayTime:l+f,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+f/1e3,presentedFrames:n,processingDuration:r}),delete this._rvfcpolyfillmap[T]}else this._rvfcpolyfillmap[T]=requestAnimationFrame(r=>x(l,r))};return this._rvfcpolyfillmap[T]=requestAnimationFrame(u=>x(T,u)),T},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(o){cancelAnimationFrame(this._rvfcpolyfillmap[o]),delete this._rvfcpolyfillmap[o]})},95723:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={DEFAULT:0,LINEAR:0,NEAREST:1};o.exports=T},91135:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(89787),x=e(61840),u=e(56694),l=e(86459),h=e(6659),n=e(81044),r=e(32834),f=e(40444),a=e(38203),c=e(69360),p=new u({Extends:h,initialize:function(m){h.call(this);var y=m.config;this.config={clearBeforeRender:y.clearBeforeRender,backgroundColor:y.backgroundColor,antialias:y.antialias,roundPixels:y.roundPixels},this.game=m,this.type=l.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=m.canvas;var E={alpha:m.config.transparent,desynchronized:m.config.desynchronized,willReadFrequently:!1};this.gameContext=y.context?y.context:this.gameCanvas.getContext("2d",E),this.currentContext=this.gameContext,this.antialias=m.config.antialias,this.blendModes=r(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(a.READY,this.boot,this)},boot:function(){var v=this.game,m=v.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,v.scale.on(f.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(v,m){(m.width!==this.width||m.height!==this.height)&&this.resize(m.width,m.height)},resize:function(v,m){this.width=v,this.height=m,this.emit(n.RESIZE,v,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(v){return this.currentContext.globalCompositeOperation=v,this},setContext:function(v){return this.currentContext=v||this.gameContext,this},setAlpha:function(v){return this.currentContext.globalAlpha=v,this},preRender:function(){var v=this.gameContext,m=this.config,y=this.width,E=this.height;v.globalAlpha=1,v.globalCompositeOperation="source-over",v.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(v.clearRect(0,0,y,E),m.transparent||(v.fillStyle=m.backgroundColor.rgba,v.fillRect(0,0,y,E))),v.save(),this.drawCount=0,this.emit(n.PRE_RENDER)},render:function(v,m,y){var E=m.length;this.emit(n.RENDER,v,y);var P=y.x,S=y.y,w=y.width,A=y.height,R=y.renderToTexture?y.context:v.sys.context;R.save(),this.game.scene.customViewports&&(R.beginPath(),R.rect(P,S,w,A),R.clip()),y.emit(d.PRE_RENDER,y),this.currentContext=R;var O=y.mask;O&&O.preRenderCanvas(this,null,y._maskCamera),y.transparent||(R.fillStyle=y.backgroundColor.rgba,R.fillRect(P,S,w,A)),R.globalAlpha=y.alpha,R.globalCompositeOperation="source-over",this.drawCount+=E,y.renderToTexture&&y.emit(d.PRE_RENDER,y),y.matrix.copyToContext(R);for(var F=0;F<E;F++){var L=m[F];L.mask&&L.mask.preRenderCanvas(this,L,y),L.renderCanvas(this,L,y),L.mask&&L.mask.postRenderCanvas(this,L,y)}R.setTransform(1,0,0,1,0,0),R.globalCompositeOperation="source-over",R.globalAlpha=1,y.flashEffect.postRenderCanvas(R),y.fadeEffect.postRenderCanvas(R),y.dirty=!1,O&&O.postRenderCanvas(this),R.restore(),y.renderToTexture&&(y.emit(d.POST_RENDER,y),y.renderToGame&&v.sys.context.drawImage(y.canvas,P,S)),y.emit(d.POST_RENDER,y)},postRender:function(){var v=this.gameContext;v.restore(),this.emit(n.POST_RENDER);var m=this.snapshotState;m.callback&&(x(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(v,m,y,E,P,S,w,A,R){y===void 0&&(y=!1),this.snapshotArea(E,P,S,w,m,A,R);var O=this.snapshotState;return O.getPixel=y,x(v,O),O.callback=null,this},snapshot:function(v,m,y){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,v,m,y)},snapshotArea:function(v,m,y,E,P,S,w){var A=this.snapshotState;return A.callback=P,A.type=S,A.encoder=w,A.getPixel=!1,A.x=v,A.y=m,A.width=Math.min(y,this.gameCanvas.width),A.height=Math.min(E,this.gameCanvas.height),this},snapshotPixel:function(v,m,y){return this.snapshotArea(v,m,1,1,y),this.snapshotState.getPixel=!0,this},batchSprite:function(v,m,y,E){var P=y.alpha*v.alpha;if(P!==0){var S=this.currentContext,w=this._tempMatrix1,A=this._tempMatrix2,R=m.canvasData,O=R.x,F=R.y,L=m.cutWidth,D=m.cutHeight,I=m.customPivot,B=m.source.resolution,V=v.displayOriginX,Y=v.displayOriginY,W=-V+m.x,$=-Y+m.y;if(v.isCropped){var N=v._crop;(N.flipX!==v.flipX||N.flipY!==v.flipY)&&m.updateCropUVs(N,v.flipX,v.flipY),L=N.cw,D=N.ch,O=N.cx,F=N.cy,W=-V+N.x,$=-Y+N.y,v.flipX&&(W>=0?W=-(W+L):W<0&&(W=Math.abs(W)-L)),v.flipY&&($>=0?$=-($+D):$<0&&($=Math.abs($)-D))}var U=1,b=1;v.flipX&&(I||(W+=-m.realWidth+V*2),U=-1),v.flipY&&(I||($+=-m.realHeight+Y*2),b=-1);var G=v.x,z=v.y;y.roundPixels&&(G=Math.floor(G),z=Math.floor(z)),A.applyITRS(G,z,v.rotation,v.scaleX*U,v.scaleY*b),w.copyFrom(y.matrix),E?(w.multiplyWithOffset(E,-y.scrollX*v.scrollFactorX,-y.scrollY*v.scrollFactorY),A.e=G,A.f=z):(A.e-=y.scrollX*v.scrollFactorX,A.f-=y.scrollY*v.scrollFactorY),w.multiply(A),y.roundPixels&&(w.e=Math.round(w.e),w.f=Math.round(w.f)),S.save(),w.setToContext(S),S.globalCompositeOperation=this.blendModes[v.blendMode],S.globalAlpha=P,S.imageSmoothingEnabled=!m.source.scaleMode,v.mask&&v.mask.preRenderCanvas(this,v,y),L>0&&D>0&&S.drawImage(m.source.image,O,F,L,D,W,$,L/B,D/B),v.mask&&v.mask.postRenderCanvas(this,v,y),S.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});o.exports=p},6046:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CanvasRenderer:e(91135),GetBlendModes:e(32834),SetTransform:e(49584)}},32834:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(98581),u=function(){var l=[],h=x.supportNewBlendModes,n="source-over";return l[d.NORMAL]=n,l[d.ADD]="lighter",l[d.MULTIPLY]=h?"multiply":n,l[d.SCREEN]=h?"screen":n,l[d.OVERLAY]=h?"overlay":n,l[d.DARKEN]=h?"darken":n,l[d.LIGHTEN]=h?"lighten":n,l[d.COLOR_DODGE]=h?"color-dodge":n,l[d.COLOR_BURN]=h?"color-burn":n,l[d.HARD_LIGHT]=h?"hard-light":n,l[d.SOFT_LIGHT]=h?"soft-light":n,l[d.DIFFERENCE]=h?"difference":n,l[d.EXCLUSION]=h?"exclusion":n,l[d.HUE]=h?"hue":n,l[d.SATURATION]=h?"saturation":n,l[d.COLOR]=h?"color":n,l[d.LUMINOSITY]=h?"luminosity":n,l[d.ERASE]="destination-out",l[d.SOURCE_IN]="source-in",l[d.SOURCE_OUT]="source-out",l[d.SOURCE_ATOP]="source-atop",l[d.DESTINATION_OVER]="destination-over",l[d.DESTINATION_IN]="destination-in",l[d.DESTINATION_OUT]="destination-out",l[d.DESTINATION_ATOP]="destination-atop",l[d.LIGHTER]="lighter",l[d.COPY]="copy",l[d.XOR]="xor",l};o.exports=u},49584:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(73329),x=function(u,l,h,n,r){var f=n.alpha*h.alpha;if(f<=0)return!1;var a=d(h,n,r).calc;return l.globalCompositeOperation=u.blendModes[h.blendMode],l.globalAlpha=f,l.save(),a.setToContext(l),l.imageSmoothingEnabled=h.frame?!h.frame.source.scaleMode:u.antialias,!0};o.exports=x},70936:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postrender"},99298:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},7743:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"},99519:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"},81044:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={POST_RENDER:e(70936),PRE_RENDER:e(99298),RENDER:e(7743),RESIZE:e(99519)}},42069:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Canvas:e(6046),Events:e(81044),Snapshot:e(95528),WebGL:e(55478)}},61840:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(27119),u=e(72632),l=function(h,n){var r=u(n,"callback"),f=u(n,"type","image/png"),a=u(n,"encoder",.92),c=Math.abs(Math.round(u(n,"x",0))),p=Math.abs(Math.round(u(n,"y",0))),v=Math.floor(u(n,"width",h.width)),m=Math.floor(u(n,"height",h.height)),y=u(n,"getPixel",!1);if(y){var E=h.getContext("2d",{willReadFrequently:!1}),P=E.getImageData(c,p,1,1),S=P.data;r.call(null,new x(S[0],S[1],S[2],S[3]))}else if(c!==0||p!==0||v!==h.width||m!==h.height){var w=d.createWebGL(this,v,m),A=w.getContext("2d",{willReadFrequently:!0});v>0&&m>0&&A.drawImage(h,c,p,v,m,0,0,v,m);var R=new Image;R.onerror=function(){r.call(null),d.remove(w)},R.onload=function(){r.call(null,R),d.remove(w)},R.src=w.toDataURL(f,a)}else{var O=new Image;O.onerror=function(){r.call(null)},O.onload=function(){r.call(null,O)},O.src=h.toDataURL(f,a)}};o.exports=l},1217:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(27119),u=e(72632),l=function(h,n){var r=h,f=u(n,"callback"),a=u(n,"type","image/png"),c=u(n,"encoder",.92),p=Math.abs(Math.round(u(n,"x",0))),v=Math.abs(Math.round(u(n,"y",0))),m=u(n,"getPixel",!1),y=u(n,"isFramebuffer",!1),E=y?u(n,"bufferWidth",1):r.drawingBufferWidth,P=y?u(n,"bufferHeight",1):r.drawingBufferHeight;if(m){var S=new Uint8Array(4),w=y?v:P-v;r.readPixels(p,w,1,1,r.RGBA,r.UNSIGNED_BYTE,S),f.call(null,new x(S[0],S[1],S[2],S[3]))}else{var A=Math.floor(u(n,"width",E)),R=Math.floor(u(n,"height",P)),O=A*R*4,F=new Uint8Array(O);r.readPixels(p,P-v-R,A,R,r.RGBA,r.UNSIGNED_BYTE,F);for(var L=d.createWebGL(this,A,R),D=L.getContext("2d",{willReadFrequently:!0}),I=D.getImageData(0,0,A,R),B=I.data,V=0;V<R;V++)for(var Y=0;Y<A;Y++){var W=((R-V-1)*A+Y)*4,$=y?O-(V*A+(A-Y))*4:(V*A+Y)*4;B[$+0]=F[W+0],B[$+1]=F[W+1],B[$+2]=F[W+2],B[$+3]=F[W+3]}D.putImageData(I,0,0);var N=new Image;N.onerror=function(){f.call(null),d.remove(L)},N.onload=function(){f.call(null,N),d.remove(L)},N.src=L.toDataURL(a,c)}};o.exports=l},95528:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Canvas:e(61840),WebGL:e(1217)}},35217:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(65641),u=e(33885),l=e(77290),h=e(72632),n=e(37410),r=e(82127),f=e(5583),a=e(58136),c=e(47406),p=e(81828),v=e(66901),m=e(71264),y=e(77310),E=e(10919),P=e(21213),S=e(51212),w=e(60848),A=new d({initialize:function(O){this.game=O.game,this.renderer=O,this.classes=new u([[x.UTILITY_PIPELINE,w],[x.MULTI_PIPELINE,y],[x.BITMAPMASK_PIPELINE,f],[x.SINGLE_PIPELINE,S],[x.ROPE_PIPELINE,P],[x.LIGHT_PIPELINE,v],[x.POINTLIGHT_PIPELINE,E],[x.MOBILE_PIPELINE,m],[x.FX_PIPELINE,p]]),this.postPipelineClasses=new u([[String(c.BARREL),a.Barrel],[String(c.BLOOM),a.Bloom],[String(c.BLUR),a.Blur],[String(c.BOKEH),a.Bokeh],[String(c.CIRCLE),a.Circle],[String(c.COLOR_MATRIX),a.ColorMatrix],[String(c.DISPLACEMENT),a.Displacement],[String(c.GLOW),a.Glow],[String(c.GRADIENT),a.Gradient],[String(c.PIXELATE),a.Pixelate],[String(c.SHADOW),a.Shadow],[String(c.SHINE),a.Shine],[String(c.VIGNETTE),a.Vignette],[String(c.WIPE),a.Wipe]]),this.pipelines=new u,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(R,O,F){var L=this.renderer,D=this.renderTargets;this.frameInc=Math.floor(h(R,"frameInc",32));for(var I=L.width,B=L.height,V=Math.min(I,B),Y=Math.ceil(V/this.frameInc),W=1;W<Y;W++){var $=W*this.frameInc;D.push(new n(L,$,$)),D.push(new n(L,$,$)),D.push(new n(L,$,$)),this.maxDimension=$}D.push(new n(L,I,B,1,0,!0,!0)),D.push(new n(L,I,B,1,0,!0,!0)),D.push(new n(L,I,B,1,0,!0,!0));var N,U,b=this,G=this.game;if(this.classes.each(function(X,k){N=b.add(X,new k({game:G})),X===x.UTILITY_PIPELINE&&(b.UTILITY_PIPELINE=N,b.fullFrame1=N.fullFrame1,b.fullFrame2=N.fullFrame2,b.halfFrame1=N.halfFrame1,b.halfFrame2=N.halfFrame2)}),this.MULTI_PIPELINE=this.get(x.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(x.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(x.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(x.FX_PIPELINE),R)for(U in R){var z=R[U];N=new z(G),N.name=U,N.isPostFX?this.postPipelineClasses.set(U,z):this.has(U)||(this.classes.set(U,z),this.add(U,N))}this.default=this.get(O),F&&!l.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(R){var O=this.get(R);return O&&(this.default=O),O},add:function(R,O){if(O.isPostFX){console.warn(R+" is a Post Pipeline. Use `addPostPipeline` instead");return}var F=this.pipelines,L=this.renderer;return F.has(R)?console.warn("Pipeline exists: "+R):(O.name=R,O.manager=this,F.set(R,O)),O.hasBooted||O.boot(),L.width!==0&&L.height!==0&&!O.isPreFX&&O.resize(L.width,L.height),O},addPostPipeline:function(R,O){this.postPipelineClasses.has(R)||this.postPipelineClasses.set(R,O)},flush:function(){this.current&&this.current.flush()},has:function(R){var O=this.pipelines;return typeof R=="string"?O.has(R):!!O.contains(R)},get:function(R){var O=this.pipelines;if(typeof R=="string")return O.get(R);if(O.contains(R))return R},getPostPipeline:function(R,O,F){var L=this.postPipelineClasses,D,I="",B=typeof R;if(B==="string"||B==="number"?(D=L.get(R),I=R):B==="function"?(L.contains(R)&&(D=R),I=R.name):B==="object"&&(D=L.get(R.name),I=R.name),D){var V=new D(this.game,F);return V.name=I,O&&(V.gameObject=O),V}},remove:function(R,O,F){O===void 0&&(O=!0),F===void 0&&(F=!0),this.pipelines.delete(R),O&&this.classes.delete(R),F&&this.postPipelineClasses.delete(R)},set:function(R,O,F){if(!R.isPostFX)return this.isCurrent(R,F)||(this.flush(),this.current&&this.current.unbind(),this.current=R,R.bind(F)),R.updateProjectionMatrix(),R.onBind(O),R},preBatch:function(R){if(R.hasPostPipeline){this.flush();for(var O=R.postPipelines,F=O.length-1;F>=0;F--){var L=O[F];L.active&&L.preBatch(R)}}},postBatch:function(R){if(R.hasPostPipeline){this.flush();for(var O=R.postPipelines,F=0;F<O.length;F++){var L=O[F];L.active&&L.postBatch(R)}}},preBatchCamera:function(R){if(R.hasPostPipeline){this.flush();for(var O=R.postPipelines,F=O.length-1;F>=0;F--){var L=O[F];L.active&&L.preBatch(R)}}},postBatchCamera:function(R){if(R.hasPostPipeline){this.flush();for(var O=R.postPipelines,F=0;F<O.length;F++){var L=O[F];L.active&&L.postBatch(R)}}},isCurrent:function(R,O){var F=this.renderer,L=this.current;return L&&!O&&(O=L.currentShader),!(L!==R||O.program!==F.currentProgram)},copyFrame:function(R,O,F,L,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(R,O,F,L,D),this},copyToGame:function(R){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(R),this},drawFrame:function(R,O,F,L){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(R,O,F,L),this},blendFrames:function(R,O,F,L,D){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(R,O,F,L,D),this},blendFramesAdditive:function(R,O,F,L,D){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(R,O,F,L,D),this},clearFrame:function(R,O){return this.UTILITY_PIPELINE.clearFrame(R,O),this},blitFrame:function(R,O,F,L,D,I){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(R,O,F,L,D,I),this},copyFrameRect:function(R,O,F,L,D,I,B,V){return this.UTILITY_PIPELINE.copyFrameRect(R,O,F,L,D,I,B,V),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(R){return this.UTILITY_PIPELINE.bind(R)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(R){R===void 0&&this.previous&&(R=this.previous);var O=this.renderer,F=O.gl;F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),O.hasActiveStencilMask()?F.clear(F.DEPTH_BUFFER_BIT):(F.disable(F.STENCIL_TEST),F.clear(F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT)),F.viewport(0,0,O.width,O.height),O.currentProgram=null,O.setBlendMode(0,!0);var L=O.vaoExtension;L&&L.bindVertexArrayOES(null);var D=this.pipelines.entries;for(var I in D)D[I].glReset=!0;R&&(this.current=R,R.rebind())},clear:function(){var R=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,R.currentProgram=null,R.setBlendMode(0,!0);var O=R.vaoExtension;O&&O.bindVertexArrayOES(null)},getRenderTarget:function(R){var O=this.renderTargets,F=3;if(R>this.maxDimension)return this.targetIndex=O.length-F,O[this.targetIndex];var L=(r(R,this.frameInc,0,!0)-1)*F;return this.targetIndex=L,O[L]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});o.exports=A},37410:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(81044),u=new d({initialize:function(h,n,r,f,a,c,p,v,m){f===void 0&&(f=1),a===void 0&&(a=0),c===void 0&&(c=!0),p===void 0&&(p=!1),v===void 0&&(v=!0),m===void 0&&(m=!0),this.renderer=h,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=f,this.minFilter=a,this.autoClear=c,this.autoResize=!0,this.hasDepthBuffer=v,this.forceClamp=m,this.resize(n,r),p?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(l){return l&&!this.autoResize?(this.renderer.on(x.RESIZE,this.resize,this),this.autoResize=!0):!l&&this.autoResize&&(this.renderer.off(x.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(l,h){var n=l*this.scale,r=h*this.scale;if(this.autoResize&&(n!==this.width||r!==this.height)){var f=this.renderer;f.deleteFramebuffer(this.framebuffer),f.deleteTexture(this.texture),l*=this.scale,h*=this.scale,l=Math.round(l),h=Math.round(h),l<=0&&(l=1),h<=0&&(h=1),this.texture=f.createTextureFromSource(null,l,h,this.minFilter,this.forceClamp),this.framebuffer=f.createFramebuffer(l,h,this.texture,this.hasDepthBuffer),this.width=l,this.height=h}return this},bind:function(l,h,n){l===void 0&&(l=!1);var r=this.renderer;if(l&&r.flush(),h&&n&&this.resize(h,n),r.pushFramebuffer(this.framebuffer,!1,!1),l&&this.adjustViewport(),this.autoClear){var f=this.renderer.gl;f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)}r.clearStencilMask()},adjustViewport:function(){var l=this.renderer.gl;l.viewport(0,0,this.width,this.height),l.disable(l.SCISSOR_TEST)},clear:function(){var l=this.renderer,h=l.gl;l.pushFramebuffer(this.framebuffer),h.disable(h.SCISSOR_TEST),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),l.popFramebuffer(),l.resetScissor()},unbind:function(l){l===void 0&&(l=!1);var h=this.renderer;return l&&h.flush(),h.popFramebuffer()},destroy:function(){var l=this.renderer;l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),l.off(x.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});o.exports=u},75512:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={getTintFromFloats:function(T,e,d,x){var u=(T*255|0)&255,l=(e*255|0)&255,h=(d*255|0)&255,n=(x*255|0)&255;return(n<<24|u<<16|l<<8|h)>>>0},getTintAppendFloatAlpha:function(T,e){var d=(e*255|0)&255;return(d<<24|T)>>>0},getTintAppendFloatAlphaAndSwap:function(T,e){var d=(T>>16|0)&255,x=(T>>8|0)&255,u=(T|0)&255,l=(e*255|0)&255;return(l<<24|u<<16|x<<8|d)>>>0},getFloatsFromUintRGB:function(T){var e=(T>>16|0)&255,d=(T>>8|0)&255,x=(T|0)&255;return[e/255,d/255,x/255]},checkShaderMax:function(T,e){var d=Math.min(16,T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS));return!e||e===-1?d:Math.min(d,e)},parseFragmentShaderMaxTextures:function(T,e){if(!T)return"";for(var d="",x=0;x<e;x++)x>0&&(d+=`
	else `),x<e-1&&(d+="if (outTexId < "+x+".5)"),d+=`
	{`,d+=`
		texture = texture2D(uMainSampler[`+x+"], outTexCoord);",d+=`
	}`;return T=T.replace(/%count%/gi,e.toString()),T.replace(/%forloop%/gi,d)},setGlowQuality:function(T,e,d,x){return d===void 0&&(d=e.config.glowFXQuality),x===void 0&&(x=e.config.glowFXDistance),T=T.replace(/__SIZE__/gi,(1/d/x).toFixed(7)),T=T.replace(/__DIST__/gi,x.toFixed(0)+".0"),T}}},44775:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(28699),u=e(6659),l=e(18970),h=e(72632),n=e(16650),r=e(81044),f=e(37410),a=e(75512),c=e(71305),p=new d({Extends:u,initialize:function(m){u.call(this);var y=m.game,E=y.renderer,P=E.gl;this.name=h(m,"name","WebGLPipeline"),this.game=y,this.renderer=E,this.manager,this.gl=P,this.view=y.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=h(m,"topology",P.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=h(m,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=m,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var v,m=this.gl,y=this.config,E=this.renderer;this.isPostFX||(this.projectionMatrix=new n().identity());var P=this.renderTargets,S=h(y,"renderTarget",!1);typeof S=="boolean"&&S&&(S=1);var w=E.width,A=E.height;if(typeof S=="number")for(v=0;v<S;v++)P.push(new f(E,w,A,1,0,!0));else if(Array.isArray(S))for(v=0;v<S.length;v++){var R=h(S[v],"scale",1),O=h(S[v],"minFilter",0),F=h(S[v],"autoClear",1),L=h(S[v],"width",null),D=h(S[v],"height",L);L?P.push(new f(E,L,D,1,O,F)):P.push(new f(E,w,A,R,O,F))}P.length&&(this.currentRenderTarget=P[0]),this.setShadersFromConfig(y);var I=this.shaders,B=0;for(v=0;v<I.length;v++)I[v].vertexSize>B&&(B=I[v].vertexSize);var V=h(y,"batchSize",E.config.batchSize);this.vertexCapacity=V*6;var Y=new ArrayBuffer(this.vertexCapacity*B);this.vertexData=Y,this.bytes=new Uint8Array(Y),this.vertexViewF32=new Float32Array(Y),this.vertexViewU32=new Uint32Array(Y);var W=h(y,"vertices",null);for(W?(this.vertexViewF32.set(W),this.vertexBuffer=E.createVertexBuffer(Y,m.STATIC_DRAW)):this.vertexBuffer=E.createVertexBuffer(Y.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),v=I.length-1;v>=0;v--)I[v].rebind();this.hasBooted=!0,E.on(r.RESIZE,this.resize,this),E.on(r.PRE_RENDER,this.onPreRender,this),E.on(r.RENDER,this.onRender,this),E.on(r.POST_RENDER,this.onPostRender,this),this.emit(l.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(v,m,y){var E=this.renderer;if(v!==this.currentShader||E.currentProgram!==this.currentShader.program){this.flush();var P=this.setVertexBuffer(y);P&&!m&&(m=!0),v.bind(m,!1),this.currentShader=v}return this},getShaderByName:function(v){for(var m=this.shaders,y=0;y<m.length;y++)if(m[y].name===v)return m[y]},setShadersFromConfig:function(v){var m,y=this.shaders,E=this.renderer;for(m=0;m<y.length;m++)y[m].destroy();var P="vertShader",S="fragShader",w="attributes",A=h(v,P,null),R=a.parseFragmentShaderMaxTextures(h(v,S,null),E.maxTextures),O=h(v,w,null),F=h(v,"shaders",[]),L=F.length;if(L===0)A&&R&&(this.shaders=[new c(this,"default",A,R,x(O))]);else{var D=[];for(m=0;m<L;m++){var I=F[m],B,V,Y,W;if(typeof I=="string"?(B="default",V=A,Y=a.parseFragmentShaderMaxTextures(I,E.maxTextures),W=O):(B=h(I,"name","default"),V=h(I,P,A),Y=a.parseFragmentShaderMaxTextures(h(I,S,R),E.maxTextures),W=h(I,w,O)),B==="default"){var $=Y.split(`
`),N=$[0].trim();N.indexOf("#define SHADER_NAME")>-1&&(B=N.substring(20))}V&&Y&&D.push(new c(this,B,V,Y,x(W)))}this.shaders=D}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(v){return this.currentBatch={start:this.vertexCount,count:0,texture:[v],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=v,this.batch.push(this.currentBatch),0},addTextureToBatch:function(v){var m=this.currentBatch;m&&(m.texture.push(v),m.unit++,m.maxUnit++)},pushBatch:function(v){if(!this.currentBatch||this.forceZero&&v!==this.currentTexture)return this.createBatch(v);if(v===this.currentTexture)return this.currentUnit;var m=this.currentBatch,y=m.texture.indexOf(v);return y===-1?m.texture.length===this.renderer.maxTextures?this.createBatch(v):(m.unit++,m.maxUnit++,m.texture.push(v),this.currentUnit=m.unit,this.currentTexture=v,m.unit):(this.currentUnit=y,this.currentTexture=v,y)},setGameObject:function(v,m){return m===void 0&&(m=v.frame),this.pushBatch(m.source.glTexture)},shouldFlush:function(v){return v===void 0&&(v=0),this.vertexCount+v>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(v,m){(v!==this.width||m!==this.height)&&this.flush(),this.width=v,this.height=m;for(var y=this.renderTargets,E=0;E<y.length;E++)y[E].resize(v,m);return this.setProjectionMatrix(v,m),this.emit(l.RESIZE,v,m,this),this.onResize(v,m),this},setProjectionMatrix:function(v,m){var y=this.projectionMatrix;if(!y)return this;this.projectionWidth=v,this.projectionHeight=m,y.ortho(0,v,m,0,-1e3,1e3);for(var E=this.shaders,P="uProjectionMatrix",S=0;S<E.length;S++){var w=E[S];w.hasUniform(P)&&(w.resetUniform(P),w.setMatrix4fv(P,!1,y.val,w))}return this},flipProjectionMatrix:function(v){v===void 0&&(v=!0);var m=this.projectionMatrix;if(!m)return this;var y=this.projectionWidth,E=this.projectionHeight;v?m.ortho(0,y,0,E,-1e3,1e3):m.ortho(0,y,E,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,m.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var v=this.renderer.projectionWidth,m=this.renderer.projectionHeight;(this.projectionWidth!==v||this.projectionHeight!==m)&&this.setProjectionMatrix(v,m)}},bind:function(v){if(v===void 0&&(v=this.currentShader),this.glReset)return this.rebind(v);var m=!1,y=this.gl;return y.getParameter(y.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(y.bindBuffer(y.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,m=!0),v.bind(m),this.currentShader=v,this.activeTextures.length=0,this.emit(l.BIND,this,v),this.onActive(v),this},rebind:function(v){this.activeBuffer=null,this.setVertexBuffer();for(var m=this.shaders,y=m.length-1;y>=0;y--){var E=m[y].rebind();(!v||E===v)&&(this.currentShader=E)}return this.activeTextures.length=0,this.emit(l.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(v){if(v===void 0&&(v=this.vertexBuffer),v!==this.activeBuffer){var m=this.gl;return this.gl.bindBuffer(m.ARRAY_BUFFER,v),this.activeBuffer=v,!0}return!1},preBatch:function(v){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(v),this},postBatch:function(v){return this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(v){if(v===void 0&&(v=!1),this.vertexCount>0){this.emit(l.BEFORE_FLUSH,this,v),this.onBeforeFlush(v);var m=this.gl,y=this.vertexCount,E=this.currentShader.vertexSize,P=this.topology;if(this.active){this.setVertexBuffer(),y===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,y*E));var S,w,A,R=this.batch,O=this.activeTextures;if(this.forceZero)for(O[0]||m.activeTexture(m.TEXTURE0),S=0;S<R.length;S++)w=R[S],A=w.texture[0],O[0]!==A&&(m.bindTexture(m.TEXTURE_2D,A),O[0]=A),m.drawArrays(P,w.start,w.count);else for(S=0;S<R.length;S++){w=R[S];for(var F=0;F<=w.maxUnit;F++)A=w.texture[F],O[F]!==A&&(m.activeTexture(m.TEXTURE0+F),m.bindTexture(m.TEXTURE_2D,A),O[F]=A);m.drawArrays(P,w.start,w.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(l.AFTER_FLUSH,this,v),this.onAfterFlush(v)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(v,m,y,E,P,S,w){var A=this.vertexViewF32,R=this.vertexViewU32,O=this.vertexCount*this.currentShader.vertexComponentCount-1;A[++O]=v,A[++O]=m,A[++O]=y,A[++O]=E,A[++O]=P,A[++O]=S,R[++O]=w,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(v,m,y,E,P,S,w,A,R,O,F,L,D,I,B,V,Y,W,$,N){N===void 0&&(N=this.currentUnit);var U=!1;this.shouldFlush(6)&&(this.flush(),U=!0),this.currentBatch||(N=this.setTexture2D($));var b=this.vertexViewF32,G=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return b[++z]=m,b[++z]=y,b[++z]=O,b[++z]=F,b[++z]=N,b[++z]=W,G[++z]=I,b[++z]=E,b[++z]=P,b[++z]=O,b[++z]=D,b[++z]=N,b[++z]=W,G[++z]=V,b[++z]=S,b[++z]=w,b[++z]=L,b[++z]=D,b[++z]=N,b[++z]=W,G[++z]=Y,b[++z]=m,b[++z]=y,b[++z]=O,b[++z]=F,b[++z]=N,b[++z]=W,G[++z]=I,b[++z]=S,b[++z]=w,b[++z]=L,b[++z]=D,b[++z]=N,b[++z]=W,G[++z]=Y,b[++z]=A,b[++z]=R,b[++z]=L,b[++z]=F,b[++z]=N,b[++z]=W,G[++z]=B,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),U},batchTri:function(v,m,y,E,P,S,w,A,R,O,F,L,D,I,B,V,Y){Y===void 0&&(Y=this.currentUnit);var W=!1;this.shouldFlush(3)&&(this.flush(),W=!0),this.currentBatch||(Y=this.setTexture2D(V));var $=this.vertexViewF32,N=this.vertexViewU32,U=this.vertexCount*this.currentShader.vertexComponentCount-1;return $[++U]=m,$[++U]=y,$[++U]=A,$[++U]=R,$[++U]=Y,$[++U]=B,N[++U]=L,$[++U]=E,$[++U]=P,$[++U]=A,$[++U]=F,$[++U]=Y,$[++U]=B,N[++U]=D,$[++U]=S,$[++U]=w,$[++U]=O,$[++U]=F,$[++U]=Y,$[++U]=B,N[++U]=I,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(v),W},drawFillRect:function(v,m,y,E,P,S,w,A){w===void 0&&(w=this.renderer.whiteTexture),A===void 0&&(A=!0),v=Math.floor(v),m=Math.floor(m);var R=Math.floor(v+y),O=Math.floor(m+E),F=this.setTexture2D(w),L=a.getTintAppendFloatAlphaAndSwap(P,S),D=0,I=0,B=1,V=1;A&&(I=1,V=0),this.batchQuad(null,v,m,v,O,R,O,R,m,D,I,B,V,L,L,L,L,0,w,F)},setTexture2D:function(v){return v===void 0&&(v=this.renderer.whiteTexture),this.pushBatch(v)},bindTexture:function(v,m){m===void 0&&(m=0);var y=this.gl;return y.activeTexture(y.TEXTURE0+m),y.bindTexture(y.TEXTURE_2D,v),this},bindRenderTarget:function(v,m){return this.bindTexture(v.texture,m)},setTime:function(v,m){return this.set1f(v,this.game.loop.getDuration(),m),this},setBoolean:function(v,m,y){return y===void 0&&(y=this.currentShader),y.setBoolean(v,m),this},set1f:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set1f(v,m),this},set2f:function(v,m,y,E){return E===void 0&&(E=this.currentShader),E.set2f(v,m,y),this},set3f:function(v,m,y,E,P){return P===void 0&&(P=this.currentShader),P.set3f(v,m,y,E),this},set4f:function(v,m,y,E,P,S){return S===void 0&&(S=this.currentShader),S.set4f(v,m,y,E,P),this},set1fv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set1fv(v,m),this},set2fv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set2fv(v,m),this},set3fv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set3fv(v,m),this},set4fv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set4fv(v,m),this},set1iv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set1iv(v,m),this},set2iv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set2iv(v,m),this},set3iv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set3iv(v,m),this},set4iv:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set4iv(v,m),this},set1i:function(v,m,y){return y===void 0&&(y=this.currentShader),y.set1i(v,m),this},set2i:function(v,m,y,E){return E===void 0&&(E=this.currentShader),E.set2i(v,m,y),this},set3i:function(v,m,y,E,P){return P===void 0&&(P=this.currentShader),P.set3i(v,m,y,E),this},set4i:function(v,m,y,E,P,S){return S===void 0&&(S=this.currentShader),S.set4i(v,m,y,E,P),this},setMatrix2fv:function(v,m,y,E){return E===void 0&&(E=this.currentShader),E.setMatrix2fv(v,m,y),this},setMatrix3fv:function(v,m,y,E){return E===void 0&&(E=this.currentShader),E.setMatrix3fv(v,m,y),this},setMatrix4fv:function(v,m,y,E){return E===void 0&&(E=this.currentShader),E.setMatrix4fv(v,m,y),this},destroy:function(){this.emit(l.DESTROY,this);var v,m=this.shaders;for(v=0;v<m.length;v++)m[v].destroy();var y=this.renderTargets;for(v=0;v<y.length;v++)y[v].destroy();this.gl.deleteBuffer(this.vertexBuffer);var E=this.renderer;return E.off(r.RESIZE,this.resize,this),E.off(r.PRE_RENDER,this.onPreRender,this),E.off(r.RENDER,this.onRender,this),E.off(r.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});o.exports=p},11857:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),x=e(89787),u=e(56694),l=e(86459),h=e(6659),n=e(81044),r=e(28621),f=e(16650),a=e(72283),c=e(35217),p=e(37410),v=e(40444),m=e(38203),y=e(75512),E=e(1217),P=new u({Extends:h,initialize:function(w){h.call(this);var A=w.config,R={alpha:A.transparent,desynchronized:A.desynchronized,depth:!0,antialias:A.antialiasGL,premultipliedAlpha:A.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:A.failIfMajorPerformanceCaveat,powerPreference:A.powerPreference,preserveDrawingBuffer:A.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:A.clearBeforeRender,antialias:A.antialias,backgroundColor:A.backgroundColor,contextCreation:R,roundPixels:A.roundPixels,maxTextures:A.maxTextures,maxTextureSize:A.maxTextureSize,batchSize:A.batchSize,maxLights:A.maxLights,mipmapFilter:A.mipmapFilter},this.game=w,this.type=l.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=w.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=a,this.contextRestoredHandler=a,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(S){var w,A=this.game,R=this.canvas,O=S.backgroundColor;if(A.config.context?w=A.config.context:w=R.getContext("webgl",S.contextCreation)||R.getContext("experimental-webgl",S.contextCreation),!w||w.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=w;var F=this;this.contextLostHandler=function(W){F.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),W.preventDefault()},R.addEventListener("webglcontextlost",this.contextLostHandler,!1),A.context=w;for(var L=0;L<=27;L++)this.blendModes.push({func:[w.ONE,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_ADD});this.blendModes[1].func=[w.ONE,w.DST_ALPHA],this.blendModes[2].func=[w.DST_COLOR,w.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[w.ONE,w.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[w.ZERO,w.ONE_MINUS_SRC_ALPHA],equation:w.FUNC_REVERSE_SUBTRACT},this.glFormats=[w.BYTE,w.SHORT,w.UNSIGNED_BYTE,w.UNSIGNED_SHORT,w.FLOAT],this.glFuncMap={mat2:{func:w.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:w.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:w.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:w.uniform1f,length:1},"1fv":{func:w.uniform1fv,length:1},"1i":{func:w.uniform1i,length:1},"1iv":{func:w.uniform1iv,length:1},"2f":{func:w.uniform2f,length:2},"2fv":{func:w.uniform2fv,length:1},"2i":{func:w.uniform2i,length:2},"2iv":{func:w.uniform2iv,length:1},"3f":{func:w.uniform3f,length:3},"3fv":{func:w.uniform3fv,length:1},"3i":{func:w.uniform3i,length:3},"3iv":{func:w.uniform3iv,length:1},"4f":{func:w.uniform4f,length:4},"4fv":{func:w.uniform4fv,length:1},"4i":{func:w.uniform4i,length:4},"4iv":{func:w.uniform4iv,length:1}};var D=w.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=w.getParameter(w.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=D;var I="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(I)>-1?w.getExtension(I):null;var B="OES_vertex_array_object";this.vaoExtension=D.indexOf(B)>-1?w.getExtension(B):null,w.disable(w.DEPTH_TEST),w.disable(w.CULL_FACE),w.enable(w.BLEND),w.clearColor(O.redGL,O.greenGL,O.blueGL,O.alphaGL),S.mipmapFilter!==""&&(this.mipmapFilter=w[S.mipmapFilter]),this.maxTextures=y.checkShaderMax(w,S.maxTextures),this.textureIndexes=[];for(var V=0;V<this.maxTextures;V++){var Y=w.createTexture();w.activeTexture(w.TEXTURE0+V),w.bindTexture(w.TEXTURE_2D,Y),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(V)}return this.pipelines=new c(this),this.setBlendMode(l.BlendModes.NORMAL),this.projectionMatrix=new f().identity(),A.textures.once(m.READY,this.boot,this),this},boot:function(){var S=this.game,w=this.pipelines,A=S.scale.baseSize,R=A.width,O=A.height;this.width=R,this.height=O,this.isBooted=!0,this.renderTarget=new p(this,R,O,1,0,!0,!0),this.maskTarget=new p(this,R,O,1,0,!0,!0),this.maskSource=new p(this,R,O,1,0,!0,!0);var F=S.config;w.boot(F.pipeline,F.defaultPipeline,F.autoMobilePipeline),this.blankTexture=S.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=S.textures.getFrame("__WHITE").glTexture;var L=this.gl;L.bindFramebuffer(L.FRAMEBUFFER,null),L.enable(L.SCISSOR_TEST),S.scale.on(v.RESIZE,this.onResize,this),this.resize(R,O)},captureFrame:function(S,w){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(S,w,A){},stopCapture:function(){},onCapture:function(S){},onResize:function(S,w){(w.width!==this.width||w.height!==this.height)&&this.resize(w.width,w.height)},beginCapture:function(S,w){S===void 0&&(S=this.width),w===void 0&&(w=this.height),this.renderTarget.bind(!0,S,w),this.setProjectionMatrix(S,w)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,w){var A=this.gl;return this.width=S,this.height=w,this.setProjectionMatrix(S,w),A.viewport(0,0,S,w),this.drawingBufferHeight=A.drawingBufferHeight,A.scissor(0,A.drawingBufferHeight-w,S,w),this.defaultScissor[2]=S,this.defaultScissor[3]=w,this.emit(n.RESIZE,S,w),this},getCompressedTextures:function(){var S="WEBGL_compressed_texture_",w="WEBKIT_"+S,A=function(O,F){var L=O.getExtension(S+F)||O.getExtension(w+F);if(L){var D={};for(var I in L)D[L[I]]=I;return D}},R=this.gl;return{ETC:A(R,"etc"),ETC1:A(R,"etc1"),ATC:A(R,"atc"),ASTC:A(R,"astc"),BPTC:A(R,"bptc"),RGTC:A(R,"rgtc"),PVRTC:A(R,"pvrtc"),S3TC:A(R,"s3tc"),S3TCSRGB:A(R,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(S,w){var A=this.compression[S.toUpperCase()];if(w in A)return A[w]},supportsCompressedTexture:function(S,w){var A=this.compression[S.toUpperCase()];return A?w?w in A:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,w){return(S!==this.projectionWidth||w!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=w,this.projectionMatrix.ortho(0,S,w,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,w,A,R,O){O===void 0&&(O=this.drawingBufferHeight);var F=this.scissorStack,L=[S,w,A,R];return F.push(L),this.setScissor(S,w,A,R,O),this.currentScissor=L,L},setScissor:function(S,w,A,R,O){O===void 0&&(O=this.drawingBufferHeight);var F=this.gl,L=this.currentScissor,D=A>0&&R>0;if(L&&D){var I=L[0],B=L[1],V=L[2],Y=L[3];D=I!==S||B!==w||V!==A||Y!==R}D&&(this.flush(),F.scissor(S,O-w-R,A,R))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var w=this.currentScissor;if(w){var A=w[0],R=w[1],O=w[2],F=w[3];O>0&&F>0&&S.scissor(A,this.drawingBufferHeight-R-F,O,F)}},popScissor:function(){var S=this.scissorStack;S.pop();var w=S[S.length-1];w&&this.setScissor(w[0],w[1],w[2],w[3]),this.currentScissor=w},hasActiveStencilMask:function(){var S=this.currentMask.mask,w=this.currentCameraMask.mask;return S&&S.isStencil||w&&w.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,w){w===void 0&&(w=!1);var A=this.gl,R=this.blendModes[S];return w||S!==l.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),A.enable(A.BLEND),A.blendEquation(R.equation),R.func.length>2?A.blendFuncSeparate(R.func[0],R.func[1],R.func[2],R.func[3]):A.blendFunc(R.func[0],R.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,w){var A=this.blendModes.push({func:S,equation:w});return A-1},updateBlendMode:function(S,w,A){return this.blendModes[S]&&(this.blendModes[S].func=w,A&&(this.blendModes[S].equation=A)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},pushFramebuffer:function(S,w,A,R,O){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,w,A,R,O))},setFramebuffer:function(S,w,A,R,O){if(w===void 0&&(w=!1),A===void 0&&(A=!0),R===void 0&&(R=null),O===void 0&&(O=!1),S===this.currentFramebuffer)return this;var F=this.gl,L=this.width,D=this.height;return S&&S.renderTexture&&A?(L=S.renderTexture.width,D=S.renderTexture.height):this.flush(),F.bindFramebuffer(F.FRAMEBUFFER,S),A&&F.viewport(0,0,L,D),R&&F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,R,0),O&&(F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT)),w&&(S?(this.drawingBufferHeight=D,this.pushScissor(0,0,L,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,this},popFramebuffer:function(S,w){S===void 0&&(S=!1),w===void 0&&(w=!0);var A=this.fboStack;A.pop();var R=A[A.length-1];return R||(R=null),this.setFramebuffer(R,S,w),R},restoreFramebuffer:function(S,w){S===void 0&&(S=!1),w===void 0&&(w=!0);var A=this.fboStack,R=A[A.length-1];R||(R=null),this.currentFramebuffer=null,this.setFramebuffer(R,S,w)},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,w,A,R,O){O===void 0&&(O=!1);var F=this.gl,L=F.NEAREST,D=F.NEAREST,I=F.CLAMP_TO_EDGE,B=null;w=S?S.width:w,A=S?S.height:A;var V=r(w,A);return V&&!O&&(I=F.REPEAT),R===l.ScaleModes.LINEAR&&this.config.antialias&&(L=V&&this.mipmapFilter?this.mipmapFilter:F.LINEAR,D=F.LINEAR),S&&S.compressed&&(L=F.LINEAR,D=F.LINEAR),!S&&typeof w=="number"&&typeof A=="number"?B=this.createTexture2D(0,L,D,I,I,F.RGBA,null,w,A):B=this.createTexture2D(0,L,D,I,I,F.RGBA,S),B},createTexture2D:function(S,w,A,R,O,F,L,D,I,B,V,Y){B=B==null?!0:B,V===void 0&&(V=!1),Y===void 0&&(Y=!1);var W=this.gl,$=W.createTexture();W.activeTexture(W.TEXTURE0);var N=W.getParameter(W.TEXTURE_BINDING_2D);W.bindTexture(W.TEXTURE_2D,$),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,w),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,A),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,O),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,R),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),Y&&W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,!0);var U=!1;if(L==null)W.texImage2D(W.TEXTURE_2D,S,F,D,I,0,F,W.UNSIGNED_BYTE,null),U=r(D,I);else if(L.compressed){D=L.width,I=L.height,U=L.generateMipmap;for(var b=0;b<L.mipmaps.length;b++)W.compressedTexImage2D(W.TEXTURE_2D,b,L.internalFormat,L.mipmaps[b].width,L.mipmaps[b].height,0,L.mipmaps[b].data)}else V||(D=L.width,I=L.height),W.texImage2D(W.TEXTURE_2D,S,F,F,W.UNSIGNED_BYTE,L),U=r(D,I);return U&&W.generateMipmap(W.TEXTURE_2D),N&&W.bindTexture(W.TEXTURE_2D,N),$.isAlphaPremultiplied=B,$.isRenderTexture=!1,$.width=D,$.height=I,$},createFramebuffer:function(S,w,A,R){R===void 0&&(R=!0);var O=this.gl,F=O.createFramebuffer(),L=0;if(this.setFramebuffer(F),A.isRenderTexture=!0,A.isAlphaPremultiplied=!1,O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,A,0),L=O.checkFramebufferStatus(O.FRAMEBUFFER),L!==O.FRAMEBUFFER_COMPLETE){var D={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(D[L]||L))}if(F.renderTexture=A,R){var I=O.createRenderbuffer();O.bindRenderbuffer(O.RENDERBUFFER,I),O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,S,w),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,I)}return this.setFramebuffer(null),F},beginBitmapMask:function(S,w){var A=this.gl;A&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==S&&(this.currentMask.mask=S,this.currentMask.camera=w))},drawBitmapMask:function(S,w,A){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),S.renderWebGL(this,S,w),this.maskSource.unbind(!0),this.maskTarget.unbind();var R=this.gl,O=this.getCurrentStencilMask();O?(R.enable(R.STENCIL_TEST),O.mask.applyStencil(this,O.camera,!0)):this.currentMask.mask=null,this.pipelines.set(A),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,this.maskTarget.texture),R.activeTexture(R.TEXTURE1),R.bindTexture(R.TEXTURE_2D,this.maskSource.texture)},createProgram:function(S,w){var A=this.gl,R=A.createProgram(),O=A.createShader(A.VERTEX_SHADER),F=A.createShader(A.FRAGMENT_SHADER);A.shaderSource(O,S),A.shaderSource(F,w),A.compileShader(O),A.compileShader(F);var L=`Shader failed:
`;if(!A.getShaderParameter(O,A.COMPILE_STATUS))throw new Error("Vertex "+L+A.getShaderInfoLog(O));if(!A.getShaderParameter(F,A.COMPILE_STATUS))throw new Error("Fragment "+L+A.getShaderInfoLog(F));if(A.attachShader(R,O),A.attachShader(R,F),A.linkProgram(R),!A.getProgramParameter(R,A.LINK_STATUS))throw new Error("Link "+L+A.getProgramInfoLog(R));return A.useProgram(R),R},createVertexBuffer:function(S,w){var A=this.gl,R=A.createBuffer();return A.bindBuffer(A.ARRAY_BUFFER,R),A.bufferData(A.ARRAY_BUFFER,S,w),A.bindBuffer(A.ARRAY_BUFFER,null),R},createIndexBuffer:function(S,w){var A=this.gl,R=A.createBuffer();return A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,R),A.bufferData(A.ELEMENT_ARRAY_BUFFER,S,w),A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,null),R},deleteTexture:function(S){return S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){if(S){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,S);var A=w.getParameter(w.RENDERBUFFER_BINDING);A&&w.deleteRenderbuffer(A),w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(S),d(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)}return this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var w=S.x,A=S.y,R=S.width,O=S.height,F=S.backgroundColor;if(S.emit(x.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(w,A,R,O),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),F.alphaGL>0){var L=this.pipelines.setMulti();L.drawFillRect(w,A,R,O,y.getTintFromFloats(F.blueGL,F.greenGL,F.redGL,1),F.alphaGL)}},getCurrentStencilMask:function(){var S=null,w=this.maskStack,A=this.currentCameraMask;return w.length>0?S=w[w.length-1]:A.mask&&A.mask.isStencil&&(S=A),S},postRenderCamera:function(S){var w=S.flashEffect,A=S.fadeEffect;if(w.isRunning||A.isRunning||A.isComplete){var R=this.pipelines.setMulti();w.postRenderWebGL(R,y.getTintFromFloats),A.postRenderWebGL(R,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(x.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var w=this.config.backgroundColor;S.clearColor(w.redGL,w.greenGL,w.blueGL,w.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(n.PRE_RENDER)}},render:function(S,w,A){if(!this.contextLost){var R=w.length;if(this.emit(n.RENDER,S,A),this.preRenderCamera(A),R===0){this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(A);return}this.currentType="";for(var O=this.currentMask,F=0;F<R;F++){this.finalType=F===R-1;var L=w[F],D=L.mask;O=this.currentMask,O.mask&&O.mask!==D&&O.mask.postRenderWebGL(this,O.camera),D&&O.mask!==D&&D.preRenderWebGL(this,L,A),L.blendMode!==this.currentBlendMode&&this.setBlendMode(L.blendMode);var I=L.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=w[F+1].type===this.currentType,L.renderWebGL(this,L,A),this.newType=!1}O=this.currentMask,O.mask&&O.mask.postRenderWebGL(this,O.camera),this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(A)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(n.POST_RENDER);var S=this.snapshotState;S.callback&&(E(this.gl,S),S.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var S=this.gl,w=this.getCurrentStencilMask();if(w){var A=w.mask;S.enable(S.STENCIL_TEST),A.invertAlpha?S.stencilFunc(S.NOTEQUAL,A.level,255):S.stencilFunc(S.EQUAL,A.level,255)}},snapshot:function(S,w,A){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,w,A)},snapshotArea:function(S,w,A,R,O,F,L){var D=this.snapshotState;return D.callback=O,D.type=F,D.encoder=L,D.getPixel=!1,D.x=S,D.y=w,D.width=A,D.height=R,this},snapshotPixel:function(S,w,A){return this.snapshotArea(S,w,1,1,A),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,w,A,R,O,F,L,D,I,B,V){O===void 0&&(O=!1),F===void 0&&(F=0),L===void 0&&(L=0),D===void 0&&(D=w),I===void 0&&(I=A),B==="pixel"&&(O=!0,B="image/png");var Y=this.currentFramebuffer;this.snapshotArea(F,L,D,I,R,B,V);var W=this.snapshotState;return W.getPixel=O,W.isFramebuffer=!0,W.bufferWidth=w,W.bufferHeight=A,W.width=Math.min(W.width,w),W.height=Math.min(W.height,A),this.setFramebuffer(S),E(this.gl,W),this.setFramebuffer(Y),W.callback=null,W.isFramebuffer=!1,this},canvasToTexture:function(S,w,A,R){return A===void 0&&(A=!1),R===void 0&&(R=!1),w?this.updateCanvasTexture(S,w,R):this.createCanvasTexture(S,A,R)},createCanvasTexture:function(S,w,A){w===void 0&&(w=!1),A===void 0&&(A=!1);var R=this.gl,O=R.NEAREST,F=R.NEAREST,L=S.width,D=S.height,I=R.CLAMP_TO_EDGE,B=r(L,D);return!w&&B&&(I=R.REPEAT),this.config.antialias&&(O=B&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,F=R.LINEAR),this.createTexture2D(0,O,F,I,I,R.RGBA,S,L,D,!0,!1,A)},updateCanvasTexture:function(S,w,A){A===void 0&&(A=!1);var R=this.gl,O=S.width,F=S.height;if(O>0&&F>0){R.activeTexture(R.TEXTURE0);var L=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,w),A&&R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,!0),R.pixelStorei(R.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,S),w.width=O,w.height=F,L&&R.bindTexture(R.TEXTURE_2D,L)}return w},createVideoTexture:function(S,w,A){w===void 0&&(w=!1),A===void 0&&(A=!1);var R=this.gl,O=R.NEAREST,F=R.NEAREST,L=S.videoWidth,D=S.videoHeight,I=R.CLAMP_TO_EDGE,B=r(L,D);return!w&&B&&(I=R.REPEAT),this.config.antialias&&(O=B&&this.mipmapFilter?this.mipmapFilter:R.LINEAR,F=R.LINEAR),this.createTexture2D(0,O,F,I,I,R.RGBA,S,L,D,!0,!0,A)},updateVideoTexture:function(S,w,A){A===void 0&&(A=!1);var R=this.gl,O=S.videoWidth,F=S.videoHeight;if(O>0&&F>0){R.activeTexture(R.TEXTURE0);var L=R.getParameter(R.TEXTURE_BINDING_2D);R.bindTexture(R.TEXTURE_2D,w),R.pixelStorei(R.UNPACK_FLIP_Y_WEBGL,A),R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,S),w.width=O,w.height=F,L&&R.bindTexture(R.TEXTURE_2D,L)}return w},setTextureFilter:function(S,w){var A=this.gl,R=[A.LINEAR,A.NEAREST][w];A.activeTexture(A.TEXTURE0);var O=A.getParameter(A.TEXTURE_BINDING_2D);return A.bindTexture(A.TEXTURE_2D,S),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,R),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,R),O&&A.bindTexture(A.TEXTURE_2D,O),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});o.exports=P},71305:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(71402),l=new d({initialize:function(n,r,f,a,c){this.pipeline=n,this.name=r,this.renderer=n.renderer,this.gl=this.renderer.gl,this.fragSrc=a,this.vertSrc=f,this.program=this.renderer.createProgram(f,a),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(c),this.createUniforms()},createAttributes:function(h){var n=0,r=0,f=[];this.vertexComponentCount=0;for(var a=0;a<h.length;a++){var c=h[a],p=c.name,v=x(c,"size",1),m=x(c,"type",u.FLOAT),y=m.enum,E=m.size,P=!!c.normalized;f.push({name:p,size:v,type:y,normalized:P,offset:r,enabled:!1,location:-1}),E===4?n+=v:n++,r+=v*E}this.vertexSize=r,this.vertexComponentCount=n,this.attributes=f},bind:function(h,n){return h===void 0&&(h=!1),n===void 0&&(n=!1),n&&this.pipeline.flush(),this.renderer.setProgram(this.program),h&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(h){h===void 0&&(h=!1);for(var n=this.gl,r=this.vertexSize,f=this.attributes,a=this.program,c=0;c<f.length;c++){var p=f[c],v=p.size,m=p.type,y=p.offset,E=p.enabled,P=p.location,S=!!p.normalized;if(h){var w=n.getAttribLocation(a,p.name);w>=0?(n.enableVertexAttribArray(w),n.vertexAttribPointer(w,v,m,S,r,y),p.enabled=!0,p.location=w):w!==-1&&n.disableVertexAttribArray(w)}else E?n.vertexAttribPointer(P,v,m,S,r,y):!E&&P>-1&&(n.disableVertexAttribArray(P),p.location=-1)}return this},createUniforms:function(){var h=this.gl,n=this.program,r=this.uniforms,f,a,c,p=h.getProgramParameter(n,h.ACTIVE_UNIFORMS);for(f=0;f<p;f++){var v=h.getActiveUniform(n,f);if(v){a=v.name,c=h.getUniformLocation(n,a),c!==null&&(r[a]={name:a,location:c,value1:null,value2:null,value3:null,value4:null});var m=a.indexOf("[");m>0&&(a=a.substr(0,m),r.hasOwnProperty(a)||(c=h.getUniformLocation(n,a),c!==null&&(r[a]={name:a,location:c,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(h){return this.uniforms.hasOwnProperty(h)},resetUniform:function(h){var n=this.uniforms[h];return n&&(n.value1=null,n.value2=null,n.value3=null,n.value4=null),this},setUniform1:function(h,n,r,f){var a=this.uniforms[n];return a?((f||a.value1!==r)&&(a.value1=r,this.renderer.setProgram(this.program),h.call(this.gl,a.location,r),this.pipeline.currentShader=this),this):this},setUniform2:function(h,n,r,f,a){var c=this.uniforms[n];return c?((a||c.value1!==r||c.value2!==f)&&(c.value1=r,c.value2=f,this.renderer.setProgram(this.program),h.call(this.gl,c.location,r,f),this.pipeline.currentShader=this),this):this},setUniform3:function(h,n,r,f,a,c){var p=this.uniforms[n];return p?((c||p.value1!==r||p.value2!==f||p.value3!==a)&&(p.value1=r,p.value2=f,p.value3=a,this.renderer.setProgram(this.program),h.call(this.gl,p.location,r,f,a),this.pipeline.currentShader=this),this):this},setUniform4:function(h,n,r,f,a,c,p){var v=this.uniforms[n];return v?((p||v.value1!==r||v.value2!==f||v.value3!==a||v.value4!==c)&&(v.value1=r,v.value2=f,v.value3=a,v.value4=c,this.renderer.setProgram(this.program),h.call(this.gl,v.location,r,f,a,c),this.pipeline.currentShader=this),this):this},setBoolean:function(h,n){return this.setUniform1(this.gl.uniform1i,h,Number(n))},set1f:function(h,n){return this.setUniform1(this.gl.uniform1f,h,n)},set2f:function(h,n,r){return this.setUniform2(this.gl.uniform2f,h,n,r)},set3f:function(h,n,r,f){return this.setUniform3(this.gl.uniform3f,h,n,r,f)},set4f:function(h,n,r,f,a){return this.setUniform4(this.gl.uniform4f,h,n,r,f,a)},set1fv:function(h,n){return this.setUniform1(this.gl.uniform1fv,h,n,!0)},set2fv:function(h,n){return this.setUniform1(this.gl.uniform2fv,h,n,!0)},set3fv:function(h,n){return this.setUniform1(this.gl.uniform3fv,h,n,!0)},set4fv:function(h,n){return this.setUniform1(this.gl.uniform4fv,h,n,!0)},set1iv:function(h,n){return this.setUniform1(this.gl.uniform1iv,h,n,!0)},set2iv:function(h,n){return this.setUniform1(this.gl.uniform2iv,h,n,!0)},set3iv:function(h,n){return this.setUniform1(this.gl.uniform3iv,h,n,!0)},set4iv:function(h,n){return this.setUniform1(this.gl.uniform4iv,h,n,!0)},set1i:function(h,n){return this.setUniform1(this.gl.uniform1i,h,n)},set2i:function(h,n,r){return this.setUniform2(this.gl.uniform2i,h,n,r)},set3i:function(h,n,r,f){return this.setUniform3(this.gl.uniform3i,h,n,r,f)},set4i:function(h,n,r,f,a){return this.setUniform4(this.gl.uniform4i,h,n,r,f,a)},setMatrix2fv:function(h,n,r){return this.setUniform2(this.gl.uniformMatrix2fv,h,n,r,!0)},setMatrix3fv:function(h,n,r){return this.setUniform2(this.gl.uniformMatrix3fv,h,n,r,!0)},setMatrix4fv:function(h,n,r){return this.setUniform2(this.gl.uniformMatrix4fv,h,n,r,!0)},createProgram:function(h,n){h===void 0&&(h=this.vertSrc),n===void 0&&(n=this.fragSrc);var r=this.gl;return this.program&&r.deleteProgram(this.program),this.vertSrc=h,this.fragSrc=n,this.program=this.renderer.createProgram(h,n),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});o.exports=l},71402:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};o.exports=T},55478:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71402),x=e(98611),u={PipelineManager:e(35217),Pipelines:e(62253),RenderTarget:e(37410),Utils:e(75512),WebGLPipeline:e(44775),WebGLRenderer:e(11857),WebGLShader:e(71305)};u=x(!1,u,d),o.exports=u},5583:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(91679),l=e(89053),h=e(71402),n=e(44775),r=new d({Extends:n,initialize:function(a){a.fragShader=x(a,"fragShader",u),a.vertShader=x(a,"vertShader",l),a.batchSize=x(a,"batchSize",1),a.vertices=x(a,"vertices",[-1,1,-1,-7,7,1]),a.attributes=x(a,"attributes",[{name:"inPosition",size:2,type:h.FLOAT}]),n.call(this,a)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(f,a){n.prototype.resize.call(this,f,a),this.set2f("uResolution",f,a)},beginMask:function(f,a,c){this.renderer.beginBitmapMask(f,c)},endMask:function(f,a,c){var p=this.gl,v=this.renderer,m=f.bitmapMask;m&&p&&(v.drawBitmapMask(m,a,this),c&&this.set2f("uResolution",c.width,c.height),this.set1i("uInvertMaskAlpha",f.invertAlpha),p.drawArrays(this.topology,0,3),c&&this.set2f("uResolution",this.width,this.height),p.bindTexture(p.TEXTURE_2D,null))}});o.exports=r},81828:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(58136),u=e(47406),l=e(72632),h=e(87228),n=e(92462),r=e(75512),f=new d({Extends:h,initialize:function(c){c.shaders=[r.setGlowQuality(n.FXGlowFrag,c.game),n.FXShadowFrag,n.FXPixelateFrag,n.FXVignetteFrag,n.FXShineFrag,n.FXBlurLowFrag,n.FXBlurMedFrag,n.FXBlurHighFrag,n.FXGradientFrag,n.FXBloomFrag,n.ColorMatrixFrag,n.FXCircleFrag,n.FXBarrelFrag,n.FXDisplacementFrag,n.FXWipeFrag,n.FXBokehFrag],h.call(this,c);var p=this.game;this.glow=new x.Glow(p),this.shadow=new x.Shadow(p),this.pixelate=new x.Pixelate(p),this.vignette=new x.Vignette(p),this.shine=new x.Shine(p),this.gradient=new x.Gradient(p),this.circle=new x.Circle(p),this.barrel=new x.Barrel(p),this.wipe=new x.Wipe(p),this.bokeh=new x.Bokeh(p);var v=[];v[u.GLOW]=this.onGlow,v[u.SHADOW]=this.onShadow,v[u.PIXELATE]=this.onPixelate,v[u.VIGNETTE]=this.onVignette,v[u.SHINE]=this.onShine,v[u.BLUR]=this.onBlur,v[u.GRADIENT]=this.onGradient,v[u.BLOOM]=this.onBloom,v[u.COLOR_MATRIX]=this.onColorMatrix,v[u.CIRCLE]=this.onCircle,v[u.BARREL]=this.onBarrel,v[u.DISPLACEMENT]=this.onDisplacement,v[u.WIPE]=this.onWipe,v[u.BOKEH]=this.onBokeh,this.fxHandlers=v,this.source,this.target,this.swap},onDraw:function(a,c,p){this.source=a,this.target=c,this.swap=p;var v=a.width,m=a.height,y=this.tempSprite,E=this.fxHandlers;if(y&&y.preFX)for(var P=y.preFX.list,S=0;S<P.length;S++){var w=P[S];w.active&&E[w.type].call(this,w,v,m)}this.drawToGame(this.source)},runDraw:function(){var a=this.source,c=this.target;this.copy(a,c),this.source=c,this.target=a},onGlow:function(a,c,p){var v=this.shaders[u.GLOW];this.setShader(v),this.glow.onPreRender(a,v,c,p),this.runDraw()},onShadow:function(a){var c=this.shaders[u.SHADOW];this.setShader(c),this.shadow.onPreRender(a,c),this.runDraw()},onPixelate:function(a,c,p){var v=this.shaders[u.PIXELATE];this.setShader(v),this.pixelate.onPreRender(a,v,c,p),this.runDraw()},onVignette:function(a){var c=this.shaders[u.VIGNETTE];this.setShader(c),this.vignette.onPreRender(a,c),this.runDraw()},onShine:function(a,c,p){var v=this.shaders[u.SHINE];this.setShader(v),this.shine.onPreRender(a,v,c,p),this.runDraw()},onBlur:function(a,c,p){var v=l(a,"quality"),m=this.shaders[u.BLUR+v];this.setShader(m),this.set1i("uMainSampler",0),this.set2f("resolution",c,p),this.set1f("strength",l(a,"strength")),this.set3fv("color",l(a,"glcolor"));for(var y=l(a,"x"),E=l(a,"y"),P=l(a,"steps"),S=0;S<P;S++)this.set2f("offset",y,0),this.runDraw(),this.set2f("offset",0,E),this.runDraw()},onGradient:function(a){var c=this.shaders[u.GRADIENT];this.setShader(c),this.gradient.onPreRender(a,c),this.runDraw()},onBloom:function(a,c,p){var v=this.shaders[u.BLOOM];this.copySprite(this.source,this.swap),this.setShader(v),this.set1i("uMainSampler",0),this.set1f("strength",l(a,"blurStrength")),this.set3fv("color",l(a,"glcolor"));for(var m=2/c*l(a,"offsetX"),y=2/p*l(a,"offsetY"),E=l(a,"steps"),P=0;P<E;P++)this.set2f("offset",m,0),this.runDraw(),this.set2f("offset",0,y),this.runDraw();this.blendFrames(this.swap,this.source,this.target,l(a,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(a){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",a.getData()),this.set1f("uAlpha",a.alpha),this.runDraw()},onCircle:function(a,c,p){var v=this.shaders[u.CIRCLE];this.setShader(v),this.circle.onPreRender(a,v,c,p),this.runDraw()},onBarrel:function(a){var c=this.shaders[u.BARREL];this.setShader(c),this.barrel.onPreRender(a,c),this.runDraw()},onDisplacement:function(a){this.setShader(this.shaders[u.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",a.x,a.y),this.bindTexture(a.glTexture,1),this.runDraw()},onWipe:function(a){var c=this.shaders[u.WIPE];this.setShader(c),this.wipe.onPreRender(a,c),this.runDraw()},onBokeh:function(a,c,p){var v=this.shaders[u.BOKEH];this.setShader(v),this.bokeh.onPreRender(a,v,c,p),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,h.prototype.destroy.call(this),this}});o.exports=f},66901:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(65045),l=e(77310),h=e(69360),n=e(93736),r=e(44775),f=new d({Extends:l,initialize:function(c){var p=x(c,"fragShader",u);c.fragShader=p.replace("%LIGHT_COUNT%",c.game.renderer.config.maxLights),l.call(this,c),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new n,this._tempMatrix=new h,this._tempMatrix2=new h},boot:function(){r.prototype.boot.call(this);var a=this.gl,c=a.createTexture();a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:c}},onRender:function(a,c){var p=a.sys.lights;if(this.lightsActive=!1,!(!p||!p.active)){var v=p.getLights(c),m=v.length;this.lightsActive=!0;var y,E=this.renderer,P=E.height,S=c.matrix,w=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",c.x,c.y,c.rotation,c.zoom),this.set3f("uAmbientLightColor",p.ambientColor.r,p.ambientColor.g,p.ambientColor.b),this.set1i("uLightCount",m),y=0;y<m;y++){var A=v[y].light,R=A.color,O="uLights["+y+"].";S.transformPoint(A.x,A.y,w),this.set2f(O+"position",w.x-c.scrollX*A.scrollFactorX*c.zoom,P-(w.y-c.scrollY*A.scrollFactorY*c.zoom)),this.set3f(O+"color",R.r,R.g,R.b),this.set1f(O+"intensity",A.intensity),this.set1f(O+"radius",A.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(a){if(a!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var c=this.inverseRotationMatrix;if(a){var p=-a,v=Math.cos(p),m=Math.sin(p);c[1]=m,c[3]=-m,c[0]=c[4]=v}else c[0]=c[4]=1,c[1]=c[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,c),this.currentNormalMapRotation=a}},setTexture2D:function(a,c){var p=this.renderer;a===void 0&&(a=p.whiteTexture);var v=this.getNormalMap(c);this.isNewNormalMap(a,v)&&(this.flush(),this.createBatch(a),this.addTextureToBatch(v),this.currentNormalMap=v);var m=0;if(c&&c.parentContainer){var y=c.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);m=y.rotationNormalized}else c&&(m=c.rotation);return this.setNormalMapRotation(m),0},setGameObject:function(a,c){c===void 0&&(c=a.frame);var p=c.glTexture,v=this.getNormalMap(a);if(this.isNewNormalMap(p,v)&&(this.flush(),this.createBatch(p),this.addTextureToBatch(v),this.currentNormalMap=v),a.parentContainer){var m=a.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(m.rotationNormalized)}else this.setNormalMapRotation(a.rotation);return 0},isNewNormalMap:function(a,c){return this.currentTexture!==a||this.currentNormalMap!==c},getNormalMap:function(a){var c;return a?a.displayTexture?c=a.displayTexture.dataSource[a.displayFrame.sourceIndex]:a.texture?c=a.texture.dataSource[a.frame.sourceIndex]:a.tileset&&(Array.isArray(a.tileset)?c=a.tileset[0].image.dataSource[0]:c=a.tileset.image.dataSource[0]):c=this.defaultNormalMap,c||(c=this.defaultNormalMap),c.glTexture},batchSprite:function(a,c,p){this.lightsActive&&l.prototype.batchSprite.call(this,a,c,p)},batchTexture:function(a,c,p,v,m,y,E,P,S,w,A,R,O,F,L,D,I,B,V,Y,W,$,N,U,b,G,z,X,k,H,K,Z){this.lightsActive&&l.prototype.batchTexture.call(this,a,c,p,v,m,y,E,P,S,w,A,R,O,F,L,D,I,B,V,Y,W,$,N,U,b,G,z,X,k,H,K,Z)},batchTextureFrame:function(a,c,p,v,m,y,E){this.lightsActive&&l.prototype.batchTextureFrame.call(this,a,c,p,v,m,y,E)}});o.exports=f},71264:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(77310),l=e(85060),h=e(18166),n=e(71402),r=e(44775),f=new d({Extends:u,initialize:function(c){c.fragShader=x(c,"fragShader",l),c.vertShader=x(c,"vertShader",h),c.attributes=x(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),c.forceZero=!0,u.call(this,c)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});o.exports=f},77310:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(11117),u=e(72632),l=e(53787),h=e(15968),n=e(69360),r=e(75512),f=e(71402),a=e(44775),c=new d({Extends:a,initialize:function(v){var m=v.game.renderer,y=u(v,"fragShader",l);v.fragShader=r.parseFragmentShaderMaxTextures(y,m.maxTextures),v.vertShader=u(v,"vertShader",h),v.attributes=u(v,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:f.UNSIGNED_BYTE,normalized:!0}]),a.call(this,v),this._tempMatrix1=new n,this._tempMatrix2=new n,this._tempMatrix3=new n,this.calcMatrix=new n,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){a.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,v,m){this.manager.set(this,p);var y=this._tempMatrix1,E=this._tempMatrix2,P=this._tempMatrix3,S=p.frame,w=S.glTexture,A=S.u0,R=S.v0,O=S.u1,F=S.v1,L=S.x,D=S.y,I=S.cutWidth,B=S.cutHeight,V=S.customPivot,Y=p.displayOriginX,W=p.displayOriginY,$=-Y+L,N=-W+D;if(p.isCropped){var U=p._crop;(U.flipX!==p.flipX||U.flipY!==p.flipY)&&S.updateCropUVs(U,p.flipX,p.flipY),A=U.u0,R=U.v0,O=U.u1,F=U.v1,I=U.width,B=U.height,L=U.x,D=U.y,$=-Y+L,N=-W+D}var b=1,G=1;p.flipX&&(V||($+=-S.realWidth+Y*2),b=-1),(p.flipY||S.source.isGLTexture&&!w.flipY)&&(V||(N+=-S.realHeight+W*2),G=-1);var z=p.x,X=p.y;E.applyITRS(z,X,p.rotation,p.scaleX*b,p.scaleY*G),y.copyFrom(v.matrix),m?(y.multiplyWithOffset(m,-v.scrollX*p.scrollFactorX,-v.scrollY*p.scrollFactorY),E.e=z,E.f=X):(E.e-=v.scrollX*p.scrollFactorX,E.f-=v.scrollY*p.scrollFactorY),y.multiply(E,P);var k=P.setQuad($,N,$+I,N+B,v.roundPixels),H=r.getTintAppendFloatAlpha,K=v.alpha,Z=H(p.tintTopLeft,K*p._alphaTL),J=H(p.tintTopRight,K*p._alphaTR),j=H(p.tintBottomLeft,K*p._alphaBL),Q=H(p.tintBottomRight,K*p._alphaBR);this.shouldFlush(6)&&this.flush();var _=this.setGameObject(p,S);this.manager.preBatch(p),this.batchQuad(p,k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],A,R,O,F,Z,J,j,Q,p.tintFill,w,_),this.manager.postBatch(p)},batchTexture:function(p,v,m,y,E,P,S,w,A,R,O,F,L,D,I,B,V,Y,W,$,N,U,b,G,z,X,k,H,K,Z,J,j){this.manager.set(this,p);var Q=this._tempMatrix1,_=this._tempMatrix2,q=this._tempMatrix3,et=Y/m+k,at=W/y+H,ot=(Y+$)/m+k,ht=(W+N)/y+H,tt=S,rt=w,nt=-B,pt=-V;if(p.isCropped){var vt=p._crop,It=vt.width,Rt=vt.height;tt=It,rt=Rt,S=It,w=Rt,Y=vt.x,W=vt.y;var St=Y,mt=W;F&&(St=$-vt.x-It),L&&(mt=N-vt.y-Rt),et=St/m+k,at=mt/y+H,ot=(St+It)/m+k,ht=(mt+Rt)/y+H,nt=-B+Y,pt=-V+W}L=L^(!J&&v.isRenderTexture?1:0),F&&(tt*=-1,nt+=S),L&&(rt*=-1,pt+=w),_.applyITRS(E,P,O,A,R),Q.copyFrom(K.matrix),Z?(Q.multiplyWithOffset(Z,-K.scrollX*D,-K.scrollY*I),_.e=E,_.f=P):(_.e-=K.scrollX*D,_.f-=K.scrollY*I),Q.multiply(_,q);var Ot=q.setQuad(nt,pt,nt+tt,pt+rt,K.roundPixels);j===void 0&&(j=this.setTexture2D(v)),p&&this.manager.preBatch(p),this.batchQuad(p,Ot[0],Ot[1],Ot[2],Ot[3],Ot[4],Ot[5],Ot[6],Ot[7],et,at,ot,ht,U,b,G,z,X,v,j),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,v,m,y,E,P,S){this.manager.set(this);var w=this._tempMatrix1.copyFrom(P),A=this._tempMatrix2;S?w.multiply(S,A):A=w;var R=A.setQuad(v,m,v+p.width,m+p.height,!1),O=this.setTexture2D(p.source.glTexture);y=r.getTintAppendFloatAlpha(y,E),this.batchQuad(null,R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],p.u0,p.v0,p.u1,p.v1,y,y,y,y,0,p.glTexture,O)},batchFillRect:function(p,v,m,y,E,P){this.renderer.pipelines.set(this);var S=this.calcMatrix;P&&P.multiply(E,S);var w=S.setQuad(p,v,p+m,v+y,!1),A=this.fillTint;this.batchQuad(null,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],0,0,1,1,A.TL,A.TR,A.BL,A.BR,2)},batchFillTriangle:function(p,v,m,y,E,P,S,w){this.renderer.pipelines.set(this);var A=this.calcMatrix;w&&w.multiply(S,A);var R=A.getX(p,v),O=A.getY(p,v),F=A.getX(m,y),L=A.getY(m,y),D=A.getX(E,P),I=A.getY(E,P),B=this.fillTint;this.batchTri(null,R,O,F,L,D,I,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(p,v,m,y,E,P,S,w,A){var R=this.tempTriangle;R[0].x=p,R[0].y=v,R[0].width=S,R[1].x=m,R[1].y=y,R[1].width=S,R[2].x=E,R[2].y=P,R[2].width=S,R[3].x=p,R[3].y=v,R[3].width=S,this.batchStrokePath(R,S,!1,w,A)},batchFillPath:function(p,v,m){this.renderer.pipelines.set(this);var y=this.calcMatrix;m&&m.multiply(v,y);for(var E=p.length,P=this.polygonCache,S,w,A=this.fillTint.TL,R=this.fillTint.TR,O=this.fillTint.BL,F=0;F<E;++F)w=p[F],P.push(w.x,w.y);S=x(P),E=S.length;for(var L=0;L<E;L+=3){var D=S[L+0]*2,I=S[L+1]*2,B=S[L+2]*2,V=P[D+0],Y=P[D+1],W=P[I+0],$=P[I+1],N=P[B+0],U=P[B+1],b=y.getX(V,Y),G=y.getY(V,Y),z=y.getX(W,$),X=y.getY(W,$),k=y.getX(N,U),H=y.getY(N,U);this.batchTri(null,b,G,z,X,k,H,0,0,1,1,A,R,O,2)}P.length=0},batchStrokePath:function(p,v,m,y,E){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var P=p.length-1,S=0;S<P;S++){var w=p[S],A=p[S+1];this.batchLine(w.x,w.y,A.x,A.y,w.width/2,A.width/2,v,S,!m&&S===P-1,y,E)}},batchLine:function(p,v,m,y,E,P,S,w,A,R,O){this.renderer.pipelines.set(this);var F=this.calcMatrix;O&&O.multiply(R,F);var L=m-p,D=y-v,I=Math.sqrt(L*L+D*D);if(I!==0){var B=E*(y-v)/I,V=E*(p-m)/I,Y=P*(y-v)/I,W=P*(p-m)/I,$=m-Y,N=y-W,U=p-B,b=v-V,G=m+Y,z=y+W,X=p+B,k=v+V,H=F.getX($,N),K=F.getY($,N),Z=F.getX(U,b),J=F.getY(U,b),j=F.getX(G,z),Q=F.getY(G,z),_=F.getX(X,k),q=F.getY(X,k),et=this.strokeTint,at=et.TL,ot=et.TR,ht=et.BL,tt=et.BR;if(this.batchQuad(null,_,q,Z,J,H,K,j,Q,0,0,1,1,at,ot,ht,tt,2),!(S<=2)){var rt=this.prevQuad,nt=this.firstQuad;w>0&&rt[4]?this.batchQuad(null,_,q,Z,J,rt[0],rt[1],rt[2],rt[3],0,0,1,1,at,ot,ht,tt,2):(nt[0]=_,nt[1]=q,nt[2]=Z,nt[3]=J,nt[4]=1),A&&nt[4]?this.batchQuad(null,H,K,j,Q,nt[0],nt[1],nt[2],nt[3],0,0,1,1,at,ot,ht,tt,2):(rt[0]=H,rt[1]=K,rt[2]=j,rt[3]=Q,rt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,a.prototype.destroy.call(this),this}});o.exports=c},10919:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(83327),l=e(54677),h=e(44775),n=new d({Extends:h,initialize:function(f){f.vertShader=x(f,"vertShader",l),f.fragShader=x(f,"fragShader",u),f.attributes=x(f,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),h.call(this,f)},onRender:function(r,f){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",f.zoom)},batchPointLight:function(r,f,a,c,p,v,m,y,E,P,S,w){var A=r.color,R=r.intensity,O=r.radius,F=r.attenuation,L=A.r*R,D=A.g*R,I=A.b*R,B=f.alpha*r.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(a,c,S,w,O,F,L,D,I,B),this.batchLightVert(p,v,S,w,O,F,L,D,I,B),this.batchLightVert(m,y,S,w,O,F,L,D,I,B),this.batchLightVert(a,c,S,w,O,F,L,D,I,B),this.batchLightVert(m,y,S,w,O,F,L,D,I,B),this.batchLightVert(E,P,S,w,O,F,L,D,I,B),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(r,f,a,c,p,v,m,y,E,P){var S=this.vertexViewF32,w=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++w]=r,S[++w]=f,S[++w]=a,S[++w]=c,S[++w]=p,S[++w]=v,S[++w]=m,S[++w]=y,S[++w]=E,S[++w]=P,this.vertexCount++}});o.exports=n},80486:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(65246),u=e(72632),l=e(12569),h=e(99365),n=e(44775),r=new d({Extends:n,initialize:function(a){a.renderTarget=u(a,"renderTarget",1),a.fragShader=u(a,"fragShader",l),a.vertShader=u(a,"vertShader",h),a.attributes=u(a,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),a.batchSize=1,a.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],n.call(this,a),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new x,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){n.prototype.boot.call(this);var f=this.manager.UTILITY_PIPELINE;this.fullFrame1=f.fullFrame1,this.fullFrame2=f.fullFrame2,this.halfFrame1=f.halfFrame1,this.halfFrame2=f.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(f){this.bindAndDraw(f)},getController:function(f){return f!==void 0?f:this.controller?this.controller:this},copySprite:function(f,a,c){c===void 0&&(c=!1);var p=this.gl;p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,f.texture);var v=p.getParameter(p.FRAMEBUFFER_BINDING);p.bindFramebuffer(p.FRAMEBUFFER,a.framebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,a.texture,0),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),p.bufferData(p.ARRAY_BUFFER,this.vertexData,p.STATIC_DRAW),p.drawArrays(p.TRIANGLES,0,6),c&&(p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,v))},copyFrame:function(f,a,c,p,v){this.manager.copyFrame(f,a,c,p,v)},copyToGame:function(f){this.manager.copyToGame(f)},drawFrame:function(f,a,c){this.manager.drawFrame(f,a,c,this.colorMatrix)},blendFrames:function(f,a,c,p,v){this.manager.blendFrames(f,a,c,p,v)},blendFramesAdditive:function(f,a,c,p,v){this.manager.blendFramesAdditive(f,a,c,p,v)},clearFrame:function(f,a){this.manager.clearFrame(f,a)},blitFrame:function(f,a,c,p,v,m){this.manager.blitFrame(f,a,c,p,v,m)},copyFrameRect:function(f,a,c,p,v,m,y,E){this.manager.copyFrameRect(f,a,c,p,v,m,y,E)},bindAndDraw:function(f,a,c,p,v){c===void 0&&(c=!0),p===void 0&&(p=!0);var m=this.gl,y=this.renderer;this.bind(v),this.set1i("uMainSampler",0),a?(m.viewport(0,0,a.width,a.height),m.bindFramebuffer(m.FRAMEBUFFER,a.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,a.texture,0),c&&(p?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(y.popFramebuffer(!1,!1),y.currentFramebuffer||m.viewport(0,0,y.width,y.height)),y.restoreStencilMask(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,f.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),a&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,y.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,n.prototype.destroy.call(this),this}});o.exports=r},87228:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(79993),u=e(56694),l=e(37486),h=e(72632),n=e(77310),r=e(12569),f=e(74118),a=e(37410),c=e(85060),p=e(18166),v=e(44775),m=new u({Extends:n,initialize:function(E){var P=h(E,"fragShader",r),S=h(E,"vertShader",p),w=h(E,"drawShader",r),A=[{name:"DrawSprite",fragShader:c,vertShader:p},{name:"CopySprite",fragShader:P,vertShader:S},{name:"DrawGame",fragShader:w,vertShader:p},{name:"ColorMatrix",fragShader:l}],R=h(E,"shaders",[]);E.shaders=A.concat(R),E.vertShader||(E.vertShader=S),E.batchSize=1,n.call(this,E),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new f,this.targetBounds=new f,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){v.prototype.boot.call(this);var y=this.shaders,E=this.renderer;this.drawSpriteShader=y[0],this.copyShader=y[1],this.gameShader=y[2],this.colorMatrixShader=y[3],this.fsTarget=new a(E,E.width,E.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var P=new ArrayBuffer(168);this.quadVertexData=P,this.quadVertexViewF32=new Float32Array(P),this.quadVertexBuffer=E.createVertexBuffer(P,this.gl.STATIC_DRAW),this.onResize(E.width,E.height),this.currentShader=this.copyShader},onResize:function(y,E){var P=this.quadVertexViewF32;P[1]=E,P[22]=E,P[14]=y,P[28]=y,P[35]=y,P[36]=E},batchQuad:function(y,E,P,S,w,A,R,O,F,L,D,I,B,V,Y,W,$,N,U){var b=Math.min(E,S,A,O),G=Math.min(P,w,R,F),z=Math.max(E,S,A,O),X=Math.max(P,w,R,F),k=z-b,H=X-G,K=this.spriteBounds.setTo(b,G,k,H),Z=y?y.preFX.padding:0,J=k+Z*2,j=H+Z*2,Q=Math.abs(Math.max(J,j)),_=this.manager.getRenderTarget(Q),q=this.targetBounds.setTo(0,0,_.width,_.height);x(q,K.centerX,K.centerY),this.tempSprite=y;var et=this.gl,at=this.renderer;at.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),y&&(this.onDrawSprite(y,_),y.preFX.onFX(this));var ot=this.fsTarget;return this.flush(),et.viewport(0,0,at.width,at.height),et.bindFramebuffer(et.FRAMEBUFFER,ot.framebuffer),et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,ot.texture,0),et.clearColor(0,0,0,0),et.clear(et.COLOR_BUFFER_BIT),this.setTexture2D(U),this.batchVert(E,P,L,D,0,N,V),this.batchVert(S,w,L,B,0,N,W),this.batchVert(A,R,I,B,0,N,$),this.batchVert(E,P,L,D,0,N,V),this.batchVert(A,R,I,B,0,N,$),this.batchVert(O,F,I,D,0,N,Y),this.flush(),this.flipProjectionMatrix(!1),et.activeTexture(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,_.texture),et.copyTexSubImage2D(et.TEXTURE_2D,0,0,0,q.x,q.y,q.width,q.height),et.bindFramebuffer(et.FRAMEBUFFER,null),et.bindTexture(et.TEXTURE_2D,null),this.onBatch(y),this.currentShader=this.copyShader,this.onDraw(_,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(y,E,P,S,w,A,R){P===void 0&&(P=!0),S===void 0&&(S=!0),w===void 0&&(w=!1),R===void 0&&(R=this.copyShader);var O=this.gl,F=this.tempSprite;A&&(R=this.colorMatrixShader),this.currentShader=R;var L=this.setVertexBuffer(this.quadVertexBuffer);if(R.bind(L,!1),this.set1i("uMainSampler",0),F.preFX.onFXCopy(this),this.onCopySprite(y,E,F),A&&(this.set1fv("uColorMatrix",A.getData()),this.set1f("uAlpha",A.alpha)),O.activeTexture(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,y.texture),y.height>E.height)O.viewport(0,0,y.width,y.height),this.setTargetUVs(y,E);else{var D=E.height-y.height;O.viewport(0,D,y.width,y.height),this.resetUVs()}if(O.bindFramebuffer(O.FRAMEBUFFER,E.framebuffer),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,E.texture,0),P&&(O.clearColor(0,0,0,Number(!S)),O.clear(O.COLOR_BUFFER_BIT)),w){var I=this.renderer.currentBlendMode;this.renderer.setBlendMode(d.ERASE)}O.bufferData(O.ARRAY_BUFFER,this.quadVertexData,O.STATIC_DRAW),O.drawArrays(O.TRIANGLES,0,6),w&&this.renderer.setBlendMode(I),O.bindFramebuffer(O.FRAMEBUFFER,null)},copy:function(y,E){var P=this.gl;this.set1i("uMainSampler",0),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,y.texture),P.viewport(0,0,y.width,y.height),this.setUVs(0,0,0,1,1,1,1,0),P.bindFramebuffer(P.FRAMEBUFFER,E.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,E.texture,0),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.quadVertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null)},blendFrames:function(y,E,P,S,w){this.manager.blendFrames(y,E,P,S,w)},blendFramesAdditive:function(y,E,P,S,w){this.manager.blendFramesAdditive(y,E,P,S,w)},drawToGame:function(y){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(y)},copyToGame:function(y){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(y)},bindAndDraw:function(y){var E=this.gl,P=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(y.texture);var S=this._tempMatrix1.loadIdentity(),w=this.targetBounds.x,A=this.targetBounds.y,R=w+y.width,O=A+y.height,F=S.getX(w,A),L=S.getX(w,O),D=S.getX(R,O),I=S.getX(R,A),B=S.getY(w,A),V=S.getY(w,O),Y=S.getY(R,O),W=S.getY(R,A),$=16777215;this.batchVert(F,B,0,0,0,0,$),this.batchVert(L,V,0,1,0,0,$),this.batchVert(D,Y,1,1,0,0,$),this.batchVert(F,B,0,0,0,0,$),this.batchVert(D,Y,1,1,0,0,$),this.batchVert(I,W,1,0,0,0,$),P.restoreFramebuffer(!1,!0),P.currentFramebuffer||E.viewport(0,0,P.width,P.height),P.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(y){this.drawToGame(y)},setUVs:function(y,E,P,S,w,A,R,O){var F=this.quadVertexViewF32;F[2]=y,F[3]=E,F[9]=P,F[10]=S,F[16]=w,F[17]=A,F[23]=y,F[24]=E,F[30]=w,F[31]=A,F[37]=R,F[38]=O},setTargetUVs:function(y,E){var P=E.height/y.height;P>.5?P=.5-(P-.5):P=.5+(.5-P),this.setUVs(0,P,0,1+P,1,1+P,1,P)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,n.prototype.destroy.call(this),this}});o.exports=m},21213:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(77310),l=new d({Extends:u,initialize:function(n){n.topology=5,n.batchSize=x(n,"batchSize",256),u.call(this,n)}});o.exports=l},51212:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(77310),l=e(85060),h=e(18166),n=e(44775),r=new d({Extends:u,initialize:function(a){a.fragShader=x(a,"fragShader",l),a.vertShader=x(a,"vertShader",h),a.forceZero=!0,u.call(this,a)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0)}});o.exports=r},60848:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(2529),x=e(95723),u=e(56694),l=e(65246),h=e(37486),n=e(79060),r=e(72632),f=e(98921),a=e(99365),c=e(44775),p=new u({Extends:c,initialize:function(m){m.renderTarget=r(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),m.vertShader=r(m,"vertShader",a),m.shaders=r(m,"shaders",[{name:"Copy",fragShader:n},{name:"AddBlend",fragShader:d},{name:"LinearBlend",fragShader:f},{name:"ColorMatrix",fragShader:h}]),m.attributes=r(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],m.batchSize=1,c.call(this,m),this.colorMatrix=new l,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){c.prototype.boot.call(this);var v=this.shaders,m=this.renderTargets;this.copyShader=v[0],this.addShader=v[1],this.linearShader=v[2],this.colorMatrixShader=v[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(v,m,y,E,P){y===void 0&&(y=1),E===void 0&&(E=!0),P===void 0&&(P=!0);var S=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,v.texture),m?(S.viewport(0,0,m.width,m.height),S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0)):S.viewport(0,0,v.width,v.height),E&&(P?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blitFrame:function(v,m,y,E,P,S,w){y===void 0&&(y=1),E===void 0&&(E=!0),P===void 0&&(P=!0),S===void 0&&(S=!1),w===void 0&&(w=!1);var A=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",y),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,v.texture),v.height>m.height)A.viewport(0,0,v.width,v.height),this.setTargetUVs(v,m);else{var R=m.height-v.height;A.viewport(0,R,v.width,v.height)}if(A.bindFramebuffer(A.FRAMEBUFFER,m.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,m.texture,0),E&&(P?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),S){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(x.ERASE)}w&&this.flipY(),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),S&&this.renderer.setBlendMode(O),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(v,m,y,E,P,S,w,A){w===void 0&&(w=!0),A===void 0&&(A=!0);var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,v.framebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,v.texture,0),w&&(A?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,m.texture),R.copyTexSubImage2D(R.TEXTURE_2D,0,0,0,y,E,P,S),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null)},copyToGame:function(v){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,v.texture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6)},drawFrame:function(v,m,y,E){y===void 0&&(y=!0),E===void 0&&(E=this.colorMatrix);var P=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",E.getData()),this.set1f("uAlpha",E.alpha),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,v.texture),m?(P.viewport(0,0,m.width,m.height),P.bindFramebuffer(P.FRAMEBUFFER,m.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,m.texture,0)):P.viewport(0,0,v.width,v.height),y?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blendFrames:function(v,m,y,E,P,S){E===void 0&&(E=1),P===void 0&&(P=!0),S===void 0&&(S=this.linearShader);var w=this.gl;this.setShader(S),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",E),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,v.texture),w.activeTexture(w.TEXTURE1),w.bindTexture(w.TEXTURE_2D,m.texture),y?(w.bindFramebuffer(w.FRAMEBUFFER,y.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,y.texture,0),w.viewport(0,0,y.width,y.height)):w.viewport(0,0,v.width,v.height),P?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFramesAdditive:function(v,m,y,E,P){this.blendFrames(v,m,y,E,P,this.addShader)},clearFrame:function(v,m){m===void 0&&(m=!0);var y=this.gl;y.viewport(0,0,v.width,v.height),y.bindFramebuffer(y.FRAMEBUFFER,v.framebuffer),m?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT);var E=this.renderer.currentFramebuffer;y.bindFramebuffer(y.FRAMEBUFFER,E)},setUVs:function(v,m,y,E,P,S,w,A){var R=this.vertexViewF32;R[2]=v,R[3]=m,R[6]=y,R[7]=E,R[10]=P,R[11]=S,R[14]=v,R[15]=m,R[18]=P,R[19]=S,R[22]=w,R[23]=A},setTargetUVs:function(v,m){var y=m.height/v.height;y>.5?y=.5-(y-.5):y=.5+(.5-y),this.setUVs(0,y,0,1+y,1,1+y,1,y)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});o.exports=p},65641:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};o.exports=T},68726:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineafterflush"},67186:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebeforeflush"},22709:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinebind"},74469:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineboot"},93953:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinedestroy"},51687:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelinerebind"},25034:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pipelineresize"},18970:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AFTER_FLUSH:e(68726),BEFORE_FLUSH:e(67186),BIND:e(22709),BOOT:e(74469),DESTROY:e(93953),REBIND:e(51687),RESIZE:e(25034)}},32469:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(87751),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.amount=1},onPreRender:function(h,n){h=this.getController(h),this.set1f("amount",h.amount,n)}});o.exports=l},2134:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(88222),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(h){h=this.getController(h),this.set1f("strength",h.blurStrength),this.set3fv("color",h.glcolor)},onDraw:function(h){var n=this.getController(),r=this.fullFrame1,f=this.fullFrame2;this.copyFrame(h,f);for(var a=2/h.width*n.offsetX,c=2/h.height*n.offsetY,p=0;p<n.steps;p++)this.set2f("offset",a,0),this.copySprite(h,r),this.set2f("offset",0,c),this.copySprite(r,h);this.blendFrames(f,h,r,n.strength),this.copyToGame(r)}});o.exports=l},63377:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(35491),u=e(75568),l=e(44481),h=e(80486),n=new d({Extends:h,initialize:function(f){h.call(this,{game:f,shaders:[{name:"Gaussian5",fragShader:x},{name:"Gaussian9",fragShader:u},{name:"Gaussian13",fragShader:l}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(r){var f=this.getController(),a=this.gl,c=this.fullFrame1,p=a.getParameter(a.FRAMEBUFFER_BINDING);this.bind(this.activeShader),a.activeTexture(a.TEXTURE0),a.viewport(0,0,r.width,r.height),this.set1i("uMainSampler",0),this.set2f("resolution",r.width,r.height),this.set1f("strength",f.strength),this.set3fv("color",f.glcolor);for(var v=0;v<f.steps;v++)this.set2f("offset",f.x,0),this.copySprite(r,c),this.set2f("offset",0,f.y),this.copySprite(c,r);a.bindFramebuffer(a.FRAMEBUFFER,p),a.bindTexture(a.TEXTURE_2D,null),this.copyToGame(r)}});o.exports=n},49745:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(69960),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(h,n,r,f){h=this.getController(h),this.set1f("radius",h.radius,n),this.set1f("amount",h.amount,n),this.set1f("contrast",h.contrast,n),this.set1f("strength",h.strength,n),this.set2f("blur",h.blurX,h.blurY,n),this.setBoolean("isTiltShift",h.isTiltShift,n),r&&f&&this.set2f("resolution",r,f,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=l},4323:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(33754),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(h,n,r,f){h=this.getController(h),this.set1f("scale",h.scale,n),this.set1f("feather",h.feather,n),this.set1f("thickness",h.thickness,n),this.set3fv("color",h.glcolor,n),this.set4fv("backgroundColor",h.glcolor2,n),r&&f&&this.set2f("resolution",r,f,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=l},92066:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(80486),u=new d({Extends:x,initialize:function(h){x.call(this,{game:h})},onDraw:function(l){var h=this.fullFrame1;this.controller?this.manager.drawFrame(l,h,!0,this.controller):this.drawFrame(l,h),this.copyToGame(h)}});o.exports=u},89581:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(35668),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(h){var n=this.game.textures.getFrame(h);n&&(this.glTexture=n.glTexture)},onDraw:function(h){var n=this.getController(),r=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",n.x,n.y),this.bindTexture(n.glTexture,1),this.copySprite(h,r),this.copyToGame(r)}});o.exports=l},55084:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=e(69675),l=e(80486),h=e(75512),n=new d({Extends:l,initialize:function(f,a){var c=x(a,"quality",.1),p=x(a,"distance",10);l.call(this,{game:f,fragShader:h.setGlowQuality(u,f,c,p)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(r,f,a,c){r=this.getController(r),this.set1f("outerStrength",r.outerStrength,f),this.set1f("innerStrength",r.innerStrength,f),this.set4fv("glowColor",r.glcolor,f),this.setBoolean("knockout",r.knockout,f),a&&c&&this.set2f("resolution",a,c,f)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});o.exports=n},41653:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(90993),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(h,n){h=this.getController(h),this.set1f("alpha",h.alpha,n),this.set1i("size",h.size,n),this.set3fv("color1",h.glcolor1,n),this.set3fv("color2",h.glcolor2,n),this.set2f("positionFrom",h.fromX,h.fromY,n),this.set2f("positionTo",h.toX,h.toY,n)}});o.exports=l},73416:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(37945),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.amount=1},onPreRender:function(h,n,r,f){h=this.getController(h),this.set1f("amount",h.amount,n),r&&f&&this.set2f("resolution",r,f,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=l},58049:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(85718),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(h,n){h=this.getController(h);var r=h.samples;this.set1i("samples",r,n),this.set1f("intensity",h.intensity,n),this.set1f("decay",h.decay,n),this.set1f("power",h.power/r,n),this.set2f("lightPosition",h.x,h.y,n),this.set4fv("color",h.glcolor,n)}});o.exports=l},18026:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(13740),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(h,n,r,f){h=this.getController(h),this.setTime("time",n),this.set1f("speed",h.speed,n),this.set1f("lineWidth",h.lineWidth,n),this.set1f("gradient",h.gradient,n),this.setBoolean("reveal",h.reveal,n),r&&f&&this.set2f("resolution",r,f,n)},onDraw:function(h){this.set2f("resolution",h.width,h.height),this.bindAndDraw(h)}});o.exports=l},72381:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(80617),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(h,n){h=this.getController(h),this.set1f("radius",h.radius,n),this.set1f("strength",h.strength,n),this.set2f("position",h.x,h.y,n)}});o.exports=l},80542:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(62879),u=e(80486),l=new d({Extends:u,initialize:function(n){u.call(this,{game:n,fragShader:x}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(h,n){h=this.getController(h);var r=h.progress,f=h.wipeWidth,a=h.direction,c=h.axis;this.set4f("config",r,f,a,c,n),this.setBoolean("reveal",h.reveal,n)}});o.exports=l},58136:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={Barrel:e(32469),Bloom:e(2134),Blur:e(63377),Bokeh:e(49745),Circle:e(4323),ColorMatrix:e(92066),Displacement:e(89581),Glow:e(55084),Gradient:e(41653),Pixelate:e(73416),Shadow:e(58049),Shine:e(18026),Vignette:e(72381),Wipe:e(80542)};o.exports=d},62253:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65641),x=e(98611),u={FX:e(58136),BitmapMaskPipeline:e(5583),Events:e(18970),FXPipeline:e(81828),LightPipeline:e(66901),MobilePipeline:e(71264),MultiPipeline:e(77310),PointLightPipeline:e(10919),PostFXPipeline:e(80486),PreFXPipeline:e(87228),RopePipeline:e(21213),SinglePipeline:e(51212),UtilityPipeline:e(60848)};u=x(!1,u,d),o.exports=u},2529:o=>{o.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:o=>{o.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:o=>{o.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:o=>{o.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:o=>{o.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:o=>{o.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:o=>{o.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:o=>{o.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:o=>{o.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:o=>{o.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:o=>{o.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:o=>{o.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:o=>{o.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:o=>{o.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:o=>{o.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:o=>{o.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:o=>{o.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:o=>{o.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:o=>{o.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:o=>{o.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:o=>{o.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:o=>{o.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:o=>{o.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:o=>{o.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:o=>{o.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:o=>{o.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:o=>{o.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:o=>{o.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:o=>{o.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AddBlendFrag:e(2529),BitmapMaskFrag:e(91679),BitmapMaskVert:e(89053),ColorMatrixFrag:e(37486),CopyFrag:e(79060),FXBarrelFrag:e(87751),FXBloomFrag:e(88222),FXBlurHighFrag:e(44481),FXBlurLowFrag:e(35491),FXBlurMedFrag:e(75568),FXBokehFrag:e(69960),FXCircleFrag:e(33754),FXDisplacementFrag:e(35668),FXGlowFrag:e(69675),FXGradientFrag:e(90993),FXPixelateFrag:e(37945),FXShadowFrag:e(85718),FXShineFrag:e(13740),FXVignetteFrag:e(80617),FXWipeFrag:e(62879),LightFrag:e(65045),LinearBlendFrag:e(98921),MeshFrag:e(25005),MeshVert:e(94914),MobileFrag:e(11263),MobileVert:e(51852),MultiFrag:e(53787),MultiVert:e(15968),PointLightFrag:e(83327),PointLightVert:e(54677),PostFXFrag:e(12569),QuadVert:e(99365),SingleFrag:e(85060),SingleVert:e(18166)}},756:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(55301),x=e(56694),u=e(6659),l=e(40444),h=e(97081),n=e(74181),r=e(2893),f=e(9229),a=e(72283),c=e(74118),p=e(90881),v=e(84314),m=e(93736),y=e(47751),E=new x({Extends:u,initialize:function(S){u.call(this),this.game=S,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=d.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=d.CENTER.NO_CENTER,this.orientation=d.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:a,windowResize:a,fullScreenChange:a,fullScreenError:a}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(h.BOOT,this.boot,this)},boot:function(){var P=this.game;this.canvas=P.canvas,this.fullscreen=P.device.fullscreen,this.scaleMode!==d.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===d.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),P.events.on(h.PRE_STEP,this.step,this),P.events.once(h.READY,this.refresh,this),P.events.once(h.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(P){this.getParent(P),this.getParentBounds();var S=P.width,w=P.height,A=P.scaleMode,R=P.zoom,O=P.autoRound;if(typeof S=="string"){var F=this.parentSize.width;F===0&&(F=window.innerWidth);var L=parseInt(S,10)/100;S=Math.floor(F*L)}if(typeof w=="string"){var D=this.parentSize.height;D===0&&(D=window.innerHeight);var I=parseInt(w,10)/100;w=Math.floor(D*I)}this.scaleMode=A,this.autoRound=O,this.autoCenter=P.autoCenter,this.resizeInterval=P.resizeInterval,O&&(S=Math.floor(S),w=Math.floor(w)),this.gameSize.setSize(S,w),R===d.ZOOM.MAX_ZOOM&&(R=this.getMaxZoom()),this.zoom=R,R!==1&&(this._resetZoom=!0),this.baseSize.setSize(S,w),O&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),P.minWidth>0&&this.displaySize.setMin(P.minWidth*R,P.minHeight*R),P.maxWidth>0&&this.displaySize.setMax(P.maxWidth*R,P.maxHeight*R),this.displaySize.setSize(S,w),this.orientation=f(S,w)},getParent:function(P){var S=P.parent;if(S!==null){if(this.parent=r(S),this.parentIsWindow=this.parent===document.body,P.expandParent&&P.scaleMode!==d.SCALE_MODE.NONE){var w=this.parent.getBoundingClientRect();(this.parentIsWindow||w.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",w=this.parent.getBoundingClientRect(),!this.parentIsWindow&&w.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}P.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=r(P.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var P=this.parentSize,S=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(S.height=n(!0));var w=S.width,A=S.height;if(P.width!==w||P.height!==A)return P.setSize(w,A),!0;if(this.canvas){var R=this.canvasBounds,O=this.canvas.getBoundingClientRect();if(O.x!==R.x||O.y!==R.y)return!0}return!1},lockOrientation:function(P){var S=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return S?S.call(screen,P):!1},setParentSize:function(P,S){return this.parentSize.setSize(P,S),this.refresh()},setGameSize:function(P,S){var w=this.autoRound;w&&(P=Math.floor(P),S=Math.floor(S));var A=this.width,R=this.height;return this.gameSize.resize(P,S),this.baseSize.resize(P,S),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(P/S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(A,R)},resize:function(P,S){var w=this.zoom,A=this.autoRound;A&&(P=Math.floor(P),S=Math.floor(S));var R=this.width,O=this.height;this.gameSize.resize(P,S),this.baseSize.resize(P,S),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(P*w,S*w),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var F=this.canvas.style,L=P*w,D=S*w;return A&&(L=Math.floor(L),D=Math.floor(D)),(L!==P||D!==S)&&(F.width=L+"px",F.height=D+"px"),this.refresh(R,O)},setZoom:function(P){return this.zoom=P,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(P,S){P===void 0&&(P=this.width),S===void 0&&(S=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var A=this.canvas.style,R=w.style;R.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",R.marginLeft=A.marginLeft,R.marginTop=A.marginTop}return this.emit(l.RESIZE,this.gameSize,this.baseSize,this.displaySize,P,S),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var P=f(this.width,this.height);P!==this.orientation&&(this.orientation=P,this.emit(l.ORIENTATION_CHANGE,P))}},updateScale:function(){var P=this.canvas.style,S=this.gameSize.width,w=this.gameSize.height,A,R,O=this.zoom,F=this.autoRound;this.scaleMode===d.SCALE_MODE.NONE?(this.displaySize.setSize(S*O,w*O),A=this.displaySize.width,R=this.displaySize.height,F&&(A=Math.floor(A),R=Math.floor(R)),this._resetZoom&&(P.width=A+"px",P.height=R+"px",this._resetZoom=!1)):this.scaleMode===d.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),A=this.displaySize.width,R=this.displaySize.height,F&&(A=Math.floor(A),R=Math.floor(R)),this.canvas.width=A,this.canvas.height=R):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),A=this.displaySize.width,R=this.displaySize.height,F&&(A=Math.floor(A),R=Math.floor(R)),P.width=A+"px",P.height=R+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var P=v(this.parentSize.width,this.gameSize.width,0,!0),S=v(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(P,S),1)},updateCenter:function(){var P=this.autoCenter;if(P!==d.CENTER.NO_CENTER){var S=this.canvas,w=S.style,A=S.getBoundingClientRect(),R=A.width,O=A.height,F=Math.floor((this.parentSize.width-R)/2),L=Math.floor((this.parentSize.height-O)/2);P===d.CENTER.CENTER_HORIZONTALLY?L=0:P===d.CENTER.CENTER_VERTICALLY&&(F=0),w.marginLeft=F+"px",w.marginTop=L+"px"}},updateBounds:function(){var P=this.canvasBounds,S=this.canvas.getBoundingClientRect();P.x=S.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),P.y=S.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),P.width=S.width,P.height=S.height},transformX:function(P){return(P-this.canvasBounds.left)*this.displayScale.x},transformY:function(P){return(P-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(P){P===void 0&&(P={navigationUI:"hide"});var S=this.fullscreen;if(!S.available){this.emit(l.FULLSCREEN_UNSUPPORTED);return}if(!S.active){var w=this.getFullscreenTarget();S.keyboard?w[S.request](Element.ALLOW_KEYBOARD_INPUT):w[S.request](P)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(l.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(P){this.removeFullscreenTarget(),this.emit(l.FULLSCREEN_FAILED,P)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var P=document.createElement("div");P.style.margin="0",P.style.padding="0",P.style.width="100%",P.style.height="100%",this.fullscreenTarget=P,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var S=this.canvas.parentNode;S.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var P=this.fullscreenTarget;if(P&&P.parentNode){var S=P.parentNode;S.insertBefore(this.canvas,P),S.removeChild(P)}}},stopFullscreen:function(){var P=this.fullscreen;if(!P.available)return this.emit(l.FULLSCREEN_UNSUPPORTED),!1;P.active&&document[P.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(l.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(P){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(P)},startListeners:function(){var P=this,S=this.domlisteners;if(S.orientationChange=function(){P.updateBounds(),P._checkOrientation=!0,P.dirty=!0},S.windowResize=function(){P.updateBounds(),P.dirty=!0},window.addEventListener("orientationchange",S.orientationChange,!1),window.addEventListener("resize",S.windowResize,!1),this.fullscreen.available){S.fullScreenChange=function(A){return P.onFullScreenChange(A)},S.fullScreenError=function(A){return P.onFullScreenError(A)};var w=["webkit","moz",""];w.forEach(function(A){document.addEventListener(A+"fullscreenchange",S.fullScreenChange,!1),document.addEventListener(A+"fullscreenerror",S.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",S.fullScreenChange,!1),document.addEventListener("MSFullscreenError",S.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(P,S){P instanceof y||(S=P,P=void 0),S===void 0&&(S=new c);var w=this.baseSize,A=this.parentSize,R=this.canvasBounds,O=this.displayScale,F=R.x>=0?0:-(R.x*O.x),L=R.y>=0?0:-(R.y*O.y),D;A.width>=R.width?D=w.width:D=w.width-(R.width-A.width)*O.x;var I;return A.height>=R.height?I=w.height:I=w.height-(R.height-A.height)*O.y,S.setTo(F,L,D,I),P&&(S.width/=P.zoomX,S.height/=P.zoomY,S.centerX=P.centerX+P.scrollX,S.centerY=P.centerY+P.scrollY),S},step:function(P,S){!this.parent||(this._lastCheck+=S,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var P=this.domlisteners;window.removeEventListener("orientationchange",P.orientationChange,!1),window.removeEventListener("resize",P.windowResize,!1);var S=["webkit","moz",""];S.forEach(function(w){document.removeEventListener(w+"fullscreenchange",P.fullScreenChange,!1),document.removeEventListener(w+"fullscreenerror",P.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",P.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",P.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===d.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===d.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});o.exports=E},35098:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={CENTER:e(35098),ORIENTATION:e(53539),SCALE_MODE:e(12637),ZOOM:e(10217)};o.exports=d},82085:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="enterfullscreen"},11826:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenfailed"},56691:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="fullscreenunsupported"},34739:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="leavefullscreen"},26681:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="orientationchange"},11428:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resize"},40444:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ENTER_FULLSCREEN:e(82085),FULLSCREEN_FAILED:e(11826),FULLSCREEN_UNSUPPORTED:e(56691),LEAVE_FULLSCREEN:e(34739),ORIENTATION_CHANGE:e(26681),RESIZE:e(11428)}},86754:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(55301),u={Center:e(35098),Events:e(40444),Orientation:e(53539),ScaleManager:e(756),ScaleModes:e(12637),Zoom:e(10217)};u=d(!1,u,x.CENTER),u=d(!1,u,x.ORIENTATION),u=d(!1,u,x.SCALE_MODE),u=d(!1,u,x.ZOOM),o.exports=u},47736:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=e(40587),u=function(l){var h=l.game.config.defaultPhysicsSystem,n=d(l.settings,"physics",!1);if(!(!h&&!n)){var r=[];if(h&&r.push(x(h+"Physics")),n)for(var f in n)f=x(f.concat("Physics")),r.indexOf(f)===-1&&r.push(f);return r}};o.exports=u},91088:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u){var l=u.plugins.getDefaultScenePlugins(),h=d(u.settings,"plugins",!1);return Array.isArray(h)?h:l||[]};o.exports=x},90415:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};o.exports=T},87157:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(63946),u=new d({initialize:function(h){this.sys=new x(this,h),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});o.exports=u},13553:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(92980),u=e(7599),l=e(97081),h=e(10850),n=e(683),r=e(72283),f=e(87157),a=e(63946),c=new d({initialize:function(v,m){if(this.game=v,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++)this._pending.push({key:"default",scene:m[y],autoStart:y===0,data:{}})}v.events.once(l.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new f);var p,v,m,y;for(p=0;p<this._pending.length;p++){v=this._pending[p],m=v.key,y=v.scene;var E;y instanceof f?E=this.createSceneFromInstance(m,y):typeof y=="object"?E=this.createSceneFromObject(m,y):typeof y=="function"&&(E=this.createSceneFromFunction(m,y)),m=E.sys.settings.key,this.keys[m]=E,this.scenes.push(E),this._data[m]&&(E.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(v.autoStart=!0)),(v.autoStart||E.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)v=this._start[p],this.start(v);this._start.length=0}},processQueue:function(){var p=this._pending.length,v=this._queue.length;if(!(p===0&&v===0)){var m,y;if(p){for(m=0;m<p;m++)y=this._pending[m],this.add(y.key,y.scene,y.autoStart,y.data);for(m=0;m<this._start.length;m++)y=this._start[m],this.start(y);this._start.length=0,this._pending.length=0}for(m=0;m<this._queue.length;m++)y=this._queue[m],this[y.op](y.keyA,y.keyB);this._queue.length=0}},add:function(p,v,m,y){if(m===void 0&&(m=!1),y===void 0&&(y={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:v,autoStart:m,data:y}),this.isBooted||(this._data[p]={data:y}),null;p=this.getKey(p,v);var E;return v instanceof f?E=this.createSceneFromInstance(p,v):typeof v=="object"?(v.key=p,E=this.createSceneFromObject(p,v)):typeof v=="function"&&(E=this.createSceneFromFunction(p,v)),E.sys.settings.data=y,p=E.sys.settings.key,this.keys[p]=E,this.scenes.push(E),(m||E.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),E},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var v=this.getScene(p);if(!v||v.sys.isTransitioning())return this;var m=this.scenes.indexOf(v),y=v.sys.settings.key;m>-1&&(delete this.keys[y],this.scenes.splice(m,1),this._start.indexOf(y)>-1&&(m=this._start.indexOf(y),this._start.splice(m,1)),v.sys.destroy())}return this},bootScene:function(p){var v=p.sys,m=v.settings;v.sceneUpdate=r,p.init&&(p.init.call(p,m.data),m.status=x.INIT,m.isTransition&&v.events.emit(u.TRANSITION_INIT,m.transitionFrom,m.transitionDuration));var y;v.load&&(y=v.load,y.reset()),y&&p.preload?(p.preload.call(p),m.status=x.LOADING,y.once(n.COMPLETE,this.loadComplete,this),y.start()):this.create(p)},loadComplete:function(p){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,v){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var y=this.scenes[m].sys;y.settings.status>x.START&&y.settings.status<=x.RUNNING&&y.step(p,v),y.scenePlugin._target&&y.scenePlugin.step(p,v)}},render:function(p){for(var v=0;v<this.scenes.length;v++){var m=this.scenes[v].sys;m.settings.visible&&m.settings.status>=x.LOADING&&m.settings.status<x.SLEEPING&&m.render(p)}this.isProcessing=!1},create:function(p){var v=p.sys,m=v.settings;p.create&&(m.status=x.CREATING,p.create.call(p,m.data),m.status===x.DESTROYED)||(m.isTransition&&v.events.emit(u.TRANSITION_START,m.transitionFrom,m.transitionDuration),p.update&&(v.sceneUpdate=p.update),m.status=x.RUNNING,v.events.emit(u.CREATE,p))},createSceneFromFunction:function(p,v){var m=new v;if(m instanceof f){var y=m.sys.settings.key;if(y!==""&&(p=y),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,m)}else return m.sys=new a(m),m.sys.settings.key=p,m.sys.init(this.game),m},createSceneFromInstance:function(p,v){var m=v.sys.settings.key;return m===""&&(v.sys.settings.key=p),v.sys.init(this.game),v},createSceneFromObject:function(p,v){var m=new f(v),y=m.sys.settings.key;y!==""?p=y:m.sys.settings.key=p,m.sys.init(this.game);for(var E=["init","preload","create","update","render"],P=0;P<E.length;P++){var S=h(v,E[P],null);S&&(m[E[P]]=S)}if(v.hasOwnProperty("extend")){for(var w in v.extend)if(!!v.extend.hasOwnProperty(w)){var A=v.extend[w];w==="data"&&m.hasOwnProperty("data")&&typeof A=="object"?m.data.merge(A):w!=="sys"&&(m[w]=A)}}return m},getKey:function(p,v){if(p||(p="default"),typeof v=="function")return p;if(v instanceof f?p=v.sys.settings.key:typeof v=="object"&&v.hasOwnProperty("key")&&(p=v.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,v){p===void 0&&(p=!0),v===void 0&&(v=!1);for(var m=[],y=this.scenes,E=0;E<y.length;E++){var P=y[E];P&&(!p||p&&P.sys.isActive())&&m.push(P)}return v?m.reverse():m},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var v=0;v<this.scenes.length;v++)if(p===this.scenes[v])return p;return null},isActive:function(p){var v=this.getScene(p);return v?v.sys.isActive():null},isPaused:function(p){var v=this.getScene(p);return v?v.sys.isPaused():null},isVisible:function(p){var v=this.getScene(p);return v?v.sys.isVisible():null},isSleeping:function(p){var v=this.getScene(p);return v?v.sys.isSleeping():null},pause:function(p,v){var m=this.getScene(p);return m&&m.sys.pause(v),this},resume:function(p,v){var m=this.getScene(p);return m&&m.sys.resume(v),this},sleep:function(p,v){var m=this.getScene(p);return m&&!m.sys.isTransitioning()&&m.sys.sleep(v),this},wake:function(p,v){var m=this.getScene(p);return m&&m.sys.wake(v),this},run:function(p,v){var m=this.getScene(p);if(!m){for(var y=0;y<this._pending.length;y++)if(this._pending[y].key===p){this.queueOp("start",p,v);break}return this}m.sys.isSleeping()?m.sys.wake(v):m.sys.isPaused()?m.sys.resume(v):this.start(p,v)},start:function(p,v){if(!this.isBooted)return this._data[p]={autoStart:!0,data:v},this;var m=this.getScene(p);if(!m)return console.warn("Scene not found for key: "+p),this;var y=m.sys,E=y.settings.status;if(E>=x.START&&E<=x.CREATING)return this;if(E>=x.RUNNING&&E<=x.SLEEPING)y.shutdown(),y.sceneUpdate=r,y.start(v);else{y.sceneUpdate=r,y.start(v);var P;if(y.load&&(P=y.load),P&&y.settings.hasOwnProperty("pack")&&(P.reset(),P.addPack({payload:y.settings.pack})))return y.settings.status=x.LOADING,P.once(n.COMPLETE,this.payloadComplete,this),P.start(),this}return this.bootScene(m),this},stop:function(p,v){var m=this.getScene(p);if(m&&!m.sys.isTransitioning()&&m.sys.settings.status!==x.SHUTDOWN){var y=m.sys.load;y&&(y.off(n.COMPLETE,this.loadComplete,this),y.off(n.COMPLETE,this.payloadComplete,this)),m.sys.shutdown(v)}return this},switch:function(p,v){var m=this.getScene(p),y=this.getScene(v);return m&&y&&m!==y&&(this.sleep(p),this.isSleeping(v)?this.wake(v):this.start(v)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var v=this.getScene(p);return this.scenes.indexOf(v)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var v=this.getIndex(p);if(v!==-1&&v<this.scenes.length){var m=this.getScene(p);this.scenes.splice(v,1),this.scenes.push(m)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var v=this.getIndex(p);if(v!==-1&&v>0){var m=this.getScene(p);this.scenes.splice(v,1),this.scenes.unshift(m)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var v=this.getIndex(p);if(v>0){var m=v-1,y=this.getScene(p),E=this.getAt(m);this.scenes[v]=E,this.scenes[m]=y}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var v=this.getIndex(p);if(v<this.scenes.length-1){var m=v+1,y=this.getScene(p),E=this.getAt(m);this.scenes[v]=E,this.scenes[m]=y}}return this},moveAbove:function(p,v){if(p===v)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:v});else{var m=this.getIndex(p),y=this.getIndex(v);if(m!==-1&&y!==-1&&y<m){var E=this.getAt(y);this.scenes.splice(y,1),this.scenes.splice(m+(y>m),0,E)}}return this},moveBelow:function(p,v){if(p===v)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:v});else{var m=this.getIndex(p),y=this.getIndex(v);if(m!==-1&&y!==-1&&y>m){var E=this.getAt(y);this.scenes.splice(y,1),m===0?this.scenes.unshift(E):this.scenes.splice(m-(y<m),0,E)}}return this},queueOp:function(p,v,m){return this._queue.push({op:p,keyA:v,keyB:m}),this},swapPosition:function(p,v){if(p===v)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:v});else{var m=this.getIndex(p),y=this.getIndex(v);if(m!==y&&m!==-1&&y!==-1){var E=this.getAt(m);this.scenes[m]=this.scenes[y],this.scenes[y]=E}}return this},dump:function(){for(var p=[],v=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var y=this.scenes[m].sys,E=y.settings.visible&&(y.settings.status===x.RUNNING||y.settings.status===x.PAUSED)?"[*] ":"[-] ";E+=y.settings.key+" ("+v[y.settings.status]+")",p.push(E)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var v=this.scenes[p].sys;v.destroy()}this.systemScene.sys.destroy(),this.update=r,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});o.exports=c},64051:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(7599),l=e(72632),h=e(91963),n=new x({initialize:function(f){this.scene=f,this.systems=f.sys,this.settings=f.sys.settings,this.key=f.sys.settings.key,this.manager=f.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,f.sys.events.once(u.BOOT,this.boot,this),f.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},start:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",r,f),this},restart:function(r){var f=this.key;return this.manager.queueOp("stop",f),this.manager.queueOp("start",f,r),this},transition:function(r){r===void 0&&(r={});var f=l(r,"target",!1),a=this.manager.getScene(f);if(!f||!this.checkValidTransition(a))return!1;var c=l(r,"duration",1e3);this._elapsed=0,this._target=a,this._duration=c,this._willSleep=l(r,"sleep",!1),this._willRemove=l(r,"remove",!1);var p=l(r,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=l(r,"onUpdateScope",this.scene));var v=l(r,"allowInput",!1);this.settings.transitionAllowInput=v;var m=a.sys.settings;m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=c,m.transitionAllowInput=v,l(r,"moveAbove",!1)?this.manager.moveAbove(this.key,f):l(r,"moveBelow",!1)&&this.manager.moveBelow(this.key,f),a.sys.isSleeping()?a.sys.wake(l(r,"data")):this.manager.start(f,l(r,"data"));var y=l(r,"onStart",null),E=l(r,"onStartScope",this.scene);return y&&y.call(E,this.scene,a,c),this.systems.events.emit(u.TRANSITION_OUT,a,c),!0},checkValidTransition:function(r){return!(!r||r.sys.isActive()||r.sys.isTransitioning()||r===this.scene||this.systems.isTransitioning())},step:function(r,f){this._elapsed+=f,this.transitionProgress=d(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var r=this._target.sys,f=this._target.sys.settings;r.events.emit(u.TRANSITION_COMPLETE,this.scene),f.isTransition=!1,f.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(r,f,a,c){return this.manager.add(r,f,a,c)},launch:function(r,f){return r&&r!==this.key&&this.manager.queueOp("start",r,f),this},run:function(r,f){return r&&r!==this.key&&this.manager.queueOp("run",r,f),this},pause:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("pause",r,f),this},resume:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("resume",r,f),this},sleep:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("sleep",r,f),this},wake:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("wake",r,f),this},switch:function(r){return r!==this.key&&this.manager.queueOp("switch",this.key,r),this},stop:function(r,f){return r===void 0&&(r=this.key),this.manager.queueOp("stop",r,f),this},setActive:function(r,f,a){f===void 0&&(f=this.key);var c=this.manager.getScene(f);return c&&c.sys.setActive(r,a),this},setVisible:function(r,f){f===void 0&&(f=this.key);var a=this.manager.getScene(f);return a&&a.sys.setVisible(r),this},isSleeping:function(r){return r===void 0&&(r=this.key),this.manager.isSleeping(r)},isActive:function(r){return r===void 0&&(r=this.key),this.manager.isActive(r)},isPaused:function(r){return r===void 0&&(r=this.key),this.manager.isPaused(r)},isVisible:function(r){return r===void 0&&(r=this.key),this.manager.isVisible(r)},swapPosition:function(r,f){return f===void 0&&(f=this.key),r!==f&&this.manager.swapPosition(r,f),this},moveAbove:function(r,f){return f===void 0&&(f=this.key),r!==f&&this.manager.moveAbove(r,f),this},moveBelow:function(r,f){return f===void 0&&(f=this.key),r!==f&&this.manager.moveBelow(r,f),this},remove:function(r){return r===void 0&&(r=this.key),this.manager.remove(r),this},moveUp:function(r){return r===void 0&&(r=this.key),this.manager.moveUp(r),this},moveDown:function(r){return r===void 0&&(r=this.key),this.manager.moveDown(r),this},bringToTop:function(r){return r===void 0&&(r=this.key),this.manager.bringToTop(r),this},sendToBack:function(r){return r===void 0&&(r=this.key),this.manager.sendToBack(r),this},get:function(r){return this.manager.getScene(r)},getStatus:function(r){var f=this.manager.getScene(r);if(f)return f.sys.getStatus()},getIndex:function(r){return r===void 0&&(r=this.key),this.manager.getIndex(r)},shutdown:function(){var r=this.systems.events;r.off(u.SHUTDOWN,this.shutdown,this),r.off(u.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});h.register("ScenePlugin",n,"scenePlugin"),o.exports=n},36765:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92980),x=e(10850),u=e(30657),l=e(90415),h={create:function(n){return typeof n=="string"?n={key:n}:n===void 0&&(n={}),{status:d.PENDING,key:x(n,"key",""),active:x(n,"active",!1),visible:x(n,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:x(n,"pack",!1),cameras:x(n,"cameras",null),map:x(n,"map",u(l,x(n,"mapAdd",{}))),physics:x(n,"physics",{}),loader:x(n,"loader",{}),plugins:x(n,"plugins",!1),input:x(n,"input",{})}}};o.exports=h},63946:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(92980),u=e(18360),l=e(7599),h=e(47736),n=e(91088),r=e(72283),f=e(36765),a=new d({initialize:function(p,v){this.scene=p,this.game,this.renderer,this.config=v,this.settings=f.create(v),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=r},init:function(c){this.settings.status=x.INIT,this.sceneUpdate=r,this.game=c,this.renderer=c.renderer,this.canvas=c.canvas,this.context=c.context;var p=c.plugins;this.plugins=p,p.addToScene(this,u.Global,[u.CoreScene,n(this),h(this)]),this.events.emit(l.BOOT,this),this.settings.isBooted=!0},step:function(c,p){var v=this.events;v.emit(l.PRE_UPDATE,c,p),v.emit(l.UPDATE,c,p),this.sceneUpdate.call(this.scene,c,p),v.emit(l.POST_UPDATE,c,p)},render:function(c){var p=this.displayList;p.depthSort(),this.events.emit(l.PRE_RENDER,c),this.cameras.render(c,p),this.events.emit(l.RENDER,c)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(c){var p=this.settings,v=this.getStatus();return v!==x.CREATING&&v!==x.RUNNING?console.warn("Cannot pause non-running Scene",p.key):this.settings.active&&(p.status=x.PAUSED,p.active=!1,this.events.emit(l.PAUSE,this,c)),this},resume:function(c){var p=this.events,v=this.settings;return this.settings.active||(v.status=x.RUNNING,v.active=!0,p.emit(l.RESUME,this,c)),this},sleep:function(c){var p=this.settings,v=this.getStatus();return v!==x.CREATING&&v!==x.RUNNING?console.warn("Cannot sleep non-running Scene",p.key):(p.status=x.SLEEPING,p.active=!1,p.visible=!1,this.events.emit(l.SLEEP,this,c)),this},wake:function(c){var p=this.events,v=this.settings;return v.status=x.RUNNING,v.active=!0,v.visible=!0,p.emit(l.WAKE,this,c),v.isTransition&&p.emit(l.TRANSITION_WAKE,v.transitionFrom,v.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var c=this.settings.status;return c>x.PENDING&&c<=x.RUNNING},isSleeping:function(){return this.settings.status===x.SLEEPING},isActive:function(){return this.settings.status===x.RUNNING},isPaused:function(){return this.settings.status===x.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(c){return this.settings.visible=c,this},setActive:function(c,p){return c?this.resume(p):this.pause(p)},start:function(c){var p=this.events,v=this.settings;c&&(v.data=c),v.status=x.START,v.active=!0,v.visible=!0,p.emit(l.START,this),p.emit(l.READY,this,c)},shutdown:function(c){var p=this.events,v=this.settings;p.off(l.TRANSITION_INIT),p.off(l.TRANSITION_START),p.off(l.TRANSITION_COMPLETE),p.off(l.TRANSITION_OUT),v.status=x.SHUTDOWN,v.active=!1,v.visible=!1,p.emit(l.SHUTDOWN,this,c)},destroy:function(){var c=this.events,p=this.settings;p.status=x.DESTROYED,p.active=!1,p.visible=!1,c.emit(l.DESTROY,this),c.removeAllListeners();for(var v=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],m=0;m<v.length;m++)this[v[m]]=null}});o.exports=a},92980:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};o.exports=T},31803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addedtoscene"},94817:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="boot"},28977:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="create"},91959:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},363:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},15643:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="postupdate"},17058:o=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="prerender"},77125:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="preupdate"},76018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},28620:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removedfromscene"},41538:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="render"},34268:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},2342:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="shutdown"},96541:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="sleep"},74244:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},17046:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioncomplete"},13637:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitioninit"},14733:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionout"},33899:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionstart"},52418:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="transitionwake"},31735:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},8470:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="wake"},7599:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADDED_TO_SCENE:e(31803),BOOT:e(94817),CREATE:e(28977),DESTROY:e(91959),PAUSE:e(363),POST_UPDATE:e(15643),PRE_RENDER:e(17058),PRE_UPDATE:e(77125),READY:e(76018),REMOVED_FROM_SCENE:e(28620),RENDER:e(41538),RESUME:e(34268),SHUTDOWN:e(2342),SLEEP:e(96541),START:e(74244),TRANSITION_COMPLETE:e(17046),TRANSITION_INIT:e(13637),TRANSITION_OUT:e(14733),TRANSITION_START:e(33899),TRANSITION_WAKE:e(52418),UPDATE:e(31735),WAKE:e(8470)}},20436:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(92980),x=e(98611),u={Events:e(7599),GetPhysicsPlugins:e(47736),GetScenePlugins:e(91088),SceneManager:e(13553),ScenePlugin:e(64051),Settings:e(36765),Systems:e(63946)};u=x(!1,u,d),o.exports=u},25798:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(76038),l=e(98611),h=e(72283),n=new d({Extends:x,initialize:function(f,a,c){x.call(this),this.manager=f,this.key=a,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=l(this.config,c),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(r){return!r||!r.name||typeof r.name!="string"?!1:this.markers[r.name]?(console.error("addMarker "+r.name+" already exists in Sound"),!1):(r=l(!0,{name:"",start:0,duration:this.totalDuration-(r.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},r),this.markers[r.name]=r,!0)},updateMarker:function(r){return!r||!r.name||typeof r.name!="string"?!1:this.markers[r.name]?(this.markers[r.name]=l(!0,this.markers[r.name],r),!0):(console.warn("Audio Marker: "+r.name+" missing in Sound: "+this.key),!1)},removeMarker:function(r){var f=this.markers[r];return f?(this.markers[r]=null,f):null},play:function(r,f){if(r===void 0&&(r=""),typeof r=="object"&&(f=r,r=""),typeof r!="string")return!1;if(!r)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[r])return console.warn("Marker: "+r+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[r],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=l(this.currentConfig,f),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:h,calculateRate:function(){var r=1.0005777895065548,f=this.currentConfig.detune+this.manager.detune,a=Math.pow(r,f);this.totalRate=this.currentConfig.rate*this.manager.rate*a},destroy:function(){this.pendingRemove||(this.emit(u.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});o.exports=n},12486:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(32742),u=e(6659),l=e(76038),h=e(97081),n=e(71608),r=e(51463),f=e(72283),a=e(93736),c=new d({Extends:u,initialize:function(v){u.call(this),this.game=v,this.jsonCache=v.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new a,v.events.on(h.BLUR,this.onGameBlur,this),v.events.on(h.FOCUS,this.onGameFocus,this),v.events.on(h.PRE_STEP,this.update,this),v.events.once(h.DESTROY,this.destroy,this)},add:f,addAudioSprite:function(p,v){v===void 0&&(v={});var m=this.add(p,v);m.spritemap=this.jsonCache.get(p).spritemap;for(var y in m.spritemap)if(!!m.spritemap.hasOwnProperty(y)){var E=x(v),P=m.spritemap[y];E.loop=P.hasOwnProperty("loop")?P.loop:!1,m.addMarker({name:y,start:P.start,duration:P.end-P.start,config:E})}return m},get:function(p){return r(this.sounds,"key",p)},getAll:function(p){return p?n(this.sounds,"key",p):n(this.sounds)},getAllPlaying:function(){return n(this.sounds,"isPlaying",!0)},play:function(p,v){var m=this.add(p);return m.once(l.COMPLETE,m.destroy,m),v?v.name?(m.addMarker(v),m.play(v.name)):m.play(v):m.play()},playAudioSprite:function(p,v,m){var y=this.addAudioSprite(p);return y.once(l.COMPLETE,y.destroy,y),y.play(v,m)},remove:function(p){var v=this.sounds.indexOf(p);return v!==-1?(p.destroy(),this.sounds.splice(v,1),!0):!1},removeAll:function(){this.sounds.forEach(function(p){p.destroy()}),this.sounds.length=0},removeByKey:function(p){for(var v=0,m=this.sounds.length-1;m>=0;m--){var y=this.sounds[m];y.key===p&&(y.destroy(),this.sounds.splice(m,1),v++)}return v},pauseAll:function(){this.forEachActiveSound(function(p){p.pause()}),this.emit(l.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(p){p.resume()}),this.emit(l.RESUME_ALL,this)},setListenerPosition:f,stopAll:function(){this.forEachActiveSound(function(p){p.stop()}),this.emit(l.STOP_ALL,this)},stopByKey:function(p){var v=0;return this.getAll(p).forEach(function(m){m.stop()&&v++}),v},unlock:f,onBlur:f,onFocus:f,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(p,v){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(l.UNLOCKED,this));for(var m=this.sounds.length-1;m>=0;m--)this.sounds[m].pendingRemove&&this.sounds.splice(m,1);this.sounds.forEach(function(y){y.update(p,v)})},destroy:function(){this.game.events.off(h.BLUR,this.onGameBlur,this),this.game.events.off(h.FOCUS,this.onGameFocus,this),this.game.events.off(h.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(p,v){var m=this;this.sounds.forEach(function(y,E){y&&!y.pendingRemove&&p.call(v||m,y,E,m.sounds)})},setRate:function(p){return this.rate=p,this},rate:{get:function(){return this._rate},set:function(p){this._rate=p,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(l.GLOBAL_RATE,this,p)}},setDetune:function(p){return this.detune=p,this},detune:{get:function(){return this._detune},set:function(p){this._detune=p,this.forEachActiveSound(function(v){v.calculateRate()}),this.emit(l.GLOBAL_DETUNE,this,p)}}});o.exports=c},84191:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(27622),x=e(17546),u=e(55491),l={create:function(h){var n=h.config.audio,r=h.device.audio;return n.noAudio||!r.webAudio&&!r.audioData?new x(h):r.webAudio&&!n.disableWebAudio?new u(h):new d(h)}};o.exports=l},77578:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},19679:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decodedall"},56951:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="decoded"},16436:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="destroy"},55154:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"},57818:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="detune"},57890:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"},83022:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"},99170:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"},64289:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="looped"},67214:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},53128:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="mute"},73078:o=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pan"},76763:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pauseall"},88426:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},13765:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="play"},80291:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="rate"},11124:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resumeall"},55382:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},71157:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="seek"},31776:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stopall"},39450:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},21939:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="unlocked"},33019:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="volume"},76038:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={COMPLETE:e(77578),DECODED:e(56951),DECODED_ALL:e(19679),DESTROY:e(16436),DETUNE:e(55154),GLOBAL_DETUNE:e(57818),GLOBAL_MUTE:e(57890),GLOBAL_RATE:e(83022),GLOBAL_VOLUME:e(99170),LOOP:e(67214),LOOPED:e(64289),MUTE:e(53128),PAN:e(73078),PAUSE_ALL:e(76763),PAUSE:e(88426),PLAY:e(13765),RATE:e(80291),RESUME_ALL:e(11124),RESUME:e(55382),SEEK:e(71157),STOP_ALL:e(31776),STOP:e(39450),UNLOCKED:e(21939),VOLUME:e(33019)}},34350:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),x=e(56694),u=e(76038),l=e(82897),h=new x({Extends:d,initialize:function(r,f,a){if(a===void 0&&(a={}),this.tags=r.game.cache.audio.get(f),!this.tags)throw new Error('No cached audio asset with key "'+f);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,d.call(this,r,f,a)},play:function(n,r){return this.manager.isLocked(this,"play",[n,r])||!d.prototype.play.call(this,n,r)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!d.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(u.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!d.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(u.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var n=this.currentConfig.seek,r=this.currentConfig.delay,f=(this.currentMarker?this.currentMarker.start:0)+n;return this.previousTime=f,this.audio.currentTime=f,this.applyConfig(),r===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+r*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(r.dataset.used==="false")return r.dataset.used="true",this.audio=r,!0}if(!this.manager.override)return!1;var f=[];this.manager.forEachActiveSound(function(c){c.key===this.key&&c.audio&&f.push(c)},this),f.sort(function(c,p){return c.loop===p.loop?p.seek/p.duration-c.seek/c.duration:c.loop?1:-1});var a=f[0];return this.audio=a.audio,a.reset(),a.audio=null,a.startTime=0,a.previousTime=0,!0},playCatchPromise:function(){var n=this.audio.play();n&&n.catch(function(r){console.warn(r)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){d.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(n){if(!!this.isPlaying){if(this.startTime>0){this.startTime<n-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,n-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var r=this.currentMarker?this.currentMarker.start:0,f=r+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop)a>=f-this.manager.loopEndOffset?(this.audio.currentTime=r+Math.max(0,a-f),a=this.audio.currentTime):a<r&&(this.audio.currentTime+=r,a=this.audio.currentTime),a<this.previousTime&&this.emit(u.LOOPED,this);else if(a>=f){this.reset(),this.stopAndReleaseAudioTag(),this.emit(u.COMPLETE,this);return}this.previousTime=a}},destroy:function(){d.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=l(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){d.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(n){this.currentConfig.mute=n,!this.manager.isLocked(this,"mute",n)&&(this.updateMute(),this.emit(u.MUTE,this,n))}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.currentConfig.volume},set:function(n){this.currentConfig.volume=n,!this.manager.isLocked(this,"volume",n)&&(this.updateVolume(),this.emit(u.VOLUME,this,n))}},setVolume:function(n){return this.volume=n,this},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,!this.manager.isLocked(this,u.RATE,n)&&(this.calculateRate(),this.emit(u.RATE,this,n))}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,!this.manager.isLocked(this,u.DETUNE,n)&&(this.calculateRate(),this.emit(u.DETUNE,this,n))}},setDetune:function(n){return this.detune=n,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.isLocked(this,"seek",n)||this.startTime>0||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.isPlaying?(this.previousTime=n,this.audio.currentTime=n):this.isPaused&&(this.currentConfig.seek=n),this.emit(u.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,!this.manager.isLocked(this,"loop",n)&&(this.audio&&(this.audio.loop=n),this.emit(u.LOOP,this,n))}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.currentConfig.pan},set:function(n){this.currentConfig.pan=n,this.emit(u.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});o.exports=h},27622:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12486),x=e(56694),u=e(76038),l=e(34350),h=new x({Extends:d,initialize:function(r){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,d.call(this,r)},add:function(n,r){var f=new l(this,n,r);return this.sounds.push(f),f},unlock:function(){this.locked=!1;var n=this;if(this.game.cache.audio.entries.each(function(c,p){for(var v=0;v<p.length;v++)if(p[v].dataset.locked==="true")return n.locked=!0,!1;return!0}),!!this.locked){var r=!1,f=function(){r=!0},a=function(){if(r){r=!1;return}document.body.removeEventListener("touchmove",f),document.body.removeEventListener("touchend",a);var c=[];if(n.game.cache.audio.entries.each(function(v,m){for(var y=0;y<m.length;y++){var E=m[y];E.dataset.locked==="true"&&c.push(E)}return!0}),c.length!==0){var p=c[c.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,c.forEach(function(v){v.dataset.locked="false"}),n.unlocked=!0},c.forEach(function(v){v.load()})}};this.once(u.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var c=this.lockedActionsQueue.shift();c.sound[c.prop].apply?c.sound[c.prop].apply(c.sound,c.value||[]):c.sound[c.prop]=c.value}},this),document.body.addEventListener("touchmove",f,!1),document.body.addEventListener("touchend",a,!1)}},onBlur:function(){this.forEachActiveSound(function(n){n.isPlaying&&(this.onBlurPausedSounds.push(n),n.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(n){n.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){d.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(n,r,f){return n.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:n,prop:r,value:f}),!0):!1},setMute:function(n){return this.mute=n,this},mute:{get:function(){return this._mute},set:function(n){this._mute=n,this.forEachActiveSound(function(r){r.updateMute()}),this.emit(u.GLOBAL_MUTE,this,n)}},setVolume:function(n){return this.volume=n,this},volume:{get:function(){return this._volume},set:function(n){this._volume=n,this.forEachActiveSound(function(r){r.updateVolume()}),this.emit(u.GLOBAL_VOLUME,this,n)}}});o.exports=h},56751:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={SoundManagerCreator:e(84191),Events:e(76038),BaseSound:e(25798),BaseSoundManager:e(12486),WebAudioSound:e(96008),WebAudioSoundManager:e(55491),HTML5AudioSound:e(34350),HTML5AudioSoundManager:e(27622),NoAudioSound:e(38662),NoAudioSoundManager:e(17546)}},38662:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),x=e(56694),u=e(6659),l=e(98611),h=e(72283),n=function(){return!1},r=function(){return null},f=function(){return this},a=new x({Extends:u,initialize:function(p,v,m){m===void 0&&(m={}),u.call(this),this.manager=p,this.key=v,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},m),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:n,updateMarker:n,removeMarker:r,play:n,pause:n,resume:n,stop:n,setMute:f,setVolume:f,setRate:f,setDetune:f,setSeek:f,setLoop:f,setPan:f,applyConfig:r,resetConfig:r,update:h,calculateRate:r,destroy:function(){d.prototype.destroy.call(this)}});o.exports=a},17546:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12486),x=e(56694),u=e(6659),l=e(38662),h=e(72283),n=new x({Extends:u,initialize:function(f){u.call(this),this.game=f,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(r,f){var a=new l(this,r,f);return this.sounds.push(a),a},addAudioSprite:function(r,f){var a=this.add(r,f);return a.spritemap={},a},get:function(r){return d.prototype.get.call(this,r)},getAll:function(r){return d.prototype.getAll.call(this,r)},play:function(r,f){return!1},playAudioSprite:function(r,f,a){return!1},remove:function(r){return d.prototype.remove.call(this,r)},removeAll:function(){return d.prototype.removeAll.call(this)},removeByKey:function(r){return d.prototype.removeByKey.call(this,r)},stopByKey:function(r){return d.prototype.stopByKey.call(this,r)},onBlur:h,onFocus:h,onGameBlur:h,onGameFocus:h,pauseAll:h,resumeAll:h,stopAll:h,update:h,setRate:h,setDetune:h,setMute:h,setVolume:h,unlock:h,forEachActiveSound:function(r,f){d.prototype.forEachActiveSound.call(this,r,f)},destroy:function(){d.prototype.destroy.call(this)}});o.exports=n},96008:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(25798),x=e(56694),u=e(76038),l=e(72632),h=new x({Extends:d,initialize:function(r,f,a){if(a===void 0&&(a={}),this.audioBuffer=r.game.cache.audio.get(f),!this.audioBuffer)throw new Error('Audio key "'+f+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=r.context.createGain(),this.volumeNode=r.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),r.context.createPanner&&(this.spatialNode=r.context.createPanner(),this.volumeNode.connect(this.spatialNode)),r.context.createStereoPanner?(this.pannerNode=r.context.createStereoPanner(),r.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(r.destination)):r.context.createPanner?this.spatialNode.connect(r.destination):this.volumeNode.connect(r.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,d.call(this,r,f,a)},play:function(n,r){return d.prototype.play.call(this,n,r)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(u.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(u.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!d.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(u.RESUME,this),!0)},stop:function(){return d.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(u.STOP,this),!0):!1},createAndStartBufferSource:function(){var n=this.currentConfig.seek,r=this.currentConfig.delay,f=this.manager.context.currentTime+r,a=(this.currentMarker?this.currentMarker.start:0)+n,c=this.duration-n;this.playTime=f-n,this.startTime=f,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,f),Math.max(0,a),Math.max(0,c)),this.resetConfig()},createAndStartLoopBufferSource:function(){var n=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,f=this.duration;this.loopTime=n,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,n),Math.max(0,r),Math.max(0,f))},createBufferSource:function(){var n=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(f){f.target===n.source&&(n.currentConfig.loop?n.hasLooped=!0:n.hasEnded=!0)},r},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var n=this.currentConfig.source;if(n&&this.manager.context.createPanner){var r=this.spatialNode;r.panningModel=l(n,"panningModel","equalpower"),r.distanceModel=l(n,"distanceModel","inverse"),r.orientationX.value=l(n,"orientationX",0),r.orientationY.value=l(n,"orientationY",0),r.orientationZ.value=l(n,"orientationZ",-1),r.refDistance=l(n,"refDistance",1),r.maxDistance=l(n,"maxDistance",1e4),r.rolloffFactor=l(n,"rolloffFactor",1),r.coneInnerAngle=l(n,"coneInnerAngle",360),r.coneOuterAngle=l(n,"coneOuterAngle",0),r.coneOuterGain=l(n,"coneOuterGain",0),this.spatialSource=l(n,"follow",null),this.spatialSource||(r.positionX.value=l(n,"x",0),r.positionY.value=l(n,"y",0),r.positionZ.value=l(n,"z",0))}d.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(n){this.spatialNode&&(this.spatialNode.positionX.value=n)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(n){this.spatialNode&&(this.spatialNode.positionY.value=n)}},update:function(){if(this.isPlaying&&this.spatialSource){var n=l(this.spatialSource,"x",null),r=l(this.spatialSource,"y",null);n&&n!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=n),r&&r!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=r)}this.hasEnded?(this.hasEnded=!1,d.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(u.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(u.LOOPED,this))},destroy:function(){this.pendingRemove||(d.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){d.prototype.calculateRate.call(this);var n=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,n),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,n)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var n=0,r=0;r<this.rateUpdates.length;r++){var f=0;r<this.rateUpdates.length-1?f=this.rateUpdates[r+1].time:f=this.manager.context.currentTime-this.playTime,n+=(f-this.rateUpdates[r].time)*this.rateUpdates[r].rate}return n},getLoopTime:function(){for(var n=0,r=0;r<this.rateUpdates.length-1;r++)n+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var f=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+f.time+(this.duration-n)/f.rate},rate:{get:function(){return this.currentConfig.rate},set:function(n){this.currentConfig.rate=n,this.calculateRate(),this.emit(u.RATE,this,n)}},setRate:function(n){return this.rate=n,this},detune:{get:function(){return this.currentConfig.detune},set:function(n){this.currentConfig.detune=n,this.calculateRate(),this.emit(u.DETUNE,this,n)}},setDetune:function(n){return this.detune=n,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(n){this.currentConfig.mute=n,this.muteNode.gain.setValueAtTime(n?0:1,0),this.emit(u.MUTE,this,n)}},setMute:function(n){return this.mute=n,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(n){this.currentConfig.volume=n,this.volumeNode.gain.setValueAtTime(n,0),this.emit(u.VOLUME,this,n)}},setVolume:function(n){return this.volume=n,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(n){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(n=Math.min(Math.max(0,n),this.duration),this.currentConfig.seek=n,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(u.SEEK,this,n))}},setSeek:function(n){return this.seek=n,this},loop:{get:function(){return this.currentConfig.loop},set:function(n){this.currentConfig.loop=n,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),n&&this.createAndStartLoopBufferSource()),this.emit(u.LOOP,this,n)}},setLoop:function(n){return this.loop=n,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(n){this.currentConfig.pan=n,this.pannerNode&&this.pannerNode.pan.setValueAtTime(n,this.manager.context.currentTime),this.emit(u.PAN,this,n)}},setPan:function(n){return this.pan=n,this}});o.exports=h},55491:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82329),x=e(12486),u=e(56694),l=e(76038),h=e(97081),n=e(96008),r=e(72632),f=new u({Extends:x,initialize:function(c){this.context=this.createAudioContext(c),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),x.call(this,c),this.locked&&c.isBooted?this.unlock():c.events.once(h.BOOT,this.unlock,this)},createAudioContext:function(a){var c=a.config.audio;if(c.context)return c.context.resume(),c.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(a){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=a,this.masterMuteNode=a.createGain(),this.masterVolumeNode=a.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(a.destination),this.destination=this.masterMuteNode,this},add:function(a,c){var p=new n(this,a,c);return this.sounds.push(p),p},decodeAudio:function(a,c){var p;Array.isArray(a)?p=a:p=[{key:a,data:c}];for(var v=this.game.cache.audio,m=p.length,y=0;y<p.length;y++){var E=p[y],P=E.key,S=E.data;typeof S=="string"&&(S=d(S));var w=function(R,O){v.add(R,O),this.emit(l.DECODED,R),m--,m===0&&this.emit(l.DECODED_ALL)}.bind(this,P),A=function(R,O){console.error("Error decoding audio: "+R+" - ",O?O.message:""),m--,m===0&&this.emit(l.DECODED_ALL)}.bind(this,P);this.context.decodeAudioData(S,w,A)}},setListenerPosition:function(a,c){return a===void 0&&(a=this.game.scale.width/2),c===void 0&&(c=this.game.scale.height/2),this.listenerPosition.set(a,c),this},unlock:function(){var a=this,c=document.body,p=function v(){if(a.context&&c){var m=c.removeEventListener;a.context.resume().then(function(){m("touchstart",v),m("touchend",v),m("click",v),m("keydown",v),a.unlocked=!0},function(){m("touchstart",v),m("touchend",v),m("click",v),m("keydown",v)})}};c&&(c.addEventListener("touchstart",p,!1),c.addEventListener("touchend",p,!1),c.addEventListener("click",p,!1),c.addEventListener("keydown",p,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var a=this.context;a&&!this.locked&&(a.state==="suspended"||a.state==="interrupted")&&a.resume()},update:function(a,c){var p=this.context.listener;if(p&&p.positionX!==void 0){var v=r(this.listenerPosition,"x",null),m=r(this.listenerPosition,"y",null);v&&v!==this._spatialx&&(this._spatialx=p.positionX.value=v),m&&m!==this._spatialy&&(this._spatialy=p.positionY.value=m)}x.prototype.update.call(this,a,c),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var a=this;this.context.close().then(function(){a.context=null})}x.prototype.destroy.call(this)},setMute:function(a){return this.mute=a,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(a){this.masterMuteNode.gain.setValueAtTime(a?0:1,0),this.emit(l.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(a){this.masterVolumeNode.gain.setValueAtTime(a,0),this.emit(l.GLOBAL_VOLUME,this,a)}}});o.exports=f},71207:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(59959),x=e(56694),u=e(72283),l=e(17922),h=new x({initialize:function(r){this.parent=r,this.list=[],this.position=0,this.addCallback=u,this.removeCallback=u,this._sortKey=""},add:function(n,r){return r?d.Add(this.list,n):d.Add(this.list,n,0,this.addCallback,this)},addAt:function(n,r,f){return f?d.AddAt(this.list,n,r):d.AddAt(this.list,n,r,0,this.addCallback,this)},getAt:function(n){return this.list[n]},getIndex:function(n){return this.list.indexOf(n)},sort:function(n,r){return n?(r===void 0&&(r=function(f,a){return f[n]-a[n]}),l(this.list,r),this):this},getByName:function(n){return d.GetFirst(this.list,"name",n)},getRandom:function(n,r){return d.GetRandom(this.list,n,r)},getFirst:function(n,r,f,a){return d.GetFirst(this.list,n,r,f,a)},getAll:function(n,r,f,a){return d.GetAll(this.list,n,r,f,a)},count:function(n,r){return d.CountAllMatching(this.list,n,r)},swap:function(n,r){d.Swap(this.list,n,r)},moveTo:function(n,r){return d.MoveTo(this.list,n,r)},moveAbove:function(n,r){return d.MoveAbove(this.list,n,r)},moveBelow:function(n,r){return d.MoveBelow(this.list,n,r)},remove:function(n,r){return r?d.Remove(this.list,n):d.Remove(this.list,n,this.removeCallback,this)},removeAt:function(n,r){return r?d.RemoveAt(this.list,n):d.RemoveAt(this.list,n,this.removeCallback,this)},removeBetween:function(n,r,f){return f?d.RemoveBetween(this.list,n,r):d.RemoveBetween(this.list,n,r,this.removeCallback,this)},removeAll:function(n){for(var r=this.list.length;r--;)this.remove(this.list[r],n);return this},bringToTop:function(n){return d.BringToTop(this.list,n)},sendToBack:function(n){return d.SendToBack(this.list,n)},moveUp:function(n){return d.MoveUp(this.list,n),n},moveDown:function(n){return d.MoveDown(this.list,n),n},reverse:function(){return this.list.reverse(),this},shuffle:function(){return d.Shuffle(this.list),this},replace:function(n,r){return d.Replace(this.list,n,r)},exists:function(n){return this.list.indexOf(n)>-1},setAll:function(n,r,f,a){return d.SetAll(this.list,n,r,f,a),this},each:function(n,r){for(var f=[null],a=2;a<arguments.length;a++)f.push(arguments[a]);for(a=0;a<this.list.length;a++)f[0]=this.list[a],n.apply(r,f)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});o.exports=h},33885:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l){if(this.entries={},this.size=0,Array.isArray(l))for(var h=0;h<l.length;h++)this.set(l[h][0],l[h][1])},set:function(u,l){return this.has(u)||this.size++,this.entries[u]=l,this},get:function(u){if(this.has(u))return this.entries[u]},getArray:function(){var u=[],l=this.entries;for(var h in l)u.push(l[h]);return u},has:function(u){return this.entries.hasOwnProperty(u)},delete:function(u){return this.has(u)&&(delete this.entries[u],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(u){delete this.entries[u]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var u=[],l=this.entries;for(var h in l)u.push(l[h]);return u},dump:function(){var u=this.entries;console.group("Map");for(var l in u)console.log(l,u[l]);console.groupEnd()},each:function(u){var l=this.entries;for(var h in l)if(u(h,l[h])===!1)break;return this},contains:function(u){var l=this.entries;for(var h in l)if(l[h]===u)return!0;return!1},merge:function(u,l){l===void 0&&(l=!1);var h=this.entries,n=u.entries;for(var r in n)h.hasOwnProperty(r)&&l?h[r]=n[r]:this.set(r,n[r]);return this}});o.exports=x},74623:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(36716),l=new d({Extends:x,initialize:function(){x.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(h){return this._active.indexOf(h)>-1},isPending:function(h){return this._toProcess>0&&this._pending.indexOf(h)>-1},isDestroying:function(h){return this._destroy.indexOf(h)>-1},add:function(h){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(h),this._toProcess++),h},remove:function(h){if(this.isPending(h)){var n=this._pending,r=n.indexOf(h);r!==-1&&n.splice(r,1)}else this.isActive(h)&&(this._destroy.push(h),this._toProcess++);return h},removeAll:function(){for(var h=this._active,n=this._destroy,r=h.length;r--;)n.push(h[r]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var h=this._destroy,n=this._active,r,f;for(r=0;r<h.length;r++){f=h[r];var a=n.indexOf(f);a!==-1&&(n.splice(a,1),this.emit(u.PROCESS_QUEUE_REMOVE,f))}for(h.length=0,h=this._pending,r=0;r<h.length;r++)f=h[r],(!this.checkQueue||this.checkQueue&&n.indexOf(f)===-1)&&(n.push(f),this.emit(u.PROCESS_QUEUE_ADD,f));return h.length=0,this._toProcess=0,n},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});o.exports=l},68687:(o,T,e)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53466);function x(S){if(!(this instanceof x))return new x(S);this._maxEntries=Math.max(4,S||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}x.prototype={all:function(){return this._all(this.data,[])},search:function(S){var w=this.data,A=[],R=this.toBBox;if(!y(S,w))return A;for(var O=[],F,L,D,I;w;){for(F=0,L=w.children.length;F<L;F++)D=w.children[F],I=w.leaf?R(D):D,y(S,I)&&(w.leaf?A.push(D):m(S,I)?this._all(D,A):O.push(D));w=O.pop()}return A},collides:function(S){var w=this.data,A=this.toBBox;if(!y(S,w))return!1;for(var R=[],O,F,L,D;w;){for(O=0,F=w.children.length;O<F;O++)if(L=w.children[O],D=w.leaf?A(L):L,y(S,D)){if(w.leaf||m(S,D))return!0;R.push(L)}w=R.pop()}return!1},load:function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var w=0,A=S.length;w<A;w++)this.insert(S[w]);return this}var R=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=R;else if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var O=this.data;this.data=R,R=O}this._insert(R,this.data.height-R.height-1,!0)}return this},insert:function(S){return S&&this._insert(S,this.data.height-1),this},clear:function(){return this.data=E([]),this},remove:function(S,w){if(!S)return this;for(var A=this.data,R=this.toBBox(S),O=[],F=[],L,D,I,B;A||O.length;){if(A||(A=O.pop(),D=O[O.length-1],L=F.pop(),B=!0),A.leaf&&(I=u(S,A.children,w),I!==-1))return A.children.splice(I,1),O.push(A),this._condense(O),this;!B&&!A.leaf&&m(A,R)?(O.push(A),F.push(L),L=0,D=A,A=A.children[0]):D?(L++,A=D.children[L],B=!1):A=null}return this},toBBox:function(S){return S},compareMinX:r,compareMinY:f,toJSON:function(){return this.data},fromJSON:function(S){return this.data=S,this},_all:function(S,w){for(var A=[];S;)S.leaf?w.push.apply(w,S.children):A.push.apply(A,S.children),S=A.pop();return w},_build:function(S,w,A,R){var O=A-w+1,F=this._maxEntries,L;if(O<=F)return L=E(S.slice(w,A+1)),l(L,this.toBBox),L;R||(R=Math.ceil(Math.log(O)/Math.log(F)),F=Math.ceil(O/Math.pow(F,R-1))),L=E([]),L.leaf=!1,L.height=R;var D=Math.ceil(O/F),I=D*Math.ceil(Math.sqrt(F)),B,V,Y,W;for(P(S,w,A,I,this.compareMinX),B=w;B<=A;B+=I)for(Y=Math.min(B+I-1,A),P(S,B,Y,D,this.compareMinY),V=B;V<=Y;V+=D)W=Math.min(V+D-1,Y),L.children.push(this._build(S,V,W,R-1));return l(L,this.toBBox),L},_chooseSubtree:function(S,w,A,R){for(var O,F,L,D,I,B,V,Y;R.push(w),!(w.leaf||R.length-1===A);){for(V=Y=1/0,O=0,F=w.children.length;O<F;O++)L=w.children[O],I=a(L),B=p(S,L)-I,B<Y?(Y=B,V=I<V?I:V,D=L):B===Y&&I<V&&(V=I,D=L);w=D||w.children[0]}return w},_insert:function(S,w,A){var R=this.toBBox,O=A?S:R(S),F=[],L=this._chooseSubtree(O,this.data,w,F);for(L.children.push(S),n(L,O);w>=0&&F[w].children.length>this._maxEntries;)this._split(F,w),w--;this._adjustParentBBoxes(O,F,w)},_split:function(S,w){var A=S[w],R=A.children.length,O=this._minEntries;this._chooseSplitAxis(A,O,R);var F=this._chooseSplitIndex(A,O,R),L=E(A.children.splice(F,A.children.length-F));L.height=A.height,L.leaf=A.leaf,l(A,this.toBBox),l(L,this.toBBox),w?S[w-1].children.push(L):this._splitRoot(A,L)},_splitRoot:function(S,w){this.data=E([S,w]),this.data.height=S.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},_chooseSplitIndex:function(S,w,A){var R,O,F,L,D,I,B,V;for(I=B=1/0,R=w;R<=A-w;R++)O=h(S,0,R,this.toBBox),F=h(S,R,A,this.toBBox),L=v(O,F),D=a(O)+a(F),L<I?(I=L,V=R,B=D<B?D:B):L===I&&D<B&&(B=D,V=R);return V},_chooseSplitAxis:function(S,w,A){var R=S.leaf?this.compareMinX:r,O=S.leaf?this.compareMinY:f,F=this._allDistMargin(S,w,A,R),L=this._allDistMargin(S,w,A,O);F<L&&S.children.sort(R)},_allDistMargin:function(S,w,A,R){S.children.sort(R);var O=this.toBBox,F=h(S,0,w,O),L=h(S,A-w,A,O),D=c(F)+c(L),I,B;for(I=w;I<A-w;I++)B=S.children[I],n(F,S.leaf?O(B):B),D+=c(F);for(I=A-w-1;I>=w;I--)B=S.children[I],n(L,S.leaf?O(B):B),D+=c(L);return D},_adjustParentBBoxes:function(S,w,A){for(var R=A;R>=0;R--)n(w[R],S)},_condense:function(S){for(var w=S.length-1,A;w>=0;w--)S[w].children.length===0?w>0?(A=S[w-1].children,A.splice(A.indexOf(S[w]),1)):this.clear():l(S[w],this.toBBox)},compareMinX:function(S,w){return S.left-w.left},compareMinY:function(S,w){return S.top-w.top},toBBox:function(S){return{minX:S.left,minY:S.top,maxX:S.right,maxY:S.bottom}}};function u(S,w,A){if(!A)return w.indexOf(S);for(var R=0;R<w.length;R++)if(A(S,w[R]))return R;return-1}function l(S,w){h(S,0,S.children.length,w,S)}function h(S,w,A,R,O){O||(O=E(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var F=w,L;F<A;F++)L=S.children[F],n(O,S.leaf?R(L):L);return O}function n(S,w){return S.minX=Math.min(S.minX,w.minX),S.minY=Math.min(S.minY,w.minY),S.maxX=Math.max(S.maxX,w.maxX),S.maxY=Math.max(S.maxY,w.maxY),S}function r(S,w){return S.minX-w.minX}function f(S,w){return S.minY-w.minY}function a(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function c(S){return S.maxX-S.minX+(S.maxY-S.minY)}function p(S,w){return(Math.max(w.maxX,S.maxX)-Math.min(w.minX,S.minX))*(Math.max(w.maxY,S.maxY)-Math.min(w.minY,S.minY))}function v(S,w){var A=Math.max(S.minX,w.minX),R=Math.max(S.minY,w.minY),O=Math.min(S.maxX,w.maxX),F=Math.min(S.maxY,w.maxY);return Math.max(0,O-A)*Math.max(0,F-R)}function m(S,w){return S.minX<=w.minX&&S.minY<=w.minY&&w.maxX<=S.maxX&&w.maxY<=S.maxY}function y(S,w){return w.minX<=S.maxX&&w.minY<=S.maxY&&w.maxX>=S.minX&&w.maxY>=S.minY}function E(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function P(S,w,A,R,O){for(var F=[w,A],L;F.length;)A=F.pop(),w=F.pop(),!(A-w<=R)&&(L=w+Math.ceil((A-w)/R/2)*R,d(S,L,w,A,O),F.push(w,L,L,A))}o.exports=x},58403:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l){if(this.entries=[],Array.isArray(l))for(var h=0;h<l.length;h++)this.set(l[h])},set:function(u){return this.entries.indexOf(u)===-1&&this.entries.push(u),this},get:function(u,l){for(var h=0;h<this.entries.length;h++){var n=this.entries[h];if(n[u]===l)return n}},getArray:function(){return this.entries.slice(0)},delete:function(u){var l=this.entries.indexOf(u);return l>-1&&this.entries.splice(l,1),this},dump:function(){console.group("Set");for(var u=0;u<this.entries.length;u++){var l=this.entries[u];console.log(l)}console.groupEnd()},each:function(u,l){var h,n=this.entries.slice(),r=n.length;if(l)for(h=0;h<r&&u.call(l,n[h],h)!==!1;h++);else for(h=0;h<r&&u(n[h],h)!==!1;h++);return this},iterate:function(u,l){var h,n=this.entries.length;if(l)for(h=0;h<n&&u.call(l,this.entries[h],h)!==!1;h++);else for(h=0;h<n&&u(this.entries[h],h)!==!1;h++);return this},iterateLocal:function(u){var l,h=[];for(l=1;l<arguments.length;l++)h.push(arguments[l]);var n=this.entries.length;for(l=0;l<n;l++){var r=this.entries[l];r[u].apply(r,h)}return this},clear:function(){return this.entries.length=0,this},contains:function(u){return this.entries.indexOf(u)>-1},union:function(u){var l=new x;return u.entries.forEach(function(h){l.set(h)}),this.entries.forEach(function(h){l.set(h)}),l},intersect:function(u){var l=new x;return this.entries.forEach(function(h){u.contains(h)&&l.set(h)}),l},difference:function(u){var l=new x;return this.entries.forEach(function(h){u.contains(h)||l.set(h)}),l},size:{get:function(){return this.entries.length},set:function(u){return u<this.entries.length?this.entries.length=u:this.entries.length}}});o.exports=x},90881:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82897),x=e(56694),u=e(84314),l=e(93736),h=new x({initialize:function(r,f,a,c){r===void 0&&(r=0),f===void 0&&(f=r),a===void 0&&(a=0),c===void 0&&(c=null),this._width=r,this._height=f,this._parent=c,this.aspectMode=a,this.aspectRatio=f===0?1:r/f,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new l},setAspectMode:function(n){return n===void 0&&(n=0),this.aspectMode=n,this.setSize(this._width,this._height)},setSnap:function(n,r){return n===void 0&&(n=0),r===void 0&&(r=n),this.snapTo.set(n,r),this.setSize(this._width,this._height)},setParent:function(n){return this._parent=n,this.setSize(this._width,this._height)},setMin:function(n,r){return n===void 0&&(n=0),r===void 0&&(r=n),this.minWidth=d(n,0,this.maxWidth),this.minHeight=d(r,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(n,r){return n===void 0&&(n=Number.MAX_VALUE),r===void 0&&(r=n),this.maxWidth=d(n,this.minWidth,Number.MAX_VALUE),this.maxHeight=d(r,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(n,r){switch(n===void 0&&(n=0),r===void 0&&(r=n),this.aspectMode){case h.NONE:this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(u(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case h.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case h.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(u(r,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case h.FIT:this.constrain(n,r,!0);break;case h.ENVELOP:this.constrain(n,r,!1);break}return this},setAspectRatio:function(n){return this.aspectRatio=n,this.setSize(this._width,this._height)},resize:function(n,r){return this._width=this.getNewWidth(u(n,this.snapTo.x)),this._height=this.getNewHeight(u(r,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(n,r){return r===void 0&&(r=!0),n=d(n,this.minWidth,this.maxWidth),r&&this._parent&&n>this._parent.width&&(n=Math.max(this.minWidth,this._parent.width)),n},getNewHeight:function(n,r){return r===void 0&&(r=!0),n=d(n,this.minHeight,this.maxHeight),r&&this._parent&&n>this._parent.height&&(n=Math.max(this.minHeight,this._parent.height)),n},constrain:function(n,r,f){n===void 0&&(n=0),r===void 0&&(r=n),f===void 0&&(f=!0),n=this.getNewWidth(n),r=this.getNewHeight(r);var a=this.snapTo,c=r===0?1:n/r;return f&&this.aspectRatio>c||!f&&this.aspectRatio<c?(n=u(n,a.x),r=n/this.aspectRatio,a.y>0&&(r=u(r,a.y),n=r*this.aspectRatio)):(f&&this.aspectRatio<c||!f&&this.aspectRatio>c)&&(r=u(r,a.y),n=r*this.aspectRatio,a.x>0&&(n=u(n,a.x),r=n*(1/this.aspectRatio))),this._width=n,this._height=r,this},fitTo:function(n,r){return this.constrain(n,r,!0)},envelop:function(n,r){return this.constrain(n,r,!1)},setWidth:function(n){return this.setSize(n,this._height)},setHeight:function(n){return this.setSize(this._width,n)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(n){n&&n.style&&(n.style.width=this._width+"px",n.style.height=this._height+"px")},copy:function(n){return n.setAspectMode(this.aspectMode),n.aspectRatio=this.aspectRatio,n.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(n){this.setSize(n,this._height)}},height:{get:function(){return this._height},set:function(n){this.setSize(this._width,n)}}});h.NONE=0,h.WIDTH_CONTROLS_HEIGHT=1,h.HEIGHT_CONTROLS_WIDTH=2,h.FIT=3,h.ENVELOP=4,o.exports=h},94160:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="add"},95393:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="remove"},36716:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={PROCESS_QUEUE_ADD:e(94160),PROCESS_QUEUE_REMOVE:e(95393)}},20010:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Events:e(36716),List:e(71207),Map:e(33885),ProcessQueue:e(74623),RTree:e(68687),Set:e(58403),Size:e(90881)}},17487:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82897),u=e(27119),l=e(86459),h=e(28621),n=e(31673),r=new d({Extends:n,initialize:function(a,c,p,v,m){n.call(this,a,c,p,v,m),this.add("__BASE",0,0,0,v,m),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=v,this.height=m,this.imageData=this.context.getImageData(0,0,v,m),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===l.WEBGL&&this.refresh(),this},draw:function(f,a,c,p){return p===void 0&&(p=!0),this.context.drawImage(c,f,a),p&&this.update(),this},drawFrame:function(f,a,c,p,v){c===void 0&&(c=0),p===void 0&&(p=0),v===void 0&&(v=!0);var m=this.manager.getFrame(f,a);if(m){var y=m.canvasData,E=m.cutWidth,P=m.cutHeight,S=m.source.resolution;this.context.drawImage(m.source.image,y.x,y.y,E,P,c,p,E/S,P/S),v&&this.update()}return this},setPixel:function(f,a,c,p,v,m){m===void 0&&(m=255),f=Math.abs(Math.floor(f)),a=Math.abs(Math.floor(a));var y=this.getIndex(f,a);if(y>-1){var E=this.context.getImageData(f,a,1,1);E.data[0]=c,E.data[1]=p,E.data[2]=v,E.data[3]=m,this.context.putImageData(E,f,a)}return this},putData:function(f,a,c,p,v,m,y){return p===void 0&&(p=0),v===void 0&&(v=0),m===void 0&&(m=f.width),y===void 0&&(y=f.height),this.context.putImageData(f,a,c,p,v,m,y),this},getData:function(f,a,c,p){f=x(Math.floor(f),0,this.width-1),a=x(Math.floor(a),0,this.height-1),c=x(c,1,this.width-f),p=x(p,1,this.height-a);var v=this.context.getImageData(f,a,c,p);return v},getPixel:function(f,a,c){c||(c=new u);var p=this.getIndex(f,a);if(p>-1){var v=this.data,m=v[p+0],y=v[p+1],E=v[p+2],P=v[p+3];c.setTo(m,y,E,P)}return c},getPixels:function(f,a,c,p){f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=this.width),p===void 0&&(p=c),f=Math.abs(Math.round(f)),a=Math.abs(Math.round(a));for(var v=x(f,0,this.width),m=x(f+c,0,this.width),y=x(a,0,this.height),E=x(a+p,0,this.height),P=new u,S=[],w=y;w<E;w++){for(var A=[],R=v;R<m;R++)P=this.getPixel(R,w,P),A.push({x:R,y:w,color:P.color,alpha:P.alphaGL});S.push(A)}return S},getIndex:function(f,a){return f=Math.abs(Math.round(f)),a=Math.abs(Math.round(a)),f<this.width&&a<this.height?(f+a*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(f,a,c,p,v){return f===void 0&&(f=0),a===void 0&&(a=0),c===void 0&&(c=this.width),p===void 0&&(p=this.height),v===void 0&&(v=!0),this.context.clearRect(f,a,c,p),v&&this.update(),this},setSize:function(f,a){return a===void 0&&(a=f),(f!==this.width||a!==this.height)&&(this.canvas.width=f,this.canvas.height=a,this._source.width=f,this._source.height=a,this._source.isPowerOf2=h(f,a),this.frames.__BASE.setSize(f,a,0,0),this.width=f,this.height=a,this.refresh()),this},destroy:function(){n.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});o.exports=r},845:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(95723),x=e(51052),u=e(61068),l=e(56694),h=e(86459),n=e(82047),r=e(72632),f=e(65641),a=e(37410),c=e(31673),p=e(75512),v=new l({Extends:c,initialize:function(y,E,P,S){P===void 0&&(P=256),S===void 0&&(S=256),this.type="DynamicTexture";var w=y.game.renderer,A=w&&w.type===h.CANVAS,R=A?u.create2D(this,P,S):[this];c.call(this,y,E,R,P,S),this.add("__BASE",0,0,0,P,S),this.renderer=w,this.isDrawing=!1,this.canvas=A?R:null,this.context=A?R.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new x(0,0,P,S).setScene(y.game.scene.systemScene,!1),this.renderTarget=A?null:new a(w,P,S,1,0,!1,!0,!0,!1),this.pipeline=A?null:w.pipelines.get(f.SINGLE_PIPELINE),this.setSize(P,S)},setSize:function(m,y){y===void 0&&(y=m);var E=this.get(),P=E.source;if(m!==this.width||y!==this.height){this.canvas&&(this.canvas.width=m,this.canvas.height=y);var S=this.renderTarget;S&&(S.resize(m,y),E.glTexture=S.texture,P.isRenderTexture=!0,P.isGLTexture=!0,P.glTexture=S.texture,P.glTexture.flipY=!0),this.camera.setSize(m,y),P.width=m,P.height=y,E.setSize(m,y),this.width=m,this.height=y}else{var w=this.getSourceImage();E.cutX+m>w.width&&(m=w.width-E.cutX),E.cutY+y>w.height&&(y=w.height-E.cutY),E.setSize(m,y,E.cutX,E.cutY)}return this},setIsSpriteTexture:function(m){return this.isSpriteTexture=m,this},fill:function(m,y,E,P,S,w){var A=this.camera,R=this.renderer;y===void 0&&(y=1),E===void 0&&(E=0),P===void 0&&(P=0),S===void 0&&(S=this.width),w===void 0&&(w=this.height);var O=m>>16&255,F=m>>8&255,L=m&255,D=this.renderTarget;if(A.preRender(),D){D.bind(!0);var I=this.pipeline.manager.set(this.pipeline),B=R.width/D.width,V=R.height/D.height;I.drawFillRect(E*B,P*V,S*B,w*V,p.getTintFromFloats(L/255,F/255,O/255,1),y),D.unbind(!0)}else{var Y=this.context;R.setContext(Y),Y.globalCompositeOperation="source-over",Y.fillStyle="rgba("+O+","+F+","+L+","+y+")",Y.fillRect(E,P,S,w),R.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var m=this.context,y=this.renderTarget;y?y.clear():m&&(m.save(),m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,this.width,this.height),m.restore()),this.dirty=!1}return this},stamp:function(m,y,E,P,S){E===void 0&&(E=0),P===void 0&&(P=0);var w=r(S,"alpha",1),A=r(S,"tint",16777215),R=r(S,"angle",0),O=r(S,"rotation",0),F=r(S,"scale",1),L=r(S,"scaleX",F),D=r(S,"scaleY",F),I=r(S,"originX",.5),B=r(S,"originY",.5),V=r(S,"blendMode",0),Y=r(S,"erase",!1),W=r(S,"skipBatch",!1),$=this.manager.resetStamp(w,A);return $.setAngle(0),R!==0?$.setAngle(R):O!==0&&$.setRotation(O),$.setScale(L,D),$.setTexture(m,y),$.setOrigin(I,B),$.setBlendMode(V),Y&&(this._eraseMode=!0),W?this.batchGameObject($,E,P):this.draw($,E,P),Y&&(this._eraseMode=!1),this},erase:function(m,y,E){return this._eraseMode=!0,this.draw(m,y,E),this._eraseMode=!1,this},draw:function(m,y,E,P,S){return this.beginDraw(),this.batchDraw(m,y,E,P,S),this.endDraw(),this},drawFrame:function(m,y,E,P,S,w){return this.beginDraw(),this.batchDrawFrame(m,y,E,P,S,w),this.endDraw(),this},repeat:function(m,y,E,P,S,w,A,R,O){if(E===void 0&&(E=0),P===void 0&&(P=0),S===void 0&&(S=this.width),w===void 0&&(w=this.height),A===void 0&&(A=1),R===void 0&&(R=16777215),O===void 0&&(O=!1),m instanceof n?y=m:y=this.manager.getFrame(m,y),!y)return this;var F=this.manager.resetStamp(A,R);F.setFrame(y),F.setOrigin(0);var L=y.width,D=y.height;S=Math.floor(S),w=Math.floor(w);var I=Math.ceil(S/L),B=Math.ceil(w/D),V=I*L-S,Y=B*D-w;V>0&&(V=L-V),Y>0&&(Y=D-Y),E<0&&(I+=Math.ceil(Math.abs(E)/L)),P<0&&(B+=Math.ceil(Math.abs(P)/D));var W=E,$=P,N=!1,U=this.manager.stampCrop.setTo(0,0,L,D);O||this.beginDraw();for(var b=0;b<B;b++){if($+D<0){$+=D;continue}for(var G=0;G<I;G++){if(N=!1,W+L<0){W+=L;continue}else W<0&&(N=!0,U.width=L+W,U.x=L-U.width);$<0&&(N=!0,U.height=D+$,U.y=D-U.height),V>0&&G===I-1&&(N=!0,U.width=V),Y>0&&b===B-1&&(N=!0,U.height=Y),N&&F.setCrop(U),this.batchGameObject(F,W,$),F.isCropped=!1,U.setTo(0,0,L,D),W+=L}W=E,$+=D}return O||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var m=this.camera,y=this.renderer,E=this.renderTarget;m.preRender(),E?y.beginCapture(E.width,E.height):y.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(m,y,E,P,S){return Array.isArray(m)||(m=[m]),this.batchList(m,y,E,P,S),this},batchDrawFrame:function(m,y,E,P,S,w){E===void 0&&(E=0),P===void 0&&(P=0),S===void 0&&(S=1),w===void 0&&(w=16777215);var A=this.manager.getFrame(m,y);return A&&(this.renderTarget?this.pipeline.batchTextureFrame(A,E,P,w,S,this.camera.matrix,null):this.batchTextureFrame(A,E,P,S,w)),this},endDraw:function(m){if(m===void 0&&(m=this._eraseMode),this.isDrawing){var y=this.renderer,E=this.renderTarget;if(E){var P=y.endCapture(),S=y.pipelines.setUtility();S.blitFrame(P,E,1,!1,!1,m,this.isSpriteTexture),y.resetScissor(),y.resetViewport()}else y.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(m,y,E,P,S){var w=m.length;if(w!==0)for(var A=0;A<w;A++){var R=m[A];!R||R===this||(R.renderWebGL||R.renderCanvas?this.batchGameObject(R,y,E):R.isParent||R.list?this.batchGroup(R.getChildren(),y,E):typeof R=="string"?this.batchTextureFrameKey(R,null,y,E,P,S):R instanceof n?this.batchTextureFrame(R,y,E,P,S):Array.isArray(R)&&this.batchList(R,y,E,P,S))}},batchGroup:function(m,y,E){y===void 0&&(y=0),E===void 0&&(E=0);for(var P=0;P<m.length;P++){var S=m[P];S.willRender(this.camera)&&this.batchGameObject(S,S.x+y,S.y+E)}},batchGameObject:function(m,y,E){y===void 0&&(y=m.x),E===void 0&&(E=m.y);var P=m.x,S=m.y,w=this.camera,A=this.renderer,R=this._eraseMode,O=m.mask;if(m.setPosition(y,E),this.canvas){if(R){var F=m.blendMode;m.blendMode=d.ERASE}O&&O.preRenderCanvas(A,m,w),m.renderCanvas(A,m,w,null),O&&O.postRenderCanvas(A,m,w),R&&(m.blendMode=F)}else A&&(O&&O.preRenderWebGL(A,m,w),R||A.setBlendMode(m.blendMode),m.renderWebGL(A,m,w),O&&O.postRenderWebGL(A,w,this.renderTarget));m.setPosition(P,S)},batchTextureFrameKey:function(m,y,E,P,S,w){var A=this.manager.getFrame(m,y);A&&this.batchTextureFrame(A,E,P,S,w)},batchTextureFrame:function(m,y,E,P,S){y===void 0&&(y=0),E===void 0&&(E=0),P===void 0&&(P=1),S===void 0&&(S=16777215);var w=this.camera.matrix,A=this.renderTarget;if(A)this.pipeline.batchTextureFrame(m,y,E,S,P,w,null);else{var R=this.context,O=m.canvasData,F=m.source.image;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=P,w.setToContext(R),O.width>0&&O.height>0&&R.drawImage(F,O.x,O.y,O.width,O.height,y,E,O.width,O.height),R.restore()}},snapshotArea:function(m,y,E,P,S,w,A){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!1,m,y,E,P,w,A):this.renderer.snapshotCanvas(this.canvas,S,!1,m,y,E,P,w,A),this},snapshot:function(m,y,E){return this.snapshotArea(0,0,this.width,this.height,m,y,E)},snapshotPixel:function(m,y,E){return this.snapshotArea(m,y,1,1,E,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(m,y,E,P){var S=this.manager.resetStamp();S.setTexture(this),S.setOrigin(0),S.renderWebGL(m,S,E,P)},renderCanvas:function(){},preDestroy:function(){u.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});o.exports=v},82047:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82897),u=e(98611),l=new d({initialize:function(n,r,f,a,c,p,v){this.texture=n,this.name=r,this.source=n.source[f],this.sourceIndex=f,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,v,a,c)},setSize:function(h,n,r,f){r===void 0&&(r=0),f===void 0&&(f=0),this.cutX=r,this.cutY=f,this.cutWidth=h,this.cutHeight=n,this.width=h,this.height=n,this.halfWidth=Math.floor(h*.5),this.halfHeight=Math.floor(n*.5),this.centerX=Math.floor(h/2),this.centerY=Math.floor(n/2);var a=this.data,c=a.cut;c.x=r,c.y=f,c.w=h,c.h=n,c.r=r+h,c.b=f+n,a.sourceSize.w=h,a.sourceSize.h=n,a.spriteSourceSize.w=h,a.spriteSourceSize.h=n,a.radius=.5*Math.sqrt(h*h+n*n);var p=a.drawImage;return p.x=r,p.y=f,p.width=h,p.height=n,this.updateUVs()},setTrim:function(h,n,r,f,a,c){var p=this.data,v=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=h,p.sourceSize.h=n,v.x=r,v.y=f,v.w=a,v.h=c,v.r=r+a,v.b=f+c,this.x=r,this.y=f,this.width=a,this.height=c,this.halfWidth=a*.5,this.halfHeight=c*.5,this.centerX=Math.floor(a/2),this.centerY=Math.floor(c/2),this.updateUVs()},setCropUVs:function(h,n,r,f,a,c,p){var v=this.cutX,m=this.cutY,y=this.cutWidth,E=this.cutHeight,P=this.realWidth,S=this.realHeight;n=x(n,0,P),r=x(r,0,S),f=x(f,0,P-n),a=x(a,0,S-r);var w=v+n,A=m+r,R=f,O=a,F=this.data;if(F.trim){var L=F.spriteSourceSize;f=x(f,0,y-n),a=x(a,0,E-r);var D=n+f,I=r+a,B=!(L.r<n||L.b<r||L.x>D||L.y>I);if(B){var V=Math.max(L.x,n),Y=Math.max(L.y,r),W=Math.min(L.r,D)-V,$=Math.min(L.b,I)-Y;R=W,O=$,c?w=v+(y-(V-L.x)-W):w=v+(V-L.x),p?A=m+(E-(Y-L.y)-$):A=m+(Y-L.y),n=V,r=Y,f=W,a=$}else w=0,A=0,R=0,O=0}else c&&(w=v+(y-n-f)),p&&(A=m+(E-r-a));var N=this.source.width,U=this.source.height;return h.u0=Math.max(0,w/N),h.v0=Math.max(0,A/U),h.u1=Math.min(1,(w+R)/N),h.v1=Math.min(1,(A+O)/U),h.x=n,h.y=r,h.cx=w,h.cy=A,h.cw=R,h.ch=O,h.width=f,h.height=a,h.flipX=c,h.flipY=p,h},updateCropUVs:function(h,n,r){return this.setCropUVs(h,h.x,h.y,h.width,h.height,n,r)},setUVs:function(h,n,r,f,a,c){var p=this.data.drawImage;return p.width=h,p.height=n,this.u0=r,this.v0=f,this.u1=a,this.v1=c,this},updateUVs:function(){var h=this.cutX,n=this.cutY,r=this.cutWidth,f=this.cutHeight,a=this.data.drawImage;a.width=r,a.height=f;var c=this.source.width,p=this.source.height;return this.u0=h/c,this.v0=n/p,this.u1=(h+r)/c,this.v1=(n+f)/p,this},updateUVsInverted:function(){var h=this.source.width,n=this.source.height;return this.u0=(this.cutX+this.cutHeight)/h,this.v0=this.cutY/n,this.u1=this.cutX/h,this.v1=(this.cutY+this.cutWidth)/n,this},clone:function(){var h=new l(this.texture,this.name,this.sourceIndex);return h.cutX=this.cutX,h.cutY=this.cutY,h.cutWidth=this.cutWidth,h.cutHeight=this.cutHeight,h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h.halfWidth=this.halfWidth,h.halfHeight=this.halfHeight,h.centerX=this.centerX,h.centerY=this.centerY,h.rotated=this.rotated,h.data=u(!0,h.data,this.data),h.updateUVs(),h},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});o.exports=l},31673:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(82047),u=e(32547),l='Texture "%s" has no frame "%s"',h=new d({initialize:function(r,f,a,c,p){Array.isArray(a)||(a=[a]),this.manager=r,this.key=f,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var v=0;v<a.length;v++)this.source.push(new u(this,a[v],c,p))},add:function(n,r,f,a,c,p){if(this.has(n))return null;var v=new x(this,n,r,f,a,c,p);return this.frames[n]=v,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,v},remove:function(n){if(this.has(n)){var r=this.get(n);return r.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames.hasOwnProperty(n)},get:function(n){n||(n=this.firstFrame);var r=this.frames[n];return r||(console.warn(l,this.key,n),r=this.frames[this.firstFrame]),r},getTextureSourceIndex:function(n){for(var r=0;r<this.source.length;r++)if(this.source[r]===n)return r;return-1},getFramesFromTextureSource:function(n,r){r===void 0&&(r=!1);var f=[];for(var a in this.frames)if(!(a==="__BASE"&&!r)){var c=this.frames[a];c.sourceIndex===n&&f.push(c)}return f},getFrameNames:function(n){n===void 0&&(n=!1);var r=Object.keys(this.frames);if(!n){var f=r.indexOf("__BASE");f!==-1&&r.splice(f,1)}return r},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var r=this.frames[n];return r?r.source.image:(console.warn(l,this.key,n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var r=this.frames[n],f;return r?f=r.sourceIndex:(console.warn(l,this.key,n),f=this.frames.__BASE.sourceIndex),this.dataSource[f].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++){var f=this.source[r];this.dataSource.push(new u(this,n[r],f.width,f.height))}},setFilter:function(n){var r;for(r=0;r<this.source.length;r++)this.source[r].setFilter(n);for(r=0;r<this.dataSource.length;r++)this.dataSource[r].setFilter(n)},destroy:function(){var n,r=this.source,f=this.dataSource;for(n=0;n<r.length;n++)r[n]&&r[n].destroy();for(n=0;n<f.length;n++)f[n]&&f[n].destroy();for(var a in this.frames){var c=this.frames[a];c&&c.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});o.exports=h},6237:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(17487),u=e(56694),l=e(27119),h=e(86459),n=e(845),r=e(6659),f=e(38203),a=e(82047),c=e(97081),p=e(52780),v=e(10850),m=e(1539),y=e(42911),E=e(69150),P=e(74118),S=e(31673),w=new u({Extends:r,initialize:function(R){r.call(this),this.game=R,this.name="TextureManager",this.list={},this._tempCanvas=d.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new P,this.silentWarnings=!1,R.events.once(c.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(f.LOAD,this.updatePending,this),this.on(f.ERROR,this.updatePending,this);var A=this.game.config;this.addBase64("__DEFAULT",A.defaultImage),this.addBase64("__MISSING",A.missingImage),this.addBase64("__WHITE",A.whiteImage),this.game.events.once(c.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(f.LOAD),this.off(f.ERROR),this.emit(f.READY),this.stamp=new m(this.game.scene.systemScene).setOrigin(0))},checkKey:function(A){return this.exists(A)?(this.silentWarnings||console.error("Texture key already in use: "+A),!1):!0},remove:function(A){if(typeof A=="string")if(this.exists(A))A=this.get(A);else return this.silentWarnings||console.warn("No texture found matching key: "+A),this;return this.list.hasOwnProperty(A.key)&&(A.destroy(),this.emit(f.REMOVE,A.key),this.emit(f.REMOVE_KEY+A.key)),this},removeKey:function(A){return this.list.hasOwnProperty(A)&&delete this.list[A],this},addBase64:function(A,R){if(this.checkKey(A)){var O=this,F=new Image;F.onerror=function(){O.emit(f.ERROR,A)},F.onload=function(){var L=O.create(A,F);E.Image(L,0),O.emit(f.ADD,A,L),O.emit(f.ADD_KEY+A,L),O.emit(f.LOAD,A,L)},F.src=R}return this},getBase64:function(A,R,O,F){O===void 0&&(O="image/png"),F===void 0&&(F=.92);var L="",D=this.getFrame(A,R);if(D&&(D.source.isRenderTexture||D.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(D){var I=D.canvasData,B=d.create2D(this,I.width,I.height),V=B.getContext("2d",{willReadFrequently:!0});I.width>0&&I.height>0&&V.drawImage(D.source.image,I.x,I.y,I.width,I.height,0,0,I.width,I.height),L=B.toDataURL(O,F),d.remove(B)}return L},addImage:function(A,R,O){var F=null;return this.checkKey(A)&&(F=this.create(A,R),E.Image(F,0),O&&F.setDataSource(O),this.emit(f.ADD,A,F),this.emit(f.ADD_KEY+A,F)),F},addGLTexture:function(A,R,O,F){var L=null;return this.checkKey(A)&&(O===void 0&&(O=R.width),F===void 0&&(F=R.height),L=this.create(A,R,O,F),L.add("__BASE",0,0,0,O,F),this.emit(f.ADD,A,L),this.emit(f.ADD_KEY+A,L)),L},addCompressedTexture:function(A,R,O){var F=null;if(this.checkKey(A)){if(F=this.create(A,R),F.add("__BASE",0,0,0,R.width,R.height),O)if(Array.isArray(O))for(var L=0;L<O.length;L++)E.JSONHash(F,L,O[L]);else E.JSONHash(F,0,O);this.emit(f.ADD,A,F),this.emit(f.ADD_KEY+A,F)}return F},addRenderTexture:function(A,R){var O=null;return this.checkKey(A)&&(O=this.create(A,R),O.add("__BASE",0,0,0,R.width,R.height),this.emit(f.ADD,A,O),this.emit(f.ADD_KEY+A,O)),O},generate:function(A,R){if(this.checkKey(A)){var O=d.create(this,1,1);return R.canvas=O,p(R),this.addCanvas(A,O)}else return null},createCanvas:function(A,R,O){if(R===void 0&&(R=256),O===void 0&&(O=256),this.checkKey(A)){var F=d.create(this,R,O,h.CANVAS,!0);return this.addCanvas(A,F)}return null},addCanvas:function(A,R,O){O===void 0&&(O=!1);var F=null;return O?F=new x(this,A,R,R.width,R.height):this.checkKey(A)&&(F=new x(this,A,R,R.width,R.height),this.list[A]=F,this.emit(f.ADD,A,F),this.emit(f.ADD_KEY+A,F)),F},addDynamicTexture:function(A,R,O){var F=null;return typeof A=="string"&&!this.exists(A)?F=new n(this,A,R,O):(F=A,A=F.key),this.checkKey(A)?(this.list[A]=F,this.emit(f.ADD,A,F),this.emit(f.ADD_KEY+A,F)):F=null,F},addAtlas:function(A,R,O,F){return Array.isArray(O.textures)||Array.isArray(O.frames)?this.addAtlasJSONArray(A,R,O,F):this.addAtlasJSONHash(A,R,O,F)},addAtlasJSONArray:function(A,R,O,F){var L=null;if(R instanceof S?(A=L.key,L=R):this.checkKey(A)&&(L=this.create(A,R)),L){if(Array.isArray(O))for(var D=O.length===1,I=0;I<L.source.length;I++){var B=D?O[0]:O[I];E.JSONArray(L,I,B)}else E.JSONArray(L,0,O);F&&L.setDataSource(F),this.emit(f.ADD,A,L),this.emit(f.ADD_KEY+A,L)}return L},addAtlasJSONHash:function(A,R,O,F){var L=null;if(R instanceof S?(A=L.key,L=R):this.checkKey(A)&&(L=this.create(A,R)),L){if(Array.isArray(O))for(var D=0;D<O.length;D++)E.JSONHash(L,D,O[D]);else E.JSONHash(L,0,O);F&&L.setDataSource(F),this.emit(f.ADD,A,L),this.emit(f.ADD_KEY+A,L)}return L},addAtlasXML:function(A,R,O,F){var L=null;return R instanceof S?(A=L.key,L=R):this.checkKey(A)&&(L=this.create(A,R)),L&&(E.AtlasXML(L,0,O),F&&L.setDataSource(F),this.emit(f.ADD,A,L),this.emit(f.ADD_KEY+A,L)),L},addUnityAtlas:function(A,R,O,F){var L=null;return R instanceof S?(A=L.key,L=R):this.checkKey(A)&&(L=this.create(A,R)),L&&(E.UnityYAML(L,0,O),F&&L.setDataSource(F),this.emit(f.ADD,A,L),this.emit(f.ADD_KEY+A,L)),L},addSpriteSheet:function(A,R,O,F){var L=null;if(R instanceof S?(A=L.key,L=R):this.checkKey(A)&&(L=this.create(A,R)),L){var D=L.source[0].width,I=L.source[0].height;E.SpriteSheet(L,0,0,0,D,I,O),F&&L.setDataSource(F),this.emit(f.ADD,A,L),this.emit(f.ADD_KEY+A,L)}return L},addSpriteSheetFromAtlas:function(A,R){if(!this.checkKey(A))return null;var O=v(R,"atlas",null),F=v(R,"frame",null);if(!(!O||!F)){var L=this.get(O),D=L.get(F);if(D){var I=this.create(A,D.source.image);return D.trimmed?E.SpriteSheetFromAtlas(I,D,R):E.SpriteSheet(I,0,D.cutX,D.cutY,D.cutWidth,D.cutHeight,R),this.emit(f.ADD,A,I),this.emit(f.ADD_KEY+A,I),I}}},create:function(A,R,O,F){var L=null;return this.checkKey(A)&&(L=new S(this,A,R,O,F),this.list[A]=L),L},exists:function(A){return this.list.hasOwnProperty(A)},get:function(A){return A===void 0&&(A="__DEFAULT"),this.list[A]?this.list[A]:A instanceof S?A:A instanceof a?A.texture:this.list.__MISSING},cloneFrame:function(A,R){if(this.list[A])return this.list[A].get(R).clone()},getFrame:function(A,R){if(this.list[A])return this.list[A].get(R)},parseFrame:function(A){if(A){if(typeof A=="string")return this.getFrame(A);if(Array.isArray(A)&&A.length===2)return this.getFrame(A[0],A[1]);if(y(A))return this.getFrame(A.key,A.frame);if(A instanceof S)return A.get();if(A instanceof a)return A}else return},getTextureKeys:function(){var A=[];for(var R in this.list)R!=="__DEFAULT"&&R!=="__MISSING"&&R!=="__WHITE"&&A.push(R);return A},getPixel:function(A,R,O,F){var L=this.getFrame(O,F);if(L){A-=L.x,R-=L.y;var D=L.data.cut;if(A+=D.x,R+=D.y,A>=D.x&&A<D.r&&R>=D.y&&R<D.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(L.source.image,A,R,1,1,0,0,1,1);var B=I.getImageData(0,0,1,1);return new l(B.data[0],B.data[1],B.data[2],B.data[3])}}return null},getPixelAlpha:function(A,R,O,F){var L=this.getFrame(O,F);if(L){A-=L.x,R-=L.y;var D=L.data.cut;if(A+=D.x,R+=D.y,A>=D.x&&A<D.r&&R>=D.y&&R<D.b){var I=this._tempContext;I.clearRect(0,0,1,1),I.drawImage(L.source.image,A,R,1,1,0,0,1,1);var B=I.getImageData(0,0,1,1);return B.data[3]}}return null},setTexture:function(A,R,O){return this.list[R]&&(A.texture=this.list[R],A.frame=A.texture.get(O)),A},renameTexture:function(A,R){var O=this.get(A);return O&&A!==R?(O.key=R,this.list[R]=O,delete this.list[A],!0):!1},each:function(A,R){for(var O=[null],F=1;F<arguments.length;F++)O.push(arguments[F]);for(var L in this.list)O[0]=this.list[L],A.apply(R,O)},resetStamp:function(A,R){A===void 0&&(A=1),R===void 0&&(R=16777215);var O=this.stamp;return O.setCrop(),O.setPosition(0),O.setAngle(0),O.setScale(1),O.setAlpha(A),O.setTint(R),O},destroy:function(){for(var A in this.list)this.list[A].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,d.remove(this._tempCanvas)}});o.exports=w},32547:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61068),x=e(56694),u=e(28621),l=e(27394),h=new x({initialize:function(r,f,a,c,p){p===void 0&&(p=!1);var v=r.manager.game;this.renderer=v.renderer,this.texture=r,this.source=f,this.image=f.compressed?null:f,this.compressionAlgorithm=f.compressed?f.format:null,this.resolution=1,this.width=a||f.naturalWidth||f.videoWidth||f.width||0,this.height=c||f.naturalHeight||f.videoHeight||f.height||0,this.scaleMode=l.DEFAULT,this.isCanvas=f instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&f instanceof HTMLVideoElement,this.isRenderTexture=f.type==="RenderTexture"||f.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&f instanceof WebGLTexture,this.isPowerOf2=u(this.width,this.height),this.glTexture=null,this.flipY=p,this.init(v)},init:function(n){var r=this.renderer;if(r){var f=this.source;if(r.gl){var a=this.image,c=this.flipY,p=this.width,v=this.height,m=this.scaleMode;this.isCanvas?this.glTexture=r.createCanvasTexture(a,!1,c):this.isVideo?this.glTexture=r.createVideoTexture(a,!1,c):this.isRenderTexture?this.glTexture=r.createTextureFromSource(null,p,v,m):this.isGLTexture?this.glTexture=f:this.compressionAlgorithm?this.glTexture=r.createTextureFromSource(f):this.glTexture=r.createTextureFromSource(a,p,v,m)}else this.isRenderTexture&&(this.image=f.canvas)}n.config.antialias||this.setFilter(1)},setFilter:function(n){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,n),this.scaleMode=n},setFlipY:function(n){return n===void 0&&(n=!0),this.flipY=n,this},update:function(){var n=this.renderer,r=this.image,f=this.flipY,a=n.gl;a&&this.isCanvas?this.glTexture=n.updateCanvasTexture(r,this.glTexture,f):a&&this.isVideo&&(this.glTexture=n.updateVideoTexture(r,this.glTexture,f))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&d.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});o.exports=h},65154:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={LINEAR:0,NEAREST:1};o.exports=T},49644:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture"},29569:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="addtexture-"},60079:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onerror"},72665:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="onload"},93006:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="ready"},69018:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture"},85549:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="removetexture-"},38203:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ADD:e(49644),ADD_KEY:e(29569),ERROR:e(60079),LOAD:e(72665),READY:e(93006),REMOVE:e(69018),REMOVE_KEY:e(85549)}},87499:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(65154),u={CanvasTexture:e(17487),DynamicTexture:e(845),Events:e(38203),FilterMode:x,Frame:e(82047),Parsers:e(69150),Texture:e(31673),TextureManager:e(6237),TextureSource:e(32547)};u=d(!1,u,x),o.exports=u},35082:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(!x.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var u=e.source[d];e.add("__BASE",d,0,0,u.width,u.height);for(var l=x.getElementsByTagName("SubTexture"),h,n=0;n<l.length;n++){var r=l[n].attributes,f=r.name.value,a=parseInt(r.x.value,10),c=parseInt(r.y.value,10),p=parseInt(r.width.value,10),v=parseInt(r.height.value,10);if(h=e.add(f,d,a,c,p,v),r.frameX){var m=Math.abs(parseInt(r.frameX.value,10)),y=Math.abs(parseInt(r.frameY.value,10)),E=parseInt(r.frameWidth.value,10),P=parseInt(r.frameHeight.value,10);h.setTrim(p,v,m,y,E,P)}}return e};o.exports=T},83332:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.source[d];return e.add("__BASE",d,0,0,x.width,x.height),e};o.exports=T},21560:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.source[d];return e.add("__BASE",d,0,0,x.width,x.height),e};o.exports=T},64423:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),x=function(u,l,h){if(!h.frames&&!h.textures){console.warn("Invalid Texture Atlas JSON Array");return}var n=u.source[l];u.add("__BASE",l,0,0,n.width,n.height);for(var r=Array.isArray(h.textures)?h.textures[l].frames:h.frames,f,a=0;a<r.length;a++){var c=r[a];if(f=u.add(c.filename,l,c.frame.x,c.frame.y,c.frame.w,c.frame.h),!f){console.warn("Invalid atlas json, frame already exists: "+c.filename);continue}c.trimmed&&f.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(f.rotated=!0,f.updateUVsInverted());var p=c.anchor||c.pivot;p&&(f.customPivot=!0,f.pivotX=p.x,f.pivotY=p.y),f.customData=d(c)}for(var v in h)v!=="frames"&&(Array.isArray(h[v])?u.customData[v]=h[v].slice(0):u.customData[v]=h[v]);return u};o.exports=x},17264:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),x=function(u,l,h){if(!h.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=u.source[l];u.add("__BASE",l,0,0,n.width,n.height);var r=h.frames,f;for(var a in r)if(!!r.hasOwnProperty(a)){var c=r[a];if(f=u.add(a,l,c.frame.x,c.frame.y,c.frame.w,c.frame.h),!f){console.warn("Invalid atlas json, frame already exists: "+a);continue}c.trimmed&&f.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(f.rotated=!0,f.updateUVsInverted());var p=c.anchor||c.pivot;p&&(f.customPivot=!0,f.pivotX=p.x,f.pivotY=p.y),f.customData=d(c)}for(var v in h)v!=="frames"&&(Array.isArray(h[v])?u.customData[v]=h[v].slice(0):u.customData[v]=h[v]);return u};o.exports=x},67409:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=[171,75,84,88,32,49,49,187,13,10,26,10],x,u=new Uint8Array(e,0,12);for(x=0;x<u.length;x++)if(u[x]!==d[x]){console.warn("KTXParser - Invalid file format");return}var l=Uint32Array.BYTES_PER_ELEMENT,h=new DataView(e,12,13*l),n=h.getUint32(0,!0)===67305985,r=h.getUint32(1*l,n);if(r!==0){console.warn("KTXParser - Only compressed formats supported");return}var f=h.getUint32(4*l,n),a=h.getUint32(6*l,n),c=h.getUint32(7*l,n),p=Math.max(1,h.getUint32(11*l,n)),v=h.getUint32(12*l,n),m=new Array(p),y=12+13*4+v,E=a,P=c;for(x=0;x<p;x++){var S=new Int32Array(e,y,1)[0];y+=4,m[x]={data:new Uint8Array(e,y,S),width:E,height:P},E=Math.max(1,E>>1),P=Math.max(1,P>>1),y+=S}return{mipmaps:m,width:a,height:c,internalFormat:f,compressed:!0,generateMipmap:!1}};o.exports=T},24904:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(A,R,O,F,L,D,I){return I===void 0&&(I=16),Math.floor((A+O)/L)*Math.floor((R+F)/D)*I}function e(A,R){return A=Math.max(A,16),R=Math.max(R,8),A*R/4}function d(A,R){return A=Math.max(A,8),R=Math.max(R,8),A*R/2}function x(A,R){return T(A,R,3,3,4,4,8)}function u(A,R){return T(A,R,3,3,4,4)}function l(A,R){return T(A,R,4,3,5,4)}function h(A,R){return T(A,R,4,4,5,5)}function n(A,R){return T(A,R,5,4,6,5)}function r(A,R){return T(A,R,5,5,6,6)}function f(A,R){return T(A,R,7,4,8,5)}function a(A,R){return T(A,R,7,5,8,6)}function c(A,R){return T(A,R,7,7,8,8)}function p(A,R){return T(A,R,9,4,10,5)}function v(A,R){return T(A,R,9,5,10,6)}function m(A,R){return T(A,R,9,7,10,8)}function y(A,R){return T(A,R,9,9,10,10)}function E(A,R){return T(A,R,11,9,12,10)}function P(A,R){return T(A,R,11,11,12,12)}var S={0:{sizeFunc:e,glFormat:35841},1:{sizeFunc:e,glFormat:35843},2:{sizeFunc:d,glFormat:35840},3:{sizeFunc:d,glFormat:35842},6:{sizeFunc:x,glFormat:36196},7:{sizeFunc:x,glFormat:33776},8:{sizeFunc:u,glFormat:33777},9:{sizeFunc:u,glFormat:33778},11:{sizeFunc:u,glFormat:33779},22:{sizeFunc:x,glFormat:37492},23:{sizeFunc:u,glFormat:37496},24:{sizeFunc:x,glFormat:37494},25:{sizeFunc:x,glFormat:37488},26:{sizeFunc:u,glFormat:37490},27:{sizeFunc:u,glFormat:37808},28:{sizeFunc:l,glFormat:37809},29:{sizeFunc:h,glFormat:37810},30:{sizeFunc:n,glFormat:37811},31:{sizeFunc:r,glFormat:37812},32:{sizeFunc:f,glFormat:37813},33:{sizeFunc:a,glFormat:37814},34:{sizeFunc:c,glFormat:37815},35:{sizeFunc:p,glFormat:37816},36:{sizeFunc:v,glFormat:37817},37:{sizeFunc:m,glFormat:37818},38:{sizeFunc:y,glFormat:37819},39:{sizeFunc:E,glFormat:37820},40:{sizeFunc:P,glFormat:37821}},w=function(A){for(var R=new Uint32Array(A,0,13),O=R[2],F=S[O].glFormat,L=S[O].sizeFunc,D=R[11],I=R[7],B=R[6],V=52+R[12],Y=new Uint8Array(A,V),W=new Array(D),$=0,N=I,U=B,b=0;b<D;b++){var G=L(N,U);W[b]={data:new Uint8Array(Y.buffer,Y.byteOffset+$,G),width:N,height:U},N=Math.max(1,N>>1),U=Math.max(1,U>>1),$+=G}return{mipmaps:W,width:I,height:B,internalFormat:F,compressed:!0,generateMipmap:!1}};o.exports=w},6143:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u,l,h,n,r,f,a){var c=d(a,"frameWidth",null),p=d(a,"frameHeight",c);if(c===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var v=u.source[l];u.add("__BASE",l,0,0,v.width,v.height);var m=d(a,"startFrame",0),y=d(a,"endFrame",-1),E=d(a,"margin",0),P=d(a,"spacing",0),S=Math.floor((r-E+P)/(c+P)),w=Math.floor((f-E+P)/(p+P)),A=S*w;A===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",u.key),(m>A||m<-A)&&(m=0),m<0&&(m=A+m),(y===-1||y>A||y<m)&&(y=A);for(var R=E,O=E,F=0,L=0,D=0,I=0;I<A;I++){F=0,L=0;var B=R+c,V=O+p;B>r&&(F=B-r),V>f&&(L=V-f),I>=m&&I<=y&&(u.add(D,l,h+R,n+O,c-F,p-L),D++),R+=c+P,R+c>r&&(R=E,O+=p+P)}return u};o.exports=x},20030:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u,l,h){var n=d(h,"frameWidth",null),r=d(h,"frameHeight",n);if(!n)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var f=u.source[0];u.add("__BASE",0,0,0,f.width,f.height),d(h,"startFrame",0),d(h,"endFrame",-1);for(var a=d(h,"margin",0),c=d(h,"spacing",0),p=l.cutX,v=l.cutY,m=l.cutWidth,y=l.cutHeight,E=l.realWidth,P=l.realHeight,S=Math.floor((E-a+c)/(n+c)),w=Math.floor((P-a+c)/(r+c)),A=l.x,R=n-A,O=n-(E-m-A),F=l.y,L=r-F,D=r-(P-y-F),I,B=a,V=a,Y=0,W=0,$=0;$<w;$++){for(var N=$===0,U=$===w-1,b=0;b<S;b++){var G=b===0,z=b===S-1;if(I=u.add(Y,W,p+B,v+V,n,r),G||N||z||U){var X=G?A:0,k=N?F:0,H=0,K=0;G&&(H+=n-R),z&&(H+=n-O),N&&(K+=r-L),U&&(K+=r-D);var Z=n-H,J=r-K;I.cutWidth=Z,I.cutHeight=J,I.setTrim(n,r,X,k,Z,J)}B+=c,G?B+=R:z?B+=O:B+=n,Y++}B=a,V+=c,N?V+=L:U?V+=D:V+=r}return u};o.exports=x},89187:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=0,e=function(x,u,l,h){var n=T-h.y-h.height;x.add(l,u,h.x,n,h.width,h.height)},d=function(x,u,l){var h=x.source[u];x.add("__BASE",u,0,0,h.width,h.height),T=h.height;for(var n=l.split(`
`),r=/^[ ]*(- )*(\w+)+[: ]+(.*)/,f="",a="",c={x:0,y:0,width:0,height:0},p=0;p<n.length;p++){var v=n[p].match(r);if(!!v){var m=v[1]==="- ",y=v[2],E=v[3];if(m&&(a!==f&&(e(x,u,a,c),f=a),c={x:0,y:0,width:0,height:0}),y==="name"){a=E;continue}switch(y){case"x":case"y":case"width":case"height":c[y]=parseInt(E,10);break}}}return a!==f&&e(x,u,a,c),x};o.exports=d},69150:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AtlasXML:e(35082),Canvas:e(83332),Image:e(21560),JSONArray:e(64423),JSONHash:e(17264),KTXParser:e(67409),PVRParser:e(24904),SpriteSheet:e(6143),SpriteSheetFromAtlas:e(20030),UnityYAML:e(89187)}},93560:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l,h,n,r,f,a,c){(n===void 0||n<=0)&&(n=32),(r===void 0||r<=0)&&(r=32),f===void 0&&(f=0),a===void 0&&(a=0),this.name=l,this.firstgid=h|0,this.imageWidth=n|0,this.imageHeight=r|0,this.imageMargin=f|0,this.imageSpacing=a|0,this.properties=c||{},this.images=[],this.total=0},containsImageIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},addImage:function(u,l){return this.images.push({gid:u,image:l}),this.total++,this}});o.exports=x},46422:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=new d({initialize:function(l){if(this.gids=[],l!==void 0)for(var h=0;h<l.length;++h)for(var n=l[h],r=0;r<n.total;++r)this.gids[n.firstgid+r]=n;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(u){this.gids=u?this._gids:void 0}},getTypeIncludingTile:function(u){if(u.type!==void 0&&u.type!=="")return u.type;if(!(!this.gids||u.gid===void 0)){var l=this.gids[u.gid];if(!!l){var h=l.getTileData(u.gid);if(!!h)return h.type}}},setTextureAndFrame:function(u,l,h,n){if(l===null&&this.gids&&n.gid!==void 0){var r=this.gids[n.gid];r&&(l===null&&r.image!==void 0&&(l=r.image.key),h===null&&(h=n.gid-r.firstgid),u.scene.textures.getFrame(l,h)||(l=null,h=null))}u.setTexture(l,h)},setPropertiesFromTiledObject:function(u,l){if(this.gids!==void 0&&l.gid!==void 0){var h=this.gids[l.gid];h!==void 0&&this.setFromJSON(u,h.getTileProperties(l.gid))}this.setFromJSON(u,l.properties)},setFromJSON:function(u,l){if(!!l){if(Array.isArray(l)){l.forEach(function(n){u.setData(n.name,n.value)});return}for(var h in l)u[h]!==void 0?u[h]=l[h]:u.setData(h,l[h])}}});o.exports=x},15043:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(16586),u=e(90715),l=e(89797),h=function(n,r,f,a,c,p,v,m){f===void 0&&(f=32),a===void 0&&(a=32),c===void 0&&(c=10),p===void 0&&(p=10),m===void 0&&(m=!1);var y=null;if(Array.isArray(v)){var E=r!==void 0?r:"map";y=u(E,d.ARRAY_2D,v,f,a,m)}else if(r!==void 0){var P=n.cache.tilemap.get(r);P?y=u(r,P.format,P.data,f,a,m):console.warn("No map data found for key "+r)}return y===null&&(y=new x({tileWidth:f,tileHeight:a,width:c,height:p})),new l(n,y)};o.exports=h},29633:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(12920),l=e(28699),h=e(66658),n=new d({Mixins:[x.Alpha,x.Flip,x.Visible],initialize:function(f,a,c,p,v,m,y,E){this.layer=f,this.index=a,this.x=c,this.y=p,this.width=v,this.height=m,this.right,this.bottom,this.baseWidth=y!==void 0?y:v,this.baseHeight=E!==void 0?E:m,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(r,f){return!(r<this.pixelX||f<this.pixelY||r>this.right||f>this.bottom)},copy:function(r){return this.index=r.index,this.alpha=r.alpha,this.properties=l(r.properties),this.visible=r.visible,this.setFlip(r.flipX,r.flipY),this.tint=r.tint,this.rotation=r.rotation,this.collideUp=r.collideUp,this.collideDown=r.collideDown,this.collideLeft=r.collideLeft,this.collideRight=r.collideRight,this.collisionCallback=r.collisionCallback,this.collisionCallbackContext=r.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(r){var f=this.tilemapLayer;if(f){var a=f.tileToWorldXY(this.x,this.y,void 0,r);return a.x}return this.x*this.baseWidth},getRight:function(r){var f=this.tilemapLayer;return f?this.getLeft(r)+this.width*f.scaleX:this.getLeft(r)+this.width},getTop:function(r){var f=this.tilemapLayer;if(f){var a=f.tileToWorldXY(this.x,this.y,void 0,r);return a.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(r){var f=this.tilemapLayer;return f?this.getTop(r)+this.height*f.scaleY:this.getTop(r)+this.height},getBounds:function(r,f){return f===void 0&&(f=new h),f.x=this.getLeft(r),f.y=this.getTop(r),f.width=this.getRight(r)-f.x,f.height=this.getBottom(r)-f.y,f},getCenterX:function(r){return(this.getLeft(r)+this.getRight(r))/2},getCenterY:function(r){return(this.getTop(r)+this.getBottom(r))/2},intersects:function(r,f,a,c){return!(a<=this.pixelX||c<=this.pixelY||r>=this.right||f>=this.bottom)},isInteresting:function(r,f){return r&&f?this.canCollide||this.hasInterestingFace:r?this.collides:f?this.hasInterestingFace:!1},resetCollision:function(r){if(r===void 0&&(r=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,r){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(r,f,a,c,p){if(f===void 0&&(f=r),a===void 0&&(a=r),c===void 0&&(c=r),p===void 0&&(p=!0),this.collideLeft=r,this.collideRight=f,this.collideUp=a,this.collideDown=c,this.faceLeft=r,this.faceRight=f,this.faceTop=a,this.faceBottom=c,p){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(r,f){return r===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=r,this.collisionCallbackContext=f),this},setSize:function(r,f,a,c){return r!==void 0&&(this.width=r),f!==void 0&&(this.height=f),a!==void 0&&(this.baseWidth=a),c!==void 0&&(this.baseHeight=c),this.updatePixelXY(),this},updatePixelXY:function(){var r=this.layer.orientation;if(r===u.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(r===u.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(r===u.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(r===u.HEXAGONAL){var f=this.layer.staggerAxis,a=this.layer.staggerIndex,c=this.layer.hexSideLength,p,v;f==="y"?(v=(this.baseHeight-c)/2+c,a==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*v):f==="x"&&(p=(this.baseWidth-c)/2+c,this.pixelX=this.x*p,a==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var r=this.layer.tilemapLayer;if(r){var f=r.gidMap[this.index];if(f)return f}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var r=this.tilemapLayer;return r?r.tilemap:null}}});o.exports=n},89797:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(14556),x=e(56694),u=e(75606),l=e(93560),h=e(72632),n=e(94990),r=e(46422),f=e(12920),a=e(52257),c=e(72677),p=e(13747),v=e(29633),m=e(5047),y=e(87177),E=e(47975),P=new x({initialize:function(w,A){this.scene=w,this.tileWidth=A.tileWidth,this.tileHeight=A.tileHeight,this.width=A.width,this.height=A.height,this.orientation=A.orientation,this.renderOrder=A.renderOrder,this.format=A.format,this.version=A.version,this.properties=A.properties,this.widthInPixels=A.widthInPixels,this.heightInPixels=A.heightInPixels,this.imageCollections=A.imageCollections,this.images=A.images,this.layers=A.layers,this.tiles=A.tiles,this.tilesets=A.tilesets,this.objects=A.objects,this.currentLayerIndex=0,this.hexSideLength=A.hexSideLength;var R=this.orientation;this._convert={WorldToTileXY:m.GetWorldToTileXYFunction(R),WorldToTileX:m.GetWorldToTileXFunction(R),WorldToTileY:m.GetWorldToTileYFunction(R),TileToWorldXY:m.GetTileToWorldXYFunction(R),TileToWorldX:m.GetTileToWorldXFunction(R),TileToWorldY:m.GetTileToWorldYFunction(R),GetTileCorners:m.GetTileCornersFunction(R)}},setRenderOrder:function(S){var w=["right-down","left-down","right-up","left-up"];return typeof S=="number"&&(S=w[S]),w.indexOf(S)>-1&&(this.renderOrder=S),this},addTilesetImage:function(S,w,A,R,O,F,L,D){if(S===void 0)return null;if(w==null&&(w=S),!this.scene.sys.textures.exists(w))return console.warn("Invalid Tileset Image: "+w),null;var I=this.scene.sys.textures.get(w),B=this.getTilesetIndex(S);if(B===null&&this.format===l.TILED_JSON)return console.warn("No data found for Tileset: "+S),null;var V=this.tilesets[B];return V?(V.setTileSize(A,R),V.setSpacing(O,F),V.setImage(I),V):(A===void 0&&(A=this.tileWidth),R===void 0&&(R=this.tileHeight),O===void 0&&(O=0),F===void 0&&(F=0),L===void 0&&(L=0),D===void 0&&(D={x:0,y:0}),V=new E(S,L,A,R,O,F,void 0,void 0,D),V.setImage(I),this.tilesets.push(V),this.tiles=d(this),V)},copy:function(S,w,A,R,O,F,L,D){return D=this.getLayer(D),D!==null?(m.Copy(S,w,A,R,O,F,L,D),this):null},createBlankLayer:function(S,w,A,R,O,F,L,D){A===void 0&&(A=0),R===void 0&&(R=0),O===void 0&&(O=this.width),F===void 0&&(F=this.height),L===void 0&&(L=this.tileWidth),D===void 0&&(D=this.tileHeight);var I=this.getLayerIndex(S);if(I!==null)return console.warn("Invalid Tilemap Layer ID: "+S),null;for(var B=new n({name:S,tileWidth:L,tileHeight:D,width:O,height:F,orientation:this.orientation}),V,Y=0;Y<F;Y++){V=[];for(var W=0;W<O;W++)V.push(new v(B,-1,W,Y,L,D,this.tileWidth,this.tileHeight));B.data.push(V)}this.layers.push(B),this.currentLayerIndex=this.layers.length-1;var $=new y(this.scene,this,this.currentLayerIndex,w,A,R);return $.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add($),$},createLayer:function(S,w,A,R){var O=this.getLayerIndex(S);if(O===null)return console.warn("Invalid Tilemap Layer ID: "+S),typeof S=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var F=this.layers[O];if(F.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+S),null;this.currentLayerIndex=O,A===void 0&&(A=F.x),R===void 0&&(R=F.y);var L=new y(this.scene,this,O,w,A,R);return L.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(L),L},createFromObjects:function(S,w,A){A===void 0&&(A=!0);var R=[],O=this.getObjectLayer(S);if(!O)return console.warn("createFromObjects: Invalid objectLayerName given: "+S),R;var F=new r(A?this.tilesets:void 0);Array.isArray(w)||(w=[w]);for(var L=O.objects,D=0;D<w.length;D++){var I=w[D],B=h(I,"id",null),V=h(I,"gid",null),Y=h(I,"name",null),W=h(I,"type",null);F.enabled=!h(I,"ignoreTileset",null);for(var $,N=[],U=0;U<L.length;U++)$=L[U],(B===null&&V===null&&Y===null&&W===null||B!==null&&$.id===B||V!==null&&$.gid===V||Y!==null&&$.name===Y||W!==null&&F.getTypeIncludingTile($)===W)&&N.push($);for(var b=h(I,"classType",p),G=h(I,"scene",this.scene),z=h(I,"container",null),X=h(I,"key",null),k=h(I,"frame",null),H=0;H<N.length;H++){$=N[H];var K=new b(G);if(K.setName($.name),K.setPosition($.x,$.y),F.setTextureAndFrame(K,X,k,$),$.width&&(K.displayWidth=$.width),$.height&&(K.displayHeight=$.height),this.orientation===f.ISOMETRIC){var Z=this.tileWidth/this.tileHeight,J={x:K.x-K.y,y:(K.x+K.y)/Z};K.x=J.x,K.y=J.y}var j={x:K.originX*$.width,y:(K.originY-($.gid?1:0))*$.height};if($.rotation){var Q=u($.rotation);a(j,Q),K.rotation=Q}K.x+=j.x,K.y+=j.y,($.flippedHorizontal!==void 0||$.flippedVertical!==void 0)&&K.setFlip($.flippedHorizontal,$.flippedVertical),$.visible||(K.visible=!1),F.setPropertiesFromTiledObject(K,$),z?z.add(K):G.add.existing(K),R.push(K)}}return R},createFromTiles:function(S,w,A,R,O,F){return F=this.getLayer(F),F===null?null:m.CreateFromTiles(S,w,A,R,O,F)},fill:function(S,w,A,R,O,F,L){return F===void 0&&(F=!0),L=this.getLayer(L),L===null?null:(m.Fill(S,w,A,R,O,F,L),this)},filterObjects:function(S,w,A){if(typeof S=="string"){var R=S;if(S=this.getObjectLayer(S),!S)return console.warn("No object layer found with the name: "+R),null}return S.objects.filter(w,A)},filterTiles:function(S,w,A,R,O,F,L,D){return D=this.getLayer(D),D===null?null:m.FilterTiles(S,w,A,R,O,F,L,D)},findByIndex:function(S,w,A,R){return R=this.getLayer(R),R===null?null:m.FindByIndex(S,w,A,R)},findObject:function(S,w,A){if(typeof S=="string"){var R=S;if(S=this.getObjectLayer(S),!S)return console.warn("No object layer found with the name: "+R),null}return S.objects.find(w,A)||null},findTile:function(S,w,A,R,O,F,L,D){return D=this.getLayer(D),D===null?null:m.FindTile(S,w,A,R,O,F,L,D)},forEachTile:function(S,w,A,R,O,F,L,D){return D=this.getLayer(D),D===null?null:(m.ForEachTile(S,w,A,R,O,F,L,D),this)},getImageIndex:function(S){return this.getIndex(this.images,S)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(S){return S.name})},getIndex:function(S,w){for(var A=0;A<S.length;A++)if(S[A].name===w)return A;return null},getLayer:function(S){var w=this.getLayerIndex(S);return w!==null?this.layers[w]:null},getObjectLayer:function(S){var w=this.getIndex(this.objects,S);return w!==null?this.objects[w]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(S){return S.name})},getLayerIndex:function(S){return S===void 0?this.currentLayerIndex:typeof S=="string"?this.getLayerIndexByName(S):typeof S=="number"&&S<this.layers.length?S:S instanceof y&&S.tilemap===this?S.layerIndex:null},getLayerIndexByName:function(S){return this.getIndex(this.layers,S)},getTileAt:function(S,w,A,R){return R=this.getLayer(R),R===null?null:m.GetTileAt(S,w,A,R)},getTileAtWorldXY:function(S,w,A,R,O){return O=this.getLayer(O),O===null?null:m.GetTileAtWorldXY(S,w,A,R,O)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(S){return S.name})},getTilesWithin:function(S,w,A,R,O,F){return F=this.getLayer(F),F===null?null:m.GetTilesWithin(S,w,A,R,O,F)},getTilesWithinShape:function(S,w,A,R){return R=this.getLayer(R),R===null?null:m.GetTilesWithinShape(S,w,A,R)},getTilesWithinWorldXY:function(S,w,A,R,O,F,L){return L=this.getLayer(L),L===null?null:m.GetTilesWithinWorldXY(S,w,A,R,O,F,L)},getTileset:function(S){var w=this.getIndex(this.tilesets,S);return w!==null?this.tilesets[w]:null},getTilesetIndex:function(S){return this.getIndex(this.tilesets,S)},hasTileAt:function(S,w,A){return A=this.getLayer(A),A===null?null:m.HasTileAt(S,w,A)},hasTileAtWorldXY:function(S,w,A,R){return R=this.getLayer(R),R===null?null:m.HasTileAtWorldXY(S,w,A,R)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(S){this.setLayer(S)}},putTileAt:function(S,w,A,R,O){return R===void 0&&(R=!0),O=this.getLayer(O),O===null?null:m.PutTileAt(S,w,A,R,O)},putTileAtWorldXY:function(S,w,A,R,O,F){return R===void 0&&(R=!0),F=this.getLayer(F),F===null?null:m.PutTileAtWorldXY(S,w,A,R,O,F)},putTilesAt:function(S,w,A,R,O){return R===void 0&&(R=!0),O=this.getLayer(O),O===null?null:(m.PutTilesAt(S,w,A,R,O),this)},randomize:function(S,w,A,R,O,F){return F=this.getLayer(F),F===null?null:(m.Randomize(S,w,A,R,O,F),this)},calculateFacesAt:function(S,w,A){return A=this.getLayer(A),A===null?null:(m.CalculateFacesAt(S,w,A),this)},calculateFacesWithin:function(S,w,A,R,O){return O=this.getLayer(O),O===null?null:(m.CalculateFacesWithin(S,w,A,R,O),this)},removeLayer:function(S){var w=this.getLayerIndex(S);if(w!==null){c(this.layers,w);for(var A=w;A<this.layers.length;A++)this.layers[A].tilemapLayer&&this.layers[A].tilemapLayer.layerIndex--;return this.currentLayerIndex===w&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(S){var w=this.getLayerIndex(S);return w!==null?(S=this.layers[w],S.tilemapLayer.destroy(),c(this.layers,w),this.currentLayerIndex===w&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var S=this.layers,w=0;w<S.length;w++)S[w].tilemapLayer&&S[w].tilemapLayer.destroy(!1);return S.length=0,this.currentLayerIndex=0,this},removeTile:function(S,w,A){w===void 0&&(w=-1),A===void 0&&(A=!0);var R=[];Array.isArray(S)||(S=[S]);for(var O=0;O<S.length;O++){var F=S[O];R.push(this.removeTileAt(F.x,F.y,!0,A,F.tilemapLayer)),w>-1&&this.putTileAt(w,F.x,F.y,A,F.tilemapLayer)}return R},removeTileAt:function(S,w,A,R,O){return A===void 0&&(A=!0),R===void 0&&(R=!0),O=this.getLayer(O),O===null?null:m.RemoveTileAt(S,w,A,R,O)},removeTileAtWorldXY:function(S,w,A,R,O,F){return A===void 0&&(A=!0),R===void 0&&(R=!0),F=this.getLayer(F),F===null?null:m.RemoveTileAtWorldXY(S,w,A,R,O,F)},renderDebug:function(S,w,A){return A=this.getLayer(A),A===null?null:(this.orientation===f.ORTHOGONAL&&m.RenderDebug(S,w,A),this)},renderDebugFull:function(S,w){for(var A=this.layers,R=0;R<A.length;R++)m.RenderDebug(S,w,A[R]);return this},replaceByIndex:function(S,w,A,R,O,F,L){return L=this.getLayer(L),L===null?null:(m.ReplaceByIndex(S,w,A,R,O,F,L),this)},setCollision:function(S,w,A,R,O){return w===void 0&&(w=!0),A===void 0&&(A=!0),O===void 0&&(O=!0),R=this.getLayer(R),R===null?null:(m.SetCollision(S,w,A,R,O),this)},setCollisionBetween:function(S,w,A,R,O){return A===void 0&&(A=!0),R===void 0&&(R=!0),O=this.getLayer(O),O===null?null:(m.SetCollisionBetween(S,w,A,R,O),this)},setCollisionByProperty:function(S,w,A,R){return w===void 0&&(w=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(m.SetCollisionByProperty(S,w,A,R),this)},setCollisionByExclusion:function(S,w,A,R){return w===void 0&&(w=!0),A===void 0&&(A=!0),R=this.getLayer(R),R===null?null:(m.SetCollisionByExclusion(S,w,A,R),this)},setCollisionFromCollisionGroup:function(S,w,A){return S===void 0&&(S=!0),w===void 0&&(w=!0),A=this.getLayer(A),A===null?null:(m.SetCollisionFromCollisionGroup(S,w,A),this)},setTileIndexCallback:function(S,w,A,R){return R=this.getLayer(R),R===null?null:(m.SetTileIndexCallback(S,w,A,R),this)},setTileLocationCallback:function(S,w,A,R,O,F,L){return L=this.getLayer(L),L===null?null:(m.SetTileLocationCallback(S,w,A,R,O,F,L),this)},setLayer:function(S){var w=this.getLayerIndex(S);return w!==null&&(this.currentLayerIndex=w),this},setBaseTileSize:function(S,w){this.tileWidth=S,this.tileHeight=w,this.widthInPixels=this.width*S,this.heightInPixels=this.height*w;for(var A=0;A<this.layers.length;A++){this.layers[A].baseTileWidth=S,this.layers[A].baseTileHeight=w;for(var R=this.layers[A].data,O=this.layers[A].width,F=this.layers[A].height,L=0;L<F;L++)for(var D=0;D<O;D++){var I=R[L][D];I!==null&&I.setSize(void 0,void 0,S,w)}}return this},setLayerTileSize:function(S,w,A){if(A=this.getLayer(A),A===null)return this;A.tileWidth=S,A.tileHeight=w;for(var R=A.data,O=A.width,F=A.height,L=0;L<F;L++)for(var D=0;D<O;D++){var I=R[L][D];I!==null&&I.setSize(S,w)}return this},shuffle:function(S,w,A,R,O){return O=this.getLayer(O),O===null?null:(m.Shuffle(S,w,A,R,O),this)},swapByIndex:function(S,w,A,R,O,F,L){return L=this.getLayer(L),L===null?null:(m.SwapByIndex(S,w,A,R,O,F,L),this)},tileToWorldX:function(S,w,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldX(S,w,A)},tileToWorldY:function(S,w,A){return A=this.getLayer(A),A===null?null:this._convert.TileToWorldY(S,w,A)},tileToWorldXY:function(S,w,A,R,O){return O=this.getLayer(O),O===null?null:this._convert.TileToWorldXY(S,w,A,R,O)},getTileCorners:function(S,w,A,R){return R=this.getLayer(R),R===null?null:this._convert.GetTileCorners(S,w,A,R)},weightedRandomize:function(S,w,A,R,O,F){return F=this.getLayer(F),F===null?null:(m.WeightedRandomize(w,A,R,O,S,F),this)},worldToTileX:function(S,w,A,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileX(S,w,A,R)},worldToTileY:function(S,w,A,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileY(S,w,A,R)},worldToTileXY:function(S,w,A,R,O,F){return F=this.getLayer(F),F===null?null:this._convert.WorldToTileXY(S,w,A,R,O,F)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});o.exports=P},4843:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(99325),x=e(15043);d.register("tilemap",function(u){var l=u!==void 0?u:{};return x(this.scene,l.key,l.tileWidth,l.tileHeight,l.width,l.height,l.data,l.insertNull)})},37940:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(61286),x=e(15043);d.register("tilemap",function(u,l,h,n,r,f,a){return u===null&&(u=void 0),l===null&&(l=void 0),h===null&&(h=void 0),n===null&&(n=void 0),r===null&&(r=void 0),x(this.scene,u,l,h,n,r,f,a)})},87177:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(64937),u=e(89980),l=e(5047),h=e(96193),n=e(93736),r=new d({Extends:u,Mixins:[x.Alpha,x.BlendMode,x.ComputedSize,x.Depth,x.Flip,x.GetBounds,x.Mask,x.Origin,x.Pipeline,x.PostPipeline,x.Transform,x.Visible,x.ScrollFactor,h],initialize:function(a,c,p,v,m,y){u.call(this,a,"TilemapLayer"),this.isTilemap=!0,this.tilemap=c,this.layerIndex=p,this.layer=c.layers[p],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=l.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new n,this.setTilesets(v),this.setAlpha(this.layer.alpha),this.setPosition(m,y),this.setOrigin(0,0),this.setSize(c.tileWidth*this.layer.width,c.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(f){var a=[],c=[],p=this.tilemap;Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var m=f[v];if(typeof m=="string"&&(m=p.getTileset(m)),m){c.push(m);for(var y=m.firstgid,E=0;E<m.total;E++)a[y+E]=m}}this.gidMap=a,this.tileset=c},setRenderOrder:function(f){var a=["right-down","left-down","right-up","left-up"];return typeof f=="string"&&(f=a.indexOf(f)),f>=0&&f<4&&(this._renderOrder=f),this},calculateFacesAt:function(f,a){return l.CalculateFacesAt(f,a,this.layer),this},calculateFacesWithin:function(f,a,c,p){return l.CalculateFacesWithin(f,a,c,p,this.layer),this},createFromTiles:function(f,a,c,p,v){return l.CreateFromTiles(f,a,c,p,v,this.layer)},cull:function(f){return this.cullCallback(this.layer,f,this.culledTiles,this._renderOrder)},copy:function(f,a,c,p,v,m,y){return l.Copy(f,a,c,p,v,m,y,this.layer),this},fill:function(f,a,c,p,v,m){return l.Fill(f,a,c,p,v,m,this.layer),this},filterTiles:function(f,a,c,p,v,m,y){return l.FilterTiles(f,a,c,p,v,m,y,this.layer)},findByIndex:function(f,a,c){return l.FindByIndex(f,a,c,this.layer)},findTile:function(f,a,c,p,v,m,y){return l.FindTile(f,a,c,p,v,m,y,this.layer)},forEachTile:function(f,a,c,p,v,m,y){return l.ForEachTile(f,a,c,p,v,m,y,this.layer),this},setTint:function(f,a,c,p,v,m){f===void 0&&(f=16777215);var y=function(E){E.tint=f};return this.forEachTile(y,this,a,c,p,v,m)},getTileAt:function(f,a,c){return l.GetTileAt(f,a,c,this.layer)},getTileAtWorldXY:function(f,a,c,p){return l.GetTileAtWorldXY(f,a,c,p,this.layer)},getIsoTileAtWorldXY:function(f,a,c,p,v){c===void 0&&(c=!0);var m=this.tempVec;return l.IsometricWorldToTileXY(f,a,!0,m,v,this.layer,c),this.getTileAt(m.x,m.y,p)},getTilesWithin:function(f,a,c,p,v){return l.GetTilesWithin(f,a,c,p,v,this.layer)},getTilesWithinShape:function(f,a,c){return l.GetTilesWithinShape(f,a,c,this.layer)},getTilesWithinWorldXY:function(f,a,c,p,v,m){return l.GetTilesWithinWorldXY(f,a,c,p,v,m,this.layer)},hasTileAt:function(f,a){return l.HasTileAt(f,a,this.layer)},hasTileAtWorldXY:function(f,a,c){return l.HasTileAtWorldXY(f,a,c,this.layer)},putTileAt:function(f,a,c,p){return l.PutTileAt(f,a,c,p,this.layer)},putTileAtWorldXY:function(f,a,c,p,v){return l.PutTileAtWorldXY(f,a,c,p,v,this.layer)},putTilesAt:function(f,a,c,p){return l.PutTilesAt(f,a,c,p,this.layer),this},randomize:function(f,a,c,p,v){return l.Randomize(f,a,c,p,v,this.layer),this},removeTileAt:function(f,a,c,p){return l.RemoveTileAt(f,a,c,p,this.layer)},removeTileAtWorldXY:function(f,a,c,p,v){return l.RemoveTileAtWorldXY(f,a,c,p,v,this.layer)},renderDebug:function(f,a){return l.RenderDebug(f,a,this.layer),this},replaceByIndex:function(f,a,c,p,v,m){return l.ReplaceByIndex(f,a,c,p,v,m,this.layer),this},setSkipCull:function(f){return f===void 0&&(f=!0),this.skipCull=f,this},setCullPadding:function(f,a){return f===void 0&&(f=1),a===void 0&&(a=1),this.cullPaddingX=f,this.cullPaddingY=a,this},setCollision:function(f,a,c,p){return l.SetCollision(f,a,c,this.layer,p),this},setCollisionBetween:function(f,a,c,p){return l.SetCollisionBetween(f,a,c,p,this.layer),this},setCollisionByProperty:function(f,a,c){return l.SetCollisionByProperty(f,a,c,this.layer),this},setCollisionByExclusion:function(f,a,c){return l.SetCollisionByExclusion(f,a,c,this.layer),this},setCollisionFromCollisionGroup:function(f,a){return l.SetCollisionFromCollisionGroup(f,a,this.layer),this},setTileIndexCallback:function(f,a,c){return l.SetTileIndexCallback(f,a,c,this.layer),this},setTileLocationCallback:function(f,a,c,p,v,m){return l.SetTileLocationCallback(f,a,c,p,v,m,this.layer),this},shuffle:function(f,a,c,p){return l.Shuffle(f,a,c,p,this.layer),this},swapByIndex:function(f,a,c,p,v,m){return l.SwapByIndex(f,a,c,p,v,m,this.layer),this},tileToWorldX:function(f,a){return this.tilemap.tileToWorldX(f,a,this)},tileToWorldY:function(f,a){return this.tilemap.tileToWorldY(f,a,this)},tileToWorldXY:function(f,a,c,p){return this.tilemap.tileToWorldXY(f,a,c,p,this)},getTileCorners:function(f,a,c){return this.tilemap.getTileCorners(f,a,c,this)},weightedRandomize:function(f,a,c,p,v){return l.WeightedRandomize(a,c,p,v,f,this.layer),this},worldToTileX:function(f,a,c){return this.tilemap.worldToTileX(f,a,c,this)},worldToTileY:function(f,a,c){return this.tilemap.worldToTileY(f,a,c,this)},worldToTileXY:function(f,a,c,p,v){return this.tilemap.worldToTileXY(f,a,c,p,v,this)},destroy:function(f){f===void 0&&(f=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),f&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],u.prototype.destroy.call(this))}});o.exports=r},17394:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(69360),x=new d,u=new d,l=new d,h=function(n,r,f,a){var c=r.cull(f),p=c.length,v=f.alpha*r.alpha;if(!(p===0||v<=0)){var m=x,y=u,E=l;y.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),m.copyFrom(f.matrix);var P=n.currentContext,S=r.gidMap;P.save(),a?(m.multiplyWithOffset(a,-f.scrollX*r.scrollFactorX,-f.scrollY*r.scrollFactorY),y.e=r.x,y.f=r.y,m.multiply(y,E),E.copyToContext(P)):(y.e-=f.scrollX*r.scrollFactorX,y.f-=f.scrollY*r.scrollFactorY,y.copyToContext(P)),(!n.antialias||r.scaleX>1||r.scaleY>1)&&(P.imageSmoothingEnabled=!1);for(var w=0;w<p;w++){var A=c[w],R=S[A.index];if(!!R){var O=R.image.getSourceImage(),F=R.getTileTextureCoordinates(A.index),L=R.tileWidth,D=R.tileHeight;if(!(F===null||L===0||D===0)){var I=L*.5,B=D*.5;F.x+=R.tileOffset.x,F.y+=R.tileOffset.y,P.save(),P.translate(A.pixelX+I,A.pixelY+B),A.rotation!==0&&P.rotate(A.rotation),(A.flipX||A.flipY)&&P.scale(A.flipX?-1:1,A.flipY?-1:1),P.globalAlpha=v*A.alpha,P.drawImage(O,F.x,F.y,L,D,-I,-B,L,D),P.restore()}}}P.restore()}};o.exports=h},96193:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72283),x=d,u=d;x=e(51395),u=e(17394),o.exports={renderWebGL:x,renderCanvas:u}},51395:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(75512),x=function(u,l,h){var n=l.cull(h),r=n.length,f=h.alpha*l.alpha;if(!(r===0||f<=0)){var a=l.gidMap,c=u.pipelines.set(l.pipeline,l),p=d.getTintAppendFloatAlpha,v=l.scrollFactorX,m=l.scrollFactorY,y=l.x,E=l.y,P=l.scaleX,S=l.scaleY;u.pipelines.preBatch(l);for(var w=0;w<r;w++){var A=n[w],R=a[A.index];if(!!R){var O=R.getTileTextureCoordinates(A.index);if(O!==null){var F=R.glTexture,L=c.setTexture2D(F,l),D=R.tileWidth,I=R.tileHeight,B=O.x,V=O.y,Y=R.tileWidth*.5,W=R.tileHeight*.5,$=R.tileOffset.x,N=R.tileOffset.y,U=p(A.tint,f*A.alpha);c.batchTexture(l,F,F.width,F.height,y+A.pixelX*P+(Y*P-$),E+A.pixelY*S+(W*S-N),A.width,A.height,P,S,A.rotation,A.flipX,A.flipY,v,m,Y,W,B,V,D,I,U,U,U,U,!1,0,0,h,null,!0,L)}}}u.pipelines.postBatch(l)}};o.exports=x},47975:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(93736),u=new d({initialize:function(h,n,r,f,a,c,p,v,m){(r===void 0||r<=0)&&(r=32),(f===void 0||f<=0)&&(f=32),a===void 0&&(a=0),c===void 0&&(c=0),p===void 0&&(p={}),v===void 0&&(v={}),this.name=h,this.firstgid=n,this.tileWidth=r,this.tileHeight=f,this.tileMargin=a,this.tileSpacing=c,this.tileProperties=p,this.tileData=v,this.tileOffset=new x,m!==void 0&&this.tileOffset.set(m.x,m.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(l){return this.containsTileIndex(l)?this.tileProperties[l-this.firstgid]:null},getTileData:function(l){return this.containsTileIndex(l)?this.tileData[l-this.firstgid]:null},getTileCollisionGroup:function(l){var h=this.getTileData(l);return h&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(l){return l>=this.firstgid&&l<this.firstgid+this.total},getTileTextureCoordinates:function(l){return this.containsTileIndex(l)?this.texCoordinates[l-this.firstgid]:null},setImage:function(l){return this.image=l,this.glTexture=l.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(l,h){return l!==void 0&&(this.tileWidth=l),h!==void 0&&(this.tileHeight=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(l,h){return l!==void 0&&(this.tileMargin=l),h!==void 0&&(this.tileSpacing=h),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(l,h){var n=(h-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(l-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(n%1!==0||r%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),r=Math.floor(r),this.rows=n,this.columns=r,this.total=n*r,this.texCoordinates.length=0;for(var f=this.tileMargin,a=this.tileMargin,c=0;c<this.rows;c++){for(var p=0;p<this.columns;p++)this.texCoordinates.push({x:f,y:a}),f+=this.tileWidth+this.tileSpacing;f=this.tileMargin,a+=this.tileHeight+this.tileSpacing}return this}});o.exports=u},92839:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),x=function(u,l,h){var n=d(u,l,!0,h),r=d(u,l-1,!0,h),f=d(u,l+1,!0,h),a=d(u-1,l,!0,h),c=d(u+1,l,!0,h),p=n&&n.collides;return p&&(n.faceTop=!0,n.faceBottom=!0,n.faceLeft=!0,n.faceRight=!0),r&&r.collides&&(p&&(n.faceTop=!1),r.faceBottom=!p),f&&f.collides&&(p&&(n.faceBottom=!1),f.faceTop=!p),a&&a.collides&&(p&&(n.faceLeft=!1),a.faceRight=!p),c&&c.collides&&(p&&(n.faceRight=!1),c.faceLeft=!p),n&&!n.collides&&n.resetFaces(),n};o.exports=x},60386:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),x=e(50811),u=function(l,h,n,r,f){for(var a=null,c=null,p=null,v=null,m=x(l,h,n,r,null,f),y=0;y<m.length;y++){var E=m[y];E&&(E.collides?(a=d(E.x,E.y-1,!0,f),c=d(E.x,E.y+1,!0,f),p=d(E.x-1,E.y,!0,f),v=d(E.x+1,E.y,!0,f),E.faceTop=!(a&&a.collides),E.faceBottom=!(c&&c.collides),E.faceLeft=!(p&&p.collides),E.faceRight=!(v&&v.collides)):E.resetFaces())}};o.exports=u},13125:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=new d,u=function(l,h,n,r){var f=n.tilemapLayer,a=f.cullPaddingX,c=f.cullPaddingY,p=f.tilemap.tileToWorldXY(l,h,x,r,f);return p.x>r.worldView.x+f.scaleX*n.tileWidth*(-a-.5)&&p.x<r.worldView.right+f.scaleX*n.tileWidth*(a-.5)&&p.y>r.worldView.y+f.scaleY*n.tileHeight*(-c-1)&&p.y<r.worldView.bottom+f.scaleY*n.tileHeight*(c-.5)};o.exports=u},17347:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60386),x=e(50811),u=e(62839),l=e(29633),h=function(n,r,f,a,c,p,v,m){v===void 0&&(v=!0);var y=x(n,r,f,a,null,m),E=[];y.forEach(function(F){var L=new l(F.layer,F.index,F.x,F.y,F.width,F.height,F.baseWidth,F.baseHeight);L.copy(F),E.push(L)});for(var P=c-n,S=p-r,w=0;w<E.length;w++){var A=E[w],R=A.x+P,O=A.y+S;u(R,O,m)&&m.data[O][R]&&(A.x=R,A.y=O,A.updatePixelXY(),m.data[O][R]=A)}v&&d(c-1,p-1,f+2,a+2,m),y.length=0,E.length=0};o.exports=h},93604:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(51202),u=function(l,h,n,r,f,a){n||(n={}),Array.isArray(l)||(l=[l]);var c=a.tilemapLayer;r||(r=c.scene),f||(f=r.cameras.main);var p=d(0,0,a.width,a.height,null,a),v=[],m;for(m=0;m<p.length;m++){var y=p[m];if(l.indexOf(y.index)!==-1){var E=c.tileToWorldXY(y.x,y.y,void 0,f,a);n.x=E.x,n.y=E.y,v.push(r.make.sprite(n))}}if(typeof h=="number")for(m=0;m<l.length;m++)x(l[m],h,0,0,a.width,a.height,a);else if(Array.isArray(h))for(m=0;m<l.length;m++)x(l[m],h[m],0,0,a.width,a.height,a);return v};o.exports=u},71586:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(74118),x=e(82127),u=e(84314),l=new d,h=function(n,r){var f=n.tilemapLayer.tilemap,a=n.tilemapLayer,c=Math.floor(f.tileWidth*a.scaleX),p=Math.floor(f.tileHeight*a.scaleY),v=u(r.worldView.x-a.x,c,0,!0)-a.cullPaddingX,m=x(r.worldView.right-a.x,c,0,!0)+a.cullPaddingX,y=u(r.worldView.y-a.y,p,0,!0)-a.cullPaddingY,E=x(r.worldView.bottom-a.y,p,0,!0)+a.cullPaddingY;return l.setTo(v,y,m-v,E-y)};o.exports=h},381:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(71586),x=e(6987),u=function(l,h,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var f=l.tilemapLayer,a=d(l,h);return(f.skipCull||f.scrollFactorX!==1||f.scrollFactorY!==1)&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),x(l,a,r,n),n};o.exports=u},97734:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(60386),u=e(68234),l=function(h,n,r,f,a,c,p){for(var v=p.collideIndexes.indexOf(h)!==-1,m=d(n,r,f,a,null,p),y=0;y<m.length;y++)m[y].index=h,u(m[y],v);c&&x(n-1,r-1,f+2,a+2,p)};o.exports=l},63555:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,l,h,n,r,f,a,c){var p=d(h,n,r,f,a,c);return p.filter(u,l)};o.exports=x},37982:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d===void 0&&(d=0),x===void 0&&(x=!1);var l=0,h,n,r;if(x){for(n=u.height-1;n>=0;n--)for(h=u.width-1;h>=0;h--)if(r=u.data[n][h],r&&r.index===e){if(l===d)return r;l+=1}}else for(n=0;n<u.height;n++)for(h=0;h<u.width;h++)if(r=u.data[n][h],r&&r.index===e){if(l===d)return r;l+=1}return null};o.exports=T},48297:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,l,h,n,r,f,a,c){var p=d(h,n,r,f,a,c);return p.find(u,l)||null};o.exports=x},80916:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,l,h,n,r,f,a,c){var p=d(h,n,r,f,a,c);p.forEach(u,l)};o.exports=x},31493:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(381),u=e(37524),l=e(20887),h=e(72283),n=e(19242),r=function(f){return f===d.ORTHOGONAL?x:f===d.HEXAGONAL?u:f===d.STAGGERED?n:f===d.ISOMETRIC?l:h};o.exports=r},15494:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62839),x=function(u,l,h,n){if(h===void 0&&(h=!1),d(u,l,n)){var r=n.data[l][u]||null;return r?r.index===-1?h?r:null:r:null}else return null};o.exports=x},24640:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(15494),x=e(93736),u=new x,l=function(h,n,r,f,a){return a.tilemapLayer.worldToTileXY(h,n,!0,u,f),d(u.x,u.y,r,a)};o.exports=l},48495:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n){var r=n.baseTileWidth,f=n.baseTileHeight,a=n.tilemapLayer,c=0,p=0;a&&(h||(h=a.scene.cameras.main),c=a.x+h.scrollX*(1-a.scrollFactorX),p=a.y+h.scrollY*(1-a.scrollFactorY),r*=a.scaleX,f*=a.scaleY);var v=c+u*r,m=p+l*f;return[new d(v,m),new d(v+r,m),new d(v+r,m+f),new d(v,m+f)]};o.exports=x},7160:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(63634),u=e(72283),l=e(48495),h=function(n){return n===d.ORTHOGONAL?l:n===d.ISOMETRIC?u:n===d.HEXAGONAL?x:(n===d.STAGGERED,u)};o.exports=h},16884:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(72283),u=e(44150),l=function(h){return h===d.ORTHOGONAL?u:x};o.exports=l},68182:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(21715),u=e(21808),l=e(72283),h=e(33388),n=e(46836),r=function(f){return f===d.ORTHOGONAL?n:f===d.ISOMETRIC?u:f===d.HEXAGONAL?x:f===d.STAGGERED?h:l};o.exports=r},3752:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(72283),u=e(84132),l=e(42477),h=function(n){return n===d.ORTHOGONAL?l:n===d.STAGGERED?u:x};o.exports=h},50811:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u,l,h,n,r,f){u===void 0&&(u=0),l===void 0&&(l=0),h===void 0&&(h=f.width),n===void 0&&(n=f.height),r||(r={});var a=d(r,"isNotEmpty",!1),c=d(r,"isColliding",!1),p=d(r,"hasInterestingFace",!1);u<0&&(h+=u,u=0),l<0&&(n+=l,l=0),u+h>f.width&&(h=Math.max(f.width-u,0)),l+n>f.height&&(n=Math.max(f.height-l,0));for(var v=[],m=l;m<l+n;m++)for(var y=u;y<u+h;y++){var E=f.data[m][y];if(E!==null){if(a&&E.index===-1||c&&!E.collides||p&&!E.hasInterestingFace)continue;v.push(E)}}return v};o.exports=x},31674:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(84068),x=e(50811),u=e(7563),l=e(72283),h=e(93736),n=function(p,v){return u.RectangleToTriangle(v,p)},r=new h,f=new h,a=new h,c=function(p,v,m,y){if(p===void 0)return[];var E=l;p instanceof d.Circle?E=u.CircleToRectangle:p instanceof d.Rectangle?E=u.RectangleToRectangle:p instanceof d.Triangle?E=n:p instanceof d.Line&&(E=u.LineToRectangle),y.tilemapLayer.worldToTileXY(p.left,p.top,!0,f,m);var P=f.x,S=f.y;y.tilemapLayer.worldToTileXY(p.right,p.bottom,!1,a,m);var w=Math.ceil(a.x),A=Math.ceil(a.y),R=Math.max(w-P,1),O=Math.max(A-S,1),F=x(P,S,R,O,v,y),L=y.tileWidth,D=y.tileHeight;y.tilemapLayer&&(L*=y.tilemapLayer.scaleX,D*=y.tilemapLayer.scaleY);for(var I=[],B=new d.Rectangle(0,0,L,D),V=0;V<F.length;V++){var Y=F[V];y.tilemapLayer.tileToWorldXY(Y.x,Y.y,r,m),B.x=r.x,B.y=r.y,E(p,B)&&I.push(Y)}return I};o.exports=c},44662:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(93736),u=new x,l=new x,h=function(n,r,f,a,c,p,v){var m=v.tilemapLayer.tilemap._convert.WorldToTileXY;m(n,r,!0,u,p,v);var y=u.x,E=u.y;m(n+f,r+a,!1,l,p,v);var P=Math.ceil(l.x),S=Math.ceil(l.y);return d(y,E,P-y,S-E,c,v)};o.exports=h},29296:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(10618),u=e(806),l=function(h){return h===d.ORTHOGONAL?u:x};o.exports=l},32688:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(11516),u=e(18750),l=e(72283),h=e(90562),n=e(45676),r=function(f){return f===d.ORTHOGONAL?n:f===d.ISOMETRIC?u:f===d.HEXAGONAL?x:f===d.STAGGERED?h:l};o.exports=r},74326:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=e(10618),u=e(3689),l=e(70520),h=function(n){return n===d.ORTHOGONAL?l:n===d.STAGGERED?u:x};o.exports=h},46598:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(62839),x=function(u,l,h){if(d(u,l,h)){var n=h.data[l][u];return n!==null&&n.index>-1}else return!1};o.exports=x},28654:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(46598),x=e(93736),u=new x,l=function(h,n,r,f){f.tilemapLayer.worldToTileXY(h,n,!0,u,r);var a=u.x,c=u.y;return d(a,c,f)};o.exports=l},6358:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82127),x=e(84314),u=function(l,h){var n=l.tilemapLayer.tilemap,r=l.tilemapLayer,f=Math.floor(n.tileWidth*r.scaleX),a=Math.floor(n.tileHeight*r.scaleY),c=l.hexSideLength,p,v,m,y;if(this.staggerAxis==="y"){var E=(a-c)/2+c;p=x(h.worldView.x-r.x,f,0,!0)-r.cullPaddingX,v=d(h.worldView.right-r.x,f,0,!0)+r.cullPaddingX,m=x(h.worldView.y-r.y,E,0,!0)-r.cullPaddingY,y=d(h.worldView.bottom-r.y,E,0,!0)+r.cullPaddingY}else{var P=(f-c)/2+c;p=x(h.worldView.x-r.x,P,0,!0)-r.cullPaddingX,v=d(h.worldView.right-r.x,P,0,!0)+r.cullPaddingX,m=x(h.worldView.y-r.y,a,0,!0)-r.cullPaddingY,y=d(h.worldView.bottom-r.y,a,0,!0)+r.cullPaddingY}return{left:p,right:v,top:m,bottom:y}};o.exports=u},37524:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(6358),x=e(6987),u=function(l,h,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var f=l.tilemapLayer,a=d(l,h);return f.skipCull&&f.scrollFactorX===1&&f.scrollFactorY===1&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),x(l,a,r,n),n};o.exports=u},63634:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21715),x=e(93736),u=new x,l=function(h,n,r,f){var a=f.baseTileWidth,c=f.baseTileHeight,p=f.tilemapLayer;p&&(a*=p.scaleX,c*=p.scaleY);var v=d(h,n,u,r,f),m=[],y=.5773502691896257,E,P;this.staggerAxis==="y"?(E=y*a,P=c/2):(E=a/2,P=y*c);for(var S=0;S<6;S++){var w=2*Math.PI*(.5-S)/6;m.push(new x(v.x+E*Math.cos(w),v.y+P*Math.sin(w)))}return m};o.exports=l},21715:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r){h||(h=new d);var f=r.baseTileWidth,a=r.baseTileHeight,c=r.tilemapLayer,p=0,v=0;c&&(n||(n=c.scene.cameras.main),p=c.x+n.scrollX*(1-c.scrollFactorX),v=c.y+n.scrollY*(1-c.scrollFactorY),f*=c.scaleX,a*=c.scaleY);var m=f/2,y=a/2,E,P;return this.staggerAxis==="y"?(E=p+f*u+f,P=v+1.5*l*y+y,l%2===0&&(this.staggerIndex==="odd"?E-=m:E+=m)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(E=p+1.5*u*m+m,P=v+a*u+a,u%2===0&&(this.staggerIndex==="odd"?P-=y:P+=y)),h.set(E,P)};o.exports=x},11516:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r,f){n||(n=new d);var a=f.baseTileWidth,c=f.baseTileHeight,p=f.tilemapLayer;p&&(r||(r=p.scene.cameras.main),u=u-(p.x+r.scrollX*(1-p.scrollFactorX)),l=l-(p.y+r.scrollY*(1-p.scrollFactorY)),a*=p.scaleX,c*=p.scaleY);var v=.5773502691896257,m=-.3333333333333333,y=0,E=.6666666666666666,P=a/2,S=c/2,w,A,R,O,F;f.staggerAxis==="y"?(w=(u-P)/(v*a),A=(l-S)/S,R=v*w+m*A,O=y*w+E*A):(w=(u-P)/P,A=(l-S)/(v*c),R=m*w+v*A,O=E*w+y*A),F=-R-O;var L=Math.round(R),D=Math.round(O),I=Math.round(F),B=Math.abs(L-R),V=Math.abs(D-O),Y=Math.abs(I-F);B>V&&B>Y?L=-D-I:V>Y&&(D=-L-I);var W,$=D;return f.staggerIndex==="odd"?W=$%2===0?D/2+L:D/2+L-.5:W=$%2===0?D/2+L:D/2+L+.5,n.set(W,$)};o.exports=x},62839:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e>=0&&e<x.width&&d>=0&&d<x.height};o.exports=T},20887:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(13125),x=function(u,l,h,n){h===void 0&&(h=[]),n===void 0&&(n=0),h.length=0;var r=u.tilemapLayer,f=u.data,a=u.width,c=u.height,p=r.skipCull,v=0,m=a,y=0,E=c,P,S,w;if(n===0){for(S=y;S<E;S++)for(P=v;P<m;P++)if(p||d(P,S,u,l)){if(w=f[S][P],!w||w.index===-1||!w.visible||w.alpha===0)continue;h.push(w)}}else if(n===1){for(S=y;S<E;S++)for(P=m;P>=v;P--)if(p||d(P,S,u,l)){if(w=f[S][P],!w||w.index===-1||!w.visible||w.alpha===0)continue;h.push(w)}}else if(n===2){for(S=E;S>=y;S--)for(P=v;P<m;P++)if(p||d(P,S,u,l)){if(w=f[S][P],!w||w.index===-1||!w.visible||w.alpha===0)continue;h.push(w)}}else if(n===3){for(S=E;S>=y;S--)for(P=m;P>=v;P--)if(p||d(P,S,u,l)){if(w=f[S][P],!w||w.index===-1||!w.visible||w.alpha===0)continue;h.push(w)}}return r.tilesDrawn=h.length,r.tilesTotal=a*c,h};o.exports=x},21808:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r){h||(h=new d);var f=r.baseTileWidth,a=r.baseTileHeight,c=r.tilemapLayer,p=0,v=0;c&&(n||(n=c.scene.cameras.main),p=c.x+n.scrollX*(1-c.scrollFactorX),f*=c.scaleX,v=c.y+n.scrollY*(1-c.scrollFactorY),a*=c.scaleY);var m=p+(u-l)*(f/2),y=v+(u+l)*(a/2);return h.set(m,y)};o.exports=x},18750:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r,f,a){n||(n=new d);var c=f.baseTileWidth,p=f.baseTileHeight,v=f.tilemapLayer;v&&(r||(r=v.scene.cameras.main),l=l-(v.y+r.scrollY*(1-v.scrollFactorY)),p*=v.scaleY,u=u-(v.x+r.scrollX*(1-v.scrollFactorX)),c*=v.scaleX);var m=c/2,y=p/2;u=u-m,a||(l=l-p);var E=.5*(u/m+l/y),P=.5*(-u/m+l/y);return h&&(E=Math.floor(E),P=Math.floor(P)),n.set(E,P)};o.exports=x},29003:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29633),x=e(62839),u=e(92839),l=e(68234),h=function(n,r,f,a,c){if(a===void 0&&(a=!0),!x(r,f,c))return null;var p,v=c.data[f][r],m=v&&v.collides;n instanceof d?(c.data[f][r]===null&&(c.data[f][r]=new d(c,n.index,r,f,c.tileWidth,c.tileHeight)),c.data[f][r].copy(n)):(p=n,c.data[f][r]===null?c.data[f][r]=new d(c,p,r,f,c.tileWidth,c.tileHeight):c.data[f][r].index=p);var y=c.data[f][r],E=c.collideIndexes.indexOf(y.index)!==-1;if(p=n instanceof d?n.index:n,p===-1)y.width=c.tileWidth,y.height=c.tileHeight;else{var P=c.tilemapLayer.tilemap.tiles,S=P[p][2],w=c.tilemapLayer.tileset[S];y.width=w.tileWidth,y.height=w.tileHeight}return l(y,E),a&&m!==y.collides&&u(r,f,c),y};o.exports=h},48565:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29003),x=e(93736),u=new x,l=function(h,n,r,f,a,c){return c.tilemapLayer.worldToTileXY(n,r,!0,u,a,c),d(h,u.x,u.y,f,c)};o.exports=l},56547:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(60386),x=e(29003),u=function(l,h,n,r,f){if(r===void 0&&(r=!0),!Array.isArray(l))return null;Array.isArray(l[0])||(l=[l]);for(var a=l.length,c=l[0].length,p=0;p<a;p++)for(var v=0;v<c;v++){var m=l[p][v];x(m,h+v,n+p,!1,f)}r&&d(h-1,n-1,c+2,a+2,f)};o.exports=u},91180:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(72861),u=function(l,h,n,r,f,a){var c,p=d(l,h,n,r,{},a);if(!f)for(f=[],c=0;c<p.length;c++)f.indexOf(p[c].index)===-1&&f.push(p[c].index);for(c=0;c<p.length;c++)p[c].index=x(f)};o.exports=u},929:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(29633),x=e(62839),u=e(92839),l=function(h,n,r,f,a){if(r===void 0&&(r=!0),f===void 0&&(f=!0),!x(h,n,a))return null;var c=a.data[n][h];if(c)a.data[n][h]=r?null:new d(a,-1,h,n,a.tileWidth,a.tileHeight);else return null;return f&&c&&c.collides&&u(h,n,a),c};o.exports=l},17384:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(929),x=e(93736),u=new x,l=function(h,n,r,f,a,c){return c.tilemapLayer.worldToTileXY(h,n,!0,u,a,c),d(u.x,u.y,r,f,c)};o.exports=l},93763:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(95509),u=new x(105,210,231,150),l=new x(243,134,48,200),h=new x(40,39,37,150),n=function(r,f,a){f===void 0&&(f={});var c=f.tileColor!==void 0?f.tileColor:u,p=f.collidingTileColor!==void 0?f.collidingTileColor:l,v=f.faceColor!==void 0?f.faceColor:h,m=d(0,0,a.width,a.height,null,a);r.translateCanvas(a.tilemapLayer.x,a.tilemapLayer.y),r.scaleCanvas(a.tilemapLayer.scaleX,a.tilemapLayer.scaleY);for(var y=0;y<m.length;y++){var E=m[y],P=E.width,S=E.height,w=E.pixelX,A=E.pixelY,R=E.collides?p:c;R!==null&&(r.fillStyle(R.color,R.alpha/255),r.fillRect(w,A,P,S)),w+=1,A+=1,P-=2,S-=2,v!==null&&(r.lineStyle(1,v.color,v.alpha/255),E.faceTop&&r.lineBetween(w,A,w+P,A),E.faceRight&&r.lineBetween(w+P,A,w+P,A+S),E.faceBottom&&r.lineBetween(w,A+S,w+P,A+S),E.faceLeft&&r.lineBetween(w,A,w,A+S))}};o.exports=n},51202:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,l,h,n,r,f,a){for(var c=d(h,n,r,f,null,a),p=0;p<c.length;p++)c[p]&&c[p].index===u&&(c[p].index=l)};o.exports=x},6987:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=e.data,h=e.width,n=e.height,r=e.tilemapLayer,f=Math.max(0,d.left),a=Math.min(h,d.right),c=Math.max(0,d.top),p=Math.min(n,d.bottom),v,m,y;if(x===0)for(m=c;m<p;m++)for(v=f;l[m]&&v<a;v++)y=l[m][v],!(!y||y.index===-1||!y.visible||y.alpha===0)&&u.push(y);else if(x===1)for(m=c;m<p;m++)for(v=a;l[m]&&v>=f;v--)y=l[m][v],!(!y||y.index===-1||!y.visible||y.alpha===0)&&u.push(y);else if(x===2)for(m=p;m>=c;m--)for(v=f;l[m]&&v<a;v++)y=l[m][v],!(!y||y.index===-1||!y.visible||y.alpha===0)&&u.push(y);else if(x===3)for(m=p;m>=c;m--)for(v=a;l[m]&&v>=f;v--)y=l[m][v],!(!y||y.index===-1||!y.visible||y.alpha===0)&&u.push(y);return r.tilesDrawn=u.length,r.tilesTotal=h*n,u};o.exports=T},51710:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=e(91181),l=function(h,n,r,f,a){n===void 0&&(n=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),Array.isArray(h)||(h=[h]);for(var c=0;c<h.length;c++)u(h[c],n,f);if(a)for(var p=0;p<f.height;p++)for(var v=0;v<f.width;v++){var m=f.data[p][v];m&&h.indexOf(m.index)!==-1&&d(m,n)}r&&x(0,0,f.width,f.height,f)};o.exports=l},15216:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=e(91181),l=function(h,n,r,f,a,c){if(r===void 0&&(r=!0),f===void 0&&(f=!0),c===void 0&&(c=!0),!(h>n)){for(var p=h;p<=n;p++)u(p,r,a);if(c)for(var v=0;v<a.height;v++)for(var m=0;m<a.width;m++){var y=a.data[v][m];y&&y.index>=h&&y.index<=n&&d(y,r)}f&&x(0,0,a.width,a.height,a)}};o.exports=l},33158:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=e(91181),l=function(h,n,r,f){n===void 0&&(n=!0),r===void 0&&(r=!0),Array.isArray(h)||(h=[h]);for(var a=0;a<f.height;a++)for(var c=0;c<f.width;c++){var p=f.data[a][c];p&&h.indexOf(p.index)===-1&&(d(p,n),u(p.index,n,f))}r&&x(0,0,f.width,f.height,f)};o.exports=l},4180:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=e(19256),l=function(h,n,r,f){n===void 0&&(n=!0),r===void 0&&(r=!0);for(var a=0;a<f.height;a++)for(var c=0;c<f.width;c++){var p=f.data[a][c];if(!!p){for(var v in h)if(!!u(p.properties,v)){var m=h[v];Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++)p.properties[v]===m[y]&&d(p,n)}}}r&&x(0,0,f.width,f.height,f)};o.exports=l},18625:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(68234),x=e(60386),u=function(l,h,n){l===void 0&&(l=!0),h===void 0&&(h=!0);for(var r=0;r<n.height;r++)for(var f=0;f<n.width;f++){var a=n.data[r][f];if(!!a){var c=a.getCollisionGroup();c&&c.objects&&c.objects.length>0&&d(a,l)}}h&&x(0,0,n.width,n.height,n)};o.exports=u},91181:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=x.collideIndexes.indexOf(e);d&&u===-1?x.collideIndexes.push(e):!d&&u!==-1&&x.collideIndexes.splice(u,1)};o.exports=T},68234:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};o.exports=T},11628:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){if(typeof e=="number")u.callbacks[e]=d!==null?{callback:d,callbackContext:x}:void 0;else for(var l=0,h=e.length;l<h;l++)u.callbacks[e[l]]=d!==null?{callback:d,callbackContext:x}:void 0};o.exports=T},72732:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,l,h,n,r,f,a){for(var c=d(u,l,h,n,null,a),p=0;p<c.length;p++)c[p].setCollisionCallback(r,f)};o.exports=x},34397:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=e(18592),u=function(l,h,n,r,f){var a=d(l,h,n,r,null,f),c=a.map(function(v){return v.index});x(c);for(var p=0;p<a.length;p++)a[p].index=c[p]};o.exports=u},53945:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(82127),x=e(84314),u=function(l,h){var n=l.tilemapLayer.tilemap,r=l.tilemapLayer,f=Math.floor(n.tileWidth*r.scaleX),a=Math.floor(n.tileHeight*r.scaleY),c=x(h.worldView.x-r.x,f,0,!0)-r.cullPaddingX,p=d(h.worldView.right-r.x,f,0,!0)+r.cullPaddingX,v=x(h.worldView.y-r.y,a/2,0,!0)-r.cullPaddingY,m=d(h.worldView.bottom-r.y,a/2,0,!0)+r.cullPaddingY;return{left:c,right:p,top:v,bottom:m}};o.exports=u},19242:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53945),x=e(6987),u=function(l,h,n,r){n===void 0&&(n=[]),r===void 0&&(r=0),n.length=0;var f=l.tilemapLayer,a=d(l,h);return f.skipCull&&f.scrollFactorX===1&&f.scrollFactorY===1&&(a.left=0,a.right=l.width,a.top=0,a.bottom=l.height),x(l,a,r,n),n};o.exports=u},33388:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r){h||(h=new d);var f=r.baseTileWidth,a=r.baseTileHeight,c=r.tilemapLayer,p=0,v=0;c&&(n||(n=c.scene.cameras.main),p=c.x+n.scrollX*(1-c.scrollFactorX),f*=c.scaleX,v=c.y+n.scrollY*(1-c.scrollFactorY),a*=c.scaleY);var m=p+u*f+l%2*(f/2),y=v+l*(a/2);return h.set(m,y)};o.exports=x},84132:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=x.baseTileHeight,l=x.tilemapLayer,h=0;return l&&(d===void 0&&(d=l.scene.cameras.main),h=l.y+d.scrollY*(1-l.scrollFactorY),u*=l.scaleY),h+e*(u/2)+u};o.exports=T},90562:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r,f){n||(n=new d);var a=f.baseTileWidth,c=f.baseTileHeight,p=f.tilemapLayer;p&&(r||(r=p.scene.cameras.main),l=l-(p.y+r.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,u=u-(p.x+r.scrollX*(1-p.scrollFactorX)),a*=p.scaleX);var v=h?Math.floor(l/(c/2)):l/(c/2),m=h?Math.floor((u+v%2*.5*a)/a):(u+v%2*.5*a)/a;return n.set(m,v)};o.exports=x},3689:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=u.baseTileHeight,h=u.tilemapLayer;return h&&(x||(x=h.scene.cameras.main),e=e-(h.y+x.scrollY*(1-h.scrollFactorY)),l*=h.scaleY),d?Math.floor(e/(l/2)):e/(l/2)};o.exports=T},55217:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,l,h,n,r,f,a){for(var c=d(h,n,r,f,null,a),p=0;p<c.length;p++)c[p]&&(c[p].index===u?c[p].index=l:c[p].index===l&&(c[p].index=u))};o.exports=x},44150:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=x.baseTileWidth,l=x.tilemapLayer,h=0;return l&&(d||(d=l.scene.cameras.main),h=l.x+d.scrollX*(1-l.scrollFactorX),u*=l.scaleX),h+e*u};o.exports=T},46836:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(44150),x=e(42477),u=e(93736),l=function(h,n,r,f,a){return r||(r=new u(0,0)),r.x=d(h,f,a),r.y=x(n,f,a),r};o.exports=l},42477:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=x.baseTileHeight,l=x.tilemapLayer,h=0;return l&&(d||(d=l.scene.cameras.main),h=l.y+d.scrollY*(1-l.scrollFactorY),u*=l.scaleY),h+e*u};o.exports=T},39677:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(50811),x=function(u,l,h,n,r,f){if(!!r){var a,c=d(u,l,h,n,null,f),p=0;for(a=0;a<r.length;a++)p+=r[a].weight;if(!(p<=0))for(a=0;a<c.length;a++){for(var v=Math.random()*p,m=0,y=-1,E=0;E<r.length;E++)if(m+=r[E].weight,v<=m){var P=r[E].index;y=Array.isArray(P)?P[Math.floor(Math.random()*P.length)]:P;break}c[a].index=y}}};o.exports=x},806:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45676),x=e(93736),u=new x,l=function(h,n,r,f){return d(h,0,n,u,r,f),u.x};o.exports=l},45676:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93736),x=function(u,l,h,n,r,f){h===void 0&&(h=!0),n||(n=new d);var a=f.baseTileWidth,c=f.baseTileHeight,p=f.tilemapLayer;p&&(r||(r=p.scene.cameras.main),u=u-(p.x+r.scrollX*(1-p.scrollFactorX)),l=l-(p.y+r.scrollY*(1-p.scrollFactorY)),a*=p.scaleX,c*=p.scaleY);var v=u/a,m=l/c;return h&&(v=Math.floor(v),m=Math.floor(m)),n.set(v,m)};o.exports=x},70520:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45676),x=e(93736),u=new x,l=function(h,n,r,f){return d(0,h,n,u,r,f),u.y};o.exports=l},5047:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CalculateFacesAt:e(92839),CalculateFacesWithin:e(60386),CheckIsoBounds:e(13125),Copy:e(17347),CreateFromTiles:e(93604),CullBounds:e(71586),CullTiles:e(381),Fill:e(97734),FilterTiles:e(63555),FindByIndex:e(37982),FindTile:e(48297),ForEachTile:e(80916),GetCullTilesFunction:e(31493),GetTileAt:e(15494),GetTileAtWorldXY:e(24640),GetTileCorners:e(48495),GetTileCornersFunction:e(7160),GetTilesWithin:e(50811),GetTilesWithinShape:e(31674),GetTilesWithinWorldXY:e(44662),GetTileToWorldXFunction:e(16884),GetTileToWorldXYFunction:e(68182),GetTileToWorldYFunction:e(3752),GetWorldToTileXFunction:e(29296),GetWorldToTileXYFunction:e(32688),GetWorldToTileYFunction:e(74326),HasTileAt:e(46598),HasTileAtWorldXY:e(28654),HexagonalCullBounds:e(6358),HexagonalCullTiles:e(37524),HexagonalGetTileCorners:e(63634),HexagonalTileToWorldXY:e(21715),HexagonalWorldToTileXY:e(11516),IsInLayerBounds:e(62839),IsometricCullTiles:e(20887),IsometricTileToWorldXY:e(21808),IsometricWorldToTileXY:e(18750),PutTileAt:e(29003),PutTileAtWorldXY:e(48565),PutTilesAt:e(56547),Randomize:e(91180),RemoveTileAt:e(929),RemoveTileAtWorldXY:e(17384),RenderDebug:e(93763),ReplaceByIndex:e(51202),RunCull:e(6987),SetCollision:e(51710),SetCollisionBetween:e(15216),SetCollisionByExclusion:e(33158),SetCollisionByProperty:e(4180),SetCollisionFromCollisionGroup:e(18625),SetLayerCollisionIndex:e(91181),SetTileCollision:e(68234),SetTileIndexCallback:e(11628),SetTileLocationCallback:e(72732),Shuffle:e(34397),StaggeredCullBounds:e(53945),StaggeredCullTiles:e(19242),StaggeredTileToWorldXY:e(33388),StaggeredTileToWorldY:e(84132),StaggeredWorldToTileXY:e(90562),StaggeredWorldToTileY:e(3689),SwapByIndex:e(55217),TileToWorldX:e(44150),TileToWorldXY:e(46836),TileToWorldY:e(42477),WeightedRandomize:e(39677),WorldToTileX:e(806),WorldToTileXY:e(45676),WorldToTileY:e(70520)}},12920:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={ORIENTATION:e(12920)};o.exports=d},52678:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=e(84758),u={Components:e(5047),Parsers:e(34124),Formats:e(93560),ImageCollection:e(97042),ParseToTilemap:e(15043),Tile:e(29633),Tilemap:e(89797),TilemapCreator:e(4843),TilemapFactory:e(37940),Tileset:e(47975),TilemapLayer:e(87177),Orientation:e(12920),LayerData:e(94990),MapData:e(16586),ObjectLayer:e(15256)};u=d(!1,u,x.ORIENTATION),o.exports=u},94990:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12920),u=e(72632),l=new d({initialize:function(n){n===void 0&&(n={}),this.name=u(n,"name","layer"),this.x=u(n,"x",0),this.y=u(n,"y",0),this.width=u(n,"width",0),this.height=u(n,"height",0),this.tileWidth=u(n,"tileWidth",0),this.tileHeight=u(n,"tileHeight",0),this.baseTileWidth=u(n,"baseTileWidth",this.tileWidth),this.baseTileHeight=u(n,"baseTileHeight",this.tileHeight),this.orientation=u(n,"orientation",x.ORTHOGONAL),this.widthInPixels=u(n,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=u(n,"heightInPixels",this.height*this.baseTileHeight),this.alpha=u(n,"alpha",1),this.visible=u(n,"visible",!0),this.properties=u(n,"properties",[]),this.indexes=u(n,"indexes",[]),this.collideIndexes=u(n,"collideIndexes",[]),this.callbacks=u(n,"callbacks",[]),this.bodies=u(n,"bodies",[]),this.data=u(n,"data",[]),this.tilemapLayer=u(n,"tilemapLayer",null),this.hexSideLength=u(n,"hexSideLength",0),this.staggerAxis=u(n,"staggerAxis","y"),this.staggerIndex=u(n,"staggerIndex","odd")}});o.exports=l},16586:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(12920),u=e(72632),l=new d({initialize:function(n){n===void 0&&(n={}),this.name=u(n,"name","map"),this.width=u(n,"width",0),this.height=u(n,"height",0),this.infinite=u(n,"infinite",!1),this.tileWidth=u(n,"tileWidth",0),this.tileHeight=u(n,"tileHeight",0),this.widthInPixels=u(n,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=u(n,"heightInPixels",this.height*this.tileHeight),this.format=u(n,"format",null),this.orientation=u(n,"orientation",x.ORTHOGONAL),this.renderOrder=u(n,"renderOrder","right-down"),this.version=u(n,"version","1"),this.properties=u(n,"properties",{}),this.layers=u(n,"layers",[]),this.images=u(n,"images",[]),this.objects=u(n,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=u(n,"collision",{}),this.tilesets=u(n,"tilesets",[]),this.imageCollections=u(n,"imageCollections",[]),this.tiles=u(n,"tiles",[]),this.hexSideLength=u(n,"hexSideLength",0),this.staggerAxis=u(n,"staggerAxis","y"),this.staggerIndex=u(n,"staggerIndex","odd")}});o.exports=l},15256:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=new d({initialize:function(h){h===void 0&&(h={}),this.name=x(h,"name","object layer"),this.opacity=x(h,"opacity",1),this.properties=x(h,"properties",{}),this.propertyTypes=x(h,"propertytypes",{}),this.type=x(h,"type","objectgroup"),this.visible=x(h,"visible",!0),this.objects=x(h,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});o.exports=u},21394:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(12920),x=function(u){return u=u.toLowerCase(),u==="isometric"?d.ISOMETRIC:u==="staggered"?d.STAGGERED:u==="hexagonal"?d.HEXAGONAL:d.ORTHOGONAL};o.exports=x},90715:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(84346),u=e(96097),l=e(2378),h=e(44909),n=function(r,f,a,c,p,v){var m;switch(f){case d.ARRAY_2D:m=x(r,a,c,p,v);break;case d.CSV:m=u(r,a,c,p,v);break;case d.TILED_JSON:m=l(r,a,v);break;case d.WELTMEISTER:m=h(r,a,v);break;default:console.warn("Unrecognized tilemap data format: "+f),m=null}return m};o.exports=n},84346:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(94990),u=e(16586),l=e(29633),h=function(n,r,f,a,c){for(var p=new x({tileWidth:f,tileHeight:a}),v=new u({name:n,tileWidth:f,tileHeight:a,format:d.ARRAY_2D,layers:[p]}),m=[],y=r.length,E=0,P=0;P<r.length;P++){m[P]=[];for(var S=r[P],w=0;w<S.length;w++){var A=parseInt(S[w],10);isNaN(A)||A===-1?m[P][w]=c?null:new l(p,-1,w,P,f,a):m[P][w]=new l(p,A,w,P,f,a)}E===0&&(E=S.length)}return v.width=p.width=E,v.height=p.height=y,v.widthInPixels=p.widthInPixels=E*f,v.heightInPixels=p.heightInPixels=y*a,p.data=m,v};o.exports=h},96097:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(84346),u=function(l,h,n,r,f){var a=h.trim().split(`
`).map(function(p){return p.split(",")}),c=x(l,a,n,r,f);return c.format=d.CSV,c};o.exports=u},30951:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(94990),x=e(29633),u=function(l,h){for(var n=[],r=0;r<l.layer.length;r++){for(var f=l.layer[r],a=new d({name:f.name,width:f.width,height:f.height,tileWidth:f.tilesize,tileHeight:f.tilesize,visible:f.visible===1}),c=[],p=[],v=0;v<f.data.length;v++){for(var m=0;m<f.data[v].length;m++){var y=f.data[v][m]-1,E;y>-1?E=new x(a,y,m,v,f.tilesize,f.tilesize):E=h?null:new x(a,-1,m,v,f.tilesize,f.tilesize),c.push(E)}p.push(c),c=[]}a.data=p,n.push(a)}return n};o.exports=u},47488:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),x=function(u){for(var l=[],h=[],n=0;n<u.layer.length;n++){var r=u.layer[n],f=r.tilesetName;f!==""&&h.indexOf(f)===-1&&(h.push(f),l.push(new d(f,0,r.tilesize,r.tilesize,0,0)))}return l};o.exports=x},44909:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(93560),x=e(16586),u=e(30951),l=e(47488),h=function(n,r,f){if(r.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+n),null;for(var a=0,c=0,p=0;p<r.layer.length;p++)r.layer[p].width>a&&(a=r.layer[p].width),r.layer[p].height>c&&(c=r.layer[p].height);var v=new x({width:a,height:c,name:n,tileWidth:r.layer[0].tilesize,tileHeight:r.layer[0].tilesize,format:d.WELTMEISTER});return v.layers=u(r,f),v.tilesets=l(r),v};o.exports=h},24507:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ParseTileLayers:e(30951),ParseTilesets:e(47488),ParseWeltmeister:e(44909)}},34124:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={FromOrientationString:e(21394),Parse:e(90715),Parse2DArray:e(84346),ParseCSV:e(96097),Impact:e(24507),Tiled:e(50044)}},48646:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(98611),x=function(u){for(var l,h,n,r,f,a=0;a<u.layers.length;a++){l=u.layers[a],r=null;for(var c=0;c<l.data.length;c++){f=l.data[c];for(var p=0;p<f.length;p++)h=f[p],!(h===null||h.index<0)&&(n=u.tiles[h.index][2],r=u.tilesets[n],h.width=r.tileWidth,h.height=r.tileHeight,r.tileProperties&&r.tileProperties[h.index-r.firstgid]&&(h.properties=d(h.properties,r.tileProperties[h.index-r.firstgid])))}}};o.exports=x},43908:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=window.atob(e),x=d.length,u=new Array(x/4),l=0;l<x;l+=4)u[l/4]=(d.charCodeAt(l)|d.charCodeAt(l+1)<<8|d.charCodeAt(l+2)<<16|d.charCodeAt(l+3)<<24)>>>0;return u};o.exports=T},14556:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),x=function(u){var l,h,n=[];for(l=0;l<u.imageCollections.length;l++)for(var r=u.imageCollections[l],f=r.images,a=0;a<f.length;a++){var c=f[a];h=new d(c.image,c.gid,r.imageWidth,r.imageHeight,0,0),h.updateTileData(r.imageWidth,r.imageHeight),u.tilesets.push(h)}for(l=0;l<u.tilesets.length;l++){h=u.tilesets[l];for(var p=h.tileMargin,v=h.tileMargin,m=0,y=0,E=0,P=h.firstgid;P<h.firstgid+h.total&&(n[P]=[p,v,l],p+=h.tileWidth+h.tileSpacing,m++,!(m===h.total||(y++,y===h.columns&&(p=h.tileMargin,v+=h.tileHeight+h.tileSpacing,y=0,E++,E===h.rows))));P++);}return n};o.exports=x},92044:(o,T,e)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=function(u,l,h){if(!l)return{i:0,layers:u.layers,name:"",opacity:1,visible:!0,x:0,y:0};var n=l.x+d(l,"startx",0)*u.tilewidth+d(l,"offsetx",0),r=l.y+d(l,"starty",0)*u.tileheight+d(l,"offsety",0);return{i:0,layers:l.layers,name:h.name+l.name+"/",opacity:h.opacity*l.opacity,visible:h.visible&&l.visible,x:h.x+n,y:h.y+r}};o.exports=x},8847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=2147483648,e=1073741824,d=536870912,x=function(u){var l=Boolean(u&T),h=Boolean(u&e),n=Boolean(u&d);u=u&~(T|e|d);var r=0,f=!1;return l&&h&&n?(r=Math.PI/2,f=!0):l&&h&&!n?(r=Math.PI,f=!1):l&&!h&&n?(r=Math.PI/2,f=!1):l&&!h&&!n?(r=0,f=!0):!l&&h&&n?(r=3*Math.PI/2,f=!1):!l&&h&&!n?(r=Math.PI,f=!0):!l&&!h&&n?(r=3*Math.PI/2,f=!0):!l&&!h&&!n&&(r=0,f=!1),{gid:u,flippedHorizontal:l,flippedVertical:h,flippedAntiDiagonal:n,rotation:r,flipped:f}};o.exports=x},78339:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=e(92044),u=function(l){for(var h=[],n=[],r=x(l);r.i<r.layers.length||n.length>0;){if(r.i>=r.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=n.pop();continue}var f=r.layers[r.i];if(r.i++,f.type!=="imagelayer"){if(f.type==="group"){var a=x(l,f,r);n.push(r),r=a}continue}var c=d(f,"offsetx",0)+d(f,"startx",0),p=d(f,"offsety",0)+d(f,"starty",0);h.push({name:r.name+f.name,image:f.image,x:r.x+c+f.x,y:r.y+p+f.y,alpha:r.opacity*f.opacity,visible:r.visible&&f.visible,properties:d(f,"properties",{})})}return h};o.exports=u},2378:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(48646),x=e(14556),u=e(12920),l=e(28699),h=e(93560),n=e(21394),r=e(16586),f=e(78339),a=e(61136),c=e(95925),p=e(93392),v=function(m,y,E){var P=l(y),S=new r({width:P.width,height:P.height,name:m,tileWidth:P.tilewidth,tileHeight:P.tileheight,orientation:n(P.orientation),format:h.TILED_JSON,version:P.version,properties:P.properties,renderOrder:P.renderorder,infinite:P.infinite});S.orientation===u.HEXAGONAL&&(S.hexSideLength=P.hexsidelength,S.staggerAxis=P.staggeraxis,S.staggerIndex=P.staggerindex),S.layers=c(P,E),S.images=f(P);var w=p(P);return S.tilesets=w.tilesets,S.imageCollections=w.imageCollections,S.objects=a(P),S.tiles=x(S),d(S),S};o.exports=v},4281:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(28820),x=e(8847),u=function(n){return{x:n.x,y:n.y}},l=["id","name","type","rotation","properties","visible","x","y","width","height"],h=function(n,r,f){r===void 0&&(r=0),f===void 0&&(f=0);var a=d(n,l);if(a.x+=r,a.y+=f,n.gid){var c=x(n.gid);a.gid=c.gid,a.flippedHorizontal=c.flippedHorizontal,a.flippedVertical=c.flippedVertical,a.flippedAntiDiagonal=c.flippedAntiDiagonal}else n.polyline?a.polyline=n.polyline.map(u):n.polygon?a.polygon=n.polygon.map(u):n.ellipse?a.ellipse=n.ellipse:n.text?a.text=n.text:n.point?a.point=!0:a.rectangle=!0;return a};o.exports=h},61136:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72632),x=e(4281),u=e(15256),l=e(92044),h=function(n){for(var r=[],f=[],a=l(n);a.i<a.layers.length||f.length>0;){if(a.i>=a.layers.length){if(f.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=f.pop();continue}var c=a.layers[a.i];if(a.i++,c.opacity*=a.opacity,c.visible=a.visible&&c.visible,c.type!=="objectgroup"){if(c.type==="group"){var p=l(n,c,a);f.push(a),a=p}continue}c.name=a.name+c.name;for(var v=a.x+d(c,"startx",0)+d(c,"offsetx",0),m=a.y+d(c,"starty",0)+d(c,"offsety",0),y=[],E=0;E<c.objects.length;E++){var P=x(c.objects[E],v,m);y.push(P)}var S=new u(c);S.objects=y,r.push(S)}return r};o.exports=h},95925:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(43908),x=e(12920),u=e(92044),l=e(21394),h=e(72632),n=e(94990),r=e(8847),f=e(29633),a=function(c,p){for(var v=h(c,"infinite",!1),m=[],y=[],E=u(c);E.i<E.layers.length||y.length>0;){if(E.i>=E.layers.length){if(y.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}E=y.pop();continue}var P=E.layers[E.i];if(E.i++,P.type!=="tilelayer"){if(P.type==="group"){var S=u(c,P,E);y.push(E),E=S}continue}if(P.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+P.name+"'");continue}else if(P.encoding&&P.encoding==="base64"){if(P.chunks)for(var w=0;w<P.chunks.length;w++)P.chunks[w].data=d(P.chunks[w].data);P.data&&(P.data=d(P.data)),delete P.encoding}var A,R,O,F,L=[],D=0;if(v){var I=h(P,"startx",0)+P.x,B=h(P,"starty",0)+P.y;A=new n({name:E.name+P.name,x:E.x+h(P,"offsetx",0)+I*c.tilewidth,y:E.y+h(P,"offsety",0)+B*c.tileheight,width:P.width,height:P.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:E.opacity*P.opacity,visible:E.visible&&P.visible,properties:h(P,"properties",[]),orientation:l(c.orientation)}),A.orientation===x.HEXAGONAL&&(A.hexSideLength=c.hexsidelength,A.staggerAxis=c.staggeraxis,A.staggerIndex=c.staggerindex);for(var V=0;V<P.height;V++){L[V]=[null];for(var Y=0;Y<P.width;Y++)L[V][Y]=null}for(V=0,K=P.chunks.length;V<K;V++)for(var W=P.chunks[V],$=W.x-I,N=W.y-B,U=0,b=0,G=W.data.length;b<G;b++){var z=D+$,X=U+N;R=r(W.data[b]),R.gid>0?(O=new f(A,R.gid,z,X,c.tilewidth,c.tileheight),O.rotation=R.rotation,O.flipX=R.flipped,L[X][z]=O):(F=p?null:new f(A,-1,z,X,c.tilewidth,c.tileheight),L[X][z]=F),D++,D===W.width&&(U++,D=0)}}else{A=new n({name:E.name+P.name,x:E.x+h(P,"offsetx",0)+P.x,y:E.y+h(P,"offsety",0)+P.y,width:P.width,height:P.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:E.opacity*P.opacity,visible:E.visible&&P.visible,properties:h(P,"properties",[]),orientation:l(c.orientation)}),A.orientation===x.HEXAGONAL&&(A.hexSideLength=c.hexsidelength,A.staggerAxis=c.staggeraxis,A.staggerIndex=c.staggerindex);for(var k=[],H=0,K=P.data.length;H<K;H++)R=r(P.data[H]),R.gid>0?(O=new f(A,R.gid,D,L.length,c.tilewidth,c.tileheight),O.rotation=R.rotation,O.flipX=R.flipped,k.push(O)):(F=p?null:new f(A,-1,D,L.length,c.tilewidth,c.tileheight),k.push(F)),D++,D===P.width&&(L.push(k),D=0,k=[])}A.data=L,m.push(A)}return m};o.exports=a},93392:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(47975),x=e(97042),u=e(4281),l=e(39642),h=function(n){for(var r=[],f=[],a=null,c,p=0;p<n.tilesets.length;p++){var v=n.tilesets[p];if(v.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(v.image){var m=new d(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,void 0,void 0,v.tileoffset);if(n.version>1){var y=void 0,E=void 0;if(Array.isArray(v.tiles)){y=y||{},E=E||{};for(var P=0;P<v.tiles.length;P++){var S=v.tiles[P];if(S.properties){var w={};S.properties.forEach(function(V){w[V.name]=V.value}),E[S.id]=w}if(S.objectgroup&&((y[S.id]||(y[S.id]={})).objectgroup=S.objectgroup,S.objectgroup.objects)){var A=S.objectgroup.objects.map(function(V){return u(V)});y[S.id].objectgroup.objects=A}S.animation&&((y[S.id]||(y[S.id]={})).animation=S.animation),S.type&&((y[S.id]||(y[S.id]={})).type=S.type)}}Array.isArray(v.wangsets)&&(y=y||{},E=E||{},l(v.wangsets,y)),y&&(m.tileData=y,m.tileProperties=E)}else if(v.tileproperties&&(m.tileProperties=v.tileproperties),v.tiles){m.tileData=v.tiles;for(c in m.tileData){var R=m.tileData[c].objectgroup;if(R&&R.objects){var O=R.objects.map(function(V){return u(V)});m.tileData[c].objectgroup.objects=O}}}m.updateTileData(v.imagewidth,v.imageheight),r.push(m)}else{var F=new x(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),L=0;for(P=0;P<v.tiles.length;P++){S=v.tiles[P];var D=S.image,I=parseInt(S.id,10),B=v.firstgid+I;F.addImage(B,D),L=Math.max(I,L)}F.maxId=L,f.push(F)}a&&(a.lastgid=v.firstgid-1),a=v}return{tilesets:r,imageCollections:f}};o.exports=h},39642:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){for(var x=0;x<e.length;x++){var u=e[x],l=x;if(u.name&&u.name!==""&&(l=u.name),Array.isArray(u.wangtiles)&&u.wangtiles.length>0){var h={},n={},r,f,a;if(Array.isArray(u.edgecolors))for(r=0;r<u.edgecolors.length;r++)a=1+r,f=u.edgecolors[r],f.name!==""&&(h[a]=f.name);if(Array.isArray(u.cornercolors))for(r=0;r<u.cornercolors.length;r++)a=1+r,f=u.cornercolors[r],f.name!==""&&(n[a]=f.name);if(Array.isArray(u.colors))for(r=0;r<u.colors.length;r++)f=u.colors[r],a=1+r,f.name!==""&&(h[a]=n[a]=f.name);for(var c=[h,n,h,n,h,n,h,n],p=0;p<u.wangtiles.length;p++){var v=u.wangtiles[p],m=d[v.tileid]||(d[v.tileid]={});m=m.wangid||(m.wangid={});for(var y=[],E=0;E<Math.min(c.length,v.wangid.length);E++){if(f=v.wangid[E],f===0){y.push(void 0);continue}var P=c[E][f];if(P!==void 0){y.push(P);continue}y.push(f)}m[l]=y}}}};o.exports=T},50044:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={AssignTileProperties:e(48646),Base64Decode:e(43908),BuildTilesetIndex:e(14556),CreateGroupLayer:e(92044),ParseGID:e(8847),ParseImageLayers:e(78339),ParseJSONTiled:e(2378),ParseObject:e(4281),ParseObjectLayers:e(61136),ParseTileLayers:e(95925),ParseTilesets:e(93392)}},73779:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(91963),u=e(7599),l=e(57911),h=e(66458),n=new d({initialize:function(f){this.scene=f,this.systems=f.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],f.sys.events.once(u.BOOT,this.boot,this),f.sys.events.on(u.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var r=this.systems.events;r.on(u.PRE_UPDATE,this.preUpdate,this),r.on(u.UPDATE,this.update,this),r.once(u.SHUTDOWN,this.shutdown,this)},addEvent:function(r){var f;return r instanceof l?(f=r,this.removeEvent(f),f.elapsed=f.startAt,f.hasDispatched=!1,f.repeatCount=f.repeat===-1||f.loop?999999999999:f.repeat):f=new l(r),this._pendingInsertion.push(f),f},delayedCall:function(r,f,a,c){return this.addEvent({delay:r,callback:f,args:a,callbackScope:c})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(r){Array.isArray(r)||(r=[r]);for(var f=0;f<r.length;f++){var a=r[f];h(this._pendingRemoval,a),h(this._pendingInsertion,a),h(this._active,a)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var r=this._pendingRemoval.length,f=this._pendingInsertion.length;if(!(r===0&&f===0)){var a,c;for(a=0;a<r;a++){c=this._pendingRemoval[a];var p=this._active.indexOf(c);p>-1&&this._active.splice(p,1),c.destroy()}for(a=0;a<f;a++)c=this._pendingInsertion[a],this._active.push(c);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(r,f){if(this.now=r,!this.paused){f*=this.timeScale;for(var a=0;a<this._active.length;a++){var c=this._active[a];if(!c.paused&&(c.elapsed+=f*c.timeScale,c.elapsed>=c.delay)){var p=c.elapsed-c.delay;if(c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),c.repeatCount>0){if(c.repeatCount--,p>=c.delay)for(;p>=c.delay&&c.repeatCount>0;)c.callback&&c.callback.apply(c.callbackScope,c.args),p-=c.delay,c.repeatCount--;c.elapsed=p,c.hasDispatched=!1}else c.hasDispatched&&this._pendingRemoval.push(c)}}}},shutdown:function(){var r;for(r=0;r<this._pendingInsertion.length;r++)this._pendingInsertion[r].destroy();for(r=0;r<this._active.length;r++)this._active[r].destroy();for(r=0;r<this._pendingRemoval.length;r++)this._pendingRemoval[r].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var f=this.systems.events;f.off(u.PRE_UPDATE,this.preUpdate,this),f.off(u.UPDATE,this.update,this),f.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});x.register("Clock",n,"time"),o.exports=n},20517:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(61286),l=e(72632),h=e(7599),n=new d({Extends:x,initialize:function(f,a){x.call(this),this.scene=f,this.systems=f.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var c=this.systems.events;c.on(h.PRE_UPDATE,this.preUpdate,this),c.on(h.UPDATE,this.update,this),c.once(h.SHUTDOWN,this.destroy,this),a&&this.add(a)},preUpdate:function(r,f){this.paused||(this.elapsed+=f)},update:function(){if(!this.paused){var r,f=this.events,a=!1,c=this.systems,p;for(r=0;r<f.length;r++){var v=f[r];if(!v.complete&&v.time<=this.elapsed){if(v.complete=!0,this.totalComplete++,v.once&&(a=!0),v.set&&v.target)for(var m in v.set)v.target[m]=v.set[m];v.tween&&c.tweens.add(v.tween),v.sound&&(typeof v.sound=="string"?c.sound.play(v.sound):c.sound.play(v.sound.key,v.sound.config)),p=v.target?v.target:this,v.event&&this.emit(v.event,p),v.run&&v.run.call(p),v.stop&&this.stop()}}if(a)for(r=0;r<f.length;r++)f[r].complete&&f[r].once&&(f.splice(r,1),r--);this.totalComplete>=f.length&&(this.complete=!0)}},play:function(r){return r===void 0&&(r=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,r&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var r=0;r<this.events.length;r++)this.events[r].complete=!1;return this.play(!1)},add:function(r){Array.isArray(r)||(r=[r]);var f=this.events,a=0;f.length>0&&(a=f[f.length-1].time);for(var c=0;c<r.length;c++){var p=r[c],v=l(p,"at",0),m=l(p,"in",null);m!==null&&(v=this.elapsed+m);var y=l(p,"from",null);y!==null&&(v=a+y),f.push({complete:!1,time:v,run:l(p,"run",null),event:l(p,"event",null),target:l(p,"target",null),set:l(p,"set",null),tween:l(p,"tween",null),sound:l(p,"sound",null),once:l(p,"once",!1),stop:l(p,"stop",!1)}),a=v}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var r=Math.min(this.totalComplete,this.events.length);return r/this.events.length},destroy:function(){var r=this.systems.events;r.off(h.PRE_UPDATE,this.preUpdate,this),r.off(h.UPDATE,this.update,this),r.off(h.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});u.register("timeline",function(r){return new n(this.scene,r)}),o.exports=n},57911:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(72632),u=new d({initialize:function(h){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(h)},reset:function(l){if(this.delay=x(l,"delay",0),this.repeat=x(l,"repeat",0),this.loop=x(l,"loop",!1),this.callback=x(l,"callback",void 0),this.callbackScope=x(l,"callbackScope",this),this.args=x(l,"args",[]),this.timeScale=x(l,"timeScale",1),this.startAt=x(l,"startAt",0),this.paused=x(l,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var l=this.delay+this.delay*this.repeat,h=this.elapsed+this.delay*(this.repeat-this.repeatCount);return h/l}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(l){l===void 0&&(l=!1),this.elapsed=this.delay,this.hasDispatched=!l,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});o.exports=u},97121:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clock:e(73779),Timeline:e(20517),TimerEvent:e(57911)}},64532:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),x=e(56694),u=e(5454),l=e(68710),h=e(91963),n=e(7599),r=e(91944),f=e(39366),a=e(68061),c=e(45641),p=e(56034),v=new x({initialize:function(y){this.scene=y,this.events=y.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(n.BOOT,this.boot,this),this.events.on(n.START,this.start,this)},boot:function(){this.events.once(n.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(n.UPDATE,this.update,this),this.events.once(n.SHUTDOWN,this.shutdown,this)},create:function(m){Array.isArray(m)||(m=[m]);for(var y=[],E=0;E<m.length;E++){var P=m[E];P instanceof f||P instanceof c?y.push(P):Array.isArray(P.tweens)?y.push(p(this,P)):y.push(a(this,P))}return y.length===1?y[0]:y},add:function(m){var y=m,E=this.tweens;return y instanceof f||y instanceof c||(Array.isArray(y.tweens)?y=p(this,y):y=a(this,y)),E.push(y.reset()),y},addMultiple:function(m){for(var y,E=[],P=this.tweens,S=0;S<m.length;S++)y=m[S],y instanceof f||y instanceof c||(Array.isArray(y.tweens)?y=p(this,y):y=a(this,y)),P.push(y.reset()),E.push(y);return E},chain:function(m){var y=p(this,m);return this.tweens.push(y.init()),y},getChainedTweens:function(m){return m.getChainedTweens()},has:function(m){return this.tweens.indexOf(m)>-1},existing:function(m){return this.has(m)||this.tweens.push(m.reset()),this},addCounter:function(m){var y=l(this,m);return this.tweens.push(y.reset()),y},stagger:function(m,y){return r(m,y)},setLagSmooth:function(m,y){return m===void 0&&(m=1/1e-8),y===void 0&&(y=0),this.maxLag=m,this.lagSkip=Math.min(y,this.maxLag),this},setFps:function(m){return m===void 0&&(m=240),this.gap=1e3/m,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(m){var y=Date.now()-this.prevTime;y>this.maxLag&&(this.startTime+=y-this.lagSkip),this.prevTime+=y;var E=this.prevTime-this.startTime,P=E-this.nextTime,S=E-this.time*1e3;return P>0||m?(E/=1e3,this.time=E,this.nextTime+=P+(P>=this.gap?4:this.gap-P)):S=0,S},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(m){m===void 0&&(m=!1);var y=this.getDelta(m);if(!(y<=0)){this.processing=!0;var E,P,S=[],w=this.tweens;for(E=0;E<w.length;E++)P=w[E],P.update(y)&&S.push(P);var A=S.length;if(A&&w.length>0){for(E=0;E<A;E++){P=S[E];var R=w.indexOf(P);R>-1&&(P.isPendingRemove()||P.isDestroyed())&&(w.splice(R,1),P.destroy())}S.length=0}this.processing=!1}},remove:function(m){return this.processing?m.setPendingRemoveState():(d(this.tweens,m),m.setRemovedState()),this},reset:function(m){return this.existing(m),m.seek(),m.setActiveState(),this},makeActive:function(m){return this.existing(m),m.setActiveState(),this},each:function(m,y){var E,P=[null];for(E=1;E<arguments.length;E++)P.push(arguments[E]);return this.tweens.forEach(function(S){P[0]=S,m.apply(y,P)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(m){var y=[],E=this.tweens;Array.isArray(m)?m=u(m):m=[m];for(var P=m.length,S=0;S<E.length;S++)for(var w=E[S],A=0;A<P;A++)!w.isDestroyed()&&w.hasTarget(m[A])&&y.push(w);return y},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(m){return this.timeScale=m,this},isTweening:function(m){for(var y=this.tweens,E,P=0;P<y.length;P++)if(E=y[P],E.isPlaying()&&E.hasTarget(m))return!0;return!1},killAll:function(){for(var m=this.processing?this.getTweens():this.tweens,y=0;y<m.length;y++)m[y].destroy();return this.processing||(m.length=0),this},killTweensOf:function(m){for(var y=this.getTweensOf(m),E=0;E<y.length;E++)y[E].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(n.UPDATE,this.update,this),this.events.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(n.START,this.start,this),this.scene=null,this.events=null}});h.register("TweenManager",v,"tweens"),o.exports=v},63130:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){return e&&e.hasOwnProperty(d)?e[d]:x};o.exports=T},21902:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(35060),x=e(40587),u=function(l,h){var n=d.Power0;if(typeof l=="string")if(d.hasOwnProperty(l))n=d[l];else{var r="";if(l.indexOf(".")){r=l.substring(l.indexOf(".")+1);var f=r.toLowerCase();f==="in"?r="easeIn":f==="out"?r="easeOut":f==="inout"&&(r="easeInOut")}l=x(l.substring(0,l.indexOf(".")+1)+r),d.hasOwnProperty(l)&&(n=d[l])}else typeof l=="function"&&(n=l);if(!h)return n;var a=h.slice(0);return a.unshift(0),function(c){return a[0]=c,n.apply(this,a)}};o.exports=u},4840:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63210),x=e(88332),u=e(47614),l={bezier:d,catmull:x,catmullrom:x,linear:u},h=function(n){if(n===null)return null;var r=l.linear;return typeof n=="string"?l.hasOwnProperty(n)&&(r=l[n]):typeof n=="function"&&(r=n),r};o.exports=h},28348:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u;if(e.hasOwnProperty(d)){var l=typeof e[d];l==="function"?u=function(h,n,r,f,a,c){return e[d](h,n,r,f,a,c)}:u=function(){return e[d]}}else typeof x=="function"?u=x:u=function(){return x};return u};o.exports=T},92407:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(53709),x=function(u){var l,h=[];if(u.hasOwnProperty("props"))for(l in u.props)l.substring(0,1)!=="_"&&h.push({key:l,value:u.props[l]});else for(l in u)d.indexOf(l)===-1&&l.substring(0,1)!=="_"&&h.push({key:l,value:u[l]});return h};o.exports=x},65868:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x=function(u){var l=d(u,"targets",null);return l===null||(typeof l=="function"&&(l=l.call()),Array.isArray(l)||(l=[l])),l};o.exports=x},9744:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(17489),x=e(61616);function u(f){return!!f.getActive&&typeof f.getActive=="function"}function l(f){return!!f.getStart&&typeof f.getStart=="function"}function h(f){return!!f.getEnd&&typeof f.getEnd=="function"}function n(f){return l(f)||h(f)||u(f)}var r=function(f,a){var c,p=function(W,$,N){return N},v=function(W,$,N){return N},m=null,y=typeof a;if(y==="number")p=function(){return a};else if(Array.isArray(a))v=function(){return a[0]},p=function(){return a[a.length-1]};else if(y==="string"){var E=a.toLowerCase(),P=E.substring(0,6)==="random",S=E.substring(0,3)==="int";if(P||S){var w=E.indexOf("("),A=E.indexOf(")"),R=E.indexOf(",");if(w&&A&&R){var O=parseFloat(E.substring(w+1,R)),F=parseFloat(E.substring(R+1,A));P?p=function(){return x(O,F)}:p=function(){return d(O,F)}}else throw new Error("invalid random() format")}else{E=E[0];var L=parseFloat(a.substr(2));switch(E){case"+":p=function(W,$,N){return N+L};break;case"-":p=function(W,$,N){return N-L};break;case"*":p=function(W,$,N){return N*L};break;case"/":p=function(W,$,N){return N/L};break;default:p=function(){return parseFloat(a)}}}}else if(y==="function")p=a;else if(y==="object")if(n(a))u(a)&&(m=a.getActive),h(a)&&(p=a.getEnd),l(a)&&(v=a.getStart);else if(a.hasOwnProperty("value"))c=r(f,a.value);else{var D=a.hasOwnProperty("to"),I=a.hasOwnProperty("from"),B=a.hasOwnProperty("start");if(D&&(I||B)){if(c=r(f,a.to),B){var V=r(f,a.start);c.getActive=V.getEnd}if(I){var Y=r(f,a.from);c.getStart=Y.getEnd}}}return c||(c={getActive:m,getEnd:p,getStart:v}),c};o.exports=r},68710:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),x=e(99730),u=e(20494),l=e(63130),h=e(21902),n=e(28348),r=e(10850),f=e(9744),a=e(72066),c=e(39366),p=function(v,m,y){if(m instanceof c)return m.parent=v,m;y===void 0?y=x:y=a(x,y);var E=r(m,"from",0),P=r(m,"to",1),S=[{value:E}],w=r(m,"delay",y.delay),A=r(m,"easeParams",y.easeParams),R=r(m,"ease",y.ease),O=f("value",P),F=new c(v,S),L=F.add(0,"value",O.getEnd,O.getStart,O.getActive,h(r(m,"ease",R),r(m,"easeParams",A)),n(m,"delay",w),r(m,"duration",y.duration),l(m,"yoyo",y.yoyo),r(m,"hold",y.hold),r(m,"repeat",y.repeat),r(m,"repeatDelay",y.repeatDelay),!1,!1);L.start=E,L.current=E,F.completeDelay=u(m,"completeDelay",0),F.loop=Math.round(u(m,"loop",0)),F.loopDelay=Math.round(u(m,"loopDelay",0)),F.paused=l(m,"paused",!1),F.persist=l(m,"persist",!1),F.callbackScope=r(m,"callbackScope",F);for(var D=d.TYPES,I=0;I<D.length;I++){var B=D[I],V=r(m,B,!1);if(V){var Y=r(m,B+"Params",[]);F.setCallback(B,V,Y)}}return F};o.exports=p},91944:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(21902),x=e(10850),u=e(83392),l=function(h,n){n===void 0&&(n={});var r,f=x(n,"start",0),a=x(n,"ease",null),c=x(n,"grid",null),p=x(n,"from",0),v=p==="first",m=p==="center",y=p==="last",E=typeof p=="number",P=Array.isArray(h),S=parseFloat(P?h[0]:h),w=P?parseFloat(h[1]):0,A=Math.max(S,w);if(P&&(f+=S),c){var R=c[0],O=c[1],F=0,L=0,D=0,I=0,B=[];y?(F=R-1,L=O-1):E?(F=p%R,L=Math.floor(p/R)):m&&(F=(R-1)/2,L=(O-1)/2);for(var V=u.MIN_SAFE_INTEGER,Y=0;Y<O;Y++){B[Y]=[];for(var W=0;W<R;W++){D=F-W,I=L-Y;var $=Math.sqrt(D*D+I*I);$>V&&(V=$),B[Y][W]=$}}}var N=a?d(a):null;return c?r=function(U,b,G,z){var X=0,k=z%R,H=Math.floor(z/R);k>=0&&k<R&&H>=0&&H<O&&(X=B[H][k]);var K;if(P){var Z=w-S;N?K=X/V*Z*N(X/V):K=X/V*Z}else N?K=X*S*N(X/V):K=X*S;return K+f}:r=function(U,b,G,z,X){X--;var k;v?k=z:m?k=Math.abs(X/2-z):y?k=X-z:E&&(k=Math.abs(p-z));var H;if(P){var K;m?K=(w-S)/X*(k*2):K=(w-S)/X*k,N?H=K*N(k/X):H=K}else N?H=X*A*N(k/X):H=k*S;return H+f},r};o.exports=l},68061:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),x=e(99730),u=e(20494),l=e(63130),h=e(21902),n=e(4840),r=e(28348),f=e(92407),a=e(65868),c=e(10850),p=e(9744),v=e(72066),m=e(39366),y=function(E,P,S){if(P instanceof m)return P.parent=E,P;S===void 0?S=x:S=v(x,S);var w=a(P);!w&&S.targets&&(w=S.targets);for(var A=f(P),R=c(P,"delay",S.delay),O=c(P,"duration",S.duration),F=c(P,"easeParams",S.easeParams),L=c(P,"ease",S.ease),D=c(P,"hold",S.hold),I=c(P,"repeat",S.repeat),B=c(P,"repeatDelay",S.repeatDelay),V=l(P,"yoyo",S.yoyo),Y=l(P,"flipX",S.flipX),W=l(P,"flipY",S.flipY),$=c(P,"interpolation",S.interpolation),N=function(j,Q,_,q){if(_==="texture"){var et=q,at=void 0;Array.isArray(q)?(et=q[0],at=q[1]):q.hasOwnProperty("value")?(et=q.value,Array.isArray(q.value)?(et=q.value[0],at=q.value[1]):typeof q.value=="string"&&(et=q.value)):typeof q=="string"&&(et=q),j.addFrame(Q,et,at,r(q,"delay",R),c(q,"duration",O),c(q,"hold",D),c(q,"repeat",I),c(q,"repeatDelay",B),l(q,"flipX",Y),l(q,"flipY",W))}else{var ot=p(_,q),ht=n(c(q,"interpolation",$));j.add(Q,_,ot.getEnd,ot.getStart,ot.getActive,h(c(q,"ease",L),c(q,"easeParams",F)),r(q,"delay",R),c(q,"duration",O),l(q,"yoyo",V),c(q,"hold",D),c(q,"repeat",I),c(q,"repeatDelay",B),l(q,"flipX",Y),l(q,"flipY",W),ht,ht?q:null)}},U=new m(E,w),b=0;b<A.length;b++)for(var G=A[b].key,z=A[b].value,X=0;X<w.length;X++)G==="scale"&&!w[X].hasOwnProperty("scale")?(N(U,X,"scaleX",z),N(U,X,"scaleY",z)):N(U,X,G,z);U.completeDelay=u(P,"completeDelay",0),U.loop=Math.round(u(P,"loop",0)),U.loopDelay=Math.round(u(P,"loopDelay",0)),U.paused=l(P,"paused",!1),U.persist=l(P,"persist",!1),U.callbackScope=c(P,"callbackScope",U);for(var k=d.TYPES,H=0;H<k.length;H++){var K=k[H],Z=c(P,K,!1);if(Z){var J=c(P,K+"Params",[]);U.setCallback(K,Z,J)}}return U};o.exports=y},56034:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),x=e(20494),u=e(63130),l=e(65868),h=e(10850),n=e(68061),r=e(45641),f=function(a,c){if(c instanceof r)return c.parent=a,c;var p=new r(a);p.startDelay=h(c,"delay",0),p.completeDelay=x(c,"completeDelay",0),p.loop=Math.round(x(c,"loop",h(c,"repeat",0))),p.loopDelay=Math.round(x(c,"loopDelay",h(c,"repeatDelay",0))),p.paused=u(c,"paused",!1),p.persist=u(c,"persist",!0),p.callbackScope=h(c,"callbackScope",p);var v,m=d.TYPES;for(v=0;v<m.length;v++){var y=m[v],E=h(c,y,!1);if(E){var P=h(c,y+"Params",[]);p.setCallback(y,E,P)}}var S=h(c,"tweens",null);if(Array.isArray(S)){var w=[],A=l(c),R=void 0;for(A&&(R={targets:A}),v=0;v<S.length;v++)w.push(n(p,S[v],R));p.add(w)}return p};o.exports=f},79619:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={GetBoolean:e(63130),GetEaseFunction:e(21902),GetInterpolationFunction:e(4840),GetNewValue:e(28348),GetProps:e(92407),GetTargets:e(65868),GetValueOp:e(9744),NumberTweenBuilder:e(68710),StaggerBuilder:e(91944),TweenBuilder:e(68061)}},5570:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="active"},6383:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="complete"},72582:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="loop"},90281:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="pause"},80803:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="repeat"},13640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="resume"},10472:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="start"},5379:o=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="stop"},43449:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="update"},61541:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports="yoyo"},54272:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={TWEEN_ACTIVE:e(5570),TWEEN_COMPLETE:e(6383),TWEEN_LOOP:e(72582),TWEEN_PAUSE:e(90281),TWEEN_RESUME:e(13640),TWEEN_REPEAT:e(80803),TWEEN_START:e(10472),TWEEN_STOP:e(5379),TWEEN_UPDATE:e(43449),TWEEN_YOYO:e(61541)}},75193:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d={States:e(55303),Builders:e(79619),Events:e(54272),TweenManager:e(64532),Tween:e(39366),TweenData:e(15718),TweenFrameData:e(96490),BaseTween:e(502),TweenChain:e(45641)};o.exports=d},502:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(6659),u=e(54272),l=e(55303),h=new d({Extends:x,initialize:function(r){x.call(this),this.parent=r,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=l.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(u.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(u.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(u.TWEEN_COMPLETE,"onComplete")},complete:function(n){return n===void 0&&(n=0),n?(this.setCompleteDelayState(),this.countdown=n):this.onCompleteHandler(),this},completeAfterLoop:function(n){return n===void 0&&(n=0),this.loopCounter>n&&(this.loopCounter=n),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(u.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(n){this.countdown-=n,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(n){return this.countdown-=n,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(u.TWEEN_START,"onStart"),n=0),n},updateCompleteDelay:function(n){this.countdown-=n,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(n,r,f){return f===void 0&&(f=[]),this.callbacks.hasOwnProperty(n)&&(this.callbacks[n]={func:r,params:f}),this},setPendingState:function(){this.state=l.PENDING},setActiveState:function(){this.state=l.ACTIVE},setLoopDelayState:function(){this.state=l.LOOP_DELAY},setCompleteDelayState:function(){this.state=l.COMPLETE_DELAY},setStartDelayState:function(){this.state=l.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=l.PENDING_REMOVE},setRemovedState:function(){this.state=l.REMOVED},setFinishedState:function(){this.state=l.FINISHED},setDestroyedState:function(){this.state=l.DESTROYED},isPending:function(){return this.state===l.PENDING},isActive:function(){return this.state===l.ACTIVE},isLoopDelayed:function(){return this.state===l.LOOP_DELAY},isCompleteDelayed:function(){return this.state===l.COMPLETE_DELAY},isStartDelayed:function(){return this.state===l.START_DELAY},isPendingRemove:function(){return this.state===l.PENDING_REMOVE},isRemoved:function(){return this.state===l.REMOVED},isFinished:function(){return this.state===l.FINISHED},isDestroyed:function(){return this.state===l.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(n){n.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});h.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],o.exports=h},65521:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(56694),x=e(54272),u=e(55303),l=new d({initialize:function(n,r,f,a,c,p,v,m,y,E){this.tween=n,this.targetIndex=r,this.duration=a,this.totalDuration=0,this.delay=0,this.getDelay=f,this.yoyo=c,this.hold=p,this.repeat=v,this.repeatDelay=m,this.repeatCounter=0,this.flipX=y,this.flipY=E,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(h){h===void 0&&(h=this.current),this.tween.targets[this.targetIndex][this.key]=h},setCreatedState:function(){this.state=u.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=u.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=u.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=u.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=u.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=u.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=u.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=u.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===u.CREATED},isDelayed:function(){return this.state===u.DELAY},isPendingRender:function(){return this.state===u.PENDING_RENDER},isPlayingForward:function(){return this.state===u.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===u.PLAYING_BACKWARD},isHolding:function(){return this.state===u.HOLD_DELAY},isRepeating:function(){return this.state===u.REPEAT_DELAY},isComplete:function(){return this.state===u.COMPLETE},setStateFromEnd:function(h){this.yoyo?this.onRepeat(h,!0,!0):this.repeatCounter>0?this.onRepeat(h,!0,!1):this.setCompleteState()},setStateFromStart:function(h){this.repeatCounter>0?this.onRepeat(h,!1):this.setCompleteState()},reset:function(){var h=this.tween,n=h.totalTargets,r=this.targetIndex,f=h.targets[r],a=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(f,a,0,r,n,h),this.repeatCounter=this.repeat===-1?u.MAX:this.repeat,this.setPendingRenderState();var c=this.duration+this.hold;this.yoyo&&(c+=this.duration);var p=c+this.repeatDelay;this.totalDuration=this.delay+c,this.repeat===-1?(this.totalDuration+=p*u.MAX,h.isInfinite=!0):this.repeat>0&&(this.totalDuration+=p*this.repeat),this.totalDuration>h.duration&&(h.duration=this.totalDuration),this.delay<h.startDelay&&(h.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(h,n,r){var f=this.tween,a=f.totalTargets,c=this.targetIndex,p=f.targets[c],v=this.key,m=v!=="texture";if(this.elapsed=h,this.progress=h/this.duration,this.flipX&&p.toggleFlipX(),this.flipY&&p.toggleFlipY(),m&&(n||r)&&(this.start=this.getStartValue(p,v,this.start,c,a,f)),r){this.setPlayingBackwardState(),this.dispatchEvent(x.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,m&&(this.end=this.getEndValue(p,v,this.start,c,a,f)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-h,m&&(this.current=this.start,p[v]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(x.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});o.exports=l},99730:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};o.exports=T},53709:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(502),x=e(56694),u=e(54272),l=e(99325),h=e(61286),n=e(83392),r=e(55303),f=e(15718),a=e(96490),c=new x({Extends:d,initialize:function(v,m){d.call(this,v),this.targets=m,this.totalTargets=m.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(p,v,m,y,E,P,S,w,A,R,O,F,L,D,I,B){var V=new f(this,p,v,m,y,E,P,S,w,A,R,O,F,L,D,I,B);return this.totalData=this.data.push(V),V},addFrame:function(p,v,m,y,E,P,S,w,A,R){var O=new a(this,p,v,m,y,E,P,S,w,A,R);return this.totalData=this.data.push(O),O},getValue:function(p){p===void 0&&(p=0);var v=null;return this.data&&(v=this.data[p].current),v},hasTarget:function(p){return this.targets&&this.targets.indexOf(p)!==-1},updateTo:function(p,v,m){if(m===void 0&&(m=!1),p!=="texture")for(var y=0;y<this.totalData;y++){var E=this.data[y];E.key===p&&(E.isPlayingForward()||E.isPlayingBackward())&&(E.end=v,m&&(E.start=E.current))}return this},restart:function(){switch(this.state){case r.REMOVED:case r.FINISHED:this.seek(),this.parent.makeActive(this);break;case r.PENDING:case r.PENDING_REMOVE:this.parent.reset(this);break;case r.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,d.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(p,v,m){if(p===void 0&&(p=0),v===void 0&&(v=16.6),m===void 0&&(m=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;m||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive");var y=this.paused;if(this.paused=!1,p>0){for(var E=Math.floor(p/v),P=p-E*v,S=0;S<E;S++)this.update(v);P>0&&this.update(P)}return this.paused=y,this.isSeeking=!1,this},initTweenData:function(p){p===void 0&&(p=!1),this.duration=0,this.startDelay=n.MAX_SAFE_INTEGER;for(var v=this.data,m=0;m<this.totalData;m++)v[m].reset(p);this.duration=Math.max(this.duration,.01);var y=this.duration,E=this.completeDelay,P=this.loopCounter,S=this.loopDelay;P>0?this.totalDuration=y+E+(y+S)*P:this.totalDuration=y+E},reset:function(p){return p===void 0&&(p=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=r.MAX),p||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive")),this},update:function(p){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(p*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(p),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(p),!1;this.hasStarted||(this.startDelay-=p,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(u.TWEEN_START,"onStart"),p=0));var v=!1;if(this.isActive())for(var m=this.data,y=0;y<this.totalData;y++)m[y].update(p)&&(v=!0);this.elapsed+=p,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=p,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),v||this.nextState();var E=this.isPendingRemove();return E&&this.persist&&(this.setFinishedState(),E=!1),E},forward:function(p){return this.update(p),this},rewind:function(p){return this.update(-p),this},dispatchEvent:function(p,v){if(!this.isSeeking){this.emit(p,this,this.targets);var m=this.callbacks[v];m&&m.func.apply(this.callbackScope,[this,this.targets].concat(m.params))}},destroy:function(){d.prototype.destroy.call(this),this.targets=null}});h.register("tween",function(p){return this.scene.sys.tweens.add(p)}),l.register("tween",function(p){return this.scene.sys.tweens.create(p)}),o.exports=c},45641:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(66458),x=e(502),u=e(56694),l=e(54272),h=e(99325),n=e(61286),r=e(55303),f=new u({Extends:x,initialize:function(c){x.call(this,c),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?r.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(l.TWEEN_ACTIVE,"onActive"),this},add:function(a){var c=this.parent.create(a);Array.isArray(c)||(c=[c]);for(var p=this.data,v=0;v<c.length;v++){var m=c[v];m.parent=this,p.push(m.reset())}return this.totalData=p.length,this},remove:function(a){return d(this.data,a),a.setRemovedState(),a===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(a){for(var c=this.data,p=0;p<this.totalData;p++)if(c[p].hasTarget(a))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(a){return a.seek(),a.setActiveState(),this},makeActive:function(a){return a.reset(),a.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(l.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var a=this.data,c=this.totalData,p=0;p<c;p++)a[p].reset(!1);this.currentIndex=0,this.currentTween=a[0]},update:function(a){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;a*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(a):this.isCompleteDelayed()?this.updateCompleteDelay(a):this.isStartDelayed()&&(a=this.updateStartCountdown(a));var c=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(a)&&this.nextTween()&&this.nextState(),c=this.isPendingRemove(),c&&this.persist&&(this.setFinishedState(),c=!1)),c},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(a){this.currentIndex=a,this.currentTween=this.data[a],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(l.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(a,c){this.emit(a,this);var p=this.callbacks[c];p&&p.func.apply(this.callbackScope,[this].concat(p.params))},destroy:function(){x.prototype.destroy.call(this),this.currentTween=null}});n.register("tweenchain",function(a){return this.scene.sys.tweens.chain(a)}),h.register("tweenchain",function(a){return this.scene.sys.tweens.create(a)}),o.exports=f},15718:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65521),x=e(82897),u=e(56694),l=e(54272),h=new u({Extends:d,initialize:function(r,f,a,c,p,v,m,y,E,P,S,w,A,R,O,F,L){d.call(this,r,f,y,E,P,S,w,A,R,O),this.key=a,this.getActiveValue=v,this.getEndValue=c,this.getStartValue=p,this.ease=m,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=F,this.interpolationData=L},reset:function(n){d.prototype.reset.call(this);var r=this.tween.targets[this.targetIndex],f=this.key;n&&(r[f]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(r[f]=this.getActiveValue(r,f,0))},update:function(n){var r=this.tween,f=r.totalTargets,a=this.targetIndex,c=r.targets[a],p=this.key;if(!c)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(c,p,c[p],a,f,r),this.end=this.getEndValue(c,p,this.start,a,f,r),this.current=this.start,c[p]=this.start,this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),m=this.isPlayingBackward();if(v||m){var y=this.elapsed,E=this.duration,P=0,S=!1;y+=n,y>=E?(P=y-E,y=E,S=!0):y<0&&(y=0);var w=x(y/E,0,1);if(this.elapsed=y,this.progress=w,this.previous=this.current,S)v?(this.current=this.end,c[p]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(P)):(this.current=this.start,c[p]=this.start,this.setStateFromStart(P));else{v||(w=1-w);var A=this.ease(w);this.interpolation?this.current=this.interpolation(this.interpolationData,A):this.current=this.start+(this.end-this.start)*A,c[p]=this.current}this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,r){var f=this.tween;if(!f.isSeeking){var a=f.targets[this.targetIndex],c=this.key,p=this.current,v=this.previous;f.emit(n,f,c,a,p,v);var m=f.callbacks[r];m&&m.func.apply(f.callbackScope,[f,a,c,p,v].concat(m.params))}},destroy:function(){d.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});o.exports=h},96490:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(65521),x=e(82897),u=e(56694),l=e(54272),h=new u({Extends:d,initialize:function(r,f,a,c,p,v,m,y,E,P,S){d.call(this,r,f,p,v,!1,m,y,E,P,S),this.key="texture",this.startTexture=null,this.endTexture=a,this.startFrame=null,this.endFrame=c,this.yoyo=y!==0},reset:function(n){d.prototype.reset.call(this);var r=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=r.texture.key,this.startFrame=r.frame.name),n&&r.setTexture(this.startTexture,this.startFrame)},update:function(n){var r=this.tween,f=this.targetIndex,a=r.targets[f];if(!a)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=n,this.elapsed<=0&&(this.elapsed=0,n=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(l.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&a.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var c=this.isPlayingForward(),p=this.isPlayingBackward();if(c||p){var v=this.elapsed,m=this.duration,y=0,E=!1;v+=n,v>=m?(y=v-m,v=m,E=!0):v<0&&(v=0);var P=x(v/m,0,1);this.elapsed=v,this.progress=P,E&&(c?(a.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(y)):(a.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(y))),this.dispatchEvent(l.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(n,r){var f=this.tween;if(!f.isSeeking){var a=f.targets[this.targetIndex],c=this.key;f.emit(n,f,c,a);var p=f.callbacks[r];p&&p.func.apply(f.callbackScope,[f,a,c].concat(p.params))}},destroy:function(){d.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});o.exports=h},55303:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};o.exports=T},56694:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(h){return!!h.get&&typeof h.get=="function"||!!h.set&&typeof h.set=="function"}function e(h,n,r){var f=r?h[n]:Object.getOwnPropertyDescriptor(h,n);return!r&&f.value&&typeof f.value=="object"&&(f=f.value),f&&T(f)?(typeof f.enumerable>"u"&&(f.enumerable=!0),typeof f.configurable>"u"&&(f.configurable=!0),f):!1}function d(h,n){var r=Object.getOwnPropertyDescriptor(h,n);return r?(r.value&&typeof r.value=="object"&&(r=r.value),r.configurable===!1):!1}function x(h,n,r,f){for(var a in n)if(!!n.hasOwnProperty(a)){var c=e(n,a,r);if(c!==!1){var p=f||h;if(d(p.prototype,a)){if(l.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(h.prototype,a,c)}else h.prototype[a]=n[a]}}function u(h,n){if(!!n){Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++)x(h,n[r].prototype||n[r])}}function l(h){h||(h={});var n,r;if(h.initialize){if(typeof h.initialize!="function")throw new Error("initialize must be a function");n=h.initialize,delete h.initialize}else if(h.Extends){var f=h.Extends;n=function(){f.apply(this,arguments)}}else n=function(){};h.Extends?(n.prototype=Object.create(h.Extends.prototype),n.prototype.constructor=n,r=h.Extends,delete h.Extends):n.prototype.constructor=n;var a=null;return h.Mixins&&(a=h.Mixins,delete h.Mixins),u(n,a),x(n,h,!0,r),n}l.extend=x,l.mixin=u,l.ignoreFinals=!1,o.exports=l},72283:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){};o.exports=T},10618:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return null};o.exports=T},78991:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l){if(l===void 0&&(l=e),x>0){var h=x-e.length;if(h<=0)return null}if(!Array.isArray(d))return e.indexOf(d)===-1?(e.push(d),u&&u.call(l,d),d):null;for(var n=d.length-1;n>=0;)e.indexOf(d[n])!==-1&&d.splice(n,1),n--;if(n=d.length,n===0)return null;x>0&&n>h&&(d.splice(h),n=h);for(var r=0;r<n;r++){var f=d[r];e.push(f),u&&u.call(l,f)}return d};o.exports=T},48522:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u,l,h){if(x===void 0&&(x=0),h===void 0&&(h=e),u>0){var n=u-e.length;if(n<=0)return null}if(!Array.isArray(d))return e.indexOf(d)===-1?(e.splice(x,0,d),l&&l.call(h,d),d):null;for(var r=d.length-1;r>=0;)e.indexOf(d[r])!==-1&&d.pop(),r--;if(r=d.length,r===0)return null;u>0&&r>n&&(d.splice(n),r=n);for(var f=r-1;f>=0;f--){var a=d[f];e.splice(x,0,a),l&&l.call(h,a)}return d};o.exports=T},58742:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.indexOf(d);return x!==-1&&x<e.length&&(e.splice(x,1),e.push(d)),d};o.exports=T},30164:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,l,h,n,r){n===void 0&&(n=0),r===void 0&&(r=u.length);var f=0;if(d(u,n,r))for(var a=n;a<r;a++){var c=u[a];c[l]===h&&f++}return f};o.exports=x},36337:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u,l=[null];for(u=3;u<arguments.length;u++)l.push(arguments[u]);for(u=0;u<e.length;u++)l[0]=e[u],d.apply(x,l);return e};o.exports=T},46208:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,l,h,n,r){if(n===void 0&&(n=0),r===void 0&&(r=u.length),d(u,n,r)){var f,a=[null];for(f=5;f<arguments.length;f++)a.push(arguments[f]);for(f=n;f<r;f++)a[0]=u[f],l.apply(h,a)}return u};o.exports=x},2406:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d.length){if(d.length===1)return d[0]}else return NaN;var u=1,l,h;if(x){if(e<d[0][x])return d[0];for(;d[u][x]<e;)u++}else for(;d[u]<e;)u++;return u>d.length&&(u=d.length),x?(l=d[u-1][x],h=d[u][x],h-e<=e-l?d[u]:d[u-1]):(l=d[u-1],h=d[u],h-e<=e-l?h:l)};o.exports=T},5454:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=[]);for(var x=0;x<e.length;x++)Array.isArray(e[x])?T(e[x],d):d.push(e[x]);return d};o.exports=T},71608:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,l,h,n,r){n===void 0&&(n=0),r===void 0&&(r=u.length);var f=[];if(d(u,n,r))for(var a=n;a<r;a++){var c=u[a];(!l||l&&h===void 0&&c.hasOwnProperty(l)||l&&h!==void 0&&c[l]===h)&&f.push(c)}return f};o.exports=x},51463:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,l,h,n,r){if(n===void 0&&(n=0),r===void 0&&(r=u.length),d(u,n,r))for(var f=n;f<r;f++){var a=u[f];if(!l||l&&h===void 0&&a.hasOwnProperty(l)||l&&h!==void 0&&a[l]===h)return a}return null};o.exports=x},72861:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){d===void 0&&(d=0),x===void 0&&(x=e.length);var u=d+Math.floor(Math.random()*x);return e[u]===void 0?null:e[u]};o.exports=T},24218:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===x)return e;var u=e.indexOf(d),l=e.indexOf(x);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return u>l||(e.splice(u,1),l===e.length-1?e.push(d):e.splice(l,0,d)),e};o.exports=T},58258:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===x)return e;var u=e.indexOf(d),l=e.indexOf(x);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return u<l||(e.splice(u,1),l===0?e.unshift(d):e.splice(l,0,d)),e};o.exports=T},51172:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.indexOf(d);if(x>0){var u=e[x-1],l=e.indexOf(u);e[x]=u,e[l]=d}return e};o.exports=T},68396:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.indexOf(d);if(u===-1||x<0||x>=e.length)throw new Error("Supplied index out of bounds");return u!==x&&(e.splice(u,1),e.splice(x,0,d)),d};o.exports=T},27555:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.indexOf(d);if(x!==-1&&x<e.length-1){var u=e[x+1],l=e.indexOf(u);e[x]=u,e[l]=d}return e};o.exports=T},13401:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=[],h,n=!1;if((x||u)&&(n=!0,x||(x=""),u||(u="")),d<e)for(h=e;h>=d;h--)n?l.push(x+h.toString()+u):l.push(h);else for(h=e;h<=d;h++)n?l.push(x+h.toString()+u):l.push(h);return l};o.exports=T},89955:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(67233),x=function(u,l,h){u===void 0&&(u=0),l===void 0&&(l=null),h===void 0&&(h=1),l===null&&(l=u,u=0);for(var n=[],r=Math.max(d((l-u)/(h||1)),0),f=0;f<r;f++)n.push(u),u+=h;return n};o.exports=x},53466:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function T(x,u,l){var h=x[u];x[u]=x[l],x[l]=h}function e(x,u){return x<u?-1:x>u?1:0}var d=function(x,u,l,h,n){for(l===void 0&&(l=0),h===void 0&&(h=x.length-1),n===void 0&&(n=e);h>l;){if(h-l>600){var r=h-l+1,f=u-l+1,a=Math.log(r),c=.5*Math.exp(2*a/3),p=.5*Math.sqrt(a*c*(r-c)/r)*(f-r/2<0?-1:1),v=Math.max(l,Math.floor(u-f*c/r+p)),m=Math.min(h,Math.floor(u+(r-f)*c/r+p));d(x,u,v,m,n)}var y=x[u],E=l,P=h;for(T(x,l,u),n(x[h],y)>0&&T(x,l,h);E<P;){for(T(x,E,P),E++,P--;n(x[E],y)<0;)E++;for(;n(x[P],y)>0;)P--}n(x[l],y)===0?T(x,l,P):(P++,T(x,P,h)),P<=u&&(l=P+1),u<=P&&(h=P-1)}};o.exports=d},75757:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x=e(18592),u=function(h,n,r){for(var f=[],a=0;a<h.length;a++)for(var c=0;c<n.length;c++)for(var p=0;p<r;p++)f.push({a:h[a],b:n[c]});return f},l=function(h,n,r){var f=d(r,"max",0),a=d(r,"qty",1),c=d(r,"random",!1),p=d(r,"randomB",!1),v=d(r,"repeat",0),m=d(r,"yoyo",!1),y=[];if(p&&x(n),v===-1)if(f===0)v=0;else{var E=h.length*n.length*a;m&&(E*=2),v=Math.ceil(f/E)}for(var P=0;P<=v;P++){var S=u(h,n,a);c&&x(S),y=y.concat(S),m&&(S.reverse(),y=y.concat(S))}return f&&y.splice(f),y};o.exports=l},66458:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),x=function(u,l,h,n){n===void 0&&(n=u);var r;if(!Array.isArray(l))return r=u.indexOf(l),r!==-1?(d(u,r),h&&h.call(n,l),l):null;for(var f=l.length-1,a=[];f>=0;){var c=l[f];r=u.indexOf(c),r!==-1&&(d(u,r),a.push(c),h&&h.call(n,c)),f--}return a};o.exports=x},8324:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),x=function(u,l,h,n){if(n===void 0&&(n=u),l<0||l>u.length-1)throw new Error("Index out of bounds");var r=d(u,l);return h&&h.call(n,r),r};o.exports=x},47427:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,l,h,n,r){if(l===void 0&&(l=0),h===void 0&&(h=u.length),r===void 0&&(r=u),d(u,l,h)){var f=h-l,a=u.splice(l,f);if(n)for(var c=0;c<a.length;c++){var p=a[c];n.call(r,p)}return a}else return[]};o.exports=x},50147:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(72677),x=function(u,l,h){l===void 0&&(l=0),h===void 0&&(h=u.length);var n=l+Math.floor(Math.random()*h);return d(u,n)};o.exports=x},80402:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=e.indexOf(d),l=e.indexOf(x);return u!==-1&&l===-1?(e[u]=x,!0):!1};o.exports=T},77640:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1);for(var x=null,u=0;u<d;u++)x=e.shift(),e.push(x);return x};o.exports=T},38487:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){d===void 0&&(d=1);for(var x=null,u=0;u<d;u++)x=e.pop(),e.unshift(x);return x};o.exports=T},45838:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){var l=e.length;if(d<0||d>l||d>=x||x>l){if(u)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};o.exports=T},27847:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){var x=e.indexOf(d);return x!==-1&&x>0&&(e.splice(x,1),e.unshift(d)),d};o.exports=T},6034:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(45838),x=function(u,l,h,n,r){if(n===void 0&&(n=0),r===void 0&&(r=u.length),d(u,n,r))for(var f=n;f<r;f++){var a=u[f];a.hasOwnProperty(l)&&(a[l]=h)}return u};o.exports=x},18592:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=e.length-1;d>0;d--){var x=Math.floor(Math.random()*(d+1)),u=e[d];e[d]=e[x],e[x]=u}return e};o.exports=T},28834:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d=/\D/g;return e.sort(function(x,u){return parseInt(x.replace(d,""),10)-parseInt(u.replace(d,""),10)}),e};o.exports=T},72677:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){if(!(d>=e.length)){for(var x=e.length-1,u=e[d],l=d;l<x;l++)e[l]=e[l+1];return e.length=x,u}};o.exports=T},17922:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77290);function x(n,r){return String(n).localeCompare(r)}function u(n,r){var f=n.length;if(f<=1)return n;for(var a=new Array(f),c=1;c<f;c*=2){l(n,r,c,a);var p=n;n=a,a=p}return n}function l(n,r,f,a){var c=n.length,p=0,v=f*2,m,y,E,P,S;for(m=0;m<c;m+=v)for(y=m+f,E=y+f,y>c&&(y=c),E>c&&(E=c),P=m,S=y;;)if(P<y&&S<E)r(n[P],n[S])<=0?a[p++]=n[P++]:a[p++]=n[S++];else if(P<y)a[p++]=n[P++];else if(S<E)a[p++]=n[S++];else break}var h=function(n,r){if(r===void 0&&(r=x),!n||n.length<2)return n;if(d.features.stableSort)return n.sort(r);var f=u(n,r);return f!==n&&l(f,null,n.length,n),n};o.exports=h},96928:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(d===x)return e;var u=e.indexOf(d),l=e.indexOf(x);if(u<0||l<0)throw new Error("Supplied items must be elements of the same array");return e[u]=x,e[l]=d,e};o.exports=T},59959:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Matrix:e(13515),Add:e(78991),AddAt:e(48522),BringToTop:e(58742),CountAllMatching:e(30164),Each:e(36337),EachInRange:e(46208),FindClosestInSorted:e(2406),Flatten:e(5454),GetAll:e(71608),GetFirst:e(51463),GetRandom:e(72861),MoveDown:e(51172),MoveTo:e(68396),MoveUp:e(27555),MoveAbove:e(24218),MoveBelow:e(58258),NumberArray:e(13401),NumberArrayStep:e(89955),QuickSelect:e(53466),Range:e(75757),Remove:e(66458),RemoveAt:e(8324),RemoveBetween:e(47427),RemoveRandomElement:e(50147),Replace:e(80402),RotateLeft:e(77640),RotateRight:e(38487),SafeRange:e(45838),SendToBack:e(27847),SetAll:e(6034),Shuffle:e(18592),SortByDigits:e(28834),SpliceOne:e(72677),StableSort:e(17922),Swap:e(96928)}},97494:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))return!1;for(var d=e[0].length,x=1;x<e.length;x++)if(e[x].length!==d)return!1;return!0};o.exports=T},68428:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(76400),x=e(97494),u=function(l){var h="";if(!x(l))return h;for(var n=0;n<l.length;n++){for(var r=0;r<l[n].length;r++){var f=l[n][r].toString();f!=="undefined"?h+=d(f,2):h+="?",r<l[n].length-1&&(h+=" |")}if(n<l.length-1){h+=`
`;for(var a=0;a<l[n].length;a++)h+="---",a<l[n].length-1&&(h+="+");h+=`
`}}return h};o.exports=u},59521:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.reverse()};o.exports=T},51995:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=0;d<e.length;d++)e[d].reverse();return e};o.exports=T},89011:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),x=function(u){return d(u,180)};o.exports=x},42549:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),x=function(u){return d(u,90)};o.exports=x},63515:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(97494),x=e(78581),u=function(l,h){if(h===void 0&&(h=90),!d(l))return null;if(typeof h!="string"&&(h=(h%360+360)%360),h===90||h===-270||h==="rotateLeft")l=x(l),l.reverse();else if(h===-90||h===270||h==="rotateRight")l.reverse(),l=x(l);else if(Math.abs(h)===180||h==="rotate180"){for(var n=0;n<l.length;n++)l[n].reverse();l.reverse()}return l};o.exports=u},14305:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(63515),x=function(u){return d(u,-90)};o.exports=x},27365:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(77640),x=e(38487),u=function(l,h,n){if(h===void 0&&(h=0),n===void 0&&(n=0),n!==0&&(n<0?d(l,Math.abs(n)):x(l,n)),h!==0)for(var r=0;r<l.length;r++){var f=l[r];h<0?d(f,Math.abs(h)):x(f,h)}return l};o.exports=u},78581:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){for(var d=e.length,x=e[0].length,u=new Array(x),l=0;l<x;l++){u[l]=new Array(d);for(var h=d-1;h>-1;h--)u[l][h]=e[h][l]}return u};o.exports=T},13515:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={CheckMatrix:e(97494),MatrixToString:e(68428),ReverseColumns:e(59521),ReverseRows:e(51995),Rotate180:e(89011),RotateLeft:e(42549),RotateMatrix:e(63515),RotateRight:e(14305),Translate:e(27365),TransposeMatrix:e(78581)}},40581:o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(d,x){for(var u=new Uint8Array(d),l=u.length,h=x?"data:"+x+";base64,":"",n=0;n<l;n+=3)h+=T[u[n]>>2],h+=T[(u[n]&3)<<4|u[n+1]>>4],h+=T[(u[n+1]&15)<<2|u[n+2]>>6],h+=T[u[n+2]&63];return l%3===2?h=h.substring(0,h.length-1)+"=":l%3===1&&(h=h.substring(0,h.length-2)+"=="),h};o.exports=e},82329:o=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),d=0;d<T.length;d++)e[T.charCodeAt(d)]=d;var x=function(u){u=u.substr(u.indexOf(",")+1);var l=u.length,h=l*.75,n=0,r,f,a,c;u[l-1]==="="&&(h--,u[l-2]==="="&&h--);for(var p=new ArrayBuffer(h),v=new Uint8Array(p),m=0;m<l;m+=4)r=e[u.charCodeAt(m)],f=e[u.charCodeAt(m+1)],a=e[u.charCodeAt(m+2)],c=e[u.charCodeAt(m+3)],v[n++]=r<<2|f>>4,v[n++]=(f&15)<<4|a>>2,v[n++]=(a&3)<<6|c&63;return p};o.exports=x},78417:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={ArrayBufferToBase64:e(40581),Base64ToArrayBuffer:e(82329)}},22178:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Array:e(59959),Base64:e(78417),Objects:e(64615),String:e(50379),NOOP:e(72283),NULL:e(10618)}},32742:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d={};for(var x in e)Array.isArray(e[x])?d[x]=e[x].slice(0):d[x]=e[x];return d};o.exports=T},28699:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){var d,x,u;if(typeof e!="object"||e===null)return e;d=Array.isArray(e)?[]:{};for(u in e)x=e[u],d[u]=T(x);return d};o.exports=T},98611:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(42911),x=function(){var u,l,h,n,r,f,a=arguments[0]||{},c=1,p=arguments.length,v=!1;for(typeof a=="boolean"&&(v=a,a=arguments[1]||{},c=2),p===c&&(a=this,--c);c<p;c++)if((u=arguments[c])!=null)for(l in u)h=a[l],n=u[l],a!==n&&(v&&n&&(d(n)||(r=Array.isArray(n)))?(r?(r=!1,f=h&&Array.isArray(h)?h:[]):f=h&&d(h)?h:{},a[l]=x(v,f,n)):n!==void 0&&(a[l]=n));return a};o.exports=x},20494:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(5923),x=e(10850),u=function(l,h,n){var r=x(l,h,null);if(r===null)return n;if(Array.isArray(r))return d.RND.pick(r);if(typeof r=="object"){if(r.hasOwnProperty("randInt"))return d.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return d.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if(typeof r=="function")return r(h);return r};o.exports=u},72632:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){var u=typeof e;return!e||u==="number"||u==="string"?x:e.hasOwnProperty(d)&&e[d]!==void 0?e[d]:x};o.exports=T},94324:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(10850),x=e(82897),u=function(l,h,n,r,f){f===void 0&&(f=n);var a=d(l,h,f);return x(a,n,r)};o.exports=u},10850:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){if(!e&&!u||typeof e=="number")return x;if(e&&e.hasOwnProperty(d))return e[d];if(u&&u.hasOwnProperty(d))return u[d];if(d.indexOf(".")!==-1){for(var l=d.split("."),h=e,n=u,r=x,f=x,a=!0,c=!0,p=0;p<l.length;p++)h&&h.hasOwnProperty(l[p])?(r=h[l[p]],h=h[l[p]]):a=!1,n&&n.hasOwnProperty(l[p])?(f=n[l[p]],n=n[l[p]]):c=!1;return a?r:c?f:x}else return x};o.exports=T},87701:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){for(var x=0;x<d.length;x++)if(!e.hasOwnProperty(d[x]))return!1;return!0};o.exports=T},53523:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){for(var x=0;x<d.length;x++)if(e.hasOwnProperty(d[x]))return!0;return!1};o.exports=T},19256:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.hasOwnProperty(d)};o.exports=T},42911:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){if(!e||typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};o.exports=T},30657:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),x=function(u,l){var h=d(u);for(var n in l)h.hasOwnProperty(n)||(h[n]=l[n]);return h};o.exports=x},72066:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(32742),x=function(u,l){var h=d(u);for(var n in l)h.hasOwnProperty(n)&&(h[n]=l[n]);return h};o.exports=x},28820:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var d=e(19256),x=function(u,l){for(var h={},n=0;n<l.length;n++){var r=l[n];d(u,r)&&(h[r]=u[r])}return h};o.exports=x},22440:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(d))return e[d]=x,!0;if(d.indexOf(".")!==-1){for(var u=d.split("."),l=e,h=e,n=0;n<u.length;n++)if(l.hasOwnProperty(u[n]))h=l,l=l[u[n]];else return!1;return h[u[u.length-1]]=x,!0}return!1};o.exports=T},64615:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Clone:e(32742),DeepCopy:e(28699),Extend:e(98611),GetAdvancedValue:e(20494),GetFastValue:e(72632),GetMinMaxValue:e(94324),GetValue:e(10850),HasAll:e(87701),HasAny:e(53523),HasValue:e(19256),IsPlainObject:e(42911),Merge:e(30657),MergeRight:e(72066),Pick:e(28820),SetValue:e(22440)}},69429:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return e.replace(/%([0-9]+)/g,function(x,u){return d[Number(u)-1]})};o.exports=T},76400:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d,x,u){d===void 0&&(d=0),x===void 0&&(x=" "),u===void 0&&(u=3),e=e.toString();var l=0;if(d+1>=e.length)switch(u){case 1:e=new Array(d+1-e.length).join(x)+e;break;case 3:var h=Math.ceil((l=d-e.length)/2),n=l-h;e=new Array(n+1).join(x)+e+new Array(h+1).join(x);break;default:e=e+new Array(d+1-e.length).join(x);break}return e};o.exports=T},76872:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e,d){return d===0?e.slice(1):e.slice(0,d-1)+e.slice(d)};o.exports=T},8051:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e.split("").reverse().join("")};o.exports=T},76583:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=Math.random()*16|0,x=e==="x"?d:d&3|8;return x.toString(16)})};o.exports=T},40587:o=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var T=function(e){return e&&e[0].toUpperCase()+e.slice(1)};o.exports=T},50379:(o,T,e)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */o.exports={Format:e(69429),Pad:e(76400),RemoveAt:e(76872),Reverse:e(8051),UppercaseFirst:e(40587),UUID:e(76583)}}},g={};function C(o){var T=g[o];if(T!==void 0)return T.exports;var e=g[o]={exports:{}};return s[o](e,e.exports,C),e.exports}C.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var M=C(92491);return M})())})(Lp);const ze=Lp.exports;class Yx extends ze.Scene{constructor(){super("startScene")}preload(){this.load.image("startbutton","assets/pawsclaws.png")}create(){var t=this.add.image(644,337,"startbutton");t.setInteractive(),t.on("pointerdown",()=>{this.scene.start("helloworldscene"),this.scene.start("PageScene")})}update(){}}const Et=new ze.Events.EventEmitter,Xx=1/7500,Wx=1/8500,kx=1/1e4,Hx=1/12e3,Jr=5;class $x extends Phaser.GameObjects.Image{constructor(s){var g=s.path;super(s,0,0,"sprites","enemy");ft(this,"onFire",!1);ft(this,"frozen",!1);ft(this,"frozenTimer",0);ft(this,"fireTimer",0);ft(this,"frozenMax",40);ft(this,"fireMax",200);ft(this,"gotblue");ft(this,"gotgreen");ft(this,"gotpurple");ft(this,"follower",{t:0,vec:new Phaser.Math.Vector2});ft(this,"hp",0);ft(this,"path");ft(this,"timeOnPath",0);ft(this,"gameScene");this.path=g,this.fireTimer=0,this.gameScene=s,this.gotblue=!1,this.gotgreen=!1,this.gotpurple=!1}startOnPath(s){this.follower.t=0,this.hp=s,this.timeOnPath=0,this.path.getPoint(this.follower.t,this.follower.vec),this.setPosition(this.follower.vec.x,this.follower.vec.y)}getHp(){return this.hp}receiveDamage(s,g,C,M){this.hp-=s,C&&this.onFire==!1&&(this.onFire=!0),M&&this.frozen==!1&&(this.frozen=!0),this.hp>100?this.gotpurple||(this.gotpurple=!0,g.money+=Jr,Et.emit("popsound")):this.hp>50?this.gotgreen||(this.gotgreen=!0,g.money+=Jr,Et.emit("popsound")):this.gotblue||(this.gotblue=!0,g.money+=Jr,Et.emit("popsound")),this.hp<=0&&(this.setActive(!1),this.setVisible(!1),this.destroy(),g.money+=Jr,Et.emit("popsound"))}update(s,g){this.frozen==!1?this.hp>150?this.follower.t+=Xx*g:this.hp>100?this.follower.t+=Wx*g:this.hp>50?this.follower.t+=kx*g:this.follower.t+=Hx*g:this.frozenTimer>=this.frozenMax?(this.frozen=!1,this.frozenTimer=0,this.clearTint()):this.frozen==!0&&(this.frozenTimer++,this.setTint(Phaser.Display.Color.GetColor(130,160,230))),this.onFire==!0&&this.fireTimer%25<5&&this.fireTimer<this.fireMax?(this.fireTimer++,this.receiveDamage(2,this.gameScene,!1,!1),console.log(this.hp),this.setTintFill(Phaser.Display.Color.GetColor(255,165,0))):this.fireTimer>=this.fireMax?(this.onFire=!1,this.fireTimer=0,console.log("done"),this.clearTint()):this.onFire==!0&&(this.fireTimer++,this.clearTint()),this.path.getPoint(this.follower.t,this.follower.vec),this.timeOnPath=this.timeOnPath+g,this.setPosition(this.follower.vec.x,this.follower.vec.y),this.follower.t>=1&&(console.log(this.timeOnPath),this.setActive(!1),this.setVisible(!1))}}const Kx=1e3,Zx=[[0,-1,0,0,0,0,0,0,0,0,0,0],[0,-1,0,0,0,0,0,-1,-1,-1,0,0],[0,-1,0,0,0,0,-1,0,-1,0,0],[0,-1,0,-1,-1,-1,-1,-1,-1,-1,0,0],[0,-1,0,-1,0,0,0,-1,0,0,0,0],[0,-1,-1,-1,0,0,0,-1,0,0,0,0],[0,0,0,0,0,0,0,-1,-1,-1,0,0],[0,0,0,0,0,0,0,0,0,-1,0,0],[0,0,0,0,0,0,0,0,0,-1,0,0]];class Jx extends Phaser.GameObjects.Image{constructor(s){super(s,0,0,"unitsprites");ft(this,"nextTic",0);ft(this,"enemies");ft(this,"projectiles");ft(this,"isFire");ft(this,"isIce");ft(this,"projectile_texture");var g=s.enemies,C=s.projectiles;this.enemies=g,this.projectiles=C,this.isFire=!1,this.isIce=!1}place(s,g){this.y=s*64+64/2,this.x=g*64+64/2,Zx[s][g]=1}fire(){const s=this.getEnemy(this.x,this.y,200);if(s){const g=Phaser.Math.Angle.Between(this.x,this.y,s.x,s.y);this.addProjectile(this.x,this.y,g,this.projectile_texture),this.angle=(g+Math.PI/2)*Phaser.Math.RAD_TO_DEG}}update(s){s>this.nextTic&&(this.fire(),this.nextTic=s+Kx)}setClassTypes(s){switch(this.isFire=!1,this.isIce=!1,s){case"Fire":this.isFire=!0;break;case"Ice":this.isIce=!0;break}}getEnemy(s,g,C){const M=this.enemies.getChildren();for(let o=0;o<M.length;o++){const T=M[o];if(T.active&&Phaser.Math.Distance.Between(s,g,T.x,T.y)<C)return T}return!1}addProjectile(s,g,C,M){const o=this.projectiles.get();o.setTexture("projectile",M).setDepth(1),o&&o.fire(s,g,C,this.isFire,this.isIce,M)}}const jx=600;class Qx extends Phaser.GameObjects.Image{constructor(s){super(s,0,0,"projectile");ft(this,"lifespan",0);ft(this,"speed",Phaser.Math.GetSpeed(jx,1));ft(this,"dx",0);ft(this,"dy",0);ft(this,"gotbullet");ft(this,"gotbeer");ft(this,"gotpunch");ft(this,"isFire");ft(this,"isIce");this.isFire=!1,this.isIce=!1,this.gotpunch=!1,this.gotbeer=!1,this.gotbullet=!1}fire(s,g,C,M,o){this.setActive(!0),this.setVisible(!0),this.setPosition(s,g),this.isFire=M,this.isIce=o,this.dx=Math.cos(C),this.dy=Math.sin(C),this.lifespan=1e3}update(s,g){this.lifespan-=g,this.x+=this.dx*(this.speed*g),this.y+=this.dy*(this.speed*g),this.lifespan<=0&&(this.setActive(!1),this.setVisible(!1))}}const Fp="/group-project-pawsclaws/assets/buff_doge.png",bp="/group-project-pawsclaws/assets/cowboy_cat.png",Dp="/group-project-pawsclaws/assets/rootbeer_cat.png",Ip="/group-project-pawsclaws/assets/bulldog.png",Bp="/group-project-pawsclaws/assets/dogurai.png",Gp="/group-project-pawsclaws/assets/reaper_cat.png",qx="/group-project-pawsclaws/assets/map.png",_x=50,jr=650,$s=[[0,-1,0,0,0,0,0,0,0,0,0,0],[0,-1,0,0,0,0,0,-1,-1,-1,0,0],[0,-1,0,0,0,0,0,-1,0,-1,0,0],[0,-1,0,-1,-1,-1,-1,-1,-1,-1,0,0],[0,-1,0,-1,0,0,0,-1,0,0,0,0],[0,-1,-1,-1,0,0,0,-1,0,0,0,0],[0,0,0,0,0,0,0,-1,-1,-1,0,0],[0,0,0,0,0,0,0,0,0,-1,0,0],[0,0,0,0,0,0,0,0,0,-1,0,0]],ty=[8,10,8,14,5,8,12,5,0,0,12],ey=[0,0,3,6,16,8,10,18,0,45,10],iy=[0,0,0,0,0,4,8,10,18,0,8],sy=[0,0,0,0,0,0,0,0,0,0,0,4];class ny extends ze.Scene{constructor(){super("helloworldscene");ft(this,"nextEnemy");ft(this,"path");ft(this,"turrets");ft(this,"enemies");ft(this,"projectiles");ft(this,"waveNumber");ft(this,"money");ft(this,"moneyText")}preload(){this.load.image("background",qx),this.load.atlas("sprites","assets/redballoon_up.png","assets/spritesheet.json"),this.load.atlas("balloons","assets/balloonspritesheet.png","assets/balloons.json"),this.load.atlas("projectile","assets/spritesheetprojectiles.png","assets/projectiles.json"),this.load.image("mark","assets/marks.png"),this.load.image("bar","assets/menu.PNG"),this.load.audio("pop",["assets/Pops.mp3"]),this.load.image("cowboy",bp),this.load.image("buff",Fp),this.load.image("bigm",Dp),this.load.image("bulldog",Ip),this.load.image("dogurai",Bp),this.load.image("reaper",Gp)}create(){this.add.image(415,320,"background").setScale(.89),this.add.image(380,760,"bar");const s=this.add.graphics();this.drawLines(s),this.path=this.add.path(96,-20),this.path.lineTo(96,164),this.path.lineTo(96,350),this.path.lineTo(225,350),this.path.lineTo(225,230),this.path.lineTo(610,230),this.path.lineTo(610,100),this.path.lineTo(480,100),this.path.lineTo(480,426),this.path.lineTo(610,426),this.path.lineTo(610,610),s.lineStyle(2,16777215,1),this.path.draw(s),this.enemies=this.physics.add.group({classType:$x,runChildUpdate:!0,repeat:0}),this.turrets=this.add.group({classType:Jx,runChildUpdate:!0}),this.projectiles=this.physics.add.group({classType:Qx,runChildUpdate:!0}),this.nextEnemy=0,this.physics.add.overlap(this.enemies,this.projectiles,this.damageEnemy,void 0,this.scene),this.waveNumber=0;var g=this.add.text(50,640,"Wave: "+this.waveNumber),C=this.add.text(50,675,"Start Next Wave");C.setInteractive(),C.on("pointerdown",()=>{this.enemies.getLength()==0&&(this.waveNumber++,g.setText("Wave: "+this.waveNumber),this.startWave(this.waveNumber))}),this.money=300,this.moneyText=this.add.text(50,657,"Money: "+this.money);var M=this.add.image(700,665,"mark");M.setInteractive(),M.on("pointerdown",()=>{console.log("clicked button"),this.scene.launch("InstructionsScene")}),Et.on("tower-place?",(T,e)=>{this.placeTurret(this.input.mousePointer,this.turrets,T,e)}),Et.on("canplace",T=>{console.log("wipppiee"),Et.emit("returnplace",this.canPlace(Math.floor(T.y/64),Math.floor(T.x/64)))}),Et.on("changeHorizontally",T=>{var e=T[0],d=Number(T[1]),x=Math.floor(e.y/64),u=Math.floor(e.x/64);this.canPlace(x,d)&&($s[x][d]=1,$s[x][u]=0,e.x=d*64+64/2)}),Et.on("changeVertically",T=>{var e=T[0],d=Number(T[1]),x=Math.floor(e.y/64),u=Math.floor(e.x/64);this.canPlace(d,u)&&($s[d][u]=1,$s[x][u]=0,e.y=d*64+64/2)}),Et.on("checkIfNameExists",T=>{var e=this.turrets.getChildren().find(d=>d.name===T);console.log(e)});var o=this.sound.add("pop");Et.on("popsound",()=>{setTimeout(()=>{o.play()},100)})}update(){this.moneyText.setText("Money: "+this.money)}damageEnemy(s,g){if(s.active===!0&&g.active===!0){g.setActive(!1),g.setVisible(!1),s.receiveDamage(_x,this.scene,g.isFire,g.isIce);var C=s.getHp();C>150?s.setTexture("balloons","purple"):C>100?s.setTexture("balloons","green"):C>50?s.setTexture("balloons","blue"):C>0&&s.setTexture("balloons","red")}}drawLines(s){s.lineStyle(1,0,.8);for(let g=0;g<10;g++)s.moveTo(0,g*64),s.lineTo(800,g*64);for(let g=0;g<13;g++)s.moveTo(g*64,0),s.lineTo(g*64,610);s.strokePath()}canPlace(s,g){return s>8||g>11||s<0||g<0?!1:$s[s][g]===0}placeTurret(s,g,C,M){const o=Math.floor(s.y/64),T=Math.floor(s.x/64);if(console.log(C),this.canPlace(o,T)){if(C=="cowboy"||C=="cowboys")if(this.money>=150)this.money-=150;else return;if(C=="buff"||C=="buffs")if(this.money>=175)this.money-=175;else return;if(C=="bigm"||C=="bigms")if(this.money>=225)this.money-=225;else return;if(C=="bulldog"||C=="bulldogs")if(this.money>=275)this.money-=275;else return;if(C=="reaper"||C=="reapers")if(this.money>=350)this.money-=350;else return;if(C=="dogurai"||C=="dogurais")if(this.money>=375)this.money-=375;else return;const e=g.get();console.log("texture of tower: ",C),e.setTexture(C),e.setScale(.04),e.setActive(!0),e.setVisible(!0),e.place(o,T),e.projectile_texture=M,$s[o][T]=1,Et.emit("tower-placed-successfully",e,C),e.setInteractive(),e.on("pointerdown",()=>{console.log("selected unit ")})}}async startWave(s){for(var g=0,C=0,M=0,o=0;g<ty[s-1];)this.spawnBalloon(50,"red"),await this.sleep(jr),g++;for(;C<ey[s-1];)this.spawnBalloon(100,"blue"),await this.sleep(jr),C++;for(;M<iy[s-1];)this.spawnBalloon(150,"green"),await this.sleep(jr),M++;for(;o<sy[s-1];)this.spawnBalloon(200,"purple"),await this.sleep(jr),o++}sleep(s){return new Promise(g=>setTimeout(g,s))}spawnBalloon(s,g){const C=this.enemies.get();C&&(C.setActive(!0),C.setVisible(!0),C.startOnPath(s),C.setTexture("balloons",g))}}const ry=5125166,Wd=8085079,ay=2493956;class hy extends ze.Scene{constructor(){super("InstructionsScene");ft(this,"rexUI")}preload(){this.load.image("nextPage","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/images/arrow-down-left.png")}create(){var s=`
Gameplay:

1. Buy your first character by selecting it from the menu and placing it on the map.
2. Press the "Start" button to begin the game.
3. Balloons will spawn in waves, with more balloons spawning as the waves increase.
4. Place additional characters on the map by selecting them from the menu and placing them strategically to stop the balloons.
5. Characters have different abilities and prices, so choose wisely.
6. Earn money by popping balloons. Use this money to buy more characters or upgrade existing ones.
7. If a balloon reaches the end of its path, you lose a life. You start with a limited number of lives, so be careful!
8. If you lose all your lives, the game is over.



Upgrades:

1. Click on a character to see its upgrade options.
2. Upgrades improve the character's abilities and make them more effective against balloons.
3. Upgrades cost money, so make sure to save up before purchasing them.

Tips:

1. Experiment with different character combinations to find the most effective defense.
2. Don't forget to upgrade your characters for maximum effectiveness.
3. Keep an eye on your lives and don't let too many balloons slip by.

Good luck defending your territory!`;this.createTextBox(this,40,40,{wrapWidth:500,fixedWidth:500,fixedHeight:350}).start(s,50);var g=this.add.text(600,40+10,"X");g.setStyle({fill:"#FF0000",fontSize:"50px"}),g.setInteractive(),g.on("pointerdown",()=>{console.log("clicked button"),this.scene.sleep("InstructionsScene")})}update(){}createTextBox(s,g,C,M){var o=ze.Utils.Objects.GetValue(M,"wrapWidth",0),T=ze.Utils.Objects.GetValue(M,"fixedWidth",0),e=ze.Utils.Objects.GetValue(M,"fixedHeight",0),d=s.rexUI.add.textBox({x:g,y:C,background:s.rexUI.add.roundRectangle(0,0,2,2,20,ry).setStrokeStyle(2,Wd),icon:s.rexUI.add.roundRectangle(0,0,2,2,20,ay),text:this.getBBcodeText(s,o,T,e),action:s.add.image(0,0,"nextPage").setTint(Wd).setVisible(!1),space:{left:10,right:10,top:10,bottom:20,icon:10,text:10}}).setOrigin(0).layout();return d.setInteractive().on("pointerdown",function(){var x=d.getElement("action").setVisible(!1);d.resetChildVisibleState(x),d.isTyping?d.stop(!0):d.typeNextPage()},d).on("pageend",function(){if(!d.isLastPage){var x=d.getElement("action").setVisible(!0);d.resetChildVisibleState(x),x.y-=30,s.tweens.add({targets:x,y:"+=30",ease:"Bounce",duration:500,repeat:0,yoyo:!1})}},d),d}getBuiltInText(s,g,C,M){return s.add.text(0,0,"",{fontSize:"20px",wordWrap:{width:g},maxLines:3}).setFixedSize(C,M)}getBBcodeText(s,g,C,M){return s.rexUI.add.BBCodeText(0,0,"",{fixedWidth:C,fixedHeight:M,fontSize:"15px",wrap:{mode:"word",width:g},maxLines:20})}}class st{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,s){st.prototype[t]=s}}var oy=function(i){return i===void 0&&(i=ly),this.getFrameNameCallback=i,this},ly=function(i,t,s){return s==="__BASE"?`${i},${t}`:`${s}_${i},${t}`};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var uy=function(i){if(typeof i!="object"||i.nodeType||i===i.window)return!1;try{if(i.constructor&&!{}.hasOwnProperty.call(i.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0},ge=function(i){var t,s,g;if(i==null||typeof i!="object")return i;if(t=Array.isArray(i)?[]:{},uy(i))for(g in i)s=i[g],t[g]=ge(s);else t=i;return t},dy=function(i,t,s,g){Array.isArray(t)&&(g=s,s=t,t=void 0),t==null&&(t="__BASE"),typeof s=="number"&&arguments.length>=6?(s=[arguments[2],void 0,arguments[3]],g=[arguments[4],void 0,arguments[5]]):(s=ge(s),g=ge(g)),this.textureKey=i,this.baseFrameName=t,this.columns.data=s,this.columns.count=s?s.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=g,this.rows.count=g?g.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var C=this.scene.sys.textures.get(i);if(!C)return this.clear(),this;if(!s||!g)return this.clear(),this;for(var M=C.get(t),o=M.width,T=0,e=0,d=s.length;e<d;e++)s[e]===void 0?T++:typeof s[e]=="number"?o-=s[e]:o-=s[e].width;for(var x=o/T,u=M.height,l=0,e=0,d=g.length;e<d;e++)g[e]===void 0?l++:typeof g[e]=="number"?u-=g[e]:u-=g[e].width;for(var h=u/l,n,r,f,a,c,p=0,v=0,m=0,y=g.length;m<y;m++){g[m]===void 0&&(g[m]=h),typeof g[m]=="number"&&(g[m]={height:g[m],stretch:m%2}),n=g[m],f=n.height,this.rows.stretch+=n.stretch|0,this.rows.minHeight+=n.stretch>0?0:f,p=0;for(var e=0,E=s.length;e<E;e++){if(s[e]===void 0&&(s[e]=x),typeof s[e]=="number"&&(s[e]={width:s[e],stretch:e%2}),r=s[e],a=r.width,m===0&&(this.columns.stretch+=r.stretch|0,this.columns.minWidth+=r.stretch>0?0:a),a>=1&&f>=1){c=this.getFrameNameCallback(e,m,t);var P=typeof c;(P==="string"||P==="number")&&C.add(c,0,p+M.cutX,v+M.cutY,a,f)}p+=a}v+=f}return this.updateTexture(),this},fy=function(){if(this.clear(),this.textureKey===void 0)return this;var i=this.scene.sys.textures.get(this.textureKey);if(!i)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,s=this.rows.minHeight*this.maxFixedPartScaleY,g=this.width-t,C=this.height-s,M=g>=0?this.maxFixedPartScaleX:this.width/t,o=C>=0?this.maxFixedPartScaleY:this.height/s;if(this.preserveRatio){var T=Math.min(M,o);if(M>T){var e=(M-T)*t;g>=0?g+=e:g=e,M=T}if(o>T){var d=(o-T)*s;C>=0?C+=d:C=d,o=T}}this.columns.scale=M,this.rows.scale=o;var x;g>0?x=this.columns.stretch>0?g/this.columns.stretch:0:x=0;var u;C>0?u=this.rows.stretch>0?C/this.rows.stretch:0:u=0;var l,h,n,r,f,a=0,c=0,p;this._beginDraw();for(var v=0,m=this.rows.count;v<m;v++){n=this.rows.data[v],f=n.stretch===0?n.height*o:u*n.stretch,a=0;for(var y=0,E=this.columns.count;y<E;y++)h=this.columns.data[y],r=h.stretch===0?h.width*M:x*h.stretch,l=this.getFrameNameCallback(y,v,this.baseFrameName),i.has(l)&&r>0&&f>0&&(n.stretch===0&&h.stretch===0||this.getStretchMode(y,v)===0?p=0:p=1,p===0?this._drawImage(this.textureKey,l,a,c,r,f):this._drawTileSprite(this.textureKey,l,a,c,r,f)),a+=r;c+=f}this._endDraw()};const cy=Phaser.Utils.Objects.IsPlainObject,kd=Phaser.Utils.Objects.GetValue;var vy=function(i){return cy(i)?(this.stretchMode.edge=to(kd(i,"edge",0)),this.stretchMode.internal=to(kd(i,"internal",0))):(i=to(i),this.stretchMode.edge=i,this.stretchMode.internal=i),this},to=function(i){return typeof i=="string"&&(i=py[i]),i};const py={scale:0,repeat:1};var gy=function(i,t){return i===0||i===this.columns.count-1||t===0||t===this.rows.count-1},my=function(i,t){return gy.call(this,i,t)?this.stretchMode.edge:this.stretchMode.internal},xy=function(i){return i==null&&(i=!0),this.preserveRatio=i,this},yy=function(i,t){return t===void 0&&(t=i),this.maxFixedPartScaleX=i,this.maxFixedPartScaleY=t,this},ue=function(){};const Ty={_beginDraw:ue,_drawImage:ue,_drawTileSprite:ue,_endDraw:ue,setGetFrameNameCallback:oy,setBaseTexture:dy,updateTexture:fy,setStretchMode:vy,getStretchMode:my,setPreserveRatio:xy,setMaxFixedPartScale:yy},Wn=Phaser.Utils.Objects.IsPlainObject,yt=Phaser.Utils.Objects.GetValue;var Np=function(i,t){class s extends i{constructor(C,M,o,T,e,d,x,u,l,h){if(Wn(M)?(h=M,M=yt(h,"x",0),o=yt(h,"y",0),T=yt(h,"width",1),e=yt(h,"height",1),d=yt(h,"key",void 0),x=yt(h,"baseFrame",void 0),u=yt(h,"columns",void 0),l=yt(h,"rows",void 0)):Wn(T)?(h=T,T=yt(h,"width",1),e=yt(h,"height",1),d=yt(h,"key",void 0),x=yt(h,"baseFrame",void 0),u=yt(h,"columns",void 0),l=yt(h,"rows",void 0)):Wn(d)?(h=d,d=yt(h,"key",void 0),x=yt(h,"baseFrame",void 0),u=yt(h,"columns",void 0),l=yt(h,"rows",void 0)):Wn(x)?(h=x,x=yt(h,"baseFrame",void 0),u=yt(h,"columns",void 0),l=yt(h,"rows",void 0)):Array.isArray(x)?(h=l,l=u,u=x,x=yt(h,"baseFrame",void 0)):Wn(u)&&(h=u,u=yt(h,"columns",void 0),l=yt(h,"rows",void 0)),u===void 0){var n=yt(h,"leftWidth",void 0),r=yt(h,"rightWidth",void 0);n!==void 0&&r!==void 0&&(u=[n,void 0,r])}if(l===void 0){var f=yt(h,"topHeight",void 0),a=yt(h,"bottomHeight",void 0);f!==void 0&&a!==void 0&&(l=[f,void 0,a])}super(C),this.type=t,this.setPosition(M,o).setSize(T,e).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(yt(h,"getFrameNameCallback",void 0)),this.setStretchMode(yt(h,"stretchMode",0)),this.setPreserveRatio(yt(h,"preserveRatio",!0));var c=yt(h,"maxFixedPartScale",1),p=yt(h,"maxFixedPartScaleX",c),v=yt(h,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,v),this.setBaseTexture(d,x,u,l)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(C,M){return this.width===C&&this.height===M?this:(super.resize?super.resize(C,M):super.setSize(C,M),this.updateTexture(),this)}}return Object.assign(s.prototype,Ty),s};const Cy=Phaser.Game;var Hd=function(i){return i instanceof Cy};const Sy=Phaser.Scene;var Ds=function(i){return i instanceof Sy},Ln=function(i){if(i==null||typeof i!="object")return null;if(Hd(i))return i;if(Hd(i.game))return i.game;if(Ds(i))return i.sys.game;if(Ds(i.scene))return i.scene.sys.game};const Ey=Phaser.GameObjects;var Vi=void 0,zp=function(i,t){if(Vi||(Vi={},Ln(i).events.once("destroy",function(){for(var g in Vi)Vi[g].destroy();Vi=void 0})),!Vi.hasOwnProperty(t)){var s=Ln(i).scene.systemScene,i=new Ey[t](s);i.setOrigin(0),Vi[t]=i}return Vi[t]},Py=function(i,t,s,g,C,M){var o=zp(this,"Image").setTexture(i,t).setDisplaySize(C,M);this.batchDraw(o,s,g)},My=function(i,t,s,g,C,M){var o=zp(this,"TileSprite").setTexture(i,t).setSize(C,M);this.batchDraw(o,s,g)};const bl=Phaser.GameObjects.RenderTexture;class Ar extends Np(bl,"rexNinePatch"){}var wy={_beginDraw:bl.prototype.beginDraw,_endDraw:bl.prototype.endDraw,_drawImage:Py,_drawTileSprite:My};Object.assign(Ar.prototype,wy);var Vp=function(i){return i==null||i===""||i.length===0},Ay=function(i,t,s){var g=i;if(!Vp(t)){typeof t=="string"&&(t=t.split("."));for(var C,M=0,o=t.length;M<o;M++){if(C=t[M],g[C]==null||typeof g[C]!="object"){var T;M===o-1?s===void 0?T={}:T=s:T={},g[C]=T}g=g[C]}}return g},it=function(i,t,s,g){if(g===void 0&&(g="."),typeof i=="object"){if(Vp(t)){if(s==null)return;typeof s=="object"&&(i=s)}else{typeof t=="string"&&(t=t.split(g));var C=t.pop(),M=Ay(i,t);M[C]=s}return i}};st.register("ninePatch",function(i,t,s,g,C,M,o,T){var e=new Ar(this.scene,i,t,s,g,C,M,o,T);return this.scene.add.existing(e),e});it(window,"RexPlugins.UI.NinePatch",Ar);const Ry=Phaser.GameObjects.GetCalcMatrix;var Oy=function(i,t,s,g){var C=t.getRenderList();if(C.length!==0){s.addToRenderList(t);var M=i.pipelines.set(t.pipeline),o=t.frame.glTexture,T=M.setGameObject(t),e=s.roundPixels,d=Ry(t,s,g),x=M.calcMatrix.copyFrom(d.calc),u=t._displayOriginX,l=t._displayOriginY,h=s.alpha*t.alpha;i.pipelines.preBatch(t);for(var n=0,r=C.length;n<r;n++)C[n].webglRender(M,x,h,u,l,o,T,e);i.pipelines.postBatch(t)}};const Ly=Phaser.Renderer.Canvas.SetTransform;var Fy=function(i,t,s,g){var C=i.currentContext,M=t.getRenderList();if(!(M.length===0||!Ly(i,C,t,s,g))){s.addToRenderList(t);var o=s.roundPixels,T=-t._displayOriginX,e=-t._displayOriginY;C.translate(T,e);for(var d=0,x=M.length;d<x;d++)M[d].canvasRender(C,T,e,o);C.restore()}};const by={renderWebGL:Oy,renderCanvas:Fy};var Dy=function(i,t){return this.texture=this.scene.sys.textures.get(i),this.frame=this.texture.get(t),this},$d=function(i,t){if(this.width===i&&this.height===t)return this;this.width=i,this.height=t,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=i,s.hitArea.height=t),this},Iy=function(i){return this.lastAppendedChildren.length=0,Array.isArray(i)?(this.children.add(i),this.lastAppendedChildren.push(...i)):(this.children.add(i),this.lastAppendedChildren.push(i)),this};const By=Phaser.Utils.Array.Remove;var Gy=function(i){return this.poolManager&&this.poolManager.free(i),By(this.children.list,i),this.lastAppendedChildren.length=0,this.dirty=!0,this},Kd=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},Ny=function(){return this.lastAppendedChildren},zy=function(){return this.children.list};const Vy={setTint(i){return this.tint=i,this.tintFill=!1,this},setTintFill(i){return this.tint=i,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var Up={setTexture:Dy,resize:$d,setSize:$d,addChild:Iy,removeChild:Gy,removeChildren:Kd,clear:Kd,getLastAppendedChildren:Ny,getChildren:zy};Object.assign(Up,Vy);class pi{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const Uy=Phaser.Utils.Objects.GetValue;var Yy={};class Xy{constructor(t){this.pools=Uy(t,"pools",Yy)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new pi),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,g=t.length;s<g;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const Wy=Phaser.GameObjects.GameObject,ky=Phaser.Utils.Objects.IsPlainObject,kn=Phaser.Utils.Objects.GetValue,Hy=Phaser.Structs.List,$y=Phaser.Utils.Array.StableSort;class Yp extends Wy{constructor(t,s,g,C,M,o){ky(s)&&(o=s,s=kn(o,"x",0),g=kn(o,"y",0),C=kn(o,"texture"),M=kn(o,"frame")),s===void 0&&(s=0),g===void 0&&(g=0),super(t,"rexBlitter"),this.children=new Hy,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var T=kn(o,"reuseBob",!0);this.poolManager=T?new Xy(o):void 0,this.setTexture(C,M).setPosition(s,g).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,s=this.children.list,g=0,C=s.length;g<C;g++){var M=s[g];Ky(M)&&(this.renderList.push(M),t||(t=M.depth!==0))}t&&$y(this.renderList,Zy),this.displayListDirty=!1}return this.renderList}}var Ky=function(i){return i.active&&i.visible&&i.alpha>0},Zy=function(i,t){return i._depth-t._depth};const He=Phaser.GameObjects.Components;Phaser.Class.mixin(Yp,[He.Alpha,He.BlendMode,He.ComputedSize,He.Depth,He.GetBounds,He.Mask,He.Origin,He.Pipeline,He.ScrollFactor,He.Transform,He.Visible,by,Up]);const Xp="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Ft=function(i,t,s){if(!i||typeof i=="number")return s;if(i.hasOwnProperty(t))return i[t];if(t.indexOf(".")!==-1){for(var g=t.split("."),C=i,M=s,o=0;o<g.length;o++)if(C.hasOwnProperty(g[o]))M=C[g[o]],C=C[g[o]];else{M=s;break}return M}else return s},Oi=function(i){if(typeof i!="object"||i===null)return i;if(Array.isArray(i))i.length=0;else for(var t in i)delete i[t];return i};const ah={enableData(){return this.data===void 0&&(this.data={}),this},setData(i,t){if(this.enableData(),arguments.length===1){var s=i;for(i in s)this.data[i]=s[i]}else this.data[i]=t;return this},getData(i,t){return this.enableData(),i===void 0?this.data:Ft(this.data,i,t)},incData(i,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(i,this.getData(i,s)+t),this},mulData(i,t,s){return s===void 0&&(s=0),this.enableData(),this.setData(i,this.getData(i,s)*t),this},clearData(){return this.data&&Oi(this.data),this}};class Wp{constructor(t,s){this.type=s,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(Wp.prototype,ah);const Jy=Phaser.Math.DegToRad,jy=Phaser.Math.RadToDeg,Ks=Phaser.Utils.Objects.GetValue;class Qy extends Wp{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setRotation(t){return this.rotation=t,this}get angle(){return jy(this.rotation)}set angle(t){this.rotation=Jy(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,s){return s===void 0&&(s=!1),this.displayWidth=t,s&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,s){return s===void 0&&(s=!1),this.displayHeight=t,s&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,s){return s===void 0&&(s=t),this.setOriginX(t).setOriginY(s),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=Ks(t,"width",void 0),g=Ks(t,"height",void 0),C=Ks(t,"scale",void 0),M=Ks(t,"scaleX",C),o=Ks(t,"scaleY",C);s!==void 0?g===void 0&&o===void 0?this.setWidth(s,!0):this.setWidth(s):M!==void 0?this.setScaleX(M):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),g!==void 0?s===void 0&&M===void 0?this.setHeight(g,!0):this.setHeight(g):o!==void 0?this.setScaleY(o):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var T=Ks(t,"origin",void 0);return T!==void 0?this.setOrigin(T):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,s,g,C,M,o,T,e){}canvasRender(t,s,g,C){}}const qy=Phaser.GameObjects.Components.TransformMatrix,_y=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var Qr=new qy,t1=function(i,t,s,g,C,M,o,T){var e=this._width,d=this._height,x=e*this.originX,u=d*this.originY,l=this.x-g,h=this.y-C,n=1,r=1;this.flipX&&(l+=e-x*2,n=-1),this.flipY&&(h+=d-u*2,r=-1),Qr.applyITRS(l,h,this.rotation,this.scaleX*n,this.scaleY*r),t.multiply(Qr,Qr);var f=-x,a=-u,c=f+e,p=a+d,v=Qr.setQuad(f,a,c,p,T),m=this.frame.u0,y=this.frame.v0,E=this.frame.u1,P=this.frame.v1,S=_y(this.tint,this.alpha*s);i.batchQuad(this.parent,v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],m,y,E,P,S,S,S,S,this.tintFill,M,o)},e1=function(i,t,s,g){i.save();var C=this._width,M=this._height,o=C*this.originX,T=M*this.originY,e=this.x-o,d=this.y-T,x=1,u=1;this.flipX&&(e+=C,x=-1),this.flipY&&(d+=M,u=-1),g&&(e=Math.round(e),d=Math.round(d)),i.translate(e,d),i.rotate(this.rotation),i.scale(this.scaleX*x,this.scaleY*u);var l=this.frame;i.drawImage(l.source.image,l.cutX,l.cutY,C,M,0,0,C,M),i.restore()};const i1=Phaser.Utils.Objects.IsPlainObject;class kp extends Qy{constructor(t,s){super(t,Xp),this.setFrame(s)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!i1(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}}var s1={webglRender:t1,canvasRender:e1};Object.assign(kp.prototype,s1);var Hp=function(i,t){typeof t=="string"&&(t={frame:t});var s=i.poolManager?i.poolManager.allocate(Xp):null;return s===null?s=new kp(i):s.setParent(i).setActive(),s.modifyPorperties(t),i.addChild(s),s},n1=function(i,t,s,g,C,M){Hp(this,{frame:t,x:s,y:g,width:C,height:M})},r1=function(i,t,s,g,C,M){var o=this.texture.get(t),T=o.width,e=o.height,d=Math.floor(C/T),x=Math.floor(M/e);s+=(C-d*T)/2,g+=(M-x*e)/2;for(var u=0;u<d;u++)for(var l=0;l<x;l++)Hp(this,{frame:t,x:s+u*T,y:g+l*e})};const a1={_drawImage:n1,_drawTileSprite:r1};class hh extends Np(Yp,"rexNinePatch2"){setBaseTexture(t,s,g,C){return this.setTexture(t,s),super.setBaseTexture(t,s,g,C),this}}Object.assign(hh.prototype,a1);st.register("ninePatch2",function(i,t,s,g,C,M,o,T){var e=new hh(this.scene,i,t,s,g,C,M,o,T);return this.scene.add.existing(e),e});it(window,"RexPlugins.UI.NinePatch2",hh);const Zi=Phaser.Utils.Objects.GetValue;class $p{constructor(t,s,g,C,M){t===void 0&&(t=0),s===void 0&&(s=t),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,s,g,C,M)}setTo(t,s,g,C,M){return this.setPosition(t,s),this.setRadius(M),this.setSize(g,C),this}setPosition(t,s){return this.x=t,this.y=s,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,s){return this.width=t,this.height=s,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var s,g;typeof t=="number"?(s=t,g=t):(s=Zi(t,"x",0),g=Zi(t,"y",0));var C=this.cornerRadius;C.tl=qr(Zi(t,"tl",void 0),s,g),C.tr=qr(Zi(t,"tr",void 0),s,g),C.bl=qr(Zi(t,"bl",void 0),s,g),C.br=qr(Zi(t,"br",void 0),s,g)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){_r(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){_r(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){_r(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){_r(this.cornerRadius.br,t)}}var qr=function(i,t,s){return i===void 0?i={x:t,y:s}:typeof i=="number"&&(i={x:i,y:i}),Kp(i),i},_r=function(i,t){typeof t=="number"?(i.x=t,i.y=t):(i.x=Zi(t,"x",0),i.y=Zi(t,"y",0)),Kp(i)},Kp=function(i){i.convex=i.x>=0||i.y>=0,i.x=Math.abs(i.x),i.y=Math.abs(i.y)},gi=function(i,t,s){var g=s.length;if(g>=2){var C=s[g-2],M=s[g-1];if(i===C&&t===M)return s}return s.push(i,t),s};const Zd=Phaser.Math.DegToRad;var _t=function(i,t,s,g,C,M,o,T,e){o&&M>C?M-=360:!o&&M<C&&(M+=360);var d=M-C,x=Zd(d)/T;C=Zd(C);for(var u=0;u<=T;u++){var l=C+x*u,h=i+s*Math.cos(l),n=t+g*Math.sin(l);gi(h,n,e)}return e},h1=Phaser.Renderer.WebGL.Utils,Zp=function(i,t,s,g,C,M){for(var o=h1.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*g),T=s.pathData,e=s.pathIndexes,d=0;d<e.length;d+=3){var x=e[d]*2,u=e[d+1]*2,l=e[d+2]*2,h=T[x+0]-C,n=T[x+1]-M,r=T[u+0]-C,f=T[u+1]-M,a=T[l+0]-C,c=T[l+1]-M,p=t.getX(h,n),v=t.getY(h,n),m=t.getX(r,f),y=t.getY(r,f),E=t.getX(a,c),P=t.getY(a,c);i.batchTri(s,p,v,m,y,E,P,0,0,1,1,o,o,o,2)}},o1=Phaser.Renderer.WebGL.Utils,oh=function(i,t,s,g,C){var M=i.strokeTint,o=o1.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*s);M.TL=o,M.TR=o,M.BL=o,M.BR=o;var T=t.pathData,e=T.length-1,d=t.lineWidth,x=d/2,u=T[0]-g,l=T[1]-C;t.closePath||(e-=2);for(var h=2;h<e;h+=2){var n=T[h]-g,r=T[h+1]-C;i.batchLine(u,l,n,r,x,x,d,h-2,t.closePath?h===e-1:!1),u=n,l=r}};const l1=Phaser.GameObjects.GetCalcMatrix;var u1=function(i,t,s,g){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var C=i.pipelines.set(t.pipeline),M=l1(t,s,g),o=C.calcMatrix.copyFrom(M.calc),T=t._displayOriginX,e=t._displayOriginY,d=s.alpha*t.alpha;i.pipelines.preBatch(t),t.isFilled&&Zp(C,o,t,d,T,e),t.isStroked&&oh(C,t,d,T,e),i.pipelines.postBatch(t)},Rr=function(i,t,s,g){var C=s||t.fillColor,M=g||t.fillAlpha,o=(C&16711680)>>>16,T=(C&65280)>>>8,e=C&255;i.fillStyle="rgba("+o+","+T+","+e+","+M+")"},Or=function(i,t,s,g){var C=s||t.strokeColor,M=g||t.strokeAlpha,o=(C&16711680)>>>16,T=(C&65280)>>>8,e=C&255;i.strokeStyle="rgba("+o+","+T+","+e+","+M+")",i.lineWidth=t.lineWidth};const d1=Phaser.Renderer.Canvas.SetTransform;var f1=function(i,t,s,g){t.dirty&&(t.updateData(),t.dirty=!1),s.addToRenderList(t);var C=i.currentContext;if(d1(i,C,t,s,g)){var M=t._displayOriginX,o=t._displayOriginY,T=t.pathData,e=T.length-1,d=T[0]-M,x=T[1]-o;C.beginPath(),C.moveTo(d,x),t.closePath||(e-=2);for(var u=2;u<e;u+=2){var l=T[u]-M,h=T[u+1]-o;C.lineTo(l,h)}C.closePath(),t.isFilled&&(Rr(C,t),C.fill()),t.isStroked&&(Or(C,t),C.stroke()),C.restore()}};const c1={renderWebGL:u1,renderCanvas:f1},v1=Phaser.GameObjects.Shape,p1=Phaser.Utils.Objects.IsPlainObject,Jd=Phaser.Utils.Objects.GetValue,g1=Phaser.Geom.Polygon.Earcut;class Ii extends v1{constructor(t,s,g,C,M,o,T,e){var d,x,u,l;if(p1(s)){var h=s;s=h.x,g=h.y,C=h.width,M=h.height,o=h.radius,T=h.color,e=h.alpha,d=h.strokeColor,x=h.strokeAlpha,u=h.strokeWidth,l=h.shape}s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=C),o===void 0&&(o=0),l===void 0&&(l=0);var n=new $p;if(super(t,"rexRoundRectangleShape",n),this.setShapeType(l),this.shapeType===0){var r=Jd(o,"radius",o);n.setTo(0,0,C,M,r)}else{var r={x:C/2,y:M/2};n.setTo(0,0,C,M,r)}var f=Jd(o,"iteration",void 0);this.setIteration(f),this.setPosition(s,g),this.setFillStyle(T,e),d!==void 0&&u===void 0&&(u=2),this.setStrokeStyle(u,d,x),this.updateDisplayOrigin(),this.dirty=!0}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,s){return s===void 0&&(s=1),this.fillColor=t,this.fillAlpha=s,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,s,g){return g===void 0&&(g=1),this.lineWidth=t,this.strokeColor=s,this.strokeAlpha=g,this}updateData(){var t=this.geom,s=this.pathData;s.length=0;var g=t.width,C=t.height,M=t.cornerRadius,o,T=this.iteration+1;if(o=M.tl,ta(o))if(o.convex){var e=o.x,d=o.y;_t(e,d,o.x,o.y,180,270,!1,T,s)}else{var e=0,d=0;_t(e,d,o.x,o.y,90,0,!0,T,s)}else gi(0,0,s);if(o=M.tr,ta(o))if(o.convex){var e=g-o.x,d=o.y;_t(e,d,o.x,o.y,270,360,!1,T,s)}else{var e=g,d=0;_t(e,d,o.x,o.y,180,90,!0,T,s)}else gi(g,0,s);if(o=M.br,ta(o))if(o.convex){var e=g-o.x,d=C-o.y;_t(e,d,o.x,o.y,0,90,!1,T,s)}else{var e=g,d=C;_t(e,d,o.x,o.y,270,180,!0,T,s)}else gi(g,C,s);if(o=M.bl,ta(o))if(o.convex){var e=o.x,d=C-o.y;_t(e,d,o.x,o.y,90,180,!1,T,s)}else{var e=0,d=C;_t(e,d,o.x,o.y,360,270,!0,T,s)}else gi(0,C,s);return s.push(s[0],s[1]),this.pathIndexes=g1(s),this}setShapeType(t){return typeof t=="string"&&(t=m1[t]),this.shapeType=t,this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,s){if(s===void 0&&(s=t),this.geom.width===t&&this.geom.height===s)return this;this.geom.setSize(t,s),this.shapeType===1&&this.setRadius({x:t/2,y:s/2}),this.updateDisplayOrigin(),this.dirty=!0;var g=this.input;return g&&!g.customHitArea&&(g.hitArea.width=t,g.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var ta=function(i){return i.x>0&&i.y>0};const m1={rectangle:0,circle:1};Object.assign(Ii.prototype,c1);st.register("roundRectangle",function(i,t,s,g,C,M,o){var T=new Ii(this.scene,i,t,s,g,C,M,o);return this.scene.add.existing(T),T});it(window,"RexPlugins.UI.RoundRectangle",Ii);var Dl=function(i,t,s,g){if(s===void 0&&(s="."),g===void 0&&(g={}),!i)return g;if(t in i)return Object.assign(g,i[t]);t+=s;for(var C in i)!C.startsWith(t)||(g[C.replace(t,"")]=i[C]);return g},eo=function(i,t,s){var g=Dl(i,t);if(s)for(var C in g)s.hasOwnProperty(C)&&(g[s[C]]=g[C],delete g[C]);return g},su=function(i,t,s){if(s===void 0&&(s={}),Array.isArray(t))for(var g,C=0,M=t.length;C<M;C++)g=t[C],s[g]=i[g];else for(var g in t)s[g]=i[g];return s},nu=function(i,t){for(var s in i)if(!(s in t)||i[s]!==t[s])return!1;for(var s in t)if(!(s in i))return!1;return!0},Zs=function(i,t){if(!!t){var s=su(i,t);if(!nu(s,t))return i.modifyStyle(t),s}};const x1={setActiveState(i){return i===void 0&&(i=!0),this.activeState===i?this:(this.activeState=i,i?this.activeStyleSave=Zs(this,this.activeStyle):(Zs(this,this.activeStyleSave),this.activeStyleSave=void 0),this)},setHoverState(i){return i===void 0&&(i=!0),this.hoverState===i?this:(this.hoverState=i,i?this.hoverStyleSave=Zs(this,this.hoverStyle):(Zs(this,this.hoverStyleSave),this.hoverStyleSave=void 0),this)},setDisableState(i){return i===void 0&&(i=!0),this.disableState===i?this:(this.disableState=i,i?this.disableStyleSave=Zs(this,this.disableStyle):(Zs(this,this.disableStyleSave),this.disableStyleSave=void 0),this)}};class lh extends Ii{constructor(t,s){s===void 0&&(s={}),super(t,s),this.activeStyle=eo(s,"active",io),this.hoverStyle=eo(s,"hover",io),this.disableStyle=eo(s,"disable",io)}modifyStyle(t){for(var s in t)this[s]=t[s];return this}}const io={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(lh.prototype,x1);st.register("statesRoundRectangle",function(i){var t=new lh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.StatesRoundRectangle",lh);const y1=Phaser.Renderer.WebGL.Utils;var T1=function(i,t,s,g){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){s.addToRenderList(t);var C=t.frame,M=C.width,o=C.height,T=y1.getTintAppendFloatAlpha,e=i.pipelines.set(t.pipeline,t),d=e.setTexture2D(C.glTexture,t);i.pipelines.preBatch(t),e.batchTexture(t,C.glTexture,M,o,t.x,t.y,M/t.resolution,o/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,M,o,T(t.tintTopLeft,s.alpha*t._alphaTL),T(t.tintTopRight,s.alpha*t._alphaTR),T(t.tintBottomLeft,s.alpha*t._alphaBL),T(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,g,!1,d),i.pipelines.postBatch(t)}},C1=function(i,t,s,g){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(s.addToRenderList(t),i.batchSprite(t,t.frame,s,g))};const S1={renderWebGL:T1,renderCanvas:C1},E1=Phaser.Display.Color,P1={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(i){return this.context.fillStyle=i,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(i,t,s,g,C,M,o,T,e,d){var x=this.scene.sys.textures.getFrame(i,t);if(!x)return this;var u=x.cutWidth,l=x.cutHeight;s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=u),M===void 0&&(M=l),o===void 0&&(o=0),T===void 0&&(T=0),e===void 0&&(e=u),d===void 0&&(d=l);var h=x.cutX+o,n=x.cutY+T;return this.context.drawImage(x.source.image,h,n,e,d,s,g,C,M),this.dirty=!0,this},getDataURL(i,t){return this.canvas.toDataURL(i,t)},getPixel(i,t,s){s===void 0&&(s=new E1);var g=this.context.getImageData(i,t,1,1);return s.setTo(g.data[0],g.data[1],g.data[2],g.data[3]),s},setPixel(i,t,s,g,C,M){if(typeof s!="number"){var o=s;s=o.red,g=o.green,C=o.blue,M=o.alpha}M===void 0&&(M=s!==0||g!==0||C!==0?255:0);var T=this.context.createImageData(1,1);return T.data[0]=s,T.data[1]=g,T.data[2]=C,T.data[3]=M,this.context.putImageData(T,i,t),this.dirty=!0,this}};var Jp=function(i,t,s,g,C,M,o){var T=i.sys.textures,e=i.renderer;g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=t.width),o===void 0&&(o=t.height);var d;T.exists(s)?d=T.get(s):d=T.createCanvas(s,M,o);var x=d.getSourceImage();x.width!==M&&(x.width=M),x.height!==o&&(x.height=o);var u=x.getContext("2d",{willReadFrequently:!0});u.clearRect(0,0,M,o),u.drawImage(t,g,C,M,o),e.gl&&d&&e.canvasToTexture(x,d.source[0].glTexture,!0,0)};const M1={updateTexture(i,t){i&&(t?i.call(t,this.canvas,this.context):i(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},generateTexture(i,t,s,g,C){var M=this.canvas;return g===void 0?g=M.width:g*=this.resolution,C===void 0?C=M.height:C*=this.resolution,Jp(this.scene,M,i,t,s,g,C),this},loadTexture(i,t){var s=this.scene.sys.textures.getFrame(i,t);return s?(this.width!==s.cutWidth||this.height!==s.cutHeight?this.setSize(s.cutWidth,s.cutHeight):this.clear(),this.drawFrame(i,t),this.dirty=!0,this):this}},jd=Phaser.Display.Canvas.CanvasPool,w1=Phaser.GameObjects.GameObject;class hs extends w1{constructor(t,s,g,C,M){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=C,this._height=M,C=Math.max(Math.ceil(C*this.resolution),1),M=Math.max(Math.ceil(M*this.resolution),1),this.canvas=jd.create(this,C,M),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(s,g),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){jd.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,s){return this._width===t&&this._height===s?this:(this._width=t,this._height=s,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas.width=t,this.canvas.height=s,this.frame.setSize(t,s),this.dirty=!0,this)}setSize(t,s){return this.setCanvasSize(t,s),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,s){return this.displayWidth=t,this.displayHeight=s,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,s){return this.setSize(t,s),this}}const me=Phaser.GameObjects.Components;Phaser.Class.mixin(hs,[me.Alpha,me.BlendMode,me.Crop,me.Depth,me.Flip,me.GetBounds,me.Mask,me.Origin,me.Pipeline,me.PostPipeline,me.ScrollFactor,me.Tint,me.Transform,me.Visible,S1,P1,M1]);const A1=Phaser.Utils.String.Pad;var gt=function(i,t,s){if(i==null)return i;switch(typeof i){case"string":return i;case"number":return`#${A1(Math.floor(i).toString(16),6,"0",1)}`;case"function":return i(t,s);case"object":return i.hasOwnProperty("r")?i.hasOwnProperty("a")?`rgba(${i.r},${i.g},${i.b},${i.a})`:`rgb(${i.r},${i.g},${i.b})`:i.hasOwnProperty("h")?i.hasOwnProperty("a")?`hsla(${i.h},${i.s},${i.l},${i.a})`:`hsl(${i.h},${i.s},${i.l})`:i;default:return i}};const Qd=Phaser.Math.DegToRad;var jp=function(i,t,s,g,C,M,o){var T=new $p(t,s,g,C,M),e=T.minWidth,d=T.minHeight,x=g>=e?1:g/e,u=C>=d?1:C/d,l=T.cornerRadius,h,n,r,f,a;i.save(),i.beginPath(),i.translate(t,s),h=l.tl,ia(h)?(n=h.x*x,r=h.y*u,ea(h)?(f=n,a=r,Ui(i,f,a,n,r,180,270,!1,o)):(f=0,a=0,Ui(i,f,a,n,r,90,0,!0,o))):i.lineTo(0,0),h=l.tr,ia(h)?(n=h.x*x,r=h.y*u,ea(h)?(f=g-n,a=r,Ui(i,f,a,n,r,270,360,!1,o)):(f=g,a=0,Ui(i,f,a,n,r,180,90,!0,o))):i.lineTo(g,0),h=l.br,ia(h)?(n=h.x*x,r=h.y*u,ea(h)?(f=g-n,a=C-r,Ui(i,f,a,n,r,0,90,!1,o)):(f=g,a=C,Ui(i,f,a,n,r,270,180,!0,o))):i.lineTo(g,C),h=l.bl,ia(h)?(n=h.x*x,r=h.y*u,ea(h)?(f=n,a=C-r,Ui(i,f,a,n,r,90,180,!1,o)):(f=0,a=C,Ui(i,f,a,n,r,360,270,!0,o))):i.lineTo(0,C),i.closePath(),i.restore()},ea=function(i){return!i.hasOwnProperty("convex")||i.convex},ia=function(i){return i.x>0&&i.y>0},Ui=function(i,t,s,g,C,M,o,T,e){if(T&&o>M?o-=360:!T&&o<M&&(o+=360),M=Qd(M),o=Qd(o),e==null)i.ellipse(t,s,g,C,0,M,o,T);else{e+=1;for(var d,x,u,l=(o-M)/e,h=0;h<=e;h++)u=M+l*h,d=t+g*Math.cos(u),x=s+C*Math.sin(u),i.lineTo(d,x)}},R1=function(i,t,s,g,C,M,o,T,e,d,x,u,l){if(jp(t,s,g,C,M,o,l),T!=null){if(x!=null){var h;u?h=t.createLinearGradient(0,0,C,0):h=t.createLinearGradient(0,0,0,M),h.addColorStop(0,T),h.addColorStop(1,x),T=h}t.fillStyle=T,t.fill()}e!=null&&d>0&&(t.strokeStyle=e,t.lineWidth=d,t.stroke())},ru=function(i,t,s,g,C,M,o,T){if(!(t==null&&s==null)){var e=i.canvas.width,d=i.canvas.height;s==null&&(g=0);var x=g/2;e=Math.max(1,e-g),d=Math.max(1,d-g),R1(i.canvas,i.context,x,x,e,d,C,t,s,g,M,o,T)}},O1=function(){ru(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const qd=Phaser.Utils.Objects.GetValue;class Qp extends hs{constructor(t,s,g,C,M,o,T,e,d,x,u){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=C),o===void 0&&(o=0),super(t,s,g,C,M),this.type="rexRoundRectangleCanvas";var l=qd(o,"radius",o),h=qd(o,"iteration",void 0);this.setRadius(l),this.setIteration(h),this.setFillStyle(T,x,u),this.setStrokeStyle(e,d)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=gt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=gt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,s,g){return g===void 0&&(g=!0),this.fillStyle=t,this.fillColor2=s,this.isHorizontalGradient=g,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=gt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,s){return this.strokeStyle=t,this.lineWidth=s,this}updateTexture(){return this.clear(),O1.call(this),super.updateTexture(),this}}st.register("roundRectangleCanvas",function(i,t,s,g,C,M,o,T,e,d){var x=new Qp(this.scene,i,t,s,g,C,M,o,T,e,d);return this.scene.add.existing(x),x});it(window,"RexPlugins.UI.RoundRectangleCanvas",Qp);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var L1=Phaser.Renderer.WebGL.Utils,F1=function(i,t,s,g){if(!(t.width===0||t.height===0)){s.addToRenderList(t);var C=t.frame,M=C.width,o=C.height,T=L1.getTintAppendFloatAlpha,e=i.pipelines.set(t.pipeline,t),d=e.setTexture2D(C.glTexture,t);i.pipelines.preBatch(t),e.batchTexture(t,C.glTexture,M,o,t.x,t.y,M/t.style.resolution,o/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,M,o,T(t.tintTopLeft,s.alpha*t._alphaTL),T(t.tintTopRight,s.alpha*t._alphaTR),T(t.tintBottomLeft,s.alpha*t._alphaBL),T(t.tintBottomRight,s.alpha*t._alphaBR),t.tintFill,0,0,s,g,!1,d),i.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var b1=function(i,t,s,g){t.width===0||t.height===0||(s.addToRenderList(t),i.batchSprite(t,t.frame,s,g))};const D1={renderWebGL:F1,renderCanvas:b1},so=Phaser.Display.Canvas.CanvasPool;var I1=function(i,t,s){s===void 0&&(s={});var g=so.create(this),C=g.getContext("2d",{willReadFrequently:!0});i.syncFont(g,C);var M=C.measureText(t),o=Math.ceil(M.width*i.baselineX),T=o,e=2*T;if(T=T*i.baselineY|0,g.width=o,g.height=e,C.fillStyle="#f00",C.fillRect(0,0,o,e),C.font=i._font,C.textBaseline="alphabetic",C.fillStyle="#000",C.fillText(i.testString,0,T),s.left=0,o===0||e===0||!C.getImageData(0,0,o,e))return so.remove(g),s;for(var d=C.getImageData(0,0,o,e).data,x=!1,u=0;u<o;u++){for(var l=0;l<e;l++){var h=(l*o+u)*4;if(d[h]!==255){s.left=u,x=!0;break}}if(x)break}return so.remove(g),s};const B1=Phaser.GameObjects.GameObject;class qp extends B1{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,s){return this.style.setFixedSize(t,s)}setBackgroundColor(t,s,g){return this.style.setBackgroundColor(t,s,g)}setBackgroundStrokeColor(t,s){return this.style.setBackgroundStrokeColor(t,s)}setBackgroundCornerRadius(t,s){return this.style.setBackgroundCornerRadius(t,s)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,s){return this.style.setStroke(t,s)}setShadow(t,s,g,C,M,o){return this.style.setShadow(t,s,g,C,M,o)}setShadowOffset(t,s){return this.style.setShadowOffset(t,s)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,s){return this.style.setTextMetrics(t,s)}measureTextMargins(t,s){return I1(this.style,t,s)}}const fe=Phaser.GameObjects.Components;Phaser.Class.mixin(qp,[fe.Alpha,fe.BlendMode,fe.ComputedSize,fe.Crop,fe.Depth,fe.Flip,fe.GetBounds,fe.Mask,fe.Origin,fe.Pipeline,fe.PostPipeline,fe.ScrollFactor,fe.Tint,fe.Transform,fe.Visible,D1]);var G1={backgroundColor:["backgroundColor",null,gt],backgroundColor2:["backgroundColor2",null,gt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,gt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",gt],stroke:["stroke","#fff",gt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",gt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",gt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const sa=Phaser.Display.Canvas.CanvasPool;var _d=function(i){var t=sa.create(this),s=t.getContext("2d",{willReadFrequently:!0});i.syncFont(t,s);var g=s.measureText(i.testString);if("actualBoundingBoxAscent"in g){var C=g.actualBoundingBoxAscent,M=g.actualBoundingBoxDescent,d={ascent:C,descent:M,fontSize:C+M};return sa.remove(t),d}var o=Math.ceil(g.width*i.baselineX),T=o,e=2*T;T=T*i.baselineY|0,t.width=o,t.height=e,s.fillStyle="#f00",s.fillRect(0,0,o,e),s.font=i._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(i.testString,0,T);var d={ascent:0,descent:0,fontSize:0};if(!s.getImageData(0,0,o,e))return d.ascent=T,d.descent=T+6,d.fontSize=d.ascent+d.descent,sa.remove(t),d;var x=s.getImageData(0,0,o,e).data,u=x.length,l=o*4,h,n,r=0,f=!1;for(h=0;h<T;h++){for(n=0;n<l;n+=4)if(x[r+n]!==255){f=!0;break}if(!f)r+=l;else break}for(d.ascent=T-h,r=u-l,f=!1,h=e;h>T;h--){for(n=0;n<l;n+=4)if(x[r+n]!==255){f=!0;break}if(!f)r-=l;else break}return d.descent=h-T,d.fontSize=d.ascent+d.descent,sa.remove(t),d},Zt={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const N1=Phaser.Utils.Objects.GetAdvancedValue,Me=Phaser.Utils.Objects.GetValue;class au{constructor(t,s,g){this.parent=t,g===void 0&&(g=G1),this.propertyMap=g,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(s,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Zt.NO_WRAP&&this.wrapWidth===0}setStyle(t,s,g){if(s===void 0&&(s=!0),g===void 0&&(g=!1),t&&t.hasOwnProperty("wrap")){var C=t.wrap;if(C.hasOwnProperty("mode")){var M=C.mode;typeof M=="string"&&(C.mode=tf[M])}else C.hasOwnProperty("width")&&(C.mode=1)}t&&t.rtl&&g&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var o=this.propertyMap;for(var T in o){var e=o[T],d=e[0],x=g?e[1]:this[T],u=e[2];if(T==="wrapCallback"||T==="wrapCallbackScope")this[T]=Me(t,d,x);else{var l=N1(t,d,x);u&&(l=u(l)),this[T]=l}}var h=Me(t,"font",null);h===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=h;var n=Me(t,"fill",null);n!==null&&(this.color=gt(n));var r=Me(t,"metrics",!1);return r?this.metrics={ascent:Me(r,"ascent",0),descent:Me(r,"descent",0),fontSize:Me(r,"fontSize",0)}:(s||!this.metrics)&&(this.metrics=_d(this)),s?this.parent.updateText():this.parent}syncFont(t,s){s.font=this._font}syncStyle(t,s){s.textBaseline="alphabetic",s.fillStyle=this.color,s.strokeStyle=this.stroke,s.lineWidth=this.strokeThickness,s.lineCap="round",s.lineJoin="round"}syncShadow(t,s){s?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=_d(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=Me(t,"fontFamily","Courier"),this.fontSize=Me(t,"fontSize","16px"),this.fontStyle=Me(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,s){return this.fixedWidth=t,this.fixedHeight=s,t&&(this.parent.width=t),s&&(this.parent.height=s),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,s,g){return g===void 0&&(g=!0),this.backgroundColor=gt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=gt(s,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=g,this.update(!1)}setBackgroundStrokeColor(t,s){return this.backgroundStrokeColor=gt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=s,this.update(!1)}setBackgroundCornerRadius(t,s){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=s,this.update(!1)}setFill(t){return this.color=gt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=gt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,s){return t===void 0?this.strokeThickness=0:(s===void 0&&(s=this.strokeThickness),this.stroke=gt(t,this.parent.canvas,this.parent.context),this.strokeThickness=s),this.update(!0)}setShadow(t,s,g,C,M,o){return t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g="#000"),C===void 0&&(C=0),M===void 0&&(M=!1),o===void 0&&(o=!0),this.shadowOffsetX=t,this.shadowOffsetY=s,this.shadowColor=gt(g,this.parent.canvas,this.parent.context),this.shadowBlur=C,this.shadowStroke=M,this.shadowFill=o,this.update(!1)}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=t),this.shadowOffsetX=t,this.shadowOffsetY=s,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=gt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,s,g){return t===void 0&&(t="#000"),s===void 0&&(s=0),g===void 0&&(g=0),this.underlineColor=gt(t,this.parent.canvas,this.parent.context),this.underlineThickness=s,this.underlineOffset=g,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=gt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=tf[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,s){return t===void 0&&(t="left"),s===void 0&&(s="top"),this.halign=t,this.valign=s,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,s){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,s&&(typeof s=="string"?(this.fontFamily=s,this.fontSize="",this.fontStyle=""):(this.fontFamily=Me(s,"fontFamily",this.fontFamily),this.fontSize=Me(s,"fontSize",this.fontSize),this.fontStyle=Me(s,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},s=this.propertyMap;for(var g in s)t[g]=this[g];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}const tf={none:Zt.NO_WRAP,word:Zt.WORD_WRAP,char:Zt.CHAR_WRAP,character:Zt.CHAR_WRAP},z1={draw(i,t,s,g){var C=this.penManager;this.hitAreaManager.clear();var M=this.context;M.save();var o=this.defaultStyle;this.clear(),ru(this,o.backgroundColor,o.backgroundStrokeColor,o.backgroundStrokeLineWidth,o.backgroundCornerRadius,o.backgroundColor2,o.backgroundHorizontalGradient,o.backgroundCornerIteration),i+=this.startXOffset,t+=this.startYOffset;var T=o.halign,e=o.valign,d,x=o.lineHeight,u=C.lines,l=u.length,h=o.maxLines,n,r,f;h>0&&l>h?(n=h,e==="center"?r=Math.floor((l-n)/2):e==="bottom"?r=l-n:r=0):(n=l,r=0),f=r+n;var a,c,p=this.rtl,v=p?this.parent.width:void 0;e==="center"?c=Math.max((g-n*x)/2,0):e==="bottom"?c=Math.max(g-n*x-2,0):c=0,c+=t;for(var m=r;m<f;m++)if(d=C.getLineWidth(m),d!==0){for(var y=u[m],E=y.length,P=T,S=0;S<E;S++){var w=y[S].prop.align;if(w!==void 0){P=w;break}}P==="center"?a=(s-d)/2:P==="right"?a=p?0:s-d:a=p?s-d:0,a+=i;for(var S=0;S<E;S++)this.drawPen(y[S],a,c,v)}M.restore()},drawPen(i,t,s,g){t+=i.x,s+=i.y+(i.prop.y||0),g!==void 0&&(t=g-t);var C=this.canvas,M=this.context;M.save();var o=this.parser.propToContextStyle(this.defaultStyle,i.prop);if(o.buildFont(),o.syncFont(C,M),o.syncStyle(C,M),o.underlineThickness>0&&i.width>0&&this.drawUnderline(t,s,i.width,o),i.isTextPen&&this.drawText(t,s,i.text,o),i.isImagePen&&this.drawImage(t,s,i.prop.img,o),M.restore(),i.hasAreaMarker&&i.width>0){var T,e=i.prop.area;if(e)T={key:e};else{var d=i.prop.url;T={key:`url:${d}`,url:d}}this.hitAreaManager.add(t,s-this.startYOffset,i.width,this.defaultStyle.lineHeight,T)}},clear(){var i=this.canvas;this.context.clearRect(0,0,i.width,i.height)},drawUnderline(i,t,s,g){t+=g.underlineOffset-g.underlineThickness/2,this.autoRound&&(i=Math.round(i),t=Math.round(t));var C=this.context,M=C.lineCap;C.lineCap="butt",C.strokeStyle=g.underlineColor,C.lineWidth=g.underlineThickness,C.beginPath(),C.moveTo(i,t),C.lineTo(i+s,t),C.stroke(),C.lineCap=M},drawText(i,t,s,g){this.autoRound&&(i=Math.round(i),t=Math.round(t));var C=this.context;g.stroke&&g.stroke!=="none"&&g.strokeThickness>0&&(g.syncShadow(C,g.shadowStroke),C.strokeText(s,i,t)),g.color&&g.color!=="none"&&(g.syncShadow(C,g.shadowFill),C.fillText(s,i,t))},drawImage(i,t,s,g){t-=this.startYOffset,this.parent.imageManager.draw(s,this.context,i,t,this.autoRound)}},ys=Phaser.Utils.Objects.GetValue,V1=Zt.NO_NEWLINE,ef=Zt.RAW_NEWLINE;class U1{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=ys(t,"text",""),this.x=ys(t,"x",0),this.y=ys(t,"y",0),this.width=ys(t,"width",0);var s=ys(t,"prop",null);s===null&&(s={}),this.prop=s,this.newLineMode=ys(t,"newLineMode",0),this.startIndex=ys(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===ef&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==V1&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===ef&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var Gs=function(i,t){var s=Array.isArray(i);if(t===void 0?t=s?[]:{}:Oi(t),s){t.length=i.length;for(var g=0,C=i.length;g<C;g++)t[g]=i[g]}else for(var M in i)t[M]=i[M];return t};const sf=Phaser.Utils.Objects.GetFastValue,nf=Zt.NO_NEWLINE,Y1=Zt.WRAPPED_NEWLINE;class hu{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=sf(t,"tagToText",ue),this.tagToTextScope=sf(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,s=this.lines.length;t<s;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,s,g,C,M,o){var T=this.pensPool.pop();return T==null&&(T=new U1),Ts.text=t,Ts.x=s,Ts.y=g,Ts.width=C,Ts.prop=M,Ts.newLineMode=o,T.resetFromJSON(Ts),this.addPen(T),this}addImagePen(t,s,g,C){return this.addTextPen("",t,s,g,C,nf),this}addNewLinePen(){var t=this.lastPen,s=t?t.lastX:0,g=t?t.y:0,C=t?Gs(t.prop):null;return this.addTextPen("",s,g,0,C,Y1),this}addPen(t){var s=this.lastPen;s==null?t.startIndex=0:t.startIndex=s.endIndex,this.pens.push(t);var g=this.lastLine;g==null&&(g=this.linesPool.pop()||[],this.lines.push(g)),g.push(t),t.newLineMode!==nf&&(g=this.linesPool.pop()||[],this.lines.push(g)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new hu),t.clear();for(var s=0,g=this.lines.length;s<g;s++)for(var C=this.lines[s],M=0,o=C.length;M<o;M++){var T=C[M];t.addPen(T.text,T.x,T.y,T.width,Gs(T.prop),T.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var s=this.lines[t];return s&&s[0]?s[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var s,g=!1,C;for(s=t;s>=0&&(C=this.lines[s],g=C!=null&&C.length>0,!g);s--);if(!g)return 0;var M=C[C.length-1];return M.endIndex}getLineWidth(t){var s=this.lines[t];if(!s)return 0;var g=s[s.length-1];if(g==null)return 0;var C=g.lastX;return C}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,s=0,g=0,C=this.lines.length;g<C;g++)t=this.getLineWidth(g),t>s&&(s=t);return this.maxLinesWidth=s,s}getLineWidths(){for(var t=[],s=0,g=this.lines.length;s<g;s++)t.push(this.getLineWidth(s));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",s=this.pens,g=0,C=s.length;g<C;g++)t+=s[g].plainText;return t}get rawTextLength(){for(var t=0,s=this.pens,g=0,C=this.pens.length;g<C;g++)t+=s[g].rawTextLength;return t}getSliceTagText(t,s,g){if(t===void 0&&(t=0),s===void 0){var C=this.lastPen;if(C==null)return"";s=C.endIndex}g===void 0&&(g=!1);for(var M="",o,T,e,d,x,u,l,h=0,n=this.pens.length;h<n&&(o=this.pens[h],d=o.endIndex,!(!(d<=t)&&(o=this.pens[h],T=g?o.wrapText:o.plainText,u=o.prop,e=o.startIndex,x=e>=t&&d<=s,x||(T=T.substring(t-e,s-e)),this.tagToTextScope?M+=this.tagToText.call(this.tagToTextScope,T,u,l):M+=this.tagToText(T,u,l),l=u,d>=s)));h++);return M}get length(){return this.lines.length}set length(t){this.clear()}}var Ts={};const X1=Phaser.Geom.Rectangle;var rf=new pi;class W1{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,s=this.hitAreas.length;t<s;t++)Oi(this.hitAreas[t].data);return rf.pushMultiple(this.hitAreas),this}add(t,s,g,C,M){var o=rf.pop();return o===null?o=new X1(t,s,g,C):o.setTo(t,s,g,C),o.data=M,this.hitAreas.push(o),this}getFirst(t,s){for(var g=0,C=this.hitAreas.length;g<C;g++){var M=this.hitAreas[g];if(M.contains(t,s))return M}return null}getByKey(t){for(var s=0,g=this.hitAreas.length;s<g;s++){var C=this.hitAreas[s];if(C.data.key===t)return C}return null}drawBounds(t,s,g){s===void 0&&(s=16777215),g&&t.save().scaleCanvas(g.scaleX,g.scaleY).rotateCanvas(g.rotation).translateCanvas(g.x,g.y);for(var C=0,M=this.hitAreas.length;C<M;C++){var o=this.hitAreas[C];t.lineStyle(1,s).strokeRect(o.x,o.y,o.width,o.height)}return g&&t.restore(),this}}var k1=function(){this.parent.on("pointerdown",H1,this).on("pointerup",$1,this).on("pointermove",no,this).on("pointerover",no,this).on("pointerout",function(i,t){no.call(this,i,null,null,t)},this)},H1=function(i,t,s,g){var C=this.hitAreaManager.getFirst(t,s);if(C!==null){var M=C.data.key;wn.call(this,"areadown",M,i,t,s,g),C.data.isDown=!0}},$1=function(i,t,s,g){var C=this.hitAreaManager.getFirst(t,s);if(C!==null){var M=C.data,o=M.key;if(wn.call(this,"areaup",o,i,t,s,g),M.isDown){wn.call(this,"areaclick",o,i,t,s,g);var T=M.url;T&&window.open(T,"_blank")}M.isDown=!1}},no=function(i,t,s,g){if(t===null){this.lastHitAreaKey!==null&&(wn.call(this,"areaout",this.lastHitAreaKey,i,t,s,g),this.hitAreaManager.getByKey(this.lastHitAreaKey).isDown=!1,this.lastHitAreaKey=null);return}var C=this.hitAreaManager.getFirst(t,s),M=C?C.data.key:null;if(this.lastHitAreaKey!==M){if(this.lastHitAreaKey!==null){wn.call(this,"areaout",this.lastHitAreaKey,i,t,s,g);var o=this.hitAreaManager.getByKey(this.lastHitAreaKey);this.urlTagCursorStyle&&!!o.data.url&&(this.scene.input.manager.canvas.style.cursor=""),o.isDown=!1}M!==null&&(wn.call(this,"areaover",M,i,t,s,g),this.urlTagCursorStyle&&!!C.data.url&&(this.scene.input.manager.canvas.style.cursor=this.urlTagCursorStyle)),this.lastHitAreaKey=M}},wn=function(i,t,s,g,C,M){this.parent.emit(`${i}-${t}`,s,g,C,M),this.parent.emit(i,t,s,g,C,M)};const K1=Zt.NO_NEWLINE,Z1=Zt.RAW_NEWLINE,ro=Zt.WRAPPED_NEWLINE,af=Zt.NO_WRAP,J1=Zt.WORD_WRAP,j1=Zt.CHAR_WRAP,Q1=Zt.SPLITREGEXP;var _p=function(i,t,s,g,C,M){g<=0&&(s=af);var o=[];if(!i||!i.length)return o;for(var T=s===af,e=s===J1,d=i.split(Q1),x,u,l,h=0,n=d.length;h<n;h++){if(x=d[h],l=h===n-1?K1:Z1,T){var r=t(x);o.push(M.getLine(x,r,l));continue}if(u=h===0?g-C:g,x.length<=100){var r=t(x);if(r<=u){o.push(M.getLine(x,r,l));continue}}var f,a;e?(f=x.split(" "),a=f[f.length-1]==="",a&&(f.length-=1)):f=x;for(var c,p,v,m="",y=0,E,P=e?t(" "):void 0,S=0,w=f.length;S<w;S++){if(c=f[S],p=t(c),v=S===w-1,e&&(!v||a)&&(c+=" ",p+=P),e&&p>g){m!==""?o.push(M.getLine(m,y,ro)):S===0&&C>0&&o.push(M.getLine("",0,ro)),o.push(..._p(c,t,j1,g,0,M));var A=o.pop();m=A.text,y=A.width,M.freeLine(A),m===" "&&(m="",y=0);continue}E=y+p,E>u?(o.push(M.getLine(m,y,ro)),m=c,y=p,u=g):(m+=c,y=E),v&&o.push(M.getLine(m,y,l))}}return o};const ao=Phaser.Utils.Objects.GetValue,q1=Zt.NO_WRAP,_1=Zt.NO_NEWLINE;class tg{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=ao(t,"context",null),this.canvas=this.context.canvas,this.parser=ao(t,"parser",null),this.defaultStyle=ao(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new W1,this.lastHitAreaKey=null,this.urlTagCursorStyle=null;var s=this.context;this.getTextWidth=function(g){return s.measureText(g).width}}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,s,g,C,M){if(M===void 0&&(M=this.penManager),M.clear(),t==="")return M;var o=this.parent.style;if(o.isWrapFitMode){var T=this.parent.padding;g=o.fixedWidth-T.left-T.right}for(var e=this.canvas,d=this.context,x=function(L){return d.measureText(L).width},u=0,l=0,h=o.wrapCallback,n=o.wrapCallbackScope,r=!0,f,a,c,p=this.parser.splitText(t),v,m,y=this.wrapTextLinesPool,E=0,P=p.length;E<P;E++)if(v=this.parser.tagTextToProp(p[E],a),f=v.plainText,a=v.prop,a.img){var S=this.imageManager.getOuterWidth(a.img);g>0&&s!==q1&&g<u+S&&(M.addNewLinePen(),l+=C,u=0),M.addImagePen(u,l,S,Gs(a)),u+=S}else if(f!==""){if(d.save(),c=this.parser.propToContextStyle(this.defaultStyle,a),c.buildFont(),c.syncFont(e,d),c.syncStyle(e,d),!h)m=_p(f,x,s,g,u,y);else{m=h.call(n,f,x,g,u),typeof m=="string"&&(m=m.split(`
`));for(var R,w=0,A=m.length;w<A;w++)R=m[w],typeof R=="string"?m[w]=y.getLine(R,x(R),w<A-1?2:0):r=!1}for(var R,w=0,A=m.length;w<A;w++)R=m[w],M.addTextPen(R.text,u,l,R.width,Gs(a),R.newLineMode),R.newLineMode!==_1?(u=0,l+=C):u+=R.width;r&&y.freeLines(m),m=null,d.restore()}for(var E=0,P=this.lines.length;E<P;E++){var O=this.lines[E],F=O[O.length-1];F&&(F.width+=this.parser.getStrokeThinkness(this.defaultStyle,F.prop))}return M}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,s=this.defaultStyle.maxLines;return s>0&&t>s&&(t=s),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,s=this.defaultStyle.lineHeight*t;return t>0&&(s-=this.defaultStyle.lineSpacing),s}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new hu({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,s,g){var C;if(t==null)C=this.penManager.plainText;else{var M=this.parser.splitText(t,1);C="";for(var o=0,T=M.length;o<T;o++)C+=M[o]}return(s!=null||g!=null)&&(s==null&&(s=0),g==null&&(g=C.length),C=C.substring(s,g)),C}getPenManager(t,s){if(t===void 0)return this.copyPenManager(s,this.penManager);s===void 0&&(s=this.newPenManager());var g=this.defaultStyle;return this.updatePenManager(t,g.wrapMode,g.wrapWidth,g.lineHeight,s),s}getText(t,s,g,C){if(t==null)return this.penManager.getSliceTagText(s,g,C);var M=this.tmpPenManager,o=this.defaultStyle;return this.updatePenManager(t,o.wrapMode,o.wrapWidth,o.lineHeight,M),M.getSliceTagText(s,g,C)}copyPenManager(t,s){return s===void 0&&(s=this.penManager),s.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var tT={setInteractive:k1};Object.assign(tg.prototype,z1,tT);class hf extends pi{freeLine(t){if(!!t)return this.push(t),this}freeLines(t){if(!!t)return this.pushMultiple(t),this}getLine(t,s,g){var C=this.pop();return C===null&&(C={}),C.text=t,C.width=s,C.newLineMode=g,C}}const eT=Phaser.Utils.Objects.IsPlainObject,Hn=Phaser.Utils.Objects.GetValue;var ho=function(i,t){eT(i)?(t=i,i=t.key):t===void 0&&(t={key:i}),t.hasOwnProperty("key")||(t.key=i);var s=t.key,g=t.frame,C=t.width,M=t.height;if(C===void 0||M===void 0){var o=this.textureManager.getFrame(s,g),T=o?o.cutWidth:0,e=o?o.cutHeight:0;C===void 0&&M===void 0?(C=T,M=e):C===void 0?C=T*(M/e):M===void 0&&(M=e*(C/T))}this.images[i]={key:s,frame:g,width:C,height:M,y:Hn(t,"y",0),left:Hn(t,"left",0),right:Hn(t,"right",0),originX:Hn(t,"originX",0),originY:Hn(t,"originY",0)}},iT=function(i,t,s,g,C){var M=this.get(i),o=this.textureManager.getFrame(M.key,M.frame),T=M.width,e=M.height;s+=M.left-M.originX*T,g+=M.y-M.originY*e,C&&(s=Math.round(s),g=Math.round(g)),t.drawImage(o.source.image,o.cutX,o.cutY,o.cutWidth,o.cutHeight,s,g,T,e)};class ou{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,s){if(typeof t=="string")ho.call(this,t,s);else if(Array.isArray(t))for(var g=t,C=0,M=g.length;C<M;C++)ho.call(this,g[C]);else{var g=t;for(var t in g)ho.call(this,t,g[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var s=this.get(t);return s?s.width+s.left+s.right:0}getFrame(t){var s=this.get(t);return s?this.textureManager.getFrame(s.key,s.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var sT={draw:iT};Object.assign(ou.prototype,sT);const nT=Phaser.Utils.Objects.IsPlainObject,rT=Phaser.DOM.AddToDOM,of=Phaser.Display.Canvas.CanvasPool,aT=Phaser.GameObjects.GameObject,xe=Phaser.Utils.Objects.GetValue,hT=Phaser.DOM.RemoveFromDOM,oT=Zt.SPLITREGEXP;var Js=null,oo=null,lo=null;class eg extends qp{constructor(t,s,g,C,M,o,T){if(nT(s)){var e=s;s=xe(e,"x",0),g=xe(e,"y",0),C=xe(e,"text",""),M=xe(e,"style")}if(s===void 0&&(s=0),g===void 0&&(g=0),super(t,o),this.renderer=t.sys.game.renderer,this.setPosition(s,g),this.setOrigin(0,0),this.initPipeline(),this.canvas=of.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,M){if(M.hasOwnProperty("align")){var d=M.align;delete M.align,M.halign=d}M.hasOwnProperty("stroke")&&!M.hasOwnProperty("strokeThickness")&&(M.strokeThickness=1)}this.style=new au(this,M);var x=xe(M,"images",void 0);x&&this.addImage(x),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var u=xe(M,"sharedPool",!0),l,h,n;u?(Js||(Js={},oo=new pi,lo=new hf,this.scene.game.events.once("destroy",function(){Js=null,oo=null,lo=null})),Js.hasOwnProperty(o)||(Js[o]=new pi),l=Js[o],h=oo,n=lo):(l=new pi,h=new pi,n=new hf),this.canvasText=new tg({parent:this,context:this.context,parser:T,style:this.style,pensPool:l,linesPool:h,wrapTextLinesPool:n}),this.parser=T,this.initRTL(),M&&M.padding&&this.setPadding(M.padding),this.setText(C),this.setUrlTagCursorStyle(xe(M,"urlTagCursorStyle","pointer")),xe(M,"interactive",!1)&&this.setInteractive()}preDestroy(){this.style.rtl&&hT(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),of.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",rT(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setPadding(t,s,g,C){if(typeof t=="object"){var M=t,o=xe(M,"x",null);o!==null?(t=o,g=o):(t=xe(M,"left",0),g=xe(M,"right",t));var T=xe(M,"y",null);T!==null?(s=T,C=T):(s=xe(M,"top",0),C=xe(M,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),g===void 0&&(g=t),C===void 0&&(C=s);return this.padding.left=t,this.padding.top=s,this.padding.right=g,this.padding.bottom=C,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var s=this.canvasText,g=this.style;t&&s.updatePenManager(this._text,g.wrapMode,g.wrapWidth,g.lineHeight);var C=this.padding,M,o,T=Math.ceil(s.linesWidth);g.fixedWidth===0?(this.width=T+C.left+C.right,M=T):(this.width=g.fixedWidth,M=this.width-C.left-C.right,M<T&&(M=T)),g.fixedHeight===0?(this.height=s.linesHeight+C.top+C.bottom,o=s.linesHeight):(this.height=g.fixedHeight,o=this.height-C.top-C.bottom,o<s.linesHeight&&(o=s.linesHeight));var e=this.width,d=this.height;this.updateDisplayOrigin();var x=g.resolution;e*=x,d*=x,e=Math.max(Math.ceil(e),1),d=Math.max(Math.ceil(d),1);var u=this.canvas,l=this.context;u.width!==e||u.height!==d?(u.width=e,u.height=d,this.frame.setSize(e,d)):l.clearRect(0,0,e,d),l.save(),l.scale(x,x);var h=this.style.rtl?C.right:C.left,n=C.top;s.draw(h,n,M,o),l.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(u,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=this.width,r.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),s={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=s,t}setInteractive(t,s,g){var C=!!this.input;return aT.prototype.setInteractive.call(this,t,s,g),C||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,s,g){return t=this.canvasText.getText(t,s,g,!0),t.split(oT)}getPlainText(t,s,g){return this.canvasText.getPlainText(t,s,g)}getText(t,s,g,C){return C===void 0&&(C=!1),this.canvasText.getText(t,s,g,C)}getSubString(t,s,g){return this.getText(t,s,g)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,s){return this.canvasText.getPenManager(t,s)}setSize(t,s){return this.setFixedSize(t,s)}resize(t,s){return this.setFixedSize(t,s)}get imageManager(){return this._imageManager||(this._imageManager=new ou(this.scene)),this._imageManager}addImage(t,s){return this.imageManager.add(t,s),this}drawAreaBounds(t,s){return this.canvasText.hitAreaManager.drawBounds(t,s,this),this}generateTexture(t,s,g,C,M){var o=this.canvas;return C===void 0?C=o.width:C*=this.resolution,M===void 0?M=o.height:M*=this.resolution,Jp(this.scene,o,t,s,g,C,M),this}}var lT=function(i,t){for(var s=this.tagRegex,g=[],C=0,M=!1,o=!1;;){var T=s.RE_SPLITTEXT.exec(i);if(!T)break;var e=T[0];if(o)if(s.RE_ESC_CLOSE.test(e))o=!1;else continue;else if(M)if(s.RE_RAW_CLOSE.test(e))M=!1;else continue;else s.RE_ESC_OPEN.test(e)?o=!0:s.RE_RAW_OPEN.test(e)&&(M=!0);var d=s.RE_SPLITTEXT.lastIndex,x=d-e.length;if(C<x){var u=i.substring(C,x);g.push(u)}t===void 0&&g.push(e),C=d}var l=i.length;return C<l&&g.push(i.substring(C,l)),g};const jt=!1,qt=!0;var uT={plainText:null,prevProp:null},dT=function(i,t){var s=this.tagRegex;t==null&&(t={});var g="";if(t.img&&xt(t,jt,"img"),t.esc)s.RE_ESC_CLOSE.test(i)?xt(t,jt,"esc"):g=i;else if(t.raw)s.RE_RAW_CLOSE.test(i)?xt(t,jt,"raw"):g=i;else if(s.RE_ESC_OPEN.test(i))xt(t,qt,"esc",!0);else if(s.RE_ESC_CLOSE.test(i))xt(t,jt,"esc");else if(s.RE_RAW_OPEN.test(i))xt(t,qt,"raw",!0);else if(s.RE_RAW_CLOSE.test(i))xt(t,jt,"raw");else if(s.RE_BLOD_OPEN.test(i))xt(t,qt,"b",!0);else if(s.RE_BLOD_CLOSE.test(i))xt(t,jt,"b");else if(s.RE_ITALICS_OPEN.test(i))xt(t,qt,"i",!0);else if(s.RE_ITALICS_CLOSE.test(i))xt(t,jt,"i");else if(s.RE_WEIGHT_OPEN.test(i)){var C=i.match(s.RE_WEIGHT_OPEN);xt(t,qt,"weight",C[1])}else if(s.RE_WEIGHT_CLOSE.test(i))xt(t,jt,"weight");else if(s.RE_SIZE_OPEN.test(i)){var C=i.match(s.RE_SIZE_OPEN);xt(t,qt,"size",`${C[1]}px`)}else if(s.RE_SIZE_CLOSE.test(i))xt(t,jt,"size");else if(s.RE_COLOR_OPEN.test(i)){var C=i.match(s.RE_COLOR_OPEN);xt(t,qt,"color",C[1])}else if(s.RE_COLOR_CLOSE.test(i))xt(t,jt,"color");else if(s.RE_UNDERLINE_OPEN.test(i))xt(t,qt,"u",!0);else if(s.RE_UNDERLINE_OPENC.test(i)){var C=i.match(s.RE_UNDERLINE_OPENC);xt(t,qt,"u",C[1])}else if(s.RE_UNDERLINE_CLOSE.test(i))xt(t,jt,"u");else if(s.RE_SHADOW_OPEN.test(i))xt(t,qt,"shadow",!0);else if(s.RE_SHADOW_CLOSE.test(i))xt(t,jt,"shadow");else if(s.RE_STROKE_OPEN.test(i))xt(t,qt,"stroke",!0);else if(s.RE_STROKE_OPENC.test(i)){var C=i.match(s.RE_STROKE_OPENC);xt(t,qt,"stroke",C[1])}else if(s.RE_STROKE_CLOSE.test(i))xt(t,jt,"stroke");else if(s.RE_OFFSETY_OPEN.test(i)){var C=i.match(s.RE_OFFSETY_OPEN);xt(t,qt,"y",parseFloat(C[1]))}else if(s.RE_OFFSETY_CLOSE.test(i))xt(t,jt,"y");else if(s.RE_IMAGE_OPEN.test(i)){var C=i.match(s.RE_IMAGE_OPEN);xt(t,qt,"img",C[1])}else if(s.RE_IMAGE_CLOSE.test(i))xt(t,jt,"img");else if(s.RE_AREA_OPEN.test(i)){var C=i.match(s.RE_AREA_OPEN);xt(t,qt,"area",C[1])}else if(s.RE_AREA_CLOSE.test(i))xt(t,jt,"area");else if(s.RE_URL_OPEN.test(i)){var C=i.match(s.RE_URL_OPEN);xt(t,qt,"url",C[1])}else if(s.RE_URL_CLOSE.test(i))xt(t,jt,"url");else if(s.RE_ALIGN_OPEN.test(i)){var C=i.match(s.RE_ALIGN_OPEN);xt(t,qt,"align",C[1])}else s.RE_ALIGN_CLOSE.test(i)?xt(t,jt,"align"):g=i;var M=uT;return M.plainText=g,M.prop=t,M},xt=function(i,t,s,g){return t===qt?i[s]=g:i.hasOwnProperty(s)&&delete i[s],i},fT=function(i,t){var s=vT;if(t.hasOwnProperty("img"))s.image=t.img;else{if(s.image=null,t.hasOwnProperty("family")?s.fontFamily=t.family:s.fontFamily=i.fontFamily,t.hasOwnProperty("size")){var g=t.size;typeof g=="number"&&(g=`${g}px`),s.fontSize=g}else s.fontSize=i.fontSize;s.fontStyle=cT(t),t.hasOwnProperty("color")?s.color=t.color:s.color=i.color,t.hasOwnProperty("stroke")?t.stroke===!0?(s.stroke=i.stroke,s.strokeThickness=i.strokeThickness):(s.stroke=t.stroke,s.strokeThickness=i.strokeThickness):(s.stroke=i.stroke,s.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(s.shadowColor=i.shadowColor,s.shadowOffsetX=i.shadowOffsetX,s.shadowOffsetY=i.shadowOffsetY,s.shadowBlur=i.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor=t.shadow,s.shadowOffsetX=i.shadowOffsetX,s.shadowOffsetY=i.shadowOffsetY,s.shadowBlur=i.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0):(s.shadowColor="#000",s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,s.shadowStroke=!1,s.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(s.underlineColor=i.underlineColor,s.underlineThickness=i.underlineThickness,s.underlineOffset=i.underlineOffset):(s.underlineColor=t.u,s.underlineThickness=i.underlineThickness,s.underlineOffset=i.underlineOffset):(s.underlineColor="#000",s.underlineThickness=0,s.underlineOffset=0),s},cT=function(i){var t=i.b,s=i.weight,g=i.i;return t||s||g?g?t?"bold italic":s?`${s} italic`:"italic":t?"bold":s.toString():""},vT=new au,pT=function(i,t,s){s==null&&(s=gT);var g=[];for(var C in s)t.hasOwnProperty(C)||g.push(`[/${C}]`);for(var C in t){var M=t[C];if(s[C]!==M)switch(C){case"size":g.push(`[size=${M.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"url":case"align":g.push(`[${C}=${M}]`);break;case"u":M===!0?g.push("[u]"):g.push(`[u=${M}]`);break;default:g.push(`[${C}]`);break}}return g.push(i),g.join("")},gT={},Fn=function(i){return i.replace(mT,"\\$&").replace(xT,"\\x2d")},mT=/[|\\{}()[\]^$+*?.]/g,xT=/-/g,lf,uf,Tt={},se=function(i,t,s,g){return g===void 0?`${i}${s}${t}`:`${i}${s}=(${g})${t}`},ce=function(i,t,s){return`${i}/${s}${t}`},uo="[-.0-9]+",fo="[a-z]+|#[0-9abcdef]+",na="[^\\]]+",ig=function(i,t){if(t===void 0){var s=i;i=s[0],t=s[1]}if(lf===i&&uf===t)return!1;lf=i,uf=t,i=Fn(i),t=Fn(t);var g="esc",C=se(i,t,g),M=ce(i,t,g),o="raw",T=se(i,t,o),e=ce(i,t,o),d="b",x=se(i,t,d),u=ce(i,t,d),l="i",h=se(i,t,l),n=ce(i,t,l),r="weight",f=se(i,t,r,uo),a=ce(i,t,r),c="size",p=se(i,t,c,uo),v=ce(i,t,c),m="color",y=se(i,t,m,fo),E=ce(i,t,m),P="u",S=se(i,t,P),w=se(i,t,P,fo),A=ce(i,t,P),R="shadow",O=se(i,t,R),F=ce(i,t,R),L="stroke",D=se(i,t,L),I=se(i,t,L,fo),B=ce(i,t,L),V="y",Y=se(i,t,V,uo),W=ce(i,t,V),$="img",N=se(i,t,$,na),U=ce(i,t,$),b="area",G=se(i,t,b,na),z=ce(i,t,b),X="url",k=se(i,t,X,na),H=ce(i,t,X),K="align",Z=se(i,t,K,na),J=ce(i,t,K);return Tt.RE_ESC_OPEN=new RegExp(C,"i"),Tt.RE_ESC_CLOSE=new RegExp(M,"i"),Tt.RE_RAW_OPEN=new RegExp(T,"i"),Tt.RE_RAW_CLOSE=new RegExp(e,"i"),Tt.RE_BLOD_OPEN=new RegExp(x,"i"),Tt.RE_BLOD_CLOSE=new RegExp(u,"i"),Tt.RE_ITALICS_OPEN=new RegExp(h,"i"),Tt.RE_ITALICS_CLOSE=new RegExp(n,"i"),Tt.RE_WEIGHT_OPEN=new RegExp(f,"i"),Tt.RE_WEIGHT_CLOSE=new RegExp(a,"i"),Tt.RE_SIZE_OPEN=new RegExp(p,"i"),Tt.RE_SIZE_CLOSE=new RegExp(v,"i"),Tt.RE_COLOR_OPEN=new RegExp(y,"i"),Tt.RE_COLOR_CLOSE=new RegExp(E,"i"),Tt.RE_UNDERLINE_OPEN=new RegExp(S,"i"),Tt.RE_UNDERLINE_OPENC=new RegExp(w,"i"),Tt.RE_UNDERLINE_CLOSE=new RegExp(A,"i"),Tt.RE_SHADOW_OPEN=new RegExp(O,"i"),Tt.RE_SHADOW_CLOSE=new RegExp(F,"i"),Tt.RE_STROKE_OPEN=new RegExp(D,"i"),Tt.RE_STROKE_OPENC=new RegExp(I,"i"),Tt.RE_STROKE_CLOSE=new RegExp(B,"i"),Tt.RE_OFFSETY_OPEN=new RegExp(Y,"i"),Tt.RE_OFFSETY_CLOSE=new RegExp(W,"i"),Tt.RE_IMAGE_OPEN=new RegExp(N,"i"),Tt.RE_IMAGE_CLOSE=new RegExp(U,"i"),Tt.RE_AREA_OPEN=new RegExp(G,"i"),Tt.RE_AREA_CLOSE=new RegExp(z,"i"),Tt.RE_URL_OPEN=new RegExp(k,"i"),Tt.RE_URL_CLOSE=new RegExp(H,"i"),Tt.RE_ALIGN_OPEN=new RegExp(Z,"i"),Tt.RE_ALIGN_CLOSE=new RegExp(J,"i"),Tt.RE_SPLITTEXT=new RegExp([T,e,C,M,x,u,h,n,f,a,p,v,y,E,S,w,A,O,F,D,I,B,Y,W,N,U,G,z,k,H,Z,J].join("|"),"ig"),!0},df=function(i,t){return i!==void 0&&ig(i,t),Object.assign({},Tt)};const yT=Phaser.Utils.Objects.GetValue;class sg{constructor(t){var s=yT(t,"delimiters","[]");this.tagRegex=df(s)}getStrokeThinkness(t,s){var g;return s.hasOwnProperty("stroke")?g=t.strokeThickness:g=0,g}setDelimiters(t,s){return ig(t,s)&&(this.tagRegex=df()),this}}var TT={splitText:lT,tagTextToProp:dT,propToContextStyle:fT,propToTagText:pT};Object.assign(sg.prototype,TT);class Is extends eg{constructor(t,s,g,C,M){var o=new sg(M);super(t,s,g,C,M,"rexBBCodeText",o)}setDelimiters(t,s){return this.parse.setDelimiters(t,s),this}}st.register("BBCodeText",function(i,t,s,g){var C=new Is(this.scene,i,t,s,g);return this.scene.add.existing(C),C});it(window,"RexPlugins.UI.BBCodeText",Is);var CT={plainText:null,prevProp:null},ST=new au;class ET{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,s){this.tags[t]=s}getTag(t){return this.tags[t]}splitText(t,s){for(var g=[],C=0;;){var M=co.exec(t);if(!M)break;var o=M[0],T=co.lastIndex-o.length;if(C<T&&g.push(t.substring(C,T)),s===void 0)g.push(o);else if(s===1){if(cf.test(o)){var e=o.match(vf);g.push(e[2])}else if(pf.test(o)){var e=o.match(gf);g.push(e[2])}}C=co.lastIndex}var d=t.length;return C<d&&g.push(t.substring(C,d)),g}tagTextToProp(t,s){var g,C;if(cf.test(t)){var M=t.match(vf);if(M!=null){var o=M[1],T=this.tags;T.hasOwnProperty(o)?C=T[o]:C={},C._class=o,g=M[2]}}else if(pf.test(t)){var M=t.match(gf);if(M!=null){var e=M[1];C=PT(e),C._style=e,g=M[2]}}g==null&&(g=t),C==null&&(C={});var d=CT;return d.plainText=g,d.prop=C,d}propToContextStyle(t,s){var g=ST;if(s.hasOwnProperty("img"))g.image=s.img;else{if(g.image=null,s.hasOwnProperty("family")||s.hasOwnProperty("fontFamily")||s.hasOwnProperty("font-family")){var C=s.hasOwnProperty("family")?s.family:s.hasOwnProperty("fontFamily")?s.fontFamily:s["font-family"];g.fontFamily=C}else g.fontFamily=t.fontFamily;if(s.hasOwnProperty("size")||s.hasOwnProperty("fontSize")||s.hasOwnProperty("font-size")){var M=s.hasOwnProperty("size")?s.size:s.hasOwnProperty("fontSize")?s.fontSize:s["font-size"];typeof M=="number"&&(M=`${M}px`),g.fontSize=M}else g.fontSize=t.fontSize;if(s.hasOwnProperty("style")||s.hasOwnProperty("fontStyle")||s.hasOwnProperty("font-style")){var o=s.hasOwnProperty("style")?s.style:s.hasOwnProperty("fontStyle")?s.fontStyle:s["font-style"];g.fontStyle=o}else g.fontStyle=t.fontStyle;if(s.hasOwnProperty("color")||s.hasOwnProperty("font-color")){var T=s.hasOwnProperty("color")?s.color:s["font-color"];g.color=T}else g.color=t.color;if(s.hasOwnProperty("stroke")){var e=s.stroke;g.stroke=e.hasOwnProperty("color")?e.color:t.stroke,g.strokeThickness=e.hasOwnProperty("thickness")?e.thickness:t.strokeThickness}else g.stroke=t.stroke,g.strokeThickness=t.strokeThickness}if(s.hasOwnProperty("shadow")){var d=s.shadow;g.shadowColor=d.hasOwnProperty("color")?d.color:t.shadowColor,g.shadowOffsetX=d.hasOwnProperty("offsetX")?d.offsetX:t.shadowOffsetX,g.shadowOffsetY=d.hasOwnProperty("offsetY")?d.offsetY:t.shadowOffsetY,g.shadowBlur=d.hasOwnProperty("blur")?d.blur:t.shadowBlur,g.shadowStroke=!0,g.shadowFill=!0}else g.shadowColor=t.shadowColor,g.shadowOffsetX=t.shadowOffsetX,g.shadowOffsetY=t.shadowOffsetY,g.shadowBlur=t.shadowBlur,g.shadowStroke=t.shadowStroke,g.shadowFill=t.shadowFill;if(s.hasOwnProperty("u")||s.hasOwnProperty("underline")){var x=s.hasOwnProperty("u")?s.u:s.underline;g.underlineColor=x.hasOwnProperty("color")?x.color:t.underlineColor,g.underlineThickness=x.hasOwnProperty("thickness")?x.thickness:t.underlineThickness,g.underlineOffset=x.hasOwnProperty("offset")?x.offset:t.underlineOffset}else g.underlineColor=t.underlineColor,g.underlineThickness=t.underlineThickness,g.underlineOffset=t.underlineOffset;return g}getStrokeThinkness(t,s){var g;if(s.hasOwnProperty("stroke")){var C=s.stroke;g=C.hasOwnProperty("thickness")?C.thickness:t.strokeThickness}else g=t.strokeThickness;return g}propToTagText(t,s,g){return s.hasOwnProperty("_class")?t===""&&this.isTextTag(s._class)?"":`<class='${s._class}'>${t}</class>`:s.hasOwnProperty("_style")?`<style='${s._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var s=this.tags[t];return s?s.img==null:!1}}var PT=function(i){i=i.split(";");for(var t={},s,g,C,M=0,o=i.length;M<o;M++)if(s=i[M].split(":"),g=s[0],C=s[1],!(ff(g)||ff(C))){switch(g){case"stroke":var T=C.split(" "),x=T.length;C={},x>=1&&(C.color=T[0]),x>=2&&(C.thickness=parseInt(T[1].replace("px","")));break;case"shadow":var e=C.split(" "),x=e.length;C={},x>=1&&(C.color=e[0]),x>=2&&(C.offsetX=parseInt(e[1].replace("px",""))),x>=3&&(C.offsetY=parseInt(e[2].replace("px",""))),x>=4&&(C.blur=parseInt(e[3].replace("px","")));break;case"u":case"underline":var d=C.split(" "),x=d.length;C={},x>=1&&(C.color=d[0]),x>=2&&(C.thickness=parseInt(d[1].replace("px",""))),x>=3&&(C.offset=parseInt(d[2].replace("px","")));break;case"y":C=parseFloat(C);break}t[g]=C}return t},ff=function(i){return i=i.replace(MT,""),i.length===0},co=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,cf=/<\s*class=/i,vf=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,pf=/<\s*style=/i,gf=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,MT=/^\s+|\s+$/;const wT=Phaser.Utils.Objects.GetValue;class ng extends eg{constructor(t,s,g,C,M){var o=wT(M,"tags",void 0),T=new ET(o);super(t,s,g,C,M,"rexTagText",T)}addTag(t,s){return this.parser.addTag(t,s),this.updateText(!0)}addTags(t){for(var s in t)this.parser.addTag(s,t[s]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}st.register("tagText",function(i,t,s,g){var C=new ng(this.scene,i,t,s,g);return this.scene.add.existing(C),C});it(window,"RexPlugins.UI.TagText",ng);const ra=Phaser.Utils.Objects.GetValue;var Wa=function(i,t){return t===void 0?i:i[t]},es=function(i,t,s){i===void 0&&(i={}),t===void 0&&(t=0);var g=typeof t;return g==="string"?i[t]=s:g==="number"?(i.left=t,i.right=t,i.top=t,i.bottom=t):(i.left=ra(t,"left",0),i.right=ra(t,"right",0),i.top=ra(t,"top",0),i.bottom=ra(t,"bottom",0)),i};class lu{constructor(t,s){this.setParent(t),this.type=s,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,s){return!1}}Object.assign(lu.prototype,ah);const AT={renderContent(){},render(){if(!this.willRender)return this;var i=this.context;if(i.save(),i.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,s=this.drawY;this.autoRound&&(t=Math.round(t),s=Math.round(s)),i.translate(t,s),i.scale(this.scaleX,this.scaleY),i.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),i.restore(),this}},RT=Phaser.Math.RotateAround;var OT=function(i,t,s,g){return g===void 0?g={}:g===!0&&(vo===void 0&&(vo={}),g=vo),g.x=(i-s.drawX)/s.scaleX,g.y=(t-s.drawY)/s.scaleY,s.rotation!==0&&RT(g,0,0,-s.rotation),g},vo;const LT=Phaser.Geom.Rectangle;var FT=function(i,t){if(this.width===0||this.height===0)return!1;var s=OT(i,t,this,!0);return bT(this).contains(s.x,s.y)},bT=function(i){aa===void 0&&(aa=new LT);var t=i.drawTLX,s=i.drawTLY;return aa.setTo(t,s,i.drawTRX-t,i.drawBLY-s),aa},aa;const DT=Phaser.Math.RotateAround;var rg=function(i,t,s,g){return g===void 0?g={}:g===!0&&(po===void 0&&(po={}),g=po),g.x=t,g.y=s,i.rotation!==0&&DT(g,0,0,i.rotation),g.x=g.x*i.scaleX+i.drawX,g.y=g.y*i.scaleY+i.drawY,g},po;const mf=Phaser.GameObjects.Components.TransformMatrix;var IT=function(i,t,s,g){g===void 0?g={}:g===!0&&(g=BT);var C=t-i.width*i.originX,M=s-i.height*i.originY;return $n===void 0&&($n=new mf,xf=new mf),i.parentContainer?i.getWorldTransformMatrix($n,xf):$n.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),$n.transformPoint(C,M,g),g},$n,xf,BT={},GT=function(i,t,s,g,C){var M=rg(t,s,g,!0),o=IT(i,M.x,M.y,C);return o},ag=function(i,t,s,g,C){typeof s!="number"&&(C=s,s=0,g=0);var M=t.drawCenterX+s,o=t.drawCenterY+g;return GT(i,t,M,o,C)},NT=function(i,t,s){return ag(this.parent,this,i,t,s)},hg={contains:FT,getWorldPosition:NT};Object.assign(hg,AT);const zT=Phaser.Math.DegToRad,VT=Phaser.Math.RadToDeg,ha=Phaser.Utils.Objects.GetValue;class Ns extends lu{constructor(t,s){super(t,s),this.renderable=!0,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,s){return this.x=t,this.y=s,this}setInitialPosition(t,s){return this.x0=t,this.y0=s,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return VT(this._rotation)}set angle(t){this.rotation=zT(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,s){return s===void 0&&(s=!1),this.width=t,s&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}setScale(t,s){return s===void 0&&(s=t),this.scaleX=t,this.scaleY=s,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var s=ha(t,"width",void 0),g=ha(t,"height",void 0),C=ha(t,"scaleX",void 0),M=ha(t,"scaleY",void 0);return s!==void 0?g===void 0&&M===void 0?this.setWidth(s,!0):this.setWidth(s):C!==void 0&&this.setScaleX(C),g!==void 0?s===void 0&&C===void 0?this.setHeight(g,!0):this.setHeight(g):M!==void 0&&this.setScaleY(M),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){return this.x+this.leftSpace+this.offsetX-this.originX*this.width}get drawY(){return this.y+this.offsetY}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(Ns.prototype,hg);var _i=function(i,t,s){return t.hasOwnProperty(i)?t[i]:s[i]};const Cs=Phaser.Utils.Objects.GetValue;class UT extends Ns{constructor(t,s){super(t,"background"),this.setColor(Cs(s,"color",null),Cs(s,"color2",null),Cs(s,"horizontalGradient",!0)),this.setStroke(Cs(s,"stroke",null),Cs(s,"strokeThickness",2)),this.setCornerRadius(Cs(s,"cornerRadius",0),Cs(s,"cornerIteration",null))}set color(t){t=gt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=gt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,g){return g===void 0&&(g=!0),this.color=t,this.color2=s,this.horizontalGradient=g,this}set stroke(t){t=gt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,_i("color2",t,this),_i("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,_i("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,_i("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,s){return this.cornerRadius=t,this.cornerIteration=s,this}renderContent(){ru(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Yi=Phaser.Utils.Objects.GetValue;class YT extends Ns{constructor(t,s){super(t,"innerbounds"),this.setColor(Yi(s,"color",null),Yi(s,"color2",null),Yi(s,"horizontalGradient",!0)),this.setStroke(Yi(s,"stroke",null),Yi(s,"strokeThickness",2))}set color(t){t=gt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=gt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,s,g){return g===void 0&&(g=!0),this.color=t,this.color2=s,this.horizontalGradient=g,this}set stroke(t){t=gt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,s){return t!=null&&s===void 0&&(s=2),this.stroke=t,this.strokeThickness=s,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,Yi(t,"color2",null),Yi(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Yi(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,s=t.left,g=t.top,C=this.parent.width-t.left-t.right,M=this.parent.height-t.top-t.bottom,o=this.context;if(this.color!=null){var T;if(this.color2!=null){var e;this.horizontalGradient?e=o.createLinearGradient(0,0,C,0):e=o.createLinearGradient(0,0,0,M),e.addColorStop(0,this.color),e.addColorStop(1,this.color2),T=e}else T=this.color;o.fillStyle=T,o.fillRect(s,g,C,M)}this.stroke!=null&&this.strokeThickness>0&&(o.strokeStyle=this.stroke,o.lineWidth=this.strokeThickness,o.strokeRect(s,g,C,M))}}const Wt=Phaser.Utils.Objects.GetValue;class uh{constructor(t,s){this.parent=t,this.set(s)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(Wt(t,"bold",!1)),this.setItalic(Wt(t,"italic",!1)),this.setFontSize(Wt(t,"fontSize","16px")),this.setFontFamily(Wt(t,"fontFamily","Courier")),this.setColor(Wt(t,"color","#fff")),this.setStrokeStyle(Wt(t,"stroke",null),Wt(t,"strokeThickness",0)),this.setShadow(Wt(t,"shadowColor",null),Wt(t,"shadowOffsetX",0),Wt(t,"shadowOffsetY",0),Wt(t,"shadowBlur",0)),this.setOffset(Wt(t,"offsetX",0),Wt(t,"offsetY",0)),this.setSpace(Wt(t,"leftSpace",0),Wt(t,"rightSpace",0)),this.setAlign(Wt(t,"align",void 0)),this.setBackgroundColor(Wt(t,"backgroundColor",null)),this.setBackgroundHeight(Wt(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(Wt(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(_i("stroke",t,this),_i("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(_i("shadowOffsetX",t,this),_i("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new uh(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=gt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,s){return this.stroke=gt(t),s!==void 0&&(this.strokeThickness=s),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=gt(t),this}setShadowOffset(t,s){return t===void 0&&(t=0),s===void 0&&(s=0),this.shadowOffsetX=t,this.shadowOffsetY=s,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,s,g,C){return this.setShadowColor(t).setShadowOffset(s,g).setShadowBlur(C),this}setBackgroundColor(t){return this.backgroundColor=gt(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,s){return this.setOffsetX(t).setOffsetY(s),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,s){return this.setLeftSpace(t).setRightSpace(s),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var s=this.hasFill,g=this.hasStroke;return t.fillStyle=s?this.color:"#000",t.strokeStyle=g?this.stroke:"#000",t.lineWidth=g?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,s){return this.syncFont(t).syncStyle(t),t.measureText(s)}}var XT=function(i,t){i===void 0&&(i=0),t===void 0&&(t=0);var s=this.fixedWidth!==i||this.fixedHeight!==t;return s?(this.fixedWidth=i,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(i>0?i:this.width,t>0?t:this.height),this):this},WT=function(i,t){var s=this.padding,g=s.left,C=s.right,M=s.top,o=s.bottom;return es(s,i,t),this.dirty=this.dirty||g!=s.left||C!=s.right||M!=s.top||o!=s.bottom,this},kT=function(i){return Wa(this.padding,i)},HT=function(i){return this.textStyle.modify(i),this},$T=function(i){return this.defaultTextStyle.modify(i),this},KT=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},ZT=function(i){return this.testString=i,this};const JT=Phaser.Utils.Array.Remove;var jT=function(i){return this.poolManager.free(i),JT(this.children,i),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},QT=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const qT=Phaser.Utils.Array.Remove;var _T=function(i){return qT(this.children,i),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},tC=function(){return this.setText(),this},og=function(i,t){var s=Array.isArray(i);return t===void 0||t===this.children.length?s?this.children.push(...i):this.children.push(i):s?this.children.splice(t,0,...i):this.children.splice(t,0,i),this.lastAppendedChildren.length=0,s?this.lastAppendedChildren.push(...i):this.lastAppendedChildren.push(i),this};const os="text",lg="image",ug="drawer",dg="space",uu="command";var fg=function(i){return i.type===os&&i.text===`
`},cg=function(i){return i.type===os&&i.text==="\f"},eC=function(i){return i.type===os&&i.text===" "},bn=function(i){return i.type===os},iC=function(i){return i.type===uu};class vg extends Ns{constructor(t,s,g){super(t,os),this.updateTextFlag=!1,this.style=new uh(this,g),this.setText(s)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0;else{var s=this.style.getTextMetrics(this.context,this.text);this.textWidth=s.width;var g,C;"actualBoundingBoxAscent"in s?(g=s.actualBoundingBoxAscent,C=s.actualBoundingBoxDescent):(g=0,C=0),this.textHeight=g+C,this.ascent=g,this.descent=C}return this.updateTextFlag=!1,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){var t=this.text;return t===`
`||t==="\f"?!1:super.willRender}renderContent(){var t=this.context,s=this.style;if(s.hasBackgroundColor){t.fillStyle=s.backgroundColor;var g=this.drawTLX,C=this.drawTRX-g,M=s.backgroundBottomY;M==null&&(M=this.drawBLY);var o=s.backgroundHeight;o==null&&(o=M-this.drawTLY);var T=M-o;t.fillRect(g,T,C,o)}var e=s.hasFill,d=s.hasStroke;!e&&!d||(s.syncFont(t).syncStyle(t),d&&(s.syncShadow(t),t.strokeText(this.text,0,0)),e&&(s.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var sC=function(i,t){t&&this.textStyle.modify(t);var s=this.poolManager.allocate(os);return s===null?s=new vg(this,i,this.textStyle):s.setParent(this).setActive().modifyStyle(this.textStyle).setText(i),s},nC=function(i,t){t&&this.textStyle.modify(t);for(var s=[],g=0,C=i.length;g<C;g++){var M=i.charAt(g),o=this.poolManager.allocate(os);o===null?o=new vg(this,M,this.textStyle):o.setParent(this).setActive().modifyStyle(this.textStyle).setText(M),s.push(o)}return s},Lr=function(i,t){var s=this.createCharChildren(i,t);return this.addChild(s),this},rC=function(i,t){return i===void 0&&(i=""),this.removeChildren(),Lr.call(this,i,t),this.dirty=!0,this},aC=function(i,t,s){var g=this.createCharChildren(t,s);return i=this.getCharChildIndex(i,!0),this.addChild(g,i),this},hC=function(i,t){t===void 0&&(t=1);for(var s=0;s<t;s++){var g=this.getCharChildIndex(i,!0);if(g===void 0)break;this.removeChild(this.children[g])}return this},oC=function(i){var t="";return this.forEachCharChild(function(s){t+=s.text},void 0,i),t};class lC extends Ns{constructor(t,s,g){super(t,lg),this.setTexture(s,g)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,s){return this.key=t,this.frame=s,this.frameObj=this.scene.sys.textures.getFrame(t,s),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,s){return s===void 0&&(s=!1),this.height=t,s&&(this.scaleX=this.scaleY),this}renderContent(){var t=this.context,s=this.frameObj,g=this.frameWidth,C=this.frameHeight;t.drawImage(s.source.image,s.cutX,s.cutY,g,C,0,0,g,C)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var uC=function(i,t,s){var g=this.poolManager.allocate(lg);return g===null?g=new lC(this,i,t):g.setParent(this).setActive().setTexture(i,t),g.modifyPorperties(s),g},pg=function(i,t,s){var g=this.createImageChild(i,t,s);return this.addChild(g),this};class dC extends Ns{constructor(t,s,g,C){super(t,ug),this.setRenderCallback(s),this.setDrawerSize(g,C)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,s){return t===!0?(this.toLocalPosition=!1,t=void 0,s=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),s===void 0&&(s=t),this.drawerWidth=t,this.drawerHeight=s,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var fC=function(i,t,s){var g=this.poolManager.allocate(ug);return g===null?g=new dC(this,i,t,s):g.setParent(this).setActive().setRenderCallback(i).setDrawerSize(t,s),g},cC=function(i,t,s){var g=this.createDrawerChild(i,t,s);return this.addChild(g),this};class vC extends Ns{constructor(t,s){super(t,dg),this.setSpaceWidth(s)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}}var pC=function(i){var t=this.poolManager.allocate(dg);return t===null?t=new vC(this,i):t.setParent(this).setActive().setSpaceWidth(i),t},gg=function(i){var t=this.createSpaceChild(i);return this.addChild(t),this};class gC extends lu{constructor(t,s,g,C,M){super(t,uu),this.setName(s).setParameter(C).setCallback(g,M)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,s){return this.callback=t,this.scope=s,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var mC=function(i,t,s,g){var C=this.poolManager.allocate(uu);return C===null?C=new gC(this,i,t,s,g):C.setParent(this).setActive().setName(i).setCallback(t,g).setParameter(s),C},ct=function(i,t,s,g){var C=this.createCommandChild(i,t,s,g);return this.addChild(C),this},xC=function(i){return i===void 0?i={}:typeof i=="object"&&(i=ge(i)),this.wrapConfig=i,this},yC=function(i,t,s,g){g===void 0&&(g={word:[],width:0}),g.word.length=0;for(var C=i.length,M=t,o=g.word,T=0;M<C;){var e=i[M];if(!e.renderable){o.push(e),M++;continue}var d=e.type===os?e.text:null;if(d!==null&&d!==" "&&d!==`
`&&d!=="\f")o.push(e),T+=e.outerWidth,M++;else{M===t&&(o.push(e),T+=e.outerWidth);break}if(s)break}return g.width=T,g},mg=function(i){for(var t=0,s=i.length;t<s;t++){var g=i[t];if(g.align!==void 0)return g.align}},xg=function(i,t,s){if(!(t===0&&s===0))for(var g=0,C=i.length;g<C;g++){var M=i[g];!M.renderable||(M.x+=t,M.y+=s)}},TC=function(i,t,s){var g=i.hAlign,C=i.vAlign,M,o,T=i.linesHeight;switch(C){case 1:case"center":o=(s-T)/2;break;case 2:case"bottom":o=s-T;break;default:o=0;break}for(var e=i.lines,d=0,x=e.length;d<x;d++){var u=e[d],l=u.width,h=u.children,n=mg(h);switch(n===void 0&&(n=g),n){case 1:case"center":M=(t-l)/2;break;case 2:case"right":M=t-l;break;default:M=0;break}xg(h,M,o)}},yf=function(){var i=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,s;return"actualBoundingBoxAscent"in i?(t=i.actualBoundingBoxAscent,s=i.actualBoundingBoxDescent):(t=0,s=0),oa.ascent=t,oa.descent=s,oa.height=t+s,oa},oa={};const we=Phaser.Utils.Objects.GetValue;var CC=function(i){var t=we(i,"start",0);es(this.wrapPadding,we(i,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,g=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=we(i,"lineHeight"),M=we(i,"ascent",C),o;if(C===void 0){var T=we(i,"useDefaultTextHeight",!1);if(o=we(i,"maxLines",0),this.fixedHeight>0&&!T){var X=this.fixedHeight-s;if(o>0)C=X/o;else{var e=yf.call(this);C=e.height,M=e.ascent,o=Math.floor((X-M)/C)}}else{var e=yf.call(this);C=e.height,M=e.ascent}}else if(this.fixedHeight>0){if(o=we(i,"maxLines"),o===void 0){var X=this.fixedHeight-s;o=Math.floor(X/C)}}else o=we(i,"maxLines",0);M===void 0&&(M=C);var d=o===0,x=we(i,"wrapWidth",void 0);x===void 0&&(this.fixedWidth>0?x=this.fixedWidth-g:x=1/0);for(var u=we(i,"letterSpacing",0),l=we(i,"hAlign",0),h=we(i,"vAlign",0),n=we(i,"charWrap",!1),r={callback:"runWordWrap",start:t,isLastPage:!1,padding:this.wrapPadding,ascent:M,lineHeight:C,maxLines:o,wrapWidth:x,letterSpacing:u,hAlign:l,vAlign:h,charWrap:n,children:[],lines:[],maxLineWidth:0,linesHeight:0},f=this.children,a=0,c=f.length;a<c;a++)f[a].setActive(!1);x+=u;for(var p=this.padding.left+this.wrapPadding.left,v=this.padding.top+this.wrapPadding.top+M,m=p,y=v,E=x,P=t,S=f.length,w=r.children,A=r.lines,R=[],O=0,F=0,L;P<S;){L=yC(f,P,n,L);var D=L.word,I=D.length,B=L.width+I*u;P+=I;var V=fg(D[0]),Y=cg(D[0]),W=V||Y;if(E<B||W){if(W){var $=D[0];$.setActive().setPosition(m,y),w.push($),R.push($)}m=p,y+=C,E=x,A.push({children:R,width:O}),F=Math.max(F,O),O=0,R=[];var N=Y||!d&&A.length===o;if(N)break;if(W)continue}E-=B,O+=B;for(var a=0,c=D.length;a<c;a++){var U=D[a];U.setActive(),w.push(U),R.push(U),U.renderable&&(U.setPosition(m,y),m+=U.outerWidth+u)}}R.length>0&&(A.push({children:R,width:O}),F=Math.max(F,O)),r.start+=w.length,r.isLastPage=r.start===S,r.maxLineWidth=F,r.linesHeight=A.length*C;var b=this.fixedWidth>0?this.fixedWidth:r.maxLineWidth+g,G=this.fixedHeight>0?this.fixedHeight:r.linesHeight+s,z=b-g,X=G-s;TC(r,z,X),this.setCanvasSize(b,G);for(var a=0,c=w.length;a<c;a++){var U=w[a];!U.renderable||(U.x0=U.x,U.y0=U.y)}return r};const SC=Phaser.Utils.Objects.Merge;var EC=function(i){return i===void 0&&(i={}),CC.call(this,SC(i,this.wrapConfig))},PC=function(i,t,s){var g=i.hAlign,C=i.vAlign,M,o,T=i.rtl,e=i.lines,d=i.lineWidth,x=i.linesWidth;switch(g){case 1:case"center":M=(t-x)/2;break;case 2:case"right":M=t-x;break;default:M=0;break}T&&(M+=d);for(var u=0,l=e.length;u<l;u++){var h=e[T?l-u-1:u],n=h.children,r=h.height,f=mg(n);switch(f===void 0&&(f=C),f){case 1:case"center":o=(s-r)/2;break;case 2:case"bottom":o=s-r;break;default:o=0;break}xg(n,M,o),M+=d}};const Ae=Phaser.Utils.Objects.GetValue;var MC=function(i){var t=Ae(i,"start",0);es(this.wrapPadding,Ae(i,"padding",0));var s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,g=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,C=Ae(i,"lineWidth",void 0),M;if(C===void 0)if(M=Ae(i,"maxLines",0),this.fixedWidth>0){var $=this.fixedWidth-g;C=$/M}else C=0;else if(this.fixedWidth>0){if(M=Ae(i,"maxLines",void 0),M===void 0){var $=this.fixedWidth-g;M=Math.floor($/C)+1}}else M=Ae(i,"maxLines",0);var o=M===0,T=Ae(i,"fixedChildHeight",void 0);if(T===void 0){var e=Ae(i,"charPerLine",void 0);if(e!==void 0){var N=this.fixedHeight-s;T=Math.floor(N/e)}}var d=Ae(i,"wrapHeight",void 0);d===void 0&&(this.fixedHeight>0?d=this.fixedHeight-s:d=1/0);for(var x=Ae(i,"letterSpacing",0),u=Ae(i,"rtl",!0),l=Ae(i,"hAlign",u?2:0),h=Ae(i,"vAlign",0),n={callback:"runVerticalWrap",start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:C,maxLines:M,fixedChildHeight:T,wrapHeight:d,letterSpacing:x,hAlign:l,vAlign:h,rtl:u,children:[],lines:[],maxLineHeight:0,linesWidth:0},r=this.children,f=0,a=r.length;f<a;f++)r[f].setActive(!1);d+=x;for(var c=this.padding.left+this.wrapPadding.left,p=this.padding.top+this.wrapPadding.top,v=c,m=p,y=d,E=t,P=r.length,S=n.children,w=n.lines,A=[],R=0,O=0;E<P;){var F=r[E];if(E++,!F.renderable){F.setActive(),S.push(F),A.push(F);continue}var L=(T!==void 0?T:F.height)+x,D=fg(F),I=cg(F),B=D||I;if(y<L||B){D&&(F.setActive().setPosition(v,m).setOrigin(.5),S.push(F),A.push(F)),v=c,m=p,y=d,w.push({children:A,height:R}),O=Math.max(O,R),R=0,A=[];var V=I||!o&&w.length===M;if(V)break;if(B)continue}y-=L,R+=L,F.setActive().setPosition(v,m).setOrigin(.5),S.push(F),A.push(F),m+=L}A.length>0&&(w.push({children:A,height:R}),O=Math.max(O,R)),n.start+=S.length,n.isLastPage=n.start===P,n.maxLineHeight=O,n.linesWidth=w.length*C;var Y=this.fixedWidth>0?this.fixedWidth:n.linesWidth+g,W=this.fixedHeight>0?this.fixedHeight:n.maxLineHeight+s,$=Y-g,N=W-s;PC(n,$,N),this.setCanvasSize(Y,W);for(var f=0,a=S.length;f<a;f++){var F=S[f];!F.renderable||(F.x0=F.x,F.y0=F.y)}return n};const wC=Phaser.Utils.Objects.Merge;var AC=function(i){return i===void 0&&(i={}),MC.call(this,wC(i,this.wrapConfig))};const Tf=Phaser.Utils.Objects.GetValue;var RC=function(i){var t=Tf(this.wrapConfig,"callback");return t||(t=Tf(i,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,i)};const OC={setVAlign(i){return this.wrapConfig.vAlign=i,this},setHAlign(i){return this.wrapConfig.hAlign=i,this}};var LC=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var i,t=0,s=this.children.length;t<s;t++)i=this.children[t],i.active&&i.render();this.innerBounds.active&&this.innerBounds.render()},FC=function(i,t,s){s===void 0&&(s=!0);for(var g=this.children,C=0,M=0,o=g.length;M<o;M++){var T=g[M];if(!(s&&!T.active)){var e;if(t?e=i.call(this,T,C,g):e=i(T,C,g),C++,e)break}}return this},bC=function(i,t,s){s===void 0&&(s=!0);for(var g=this.children,C=0,M=0,o=g.length;M<o;M++){var T=g[M];if(!(s&&!T.active)&&T.renderable&&!T.removed){var e;if(t?e=i.call(this,T,C,g):e=i(T,C,g),C++,e)break}}return this},DC=function(i,t,s){s===void 0&&(s=!0);for(var g=this.children,C=0,M=0,o=g.length;M<o;M++){var T=g[M];if(!(s&&!T.active)&&bn(T)&&!T.removed){var e;if(t?e=i.call(this,T,C,g):e=i(T,C,g),C++,e)break}}return this},IC=function(){return this.children};const BC=Phaser.Utils.Array.GetAll;var GC=function(){return BC(this.children,"active",!0)},NC=function(i,t){return t===void 0&&(t=[]),this.forEachCharChild(function(s){t.push(s)},void 0,i),t},zC=function(){return this.lastAppendedChildren},VC=function(i,t,s,g){typeof t!="number"&&(g=t,t=0,s=0);var C=i.drawCenterX+t,M=i.drawCenterY+s;return rg(i,C,M,g)};const UC=Phaser.Math.Distance.BetweenPointsSquared;var YC=function(i,t){var s={x:i,y:t},g=1/0,C=null;return this.forEachRenderableChild(function(M){var o=UC(s,VC(M,!0));g>o&&(g=o,C=M)}),C},XC=function(i,t,s,g){return typeof i=="number"&&(i=this.getCharChild(i,!0)),ag(this,i,t,s,g)},WC=function(){for(var i=this.children,t=0,s=0,g=0,C=i.length;g<C;g++){var M=i[g];if(!(!M.renderable||!M.active||!M.visible)){var o=M.x0!==void 0?M.x0:M.x,T=M.y0!==void 0?M.y0:M.y;t=Math.max(t,o),s=Math.max(s,T)}}var e=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,d=s+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==e||this.height!==d)&&(this.dirty=!0,this.setCanvasSize(e,d)),this},kC=function(i,t){t===void 0&&(t=!0);for(var s=this.children,g=0,C=s.length;g<C;g++){var M=s[g];if(!(t&&!M.active)&&bn(M)&&!M.removed){if(i===0)return g;i--}}},HC=function(i,t){t===void 0&&(t=!0);for(var s=this.children,g=0,C=s.length;g<C;g++){var M=s[g];if(!(t&&!M.active)&&bn(M)&&!M.removed){if(i===0)return M;i--}}},$C=function(i,t){if(typeof i!="number"&&(i=this.children.indexOf(i),i<0))return null;t===void 0&&(t=!0);var s=this.children;i>=s.length&&(i=s.length);for(var g=0,C=0;C<i;C++){var M=s[C];t&&!M.active||bn(M)&&!M.removed&&g++}return g},KC=function(i){return i===void 0&&(i=!0),this.childrenInteractiveEnable!==i&&(this.lastOverChild=null),this.childrenInteractiveEnable=i,this},du=function(g,t,s){for(var g=g,C=0,M=g.length;C<M;C++){var o=g[C];if(!(!o.active||!o.renderable)&&o.contains(t,s))return o}return null},ZC=function(){return this.on("pointerdown",JC,this).on("pointerdown",jC,this).on("pointermove",go,this).on("pointerover",go,this).on("pointerout",function(i,t){go.call(this,i,null,null,t)},this),this},JC=function(i,t,s,g){if(!!this.childrenInteractiveEnable){var C=du(this.children,t,s);!C||this.emit("child.pointerdown",C,i,t,s,g)}},jC=function(i,t,s,g){if(!!this.childrenInteractiveEnable){var C=du(this.children,t,s);!C||this.emit("child.pointerup",C,i,t,s,g)}},go=function(i,t,s,g){if(!!this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,i,t,s,g),this.lastOverChild=null);return}var C=du(this.children,t,s);C!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,i,t,s,g),C!==null&&this.emit("child.pointerover",C,i,t,s,g),this.lastOverChild=C)}};const QC=Phaser.GameObjects.GameObject;var qC=function(i,t,s){var g=!!this.input;return QC.prototype.setInteractive.call(this,i,t,s),g||ZC.call(this),this};const _C=Phaser.Utils.Array.BringToTop,tS=Phaser.Utils.Array.SendToBack,eS=Phaser.Utils.Array.MoveUp,iS=Phaser.Utils.Array.MoveDown,sS=Phaser.Utils.Array.MoveAbove,nS=Phaser.Utils.Array.MoveBelow,rS={moveChildToFist(i){return tS(this.children,i),this},moveChildToLast(i){return _C(this.children,i),this},movechildUp(i){return eS(this.children,i),this},movechildDown(i){return iS(this.children,i),this},movechildAbove(i,t){return sS(this.children,i,t),this},movechildBelow(i,t){return nS(this.children,i,t),this}},aS={setBackgroundColor(i,t,s){return this.background.setColor(i,t,s),this},setBackgroundStroke(i,t){return this.background.setStroke(i,t),this},setBackgroundCornerRadius(i,t){return this.background.setCornerRadius(i,t),this}},hS={setInnerBoundsColor(i,t,s){return this.innerBounds.setColor(i,t,s),this},setInnerBoundsStroke(i,t){return this.innerBounds.setStroke(i,t),this}};var yg={setFixedSize:XT,setPadding:WT,getPadding:kT,modifyTextStyle:HT,modifyDefaultTextStyle:$T,resetTextStyle:KT,setTestString:ZT,removeChild:jT,removeChildren:QT,popChild:_T,clearContent:tC,addChild:og,createCharChild:sC,createCharChildren:nC,setText:rC,appendText:Lr,insertText:aC,removeText:hC,getText:oC,createImageChild:uC,appendImage:pg,createDrawerChild:fC,appendDrawer:cC,createSpaceChild:pC,appendSpace:gg,createCommandChild:mC,appendCommand:ct,setWrapConfig:xC,runWordWrap:EC,runVerticalWrap:AC,runWrap:RC,renderContent:LC,forEachChild:FC,forEachRenderableChild:bC,forEachCharChild:DC,getChildren:IC,getActiveChildren:GC,getCharChildren:NC,getLastAppendedChildren:zC,getNearestChild:YC,getCharWorldPosition:XC,setToMinSize:WC,getCharChildIndex:kC,getCharChild:HC,getCharIndex:$C,setChildrenInteractiveEnable:KC,setInteractive:qC};Object.assign(yg,rS,aS,hS,OC);const oS=Phaser.Utils.Objects.GetFastValue;var lS={};class uS{constructor(t){this.pools=oS(t,"pools",lS)}free(t){if(!this.pools)return this;var s=t.type;return this.pools.hasOwnProperty(s)||(this.pools[s]=new pi),this.pools[s].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var s=0,g=t.length;s<g;s++)this.free(t[s]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const Cf=Phaser.Utils.Objects.IsPlainObject,ye=Phaser.Utils.Objects.GetValue;class Nn extends hs{constructor(t,s,g,C,M,o){Cf(s)?(o=s,s=ye(o,"x",0),g=ye(o,"y",0),C=ye(o,"width",0),M=ye(o,"height",0)):Cf(C)&&(o=C,C=ye(o,"width",0),M=ye(o,"height",0));var T=C===0?1:C,e=M===0?1:M;super(t,s,g,T,e),this.type="rexDynamicText",this.autoRound=!0,this.padding=es(),this.wrapPadding=es();var d=ye(o,"style",void 0);this.defaultTextStyle=new uh(null,d),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(ye(o,"testString","|M\xC9qgy")),this.background=new UT(this,ye(o,"background",void 0)),this.innerBounds=new YT(this,ye(o,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new uS(o),this.setFixedSize(C,M),this.setPadding(ye(o,"padding",0)),this.setWrapConfig(ye(o,"wrap",void 0)),this.setChildrenInteractiveEnable(ye(o,"childrenInteractive",!1));var x=ye(o,"text",void 0);x&&this.setText(x)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,s){return this.setFixedSize(t,s),this}}Object.assign(Nn.prototype,yg);st.register("dynamicText",function(i,t,s,g,C){var M=new Nn(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.DynamicText",Nn);var dS=function(i){return Ds(i)?i.sys.sound:i.sound};const zn={setEventEmitter(i,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=i===!0||i===void 0,this._eventEmitter=this._privateEE?new t:i,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(i){return this._eventEmitter&&i&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var Tg=function(i){return i==null||typeof i!="object"?null:Ds(i)?i:i.scene&&Ds(i.scene)?i.scene:i.parent&&i.parent.scene&&Ds(i.parent.scene)?i.parent.scene:null};const fS=Phaser.Utils.Objects.GetValue;class ee{constructor(t,s){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(fS(s,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,s){this.destroy(s)}setParent(t){return this.parent=t,this.scene=Tg(t),this.game=Ln(t),this}}Object.assign(ee.prototype,zn);const cS=Phaser.Utils.Objects.GetValue;class dh extends ee{constructor(t,s){super(t,s),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(cS(s,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=vS[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const vS={no:0,lazy:1,always:2},pS=Phaser.Utils.Objects.GetValue;class gS extends dh{constructor(t,s){super(t,s);var g=this.scene?"update":"step";this.tickEventName=pS(s,"tickEventName",g),this.isSceneTicker=!mS(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var mS=function(i){return i==="step"||i==="poststep"};const Si=Phaser.Utils.Objects.GetValue,Sf=Phaser.Math.Clamp;class Cg{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Si(t,"state",Kn),this.timeScale=Si(t,"timeScale",1),this.delay=Si(t,"delay",0),this.repeat=Si(t,"repeat",0),this.repeatCounter=Si(t,"repeatCounter",0),this.repeatDelay=Si(t,"repeatDelay",0),this.duration=Si(t,"duration",0),this.nowTime=Si(t,"nowTime",0),this.justRestart=Si(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?js:Zn,this.repeatCounter=0,this}stop(){return this.state=Kn,this}update(t,s){this.state===Kn||this.state===la||s===0||this.timeScale===0||(this.nowTime+=s*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=Ef)):(this.nowTime=this.duration,this.state=la):this.nowTime>=0&&(this.state=js))}get t(){var t;switch(this.state){case Kn:case Zn:case Ef:t=0;break;case js:t=this.nowTime/this.duration;break;case la:t=1;break}return Sf(t,0,1)}set t(t){t=Sf(t,-1,1),t<0?(this.state=Zn,this.nowTime=-this.delay*t):(this.state=js,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Kn}get isDelay(){return this.state===Zn}get isCountDown(){return this.state===js}get isRunning(){return this.state===Zn||this.state===js}get isDone(){return this.state===la}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const Kn=0,Zn=1,js=2,Ef=3,la=-1;class xS extends gS{constructor(t,s){super(t,s),this.timer=new Cg}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Jn=Phaser.Utils.Objects.GetValue,Pf=Phaser.Utils.Objects.GetAdvancedValue,yS=Phaser.Tweens.Builders.GetEaseFunction;class zs extends xS{resetFromJSON(t){return this.timer.resetFromJSON(Jn(t,"timer")),this.setEnable(Jn(t,"enable",!0)),this.setTarget(Jn(t,"target",this.parent)),this.setDelay(Pf(t,"delay",0)),this.setDuration(Pf(t,"duration",1e3)),this.setEase(Jn(t,"ease","Linear")),this.setRepeat(Jn(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=yS(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,s){if(!this.isRunning||!this.enable||!this.parent.active)return this;var g=this.target,C=this.timer;return C.update(t,s),C.isDelay||this.updateGameObject(g,C),this.emit("update",g,this),C.isDone&&this.complete(),this}updateGameObject(t,s){}}const TS=Phaser.Sound.BaseSound;var fu=function(i){return i instanceof TS};const Mf=Phaser.Utils.Objects.GetValue,wf=Phaser.Utils.Objects.GetAdvancedValue,CS=Phaser.Math.Linear;class Sg extends zs{constructor(t,s,g){fu(t)&&(g=s,s=t,t=void 0),s.active=!0,s.scene=t,s.game=s.manager.game,super(s,g),this.volume={},this.resetFromJSON(g)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Mf(t,"mode",0)),this.setEnable(Mf(t,"enable",!0)),this.setVolumeRange(wf(t,"volume.start",this.parent.volume),wf(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=SS[t]),this.mode=t,this}setVolumeRange(t,s){return this.volume.start=t,this.volume.end=s,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,s){t.volume=CS(this.volume.start,this.volume.end,s.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const SS={stop:1,destroy:2};var fh=function(i,t,s,g,C){fu(i)&&(C=g,g=s,s=t,t=i,i=void 0),g===void 0&&(g=1),C===void 0&&(C=0);var M={mode:0,volume:{start:C,end:g},duration:s};typeof t=="string"&&(t=i.sys.sound.add(t));var o;return t.hasOwnProperty("_fade")?(o=t._fade,o.stop().resetFromJSON(M)):(o=new Sg(i,t,M),t._fade=o),o.start(),t.isPlaying||t.setVolume(C).play(),t},Dn=function(i,t,s,g){fu(i)&&(g=s,s=t,t=i,i=void 0),g===void 0&&(g=!0);var C={mode:g?2:1,volume:{start:t.volume,end:0},duration:s},M;return t.hasOwnProperty("_fade")?(M=t._fade,M.stop().resetFromJSON(C)):(M=new Sg(i,t,C),t._fade=M),M.start(),t.isPlaying||t.play(),t};const ES={setBackgroundMusicLoopValue(i){return this.backgroundMusicLoopValue=i,this},setBackgroundMusicFadeTime(i){return this.backgroundMusicFadeTime=i,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(i){return this.backgroundMusic=i,i&&(i.setLoop(this.backgroundMusicLoopValue),i.once("complete",function(){this.backgroundMusic===i&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===i&&(this.backgroundMusic=void 0)},this),i.isPlaying||i.play()),this},playBackgroundMusic(i){return this.backgroundMusic&&this.backgroundMusic.key===i?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.sound.add(i)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(i){return this.backgroundMusic&&fh(this.backgroundMusic,i,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(i,t){return this.backgroundMusic&&Dn(this.backgroundMusic,i,t),this},crossFadeBackgroundMusic(i,t){var s=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(i).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=s,this},setBackgroundMusicVolume(i){return this.backgroundMusicVolume=i,this}},PS={setBackgroundMusic2LoopValue(i){return this.backgroundMusic2LoopValue=i,this},setBackgroundMusic2FadeTime(i){return this.backgroundMusic2FadeTime=i,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(i){return this.backgroundMusic2=i,i&&(i.setLoop(this.backgroundMusic2LoopValue),i.once("complete",function(){this.backgroundMusic2===i&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===i&&(this.backgroundMusic2=void 0)},this),i.isPlaying||i.play()),this},playBackgroundMusic2(i){return this.backgroundMusic2&&this.backgroundMusic2.key===i?this:(this.stopBackgroundMusic2(),this.setCurrentBackgroundMusic2(this.sound.add(i)),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this)},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(i){return this.backgroundMusic2&&fh(this.backgroundMusic2,i,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(i,t){return this.backgroundMusic2&&Dn(this.backgroundMusic2,i,t),this},crossFadeBackgroundMusic2(i,t){var s=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(i).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=s,this},setBackgroundMusic2Volume(i){return this.backgroundMusic2Volume=i,this}},Af=Phaser.Utils.Array.Remove,MS={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(i){var t=this.sound.add(i);return t.setVolume(this.soundEffectsVolume),this.soundEffects.push(t),t.once("complete",function(){t.destroy(),this.sound&&Af(this.soundEffects,t)},this).once("destroy",function(){!this.sound||Af(this.soundEffects,t)},this).play(),this},fadeInSoundEffect(i){var t=this.getLastSoundEffect();return t&&fh(t,i,this.soundEffectsVolume,0),this},fadeOutSoundEffect(i,t){var s=this.getLastSoundEffect();return s&&Dn(s,i,t),this},fadeOutAllSoundEffects(i,t){for(var s=this.soundEffects.length-1;s>=0;s--)Dn(this.soundEffects[s],i,t);return this},setSoundEffectVolume(i,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect();s&&s.setVolume(i)}else this.soundEffectsVolume=i;return this}},Rf=Phaser.Utils.Array.Remove,wS={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(i){var t=this.sound.add(i);return t.setVolume(this.soundEffects2Volume),this.soundEffects2.push(t),t.once("complete",function(){t.destroy(),this.sound&&Rf(this.soundEffects2,t)},this).once("destroy",function(){!this.sound||Rf(this.soundEffects2,t)},this).play(),this},fadeInSoundEffect2(i){var t=this.getLastSoundEffect2();return t&&fh(t,i,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(i,t){var s=this.getLastSoundEffect2();return s&&Dn(s,i,t),this},fadeOutAllSoundEffects2(i,t){for(var s=this.soundEffects2.length-1;s>=0;s--)Dn(this.soundEffects2[s],i,t);return this},setSoundEffect2Volume(i,t){if(t===void 0&&(t=!1),t){var s=this.getLastSoundEffect2();s&&s.setVolume(i)}else this.soundEffects2Volume=i;return this}};var Eg={};Object.assign(Eg,ES,PS,MS,wS);const si=Phaser.Utils.Objects.GetValue;class Pg{constructor(t,s){this.sound=dS(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=si(s,"bgm.volume",1),this.setBackgroundMusicLoopValue(si(s,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(si(s,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=si(s,"bgm2.volume",1),this.setBackgroundMusic2LoopValue(si(s,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(si(s,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=si(s,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=si(s,"soundEffect2.volume",1);var g=si(s,"bgm.initial",void 0);g&&this.setCurrentBackgroundMusic(g);var C=si(s,"bgm2.initial",void 0);C&&this.setCurrentBackgroundMusic2(C)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var s=this.soundEffects,g=0,C=s.length;g<C;g++)s[g].setVolume(t)}}Object.assign(Pg.prototype,Eg);const mo=Phaser.Utils.Objects.GetValue;class AS extends dh{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.isRunning=mo(t,"isRunning",!1),this.timeScale=mo(t,"timeScale",1),this.now=mo(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class Mg extends AS{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,s){return!this.isRunning||this.timeScale===0?this:(this.tick(s),this)}}var RS=function(i,t){return t===void 0&&(t=.5),i<=t?i=i/t:i=1-(i-t)/(1-t),i};const Of=Phaser.Math.Clamp;class OS{constructor(t,s){this.setTimeline(t).reset(s)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,s,g,C){return this.target=t,this.onStart=s,this.onProgress=g,this.onComplete=C,this}setDuration(t,s){return s===void 0&&(s=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=s,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=Of(t,0,1),this.yoyo&&(t=RS(t)),t}setProgress(t){t=Of(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,s){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=s,this.t=this.getProgress(),this.runCallback(this.onProgress);var g=this.remainder<=0;return g&&this.runCallback(this.onComplete),g}}class LS extends pi{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var s=0,g=t.length;s<g;s++)this.free(t[s]);return this}}const FS=Phaser.Utils.Objects.GetValue,bS=new LS;class DS extends Mg{constructor(t,s){super(t,s),this.addedTimers=[],this.timers=[],this.timerPool=FS(s,"pool",bS)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var s=this.timerPool.allocate();return s?s.setTimeline(this).reset(t):s=new OS(this,t),this.addedTimers.push(s),s.runCallback(s.onStart),this.isRunning||this.start(),s}delayCall(t,s,g,C){var M=this.addTimer({duration:t,onComplete:function(o,T,e){g===void 0&&(g=[]),g.push(e),s.apply(C,g)}});return M}getTimers(t){for(var s=[],g=[this.addedTimers,this.timers],C=0,M=g.length;C<M;C++)for(var o=g[C],T=0,e=o.length;T<e;T++){var d=o[T];d.name===t&&s.push(d)}return s}update(t,s){if(super.update(t,s),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var g=[],C=0,M=this.timers.length;C<M;C++){var o=this.timers[C],T=o.update(this.now,this.delta);T?this.timerPool.free(o):g.push(o)}this.timers=g,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}const IS=Phaser.Utils.Objects.GetValue;var BS=function(i,t){var s=IS(t,"sounds");return s!==!1&&(this.soundManager=new Pg(i,s)),this.gameObjectManagers={},this.timeline=new DS(this),this.managersScene=i,this},GS=function(i){this.timeline.timeScale=i;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(i);return this},NS=function(){return this.timeline.timeScale},zS=function(i){this.soundManager&&this.soundManager.destroy(),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(i),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0};const VS={hasProperty(i){var t=this.gameObject;if(t.hasOwnProperty(i))return!0;var s=t[i];return s!==void 0},getProperty(i){return this.gameObject[i]},setProperty(i,t){return this.gameObject[i]=t,this},easeProperty(i,t,s,g,C,M,o){var T=this.tweens,e=T[i];e&&e.remove();var d=this.gameObject,x={targets:d,duration:s,ease:g,repeat:C,yoyo:M,onComplete:function(){T[i].remove(),T[i]=null,o&&o(d,i)},onCompleteScope:this};return x[i]=t,e=this.scene.tweens.add(x),e.timeScale=this.timeScale,T[i]=e,this}},US={hasMethod(i){return typeof this.gameObject[i]=="function"},call(i,...t){if(!this.hasMethod(i))return this;var s=this.gameObject;return s[i].apply(s,t),this}},YS={hasData(i){var t=this.gameObject;return t.data?t.data.has(i):!1},getData(i){return this.gameObject.getData(i)},setData(i,t){return this.gameObject.setData(i,t),this}};class cu{constructor(t,s,g){this.GOManager=t,this.tweens={},this.setGO(s,g)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,s;for(var g in t)s=t[g],s&&s.remove(),t[g]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,s){return t.setName(s),this.gameObject=t,this.name=s,this.freeTweens(),this}setTimeScale(t){var s=this.tweens;for(var g in s){var C=s[g];C&&(C.timeScale=t)}return this}}Object.assign(cu.prototype,VS,US,YS);var vu=function(i){for(var t in i)return!1;return!0};const XS={tint:0,alpha:1},WS={setGOFadeMode(i){return typeof i=="string"&&(i=XS[i]),this.fadeMode=i,this},setGOFadeTime(i){return this.fadeTime=i,this},hasTintFadeEffect(i){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&i.setTint!==void 0},hasAlphaFadeEffect(i){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&i.setAlpha!==void 0},fadeBob(i,t,s,g){var C=i.gameObject;return this.hasTintFadeEffect(C)?(t!==void 0&&i.setProperty("tintGray",255*t),i.easeProperty("tintGray",Math.floor(255*s),this.fadeTime,"Linear",0,!1,g)):this.hasAlphaFadeEffect(C)?(t!==void 0&&i.setProperty("alpha",t),i.easeProperty("alpha",s,this.fadeTime,"Linear",0,!1,g)):g&&g(C),this}};var gr=function(i){return i>>16&255},mr=function(i){return i>>8&255},xr=function(i){return i&255};const kS=~(255<<16)&16777215,HS=~(255<<8)&16777215,$S=16776960;var KS=function(i,t){return(t&255)<<16|i&kS},ZS=function(i,t){return(t&255)<<8|i&HS},JS=function(i,t){return t&255|i&$S},jS=function(i,t,s,g){return(t&255)<<16|(s&255)<<8|g&255},QS=function(i,t){if(i.hasOwnProperty("tintR"))return i;t===void 0&&(t=16777215);var s=gr(t),g=mr(t),C=xr(t);return Object.defineProperty(i,"tint",{get:function(){return t},set:function(M){M=Math.floor(M)&16777215,i.setTint&&i.setTint(M),t!==M&&(t=M,s=gr(t),g=mr(t),C=xr(t))}}),Object.defineProperty(i,"tintR",{get:function(){return s},set:function(M){M=Math.floor(M)&255,s!==M&&(s=M,i.tint=KS(t,M))}}),Object.defineProperty(i,"tintG",{get:function(){return g},set:function(M){M=Math.floor(M)&255,g!==M&&(g=M,i.tint=ZS(t,M))}}),Object.defineProperty(i,"tintB",{get:function(){return C},set:function(M){M=Math.floor(M)&255,C!==M&&(C=M,i.tint=JS(t,M))}}),Object.defineProperty(i,"tintGray",{get:function(){return Math.floor((s+g+C)/3)},set:function(M){M=Math.floor(M)&255,(s!==M||g!==M||C!==M)&&(s=M,g=M,C=M,i.tint=jS(t,M,M,M))}}),i.tint=t,i};const qS=Phaser.Events.EventEmitter;var _S=function(i){if(i.events)return i;var t=new qS,s=i.x;Object.defineProperty(i,"x",{get:function(){return s},set:function(o){s!==o&&(s=o,t.emit("update",i))}});var g=i.y;Object.defineProperty(i,"y",{get:function(){return g},set:function(o){g!==o&&(g=o,t.emit("update",i))}});var C=i.width;Object.defineProperty(i,"width",{get:function(){return C},set:function(o){C!==o&&(C=o,t.emit("update",i))}});var M=i.height;return Object.defineProperty(i,"height",{get:function(){return M},set:function(o){M!==o&&(M=o,t.emit("update",i))}}),i.events=t,i},t2=function(i,t,s,g,C,M){return M===void 0?M={}:M===!0&&(M=e2),typeof s!="number"&&(s=0,g=0),M.x=C.x+C.width*i+s,M.y=C.y+C.height*t+g,M},e2={},i2=function(i,t,s,g,C,M,o){if(i.hasOwnProperty("vp"))return i;typeof s=="function"&&(o=s,s=void 0),typeof C=="function"&&(o=C,C=void 0),s===void 0&&(s=.5),g===void 0&&(g=.5),C===void 0&&(C=0),M===void 0&&(M=0),o===void 0&&(o=t2),_S(t);var T=t.events;i.vp=t;var e=function(){o(s,g,C,M,t,i)};T.on("update",e),i.once("destroy",function(){T.off("update",e),i.vp=void 0}),Object.defineProperty(i,"vpx",{get:function(){return s},set:function(d){s!==d&&(s=d,e())}}),Object.defineProperty(i,"vpy",{get:function(){return g},set:function(d){g!==d&&(g=d,e())}}),Object.defineProperty(i,"vpxOffset",{get:function(){return C},set:function(d){C!==d&&(C=d,e())}}),Object.defineProperty(i,"vpyOffset",{get:function(){return M},set:function(d){M!==d&&(M=d,e())}}),e()};const s2=Phaser.Utils.Array.Remove,n2={has(i){return this.bobs.hasOwnProperty(i)},exists(i){return this.bobs.hasOwnProperty(i)},get(i){return this.bobs[i]},getGO(i){var t=this.get(i);return t?t.gameObject:null},addGO(i,t){this.remove(i,!0),this.hasTintFadeEffect(t)&&QS(t),this.viewportCoordinateEnable&&i2(t,this.viewport),t.once("destroy",function(){s2(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var s=new this.BobClass(this,t,i);return this.bobs[i]=s,this},add(i,...t){var s=this.createGameObjectCallback,g=this.createGameObjectScope,C=s.call(g,this.scene,...t);this.addGO(i,C);var M=this.get(i);return this.fadeBob(M,0,1),this},forEachGO(i,t){for(var s in this.bobs){var g=this.bobs[s].gameObject,C;if(t?C=i.call(t,g,s,this):C=i(g,s,this),C)break}return this}},r2={remove(i,t){if(!this.has(i))return this;var s=this.get(i);return delete this.bobs[i],this.removedGOs.push(s.gameObject),t?s.destroy():this.fadeBob(s,void 0,0,function(){s.destroy()}),this},removeAll(){var i=this.bobs;for(var t in i)this.remove(t);return this},clear(i){i===void 0&&(i=!0);var t=this.bobs;for(var s in t)i&&t[s].destroy(),delete t[s];return this.removedGOs.length=0,this}},a2={hasProperty(i,t){return this.has(i)?this.get(i).hasProperty(t):!1},getProperty(i,t){if(!!this.has(i))return this.get(i).getProperty(t)},isNumberProperty(i,t){var s=this.getProperty(i,t);return typeof s=="number"},setProperty(i,t,s){return this.has(i)?(this.symbols&&typeof s=="string"&&this.isNumberProperty(i,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),this.get(i).setProperty(t,s),this):this},easeProperty(i,t,s,g,C,M,o,T){return this.has(i)?(g===void 0&&(g=1e3),C===void 0&&(C="Linear"),M===void 0&&(M=0),o===void 0&&(o=!1),this.symbols&&typeof s=="string"&&this.isNumberProperty(i,t)&&(s in this.symbols?s=this.symbols[s]:console.warn(`Can't find symbol ${s}`)),this.get(i).easeProperty(t,s,g,C,M,o,T),this):this},hasTweenTask(i,t){if(!this.has(i))return!1;var s=this.get(i).tweens;return s.hasOwnProperty(t)},getTweenTask(i,t){if(!this.has(i))return null;var s=this.get(i).tweens,g=s[t];return g||null}},h2={hasMethod(i,t){return this.has(i)?this.get(i).hasMethod(t):!1},call(i,t,...s){return this.has(i)?(this.get(i).call(t,...s),this):this}},o2={hasData(i,t){return this.has(i)?this.get(i).hasData(t):!1},getData(i,t){if(!!this.has(i))return this.get(i).getData(t)},setData(i,t,s){return this.has(i)?(this.get(i).setData(t,s),this):this}};var At=function(i){return i.displayWidth!==void 0?i.displayWidth:i.width},Mt=function(i){return i.displayHeight!==void 0?i.displayHeight:i.height};const Lf=Phaser.Geom.Rectangle,ss=Phaser.Math.Vector2,l2=Phaser.Math.RotateAround;var pu=function(i,t){if(t===void 0?t=new Lf:t===!0&&(xo===void 0&&(xo=new Lf),t=xo),i.getBounds)return i.getBounds(t);var s,g,C,M,o,T,e,d;if(i.parentContainer){var x=i.parentContainer.getBoundsTransformMatrix();Il(i,t),x.transformPoint(t.x,t.y,t),s=t.x,g=t.y,Bl(i,t),x.transformPoint(t.x,t.y,t),C=t.x,M=t.y,Gl(i,t),x.transformPoint(t.x,t.y,t),o=t.x,T=t.y,Nl(i,t),x.transformPoint(t.x,t.y,t),e=t.x,d=t.y}else Il(i,t),s=t.x,g=t.y,Bl(i,t),C=t.x,M=t.y,Gl(i,t),o=t.x,T=t.y,Nl(i,t),e=t.x,d=t.y;return t.x=Math.min(s,C,o,e),t.y=Math.min(g,M,T,d),t.width=Math.max(s,C,o,e)-t.x,t.height=Math.max(g,M,T,d)-t.y,t},xo=void 0,Il=function(i,t,s){return t===void 0?t=new ss:t===!0&&(Ye===void 0&&(Ye=new ss),t=Ye),i.getTopLeft?i.getTopLeft(t):(t.x=i.x-At(i)*i.originX,t.y=i.y-Mt(i)*i.originY,ch(i,t,s))},Bl=function(i,t,s){return t===void 0?t=new ss:t===!0&&(Ye===void 0&&(Ye=new ss),t=Ye),i.getTopRight?i.getTopRight(t):(t.x=i.x-At(i)*i.originX+At(i),t.y=i.y-Mt(i)*i.originY,ch(i,t,s))},Gl=function(i,t,s){return t===void 0?t=new ss:t===!0&&(Ye===void 0&&(Ye=new ss),t=Ye),i.getBottomLeft?i.getBottomLeft(t):(t.x=i.x-At(i)*i.originX,t.y=i.y-Mt(i)*i.originY+Mt(i),ch(i,t,s))},Nl=function(i,t,s){return t===void 0?t=new ss:t===!0&&(Ye===void 0&&(Ye=new ss),t=Ye),i.getBottomRight?i.getBottomRight(t):(t.x=i.x-At(i)*i.originX+At(i),t.y=i.y-Mt(i)*i.originY+Mt(i),ch(i,t,s))},Ye=void 0,ch=function(i,t,s){if(s===void 0&&(s=!1),i.rotation!==0&&l2(t,i.x,i.y,i.rotation),s&&i.parentContainer){var g=i.parentContainer.getBoundsTransformMatrix();g.transformPoint(t.x,t.y,t)}return t};const jn=Phaser.Utils.Objects.GetValue;var wg=function(i,t,s){var g,C,M,o,T;if(typeof s=="number"?g=s:(g=jn(s,"color"),C=jn(s,"lineWidth"),M=jn(s,"fillColor"),o=jn(s,"fillAlpha",1),T=jn(s,"padding",0)),Array.isArray(i))for(var e=0,d=i.length;e<d;e++)Ff(i[e],t,g,C,M,o,T);else Ff(i,t,g,C,M,o,T)},Ff=function(i,t,s,g,C,M,o){var T=i.getBounds||i.width!==void 0&&i.height!==void 0;if(!!T){s===void 0&&(s=16777215),g===void 0&&(g=1),C===void 0&&(C=null),M===void 0&&(M=1),o===void 0&&(o=0);var e=Il(i,Qs[0]);e.x-=o,e.y-=o;var d=Bl(i,Qs[1]);d.x+=o,d.y-=o;var x=Nl(i,Qs[2]);x.x+=o,x.y+=o;var u=Gl(i,Qs[3]);u.x-=o,u.y+=o,C!==null&&t.fillStyle(C,M).fillPoints(Qs,!0,!0),s!==null&&t.lineStyle(g,s).strokePoints(Qs,!0,!0)}},Qs=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],u2=function(i,t){return this.forEachGO(function(s){s.drawBounds?s.drawBounds(i,t):wg(s,i,t)}),this},Ag={drawGameObjectsBounds:u2};Object.assign(Ag,WS,n2,r2,a2,h2,o2);const d2=Phaser.Cameras.Scene2D.BaseCamera;var f2=function(i){return i instanceof d2};const Rg=Phaser.Geom.Rectangle;var Vn=function(i,t,s){return f2(t)||(s=t,t=void 0),s===void 0?s=new Rg:s===!0&&(s=c2),t?i.scale.getViewPort(t,s):i.scale.getViewPort(s)},c2=new Rg;const $e=Phaser.Utils.Objects.GetValue;class gu{constructor(t,s){this.scene=t,this.BobClass=$e(s,"BobClass",cu),this.setCreateGameObjectCallback($e(s,"createGameObject"),$e(s,"createGameObjectScope")),this.setEventEmitter($e(s,"eventEmitter",void 0));var g=$e(s,"fade",500);typeof g=="number"?(this.setGOFadeMode(),this.setGOFadeTime(g)):(this.setGOFadeMode($e(g,"mode")),this.setGOFadeTime($e(g,"time",500)));var C=$e(s,"viewportCoordinate",!1);C!==!1?(this.setViewportCoordinateEnable($e(s,"enable",!0)),this.setViewport($e(C,"viewport"))):this.setViewportCoordinateEnable(!1),this.setSymbols($e(s,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var s=this.bobs;for(var g in s)s[g].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,s){return this.createGameObjectCallback=t,this.createGameObjectScope=s,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=Vn(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return vu(this.bobs)&&this.removedGOs.length===0}}Object.assign(gu.prototype,zn,Ag);const Og={addGameObjectManager(i,t){i===void 0&&(i={}),t===void 0&&(t=gu),i.createGameObjectScope||(i.createGameObjectScope=this);var s=new t(this.managersScene,i);return this.gameObjectManagers[i.name]=s,this},getGameObjectManager(i){return this.gameObjectManagers[i]},getGameObjectManagerNames(){var i=[];for(var t in this.gameObjectManagers)i.push(t);return i}},v2={createGameObject(i,t,...s){return this.getGameObjectManager(i).add(t,...s),this},destroyGameObject(i,t){var s=this.getGameObjectManager(i);return t===void 0?s.removeAll():s.remove(t),this},callGameObjectMethod(i,t,s,...g){return this.getGameObjectManager(i).call(t,s,...g),this},setGameObjectProperty(i,t,s,g){return this.getGameObjectManager(i).setProperty(t,s,g),this},easeGameObjectProperty(i,t,s,g,C,M,o,T){return this.getGameObjectManager(i).easeProperty(t,s,g,C,M,o,T),this},getGameObject(i,t,s){var g=this.getGameObjectManager(i);if(typeof t=="string")return g.getGO(t);var C=t;C===void 0&&(C=g.bobs),s===void 0&&(s={});for(t in C)s[t]=g.getGO(t);return s},addGameObject(i,t,s){var g=this.getGameObjectManager(i);if(typeof t=="string")g.addGO(t,s);else{var C=t;for(t in C)g.addGO(t,C[t])}return this},drawGameObjectsBounds(i,t,s){i instanceof Phaser.GameObjects.Graphics&&(s=t,t=i,i=void 0),i===void 0&&(i=this.getGameObjectManagerNames()),Array.isArray(i)||(i=[i]);for(var g=0,C=i.length;g<C;g++)this.getGameObjectManager(i[g]).drawGameObjectsBounds(t,s);return this}};var p2=function(i){class t extends i{}var s={initManagers:BS,setTimeScale:GS,getTimeScale:NS,destroyManagers:zS};return Object.assign(t.prototype,s,Og,v2),t},g2=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,m2=/^0x[0-9A-F]+$/i,Lg=function(i){return typeof i!="string"||(i===""?i=null:g2.test(i)?i=parseFloat(i):m2.test(i)?i=parseInt(i,16):i==="false"?i=!1:i==="true"&&(i=!0)),i};class Fg{constructor(t){this.setEventEmitter(Ft(t,"eventEmitter",void 0)),this.setValueConverter(Ft(t,"valueConvert",!0)),this.setLoopEnable(Ft(t,"loop",!1)),this.setMultipleLinesTagEnable(Ft(t,"multipleLinesTag",!1));var s=Ft(t,"delimiters","<>");this.setDelimiters(s[0],s[1]),this.setTranslateTagNameCallback(Ft(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,s){s===void 0&&(s=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=s,t=Fn(this.delimiterLeft),s=Fn(this.delimiterRight);var g=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${s}`,g),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=Lg:t||(t=x2),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,s=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var g=this.reSplit.exec(t);if(!g){if(this.progressIndex<s&&(this.onContent(t.substring(this.progressIndex,s)),this.isPaused)){this.progressIndex=s;break}this.onComplete(),this.isRunning=!1;return}var C=this.reSplit.lastIndex,M=C-g[0].length;if(this.progressIndex<M&&(this.onContent(t.substring(this.progressIndex,M)),this.isPaused)){this.progressIndex=M;break}if(this.onTag(g[1]),this.progressIndex=C,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,s){return this.isPaused?this:(this.pause(),t.once(s,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}const x2=function(i){return i};Object.assign(Fg.prototype,zn);var y2=function(i,t){if(i==null)return[];for(var s=i.split(","),g=0,C=s.length;g<C;g++)s[g]=t(s[g]);return s};class T2 extends Fg{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Ft(t,"regex.tag",void 0)),this.setValueExpression(Ft(t,"regex.value",void 0));var s=Ft(t,"delimiters","<>");this.setDelimiters(s[0],s[1])}setTagExpression(t){return t||(t=ua),this.tagExpression=t,this}setValueExpression(t){return t||(t=ua),this.valueExpression=t,this}setDelimiters(t,s){super.setDelimiters(t,s);var g=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(g,"i"),this.tagExpression!==ua||this.valueExpression!==ua){var C=`${this.tagExpression}(=${this.valueExpression})?`,M=`/${this.tagExpression}`;t=Fn(this.delimiterLeft),s=Fn(this.delimiterRight);var o=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${C})|(${M}))${s}`,o)}return this}onTag(t){var s=t.match(this.reTag),g=s[1],C=g.charAt(0)==="/";if(C&&(g=g.substring(1,g.length)),this.translateTagNameCallback&&(g=this.translateTagNameCallback(g)),this.skipEventFlag=!1,C)this.emit(`-${g}`),this.skipEventFlag||this.emit("-",g),this.lastTagEnd=g;else{var M=y2(s[3],this.valueConverter);this.emit(`+${g}`,...M),this.skipEventFlag||this.emit("+",g,...M),this.lastTagStart=g}}}const ua="[^=]+";var C2=function(i,t,s){var g="color",C;t.on("start",function(){C=i.textStyle.color}).on(`+${g}`,function(M){i.textStyle.setColor(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setColor(C),t.skipEvent()}).on("complete",function(){i.textStyle.setColor(C)})},S2=function(i,t,s){var g="stroke",C;t.on("start",function(){C=i.textStyle.stroke,i.textStyle.setStrokeStyle(null)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setStrokeStyle(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){i.textStyle.setStrokeStyle(C)})},E2=function(i,t,s){var g="b";t.on("start",function(){i.textStyle.setBold(!1)}).on(`+${g}`,function(){i.textStyle.setBold(!0),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setBold(!1),t.skipEvent()})},P2=function(i,t,s){var g="i";t.on("start",function(){i.textStyle.setItalic(!1)}).on(`+${g}`,function(){i.textStyle.setItalic(!0),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setItalic(!1),t.skipEvent()})},M2=function(i,t,s){var g="size",C;t.on("start",function(){C=i.textStyle.fontSize}).on(`+${g}`,function(M){i.textStyle.setFontSize(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setFontSize(C),t.skipEvent()}).on("complete",function(){i.textStyle.setFontSize(C)})},w2=function(i,t,s){var g="y",C;t.on("start",function(){C=i.textStyle.offsetY,i.textStyle.setOffsetY(0)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setOffsetY(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){i.textStyle.setOffsetY(0)})},A2=function(i,t,s){var g="x",C;t.on("start",function(){C=i.textStyle.offsetY,i.textStyle.setOffsetX(0)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setOffsetX(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){i.textStyle.setOffsetX(0)})},R2=function(i,t,s){var g="left",C;t.on("start",function(){C=i.textStyle.leftSpace,i.textStyle.setLeftSpace(0)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setLeftSpace(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){i.textStyle.setLeftSpace(0)})},O2=function(i,t,s){var g="right",C;t.on("start",function(){C=i.textStyle.rightSpace,i.textStyle.setRightSpace(0)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setRightSpace(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){i.textStyle.setRightSpace(0)})},L2=function(i,t,s){var g="shadow",C;t.on("start",function(){C=i.textStyle.shadowColor,i.textStyle.setShadowColor(null)}).on(`+${g}`,function(M){M===void 0&&(M=C),i.textStyle.setShadowColor(M),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){i.textStyle.setShadowColor(C)})},F2=function(i,t,s){var g="align";t.on(`+${g}`,function(C){i.textStyle.setAlign(C),t.skipEvent()}).on(`-${g}`,function(){i.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){i.textStyle.setAlign()})},b2=function(i,t,s){var g="img";t.on(`+${g}`,function(C){var M=i.imageManager.get(C);pg.call(i,M.key,M.frame,{width:M.width,hieght:M.height,leftSpace:M.left,rightSpace:M.right}),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},D2=function(i,t,s){var g="space";t.on(`+${g}`,function(C){gg.call(i,C),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},I2=function(i,t,s){var g="speed";t.on(`+${g}`,function(C){bf(i,C),t.skipEvent()}).on(`-${g}`,function(){bf(i,void 0),t.skipEvent()})},B2=function(i){this.typeWriter.setTypingSpeed(i)},bf=function(i,t){ct.call(i,"speed",B2,t,i)},G2=function(i,t,s){var g="se";t.on(`+${g}`,function(C,M){ct.call(i,g,N2,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2";t.on(`+${g}`,function(C,M){ct.call(i,g,z2,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},N2=function(i){if(!this.skipSoundEffect){var t=i[0],s=i[1];this.soundManager.playSoundEffect(t),s&&this.soundManager.fadeInSoundEffect(s)}},z2=function(i){if(!this.skipSoundEffect){var t=i[0],s=i[1];this.soundManager.playSoundEffect2(t),s&&this.soundManager.fadeInSoundEffect2(s)}},V2=function(i,t,s){var g="se.fadein";t.on(`+${g}`,function(C){ct.call(i,g,U2,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2.fadein";t.on(`+${g}`,function(C){ct.call(i,g,Y2,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},U2=function(i){this.soundManager.fadeInSoundEffect(i)},Y2=function(i){this.soundManager.fadeInSoundEffect2(i)},X2=function(i,t,s){var g="se.fadeout";t.on(`+${g}`,function(C,M){M=M==="stop",ct.call(i,g,W2,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2.fadeout";t.on(`+${g}`,function(C,M){M=M==="stop",ct.call(i,g,k2,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},W2=function(i){this.soundManager.fadeOutSoundEffect(...i)},k2=function(i){this.soundManager.fadeOutSoundEffect2(...i)},H2=function(i,t,s){var g="se.volume";t.on(`+${g}`,function(C){ct.call(i,g,$2,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="se2.volume";t.on(`+${g}`,function(C){ct.call(i,g,K2,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},$2=function(i){this.soundManager.setSoundEffectVolume(i,!0)},K2=function(i){this.soundManager.setSoundEffectVolume2(i,!0)},Z2=function(i,t,s){var g="bgm";t.on(`+${g}`,function(C,M){ct.call(i,g,J2,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){ct.call(i,"bgm.stop",j2,void 0,i),t.skipEvent()});var g="bgm2";t.on(`+${g}`,function(C,M){ct.call(i,g,Q2,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){ct.call(i,"bgm2.stop",q2,void 0,i),t.skipEvent()})},J2=function(i){var t=i[0],s=i[1];this.soundManager.playBackgroundMusic(t),s&&this.soundManager.fadeInBackgroundMusic(s)},j2=function(){this.soundManager.stopBackgroundMusic()},Q2=function(i){var t=i[0],s=i[1];this.soundManager.playBackgroundMusic2(t),s&&this.soundManager.fadeInBackgroundMusic2(s)},q2=function(){this.soundManager.stopBackgroundMusic2()},_2=function(i,t,s){var g="bgm.fadein";t.on(`+${g}`,function(C){ct.call(i,g,tE,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.fadein";t.on(`+${g}`,function(C){ct.call(i,g,eE,C,i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},tE=function(i){this.soundManager.fadeInBackgroundMusic(i)},eE=function(i){this.soundManager.fadeInBackgroundMusic2(i)},iE=function(i,t,s){var g="bgm.fadeout";t.on(`+${g}`,function(C,M){M=M==="stop",ct.call(i,g,sE,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.fadeout";t.on(`+${g}`,function(C,M){M=M==="stop",ct.call(i,g,nE,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},sE=function(i){this.soundManager.fadeOutBackgroundMusic(...i)},nE=function(i){this.soundManager.fadeOutBackgroundMusic2(...i)},rE=function(i,t,s){var g="bgm.cross";t.on(`+${g}`,function(C,M){ct.call(i,g,aE,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()});var g="bgm2.cross";t.on(`+${g}`,function(C,M){ct.call(i,g,hE,[C,M],i),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},aE=function(i){this.soundManager.crossFadeBackgroundMusic(...i)},hE=function(i){this.soundManager.crossFadeBackgroundMusic2(...i)},oE=function(i,t,s){var g="bgm.pause";t.on(`+${g}`,function(){ct.call(i,g,lE,void 0,i),t.skipEvent()}).on(`-${g}`,function(){ct.call(i,"bgm.resume",uE,void 0,i),t.skipEvent()});var g="bgm2.pause";t.on(`+${g}`,function(){ct.call(i,g,dE,void 0,i),t.skipEvent()}).on(`-${g}`,function(){ct.call(i,"bgm2.resume",fE,void 0,i),t.skipEvent()})},lE=function(){this.soundManager.pauseBackgroundMusic()},uE=function(){this.soundManager.resumeBackgroundMusic()},dE=function(){this.soundManager.pauseBackgroundMusic2()},fE=function(){this.soundManager.resumeBackgroundMusic2()},cE=function(i,t,s){var g="camera.fadein";t.on(`+${g}`,function(C,M,o,T){ct.call(i,g,vE,[C,M,o,T],i),t.skipEvent()})},vE=function(i){this.targetCamera.fadeIn(...i)},pE=function(i,t,s){var g="camera.fadeout";t.on(`+${g}`,function(C,M,o,T){ct.call(i,g,gE,[C,M,o,T],i),t.skipEvent()})},gE=function(i){this.targetCamera.fadeOut(...i)},mE=function(i,t,s){var g="camera.shake";t.on(`+${g}`,function(C,M){ct.call(i,g,xE,[C,M],i),t.skipEvent()})},xE=function(i){this.targetCamera.shake(...i)},yE=function(i,t,s){var g="camera.flash";t.on(`+${g}`,function(C,M,o,T){ct.call(i,g,TE,[C,M,o,T],i),t.skipEvent()})},TE=function(i){this.targetCamera.flash(...i)},CE=function(i,t,s){var g="camera.zoom";t.on(`+${g}`,function(C){ct.call(i,g,SE,C,i),t.skipEvent()}).on(`+${g}.to`,function(C,M,o){ct.call(i,"camera.zoom.to",EE,[C,M,o],i),t.skipEvent()})},SE=function(i){this.targetCamera.setZoom(i)},EE=function(i){this.targetCamera.zoomTo(...i)};const Df=Phaser.Math.DegToRad;var PE=function(i,t,s){var g="camera.rotate";t.on(`+${g}`,function(C){C=Df(C),ct.call(i,g,ME,C,i),t.skipEvent()}).on(`+${g}.to`,function(C,M,o){C=Df(C),ct.call(i,"camera.rotate.to",wE,[C,M,o],i),t.skipEvent()})},ME=function(i){this.targetCamera.setRotation(i)},wE=function(i){var t=i[0],s=i[1],g=i[2];this.targetCamera.rotateTo(t,!1,s,g)},AE=function(i,t,s){var g="camera.scroll";t.on(`+${g}`,function(C,M){ct.call(i,g,RE,[C,M],i),t.skipEvent()}).on(`+${g}.to`,function(C,M,o,T){ct.call(i,"camera.scroll.to",OE,[C,M,o,T],i),t.skipEvent()})},RE=function(i){this.targetCamera.setScroll(...i)},OE=function(i){var t=i[0],s=i[1],g=i[2],C=i[3],M=this.targetCamera,o=M.scrollX,T=M.scrollY;M.setScroll(t,s),t+=M.centerX,s+=M.centerY,M.setScroll(o,T),M.pan(t,s,g,C)},LE=function(i,t,s){var g="wait",C="click";t.on(`+${g}`,function(M){If(i,M),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()}).on(`+${C}`,function(){If(i,"click"),t.skipEvent()}).on(`-${C}`,function(){t.skipEvent()})},FE=function(i){this.typeWriter.wait(i)},If=function(i,t){ct.call(i,"wait",FE,t,i)},bE=function(i,t,s){var g="r";t.on(`+${g}`,function(){Lr.call(i,`
`),t.skipEvent()}).on(`-${g}`,function(){t.skipEvent()})},DE=function(i,t,s){for(var g=["pagebreak","pb"],C=0,M=g.length;C<M;C++){var o=g[C];t.on(`+${o}`,function(){Lr.call(i,"\f"),t.skipEvent()}).on(`-${o}`,function(){t.skipEvent()})}},IE=function(i,t,s){var g="content.off";t.on(`+${g}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},BE=function(i,t,s){var g="content.on";t.on(`+${g}`,function(){t.setContentOutputEnable(),t.skipEvent()})},GE=function(i,t,s){t.on("content",function(g){if(t.contentOutputEnable)Lr.call(i,g);else{var C=`+${t.lastTagStart}`;i.emit(`parser.${C}#content`,t,g)}})},NE=function(i,t,s){t.on("start",function(){i.emit("parser.start",t)}).on("+",function(g,...C){if(!t.skipEventFlag){var M=`+${g}`,o=C;i.emit(`parser.${M}`,t,...C,o),Bf(i,M,o)}}).on("-",function(g){if(!t.skipEventFlag){var C=`-${g}`,M=[];i.emit(`parser.${C}`,t,M),Bf(i,C,M)}}).on("complete",function(){i.emit("parser.complete",t)})},zE=function(i,t){var s=`tag.${t}`;i==null?this.emit(s):this.emit(s,...i)},Bf=function(i,t,s){ct.call(i,t,zE,s,i)};const Gf=[C2,S2,E2,P2,M2,L2,F2,w2,A2,R2,O2,b2,D2,I2,G2,V2,X2,H2,Z2,_2,iE,rE,oE,cE,pE,mE,yE,CE,PE,AE,LE,bE,DE,IE,BE,GE,NE];var VE=function(i,t,s){for(var g=0,C=Gf.length;g<C;g++)Gf[g](i,t,s)},UE=function(i,t){for(var s=i.commentLineStart,g=t.split(`
`),C=0,M=g.length;C<M;C++){var o=g[C];o===""||(o.trim().length===0||s&&o.startsWith(s))&&(g[C]="")}return g.join("")};const YE=Phaser.Utils.Objects.GetValue;class XE extends T2{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("delimiters")||(s.delimiters="[]"),super(s),VE(t,this,s),this.setCommentLineStartSymbol(YE(s,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(UE(this,t)),this}}const WE={setDefaultTypingSpeed(i){return this.defaultSpeed=i,this},setTypingSpeed(i){return i===void 0&&(i=this.defaultSpeed),this.speed=i,this}},Qn="page.fadeout";var kE=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(Qn),this;var i=this.children.filter(function(g){return g.renderable}),t=this.fadeOutPageCallback(i,this.fadeOutPageDuration);if(!t)this.emit(Qn);else if(t.once)t.once("complete",function(){this.emit(Qn)},this);else if(t.then){var s=this;t.then(function(){s.emit(Qn)})}else this.emit(Qn);return this},vh=function(i,t){return new Promise(function(s,g){i.once(t,function(){s()})})},ae=function(i){return vh(i,"complete")},HE=function(i){return this.children=i,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(i),this.typing(),ae(this)};const $E="delay",bg="anim";var Dg=function(i){i===void 0&&(i=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var s=this.getNextChild();if(!s){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(s.renderable){var g=this.animationConfig;if(g.duration>0){var C=this.timeline.addTimer({name:bg,target:s,duration:g.duration,yoyo:g.yoyo,onStart:g.onStart,onProgress:g.onProgress,onComplete:g.onComplete});this.skipTypingAnimation&&C.seek(1)}else g.onStart&&g.onStart(s,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",s);var M=this.nextChild;if(M&&!(this.skipSpaceEnable&&eC(M))){if(t+=this.speed+i,i=0,t>0){this.typingTimer=this.timeline.addTimer({name:$E,target:this,duration:t,onComplete:function(o,T,e){o.typingTimer=void 0,Dg.call(o,e.remainder)}});break}}}else iC(s)&&s.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},KE=function(){return this.timeline.pause(),this},ZE=function(){return this.timeline.resume(),this},JE=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},jE=function(i){return this.isTypingPaused?(i===void 0&&(i=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=i):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(i)),this):this};const ti="_remove.wait",zl="_remove.play",Nf=[ti,zl];var ls=function(i,t,s,g,C){return function(){i.emit(ti,C),t.apply(g,s)}},zf=function(i,t,s,g,C){var M=ls(i,s,g,C,"custom"),o=t?`wait.${t}`:"wait";i.emit(o,M)},QE=function(i,t,s,g,C){var M=ls(i,s,g,C,"time"),o;i.once(ti,function(){o&&(o.remove(),o=void 0)}),o=i.timeline.delayCall(t,M),i.emit("wait.time",t)},qE=function(i,t,s,g){var C=i.clickEE;if(!!C){var M=ls(i,t,s,g,"click");i.once(ti,function(){C.off("pointerdown",M,i)}),C.once("pointerdown",M,i),i.emit("wait.click")}},da=function(i,t,s,g,C){var M=ls(i,s,g,C,"music");t&&(i.once(ti,function(){t.off("complete",M,i)}),t.once("complete",M,i)),i.emit("wait.music",t),t||M()},_E=function(i){switch(i){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},tP=function(i,t,s,g,C){var M=ls(i,s,g,C,`camera.${t}`),o=i.targetCamera,T,e;switch(t){case"camera.fadein":T=o.fadeEffect,e="camerafadeincomplete";break;case"camera.fadeout":T=o.fadeEffect,e="camerafadeoutcomplete";break;case"camera.flash":T=o.flashEffect,e="cameraflashcomplete";break;case"camera.shake":T=o.shakeEffect,e="camerashakecomplete";break;case"camera.zoom":T=o.zoomEffect,e="camerazoomcomplete";break;case"camera.rotate":T=o.rotateToEffect,e="camerarotatecomplete";break;case"camera.scroll":T=o.panEffect,e="camerapancomplete";break}T.isRunning?(i.once(ti,function(d){o.off(e,M,i)}),o.once(e,M,i),i.emit("wait.camera",t)):(i.emit("wait.camera",t),M())},eP=function(i,t,s,g,C){var M=ls(i,s,g,C,"keydown"),o=`keydown-${t.toUpperCase()}`,T=i.scene.input.keyboard;i.once(ti,function(){T.off(o,M,i)}),T.once(o,M,i),i.emit("wait.keydown",t)},iP=function(i,t){var s=t.split(".");return i.gameObjectManagers.hasOwnProperty(s[0])},sP=function(i,t,s,g,C){var M=ls(i,s,g,C),o=t.split("."),T=o[0],e=i.getGameObjectManager(T),d=`wait.${T}`;switch(o.length){case 1:e.isEmpty?(i.emit(d),M()):(i.once(ti,function(m){e.off("empty",M,i)}),e.once("empty",M,i),i.emit(d));return;case 2:var l=o[1];if(!e.has(l))i.emit(d,l),M();else{var x=e.get(l),u=x.gameObject;i.once(ti,function(){u.off("destroy",M,i)}),u.once("destroy",M,i),i.emit(d,l)}return;case 3:var l=o[1],h=o[2],n=e.getProperty(l,h);if(typeof n=="number"){var r=e.getTweenTask(l,h);r?(i.once(ti,function(){r.off("complete",M,i)}),r.once("complete",M,i),i.emit(d,l,h)):(i.emit(d,l,h),M());return}var f=h,a=f.startsWith("!");if(a&&(f=f.substring(1)),e.hasData(l,f)){var u=e.getGO(l),c=u.getData(f),p=!a;if(c===p)i.emit(d,l,h),M();else{var v=`changedata-${f}`,s=function(E,P,S){P=!!P,P===p&&M.call(i)};i.once(ti,function(){u.off(v,s)}),u.on(v,s),i.emit(d,l,h)}return}}};const nP=Phaser.Input.Keyboard.KeyCodes;var Ig=function(i,t,s,g,C){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var M=0,o=t.length;M<o;M++){var T=t[M];if(T==null||T==="wait")zf(i,void 0,s,g,C);else if(typeof T=="number"||!isNaN(T))QE(i,parseFloat(T),s,g,C);else if(T==="click")qE(i,s,g,C);else if(T==="se"){var e=i.soundManager.getLastSoundEffect();da(i,e,s,g,C)}else if(T==="se2"){var e=i.soundManager.getLastSoundEffect2();da(i,e,s,g,C)}else if(T==="bgm"){var e=i.soundManager.getBackgroundMusic();da(i,e,s,g,C)}else if(T==="bgm2"){var e=i.soundManager.getBackgroundMusic2();da(i,e,s,g,C)}else nP.hasOwnProperty(T.toUpperCase())?eP(i,T,s,g,C):_E(T)?tP(i,T,s,g,C):iP(i,T)?sP(i,T,s,g,C):zf(i,T,s,g,C)}},rP=function(i){return this.ignoreWait?this:(this.pauseTyping(),Ig(this.textPlayer,i,this.resumeTyping,[],this),this)},aP=function(i){return i===void 0&&(i=!0),this.ignoreWait=i,this},hP=function(i){return i===void 0&&(i=!0),this.skipSpaceEnable=i,this},oP=function(i){if(i===void 0&&(i=!0),this.skipTypingAnimation=i,i)for(var t=this.timeline.getTimers(bg),s=0,g=t.length;s<g;s++)t[s].seek(1);return this},lP=function(i){if(i===void 0&&(i=!0),this.skipSoundEffect=i,i){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},uP=function(){return this.typingTimer&&this.typingTimer.seek(1),this},Bg={fadeOutPage:kE,start:HE,typing:Dg,pause:KE,resume:ZE,pauseTyping:JE,resumeTyping:jE,wait:rP,setIgnoreWait:aP,setSkipSpaceEnable:hP,setSkipTypingAnimation:oP,setSkipSoundEffect:lP,skipCurrentTypingDelay:uP};Object.assign(Bg,WE);const qs=Phaser.Utils.Objects.GetValue;class Gg{constructor(t,s){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(qs(s,"onTypingStart",fP)),this.setDefaultTypingSpeed(qs(s,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(qs(s,"skipSpace",!1)),this.setAnimationConfig(qs(s,"animation",void 0)),this.setMinSizeEnable(qs(s,"minSizeEnable",!1)),this.setFadeOutPageCallback(qs(s,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=dP),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var dP=function(i){i.setVisible&&i.setVisible()},fP=function(i){for(var t=0,s=i.length;t<s;t++){var g=i[t];g.setVisible&&g.setVisible(!1)}};Object.assign(Gg.prototype,zn,Bg);class cP extends cu{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const vP={playAnimation(i,t){return this.has(i)||this.add(i),this.get(i).playAnimation(t),this},stopAnimation(i){return this.has(i)?(this.get(i).stopAnimation(),this):this},chainAnimation(i,t){return this.has(i)?(this.get(i).chainAnimation(t),this):this},pauseAnimation(i){return this.has(i)?(this.get(i).pauseAnimation(),this):this}};var Ng={};Object.assign(Ng,vP);class zg extends gu{constructor(t,s){s===void 0&&(s={}),s.BobClass=cP,super(t,s)}setCreateGameObjectCallback(t,s){return!t||t==="sprite"?t=pP:t==="image"&&(t=gP),super.setCreateGameObjectCallback(t,s),this}}var pP=function(i,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),i.add.sprite(0,0,t,s)},gP=function(i,t,s){return typeof s!="string"&&typeof s!="number"&&(s=void 0),i.add.image(0,0,t,s)};Object.assign(zg.prototype,Ng);var Vf=function(i,t){return i.length===3&&i[0]===t&&i[2]==="play"},mP=function(i,t){return i.length===3&&i[0]===t&&i[2]==="stop"},xP=function(i,t,s){var g=s.name;t.on("+",function(C,...M){if(!t.skipEventFlag){var o=C.split("."),T;if(Vf(o,g))T=o[1];else return;ct.call(i,`${g}.play`,yP,[g,T,M],i),t.skipEvent()}}).on("+",function(C){if(!t.skipEventFlag){var M=C.split("."),o;if(mP(M,g))o=M[1];else return;ct.call(i,`${g}.stop`,Uf,[g,o],i),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var M=C.split("."),o;if(Vf(M,g))o=M[1];else return;ct.call(i,`${g}.stop`,Uf,[g,o],i),t.skipEvent()}})},yP=function(i){var t,s,g;[t,s,g]=i;var C=g.shift(),M=this.getGameObjectManager(t);M.playAnimation(s,C),g.length>0&&M.chainAnimation(s,g)},Uf=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.stopAnimation(...s)},TP=function(i,t){return i.length===3&&i[0]===t&&i[2]==="pause"},CP=function(i,t,s){var g=s.name;t.on("+",function(C){if(!t.skipEventFlag){var M=C.split("."),o;if(TP(M,g))o=M[1];else return;ct.call(i,`${g}.pause`,SP,[g,o],i),t.skipEvent()}})},SP=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.pauseAnimation(...s)},EP=function(i,t){return i.length===3&&i[0]===t&&i[2]==="chain"},PP=function(i,t,s){var g=s.name;t.on("+",function(C){if(!t.skipEventFlag){var M=C.split("."),o;if(EP(M,g))o=M[1];else return;var T=Array.prototype.slice.call(arguments,1);ct.call(i,`${g}.chain`,MP,[g,o,T],i),t.skipEvent()}})},MP=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.chainAnimation(...s)};const wP=[xP,CP,PP];var AP=function(i){i===void 0&&(i={}),i.name="sprite",i.parseCallbacks=wP,this.addGameObjectManager(i,zg)},Yf=function(i,t){return i.length===2&&i[0]===t},RP=function(i,t,s){var g=s.name;t.on("+",function(C,...M){if(!t.skipEventFlag){var o=C.split("."),T;if(Yf(o,g))T=o[1];else return;ct.call(i,`${g}.add`,OP,[g,T,...M],i),t.skipEvent()}}).on("-",function(C){if(!t.skipEventFlag){var M=C.split("."),o;if(Yf(M,g))o=M[1];else return;ct.call(i,`${g}.remove`,LP,[g,o],i),t.skipEvent()}})},OP=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.add(...s)},LP=function(i){var t,s;[t,...s]=i;var g=this.getGameObjectManager(t);g.remove(...s)},FP=function(i,t,s){var g=s.name;t.on("-",function(C){t.skipEventFlag||C===g&&(ct.call(i,`${g}.removeall`,bP,g,i),t.skipEvent())})},bP=function(i){var t=this.getGameObjectManager(i);t.removeAll()},DP=function(i,t){return i.length===3&&i[0]===t},IP=function(i,t,s){var g=s.name;t.on("+",function(C,...M){if(!t.skipEventFlag){var o=C.split("."),T,e;if(DP(o,g))T=o[1],e=o[2];else return;ct.call(i,`${g}.call`,BP,[g,T,e,...M],i),t.skipEvent()}})},BP=function(i){var t,s,g,C;[t,s,g,...C]=i;var M=`${t}.${g}`;if(this.emit(M,s,...C),!(this.listenerCount(M)>0)){var o=this.getGameObjectManager(t);o.hasMethod(s,g)?o.call(s,g,...C):o.setProperty(s,g,C[0])}},GP={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},NP=function(i,t){return i.length===4&&i[0]===t&&GP[i[3]]},zP=function(i,t,s){var g=s.name;i.getGameObjectManager(g),t.on("+",function(C,M,o,T,e){if(!t.skipEventFlag){var d=C.split("."),x,u,l;if(NP(d,g))x=d[1],u=d[2],l=d[3];else return;typeof T=="number"&&(e=T,T=void 0),ct.call(i,`${g}.ease`,VP,[g,x,u,M,o,T,e,l],i),t.skipEvent()}})},VP=function(i){var t,s,g,C,M,o,T,e;[t,s,g,C,M,o,T,e]=i;var d=this.getGameObjectManager(t),x=d.getProperty(s,g);if(typeof x=="number"){e.endsWith("Left")||e.endsWith("Up")?e.startsWith("to")||e.startsWith("yoyo")?C=x-C:e.startsWith("from")&&(d.setProperty(s,g,x-C),C=x):e.endsWith("Right")||e.endsWith("Down")?e.startsWith("to")||e.startsWith("yoyo")?C=x+C:e.startsWith("from")&&(d.setProperty(s,g,x+C),C=x):e==="from"&&(d.setProperty(s,g,C),C=x);var u=e.startsWith("yoyo");d.easeProperty(s,g,C,M,o,T,u)}};const Xf=[RP,FP,IP,zP],UP=Og.addGameObjectManager,YP={addGameObjectManager(i,t){i===void 0&&(i={});var s=i.name;s||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),UP.call(this,i,t);var g=i.parseCallbacks;g?g=[...g,...Xf]:g=Xf;for(var C=0,M=g.length;C<M;C++)g[C](this,this.parser,i);return this}};var XP=function(i){return this.clickTarget=i,i?Ds(i)?this.clickEE=i.input:this.clickEE=i.setInteractive():this.clickEE=null,this},WP=function(i){return this.targetCamera=i,this},kP=function(i){var t=this;i?typeof i=="function"?this.nextPageInput=function(s,g,C){var M=ls(t,s,g,C);i.call(t,M)}:this.nextPageInput=function(s,g,C){Ig(t,i,s,g,C)}:this.nextPageInput=null},HP=function(i,t){return this.imageManager.add(i,t),this};const $P={play(i){return this.isPlaying?this:(this.removeChildren(),this.parser.start(i),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(i){var t=ae(this);return this.play(i),t}};Phaser.Utils.Objects.GetValue;var Vl=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once("page.fadeout",KP,this).fadeOutPage(),this)},KP=function(){var i=this.runWrap(this.lastWrapResult);this.lastWrapResult=i,this.emit("page.start");var t=function(){this.emit(zl),i.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Vl.call(this):this.nextPageInput&&this.nextPageInput(Vl,[],this))};this.once(zl,function(){this.typeWriter.off("complete",t,this)}),this.typeWriter.once("complete",t,this).start(i.children)};const ZP={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},JP={resume(){return this.timeline.resume(),this},resumeTyping(i){return this.typeWriter.resumeTyping(i),this}};var jP=function(i){return this.typeWriter.wait(i),this};const QP={setDefaultTypingSpeed(i){return this.defaultTypingSpeed=i,this},setTypingSpeed(i){return this.typingSpeed=i,this}};var qP=function(i){return this.typeWriter.setIgnoreWait(i),this},_P=function(i){return i===void 0&&(i=!0),this.ignoreNextPageInput=i,this},tM=function(){if(!this.isPlaying||!this.isPageTyping)return this;var i=this.typeWriter.speed,t=this.typeWriter.ignoreWait,s=this.typeWriter.skipTypingAnimation,g=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(i).setIgnoreWait(t).setSkipTypingAnimation(s).setSkipSoundEffect(g)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const eM={getSprite(i){return this.getGameObject("sprite",i)},addSprite(i,t){return this.addGameObject("sprite",i,t),this}},iM={setContentOutputEnable(i){return this.parser.setContentOutputEnable(i),this},setContentCallback(i,t){return this.contentCallback=i,this.contentCallbackScope=t,this}};var Vg={setClickTarget:XP,setTargetCamera:WP,setNextPageInput:kP,addImage:HP,typingNextPage:Vl,wait:jP,setIgnoreWait:qP,setIgnoreNextPageInput:_P,showPage:tM};Object.assign(Vg,YP,$P,ZP,JP,QP,eM,iM);var sM=function(i){for(var t=0,s=Nf.length;t<s;t++)i.emit(Nf[t])};const Wf=Phaser.Utils.Objects.IsPlainObject,Xi=Phaser.Utils.Objects.GetValue;class mu extends p2(Nn){constructor(t,s,g,C,M,o){Wf(s)?o=s:Wf(C)&&(o=C),o===void 0&&(o={});var T=o.text;delete o.text,super(t,s,g,C,M,o),this.type="rexTextPlayer",this.parser=new XE(this,Xi(o,"parser",void 0)),this.typeWriter=new Gg(this,Xi(o,"typing",void 0)),this._imageManager=void 0;var e=Xi(o,"images",void 0);e&&this.addImage(e),this.setTargetCamera(Xi(o,"camera",this.scene.sys.cameras.main)),this.initManagers(t,o);var d=Xi(o,"sprites");d!==!1&&d!==null&&AP.call(this,d),this.setIgnoreNextPageInput(Xi(o,"ignoreNextPageInput",!1)),this.setClickTarget(Xi(o,"clickTarget",this)),this.setNextPageInput(Xi(o,"nextPageInput",null)),this.isPlaying=!1,T&&this.play(T)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new ou(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(sM(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.targetCamera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(mu.prototype,Vg);st.register("textPlayer",function(i,t,s,g,C){var M=new mu(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.TextPlayer",mu);const Ug={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},Yg={direction:["direction",void 0]};var ji=function(i,t,s){if(typeof s=="string")i.hasOwnProperty(s)&&(t[s]=i[s]);else{var g=s;if(Array.isArray(g))for(var C=0,M=g.length;C<M;C++)ji(i,t,g[C]);else for(var s in g)ji(i,t,s)}},nM=function(i){i===void 0&&(i={});var t={};return ji(i,t,"inputType"),ji(i,t,"type"),ji(i,t,"style"),ji(i,t,Yg),ji(i,t,Ug),t},xu=function(i,t,s,g){if(t)return!(s&&!s(i,t)||!kf(i,t)||g&&!g(i,t));for(var C=i.scene.input.manager,M=C.pointersTotal,o=C.pointers,t,T=0;T<M;T++)if(t=o[T],!(s&&!s(i,t))&&!!kf(i,t)&&!(g&&!g(i,t)))return!0;return!1},kf=function(i,t){for(var s=i.scene,g=s.input.cameras.getCamerasBelowPointer(t),C=s.input.manager,M=[i],o,T=0,e=g.length;T<e;T++)if(o=C.hitTest(t,M,g[T]),o.length>0)return!0;return!1},Sn=void 0,rM=function(i){i!==Sn&&(Sn!==void 0&&Sn.close(),Sn=i)},aM=function(i){i===Sn&&(Sn=void 0)};const hM=Phaser.Utils.Objects.GetValue;var Ja=function(i,t,s){s===void 0&&(s={});var g,C;for(var M in i)g=i[M],C=hM(t,M,g[1]),C!==void 0&&(s[g[0]]=C);return s},Xg=function(i){i.addEventListener("touchstart",_s,!1),i.addEventListener("touchmove",_s,!1),i.addEventListener("touchend",_s,!1),i.addEventListener("mousedown",_s,!1),i.addEventListener("mouseup",_s,!1),i.addEventListener("mousemove",_s,!1)},_s=function(i){i.stopPropagation()};const yo=Phaser.Utils.Objects.GetValue;var oM=function(i,t){var s,g=yo(t,"inputType",void 0);g===void 0&&(g=yo(t,"type","text")),g==="textarea"?(s=document.createElement("textarea"),s.style.resize="none"):(s=document.createElement("input"),s.type=g);var C=yo(t,"style",void 0),M=s.style;Ja(Yg,C,M),M.position="absolute",M.opacity=0,M.pointerEvents="none",M.zIndex=0,M.transform="scale(0)",Ja(Ug,t,s),Xg(s);var o=i.scene.sys.scale,T=o.isFullscreen?o.fullscreenTarget:document.body;return T.appendChild(s),s},lM=function(){return this.isOpened?this:this.readOnly?this:(rM(this),this.isOpened=!0,this.node||(this.node=oM(this,this.nodeConfig)),this.setFocus(),this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this),this)},uM=function(i){if(!!i){var t=i.parentElement;t&&t.removeChild(i)}},dM=function(){return this.isOpened?(aM(this),this.setBlur(),this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),uM(this.node),this.node=void 0,this.emit("close",this),this):this},fM={open:lM,close:dM};const Wi=Phaser.Utils.Objects.GetValue;class yu extends ee{constructor(t,s){super(t);var g=Wi(s,"inputType",void 0);g===void 0&&(g=Wi(s,"type","text")),this.setEnterCloseEnable(Wi(s,"enterClose",g!=="textarea"));var C=Wi(s,"onOpen",void 0);C||(C=Wi(s,"onFocus",void 0)),this.onOpenCallback=C;var M=Wi(s,"onClose",void 0);M||(M=Wi(s,"onBlur",void 0)),this.onCloseCallback=M,this.onUpdateCallback=Wi(s,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=nM(s),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(t){xu(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){!this.node||(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){!this.node||(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,s),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){!this.node||this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){!this.node||(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(!!this.node)return this.node.style.color}set fontColor(t){!this.node||(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node?(this.node.style[t]=s,this):this}getStyle(t){if(!!this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(yu.prototype,fM);var Wg=function(i,t,s){i=i.replace(" ","");var g=s.previousText;if(i===g)return i;if(isNaN(i)){s.emit("nan",i,s),i=g;var C=s.cursorPosition-1;s.setText(i),s.setCursorPosition(C)}else s.previousText=i;return i},cM=function(i){var t=i.parent,s=i.isOpened?i.selectionStart:null,g=i.isOpened?i.selectionEnd:null,C=i.prevSelectionStart,M=i.prevSelectionEnd;if(!(C===s&&M===g)){var o,T;C===null?(o=s,T=g):(o=Math.min(C,s),T=Math.max(M,g));for(var e=o;e<T;e++){var d=C===null?!1:e>=C&&e<M,x=e>=s&&e<g;if(!(d&&x)){var u=t.getCharChild(e);u&&(d?t.emit("cursorout",u,e,t):t.emit("cursorin",u,e,t))}}i.prevSelectionStart=s,i.prevSelectionEnd=g}},vM=function(i){var t=i.parent,s=t.text,g=i.cursorPosition;if(i.prevCursorPosition!==g){if(i.prevCursorPosition!==null&&i.prevCursorPosition>s.length&&(i.prevCursorPosition=null),i.prevCursorPosition!==null){var C=t.getCharChild(i.prevCursorPosition);C&&t.emit("cursorout",C,i.prevCursorPosition,t)}if(g!=null){var C=t.getCharChild(g);C&&t.emit("cursorin",C,g,t)}t.emit("movecursor",g,i.prevCursorPosition,t),i.prevCursorPosition=g}},Hf=function(i){var t=i.prevSelectionStart;if(t!==null){for(var s=i.prevSelectionEnd,g=i.parent,C=t;C<s;C++){var M=g.getCharChild(C);M&&g.emit("cursorout",M,C,g)}i.prevSelectionStart=null,i.prevSelectionEnd=null}},$f=function(i){var t=i.prevCursorPosition;if(t!==null){var s=i.parent,g=s.getCharChild(t);g&&s.emit("cursorout",g,t,s),i.prevCursorPosition=null}};const pM=Phaser.Utils.Objects.GetValue;class gM extends yu{constructor(t,s){super(t,s),this.setSelectAllWhenFocusEnable(pM(s,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(g,C,M,o){var T=t.getNearestChild(C,M),e=t.getCharIndex(T);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(e),this.cursorMoveStartIndex=e,this.firstClickAfterOpen=!1},this).on("pointermove",function(g,C,M,o){if(!!g.isDown){var T=t.getNearestChild(C,M),e=t.getCharIndex(T);this.cursorMoveStartIndex<e?this.selectText(this.cursorMoveStartIndex,e+1):this.selectText(e,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")},this)}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var g=this.onUpdateCallback(s,t,this);g!=null&&(s=g)}return t.text!==s&&(t.setText(s),t.emit("textchange",s,t,this)),this.isOpened?this.selectionStart!==this.selectionEnd?($f(this),cM(this)):(Hf(this),vM(this)):(Hf(this),$f(this)),this}setNumberInput(){return this.onUpdateCallback=Wg,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}}const mM=Phaser.Utils.Objects.GetValue,xM=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var yM=function(i,t){var s=mM(t,"edit");return s===void 0&&(s={}),ji(t,s,xM),new gM(i,s)},vi=function(i,t){if(!i||typeof i=="number")return!1;if(i.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var s=t.split("."),g=i,C=0;C<s.length;C++)if(g.hasOwnProperty(s[C]))g=g[s[C]];else return!1;return!0}else return!1},TM=function(i){var t=!i.textArea;if(!vi(i,"wrap.vAlign")){var s=t?"center":"top";it(i,"wrap.vAlign",s)}if(vi(i,"wrap.charWrap")||it(i,"wrap.charWrap",!0),!vi(i,"wrap.maxLines")){var s=t?1:void 0;it(i,"wrap.maxLines",s)}if(vi(i,"wrap.useDefaultTextHeight")||it(i,"wrap.useDefaultTextHeight",!0),i.edit||(i.edit={}),!vi(i.edit,"inputType")){var s=t?"text":"textarea";it(i.edit,"inputType",s)}return i},CM=function(i){vu(i)||this.setCursorStyle(i).on("cursorin",function(t){var s=this.cursorStyle,g=su(t.style,s);nu(s,g)||(t.styleSave=g,t.modifyStyle(s))},this).on("cursorout",function(t){!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},SM=function(i){vu(i)||this.setFocusStyle(i).on("open",function(){var t=this.background,s=this.focusStyle,g=su(t,s);nu(s,g)||(t.styleSave=g,t.modifyStyle(s))},this).on("close",function(){var t=this.background;!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},EM=function(i){var t=i.createCharChild("|");return t.text="",og.call(i,t),t};function Bi(){}Bi.prototype={diff(i,t,s={}){let g=s.callback;typeof s=="function"&&(g=s,s={}),this.options=s;let C=this;function M(h){return g?(setTimeout(function(){g(void 0,h)},0),!0):h}i=this.castInput(i),t=this.castInput(t),i=this.removeEmpty(this.tokenize(i)),t=this.removeEmpty(this.tokenize(t));let o=t.length,T=i.length,e=1,d=o+T;s.maxEditLength&&(d=Math.min(d,s.maxEditLength));let x=[{newPos:-1,components:[]}],u=this.extractCommon(x[0],t,i,0);if(x[0].newPos+1>=o&&u+1>=T)return M([{value:this.join(t),count:t.length}]);function l(){for(let h=-1*e;h<=e;h+=2){let n,r=x[h-1],f=x[h+1],a=(f?f.newPos:0)-h;r&&(x[h-1]=void 0);let c=r&&r.newPos+1<o,p=f&&0<=a&&a<T;if(!c&&!p){x[h]=void 0;continue}if(!c||p&&r.newPos<f.newPos?(n=MM(f),C.pushComponent(n.components,void 0,!0)):(n=r,n.newPos++,C.pushComponent(n.components,!0,void 0)),a=C.extractCommon(n,t,i,h),n.newPos+1>=o&&a+1>=T)return M(PM(C,n.components,t,i,C.useLongestToken));x[h]=n}e++}if(g)(function h(){setTimeout(function(){if(e>d)return g();l()||h()},0)})();else for(;e<=d;){let h=l();if(h)return h}},pushComponent(i,t,s){let g=i[i.length-1];g&&g.added===t&&g.removed===s?i[i.length-1]={count:g.count+1,added:t,removed:s}:i.push({count:1,added:t,removed:s})},extractCommon(i,t,s,g){let C=t.length,M=s.length,o=i.newPos,T=o-g,e=0;for(;o+1<C&&T+1<M&&this.equals(t[o+1],s[T+1]);)o++,T++,e++;return e&&i.components.push({count:e}),i.newPos=o,T},equals(i,t){return this.options.comparator?this.options.comparator(i,t):i===t||this.options.ignoreCase&&i.toLowerCase()===t.toLowerCase()},removeEmpty(i){let t=[];for(let s=0;s<i.length;s++)i[s]&&t.push(i[s]);return t},castInput(i){return i},tokenize(i){return i.split("")},join(i){return i.join("")}};function PM(i,t,s,g,C){let M=0,o=t.length,T=0,e=0;for(;M<o;M++){let x=t[M];if(x.removed){if(x.value=i.join(g.slice(e,e+x.count)),e+=x.count,M&&t[M-1].added){let u=t[M-1];t[M-1]=t[M],t[M]=u}}else{if(!x.added&&C){let u=s.slice(T,T+x.count);u=u.map(function(l,h){let n=g[e+h];return n.length>l.length?n:l}),x.value=i.join(u)}else x.value=i.join(s.slice(T,T+x.count));T+=x.count,x.added||(e+=x.count)}}let d=t[o-1];return o>1&&typeof d.value=="string"&&(d.added||d.removed)&&i.equals("",d.value)&&(t[o-2].value+=d.value,t.pop()),t}function MM(i){return{newPos:i.newPos,components:i.components.slice(0)}}const wM=new Bi;function AM(i,t,s){return wM.diff(i,t,s)}const Kf=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,Zf=/\S/,kg=new Bi;kg.equals=function(i,t){return this.options.ignoreCase&&(i=i.toLowerCase(),t=t.toLowerCase()),i===t||this.options.ignoreWhitespace&&!Zf.test(i)&&!Zf.test(t)};kg.tokenize=function(i){let t=i.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let s=0;s<t.length-1;s++)!t[s+1]&&t[s+2]&&Kf.test(t[s])&&Kf.test(t[s+2])&&(t[s]+=t[s+2],t.splice(s+1,2),s--);return t};const Hg=new Bi;Hg.tokenize=function(i){let t=[],s=i.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(let g=0;g<s.length;g++){let C=s[g];g%2&&!this.options.newlineIsToken?t[t.length-1]+=C:(this.options.ignoreWhitespace&&(C=C.trim()),t.push(C))}return t};const RM=new Bi;RM.tokenize=function(i){return i.split(/(\S.+?[.!?])(?=\s+|$)/)};const OM=new Bi;OM.tokenize=function(i){return i.split(/([{}:;,]|\s+)/)};const LM=Object.prototype.toString,yr=new Bi;yr.useLongestToken=!0;yr.tokenize=Hg.tokenize;yr.castInput=function(i){const{undefinedReplacement:t,stringifyReplacer:s=(g,C)=>typeof C>"u"?t:C}=this.options;return typeof i=="string"?i:JSON.stringify(Ul(i,null,null,s),s,"  ")};yr.equals=function(i,t){return Bi.prototype.equals.call(yr,i.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Ul(i,t,s,g,C){t=t||[],s=s||[],g&&(i=g(C,i));let M;for(M=0;M<t.length;M+=1)if(t[M]===i)return s[M];let o;if(LM.call(i)==="[object Array]"){for(t.push(i),o=new Array(i.length),s.push(o),M=0;M<i.length;M+=1)o[M]=Ul(i[M],t,s,g,C);return t.pop(),s.pop(),o}if(i&&i.toJSON&&(i=i.toJSON()),typeof i=="object"&&i!==null){t.push(i),o={},s.push(o);let T=[],e;for(e in i)i.hasOwnProperty(e)&&T.push(e);for(T.sort(),M=0;M<T.length;M+=1)e=T[M],o[e]=Ul(i[e],t,s,g,e);t.pop(),s.pop()}else o=i;return o}const Yl=new Bi;Yl.tokenize=function(i){return i.slice()};Yl.join=Yl.removeEmpty=function(i){return i};const FM=Phaser.Utils.Array.Remove;var bM=function(i,t){var s=i.text;if(t!==s){if(FM(i.children,i.lastInsertCursor),t==="")i.removeChildren();else for(var g=AM(s,t),C=0,M=0,o=g.length;M<o;M++){var T=g[M];T.removed?i.removeText(C,T.count):(T.added&&i.insertText(C,T.value),C+=T.count)}i.children.push(i.lastInsertCursor),i.runWordWrap()}};const Jf=Phaser.Utils.Objects.IsPlainObject;class Tu extends Nn{constructor(t,s,g,C,M,o){Jf(s)?o=s:Jf(C)&&(o=C),o===void 0&&(o={}),TM(o);var T=o.text;T&&delete o.text;var e=Dl(o.background,"focus"),d=Dl(o.style,"cursor");super(t,s,g,C,M,o),this.type="rexCanvasInput",this._text="",this.textEdit=yM(this,o),o.focusStyle&&Object.assign(e,o.focusStyle),SM.call(this,e),o.cursorStyle&&Object.assign(d,o.cursorStyle),CM.call(this,d);var x=o.onAddChar;x&&this.on("addchar",x);var u=o.onCursorOut;u&&this.on("cursorout",u);var l=o.onCursorIn;l&&this.on("cursorin",l);var h=o.onMoveCursor;h&&this.on("movecursor",h),this.setParseTextCallback(o.parseTextCallback),this.lastInsertCursor=EM(this),T?this.setText(T):this.runWordWrap()}addChild(t,s){if(super.addChild(t,s),Array.isArray(t))for(var g=t,C=0,M=g.length;C<M;C++){var t=g[C];bn(t)&&this.emit("addchar",t,s+C,this)}else bn(t)&&this.emit("addchar",t,s,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(bM(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}setSize(t,s){return this.width===t&&this.height===s?this:(super.setSize(t,s),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=DM),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}}var DM=function(i){return i};st.register("canvasInput",function(i,t,s,g,C){var M=new Tu(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.CanvasInput",Tu);var Cu=function(i){return Ln(i).loop.delta};const jf=Phaser.Utils.Objects.GetValue,IM=Phaser.Math.Wrap;class $g extends yu{constructor(t,s){s===void 0&&(s={}),s.onUpdate==="number"&&(s.onUpdate=Wg),super(t,s),this.setCursor(jf(s,"cursor","|")),this.setCursorFlashDuration(jf(s,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,s=this.text;if(this.onUpdateCallback){var g=this.onUpdateCallback(s,t,this);g!=null&&(s=g)}if(this.isOpened&&this.hasCursor){var C=this.cursorPosition;s=s.substring(0,C)+this.cursor+s.substring(C),this.prevCursorPosition!==C&&(this.prevCursorPosition=C)}return t.text!==s&&(t.setText(s),this.emit("textchange",s,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var s=this.cursorFlashTimer+Cu(this.scene);return this.cursorFlashTimer=IM(s,0,this.cursorFlashDuration),t}}st.register("hiddenEdit",function(i,t){var s=new $g(i,t);return s});it(window,"RexPlugins.UI.HiddenEdit",$g);const BM=Phaser.GameObjects.GetCalcMatrix;var GM=function(i,t,s,g){t.updateData(),s.addToRenderList(t);var C=i.pipelines.set(t.pipeline),M=BM(t,s,g),o=C.calcMatrix.copyFrom(M.calc),T=t._displayOriginX,e=t._displayOriginY,d=s.alpha*t.alpha;i.pipelines.preBatch(t);for(var x=t.geom,u=0,l=x.length;u<l;u++)x[u].webglRender(C,o,d,T,e);i.pipelines.postBatch(t)};const NM=Phaser.Renderer.Canvas.SetTransform;var zM=function(i,t,s,g){t.updateData(),s.addToRenderList(t);var C=i.currentContext;if(NM(i,C,t,s,g)){for(var M=t._displayOriginX,o=t._displayOriginY,T=t.geom,e=0,d=T.length;e<d;e++)T[e].canvasRender(C,M,o);C.restore()}};const VM={renderWebGL:GM,renderCanvas:zM},UM=Phaser.GameObjects.Shape,YM=Phaser.Utils.Array.Remove;class Vs extends UM{constructor(t,s,g,C,M){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=2),M===void 0&&(M=C),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(s,g),this.setSize(C,M),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,s){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==s,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=s,this.updateDisplayOrigin();var g=this.input;return g&&!g.customHitArea&&(g.hitArea.width=t,g.hitArea.height=s),this}resize(t,s){return this.setSize(t,s),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==s,this._fillColor=t,this._fillAlpha=s,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,s,g){return g===void 0&&(g=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==s||this.strokeAlpha!==g,this._lineWidth=t,this._strokeColor=s,this._strokeAlpha=g,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,s=0,g=t.length;s<g;s++){var C=t[s];C.dirty&&C.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Oi(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var s=t.name;return s&&(this.shapes[s]=t),this.dirty=!0,this}deleteShape(t){var s=this.getShape(t);return s&&(delete this.shapes[t],YM(this.geom,s)),this}}Object.assign(Vs.prototype,VM);const XM={setBoxFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==i||this.boxFillAlpha!==t,this.boxFillColor=i,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==i||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=i,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(i,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.boxLineWidth!==i||this.boxStrokeColor!==t||this.boxStrokeAlpha!==s,this.boxLineWidth=i,this.boxStrokeColor=t,this.boxStrokeAlpha=s,this},setUncheckedBoxStrokeStyle(i,t,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==i||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==s,this.uncheckedBoxLineWidth=i,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=s,this},setCheckerStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==i||this.checkAlpha!==t,this.checkerColor=i,this.checkAlpha=t,this},setBoxShape(i){return i===void 0&&(i=!1),this.isCircleShape===i?this:(this.isCircleShape=i,this.isSizeChanged=!0,this.dirty=!0,this)}},WM={setBoxSize(i){return this.dirty=this.dirty||this.boxSize!==i,this.boxSize=i,this},setCheckerSize(i){return this.dirty=this.dirty||this.checkerSize!==i,this.checkerSize=i,this}};var kM=function(i,t){return i==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=i,this.fillAlpha=t),this},HM=function(i,t,s){return i==null||t==null?this.isStroked=!1:(s===void 0&&(s=1),this.isStroked=!0,this.lineWidth=i,this.strokeColor=t,this.strokeAlpha=s),this};const $M={fillStyle:kM,lineStyle:HM};class ph{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,s,g,C,M){}canvasRender(t,s,g){}updateData(){this.dirty=!1}}Object.assign(ph.prototype,$M,ah);const KM=Phaser.Geom.Polygon.Earcut;class Fr extends ph{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=KM(this.pathData),super.updateData(),this}webglRender(t,s,g,C,M){this.isFilled&&Zp(t,s,this,g,C,M),this.isStroked&&oh(t,this,g,C,M)}canvasRender(t,s,g){var C=this.pathData,M=C.length-1,o=C[0]-s,T=C[1]-g;t.beginPath(),t.moveTo(o,T),this.closePath||(M-=2);for(var e=2;e<M;e+=2){var d=C[e]-s,x=C[e+1]-g;t.lineTo(d,x)}this.closePath&&t.closePath(),this.isFilled&&(Rr(t,this),t.fill()),this.isStroked&&(Or(t,this),t.stroke())}}const Qf=Phaser.Math.DegToRad;class gh extends Fr{constructor(t,s,g,C,M,o,T,e){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),o===void 0&&(o=360),T===void 0&&(T=!1),e===void 0&&(e=!1),super(),this.setCenterPosition(t,s),this.setRadius(g,C),this.setAngle(M,o,T),this.setPie(e),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,s){return s===void 0&&(s=t),this.x=t,this.y=s,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,s){return s===void 0&&(s=t),this.radiusX=t,this.radiusY=s,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,s,g){return g===void 0&&(g=!1),this.startAngle=t,this.endAngle=s,this.anticlockwise=g,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),_t(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,s,g){t.beginPath();var C=this.x-s,M=this.y-g,o=Qf(this.startAngle),T=Qf(this.endAngle);this.pie&&(t.moveTo(C,M),t.lineTo(C+Math.cos(o)*this.radiusX,M+Math.sin(o)*this.radiusY)),t.ellipse(C,M,this.radiusX,this.radiusY,0,o,T,this.anticlockwise),this.pie&&t.lineTo(C,M),this.isFilled&&(Rr(t,this),t.fill()),this.isStroked&&(Or(t,this),t.stroke())}}class Xl extends gh{constructor(t,s,g){super(t,s,g,g,0,360)}}class ZM extends Fr{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),s=0,g=t.length;s<g;s++)this.pathData.push(t[s].x,t[s].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class JM extends gh{constructor(t,s,g,C){super(t,s,g,C,0,360)}}class jM extends Fr{constructor(t,s,g,C){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),super(),this.setP0(t,s),this.setP1(g,C)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var QM=function(i,t,s){return s.length=0,i!=null&&s.push(i,t),s};const qf=Phaser.Math.Interpolation.QuadraticBezier;var qM=function(i,t,s,g,C,M){for(var o=M.length,T=M[o-2],e=M[o-1],d=1,x=C-1;d<=x;d++){var u=d/x;M.push(qf(u,T,i,s),qf(u,e,t,g))}return M};const _f=Phaser.Math.Interpolation.CubicBezier;var _M=function(i,t,s,g,C,M,o,T){for(var e=T.length,d=T[e-2],x=T[e-1],u=1,l=o-1;u<=l;u++){var h=u/l;T.push(_f(h,d,i,s,C),_f(h,x,t,g,M))}return T},Kg=function(i){var t=i.length;if(t<2)return i;var s=i[t-2],g=i[t-1];return i.push(s),i.push(g),i};const tw={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(i,t){return this.restorePathData(),this.accumulationLengths=void 0,QM(i,t,this.pathData),this.firstPointX=i,this.firstPointY=t,this.lastPointX=i,this.lastPointY=t,this},lineTo(i,t,s){return s===void 0&&(s=!1),s&&(i+=this.lastPointX,t+=this.lastPointY),gi(i,t,this.pathData),this.lastPointX=i,this.lastPointY=t,this},verticalLineTo(i,t){return this.lineTo(i,this.lastPointY,t),this},horizontalLineTo(i,t){return this.lineTo(this.lastPointX,i,t),this},ellipticalArc(i,t,s,g,C,M,o){return o===void 0&&(o=!1),_t(i,t,s,g,C,M,o,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(i,t,s,g,C,M){return this.ellipticalArc(i,t,s,s,g,C,M),this},quadraticBezierTo(i,t,s,g){return qM(i,t,s,g,this.iterations,this.pathData),this.lastPointX=s,this.lastPointY=g,this.lastCX=i,this.lastCY=t,this},smoothQuadraticBezierTo(i,t){var s=this.lastPointX*2-this.lastCX,g=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(s,g,i,t),this},cubicBezierCurveTo(i,t,s,g,C,M){return _M(i,t,s,g,C,M,this.iterations,this.pathData),this.lastPointX=C,this.lastPointY=M,this.lastCX=s,this.lastCY=g,this},smoothCubicBezierCurveTo(i,t,s,g){var C=this.lastPointX*2-this.lastCX,M=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(C,M,i,t,s,g),this},close(){return this.closePath=!0,this},end(){return Kg(this.pathData),this}},ew=Phaser.Math.RotateAround;var iw=function(i,t,s,g){for(var C={x:0,y:0},M=0,o=g.length-1;M<o;M+=2)C.x=g[M],C.y=g[M+1],ew(C,i,t,s),g[M]=C.x,g[M+1]=C.y;return g},sw=function(i,t,s,g,C){for(var M=0,o=C.length-1;M<o;M+=2){var T=C[M]-i,e=C[M+1]-t;T*=s,e*=g,C[M]=T+i,C[M+1]=e+t}return C},Zg=function(i,t,s){for(var g=0,C=s.length-1;g<C;g+=2)s[g]+=i,s[g+1]+=t;return s};const nw=Phaser.Math.DegToRad,rw=Phaser.Math.RotateAround,aw={rotateAround(i,t,s){if(this.pathData.length===0)return this;s=nw(s),iw(i,t,s,this.pathData);var g=this.pathData.length;if(this.lastPointX=this.pathData[g-2],this.lastPointY=this.pathData[g-1],this.lastCX!==void 0){var C={x:this.lastCX,y:this.lastCY};rw(C,i,t,s),this.lastCX=C.x,this.lastCY=C.y}return this},scale(i,t,s,g){if(this.pathData.length===0)return this;if(sw(i,t,s,g,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var C=this.lastCX-i,M=this.lastCY-t;C*=s,M*=g,this.lastCX=C+i,this.lastCY=M+t}return this},offset(i,t){return Zg(i,t,this.pathData),this}};var Su=function(i,t,s,g){s===void 0&&(s=0),g===void 0&&(g=t.length),i.length=g-s;for(var C=0,M=i.length;C<M;C++)i[C]=t[C+s];return i};const hw={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(Su(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},ow=Phaser.Math.Distance.Between,lw=Phaser.Math.Wrap,uw=Phaser.Math.Linear;var tc=function(i,t,s,g,C){if(g===void 0&&(g=s,s=0),s=ec(s),g=ec(g),s!==g){var M=t[t.length-1],o=M*s,T=M*g;s<g?To(i,t,o,T,C):(To(i,t,o,M,C),To(i,t,0,T,C)),Kg(C)}},To=function(i,t,s,g,C){for(var M=s>0,o=0,T=t.length;o<T;o++){var e=o*2,d=t[o];if(M){if(d<s)continue;if(d==s)M=!1;else{var x=d-t[o-1],u=1-(d-s)/x;C.push(fa(i,e-2,e,u)),C.push(fa(i,e-1,e+1,u)),M=!1}}if(d<=g){if(C.push(i[e]),C.push(i[e+1]),d===g)break}else{var x=d-t[o-1],u=1-(d-g)/x;C.push(fa(i,e-2,e,u)),C.push(fa(i,e-1,e+1,u));break}}},fa=function(i,t,s,g){var C=i[t],M=i[s];return uw(C,M,g)},ec=function(i){return i===0?0:i%1===0?1:lw(i,0,1)};const dw={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var i=this.accumulationLengths,t=this.pathData,s,g,C,M,o,T=0,e=0,d=t.length;e<d;e+=2)C=t[e],M=t[e+1],o=s===void 0?0:ow(s,g,C,M),T+=o,i.push(T),s=C,g=M;return this.totalPathLength=T,this},setDisplayPathSegment(i,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,tc(this.pathDataSave,this.accumulationLengths,i,t,this.pathData),this},appendFromPathSegment(i,t,s){return t===void 0?this.pathData.push(...i.pathData):(i.updateAccumulationLengths(),tc(i.pathData,i.accumulationLengths,t,s,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},fw={draw(i,t,s){var g=this.toPoints();return t&&i.fillPoints(g,this.closePath,this.closePath),s&&i.strokePoints(g,this.closePath,this.closePath),this}};var cw=function(i,t){t===void 0&&(t=[]);for(var s=0,g=i.length-1;s<g;s+=2)t.push({x:i[s],y:i[s+1]});return t};const vw=Phaser.Geom.Polygon;var pw=function(i,t){return t===void 0&&(t=new vw),t.setTo(i),t};class Jg{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return cw(this.pathData)}toPolygon(t){return pw(this.pathData,t)}}Object.assign(Jg.prototype,tw,aw,hw,dw,fw);class An extends Fr{constructor(){super(),this.builder=new Jg(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,s){return this.builder.startAt(t,s),this.dirty=!0,this}lineTo(t,s,g){return this.builder.lineTo(t,s,g),this.dirty=!0,this}verticalLineTo(t,s){return this.builder.verticalLineTo(t,s),this.dirty=!0,this}horizontalLineTo(t,s){return this.builder.horizontalLineTo(t,s),this.dirty=!0,this}ellipticalArc(t,s,g,C,M,o,T){return this.builder.ellipticalArc(t,s,g,C,M,o,T),this.dirty=!0,this}arc(t,s,g,C,M,o){return this.builder.arc(t,s,g,C,M,o),this.dirty=!0,this}quadraticBezierTo(t,s,g,C){return this.builder.quadraticBezierTo(t,s,g,C),this.dirty=!0,this}smoothQuadraticBezierTo(t,s){return this.builder.smoothQuadraticBezierTo(t,s),this.dirty=!0,this}cubicBezierCurveTo(t,s,g,C,M,o){return this.builder.cubicBezierCurveTo(t,s,g,C,M,o),this.dirty=!0,this}smoothCubicBezierCurveTo(t,s,g,C){return this.builder.smoothCubicBezierCurveTo(t,s,g,C),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,s,g){return this.builder.rotateAround(t,s,g),this.dirty=!0,this}scale(t,s,g,C){return this.builder.scale(t,s,g,C),this.dirty=!0,this}offset(t,s){return this.builder.offset(t,s),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,s,g){return this.builder.appendFromPathSegment(t.builder,s,g),this}copyPathFrom(t,s,g){return this.builder.clear().appendFromPathSegment(t.builder,s,g),this}setDisplayPathSegment(t,s){return this.builder.setDisplayPathSegment(t,s),this}}const gw=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class mw extends ph{constructor(t,s,g,C){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=g),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,s),this.setSize(g,C)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}updateData(){this.pathData.length=0;var t=this.x,s=t+this.width,g=this.y,C=g+this.height;return this.pathData.push(t,g),this.pathData.push(s,g),this.pathData.push(s,C),this.pathData.push(t,C),this.pathData.push(t,g),super.updateData(),this}webglRender(t,s,g,C,M){if(this.isFilled){var o=t.fillTint,T=gw(this.fillColor,this.fillAlpha*g);o.TL=T,o.TR=T,o.BL=T,o.BR=T,t.batchFillRect(-C+this.x,-M+this.y,this.width,this.height)}this.isStroked&&oh(t,this,g,C,M)}canvasRender(t,s,g){this.isFilled&&(Rr(t,this),t.fillRect(-s,-g,this.width,this.height)),this.isStroked&&(Or(t,this),t.beginPath(),t.rect(-s,-g,this.width,this.height),t.stroke())}}const ca=Phaser.Utils.Objects.GetValue;class ja extends Fr{constructor(t,s,g,C,M,o){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=g),M===void 0&&(M=0),o===void 0&&(o=6),super(),this.setTopLeftPosition(t,s),this.setSize(g,C),this.setRadius(M),this.setIterations(o),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,s){return this.x=t,this.y=s,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,s){return this.width=t,this.height=s,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,s){return this.centerX=t,this.centerY=s,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var s=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==s,this._convexTL=s,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var s=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==s,this._convexTR=s,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var s=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==s,this._convexBL=s,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var s=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==s,this._convexBR=s,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=ca(t,"tl",0),this.radiusTR=ca(t,"tr",0),this.radiusBL=ca(t,"bl",0),this.radiusBR=ca(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var s=this.width,g=this.height,C,M=this.iterations+1;if(C=this.radiusTL,C>0)if(this._convexTL){var o=C,T=C;_t(o,T,C,C,180,270,!1,M,t)}else{var o=0,T=0;_t(o,T,C,C,90,0,!0,M,t)}else gi(0,0,t);if(C=this.radiusTR,C>0)if(this._convexTR){var o=s-C,T=C;_t(o,T,C,C,270,360,!1,M,t)}else{var o=s,T=0;_t(o,T,C,C,180,90,!0,M,t)}else gi(s,0,t);if(C=this.radiusBR,C>0)if(this._convexBR){var o=s-C,T=g-C;_t(o,T,C,C,0,90,!1,M,t)}else{var o=s,T=g;_t(o,T,C,C,270,180,!0,M,t)}else gi(s,g,t);if(C=this.radiusBL,C>0)if(this._convexBL){var o=C,T=g-C;_t(o,T,C,C,90,180,!1,M,t)}else{var o=0,T=g;_t(o,T,C,C,360,270,!0,M,t)}else gi(0,g,t);return t.push(t[0],t[1]),Zg(this.x,this.y,t),super.updateData(),this}}const xw=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class yw extends ph{constructor(t,s,g,C,M,o){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),o===void 0&&(o=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,s),this.setP1(g,C),this.setP2(M,o)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,s){return this.x0=t,this.y0=s,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,s){return this.x1=t,this.y1=s,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,s){return this.dirty=this.dirty||this.x2!==t||this.y2!==s,this.x2=t,this.y2=s,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,s,g,C,M){if(this.isFilled){var o=xw(this.fillColor,this.fillAlpha*g),T=this.x0-C,e=this.y0-M,d=this.x1-C,x=this.y1-M,u=this.x2-C,l=this.y2-M,h=s.getX(T,e),n=s.getY(T,e),r=s.getX(d,x),f=s.getY(d,x),a=s.getX(u,l),c=s.getY(u,l);t.batchTri(h,n,r,f,a,c,o,o,o)}this.isStroked&&oh(t,this,g,C,M)}canvasRender(t,s,g){var C=this.x1-s,M=this.y1-g,o=this.x2-s,T=this.y2-g,e=this.x3-s,d=this.y3-g;t.beginPath(),t.moveTo(C,M),t.lineTo(o,T),t.lineTo(e,d),t.closePath(),this.isFilled&&(Rr(t,this),t.fill()),this.isStroked&&(Or(t,this),t.stroke())}}const Tw={buildShapes(){this.addShape(new ja().setName("box")).addShape(new An().setName("checker"))},updateShapes(){var i=this.width/2,t=this.height/2,s=Math.min(i,t),g=s*2,C=i-s,M=t-s,o=this.boxLineWidth,T=Math.max(g/10,2),e=this.getShape("box"),d=this.getShape("checker");if(this.isSizeChanged){var l=g*(1-this.boxSize)/2,x=o/2,u=g*this.boxSize-o;e.setTopLeftPosition(C+x+l,M+x+l).setSize(u,u),this.isCircleShape?e.setRadius(u/2):e.setRadius(0);var l=g*(1-this.checkerSize)/2,h=g*this.checkerSize/4,n=h*1,r=h*2,f=h*3;d.startAt(n,r).lineTo(r,f).lineTo(f,n).offset(C+l,M+l).end()}this.checked?(e.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(o,this.boxStrokeColor,this.boxStrokeAlpha),d.lineStyle(T,this.checkerColor)):(e.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(o,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),d.lineStyle()),this.checked&&d.setDisplayPathSegment(this.checkerAnimProgress)}},ki=Phaser.Utils.Objects.GetValue,Cw=Phaser.Math.Linear;class Us extends zs{constructor(t,s){super(t,s),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var s=this.target;this.propertyKey=ki(t,"key","value");var g=s[this.propertyKey];return this.fromValue=ki(t,"from",g),this.toValue=ki(t,"to",g),this.setEase(ki(t,"ease",this.ease)),this.setDuration(ki(t,"duration",this.duration)),this.setRepeat(ki(t,"repeat",0)),this.setDelay(ki(t,"delay",0)),this.setRepeatDelay(ki(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),s[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,s){var g=s.t;g=this.easeFn(g),t[this.propertyKey]=Cw(this.fromValue,this.toValue,g)}}const Sw={setCheckerAnimationDuration(i){return i===void 0&&(i=0),this.checkerAnimDuration=i,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new Us(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var jg={};Object.assign(jg,XM,WM,Tw,Sw);const Nt=Phaser.Utils.Objects.GetValue,ic=Phaser.Utils.Objects.IsPlainObject,Co=23730,Ew=16777215;class Qg extends Vs{constructor(t,s,g,C,M,o,T){ic(s)?(T=s,s=Nt(T,"x",0),g=Nt(T,"y",0),C=Nt(T,"width",2),M=Nt(T,"height",2),o=Nt(T,"color",Co)):ic(o)&&(T=o,o=Nt(T,"color",Co)),super(t,s,g,C,M),this.type="rexCheckbox",o===void 0&&(o=Co),this.setBoxShape(Nt(T,"circleBox",!1)),this.setBoxFillStyle(o,Nt(T,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Nt(T,"uncheckedColor",null),Nt(T,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Nt(T,"boxLineWidth",4),Nt(T,"boxStrokeColor",o),Nt(T,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Nt(T,"uncheckedBoxStrokeColor",this.boxStrokeColor),Nt(T,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Nt(T,"checkerColor",Ew),Nt(T,"checkerAlpha",1)),this.setBoxSize(Nt(T,"boxSize",1)),this.setCheckerSize(Nt(T,"checkerSize",1)),this.setCheckerAnimationDuration(Nt(T,"animationDuration",150)),this.buildShapes();var e=Nt(T,"checked");e===void 0&&(e=Nt(T,"value",!1)),this.setValue(e)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(Qg.prototype,jg);const qn=Phaser.Utils.Objects.GetValue;class us extends ee{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive(qn(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(qn(t,"enable",!0)),this.setMode(qn(t,"mode",1)),this.setClickInterval(qn(t,"clickInterval",100)),this.setDragThreshold(qn(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=Pw[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,s,g,C){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,C))}onRelease(t,s,g,C){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,C),this.pointer=void 0)}onPointOut(t,s){this.pointer===t&&this.cancel()}onMove(t,s,g,C){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,s,g){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,s,g),this;this.pointer=void 0;var C=this.lastClickTime;return C!==void 0&&t-C<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,s,g),this)}cancel(){return this.pointer=void 0,this}onOver(t,s,g,C){return this.enable?(this.emit("over",this,this.parent,t,C),this):this}onOut(t,s){return this.enable?(this.emit("out",this,this.parent,t,s),this):this}}const Pw={press:0,pointerdown:0,release:1,pointerup:1},sc=Phaser.Utils.Objects.GetValue;class Eu extends Qg{constructor(t,s,g,C,M,o,T){super(t,s,g,C,M,o,T),this._click=new us(this,sc(T,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(sc(T,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}st.register("checkbox",function(i,t,s,g,C,M){var o=new Eu(this.scene,i,t,s,g,C,M);return this.scene.add.existing(o),o});it(window,"RexPlugins.UI.Checkbox",Eu);const Mw={setTrackFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==i||this.trackFillAlpha!==t,this.trackFillColor=i,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==i||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=i,this.falseValueTrackFillAlpha=t,this},setThumbStyle(i,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==i||this.checkAlpha!==t,this.thumbColor=i,this.thumbAlpha=t,this}},ww={setTrackSize(i,t){return this.dirty=this.dirty||this.trackWidth!==i||this.trackHeight!==t,this.trackWidth=i,this.trackHeight=t,this},setTrackRadius(i){return this.dirty=this.dirty||this.trackRadius!==i,this.trackRadius=i,this},setThumbSize(i,t){return t===void 0&&(t=i),this.dirty=this.dirty||this.thumbWidth!==i||this.thumbHeight!==t,this.thumbWidth=i,this.thumbHeight=t,this},setThumbRadius(i){return this.dirty=this.dirty||this.thumbRadius!==i,this.thumbRadius=i,this}},Aw={setThumbPosition(i,t){return t===void 0&&(t=1-i),this.thumbLeftX=i,this.thumbRightX=t,this},setRTL(i){return i===void 0&&(i=!0),this.rtl=i,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var So=function(i,t,s){return(t-i)*s+i},Rw=function(i,t,s){var g=So(gr(i),gr(t),s),C=So(mr(i),mr(t),s),M=So(xr(i),xr(t),s);return(g&255)<<16|(C&255)<<8|M&255};const nc=Phaser.Math.Linear,Ow={buildShapes(){this.addShape(new ja().setName("track")).addShape(new ja().setName("thumb"))},updateShapes(){var i=this.width,t=this.height,s=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,g=this.getShape("track");if(this.isSizeChanged){var C=i*this.trackWidth,M=t*this.trackHeight,o=(i-C)/2,T=(t-M)/2,e=t*this.trackRadius;g.setTopLeftPosition(o,T).setSize(C,M).setRadius(e)}var d=Rw(this.falseValueTrackColor,this.trackFillColor,s),x=nc(this.falseValueTrackFillAlpha,this.trackFillAlpha,s);g.fillStyle(d,x);var u=this.getShape("thumb");if(this.isSizeChanged){var l=i*this.thumbWidth,h=t*this.thumbHeight,n=t*this.thumbRadius;u.setSize(l,h).setRadius(n)}var r=nc(this.thumbLeftX,this.thumbRightX,s)*i;this.rtl&&(r=i-r);var f=t/2;u.setCenterPosition(r,f),u.fillStyle(this.thumbColor,this.thumbAlpha)}},Lw={setToggleAnimationDuration(i){return i===void 0&&(i=0),this.toggleAnimDuration=i,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new Us(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var qg={};Object.assign(qg,Mw,ww,Aw,Ow,Lw);var Fw=function(i){var t=.3*gr(i)+.59*mr(i)+.11*xr(i);return(t&255)<<16|(t&255)<<8|t&255};const zt=Phaser.Utils.Objects.GetValue,rc=Phaser.Utils.Objects.IsPlainObject,Eo=23730,bw=16777215;class _g extends Vs{constructor(t,s,g,C,M,o,T){rc(s)?(T=s,s=zt(T,"x",0),g=zt(T,"y",0),C=zt(T,"width",2),M=zt(T,"height",2),o=zt(T,"color",Eo)):rc(o)&&(T=o,o=zt(T,"color",Eo)),super(t,s,g,C,M),this.type="rexToggleSwitch",o===void 0&&(o=Eo),this.setTrackFillStyle(o,zt(T,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(zt(T,"falseValueTrackColor",Fw(o)),zt(T,"falseValueTrackFillAlpha",1)),this.setThumbStyle(zt(T,"thumbColor",bw),zt(T,"thumbAlpha",1)),this.setTrackSize(zt(T,"trackWidth",.9),zt(T,"trackHeight",.5)),this.setTrackRadius(zt(T,"trackRadius",this.trackHeight*.5));var e=zt(T,"thumbHeight",void 0),d=zt(T,"thumbWidth",e);d===void 0&&(d=this.trackHeight*.9),this.setThumbSize(d,e),this.setThumbRadius(zt(T,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(zt(T,"thumbLeft",.3),zt(T,"thumbRight",void 0)),this.setRTL(zt(T,"rtl",!1)),this.setToggleAnimationDuration(zt(T,"animationDuration",150)),this.buildShapes(),this.setValue(zt(T,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,s){s===void 0&&(s=this.toggleAnimDuration);var g=this.toggleAnimDuration;return this.toggleAnimDuration=s,this.value=t,this.toggleAnimDuration=g,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(_g.prototype,qg);const ac=Phaser.Utils.Objects.GetValue;class Pu extends _g{constructor(t,s,g,C,M,o,T){super(t,s,g,C,M,o,T),this._click=new us(this,ac(T,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(ac(T,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}st.register("toggleSwitch",function(i,t,s,g,C,M){var o=new Pu(this.scene,i,t,s,g,C,M);return this.scene.add.existing(o),o});it(window,"RexPlugins.UI.ToggleSwitch",Pu);const Dw={loadFromURL(i,t){var s=this,g=new Image;return g.onload=function(){s.width!==g.width||s.height!==g.height?s.resize(g.width,g.height):s.clear(),s.context.drawImage(g,0,0),s.updateTexture(),t&&t(),g.onload=null,g.src="",g.remove()},g.src=i,this},loadFromURLPromise(i){var t=this;return new Promise(function(s,g){t.loadFromURL(i,s)})},loadFromFile(i,t){var s=URL.createObjectURL(i);return this.loadFromURL(s,function(){URL.revokeObjectURL(s),t&&t()}),this},loadFromFilePromise(i){var t=this;return new Promise(function(s,g){t.loadFromFile(i,s)})}};class Ys extends hs{}Object.assign(Ys.prototype,Dw);st.register("canvas",function(i,t,s,g){var C=new Ys(this.scene,i,t,s,g);return this.scene.add.existing(C),C});it(window,"RexPlugins.UI.Canvas",Ys);const tn=Phaser.Utils.Objects.GetValue;class Mu extends hs{constructor(t,s,g,C,M,o){super(t,s,g),this.type="rexCircleMaskImage",this.setTexture(C,M,o)}setTexture(t,s,g){typeof s=="object"&&(g=s,s=void 0),typeof g=="string"&&(g={maskType:g});var C=tn(g,"maskType",0),M=tn(g,"backgroundColor",void 0),o=tn(g,"strokeColor",void 0),T=o!=null?10:0,e=tn(g,"strokeWidth",T);if(C===void 0?C=0:typeof C=="string"&&(C=Iw[C]),this._textureKey=t,this._frameName=s,C===null)return this.loadTexture(t,s),this.dirty=!0,this;var d=this.scene.sys.textures.getFrame(t,s);if(!d)return this;d.cutWidth!==this.width||d.cutHeight!==this.height?this.setCanvasSize(d.cutWidth,d.cutHeight):this.clear();var x=this.canvas,u=this.context,l=x.width,h=x.height;M!=null&&(u.fillStyle=M,u.fillRect(0,0,l,h)),u.save(),u.beginPath();var n=e/2;switch(C){case 1:var p=Math.floor(l/2),v=Math.floor(h/2),r=p-n,f=v-n;u.ellipse(p,v,r,f,0,0,2*Math.PI);break;case 2:var a=tn(g,"radius",0),c=tn(g,"iteration",void 0);jp(u,n,n,l-e,h-e,a,c);break;default:var p=Math.floor(l/2),v=Math.floor(h/2),m=Math.min(p,v)-n;u.arc(p,v,m,0,2*Math.PI);break}return o!=null&&(u.strokeStyle=o,u.lineWidth=e,u.stroke()),u.clip(),this.loadTexture(t,s),u.restore(),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}const Iw={circle:0,ellipse:1,roundRectangle:2};st.register("circleMaskImage",function(i,t,s,g,C){var M=new Mu(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.CircleMaskImage",Mu);const _n=Phaser.Utils.Objects.GetValue;class t0 extends hs{constructor(t,s,g,C,M,o){super(t,s,g),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(C,M,o)}setTexture(t,s,g){typeof s=="object"&&(g=s,s=void 0),typeof g=="string"&&(g={mask:{key:g}});var C=_n(g,"mask.key"),M=_n(g,"mask.frame"),o=_n(g,"mask.invertAlpha",!1),T=_n(g,"mask.scale"),e=_n(g,"backgroundColor");if(C){this._maskKey=C,this._maskFrame=M,this._maskScale=T;var d=C?this.scene.sys.textures.get(C):null;this.maskFrame=d?d.get(M):null}this._textureKey=t,this._frameName=s;var x=this.maskFrame;if(x===null)return this.loadTexture(t,s),this.dirty=!0,this;var u=e!=null;this.loadTexture(t,s);var l=this.canvas,h=this.context,n=l.width,r=l.height;h.save(),h.globalCompositeOperation=o?"destination-out":"destination-in";var f,a;this._maskScale!=null?(f=x.cutWidth*this._maskScale,a=x.cutHeight*this._maskScale):(f=n,a=r);var c=(n-f)/2,p=(r-a)/2;return this.drawFrame(this._maskKey,this._maskFrame,c,p,f,a),h.restore(),u&&(h.save(),h.globalCompositeOperation="destination-over",h.fillStyle=e,h.fillRect(0,0,n,r),h.restore()),this.dirty=!0,this}resize(t,s){return this.setDisplaySize(t,s),this}}st.register("alphaMaskImage",function(i,t,s,g,C){var M=new t0(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.AlphaMaskImage",t0);const Bw=Phaser.Math.Linear,hc=Phaser.Math.Percent,Gw={setValue(i,t,s){return i==null?this:(t!==void 0&&(i=hc(i,t,s)),this.value=i,this)},addValue(i,t,s){return t!==void 0&&(i=hc(i,t,s)),this.value+=i,this},getValue(i,t){var s=this.value;return i!==void 0&&(s=Bw(i,t,s)),s}},Nw=Phaser.Math.Percent;var zw=function(i){return this.easeValuePropName=i,this},Vw=function(i){return this.easeValueDuration=i,this},Uw=function(i){return this.easeFunction=i,this},Yw=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},Xw=function(i,t,s){return i==null?this:(t!==void 0&&(i=Nw(i,t,s)),this.easeValueTask===void 0&&(this.easeValueTask=new Us(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:i,duration:this.easeValueDuration,ease:this.easeFunction}),this)},Ww=function(i,t,s,g){return s===void 0&&(s=-1),g===void 0&&(g=0),this.easeValueTask===void 0&&(this.easeValueTask=new Us(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:i,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:s,repeatDelay:g}),this};const kw={setEaseValuePropName:zw,setEaseValueDuration:Vw,setEaseValueFunction:Uw,stopEaseValue:Yw,easeValueTo:Xw,easeValueRepeat:Ww},tr=Phaser.Utils.Objects.GetValue,Hw=Phaser.Math.Clamp;function Xs(i){class t extends i{bootProgressBase(g){this.eventEmitter=tr(g,"eventEmitter",this);var C=tr(g,"valuechangeCallback",null);if(C!==null){var M=tr(g,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",C,M)}return this.setEaseValuePropName("value").setEaseValueDuration(tr(g,"easeValue.duration",0)).setEaseValueFunction(tr(g,"easeValue.ease","Linear")),this}get value(){return this._value}set value(g){g=Hw(g,0,1);var C=this._value,M=C!=g;this.dirty=this.dirty||M,this._value=g,M&&this.eventEmitter.emit("valuechange",this._value,C,this.eventEmitter)}}return Object.assign(t.prototype,Gw,kw),t}const $w=Phaser.Math.RadToDeg,Kw={buildShapes(){this.addShape(new Xl().setName("track")).addShape(new gh().setName("bar")).addShape(new Xl().setName("center"))},updateShapes(){var i=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,g=this.radius-t,C=this.getShape("track");this.trackColor!=null&&t>0?C.setCenterPosition(i,i).setRadius(s).lineStyle(t,this.trackColor):C.reset();var M=this.getShape("bar");if(this.barColor!=null&&s>0){var o,T,e;if(this.value===1)o=!1,T=0,e=361;else{o=this.anticlockwise,T=$w(this.startAngle);var d=360*(o?1-this.value:this.value);e=d+T}M.setCenterPosition(i,i).setRadius(s).setAngle(T,e,o).lineStyle(t,this.barColor)}else M.reset();var x=this.getShape("center");this.centerColor&&g>0?x.setCenterPosition(i,i).setRadius(g).fillStyle(this.centerColor):x.reset()}},ni=Phaser.Utils.Objects.GetValue,Zw=Phaser.Utils.Objects.IsPlainObject,Jw=Phaser.Math.Clamp,jw=Phaser.Math.DegToRad(270);class mh extends Xs(Vs){constructor(t,s,g,C,M,o,T){Zw(s)&&(T=s,s=ni(T,"x",0),g=ni(T,"y",0),C=ni(T,"radius",1),M=ni(T,"barColor",void 0),o=ni(T,"value",0)),C===void 0&&(C=1);var e=C*2;super(t,s,g,e,e),this.type="rexCircularProgress",this.bootProgressBase(T),this.setRadius(C),this.setTrackColor(ni(T,"trackColor",void 0)),this.setBarColor(M),this.setCenterColor(ni(T,"centerColor",void 0)),this.setThickness(ni(T,"thickness",.2)),this.setStartAngle(ni(T,"startAngle",jw)),this.setAnticlockwise(ni(T,"anticlockwise",!1)),this.buildShapes(),this.setValue(o)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=Jw(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}}Object.assign(mh.prototype,Kw);st.register("circularProgress",function(i,t,s,g,C,M){var o=new mh(this.scene,i,t,s,g,C,M);return this.scene.add.existing(o),o});it(window,"RexPlugins.UI.CircularProgress",mh);var Po=function(i,t,s,g,C,M,o,T,e,d,x,u){d===void 0&&(d=0),x===void 0&&(x=2*Math.PI),u===void 0&&(u=!1),t.beginPath(),t.ellipse(s,g,C,M,0,d,x,u),o!=null&&(t.fillStyle=o,t.fill()),T!=null&&(t.strokeStyle=T,t.lineWidth=e,t.stroke())},Qw=function(i,t,s,g,C,M,o,T,e,d,x){e===void 0&&T!=null&&(e=2),d===void 0&&(d="start"),x===void 0&&(x="alphabetic"),t.font=M,t.textAlign=d,t.textBaseline=x,t.fillStyle=o,t.strokeStyle=T,t.lineWidth=e,t.lineCap="round",t.lineJoin="round",T!=null&&T!=="none"&&e>0&&t.strokeText(C,s,g),o!=null&&o!=="none"&&t.fillText(C,s,g)},qw=function(){var i=this.radius,t=this.thickness*this.radius,s=this.radius-t/2,g=this.radius-t,C=this.canvas,M=this.context;if(this.trackColor&&t>0&&(M.save(),Po(C,M,i,i,s,s,void 0,this.trackColor,t),M.restore()),this.barColor&&s>0){var o,T,e;if(this.value===1)o=!1,T=0,e=2*Math.PI;else{o=this.anticlockwise,T=this.startAngle;var d=2*Math.PI*(o?1-this.value:this.value);e=d+T}M.save(),Po(C,M,i,i,s,s,void 0,this.barColor,t,T,e,o),M.restore()}if(this.centerColor&&g>0){var x;this.centerColor2?(x=this.context.createRadialGradient(i,i,0,i,i,g),x.addColorStop(0,this.centerColor),x.addColorStop(1,this.centerColor2)):x=this.centerColor,M.save(),Po(C,M,i,i,g,g,x),M.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(M.save(),Qw(C,M,i,i,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),M.restore())};const kt=Phaser.Utils.Objects.GetValue,_w=Phaser.Utils.Objects.IsPlainObject,tA=Phaser.Math.Clamp,eA=Phaser.Math.DegToRad(270);class e0 extends Xs(hs){constructor(t,s,g,C,M,o,T){_w(s)&&(T=s,s=kt(T,"x",0),g=kt(T,"y",0),C=kt(T,"radius",1),M=kt(T,"barColor",void 0),o=kt(T,"value",0));var e=C*2;super(t,s,g,e,e),this.type="rexCircularProgressCanvas",this.bootProgressBase(T),this.setRadius(C),this.setTrackColor(kt(T,"trackColor",void 0)),this.setBarColor(M),this.setCenterColor(kt(T,"centerColor",void 0)),this.setThickness(kt(T,"thickness",.2)),this.setStartAngle(kt(T,"startAngle",eA)),this.setAnticlockwise(kt(T,"anticlockwise",!1)),this.setTextColor(kt(T,"textColor",void 0)),this.setTextStrokeColor(kt(T,"textStrokeColor",void 0),kt(T,"textStrokeThickness",void 0));var d=kt(T,"textFont",void 0);d?this.setTextFont(d):this.setTextFont(kt(T,"textSize","16px"),kt(T,"textFamily","Courier"),kt(T,"textStyle","")),this.setTextFormatCallback(kt(T,"textFormatCallback",void 0),kt(T,"textFormatCallbackScope",void 0)),this.setValue(o)}resize(t,s){return t=Math.floor(Math.min(t,s)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var s=t*2;this.resize(s,s)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=tA(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,s){return this.centerColor=t,this.centerColor2=s,this}get textColor(){return this._textColor}set textColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,s){return s===void 0&&(s=2),this.textStrokeColor=t,this.textStrokeThickness=s,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,s,g){var C;return s===void 0?C=t:C=g+" "+t+" "+s,this.textFont=C,this}setTextFormatCallback(t,s){return this.textFormatCallback=t,this.textFormatCallbackScope=s,this}updateTexture(){return this.clear(),qw.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var s;return this.textFormatCallbackScope?s=this.textFormatCallback(t):s=this.textFormatCallback.call(this.textFormatCallbackScope,t),s}}st.register("circularProgressCanvas",function(i,t,s,g,C,M){var o=new e0(this.scene,i,t,s,g,C,M);return this.scene.add.existing(o),o});it(window,"RexPlugins.UI.CircularProgressCanvas",e0);var iA=function(){var i=this.skewX,t=this.width-Math.abs(i),s=this.height,g=this.getShape("trackFill");g.fillStyle(this.trackColor),g.isFilled&&Mo(g,0,0,t,s,i).close();var C=this.getShape("bar");if(C.fillStyle(this.barColor),C.isFilled){var M,o;this.rtl?(M=t*(1-this.value),o=t):(M=0,o=t*this.value),Mo(C,M,0,o,s,i).close()}var T=this.getShape("trackStroke");T.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),T.isStroked&&Mo(T,0,0,t,s,i).end()},Mo=function(i,t,s,g,C,M){return M>=0?i.startAt(t+M,s).lineTo(g+M,s).lineTo(g,C).lineTo(t,C).lineTo(t+M,s):i.startAt(t,s).lineTo(g,s).lineTo(g-M,C).lineTo(t-M,C).lineTo(t,s),i};const ne=Phaser.Utils.Objects.GetValue,wo=Phaser.Utils.Objects.IsPlainObject;class wu extends Xs(Vs){constructor(t,s,g,C,M,o,T,e){wo(s)?(e=s,s=ne(e,"x",0),g=ne(e,"y",0),C=ne(e,"width",2),M=ne(e,"height",2),o=ne(e,"barColor",void 0),T=ne(e,"value",0)):wo(C)?(e=C,C=ne(e,"width",2),M=ne(e,"height",2),o=ne(e,"barColor",void 0),T=ne(e,"value",0)):wo(o)&&(e=o,o=ne(e,"barColor",void 0),T=ne(e,"value",0)),super(t,s,g,C,M,e),this.type="rexLineProgress",this.bootProgressBase(e),this.addShape(new An().setName("trackFill")).addShape(new An().setName("bar")).addShape(new An().setName("trackStroke")),this.setTrackColor(ne(e,"trackColor",void 0)),this.setBarColor(o),this.setTrackStroke(ne(e,"trackStrokeThickness",2),ne(e,"trackStrokeColor",void 0)),this.setSkewX(ne(e,"skewX",0)),this.setRTL(ne(e,"rtl",!1)),this.setValue(T)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}}var sA={updateShapes:iA};Object.assign(wu.prototype,sA);st.register("lineProgress",function(i,t,s,g,C,M,o){var T=new wu(this.scene,i,t,s,g,C,M,o);return this.scene.add.existing(T),T});it(window,"RexPlugins.UI.LineProgress",wu);var nA=function(i,t){i.save(),i.beginPath();var s=t[0];i.moveTo(s.x,s.y);for(var g=1,C=t.length;g<C;g++)s=t[g],i.lineTo(s.x,s.y);i.closePath(),i.restore()},Ao=function(i,t,s,g,C,M,o){o===void 0&&(o="round"),nA(t,s),t.lineJoin=o,g!=null&&(t.fillStyle=g,t.fill()),C!=null&&(t.strokeStyle=C,t.lineWidth=M,t.stroke())},rA=function(){var i=this.skewX,t=this.width-Math.abs(i),s=this.height,g=this.canvas,C=this.context;(this.trackColor||this.trackStrokeColor)&&oc(0,0,t,s,i,this.trackPoints);var M,o;if(this.barColor&&(this.rtl?(M=t*(1-this.value),o=t):(M=0,o=t*this.value),oc(M,0,o,s,i,this.barPoints)),this.trackColor&&(C.save(),Ao(g,C,this.trackPoints,this.trackColor),C.restore()),this.barColor){C.save();var T;if(this.barColor2){var e;if(this.isHorizontalGradient){var d=s/2;e=C.createLinearGradient(M,d,o,d)}else{var x=t/2;e=C.createLinearGradient(x,0,x,s)}e.addColorStop(0,this.rtl?this.barColor:this.barColor2),e.addColorStop(1,this.rtl?this.barColor2:this.barColor),T=e}else T=this.barColor;Ao(g,C,this.barPoints,T),C.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(C.save(),Ao(g,C,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),C.restore())},oc=function(i,t,s,g,C,M){M===void 0&&(M=[]),M.length=4;for(var o=0;o<4;o++)M[o]||(M[o]={});var T;return C>=0?(T=M[0],T.x=i+C,T.y=t,T=M[1],T.x=s+C,T.y=t,T=M[2],T.x=s,T.y=g,T=M[3],T.x=i,T.y=g):(T=M[0],T.x=i,T.y=t,T=M[1],T.x=s,T.y=t,T=M[2],T.x=s-C,T.y=g,T=M[3],T.x=i-C,T.y=g),M};const Ht=Phaser.Utils.Objects.GetValue,Ro=Phaser.Utils.Objects.IsPlainObject;class Au extends Xs(hs){constructor(t,s,g,C,M,o,T,e){Ro(s)?(e=s,s=Ht(e,"x",0),g=Ht(e,"y",0),C=Ht(e,"width",2),M=Ht(e,"height",2),o=Ht(e,"barColor",void 0),T=Ht(e,"value",0)):Ro(C)?(e=C,C=Ht(e,"width",2),M=Ht(e,"height",2),o=Ht(e,"barColor",void 0),T=Ht(e,"value",0)):Ro(o)&&(e=o,o=Ht(e,"barColor",void 0),T=Ht(e,"value",0)),super(t,s,g,C,M),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(e),this.setTrackColor(Ht(e,"trackColor",void 0)),this.setBarColor(o,Ht(e,"barColor2",void 0),Ht(e,"isHorizontalGradient",void 0)),this.setTrackStroke(Ht(e,"trackStrokeThickness",2),Ht(e,"trackStrokeColor",void 0)),this.setSkewX(Ht(e,"skewX",0)),this.setRTL(Ht(e,"rtl",!1)),this.setValue(T)}get trackColor(){return this._trackColor}set trackColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,s){return this.trackStrokeThickness=t,this.trackStrokeColor=s,this}get barColor(){return this._barColor}set barColor(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=gt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,s,g){return g===void 0&&(g=!0),this.barColor=t,this.barColor2=s,this.isHorizontalGradient=g,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),rA.call(this),super.updateTexture(),this}}st.register("circularProgressCanvas",function(i,t,s,g,C,M,o){var T=new Au(this.scene,i,t,s,g,C,M,o);return this.scene.add.existing(T),T});it(window,"RexPlugins.UI.LineProgressCanvas",Au);Phaser.Math.Wrap;const en=Phaser.Math.Linear;var aA=function(){var i=this.getShape("triangle"),t=this.padding,s=this.width-t.right,g=0+t.left,C=this.height-t.bottom,M=0+t.top,o=(g+s)/2,T=(M+C)/2,e={0:{a:{x:g,y:M},b:{x:s,y:T},c:{x:g,y:C}},1:{a:{x:g,y:M},b:{x:o,y:C},c:{x:s,y:M}},2:{a:{x:s,y:M},b:{x:g,y:T},c:{x:s,y:C}},3:{a:{x:g,y:C},b:{x:o,y:M},c:{x:s,y:C}}},d,x,u,l,h,n;if(this.previousDirection===void 0){var r=e[this.direction],f=r.a,a=r.b,c=r.c;d=f.x,x=f.y,u=a.x,l=a.y,h=c.x,n=c.y}else{var p=e[this.previousDirection],v=e[this.direction],m=this.easeDirectionProgress;d=en(p.a.x,v.a.x,m),x=en(p.a.y,v.a.y,m),u=en(p.b.x,v.b.x,m),l=en(p.b.y,v.b.y,m),h=en(p.c.x,v.c.x,m),n=en(p.c.y,v.c.y,m)}i.startAt(d,x).lineTo(u,l).lineTo(h,n),this.arrowOnly?i.end():i.close()};const hA=Phaser.Math.DegToRad,va=hA(120);var oA=function(t){var t=this.getShape("triangle"),s=this.width/2,g=this.height/2,C=Math.min(s,g)*this.radius,M=this.verticeRotation;t.startAt(s+C*Math.cos(M+va),g+C*Math.sin(M+va)).lineTo(s+C*Math.cos(M),g+C*Math.sin(M)).lineTo(s+C*Math.cos(M-va),g+C*Math.sin(M-va)),this.arrowOnly?t.end():t.close()};const lA={buildShapes(){this.addShape(new An().setName("triangle"))},updateShapes(){var i=this.getShape("triangle");this.arrowOnly?i.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):i.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?aA.call(this):oA.call(this)}},uA={setEaseDuration(i){return i===void 0&&(i=0),this.easeDuration=i,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new Us(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}},sn=Phaser.Utils.Objects.GetValue,dA=Phaser.Utils.Objects.IsPlainObject,fA=Phaser.Math.DegToRad,cA=Phaser.Math.RadToDeg;class xh extends Vs{constructor(t,s,g,C,M,o,T){var e,d,x,u,l,h,n,r;if(dA(s)){var f=s;s=f.x,g=f.y,C=f.width,M=f.height,o=f.color,T=f.alpha,e=f.strokeColor,d=f.strokeAlpha,x=f.strokeWidth,u=f.arrowOnly,l=f.direction,h=f.easeDuration,n=f.padding,r=f.radius}s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=C),u===void 0&&(u=!1),l===void 0&&(l=0),h===void 0&&(h=0),n===void 0&&(n=0),r===void 0&&(r=void 0),super(t,s,g,C,M),this.type="rexTriangle",this.setFillStyle(o,T),e!==void 0&&x===void 0&&(x=2),this.setStrokeStyle(x,e,d),this.setArrowOnly(u),this.setDirection(l,h),this.setPadding(n),this.setRadius(r),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=pA(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,s){return s!==void 0&&this.setEaseDuration(s),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,s,g,C){if(typeof t=="object"){var M=t,o=sn(M,"x",null);o!==null?(t=o,g=o):(t=sn(M,"left",0),g=sn(M,"right",t));var T=sn(M,"y",null);T!==null?(s=T,C=T):(s=sn(M,"top",0),C=sn(M,"bottom",s))}else t===void 0&&(t=0),s===void 0&&(s=t),g===void 0&&(g=t),C===void 0&&(C=s);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=s||this.padding.right!=g||this.padding.bottom!=C,this.padding.left=t,this.padding.top=s,this.padding.right=g,this.padding.bottom=C,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return cA(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=fA(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const vA={right:0,down:1,left:2,up:3};var pA=function(i){return typeof i=="string"&&(i=vA[i]),i=i%4,i};Object.assign(xh.prototype,lA,uA);st.register("triangle",function(i,t,s,g,C,M){var o=new xh(this.scene,i,t,s,g,C,M);return this.scene.add.existing(o),o});it(window,"RexPlugins.UI.Triangle",xh);const gA=Phaser.GameObjects.Zone,mA=Phaser.Utils.Array.Add,xA=Phaser.Utils.Array.Remove;class br extends gA{constructor(t,s,g,C,M){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=1),M===void 0&&(M=1),super(t,s,g,C,M),this.children=[]}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var s,g=this.children.length-1;g>=0;g--)s=this.children[g],!s.parentContainer&&!s.displayList&&s.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var s=this;return mA(this.children,t,0,function(g){g.once("destroy",s.onChildDestroy,s)},this),this}remove(t,s){var g=this;return xA(this.children,t,function(C){C.off("destroy",g.onChildDestroy,g),s&&C.destroy()}),this}onChildDestroy(t,s){this.remove(t,!1)}clear(t){for(var s=this,g,C=0,M=this.children.length;C<M;C++)g=this.children[C],g.off("destroy",s.onChildDestroy,s),t&&g.destroy();return this.children.length=0,this}}const lc=Phaser.GameObjects.Components;Phaser.Class.mixin(br,[lc.Alpha,lc.Flip]);var ke=function(i,t){var s;if(t===void 0)i.hasOwnProperty("rexContainer")&&(s=i.rexContainer.parent);else for(s=ke(i);s&&s.name!==t;)s=ke(s);return s},i0=function(i){for(var t=ke(i);t;)i=t,t=ke(t);return i};const yA=Phaser.Math.DegToRad,TA=Phaser.Math.RadToDeg;var Pt=function(i){if(!i.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return TA(this.rotation)},set:function(s){this.rotation=yA(s)}}),Object.defineProperty(t,"displayWidth",{get:function(){return i.width*this.scaleX},set:function(s){this.scaleX=s/i.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return i.height*this.scaleY},set:function(s){this.scaleY=s/i.height}}),i.rexContainer=t}return i.rexContainer};const CA={setParent(i,t){t===void 0&&(t=this);var s=Pt(i);return t?(s.parent=t,s.self=i):(s.parent=null,s.self=null),this},getParent(i,t){return typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=this),ke(i,t)},getTopmostParent(i){return i===void 0&&(i=this),i0(i)}},er=Phaser.Utils.Objects.GetValue,s0=br.prototype.add;var Oo=function(i,t){this.setParent(i);var s=Pt(i);return n0(s,t),this.resetChildState(i).updateChildVisible(i).updateChildActive(i).updateChildScrollFactor(i).updateChildMask(i),s0.call(this,i),this.addToParentContainer(i),this.addToRenderLayer(i),this},Lo=function(i,t){this.setParent(i);var s=Pt(i);return n0(s,t),s.x=i.x,s.y=i.y,s.rotation=i.rotation,s.scaleX=i.scaleX,s.scaleY=i.scaleY,s.alpha=i.alpha,s.visible=i.visible,s.active=i.active,this.updateChildPosition(i).updateChildAlpha(i).updateChildVisible(i).updateChildActive(i).updateChildScrollFactor(i).updateChildMask(i),s0.call(this,i),this.addToRenderLayer(i),this},n0=function(i,t){t===void 0&&(t=!0),typeof t=="boolean"?(i.syncPosition=t,i.syncRotation=t,i.syncScale=t,i.syncAlpha=t,i.syncScrollFactor=t):(i.syncPosition=er(t,"syncPosition",!0),i.syncRotation=er(t,"syncRotation",!0),i.syncScale=er(t,"syncScale",!0),i.syncAlpha=er(t,"syncAlpha",!0),i.syncScrollFactor=er(t,"syncScrollFactor",!0))};const SA={add(i){return Array.isArray(i)?this.addMultiple(i):Oo.call(this,i),this},pin(i,t){return Array.isArray(i)?this.addMultiple(i,t):Oo.call(this,i,t),this},addMultiple(i){for(var t=0,s=i.length;t<s;t++)Oo.call(this,i[t]);return this},addLocal(i){return Array.isArray(i)?this.addMultiple(i):Lo.call(this,i),this},pinLocal(i,t){return Array.isArray(i)?this.addMultiple(i,t):Lo.call(this,i,t),this},addLocalMultiple(i){for(var t=0,s=i.length;t<s;t++)Lo.call(this,i[t]);return this}},uc=br.prototype.remove,EA=br.prototype.clear,PA={remove(i,t){return ke(i)!==this?this:(this.setParent(i,null),t||this.removeFromRenderLayer(i),uc.call(this,i,t),this)},unpin(i,t){return ke(i)!==this?this:(this.setParent(i,null),t||this.removeFromRenderLayer(i),uc.call(this,i,t),this)},clear(i){for(var t=this.children,s=0,g=t.length;s<g;s++){var C=t[s];this.setParent(C,null),i||this.removeFromRenderLayer(C)}return EA.call(this,i),this}},MA={getLocalState(i){return Pt(i)},resetChildState(i){return this.resetChildPositionState(i).resetChildVisibleState(i).resetChildAlphaState(i).resetChildActiveState(i),this},resetChildrenState(i){for(var t=0,s=i.length;t<s;t++)this.resetChildState(i[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},dc=Phaser.Math.RotateAround,wA={worldToLocal(i){return i.x-=this.x,i.y-=this.y,dc(i,0,0,-this.rotation),i.x/=this.scaleX,i.y/=this.scaleY,i},localToWorld(i){return i.x*=this.scaleX,i.y*=this.scaleY,dc(i,0,0,this.rotation),i.x+=this.x,i.y+=this.y,i}};var Tr=function(i,t){return i===t?1:i/t};const AA={updateChildPosition(i){i.isRexContainerLite&&(i.syncChildrenEnable=!1);var t=Pt(i),s=t.parent;return t.syncPosition&&(i.x=t.x,i.y=t.y,s.localToWorld(i)),t.syncRotation&&(i.rotation=t.rotation+s.rotation),t.syncScale&&(i.scaleX=t.scaleX*s.scaleX,i.scaleY=t.scaleY*s.scaleY),i.isRexContainerLite&&(i.syncChildrenEnable=!0,i.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(i){var t=Pt(i),s=t.parent;return t.x=i.x,t.y=i.y,s.worldToLocal(t),t.scaleX=Tr(i.scaleX,s.scaleX),t.scaleY=Tr(i.scaleY,s.scaleY),t.rotation=i.rotation-s.rotation,this},setChildPosition(i,t,s){return i.x=t,i.y=s,this.resetChildPositionState(i),this},setChildLocalPosition(i,t,s){var g=Pt(i);return g.x=t,g.y=s,this.updateChildPosition(i),this},resetLocalPositionState(){var i=Pt(this).parent;return i&&i.resetChildPositionState(this),this}},RA=Phaser.Math.DegToRad,OA={updateChildRotation(i){var t=Pt(i),s=t.parent;return t.syncRotation&&(i.rotation=s.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(i){var t=Pt(i),s=t.parent;return t.rotation=i.rotation-s.rotation,this},setChildRotation(i,t){return i.rotation=t,this.resetChildRotationState(i),this},setChildAngle(i,t){return i.angle=t,this.resetChildRotationState(i),this},setChildLocalRotation(i,t){var s=Pt(i);return s.rotation=t,this.updateChildRotation(i),this},setChildLocalAngle(i,t){var s=Pt(i);return s.rotation=RA(t),this.updateChildRotation(i),this},resetLocalRotationState(){var i=Pt(this).parent;return i&&i.resetChildRotationState(this),this}},LA={updateChildScale(i){var t=Pt(i),s=t.parent;return t.syncScale&&(i.scaleX=s.scaleX*t.scaleX,i.scaleY=s.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(i){var t=Pt(i),s=t.parent;return t.scaleX=Tr(i.scaleX,s.scaleX),t.scaleY=Tr(i.scaleY,s.scaleY),this},setChildScale(i,t,s){return s===void 0&&(s=t),i.scaleX=t,i.scaleY=s,this.resetChildScaleState(i),this},setChildLocalScale(i,t,s){s===void 0&&(s=t);var g=Pt(i);return g.scaleX=t,g.scaleY=s,this.updateChildScale(i),this},setChildDisplaySize(i,t,s){return i.setDisplaySize(t,s),this.resetChildScaleState(i),this},resetLocalScaleState(){var i=Pt(this).parent;return i&&i.resetChildScaleState(this),this}},FA={updateChildVisible(i){var t=Pt(i),s=t.parent,g=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return i.visible=s.visible&&t.visible&&g,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(i){var t=Pt(i);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=i.visible,this},setChildVisible(i,t){return this.setChildLocalVisible(i,t),this},setChildLocalVisible(i,t){t===void 0&&(t=!0);var s=Pt(i);return s.visible=t,this.updateChildVisible(i),this},setChildMaskVisible(i,t){t===void 0&&(t=!0);var s=Pt(i);return s.maskVisible=t,this.updateChildVisible(i),this},resetLocalVisibleState(){var i=Pt(this).parent;return i&&i.resetChildVisibleState(this),this}},bA={updateChildAlpha(i){var t=Pt(i),s=t.parent;return t.syncAlpha&&(i.alpha=s.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(i){var t=Pt(i),s=t.parent;return t.alpha=Tr(i.alpha,s.alpha),this},setChildAlpha(i,t){return i.alpha=t,this.resetChildAlphaState(i),this},setChildLocalAlpha(i,t){var s=Pt(i);return s.alpha=t,this.updateChildAlpha(i),this},resetLocalAlphaState(){var i=Pt(this).parent;return i&&i.resetChildAlphaState(this),this}},DA={updateChildActive(i){var t=Pt(i),s=t.parent;return i.active=s.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(i){var t=Pt(i);return t.active=i.active,this},setChildActive(i,t){return i.active=t,this.resetChildActiveState(i),this},setChildLocalActive(i,t){t===void 0&&(t=!0);var s=Pt(i);return s.active=t,this.updateChildActive(i),this},resetLocalActiveState(){var i=Pt(this).parent;return i&&i.resetChildActiveState(this),this}},IA={updateChildScrollFactor(i){var t=Pt(i),s=t.parent;return t.syncScrollFactor&&i.setScrollFactor(s.scrollFactorX,s.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},BA={updateChildMask(i){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==i&&(i.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(i){return this.mask=i,this},clearMask(i){return i===void 0&&(i=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),i&&this.mask&&this.mask.destroy(),this}};var Rn=function(i,t){if(i.length<=1)return i;t===void 0&&(t=!1);var s=i[0].scene,g=s.sys.displayList;return g.depthSort(),t?i.sort(function(C,M){return g.getIndex(M)-g.getIndex(C)}):i.sort(function(C,M){return g.getIndex(C)-g.getIndex(M)}),i};const GA={setDepth(i,t){if(this.depth=i,!t&&this.children)for(var s=this.getAllChildren(),g=0,C=s.length;g<C;g++)s[g].depth=i;return this},swapDepth(i){var t=this.depth,s=i.depth;return this.setDepth(s),i.setDepth(t),this},incDepth(i){if(this.depth+=i,this.children)for(var t=this.getAllChildren(),s=0,g=t.length;s<g;s++)t[s].depth+=i;return this},bringToTop(){var i=this.displayList,t=this.getAllChildren([this]);Rn(t,!1);for(var s=0,g=t.length;s<g;s++){var C=t[s];i.exists(C)&&i.bringToTop(C)}return this},moveDepthBelow(i){var t=this.displayList;if(i.displayList!==t)return this;var s=this.getAllChildren([this]);Rn(s,!1);for(var g=0,C=s.length;g<C;g++){var M=s[g];if(t.exists(M)){t.moveBelow(i,M);break}}return this},moveDepthAbove(i){var t=this.displayList;if(i.displayList!==t)return this;var s=this.getAllChildren([this]);Rn(s,!0);for(var g=0,C=s.length;g<C;g++){var M=s[g];if(t.exists(M)){t.moveAbove(i,M);break}}return this}};var r0=function(i,t){var s=t(i);if(!s&&i.isRexContainerLite)for(var g=i.children,C=0,M=g.length;C<M;C++)r0(g[C],t)},Fo=function(i,t){for(var s=[i];s.length>0;){var g=s.shift(),C=t(g);!C&&g.isRexContainerLite&&s.push(...g.children)}};const Ss=Phaser.Utils.Array,NA={getChildren(i){if(!i)i=this.children;else for(var t=0,s=this.children.length;t<s;t++)i.push(this.children[t]);return i},getAllChildren(i){i===void 0&&(i=[]);var t=this;return Fo(t,function(s){s!==t&&i.push(s)}),i},getAllVisibleChildren(i){i===void 0&&(i=[]);var t=this;return Fo(t,function(s){if(s!==t){if(!s.visible)return!0;i.push(s)}}),i},bfs(i,t){return t===void 0&&(t=this),Fo(t,i),this},dfs(i,t){return t===void 0&&(t=this),r0(t,i),this},contains(i){var t=ke(i);return t?t===this?!0:this.contains(t):!1},getByName(i,t){if(t){for(var s=[this],g,C;s.length;){g=s.shift();for(var M=0,o=g.children.length;M<o;M++){if(C=g.children[M],C.name===i)return C;C.isRexContainerLite&&s.push(C)}}return null}else return Ss.GetFirst(this.children,"name",i)},getRandom(i,t){return Ss.GetRandom(this.children,i,t)},getFirst(i,t,s,g){return Ss.GetFirstElement(this.children,i,t,s,g)},getAll(i,t,s,g){return Ss.GetAll(this.children,i,t,s,g)},count(i,t,s,g){return Ss.CountAllMatching(this.children,i,t,s,g)},swap(i,t){return Ss.Swap(this.children,i,t),this},setAll(i,t,s,g){return Ss.SetAll(this.children,i,t,s,g),this}};var bo=function(i){for(var t=[],s=0,g=i.length;s<g;s++){var C=i[s];!C.hasOwnProperty("rexContainer")||t.push(C.rexContainer)}return t},zA=function(i){for(var t=0,s=i.length;t<s;t++){var g=i[t].scene;if(g)return g}return null},fc=function(i,t,s){if(!s.parent){i.remove();return}var g=s.parent,C=s.self;switch(t){case"x":case"y":g.updateChildPosition(C);break;case"angle":case"rotation":g.updateChildRotation(C);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":g.updateChildScale(C);break;case"alpha":g.updateChildAlpha(C);break;default:g.updateChildPosition(C),g.updateChildRotation(C),g.updateChildScale(C),g.updateChildAlpha(C);break}};const VA={tweenChild(i){var t=i.targets;Array.isArray(t)||(t=[t]);var s=this.scene||zA(t);if(!!s){i.targets=bo(t);var g=s.tweens.add(i);return g.on("update",fc),g}},tweenSelf(i){return i.targets=[this],this.tweenChild(i)},createTweenChildConfig(i){var t=i.targets;t&&(Array.isArray(t)||(t=[t]),i.targets=bo(t));var s=i.onUpdate;return i.onUpdate=function(g,C){s&&s(g,C),fc(g,void 0,C)},i},tween(i){var t=this.scene;return i.targets||(i.targets=this),t.tweens.add(i)},timelineChild(i){var t=i.targets;t&&(Array.isArray(t)||(t=[t]),i.targets=bo(t));for(var s=i.tweens,g=0,C=s.length;g<C;g++)s[g]=this.createTweenChildConfig(s[g]);var M=this.scene.tweens.timeline(i);return M}},UA={addToContainer(i){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return Rn(t),i.add(t),this._setParentContainerFlag=!1,this},addToLayer(i){return this.addToContainer(i),this},removeFromContainer(){if(!this.parentContainer)return this;var i=this.getAllChildren([this]).filter(function(t){return!!t.scene});return i.length===0?this:(this._setParentContainerFlag=!0,i.length>1&&(Rn(i),i.reverse()),this.parentContainer.remove(i),this._setParentContainerFlag=!1,this)},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var i=this.getParent();i;){var t=i.parentContainer;if(t)return t;i=i.getParent()}return null},addToParentContainer(i){if(!i.displayList)return this;var t=this.getParentContainer();return t?(i.isRexContainerLite?i.addToContainer(t):t.add(i),this):this}},YA={enableLayer(){if(this.privateRenderLayer)return this;var i=this.scene.add.layer();return this.moveDepthBelow(i),this.addToLayer(i),this.privateRenderLayer=i,this},getLayer(){return this.privateRenderLayer||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.privateRenderLayer)return this.privateRenderLayer;for(var i=this.getParent();i;){var t=i.privateRenderLayer;if(t)return t;i=i.getParent()}return null},addToRenderLayer(i){if(!i.displayList)return this;var t=this.getRenderLayer();if(!t)return this;i.isRexContainerLite?i.addToLayer(t):t.add(i);var s=Pt(i);return s.layer=t,this},removeFromRenderLayer(i){var t=Pt(i),s=t.layer;return s?(s.remove(i),t.layer=null,this):this}},cc=Phaser.Geom.Rectangle,XA=Phaser.Geom.Rectangle.Union;var WA=function(i,t){t===void 0?t=new cc:t===!0&&(Do===void 0&&(Do=new cc),t=Do),t.setTo(0,0,0,0);for(var s,g=!0,C=0,M=i.length;C<M;C++)if(s=i[C],!!s.getBounds){var o=pu(s,!0);g?(t.setTo(o.x,o.y,o.width,o.height),g=!1):XA(o,t,t)}return t},Do;const kA=Phaser.GameObjects.GameObject;var ds=function(i){return i instanceof kA},Es=Phaser.Utils.Objects.GetValue,HA=Phaser.Textures.DynamicTexture,$A=Phaser.Utils.String.UUID,Ru=function(i){if(!!i){var t=i.gameObjects,s=i.renderTexture,g=Es(i,"x",void 0),C=Es(i,"y",void 0),M=Es(i,"width",void 0),o=Es(i,"height",void 0),T=Es(i,"originX",0),e=Es(i,"originY",0),d=Es(i,"padding",0),x,u;if(M===void 0||o===void 0||g===void 0||C===void 0){var l=WA(t,!0),h=g!==void 0&&C!==void 0;h?(M=Math.max(g-l.left,l.right-g)*2,o=Math.max(C-l.top,l.bottom-C)*2,T=.5,e=.5):(g=l.x,C=l.y,M=l.width,o=l.height,T=0,e=0),x=l.x,u=l.y}else x=g+(0-T)*M,u=C+(0-e)*o;x-=d,u-=d,M+=d*2,o+=d*2;var n=t[0].scene;r&&!s&&(s=new HA(n.sys.textures,$A(),M,o)),s||(s=n.add.renderTexture(0,0,M,o)),s.setPosition&&s.setPosition(g,C),(s.width!==M||s.height!==o)&&s.setSize(M,o),s.setOrigin&&s.setOrigin(T,e),s.camera.setScroll(x,u),t=Rn(Gs(t)),s.draw(t);var r=i.saveTexture;if(r)if(ds(s))s.saveTexture(r);else{var f=s,a=f.manager;a.exists(f.key)?a.renameTexture(f.key,key):(f.key=key,a.list[key]=f,a.emit("addtexture",key,f),a.emit(`addtexture-${key}`,f))}return s}};const KA={snapshot(i){var t=this.scaleX,s=this.scaleY,g=t===1&&s===1;g||this.setScale(1),i===void 0&&(i={}),i.gameObjects=this.getAllVisibleChildren(),i.x=this.x,i.y=this.y,i.originX=this.originX,i.originY=this.originY;var C=Ru(i),M=!!C.scene;return g||(this.setScale(t,s),M&&C.setScale(t,s)),M?C:this}},vc=Phaser.Utils.Objects.GetValue;var ZA=function(i,t){var s=vc(t,"drawContainer",!0),g=vc(t,"children");return g===void 0&&(g=this.getAllVisibleChildren([this])),s||(g=g.filter(function(C){return!C.isRexContainerLite})),wg(g,i,t),this};const JA=Phaser.Math.RotateAround;var jA=function(i,t,s){s===void 0&&(s=t);var g={x:(t-i.originX)*i.displayWidth,y:(s-i.originY)*i.displayHeight};return JA(g,0,0,i.rotation),i.originX=t,i.originY=s,i.x=i.x+g.x,i.y=i.y+g.y,i},QA=function(i,t){this.syncChildrenEnable=!1,jA(this,i,t),this.syncChildrenEnable=!0;for(var s=this.getAllChildren(),g=0,C=s.length;g<C;g++)this.resetChildPositionState(s[g]);return this},a0={changeOrigin:QA,drawBounds:ZA};Object.assign(a0,CA,SA,PA,MA,wA,AA,OA,LA,FA,bA,DA,IA,BA,GA,NA,VA,UA,YA,KA);class be extends br{constructor(t,s,g,C,M,o){Array.isArray(C)&&(o=C,C=void 0,M=void 0),super(t,s,g,C,M),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this.privateRenderLayer=void 0,o&&this.add(o)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,s){return this.setSize(t,s),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return ke(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=ke(this);return t?t.setParentContainerFlag:!1}}Object.assign(be.prototype,a0);var yh=function(i){return i.hasOwnProperty("rexSizer")||(i.rexSizer={}),i.rexSizer};function qA(i){return i===void 0&&(i=this),yh(i)}var _A=function(i){var t=yh(i);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},tR=function(i){return i===void 0&&(i=Vn(this.scene)),this.left=Math.max(this.left,i.left),this.right=Math.min(this.right,i.right),this.top=Math.max(this.top,i.top),this.bottom=Math.min(this.bottom,i.bottom),this};const Te=Phaser.Display.Align,Un={center:Te.CENTER,left:Te.LEFT_CENTER,right:Te.RIGHT_CENTER,top:Te.TOP_CENTER,bottom:Te.BOTTOM_CENTER,"left-top":Te.TOP_LEFT,"left-center":Te.LEFT_CENTER,"left-bottom":Te.BOTTOM_LEFT,"center-top":Te.TOP_CENTER,"center-center":Te.CENTER,"center-bottom":Te.BOTTOM_CENTER,"right-top":Te.TOP_RIGHT,"right-center":Te.RIGHT_CENTER,"right-bottom":Te.BOTTOM_RIGHT};var Wl=new Phaser.GameObjects.Zone({sys:{queueDepthSort:ue,events:{once:ue}}},0,0,1,1);Wl.setOrigin(0);var Gi={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},Ou=function(i){var t=Mt(i);return i.y+t-t*i.originY},Lu=function(i){var t=At(i);return i.x-t*i.originX+t*.5},Fu=function(i,t){var s=Mt(i);return i.y=t-s+s*i.originY,i},bu=function(i,t){var s=At(i),g=s*i.originX;return i.x=t+g-s*.5,i},eR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),bu(i,Lu(t)+s),Fu(i,Ou(t)+g),i},Du=function(i){var t=At(i);return i.x-t*i.originX},Iu=function(i,t){var s=At(i);return i.x=t+s*i.originX,i},iR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Iu(i,Du(t)-s),Fu(i,Ou(t)+g),i},Bu=function(i){var t=At(i);return i.x+t-t*i.originX},Gu=function(i,t){var s=At(i);return i.x=t-s+s*i.originX,i},sR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Gu(i,Bu(t)+s),Fu(i,Ou(t)+g),i},Nu=function(i,t){var s=Mt(i),g=s*i.originY;return i.y=t+g-s*.5,i},nR=function(i,t,s){return bu(i,t),Nu(i,s)},zu=function(i){var t=Mt(i);return i.y-t*i.originY+t*.5},rR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),nR(i,Lu(t)+s,zu(t)+g),i},aR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Iu(i,Du(t)-s),Nu(i,zu(t)+g),i},hR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Gu(i,Bu(t)+s),Nu(i,zu(t)+g),i},Vu=function(i){var t=Mt(i);return i.y-t*i.originY},Uu=function(i,t){var s=Mt(i);return i.y=t+s*i.originY,i},oR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),bu(i,Lu(t)+s),Uu(i,Vu(t)-g),i},lR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Iu(i,Du(t)-s),Uu(i,Vu(t)-g),i},uR=function(i,t,s,g){return s===void 0&&(s=0),g===void 0&&(g=0),Gu(i,Bu(t)+s),Uu(i,Vu(t)-g),i},Ti=[];Ti[Gi.BOTTOM_CENTER]=eR;Ti[Gi.BOTTOM_LEFT]=iR;Ti[Gi.BOTTOM_RIGHT]=sR;Ti[Gi.CENTER]=rR;Ti[Gi.LEFT_CENTER]=aR;Ti[Gi.RIGHT_CENTER]=hR;Ti[Gi.TOP_CENTER]=oR;Ti[Gi.TOP_LEFT]=lR;Ti[Gi.TOP_RIGHT]=uR;var h0=function(i,t,s,g,C){return Ti[s](i,t,g,C)},Dr=function(i,t,s,g,C,M){Wl.setPosition(t,s).setSize(g,C),h0(i,Wl,M)};const nn=Phaser.Utils.Objects.GetValue,dR=Phaser.GameObjects.Group;var fR=function(i,t){var s=i.scene,g,C,M,o,T;if(typeof t=="number")g=t;else{g=nn(t,"color"),C=nn(t,"lineWidth");var e=nn(t,"name",!1);e&&(M=nn(e,"createTextCallback",cR),o=nn(e,"createTextCallbackScope",void 0),T=nn(e,"align","left-top"),typeof T=="string"&&(T=Un[T]))}if(g===void 0&&(g=16777215),C===void 0&&(C=1),M&&!i.children){i.children=new dR(s),i.once("destroy",function(r,f){r.children.destroy(!f),r.children=void 0});var d=i.clear.bind(i);i.clear=function(){d(),i.children.clear(!1,!0)}}for(var x=this.getAllShownChildren([this]),u,l,h=0,n=x.length;h<n;h++){if(u=x[h],u.getBounds||u.width!==void 0&&u.height!==void 0)Ps=pu(u,Ps);else continue;g!=null&&i.lineStyle(C,g).strokeRectShape(Ps),u.name&&M&&(o?l=M.call(o,s):l=M(s),l&&(l.setText(u.name),i.children.add(l),Dr(l,Ps.x,Ps.y,Ps.width,Ps.height,T)))}return this},cR=function(i,t,s){return i.add.text(0,0,"")},Ps=void 0;const pa=Phaser.Utils.Objects.GetValue;var Yn=function(i,t){return t===void 0&&(t={}),typeof i=="number"?(t.left=i,t.right=i,t.top=i,t.bottom=i):(t.left=pa(i,"left",0),t.right=pa(i,"right",0),t.top=pa(i,"top",0),t.bottom=pa(i,"bottom",0)),t};const vR=be.prototype.add;var Ir=function(i){return vR.call(this,i),this.sizerEventsEnable&&(i.emit("sizer.add",i,this),this.emit("add",i,this)),this};const pR={addBackground(i,t,s){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(s=t,t=void 0),t===void 0&&(t=0),Ir.call(this,i),this.backgroundChildren.push(i);var g=this.getSizerConfig(i);return g.padding=Yn(t),s!==void 0&&this.addChildrenMap(s,i),this},isBackground(i){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(i)!==-1}},gR=Phaser.Utils.Array.Remove,mR=be.prototype.remove;var Br=function(i,t){return this.isBackground(i)&&gR(this.backgroundChildren,i),mR.call(this,i,t),!t&&this.sizerEventsEnable&&(i.emit("sizer.remove",i,this),this.emit("remove",i,this)),this},On=function(i,t){var s=null;if(t===void 0)i.hasOwnProperty("rexContainer")&&(s=i.rexContainer.parent,s?s.isRexSizer||(s=On(s)):s=null);else for(s=On(i);s&&s.name!==t;)s=On(s);return s},xR=function(i){for(var t=On(i);t;)i=t,t=On(t);return i};const Gr={getParentSizer(i,t){return typeof i=="string"&&(t=i,i=void 0),i===void 0&&(i=this),On(i,t)},getTopmostSizer(i){return i===void 0&&(i=this),xR(i)}},yR=Phaser.Utils.Array.Remove,TR={removeFromParentSizer(){var i=Gr.getParentSizer(gameObject);return i&&i.remove(this),this},removeBackground(i,t){return this.backgroundChildren===void 0?this:this.getParentSizer(i)!==this?this:(yR(this.backgroundChildren,i),Br.call(this,i,t),this)},removeAllBackgrounds(i){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],i);return this}};var pc=function(i,t){return this.childrenMap[i]=t,this},CR=function(i){if(typeof i=="object"){var t=i;for(var i in this.childrenMap)if(this.childrenMap[i]===t)return delete this.childrenMap[i],this}return delete this.childrenMap[i],this},SR=function(i,t){if(typeof i=="string"&&(i=i.split(".")),i.length!==0){var s=i.shift(),g=null;if(s.charAt(0)==="#")s=s.substring(1),g=this.getByName(s,t);else if(s.indexOf("[")===-1)this.childrenMap&&(g=this.childrenMap[s]);else{var C=s.match(ER);if(C!=null&&this.childrenMap){var M=this.childrenMap[C[1]];M&&(g=M[C[2]])}}return i.length===0?g:g&&g.childrenMap?g.getElement(i):null}};const ER=/(\S+)\[(\d+)\]/i,PR={getInnerPadding(i){return Wa(this.space,i)},setInnerPadding(i,t){return es(this.space,i,t),this},getOuterPadding(i){return Wa(this.getSizerConfig(this).padding,i)},setOuterPadding(i,t){return es(this.getSizerConfig(this).padding,i,t),this},getChildOuterPadding(i,t){return typeof i=="string"&&(i=this.getElement(i)),Wa(this.getSizerConfig(i).padding,t)},setChildOuterPadding(i,t,s){return typeof i=="string"&&(i=this.getElement(i)),es(this.getSizerConfig(i).padding,t,s),this}};var Yu=function(i){return i===void 0&&(i=Math.max(this.childrenWidth,this.minWidth)),i},MR=function(i){var t,s;for(var g in this.sizerChildren)t=this.sizerChildren[g],t&&t.isRexSizer&&!t.ignoreLayout&&(s=this.getExpandedChildWidth(t,i),s=t.resolveWidth(s),t.resolveChildrenWidth(s))},Xu=function(i){var t=Math.max(this.childrenHeight,this.minHeight);return i===void 0&&(i=t),i},wR=function(i,t){},AR=function(i){var t;return i.isRexSizer?t=Math.max(i.minWidth,i.childrenWidth):i.minWidth!==void 0?t=i.minWidth:t=At(i),t},RR=function(i){var t;return i.isRexSizer?t=Math.max(i.minHeight,i.childrenHeight):i.minHeight!==void 0?t=i.minHeight:t=Mt(i),t},OR=function(i,t){return t},LR=function(i,t){return t},FR=function(){return 0},bR=function(){return 0},DR=function(i){i===void 0&&(i=[]);for(var t=i.length,s=this.getChildrenSizers(i),g=i.length,C=t;C<g;C++)s[C].getAllChildrenSizers(i);return i},IR=function(i){return i===void 0&&(i=[]),i};const BR={getShownChildren(i){i===void 0&&(i=[]);for(var t=this.children,s,g=0,C=t.length;g<C;g++)s=t[g],!(s.rexSizer&&s.rexSizer.hidden)&&i.push(s);return i},getAllShownChildren(i){i===void 0&&(i=[]);for(var t=[this];t.length>0;){var s=t.shift();s.rexSizer&&s.rexSizer.hidden||(s!==this&&i.push(s),s.isRexContainerLite&&t.push(...s.children))}return i}};var Nr=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var i=this.getChildrenSizers(),t,s=0,g=i.length;s<g;s++)t=i[s],!t.ignoreLayout&&t.preLayout()},GR=function(){var i=this.scaleX,t=this.scaleY,s=i===1&&t===1;return s||this.setScale(1),this.runLayout(),s||this.setScale(i,t),this},NR=function(i,t,s){if(this.ignoreLayout)return this;var g=!i;return g&&this.preLayout(),t=this.resolveWidth(t),g&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),s=this.resolveHeight(s),this.postResolveSize(t,s),this.resize(t,s),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},zR=function(){},VR=function(i,t,s){return this._anchor&&this._anchor.updatePosition(),this},o0=function(i){var t,s;for(var g in this.sizerChildren)t=this.sizerChildren[g],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(s=this.getExpandedChildWidth(t,i),t.isRexSizer&&(s=t.resolveWidth(s)),t.runWidthWrap(s));return this};class Wu extends ee{constructor(t,s){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(s)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var s,g;t.x!==void 0?(s=null,g=t.x):t.left!==void 0?(s=0,g=t.left):t.right!==void 0?(s=1,g=t.right):t.centerX!==void 0&&(s=.5,g=t.centerX);var C,M;t.y!==void 0?(C=null,M=t.y):t.top!==void 0?(C=0,M=t.top):t.bottom!==void 0?(C=1,M=t.bottom):t.centerY!==void 0&&(C=.5,M=t.centerY);var o,T;g!==void 0&&(g=g.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),o=parseFloat(g[0])/100,T=g[1]===""?0:parseFloat(g[1]));var e,d;M!==void 0&&(M=M.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),e=parseFloat(M[0])/100,d=M[1]===""?0:parseFloat(M[1]));var x=t.width,u,l;x!==void 0&&(x=x.split("%"),u=parseFloat(x[0])/100,l=x[1]===""?0:parseFloat(x[1]));var h=t.height,n,r;h!==void 0&&(h=h.split("%"),n=parseFloat(h[0])/100,r=h[1]===""?0:parseFloat(h[1])),this.setAlign(s,C),this.setPercentage(o,e),this.setOffset(T,d),this.setSizePercentage(u,n),this.setSizePadding(l,r);var f=t.onResizeCallback,a=t.onResizeCallbackScope;f!==void 0&&this.setResizeCallback(f,a);var c=t.onUpdateViewportCallback,p=t.onUpdateViewportCallbackScope;return c!==void 0&&this.setUpdateViewportCallback(c,p),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,s){return this.alignX=t,this.alignY=s,this}setPercentage(t,s){return this.percentageX=t,this.percentageY=s,this}setOffset(t,s){return this.offsetX=t,this.offsetY=s,this}setSizePercentage(t,s){return this.percentageWidth=t,this.percentageHeight=s,this}setSizePadding(t,s){return this.paddingWidth=t,this.paddingHeight=s,this}setResizeCallback(t,s){return this.onResizeCallback=t,this.onResizeCallbackScope=s,this}setUpdateViewportCallback(t,s){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=s,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,s=this.onResizeCallbackScope,g=this.anchorWidth,C=this.anchorHeight;if(!(g===void 0&&C===void 0||!t)){var M=this.parent;g===void 0&&(g=M.width),C===void 0&&(C=M.height),s?t.call(s,g,C,M,this):t(g,C,M,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=Vn(this.scene,t,this.viewport);var s=this.viewport,g=this.onUpdateViewportCallback,C=this.onUpdateViewportCallbackScope;g&&(C?g.call(C,s,this.parent,this):g(s,this.parent,this))}}var UR=function(i){i===void 0&&(i={});var t=i.hasOwnProperty("width"),s=i.hasOwnProperty("height"),g=i.hasOwnProperty("onResizeCallback");return(t||s)&&!g&&(i.onResizeCallback=function(C,M,o){t&&o.setMinWidth(C),s&&o.setMinHeight(M),o.layout()}),this._anchor===void 0?this._anchor=new Wu(this,i):this._anchor.resetFromJSON(i),this};const YR=Phaser.Utils.Objects.GetValue,rn=Phaser.Utils.Objects.GetAdvancedValue,gc=Phaser.Math.Linear;class Cr extends zs{constructor(t,s){super(t,s),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(YR(t,"mode",0)),this.setScaleRange(rn(t,"start",void 0),rn(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=XR[t]),this.mode=t,this}setScaleRange(t,s){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=rn(t,"x",this.parent.scaleX),this.startY=rn(t,"y",this.parent.scaleY)),typeof s=="number"?(this.endX=s,this.endY=s):(this.endX=rn(s,"x",void 0),this.endY=rn(s,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var s=this.repeat;return this.mode===2&&s!==-1&&(s=(s+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(s),super.start(),this}updateGameObject(t,s){var g=s.t;s.isOddIteration&&(g=1-g),g=this.easeFn(g),this.hasScaleX&&(t.scaleX=gc(this.startX,this.endX,g)),this.hasScaleY&&(t.scaleY=gc(this.startY,this.endY,g))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const XR={stop:0,destroy:1,yoyo:2};var ku=function(i,t,s,g,C){g===void 0&&(g="Cubic");var M,o;switch(s){case 0:case"x":M={x:0},o={x:i.scaleX};break;case 1:case"y":M={y:0},o={y:i.scaleY};break;default:M=0,o=i.scale;break}var T={mode:0,start:M,end:o,duration:t,ease:g};return C===void 0?C=new Cr(i,T):C.resetFromJSON(T),C.restart(),C},l0=function(i,t,s,g,C,M){g===void 0&&(g="Linear"),C instanceof Cr&&(M=C,C=void 0),C===void 0&&(C=!0);var o={};switch(o.mode=C?1:0,s){case 0:case"x":o.end={x:0};break;case 1:case"y":o.end={y:0};break;default:o.end=0;break}return o.duration=t,o.ease=g,M===void 0?M=new Cr(i,o):M.resetFromJSON(o),M.restart(),M},WR=function(i,t,s,g,C,M,o){s===void 0&&(s=1.2),g===void 0&&(g=0),M===void 0&&(M="Cubic");var T,e;switch(C){case 0:case"x":T={x:i.scaleX},e={x:s};break;case 1:case"y":T={y:i.scaleX},e={y:s};break;default:T=i.scaleX,e=s;break}var d={mode:2,start:T,end:e,duration:t/2,ease:M,repeat:g};return o===void 0?o=new Cr(i,d):o.resetFromJSON(d),o.restart(),o};const Io=Phaser.Utils.Objects.IsPlainObject;var Bo=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Gr.getParentSizer(i);s&&s.resetChildPositionState(i)})};const Hu={popUp(i,t,s){if(Io(i)){var g=i;i=g.duration,t=g.orientation,s=g.ease}var C=this._scaleBehavior===void 0;return this._scaleBehavior=ku(this,i,t,s,this._scaleBehavior),C&&Bo(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(i,t,s){return this.popUp(i,t,s),ae(this._scaleBehavior)},scaleDownDestroy(i,t,s,g){if(Io(i)){var C=i;i=C.duration,t=C.orientation,s=C.ease,g=C.destroy}var M=this._scaleBehavior===void 0;return this._scaleBehavior=l0(this,i,t,s,g,this._scaleBehavior),M&&Bo(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(i,t,s,g){return this.scaleDownDestroy(i,t,s,g),ae(this._scaleBehavior)},scaleDown(i,t,s){return this.scaleDownDestroy(i,t,s,!1),this},scaleDownPromise(i,t,s){return this.scaleDown(i,t,s),ae(this._scaleBehavior)},scaleYoyo(i,t,s,g,C){if(Io(i)){var M=i;i=M.duration,t=M.peakValue,s=M.repeat,g=M.orientation,C=M.ease}var o=this._scaleBehavior===void 0;return this._scaleBehavior=WR(this,i,t,s,g,C,this._scaleBehavior),o&&Bo(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(i,t,s,g,C){return this.scaleYoyo(i,t,s,g,C),ae(this._scaleBehavior)}},kR=Phaser.Utils.Objects.GetValue,mc=Phaser.Utils.Objects.GetAdvancedValue,HR=Phaser.Math.Linear;class kl extends zs{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(kR(t,"mode",0)),this.setAlphaRange(mc(t,"start",this.parent.alpha),mc(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=$R[t]),this.mode=t,this}setAlphaRange(t,s){return this.alphaStart=t,this.alphaEnd=s,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,s){var g=s.t;s.isOddIteration&&(g=1-g),t.alpha=HR(this.alphaStart,this.alphaEnd,g)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const $R={stop:0,destroy:1,yoyo:2},KR=Phaser.Utils.Objects.IsPlainObject;var Th=function(i,t,s,g){var C,M;KR(s)?(C=s.start,M=s.end):M=s,C===void 0&&(C=0),M===void 0&&(M=1);var o={mode:0,start:C,end:M,duration:t};return g===void 0?g=new kl(i,o):g.resetFromJSON(o),g.restart(),g},Ch=function(i,t,s,g){s instanceof kl&&(g=s,s=void 0),s===void 0&&(s=!0);var C={mode:s?1:0,end:0,duration:t};return g===void 0?g=new kl(i,C):g.resetFromJSON(C),g.restart(),g};const xc=Phaser.Utils.Objects.IsPlainObject;var yc=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Gr.getParentSizer(i);s&&s.resetChildAlphaState(i)})};const ZR={fadeIn(i,t){if(xc(i)){var s=i;i=s.duration,t=s.alpha}var g=this._fade===void 0;return this._fade=Th(this,i,t,this._fade),g&&yc(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(i,t){return this.fadeIn(i,t),ae(this._fade)},fadeOutDestroy(i,t){if(xc(i)){var s=i;i=s.duration,t=s.destroy}var g=this._fade===void 0;return this._fade=Ch(this,i,t,this._fade),g&&yc(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(i,t){return this.fadeOutDestroy(i,t),ae(this._fade)},fadeOut(i){return this.fadeOutDestroy(i,!1),this},fadeOutPromise(i){return this.fadeOut(i),ae(this._fade)}},JR=Phaser.Utils.Objects.GetValue,an=Phaser.Utils.Objects.GetAdvancedValue,Tc=Phaser.Math.Linear;class Qa extends zs{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(JR(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var s=an(t,"x",void 0),g=an(t,"y",void 0);this.setTargetPosition(s,g)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=jR[t]),this.mode=t,this}setTargetPosition(t,s){if(typeof t=="number"||typeof s=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=s;else{var g=t;this.startX=an(g,"startX",void 0),this.startY=an(g,"startY",void 0),this.endX=an(g,"endX",void 0),this.endY=an(g,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,s){var g=s.t;s.isOddIteration&&(g=1-g),g=this.easeFn(g),this.hasMoveX&&(t.x=Tc(this.startX,this.endX,g)),this.hasMoveY&&(t.y=Tc(this.startY,this.endY,g))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const jR={stop:0,destroy:1,yoyo:2};var qa=function(i,t){if(typeof i=="number")return i;var s=i[0],g=parseFloat(i.substr(2));switch(s){case"+":return t+g;case"-":return t-g;case"*":return t*g;case"/":return t/g}},u0=function(i,t,s,g,C,M,o){M instanceof Qa&&(o=M,M=void 0),M===void 0&&(M=!1);var T={};return T.mode=M?1:0,s!==void 0&&(T.startX=i.x,T.endX=qa(s,i.x)),g!==void 0&&(T.startY=i.y,T.endY=qa(g,i.y)),T.duration=t,T.ease=C===void 0?"Linear":C,o===void 0?o=new Qa(i,T):o.resetFromJSON(T),o.restart(),o},d0=function(i,t,s,g,C,M,o){M instanceof Qa&&(o=M,M=void 0),M===void 0&&(M=!1);var T={};return T.mode=M?1:0,s!==void 0&&(T.startX=qa(s,i.x),T.endX=i.x),g!==void 0&&(T.startY=qa(g,i.y),T.endY=i.y),T.duration=t,T.ease=C===void 0?"Linear":C,o===void 0?o=new Qa(i,T):o.resetFromJSON(T),o.restart(),o};const Cc=Phaser.Utils.Objects.IsPlainObject,Sc=Phaser.Math.Distance.Between;var Ec=function(i,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(i.emit(t.completeEventName,i),t.completeEventName=void 0)}),t.on("update",function(){var s=Gr.getParentSizer(i);s&&s.resetChildPositionState(i)})};const QR={moveFrom(i,t,s,g,C){if(Cc(i)){var M=i;t=M.x,s=M.y,M.hasOwnProperty("speed")?i=Sc(t,s,this.x,this.y)*1e3/M.speed:i=M.duration,g=M.ease}var o=this._easeMove===void 0;return this._easeMove=d0(this,i,t,s,g,C,this._easeMove),o&&Ec(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(i,t,s,g,C){return this.moveFrom(i,t,s,g,C),ae(this._easeMove)},moveFromDestroy(i,t,s,g){return this.moveFrom(i,t,s,g,!0),this},moveFromDestroyPromise(i,t,s,g){return this.moveFromDestroy(i,t,s,g),ae(this._easeMove)},moveTo(i,t,s,g,C){if(Cc(i)){var M=i;t=M.x,s=M.y,M.hasOwnProperty("speed")?i=Sc(t,s,this.x,this.y)*1e3/M.speed:i=M.duration,g=M.ease}var o=this._easeMove===void 0;return this._easeMove=u0(this,i,t,s,g,C,this._easeMove),o&&Ec(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(i,t,s,g,C){return this.moveTo(i,t,s,g,C),ae(this._easeMove)},moveToDestroy(i,t,s,g){return this.moveTo(i,t,s,g,!0),this},moveToDestroyPromise(i,t,s,g){return this.moveToDestroy(i,t,s,g,!0),ae(this._easeMove)},moveStop(i){return this._easeMove?(this._easeMove.stop(i),this):this}},Ie=Phaser.Utils.Objects.GetValue;class $u extends dh{constructor(t,s){super(t,s),this.timer=new Cg,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Ie(t,"timer")),this.setEnable(Ie(t,"enable",!0)),this.setMode(Ie(t,"mode",1)),this.isRunning=Ie(t,"isRunning",!1),this.setMagnitudeMode(Ie(t,"magnitudeMode",1)),this.setAxisMode(Ie(t,"axis",0)),this.setDuration(Ie(t,"duration",500)),this.setMagnitude(Ie(t,"magnitude",10)),this.ox=Ie(t,"ox",void 0),this.oy=Ie(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=qR[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=tO[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=_R[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,s){if(typeof t!="number"){var g=t;s=Ie(g,"magnitude",void 0),t=Ie(g,"duration",void 0)}return s!==void 0&&this.setMagnitude(s),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,s){return this.start(t,s),this}update(t,s){if(!this.isRunning||!this.enable)return this;var g=this.parent;if(!g.active)return this;if(this.timer.update(t,s),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=g.x,this.oy=g.y);var C=this.magnitude;this.magnitudeMode===1&&(C*=1-this.timer.t);var M=Math.random()*Math.PI*2,o=this.ox+Math.cos(M)*C,T=this.oy+Math.sin(M)*C;switch(this.axisMode){case 1:g.x=o;break;case 2:g.y=T;break;default:g.x=o,g.y=T;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}}const qR={effect:0,behavior:1},_R={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},tO={constant:0,decay:1},eO=Phaser.Utils.Objects.IsPlainObject;var iO=function(i,t){t.on("complete",function(){i.emit("shake.complete",i)})};const sO={shake(i,t,s){if(eO(i)){var g=i;i=g.duration,t=g.magnitude,s=g.magnitudeMode}return this._shake===void 0&&(this._shake=new $u(this,{mode:0,magnitudeMode:1}),iO(this,this._shake)),i!==void 0&&this._shake.setDuration(i),t!==void 0&&this._shake.setMagnitude(t),s!==void 0&&this._shake.setMagnitudeMode(s),this._shake.shake(),this},shakePromise(i,t){return this.shake(i,t),ae(this._shake)}},Pc=Phaser.Utils.Objects.IsPlainObject;class nO extends ee{constructor(t,s){super(t,s),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var s=this.easeTasks[t];return s===void 0&&(s=new Us(this.parent),this.easeTasks[t]=s,s.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),s}easeTo(t,s,g,C){if(Pc(t)){var M=t;t=M.key,s=M.value,g=M.duration,C=M.ease;var o=M.speed;g===void 0&&o!==void 0&&(g=Math.abs(s-this.parent.data.values[t])/o*1e3)}g===void 0&&(g=1e3),C===void 0&&(C="Linear");var T=this.getEaseTask(t);return T.restart({key:t,to:s,duration:g,ease:C}),this}easeFrom(t,s,g,C){if(Pc(t)){var M=t;t=M.key,s=M.value,g=M.duration,C=M.ease;var o=M.speed;g===void 0&&o!==void 0&&(g=Math.abs(s-this.parent.data.values[t])/o*1e3)}g===void 0&&(g=1e3),C===void 0&&(C="Linear");var T=this.getEaseTask(t);return T.restart({key:t,from:s,duration:g,ease:C}),this}stopEase(t,s){s===void 0&&(s=!0);var g=this.easeTasks[t];return g&&g.stop(s),this}stopAll(t){t===void 0&&(t=!0);for(var s in this.easeTasks)this.stopEase(s,t);return this}}var rO=function(i,t){t.on("complete",function(s){i.emit(`easedata.${s}.complete`,i),i.emit("easedata.complete",s,i)})};const aO={easeDataTo(i,t,s,g){return this._easeData||(this._easeData=new nO(this),rO(this,this._easeData)),this._easeData.easeTo(i,t,s,g),this},easeDataToPromise(i,t,s,g){return this.easeDataTo(i,t,s,g),vh(this._easeData,`complete-${i}`)},stopEaseData(i,t){return this._easeData?(this._easeData.stopEase(i,t),this):this},stopAllEaseData(i){return this._easeData?(this._easeData.stopAll(i),this):this}};var Qi=function(i){f0(i,!1)},qi=function(i){f0(i,!0)},Ku=function(i){if(!i)return!1;var t=yh(i);return!t.hidden},f0=function(i,t){if(!!i){var s=yh(i);s.hidden=t;var g=ke(i);g?g.setChildVisible(i,!t):i.setVisible(!t)}};const hO={show(i){return i===void 0&&(i=this),Qi(i),this},hide(i){return i===void 0&&(i=this),qi(i),this},isShow(i){return i===void 0&&(i=this),Ku(i)}},oO=["next","exit","enter"];class c0{constructor(t){var s=Ft(t,"states",void 0);s&&this.addStates(s);var g=Ft(t,"extend",void 0);if(g)for(var C in g)(!this.hasOwnProperty(C)||this[C]===void 0)&&(this[C]=g[C]);var M=Ft(t,"eventEmitter",void 0),o=Ft(t,"EventEmitterClass",void 0);this.setEventEmitter(M,o),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Ft(t,"enable",!0)),this.start(Ft(t,"start",void 0));var s=Ft(t,"init",void 0);return s&&s.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var s="exit_"+this._prevState,g=this[s];g&&g.call(this),this.emit(s,this)}if(this._stateLock=!1,this._state!=null){var C="enter_"+this._state,M=this[C];M&&M.call(this),this.emit(C,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,s=this["next_"+this.state];return s&&(typeof s=="string"?t=s:t=s.call(this)),this.goto(t),this}get stateProperties(){return oO}addState(t,s){typeof t!="string"&&(s=t,t=s.name);for(var g=this.stateProperties,C=0,M=g.length;C<M;C++){var o=g[C],T=s[o];T&&(this[`${o}_${t}`]=T)}return this}addStates(t){if(Array.isArray(t))for(var s=0,g=t.length;s<g;s++)this.addState(t[s]);else for(var C in t)this.addState(C,t[C]);return this}runMethod(t,s,g,C,M,o){var T=this[t+"_"+this.state];if(!!T){var e=arguments.length;switch(e){case 1:return T.call(this);case 2:return T.call(this,s);case 3:return T.call(this,s,g);case 4:return T.call(this,s,g,C);case 5:return T.call(this,s,g,C,M);case 6:return T.call(this,s,g,C,M,o)}for(var d=new Array(e-1),x=1;x<e;x++)d[x-1]=arguments[x];return T.apply(this,d)}}}Object.assign(c0.prototype,zn);var Go=function(i,t,s,g,C){C===void 0&&(C=!1);var M=i._events[t];if(!M)return!1;for(var o=0,T=M.length;o<T;o++){var e=M[o];if(e.fn===s&&e.context===g&&e.once===C)return!0}return!1};const lO=["next","exit","enter","update","preupdate","postupdate"];class Ni extends c0{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Ft(t,"scene",void 0),this}get stateProperties(){return lO}update(t,s){this.runMethod("update",t,s)}preupdate(t,s){this.runMethod("preupdate",t,s)}postupdate(t,s){this.runMethod("postupdate",t,s)}startUpdate(t){t||(t=this._scene);var s=t.sys.events;return Go(s,"update",this.update,this)?this:(this._scene=t,s.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var s=t.sys.events;return Go(s,"preupdate",this.preupdate,this)?this:(this._scene=t,s.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var s=t.sys.events;return Go(s,"postupdate",this.postupdate,this)?this:(this._scene=t,s.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}class uO extends Ni{constructor(t,s){super(s),this.parent=t;var g=s.initState||"IDLE";this.start(g)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var s=t.runTransitionInCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var s=t.runTransitionOutCallback();t.delayCall(s,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}}var dO=function(i,t,s,g,C){var M=i.scene,o=M.time.delayedCall(t,function(){M.game.events.once("poststep",function(){s.call(g,C)})});return o};const fO={delayCall(i,t,s){return this.delayCallTimer=dO(this,i,t,s),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},cO={setTransitInTime(i){return this.transitInTime=i,this},setTransitOutTime(i){return this.transitOutTime=i,this},setTransitInCallback(i){return i||(i=ue),this.transitInCallback=i,this},setTransitOutCallback(i){return i||(i=ue),this.transitOutCallback=i,this}},vO={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(i,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?i:this.parent;var s=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=s,this}},pO={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(i,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?i:this.parent;var s=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=s,this}};var v0={};Object.assign(v0,fO,cO,vO,pO);const hn=Phaser.Utils.Objects.GetValue;class Sh extends ee{constructor(t,s){super(t,s),this.setTransitInTime(hn(s,"duration.in",200)),this.setTransitOutTime(hn(s,"duration.out",200)),this.setTransitInCallback(hn(s,"transitIn")),this.setTransitOutCallback(hn(s,"transitOut")),this.oneShotMode=hn(s,"destroy",!1),this.delayCallTimer=void 0,this._state=new uO(this,{eventEmitter:!1,initState:hn(s,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(Sh.prototype,v0);const gO=Phaser.GameObjects.Rectangle;class Zu extends gO{constructor(t,s,g){super(t,0,0,2,2,s,1),this.setAlpha(g),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,s=t.sys.scale.gameSize,g=t.sys.cameras.main,C=s.width,M=s.height,o=1/g.zoom,T=C/2,e=M/2,d=C*o,x=M*o;(this.x!==T||this.y!==e)&&this.setPosition(T,e),(this.width!==d||this.height!==x)&&this.setSize(d,x).setOrigin(.5)}}const No=Phaser.Utils.Objects.GetValue;class Eh extends ee{constructor(t,s){super(t,{eventEmitter:!1}),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setHitAreaMode(No(t,"hitAreaMode",0)),this.setEnable(No(t,"enable",!0)),this.setStopMode(No(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,s,g,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerup",function(t,s,g,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointermove",function(t,s,g,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerover",function(t,s,g,C){this.stopAllLevels&&C.stopPropagation()},this).on("pointerout",function(t,s){this.stopAllLevels&&s.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=mO[t]);var s=this.parent;return s.input&&s.removeInteractive(),t===0?s.setInteractive():s.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var mO={default:0,fullWindow:1};const Mc=Phaser.Utils.Objects.GetValue;class Ju extends Zu{constructor(t,s){var g=Mc(s,"color",0),C=Mc(s,"alpha",.8);super(t,g,C),this.touchEventStop=new Eh(this,{hitAreaMode:1})}}var xO=function(i,t){var s=i.scene,g=new Ju(s,t);return s.add.existing(g),i.isRexContainerLite?(i.moveDepthBelow(g),i.pin(g,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1})):s.children.moveBelow(g,i),g};const ga={popUp(i,t){i._modalScaleSave!==void 0?(i.scaleX=i._modalScaleSave,i.scaleY=i._modalScaleSave):i._modalScaleSave=i.scaleX,ku(i,t)},scaleDown(i,t){l0(i,t,void 0,void 0,!1)},fadeIn(i,t){i._modalAlphaSave!==void 0?i.alpha=i._modalAlphaSave:i._modalAlphaSave=i.alpha,Th(i,t)},fadeOut(i,t){Ch(i,t,!1)}};var yO=function(i,t){i._modalAlphaSave!==void 0?i.alpha=i._modalAlphaSave:i._modalAlphaSave=i.alpha,Th(i,t,i.alpha)},TO=function(i,t){Ch(i,t,!1)},Sr=function(i,t,s,g,C){if(!i||g&&!g(i,t,s))return!1;var M=pu(i,!0);return!(!M.contains(t,s)||C&&!C(i,t,s))};const ri=Phaser.Utils.Objects.GetValue;class CO extends Sh{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=Hi.popUp),s.transitOut==null&&(s.transitOut=Hi.scaleDown),s.destroy=ri(s,"destroy",!0),super(t,s);var g=ri(s,"cover");this.cover=g!==!1?xO(t,g):void 0,this.cover&&(this.setCoverTransitInCallback(ri(g,"transitIn",yO)),this.setCoverTransitOutCallback(ri(g,"transitOut",TO)));var C=ri(s,"touchOutsideClose",!1),M=ri(s,"duration.hold",-1),o=ri(s,"timeOutClose",M>=0),T=ri(s,"anyTouchClose",!1),e=ri(s,"manualClose",!1);e&&(C=!1,T=!1,o=!1),T&&(C=!1),o?this.setDisplayTime(M):this.setDisplayTime(-1),T?this.once("open",this.anyTouchClose,this):C&&this.once("open",this.touchOutsideClose,this),ri(s,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Sr(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),s=this.cover;return s&&this.coverTransitInCallback&&this.coverTransitInCallback(s,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),s=this.cover;return s&&this.coverTransitOutCallback&&this.coverTransitOutCallback(s,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Hi[t]),t){case Hi.popUp:t=ga.popUp;break;case Hi.fadeIn:t=ga.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Hi[t]),t){case Hi.scaleDown:t=ga.scaleDown;break;case Hi.fadeOut:t=ga.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}}const Hi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var ju=function(i,t){var s=new CO(i,t);return s.on("open",function(){i.emit("modal.open",s)}),s.on("close",function(g){i.emit("modal.close",g,s)}),i.on("modal.requestClose",s.requestClose,s),s},SO=function(i,t){var s=ju(i,t);return new Promise(function(g,C){s.once("close",function(M){g(M)})})},p0=function(i,t){i.emit("modal.requestClose",t)},ns=function(i){return i&&typeof i=="function"};const Qu={modal(i,t){return ns(i)&&(t=i,i=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,i),this._modalBehavior=ju(this,i)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(i){var t=this;return new Promise(function(s,g){t.modal(i,s)})},modalClose(i){return p0(this,i),this}};var Ph=function(i,t,s,g){if(t)return Sr(i,t.worldX,t.worldY,s,g);for(var C=i.scene.input.manager,M=C.pointersTotal,o=C.pointers,T=0;T<M;T++)if(t=o[T],Sr(i,t.worldX,t.worldY,s,g))return!0;return!1},EO=function(i,t){return(ds(i)||typeof i=="string")&&(t=i,i=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),Ph(t,i)},ei=function(i){return Object.prototype.toString.call(i)==="[object Array]"},Hl=function(i,t,s,g,C){return Sr(i,t,s,PO(g),MO(C))},wc=function(i){var t=i.rexSizer&&i.rexSizer.hidden;return!t},PO=function(i){return i?function(t,s,g){return wc(t)?(i(t,s,g),!0):!1}:wc},MO=function(i){return i},wO=function(i,t,s,g,C){if(ns(s)||(C=s,s=void 0,g=void 0),C===void 0&&(this.sizerChildren?C=this.sizerChildren:C=this.children),ei(C)){for(var M,o=0,T=C.length;o<T;o++)if(M=C[o],Hl(M,i,t,s,g))return M}else{var M;for(var e in C)if(M=C[e],Hl(M,i,t,s,g))return M}return null},ii=function(i,t,s){!i||t===void 0&&s===void 0||(i.resize?(t===void 0&&(t=i.width),s===void 0&&(s=i.height),i.resize(t,s)):(t!==void 0&&(i.displayWidth=t),s!==void 0&&(i.displayHeight=s)))},AO=function(i,t){return t===void 0?t={}:t===!0&&(t=RO),t.x=i.x,t.y=i.y,t.scaleX=i.scaleX,t.scaleY=i.scaleY,t.width=i.width,t.height=i.height,t.displayWidth=i.displayWidth,t.displayHeight=i.displayHeight,t},RO={},zr=function(i){this.sizerEventsEnable&&(AO(i,this.getChildPrevState(i)),this.layoutedChildren.push(i))},Vr=function(i,t,s,g,C,M,o,T){Dr(i,t,s,g,C,M),o!==void 0&&(i.x+=o),T!==void 0&&(i.y+=T),this.resetChildPositionState(i),this.sizerEventsEnable&&i.emit("sizer.postlayout",i,this)};const OO=Phaser.Display.Align.CENTER;var LO=function(){if(this.backgroundChildren!==void 0)for(var i=this.backgroundChildren,t=this.left,s=this.top,g=this.width,C=this.height,M,o,T,e,d,x,u,l=0,h=i.length;l<h;l++)M=i[l],o=M.rexSizer,!o.hidden&&(T=o.padding,zr.call(this,M),e=t+T.left,d=s+T.top,x=g-T.left-T.right,u=C-T.top-T.bottom,ii(M,x,u),Vr.call(this,M,e,d,x,u,OO))},FO=function(i,t){var s=typeof i;if(s==="string"){var g=i;if(i=this.getElement(g),!i)return console.error(`Can get element '${g}'`),this}else(i===void 0||s!="object")&&(t=i,i=this);return t===void 0&&(t=!0),i.input&&i.input._dragTopmostSizer?i.input.draggable=t:t&&(i.setInteractive(),i.scene.input.setDraggable(i),i.on("drag",function(C,M,o){var T=this.getTopmostSizer();T.x+=M-i.x,T.y+=o-i.y,T.emit("sizer.drag",C,M,o)},this).on("dragstart",function(C,M,o){var T=this.getTopmostSizer();T.emit("sizer.dragstart",C,M,o)},this).on("dragend",function(C,M,o,T){var e=this.getTopmostSizer();e.emit("sizer.dragend",C,M,o,T)},this),i.input._dragTopmostSizer=!0),this};const g0={onClick(i,t,s,g){return i?(typeof i=="function"&&(g=s,s=t,t=i,i=this),i._click===void 0&&(i._click=new us(i,g)),i._click.on("click",t,s),this):this},offClick(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._click===void 0?this:(i._click.off("click",t,s),this)},enableClick(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._click===void 0?this:(i._click.setEnable(t),this)},disableClick(i){return i&&typeof i!="object"&&(i=this),i._click===void 0?this:(i._click.setEnable(!1),this)}},ma=Phaser.Utils.Objects.GetValue;class qu extends ee{constructor(t,s){super(t,s),this._enable=void 0;var g=ma(s,"inputConfig",void 0);g&&t.setInteractive(g),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(ma(t,"enable",!0)),this.setMode(ma(t,"mode",1)),this.setClickInterval(ma(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var s=this.parent.scene;s.input.off("pointerdown",this.onPress,this),s.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var s=t?"enable":"disable";this.emit(s,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=bO[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var s=this.parent,g=s.input?xu:Ph;return g(s,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,s){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,s),this;var g=this.lastClickTime;return g!==void 0&&t-g<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,s),this)}}const bO={press:0,pointerdown:0,release:1,pointerup:1},DO={onClickOutside(i,t,s,g){return i?(typeof i=="function"&&(g=s,s=t,t=i,i=this),i._clickOutside===void 0&&(i._clickOutside=new qu(i,g)),i._clickOutside.on("clickoutside",t,s),this):this},offClickOutside(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._clickOutside===void 0?this:(i._clickOutside.off("clickoutside",t,s),this)},enableClickOutside(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._clickOutside===void 0?this:(i._clickOutside.setEnable(t),this)},disableClickOutside(i){return i&&typeof i!="object"&&(i=this),i._clickOutside===void 0?this:(i._clickOutside.setEnable(!1),this)}};class IO extends Ni{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,s){this.remainderTime-=s,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>s?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const zo=Phaser.Utils.Objects.GetValue;class In extends ee{constructor(t,s){super(t,s),this._enable=void 0,this.cooldown=new IO,this.parent.setInteractive(zo(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(zo(t,"enable",!0)),this.setCooldown(zo(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,s,g){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,s){this.cooldown.update(t,s),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}const BO={isPointerInBounds(i){return i===void 0?i=this:typeof i=="string"&&(i=this.getElement(i)),i?Ph(i):!1},onTouching(i,t,s,g){return i?(typeof i=="function"&&(g=s,s=t,t=i,i=this),i._inTouching===void 0&&(i._inTouching=new In(i,g)),i._inTouching.on("intouch",t,s),this):this},offTouching(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._inTouching===void 0?this:(i._inTouching.off("intouch",t,s),this)},onTouchingEnd(i,t,s,g){return i?(typeof i=="function"&&(g=s,s=t,t=i,i=this),i._inTouching===void 0&&(i._inTouching=new In(i,g)),i._inTouching.on("touchend",t,s),this):this},offTouchingEnd(i,t,s){return typeof i=="function"&&(s=t,t=i,i=this),i._inTouching===void 0?this:(i._inTouching.off("touchend",t,s),this)},enableTouching(i,t){return i&&typeof i!="object"&&(t=i,i=this),i._inTouching===void 0?this:(i._inTouching.setEnable(t),this)},disableTouching(i){return i&&typeof i!="object"&&(i=this),i._inTouching===void 0?this:(i._inTouching.setEnable(!1),this)}};var m0=function(i,t,s){for(var g,C=0,M=i.length;C<M;C++)if(g=i[C],!!Hl(g,t,s))return g.pointToChild(t,s);return null},xi=function(i,t,s,g,C,M,o){var T;C===void 0?T=g:T=m0(s,g,C),T&&i.emit(t,T,M,o)};const GO=Phaser.Utils.Objects.GetValue;var NO=function(i){var t=GO(i,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",zO,this))},zO=function(i,t,s,g){var C=this._childrenInteractive;xi(C.eventEmitter,`${C.eventNamePrefix}down`,C.targetSizers,i.worldX,i.worldY,i,g)};const VO=Phaser.Utils.Objects.GetValue;var UO=function(i){var t=VO(i,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",YO,this))},YO=function(i,t,s,g){var C=this._childrenInteractive;xi(C.eventEmitter,`${C.eventNamePrefix}up`,C.targetSizers,i.worldX,i.worldY,i,g)};const XO=Phaser.Utils.Objects.GetValue;var WO=function(i){var t=XO(i,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",Ac,this).on("pointerover",Ac,this).on("pointerout",kO,this))},Ac=function(i,t,s,g){var C=this._childrenInteractive,M=m0(C.targetSizers,i.worldX,i.worldY),o=C.lastOverChild;M&&o&&M===o||(C.lastOverChild=M,xi(C.eventEmitter,`${C.eventNamePrefix}out`,C.targetSizers,o,void 0,i,g),xi(C.eventEmitter,`${C.eventNamePrefix}over`,C.targetSizers,M,void 0,i,g))},kO=function(i,t){var s=this._childrenInteractive,g=s.lastOverChild;s.lastOverChild=null,xi(s.eventEmitter,`${s.eventNamePrefix}out`,s.targetSizers,g,void 0,i,t)};const HO=Phaser.Utils.Objects.GetValue;var $O=function(i){var t=HO(i,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var s=this._childrenInteractive;this._click=new us(this,t),this._click.on("click",function(g,C,M,o){xi(s.eventEmitter,`${s.eventNamePrefix}click`,s.targetSizers,M.worldX,M.worldY,M,o)},this)}};const Vo=Phaser.Utils.Objects.GetValue;class Mh extends dh{constructor(t,s){var g=Tg(t);g===t&&(t=void 0),super(g,s),this.gameObject=t,t&&t.setInteractive(Vo(s,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Vo(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Vo(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Uo,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,s){if(!!this.enable&&this.pointer===void 0){var g=this.bounds?this.bounds.contains(t.x,t.y):!0;!g||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=Rc,this.gameObject===void 0&&(this.isTouchingAnyObject=s.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;!s||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Uo,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,g=this.pointer===t;!g&&s||(g&&!s?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===Rc&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Uo,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,s){}postUpdate(t,s){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=KO,this}}const Uo=0,Rc=1,KO="IDLE",Ms=Phaser.Utils.Objects.GetValue,ZO=Phaser.Math.Distance.Between;class wh extends Mh{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.stop(),g.tapsCount=0,g.x=0,g.y=0,g.worldX=0,g.worldY=0},exit:function(){var M=g.lastPointer;g.x=M.x,g.y=M.y,g.worldX=M.worldX,g.worldY=M.worldY}},BEGIN:{enter:function(){g.start(),g.tapsCount=0,g.emit("tappingstart",g,g.gameObject,g.lastPointer)}},RECOGNIZED:{enter:function(){g.start(),g.emit("tap",g,g.gameObject,g.lastPointer),g.emit(`${g.tapsCount}tap`,g,g.gameObject,g.lastPointer)}}},init:function(){this.state=ws},eventEmitter:!1};this.setRecongizedStateObject(new Ni(C))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Ms(t,"time",250)),this.setTapInterval(Ms(t,"tapInterval",200)),this.setDragThreshold(Ms(t,"threshold",9)),this.setTapOffset(Ms(t,"tapOffset",10));var s=Ms(t,"taps",void 0);return s!==void 0?this.setTaps(s):(this.setMaxTaps(Ms(t,"maxTaps",void 0)),this.setMinTaps(Ms(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case ws:this.state=on;break;case on:var t=this.lastPointer,s=ZO(t.upX,t.upY,t.x,t.y);s>this.tapOffset&&(this.state=ln,this.state=on);break;case ln:this.state=on;break}}onDragEnd(){this.state===on&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=ln))}onDrag(){this.state!==ws&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ws)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===on){var g=this.lastPointer;if(g.isDown){var C=t-g.downTime;C>this.holdTime&&(this.state=ws)}else{var M=t-g.upTime;M>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=ln:this.state=ws)}}}postUpdate(t,s){!this.isRunning||!this.enable||this.state===ln&&(this.state=ws)}get isTapped(){return this.state===ln}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,s){return s===void 0&&(s=t),this.setMinTaps(t).setMaxTaps(s),this}}const ws="IDLE",on="BEGIN",ln="RECOGNIZED",Oc=Phaser.Utils.Objects.GetValue;class Ah extends Mh{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.x=0,g.y=0,g.worldX=0,g.worldY=0},exit:function(){var M=g.lastPointer;g.x=M.x,g.y=M.y,g.worldX=M.worldX,g.worldY=M.worldY}},BEGIN:{enter:function(){g.start()},exit:function(){g.stop()}},RECOGNIZED:{enter:function(){g.emit("pressstart",g,g.gameObject,g.lastPointer)},exit:function(){g.emit("pressend",g,g.gameObject,g.lastPointer)}}},init:function(){this.state=xa},eventEmitter:!1};this.setRecongizedStateObject(new Ni(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Oc(t,"threshold",9)),this.setHoldTime(Oc(t,"time",251)),this}onDragStart(){this.state=Lc,this.holdTime===0&&(this.state=Yo)}onDragEnd(){this.state=xa}onDrag(){this.state!==xa&&this.pointer.getDistance()>this.dragThreshold&&(this.state=xa)}preUpdate(t,s){if(!(!this.isRunning||!this.enable)&&this.state===Lc){var g=t-this.pointer.downTime;g>=this.holdTime&&(this.state=Yo)}}get isPressed(){return this.state===Yo}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const xa="IDLE",Lc="BEGIN",Yo="RECOGNIZED",JO=Phaser.Utils.Objects.GetValue;class x0 extends Mh{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{},BEGIN:{enter:function(){var M=g.pointer;g.startX=M.x,g.startY=M.y,g.startWorldX=M.worldX,g.startWorldY=M.worldY}},RECOGNIZED:{enter:function(){g.emit("panstart",g,g.gameObject,g.lastPointer)},exit:function(){var M=g.lastPointer;g.endX=M.x,g.endY=M.y,g.endWorldX=M.worldX,g.endWorldY=M.worldY,g.emit("panend",g,g.gameObject,g.lastPointer)}}},init:function(){this.state=Fc},eventEmitter:!1};this.setRecongizedStateObject(new Ni(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(JO(t,"threshold",10)),this}onDragStart(){this.state=bc,this.dragThreshold===0&&(this.state=ya)}onDragEnd(){this.state=Fc}onDrag(){switch(this.state){case bc:this.pointer.getDistance()>=this.dragThreshold&&(this.state=ya);break;case ya:var t=this.pointer.position,s=this.pointer.prevPosition;this.dx=t.x-s.x,this.dy=t.y-s.y;var g=this.pointer;this.x=g.x,this.y=g.y,this.worldX=g.worldX,this.worldY=g.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===ya}setDragThreshold(t){return this.dragThreshold=t,this}}const Fc="IDLE",bc="BEGIN",ya="RECOGNIZED",jO=Phaser.Math.Distance.Between,QO=Phaser.Math.Angle.Between,qO={getDt:function(){var i=Cu(this.scene);return i},getVelocity:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=jO(t.x,t.y,i.x,i.y),g=s/(this.getDt()*.001);return g},getVelocityX:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(i.x-t.x),g=s/(this.getDt()*.001);return g},getVelocityY:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=Math.abs(i.y-t.y),g=s/(this.getDt()*.001);return g},getVelocityAngle:function(){var i=this.pointer.position,t=this.pointer.prevPosition,s=QO(t.x,t.y,i.x,i.y);return s}},_O={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var tL=function(i,t,s){switch(s===void 0?s={}:s===!0&&(s=eL),s.left=!1,s.right=!1,s.up=!1,s.down=!1,i=(i+360)%360,t){case 0:i<180?s.down=!0:s.up=!0;break;case 1:i>90&&i<=270?s.left=!0:s.right=!0;break;case 2:i>45&&i<=135?s.down=!0:i>135&&i<=225?s.left=!0:i>225&&i<=315?s.up=!0:s.right=!0;break;case 3:i>22.5&&i<=67.5?(s.down=!0,s.right=!0):i>67.5&&i<=112.5?s.down=!0:i>112.5&&i<=157.5?(s.down=!0,s.left=!0):i>157.5&&i<=202.5?s.left=!0:i>202.5&&i<=247.5?(s.left=!0,s.up=!0):i>247.5&&i<=292.5?s.up=!0:(i>292.5&&i<=337.5&&(s.up=!0),s.right=!0);break}return s},eL={};const Xo=Phaser.Utils.Objects.GetValue,iL=Phaser.Math.RadToDeg;class Ur extends Mh{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.x=0,g.y=0,g.worldX=0,g.worldY=0},exit:function(){var M=g.lastPointer;g.x=M.x,g.y=M.y,g.worldX=M.worldX,g.worldY=M.worldY}},BEGIN:{enter:function(){g.validDrag=!1}},RECOGNIZED:{enter:function(){g.start(),g.updateDirectionStates(),g.emit("swipe",g,g.gameObject,g.lastPointer)},exit:function(){g.stop(),g.clearDirectionStates()}}},init:function(){this.state=Wo},eventEmitter:!1};this.setRecongizedStateObject(new Ni(C)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Xo(t,"threshold",10)),this.setVelocityThreshold(Xo(t,"velocityThreshold",1e3)),this.setDirectionMode(Xo(t,"dir","8dir")),this}onDragStart(){this.state=Dc}onDragEnd(){this.state=Wo}onDrag(){this.state===Dc&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=ko))}postUpdate(t,s){!this.isRunning||!this.enable||this.state===ko&&(this.state=Wo)}get isSwiped(){return this.state===ko}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=_O[t]),this.dirMode=t,this}updateDirectionStates(){var t=iL(this.getVelocityAngle());return tL(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Ur.prototype,qO);const Wo="IDLE",Dc="BEGIN",ko="RECOGNIZED",Ho=Phaser.Utils.Objects.GetValue,sL=Phaser.Utils.Array.SpliceOne,nL=Phaser.Math.Distance.Between,rL=Phaser.Math.Angle.Between;class _u{constructor(t,s){var g=t.input.manager.pointersTotal-1;g<2&&t.input.addPointer(2-g),this.scene=t,this.setEventEmitter(Ho(s,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.setEnable(Ho(t,"enable",!0)),this.bounds=Ho(t,"bounds",void 0),this.tracerState=Ta,this.pointers.length=0,Oi(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,Oi(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!s){var g=this.pointers.indexOf(t);if(g===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Ta:this.tracerState=sr,this.onDrag1Start();break;case sr:this.tracerState=ai,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!s){var g=this.pointers.indexOf(t);if(g!==-1)switch(delete this.movedState[t.id],sL(this.pointers,g),this.tracerState){case sr:this.tracerState=Ta,this.onDrag1End();break;case ai:this.tracerState=sr,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var s=this.bounds?this.bounds.contains(t.x,t.y):!0,g=this.pointers.indexOf(t)!==-1;if(!(!g&&s)){if(g&&!s)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case sr:this.onDrag1();break;case ai:this.onDrag2();break}}}}dragCancel(){return this.tracerState===ai&&this.onDrag2End(),this.pointers.length=0,Oi(this.movedState),this.tracerState=Ta,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==ai)return 0;var t=this.pointers[0],s=this.pointers[1];return nL(t.x,t.y,s.x,s.y)}get angleBetween(){if(this.tracerState!==ai)return 0;var t=this.pointers[0],s=this.pointers[1];return rL(t.x,t.y,s.x,s.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var s=t.position,g=t.prevPosition;ir.x=s.x-g.x,ir.y=s.y-g.y}else ir.x=0,ir.y=0;return ir}get centerX(){if(this.tracerState!==ai)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.x+s.x)/2}get centerY(){if(this.tracerState!==ai)return 0;var t=this.pointers[0].position,s=this.pointers[1].position;return(t.y+s.y)/2}get prevCenterX(){if(this.tracerState!==ai)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+s.x)/2}get prevCenterY(){if(this.tracerState!==ai)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,s=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+s.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=aL,this}}Object.assign(_u.prototype,zn);var ir={};const Ta=0,sr=1,ai=2,aL="IDLE",hL=Phaser.Utils.Objects.GetValue;class y0 extends _u{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.prevDistance=void 0,g.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){g.emit("pinchstart",g)},exit:function(){g.emit("pinchend",g)}}},init:function(){this.state=Ic},eventEmitter:!1};this.setRecongizedStateObject(new Ni(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(hL(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=Bc,this.dragThreshold===0&&(this.state=Ca)}onDrag2End(){this.state=Ic}onDrag2(){switch(this.state){case Bc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Ca}break;case Ca:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===Ca}setDragThreshold(t){return this.dragThreshold=t,this}}const Ic="IDLE",Bc="BEGIN",Ca="RECOGNIZED",oL=Phaser.Math.RotateAround;var Gc=function(i,t,s,g){return oL(i,t,s,g),i.rotation+=g,i},lL=function(i,t,s,g){return g===void 0?g={}:g===!0&&(g=uL),s.getWorldPoint(i,t,g),g},uL={},dL=function(i,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var s=this.movementCenterX,g=this.movementCenterY,C=lL(this.centerX,this.centerY,t,!0),M=C.x,o=C.y,T=this.rotation;if(Array.isArray(i))for(var e=i,d=0,x=e.length;d<x;d++)i=e[d],i.x+=s,i.y+=g,Gc(i,M,o,T);else i.x+=s,i.y+=g,Gc(i,M,o,T);return this};const fL=Phaser.Utils.Objects.GetValue,$o=Phaser.Math.Angle.WrapDegrees,Nc=Phaser.Math.Angle.ShortestBetween,Ko=Phaser.Math.RadToDeg,cL=Phaser.Math.DegToRad;class td extends _u{constructor(t,s){super(t,s);var g=this,C={states:{IDLE:{enter:function(){g.prevAngle=void 0,g.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){g.emit("rotatestart",g)},exit:function(){g.emit("rotateend",g)}}},init:function(){this.state=zc},eventEmitter:!1};this.setRecongizedStateObject(new Ni(C))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(fL(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=$o(Ko(this.angleBetween)),this.state=Vc,this.dragThreshold===0&&(this.state=Sa)}onDrag2End(){this.state=zc}onDrag2(){switch(this.state){case Vc:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=$o(Ko(this.angleBetween));this.angle=Nc(this.prevAngle,t),this.prevAngle=t,this.state=Sa}break;case Sa:var t=$o(Ko(this.angleBetween));this.angle=Nc(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===Sa}get rotation(){return cL(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var vL={spinObject:dL};Object.assign(td.prototype,vL);const zc="IDLE",Vc="BEGIN",Sa="RECOGNIZED",pL=Phaser.Utils.Objects.GetValue;var gL=function(i){var t=pL(i,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._tap=new wh(this,t),this._tap.on("tap",function(g,C,M){xi(s.eventEmitter,`${s.eventNamePrefix}${g.tapsCount}tap`,s.targetSizers,g.worldX,g.worldY,M)},this)}};const mL=Phaser.Utils.Objects.GetValue;var xL=function(i){var t=mL(i,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var s=this._childrenInteractive;this._press=new Ah(this,t),this._press.on("pressstart",function(g,C,M){xi(s.eventEmitter,`${s.eventNamePrefix}pressstart`,s.targetSizers,g.worldX,g.worldY,M)},this).on("pressend",function(g,C,M){xi(s.eventEmitter,`${s.eventNamePrefix}pressend`,s.targetSizers,g.worldX,g.worldY,M)},this)}};const yL=Phaser.Utils.Objects.GetValue;var TL=function(i){var t=yL(i,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var s=this._childrenInteractive;this._swipe=new Ur(this,t),this._swipe.on("swipe",function(g,C,M){var o=g.left?"left":g.right?"right":g.up?"up":"down";xi(s.eventEmitter,`${s.eventNamePrefix}swipe${o}`,s.targetSizers,g.worldX,g.worldY,M)},this)}};const Zo=Phaser.Utils.Objects.GetValue;var ed=function(i,t){return i.setInteractive(),i._childrenInteractive={targetSizers:Zo(t,"targets",[i]),eventEmitter:Zo(t,"eventEmitter",i),eventNamePrefix:Zo(t,"inputEventPrefix","child.")},NO.call(i,t),UO.call(i,t),WO.call(i,t),$O.call(i,t),gL.call(i,t),xL.call(i,t),TL.call(i,t),i},CL=function(i){return ed(this,i),this},SL=function(){for(var i=this.getAllChildren([this]),t=0,s=i.length;t<s;t++){var g=i[t];g.emit.apply(g,arguments)}return this},T0={getSizerConfig:qA,getChildPrevState:_A,pushIntoBounds:tR,drawBounds:fR,resolveWidth:Yu,resolveChildrenWidth:MR,resolveHeight:Xu,postResolveSize:wR,getChildWidth:AR,getChildHeight:RR,getExpandedChildWidth:OR,getExpandedChildHeight:LR,getChildrenWidth:FR,getChildrenHeight:bR,addChildrenMap:pc,addElement:pc,removeChildrenMap:CR,getElement:SR,getAllChildrenSizers:DR,getChildrenSizers:IR,preLayout:Nr,layout:GR,runLayout:NR,layoutChildren:zR,runWidthWrap:o0,layoutBackgrounds:LO,postLayout:VR,setAnchor:UR,isInTouching:EO,pointToChild:wO,setDraggable:FO,setChildrenInteractive:CL,broadcastEvent:SL};Object.assign(T0,PR,pR,TR,Gr,Hu,ZR,QR,sO,aO,g0,DO,BO,hO,Qu,BR);const un=Phaser.Utils.Objects.GetValue;class Ws extends be{constructor(t,s,g,C,M,o){super(t,s,g,1,1),this.isRexSizer=!0,this.setMinSize(C,M),this.setName(un(o,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var T=un(o,"anchor",void 0);T&&this.setAnchor(T),this.setInnerPadding(un(o,"space",0));var e=un(o,"draggable",!1);e&&this.setDraggable(e),this.setSizerEventsEnable(un(o,"sizerEvents",!1)),this.setDirty(!0),un(o,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var s=this.getAllChildrenSizers([this]),g=0,C=s.length;g<C;g++)s[g].sizerEventsEnable=!1;super.destroy(t),Oi(this.backgroundChildren),Oi(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,s){return this.setMinWidth(t).setMinHeight(s),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-At(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+At(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+At(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-Mt(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+Mt(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+Mt(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(Ws.prototype,T0);var EL=function(){if(this.rexSizer.hidden)return 0;var i=0,t=this.sizerChildren,s,g,C;for(var M in t)s=t[M],g=s.rexSizer.padding,C=this.getChildWidth(s)+g.left+g.right,i=Math.max(C,i);return i+this.space.left+this.space.right},PL=function(){if(this.rexSizer.hidden)return 0;var i=0,t=this.sizerChildren,s,g,C;for(var M in t)s=t[M],C=s.isRexSizer?Math.max(s.minHeight,s.childrenHeight):s.minHeight!==void 0?s.minHeight:Mt(s),g=s.rexSizer.padding,C+=g.top+g.bottom,i=Math.max(C,i);return i+this.space.top+this.space.bottom},ML=function(i,t){t===void 0&&(t=this.width);var s,g=i.rexSizer;if(g.expandWidth){var C=t-this.space.left-this.space.right,M=g.padding;s=C-M.left-M.right}return s},wL=function(i,t){t===void 0&&(t=this.height);var s,g=i.rexSizer;if(g.expandHeight){var C=t-this.space.top-this.space.bottom,M=g.padding;s=C-M.top-M.bottom}return s},AL=function(i){i===void 0&&(i=[]);var t=this.sizerChildren,s;for(var g in t)s=t[g],s.isRexSizer&&i.push(s);return i},id=function(i,t){i.width<i.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${i.constructor.name}`),i.height<i.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${i.constructor.name}`)},RL=function(){var i,t,s,g=this.innerLeft,C=this.innerTop,M=this.innerWidth,o=this.innerHeight,T,e,d,x,u,l,h=this.sizerChildren;for(var n in h)i=h[n],!i.rexSizer.hidden&&(t=i.rexSizer,s=t.padding,zr.call(this,i),i.isRexSizer?(i.runLayout(this,this.getExpandedChildWidth(i),this.getExpandedChildHeight(i)),id(i,this)):(u=void 0,l=void 0,t.expandWidth&&(u=M-s.left-s.right),t.expandHeight&&(l=o-s.top-s.bottom),ii(i,u,l)),T=g+s.left,d=M-s.left-s.right,e=C+s.top,x=o-s.top-s.bottom,Vr.call(this,i,T,e,d,x,t.align,t.alignOffsetX,t.alignOffsetY))};const Uc=Phaser.Utils.Objects.IsPlainObject,hi=Phaser.Utils.Objects.GetValue,Yc=Phaser.Display.Align.CENTER,OL=Phaser.Utils.String.UUID;var LL=function(i,t,s,g,C,M,o,T,e){if(Ir.call(this,i),Uc(t)){var x=t;t=hi(x,"key",void 0),s=hi(x,"align",Yc),T=hi(x,"offsetX",0),e=hi(x,"offsetY",0),g=hi(x,"padding",0),C=hi(x,"expand",!0),i.isRexSizer||(M=hi(x,"minWidth",i._minWidth),o=hi(x,"minHeight",i._minHeighted))}var d=t!==void 0;d||(t=OL()),typeof s=="string"&&(s=Un[s]),s===void 0&&(s=Yc),T===void 0&&(T=0),e===void 0&&(e=0),g===void 0&&(g=0),C===void 0&&(C=!0),i.isRexSizer||(M===void 0&&(M=i._minWidth),o===void 0&&(o=i._minHeight));var x=this.getSizerConfig(i);return x.align=s,x.alignOffsetX=T,x.alignOffsetY=e,x.padding=Yn(g),Uc(C)?(x.expandWidth=hi(C,"width",!1),x.expandHeight=hi(C,"height",!1)):(x.expandWidth=C,x.expandHeight=C),i.isRexSizer||(x.expandWidth&&(i.minWidth=M===void 0?At(i):M),x.expandHeight&&(i.minHeight=o===void 0?Mt(i):o)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=i,d&&this.addChildrenMap(t,i),this};const FL={add:LL},bL=be.prototype.clear;var Rh=function(i){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!i&&this.sizerEventsEnable,s;if(t&&(s=this.getChildren([])),bL.call(this,i),t)for(var g,C=0,M=s.length;C<M;C++)g=s[C],g.emit("sizer.remove",g,this),this.emit("remove",g,this);return this};const DL={remove(i,t){var s;if(typeof i=="string"){if(s=i,i=this.sizerChildren[s],!i)return this}else{if(this.getParentSizer(i)!==this)return this;s=this.childToKey(i)}return s&&(delete this.sizerChildren[s],this.childrenMap.hasOwnProperty(s)&&delete this.childrenMap[s]),Br.call(this,i,t),this},removeAll(i){for(var t in this.sizerChildren)this.remove(t,i);return this},clear(i){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Rh.call(this,i),this}};var C0={getChildrenWidth:EL,getChildrenHeight:PL,getExpandedChildWidth:ML,getExpandedChildHeight:wL,getChildrenSizers:AL,layoutChildren:RL};Object.assign(C0,FL,DL);var Oh=function(i,t){if(Array.isArray(i))return i.indexOf(t);for(var s in i)if(i[s]===t)return s;return null};const Xc=Phaser.Utils.Objects.IsPlainObject,dn=Phaser.Utils.Objects.GetValue;class De extends Ws{constructor(t,s,g,C,M,o){Xc(s)?(o=s,s=dn(o,"x",0),g=dn(o,"y",0),C=dn(o,"width",void 0),M=dn(o,"height",void 0)):Xc(C)&&(o=C,C=dn(o,"width",void 0),M=dn(o,"height",void 0)),super(t,s,g,C,M,o),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var s=t;if(this.sizerChildren.hasOwnPropery(s))return s}else return Oh(this.sizerChildren,t);return null}}Object.assign(De.prototype,C0);var IL=Phaser.Math.Distance.Between,_a=function(i,t,s){var g=i.width/2;return IL(g,g,t,s)<=g};const BL=Phaser.Math.Angle.Between,GL=Phaser.Math.Angle.Normalize;var Wc=function(i,t,s){if(!!this.enable&&!!i.isDown){var g=this.sizerChildren.knob;if(!!_a(g,t,s)){var C=g.width/2,M=g.startAngle,o=BL(C,C,t,s),T=g.anticlockwise?M-o:o-M,e=GL(T)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-e)<.1?this.value=e:this.easeValueTo(e)}}},NL=function(){var i=this.sizerChildren.knob;i.on("pointerdown",Wc,this).on("pointermove",Wc,this).setInteractive()};const kc=Phaser.Math.Angle.Between,zL=Phaser.Math.Angle.Wrap;var VL=function(i,t,s){if(!(!this.enable||this.panPointer)){var g=this.sizerChildren.knob;!_a(g,t,s)||S0.call(this,i)}},UL=function(i,t,s){if(!!this.enable&&!!i.isDown){var g=this.sizerChildren.knob;switch(this.panState){case sd:_a(g,t,s)&&S0.call(this,i);break;case P0:_a(g,t,s)?XL.call(this):E0.call(this);break}}},YL=function(i,t,s){!this.enable||this.panPointer!==i||E0.call(this)},S0=function(i){this.panPointer=i,this.panState=P0},E0=function(){this.panPointer=void 0,this.panState=sd},XL=function(){var i=this.panPointer.prevPosition,t=this.panPointer.position,s=this.sizerChildren.knob,g=kc(s.x,s.y,i.x,i.y),C=kc(s.x,s.y,t.x,t.y),M=s.anticlockwise?g-C:C-g,o=zL(M)/(Math.PI*2);this.stopEaseValue(),this.value+=o};const sd=0,P0=1;var WL=function(){var i=this.sizerChildren.knob;i.on("pointerdown",VL,this).on("pointermove",UL,this).on("pointerup",YL,this).setInteractive(),this.panPointer=void 0,this.panState=sd},kL=function(i,t){return this.textFormatCallback=i,this.textFormatCallbackScope=t,this},M0=function(i){i===void 0&&(i=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(i):t=this.textFormatCallback.call(this.textFormatCallbackScope,i),t},HL=function(i){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(M0.call(this,i)),t.layout&&t.layout()),this};const $L={setTextFormatCallback:kL,getFormatText:M0,updateText:HL},Ke=Phaser.Utils.Objects.GetValue,KL=Phaser.Math.Snap.To;class Lh extends Xs(De){constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexKnob",this.bootProgressBase(s);var g=Ke(s,"background",void 0),C=Ke(s,"text",void 0);g&&this.addBackground(g),C&&(s.textColor=void 0,s.textStrokeColor=void 0,this.setTextFormatCallback(Ke(s,"textFormatCallback",void 0),Ke(s,"textFormatCallbackScope",void 0)));var M=new mh(t,s);M.setDepth(Ke(s,"knobDepth",0)),M._value=-1,t.add.existing(M),this.add(M,"knob"),C&&(this.add(C,"text","center",0,!1),t.children.moveBelow(M,C)),this.addChildrenMap("background",g),this.addChildrenMap("knob",M),this.addChildrenMap("text",C),this.setEnable(Ke(s,"enable",void 0)),this.setGap(Ke(s,"gap",void 0)),this.setValue(Ke(s,"value",0),Ke(s,"min",void 0),Ke(s,"max",void 0));var o=Ke(s,"input",0);switch(typeof o=="string"&&(o=ZL[o]),o){case 0:WL.call(this);break;case 1:NL.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=KL(t,this.gap));var s=this.value;this.sizerChildren.knob.value=t;var g=this.value;s!==g&&(this.updateText(),this.eventEmitter.emit("valuechange",g,s,this.eventEmitter))}}const ZL={pan:0,drag:0,click:1,none:-1};Object.assign(Lh.prototype,$L);st.register("knob",function(i){var t=new Lh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Knob",Lh);const JL={arc:gh,circle:Xl,curve:ZM,ellipse:JM,line:jM,lines:An,rectangle:mw,roundRectangle:ja,triangle:yw},Hc=Phaser.Utils.Objects.GetValue,jL=Phaser.Utils.Objects.IsPlainObject,QL=function(){for(var i=this.getShapes(),t=0,s=i.length;t<s;t++)i[t].lineStyle().fillStyle()},qL={createShape(i,t){var s=JL[i],g=new s;return t&&g.setName(t),g},buildShapes(i){var t=Hc(i,"create",void 0);if(jL(t)){var s=t;for(var g in s){var C=s[g];switch(typeof C){case"number":for(var M=0;M<C;M++)this.addShape(this.createShape(g));break;case"string":this.addShape(this.createShape(g,C));break;default:for(var o=C,M=0,T=o.length;M<T;M++)this.addShape(this.createShape(g,o[M]));break}}}else if(Array.isArray(t))for(var s=t,M=0,T=s.length;M<T;M++){var e=s[M];this.addShape(this.createShape(e.type,e.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(Hc(i,"update"))},setUpdateShapesCallback(i){return i===void 0&&(i=QL),this.dirty=this.dirty||this.updateCallback!==i,this.updateCallback=i,this},updateShapes(){this.updateCallback.call(this)}},$c=Phaser.GameObjects.Components.TransformMatrix,_L=Phaser.Math.TransformXY;var tF=function(i,t,s,g,C){g===void 0&&(g=i.scene.cameras.main),C===void 0?C={}:C===!0&&(C=eF);var M=g.scrollX,o=g.scrollY,T=t+M*i.scrollFactorX-M,e=s+o*i.scrollFactorY-o;return i.parentContainer?(Ea===void 0&&(Ea=new $c,Kc=new $c),i.getWorldTransformMatrix(Ea,Kc),Ea.applyInverse(T,e,C)):_L(T,e,i.x,i.y,i.rotation,i.scaleX,i.scaleY,C),C.x+=i.displayOriginX,C.y+=i.displayOriginY,C},Ea,Kc,eF={};const nr=Phaser.Utils.Objects.GetValue,iF=Phaser.Utils.Objects.IsPlainObject;class Fh extends Vs{constructor(t,s,g,C,M,o){iF(s)&&(o=s,s=nr(o,"x",0),g=nr(o,"y",0),C=nr(o,"width",2),M=nr(o,"height",2)),super(t,s,g,C,M),this.type=nr(o,"type","rexCustomShapes"),this.buildShapes(o)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,s,g,C){return typeof g=="boolean"&&(C=g,g=void 0),tF(this,t,s,g,C)}}Object.assign(Fh.prototype,qL);st.register("customShapes",function(i,t,s,g,C){var M=new Fh(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.CustomShapes",Fh);const rr=Phaser.Utils.Objects.GetValue,sF=Phaser.Utils.Objects.IsPlainObject;class w0 extends Xs(Fh){constructor(t,s,g,C,M,o){sF(s)&&(o=s,s=rr(o,"x",0),g=rr(o,"y",0),C=rr(o,"width",2),M=rr(o,"height",2)),o===void 0&&(o={}),o.type||(o.type="rexCustomProgress"),super(t,s,g,C,M,o),this.bootProgressBase(o),this.setValue(rr(o,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}st.register("customProgress",function(i,t,s,g,C){var M=new w0(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.CustomProgress",w0);const nF={setTransitionStartCallback(i,t){return this.onStartCallback=i,this.onStartCallbackScope=t,this},setTransitionProgressCallback(i,t){return this.onProgressCallback=i,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(i,t){return this.onCompleteCallback=i,this.onCompleteCallbackScope=t,this}},rF=Phaser.Utils.Objects.IsPlainObject,Be=Phaser.Utils.Objects.GetValue;var aF={out:0,in:1};const hF={setTransitionDirection(i){return typeof i=="string"&&(i=aF[i]),this.dir=i,this},setDuration(i){return this.duration=i,this},setEaseFunction(i){return this.easeFunction=i,this},setNextTexture(i,t){return this.nextImage.setTexture(i,t),this},transit(i,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),rF(i)){var s=i;i=Be(s,"key",void 0),t=Be(s,"frame",void 0),this.setDuration(Be(s,"duration",this.duration)).setEaseFunction(Be(s,"ease",this.easeFunction)).setTransitionDirection(Be(s,"dir",this.dir));var g=Be(s,"mask",void 0);g&&this.setMaskGameObject(g),this.setMaskEnable(g===!0);var C=Be(s,"onStart",void 0),M=Be(s,"onProgress",void 0),o=Be(s,"onComplete",void 0);(C!==void 0||M!==void 0||o!==void 0)&&this.setTransitionStartCallback(C,Be(s,"onStartScope",void 0)).setTransitionProgressCallback(M,Be(s,"onProgressScope",void 0)).setTransitionCompleteCallback(o,Be(s,"onCompleteScope",void 0))}return this.setNextTexture(i,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Us(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var Zc=function(i,t,s,g,C){switch(this.clear().fillStyle(16777215),this.shape){case 1:var M=Math.min(i,t)/2;this.fillCircle(-i*(g-.5),-t*(C-.5),M+s);break;default:this.fillRect(-(i*g)-s,-(t*C)-s,i+2*s,t+2*s);break}};const oF=Phaser.GameObjects.Graphics;class $l extends oF{constructor(t,s,g){s===void 0&&(s=0),typeof s=="string"&&(s=lF[s]),g===void 0&&(g=0),super(t.scene),this.parent=t,this.shape=s,this.padding=g,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,s){var g=this.parent;return t===void 0&&(t=g.x),s===void 0&&(s=g.y),super.setPosition(t,s),this}resize(t,s,g){var C=this.parent;return t===void 0&&(t=C.width),s===void 0&&(s=C.height),g===void 0&&(g=this.padding),this.width===t&&this.height===s&&this.paddingSave===g?this:(this.width=t,this.height=s,this.originX=C.originX,this.originY=C.originY,this.paddingSave=g,Zc.call(this,t,s,g,C.originX,C.originY),this)}setOrigin(t,s){s===void 0&&(s=t);var g=this.parent;return t===void 0&&(t=g.originX),s===void 0&&(s=g.originY),this.originX===t&&this.originY===s?this:(this.originX=t,this.originY=s,Zc.call(this,this.width,this.height,this.paddingSave,t,s),this)}}const lF={rectangle:0,circle:1},uF={setMaskGameObject(i){if(!i)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(i===!0&&this.maskGameObject instanceof $l)return this;if(this.maskGameObject===i)return this;this.removeMaskGameObject()}return i===!0&&(i=new $l(this)),this.maskGameObject=i,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(i,t,s){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(i.setMask(this.childrenMask),s&&this.childrenMask.setInvertAlpha()):i.clearMask(),this},setCurrentImageMaskEnable(i,t){return this.setImageMaskEnable(this.currentImage,i,t),this},setNextImageMaskEnable(i,t){return this.setImageMaskEnable(this.nextImage,i,t),this},setCellImagesMaskEnable(i,t){for(var s=this.getCellImages(),g=0,C=s.length;g<C;g++)this.setImageMaskEnable(s[g],i,t);return this},setMaskEnable(i,t){return this.setImageMaskEnable(this.backImage,i,t),this.setImageMaskEnable(this.frontImage,i,t),this.setCellImagesMaskEnable(i,t),this}};var dF=function(i,t){t===void 0&&(t=",");var s;return i==="__BASE"?s=function(g,C){return`${g}${t}${C}`}:s=function(g,C){return`${i}_${g}${t}${C}`},s},fF=function(i,t,s,g,C,M){s==null&&(s="__BASE"),M||(M=dF(s,M));for(var o=i.sys.textures.get(t),T=typeof s=="object"?s:o.get(s),e=T.width,d=T.height,x,u,l,h=e/g,n=d/C,r=0,f=0,a=0;a<C;a++){r=0;for(var c=0;c<g;c++)l=M(c,a),x=r+T.cutX,u=f+T.cutY,o.add(l,0,x,u,h,n),r+=h;f+=n}return{getFrameNameCallback:M,cellWidth:h,cellHeight:n,columns:g,rows:C}};const Ei=Phaser.Utils.Objects.GetValue,cF=Phaser.GameObjects.Image,vF=Phaser.Utils.Objects.IsPlainObject,pF=Phaser.Math.RotateAround;var gF=function(i,t,s,g){vF(t)&&(g=t,t=Ei(g,"columns",1),s=Ei(g,"rows",1));var C=Ei(g,"onCreateImage");if(!C){var M=Ei(g,"ImageClass",cF);C=function(I,B,V){return new M(I,0,0,B,V)}}for(var o=Ei(g,"originX",.5),T=Ei(g,"originY",.5),e=Ei(g,"add",!0),d=Ei(g,"align",e),x=Ei(g,"objectPool",void 0),u=i.scene,l=i.texture,h=i.frame,n=fF(u,l,h,t,s),r=n.getFrameNameCallback,f=i.scaleX,a=i.scaleY,c=i.rotation,p=i.getTopLeft(),v=p.x,m=p.y,y=[],E=n.cellWidth*f,P=n.cellHeight*a,S=0;S<s;S++)for(var w=0;w<t;w++){var A,R=r(w,S);x&&x.length>0?A=x.pop().setTexture(l,R):A=C(u,l,R),e&&u.add.existing(A);var O=v+E*w,F=m+P*S,L=O+o*E,D=F+T*P;d&&(A.setOrigin(o,T).setPosition(L,D).setScale(f,a).setRotation(c),pF(A,v,m,c)),y.push(A)}return y};const mF={gridCutImage(i,t,s,g){g===void 0&&(g={}),g.objectPool=this.imagesPool;for(var C=gF(i,t,s,g),M,o=0,T=C.length;o<T;o++)M=C[o],M.setVisible(!0),this.add(M);return this.cellImages=C,this.setChildLocalVisible(i,!1),C},gridCutCurrentImage(i,t,s){return this.gridCutImage(this.currentImage,i,t,s)},gridCutNextImage(i,t,s){return this.gridCutImage(this.nextImage,i,t,s)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var i=this.cellImages[0].texture,t=this.cellImages,s,g,C=0,M=t.length;C<M;C++)s=t[C],this.setChildLocalAlpha(s,1).setChildLocalScale(s,1).setChildLocalVisible(s,!1),s.clearMask(),g=s.frame.name,s.setTexture(),i.remove(g);return this.imagesPool.push(...t),t.length=0,this}},A0={setFlipX(i){return this.flipX=i,this},setFlipY(i){return this.flipY=i,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(i,t){return this.flipX=i,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var R0={};Object.assign(R0,nF,hF,uF,mF,A0);var xF=function(i,t,s,g){},yF=function(i,t,s,g){i.setChildLocalAlpha(t,1-g).setChildLocalAlpha(s,g)},TF=function(i,t,s,g){i.setChildLocalAlpha(t,1)};const Jc=Phaser.Utils.Objects.IsPlainObject,Qt=Phaser.Utils.Objects.GetValue,CF=Phaser.Math.Clamp;class nd extends be{constructor(t,s,g,C,M,o){Jc(s)?(o=s,s=Qt(o,"x",0),g=Qt(o,"y",0),C=Qt(o,"key",void 0),M=Qt(o,"frame",void 0)):Jc(M)&&(o=M,M=void 0);var T=Qt(o,"back",void 0),e=Qt(o,"front",void 0);T||(T=t.add.image(s,g,C,M)),e||(e=t.add.image(s,g,C,M));var d=Qt(o,"width",e.width),x=Qt(o,"height",e.height);super(t,s,g,d,x),this.type="rexTransitionImage",T.setVisible(!1),this.addMultiple([T,e]),this.backImage=T,this.frontImage=e,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var u=Qt(o,"onStart",void 0),l=Qt(o,"onProgress",void 0),h=Qt(o,"onComplete",void 0),n=Qt(o,"dir",0);u===void 0&&l===void 0&&h===void 0&&(u=xF,l=yF,h=TF,n=0),this.setTransitionStartCallback(u,Qt(o,"onStartScope",void 0)).setTransitionProgressCallback(l,Qt(o,"onProgressScope",void 0)).setTransitionCompleteCallback(h,Qt(o,"onCompleteScope",void 0)).setTransitionDirection(n).setDuration(Qt(o,"duration",1e3)).setEaseFunction(Qt(o,"ease","Linear"));var r=Qt(o,"mask",void 0);r&&this.setMaskGameObject(r),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=CF(t,0,1),this._t!==t){this._t=t;var s=this.currentImage,g=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),Jo(this.onStartCallback,this.onStartCallbackScope,this,s,g,t)),Jo(this.onProgressCallback,this.onProgressCallbackScope,this,s,g,t),t===1){Jo(this.onCompleteCallback,this.onCompleteCallbackScope,this,s,g,t);var C=g.texture.key,M=g.frame.name;this.frontImage.setTexture(C,M),this.backImage.setTexture(C,M),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,s){return super.setOrigin(t,s),this.backImage.setOrigin(t,s),this.frontImage.setOrigin(t,s),this.maskGameObject&&this.maskGameObject.setOrigin(t,s),this}setTexture(t,s){return this.frontImage.setTexture(t,s),this.backImage.setTexture(t,s).setVisible(!1),this}}var Jo=function(i,t,s,g,C,M){!i||(t?i.call(t,s,g,C,M):i(s,g,C,M))};Object.assign(nd.prototype,R0);st.register("transitionImage",function(i,t,s,g,C){var M=new nd(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.TransitionImage",nd);var SF=function(i,t,s){if(s===void 0?s={}:s===!0&&(s=EF),i.width<=t.width&&i.height<=t.height)return s.width=i.width,s.height=i.height,s;var g=i.width/i.height;s.width=Math.min(i.width,t.width),s.height=Math.min(i.height,t.height);var C=s.width/s.height;return C<g?s.height=s.width/g:C>g&&(s.width=s.height*g),s},EF={};const jc=Phaser.Utils.Objects.IsPlainObject,As=Phaser.Utils.Objects.GetValue;class rd extends be{constructor(t,s,g,C,M,o){jc(s)?(o=s,s=As(o,"x",0),g=As(o,"y",0),C=As(o,"key",void 0),M=As(o,"frame",void 0)):jc(M)&&(o=M,M=void 0);var T=As(o,"image");T?T.setPosition(s,g).setOrigin(.5):(T=t.add.image(s,g,C,M),C===void 0&&T.setVisible(!1)),super(t,s,g,1,1),this.type="rexImageBox",this.add(T),this.image=T;var e=As(o,"width",T.width),d=As(o,"height",T.height);this.resize(e,d)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}scaleImage(){var t=this.image,s=SF(t,{width:this.width,height:this.height},!0);return t.setDisplaySize(s.width,s.height),this.resetChildScaleState(t),this}resize(t,s){return super.resize(t,s),this.scaleImage(),this}setTexture(t,s){var g=this.image;return g.setTexture(t,s),t!==null?(this.setChildVisible(g,!0),this.scaleImage()):this.setChildVisible(g,!1),this}}Object.assign(rd.prototype,A0);st.register("imageBox",function(i,t,s,g,C){var M=new rd(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.ImageBox",rd);st.register("fullWindowRectangle",function(i,t){var s=new Zu(this.scene,i,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.FullWindowRectangle",Zu);st.register("cover",function(i){var t=new Ju(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Cover",Ju);var ad=function(i,t){if(this.scene.sys.scale.autoRound&&(i=Math.floor(i),t=Math.floor(t)),this.width===i&&this.height===t)return this;var s=this.node.style;return s.width=`${i}px`,s.height=`${t}px`,this.updateSize(),this};const Qc={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},qc={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},PF={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},_c=Phaser.Utils.Objects.GetValue;var O0=function(i,t,s,g){var C=_c(g,"preventDefault",!1),M=_c(g,"preTest");for(let o in s)t.addEventListener(o,function(T){(!M||M(i,o))&&i.emit(s[o],i,T),C&&T.preventDefault()})};const MF=Phaser.GameObjects.DOMElement,tv=Phaser.Utils.Objects.IsPlainObject,Pi=Phaser.Utils.Objects.GetValue;class bh extends MF{constructor(t,s,g,C,M,o){tv(s)?(o=s,s=Pi(o,"x",0),g=Pi(o,"y",0),C=Pi(o,"width",0),M=Pi(o,"height",0)):tv(C)&&(o=C,C=Pi(o,"width",0),M=Pi(o,"height",0)),o===void 0&&(o={});var T,e=Pi(o,"type","text");e==="textarea"?(T=document.createElement("textarea"),T.style.resize="none"):(T=document.createElement("input"),T.type=e),Ja(Qc,o,T);var d=Pi(o,"style",void 0);d=Ja(qc,o,d);var x=T.style;for(var u in o)u in Qc||u in qc||u in x&&(d[u]=o[u]);d["box-sizing"]="border-box",super(t,s,g,T,d),this.type="rexInputText",this.resize(C,M),O0(this,T,PF),Xg(T),Pi(o,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,s){return t===void 0?this.node.select():this.node.setSelectionRange(t,s),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,s){return this.node.style[t]=s,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var wF={resize:ad};Object.assign(bh.prototype,wF);st.register("inputText",function(i){var t=new bh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.InputText",bh);const ev=Phaser.Utils.Objects.GetValue;var AF=function(i){var t=document.createElement("input");t.type="file";var s=ev(i,"accept",""),g=ev(i,"multiple",!1);return t.setAttribute("accept",s),g?t.setAttribute("multiple",""):t.removeAttribute("multiple"),t},L0=function(i,t){return i===void 0&&(i=0),new Promise(function(s,g){setTimeout(function(){s(t)},i)})},F0=function({game:i,fileInput:t,closeDelay:s}){return vh(Ln(i).events,"focus").then(function(){return L0(s)}).then(function(){var g={files:t.files};return Promise.resolve(g)})};const RF=Phaser.Utils.Objects.GetValue;var OF=function(i,t){var s=RF(t,"closeDelay",200),g=AF(t);return g.click(),F0({game:i,fileInput:g,closeDelay:s}).then(function(C){return g.remove(),Promise.resolve(C)})},b0=function(i){return this.setOrigin(i.originX,i.originY),this.setPosition(i.x,i.y),this.resize(i.displayWidth,i.displayHeight),this},LF=function(i,t,s){if(s===void 0)switch(t){case"image":case"svg":s="textures";break;case"animation":s="json";break;case"tilemapTiledJSON":case"tilemapCSV":s="tilemap";break;case"glsl":s="shader";break;default:s=t;break}i=Ln(i);var g;return s==="textures"?g=i.textures:g=i.cache[s],g},D0=function(i,t,s,g,C,M){if(!(C===null||C===!1))if(ns(C))C();else{var o=LF(i,s,C);o.exists(g)&&o.remove(g)}var T=i.load;if(M&&T.once(`filecomplete-${s}-${g}`,function(d,x,u){M(u)}),ns(t))t();else{var e=window.URL.createObjectURL(t);T[s](g,e)}T.start()},FF=function(i,t,s,g,C){var M=this.scene;return D0(M,i,t,s,g,C),this},bF=function(i,t,s,g){var C=this.scene;return new Promise(function(M,o){var T=function(e){M(e)};D0(C,i,t,s,g,T)})};const I0={loadFile:FF,loadFilePromise:bF},DF=Phaser.GameObjects.DOMElement,iv=Phaser.Utils.Objects.IsPlainObject,oi=Phaser.Utils.Objects.GetValue;class Dh extends DF{constructor(t,s,g,C,M,o){iv(s)?(o=s,s=oi(o,"x",0),g=oi(o,"y",0),C=oi(o,"width",0),M=oi(o,"height",0)):iv(C)&&(o=C,C=oi(o,"width",0),M=oi(o,"height",0));var T=document.createElement("input");T.type="file";var e=T.style;e.display="none";var d=document.createElement("label");d.appendChild(T);var x=oi(o,"style",void 0);super(t,s,g,d,x),this.type="rexFileChooser",this.resetFromJSON(o),this.resize(C,M);var u=this;T.onchange=function(){u.emit("change",u)},this.setCloseDelay(oi(o,"closeDelay",200)),T.onclick=function(){F0({game:t,fileInput:T,closeDelay:u.closeDelay}).then(function(){u.emit("select",u)})}}resetFromJSON(t){return this.setAccept(oi(t,"accept","")),this.setMultiple(oi(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}}var IF={resize:ad,syncTo:b0};Object.assign(Dh.prototype,IF,I0);st.register("fileChooser",function(i){var t=new Dh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.FileChooser",Dh);const BF={setDropEnable(i){return i===void 0&&(i=!0),this.dropEnable=i,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},GF={addFilter(i,t){return this.filters||(this.filters={}),this.filters[i]=t,this},addFilters(i){this.filters||(this.filters={});for(var t in i)this.filters[t]=i[t];return this}};var B0={resize:ad,syncTo:b0};Object.assign(B0,BF,GF,I0);const NF={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},zF=Phaser.GameObjects.DOMElement,sv=Phaser.Utils.Objects.IsPlainObject,Mi=Phaser.Utils.Objects.GetValue;class hd extends zF{constructor(t,s,g,C,M,o){sv(s)?(o=s,s=Mi(o,"x",0),g=Mi(o,"y",0),C=Mi(o,"width",0),M=Mi(o,"height",0)):sv(C)&&(o=C,C=Mi(o,"width",0),M=Mi(o,"height",0)),o===void 0&&(o={});var T=document.createElement("div"),e=Mi(o,"style",void 0);super(t,s,g,T,e),this.type="rexFileDropZone",this.resize(C,M),this._files=[],this.setDropEnable(Mi(o,"dropEnable",!0));var d=Mi(o,"filters");d&&this.addFilters(d),O0(this,T,NF,{preventDefault:!0,preTest(x){return x.dropEnable}}),this.on("drop",function(x,u){this._files=u.dataTransfer.files;var l=this._files;if(l&&this.filters)for(var h in this.filters){for(var n=this.filters[h],r=[],f=0,a=l.length;f<a;f++){var c=l[f];n(c,l)&&r.push(c)}r.length>0&&this.emit(`drop.${h}`,r)}},this)}get files(){return this._files}}Object.assign(hd.prototype,B0);st.register("fileDropZone",function(i){var t=new hd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.FileDropZone",hd);var VF=function(i){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,UF(this,i)),this},UF=function(i,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var s=t.options;s.responsive=!1,s.maintainAspectRatio=!1,s.hasOwnProperty("devicePixelRatio")||(s.devicePixelRatio=1);var g=!1;s.animation===void 0?s.animation={}:s.animation===!1&&(g=!0,s.animation={});var C=s.animation;g&&(C.duration=0);var M=C.onProgress;C.onProgress=function(T){M&&M(T),i.needRedraw()};var o=C.onComplete;return C.onComplete=function(T){o&&o(T),i.needRedraw()},t},YF=function(i){if(this.chart!==void 0)if(typeof i=="string"){for(var t=this.chart.data.datasets,s,g=0,C=t.length;g<C;g++)if(s=t[g],s.label===i)return s}else return this.chart.data.datasets[i]},XF=function(i,t){var s=this.getChartDataset(i);if(s!==void 0){if(typeof t=="string"){var g=this.chart.data.labels;if(t=g.indexOf(t),t===-1)return}return s.data[t]}},WF=function(i,t,s){if(this.chart===void 0)return this;var g=this.getChartDataset(i);if(typeof t=="string"){var C=this.chart.data.labels;if(t=C.indexOf(t),t===-1)return this}return g.data[t]=s,this},kF=function(){return this.chart===void 0?this:(this.chart.update(),this)};class od extends Ys{constructor(t,s,g,C,M,o){super(t,s,g,C,M),this.type="rexChart",this.chart=void 0,o!==void 0&&this.setChart(o)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,s){if(t===this.width&&s===this.height)return this;if(super.resize(t,s),this.chart){var g=this.chart;g.height=this.canvas.height,g.width=this.canvas.width,g.aspectRatio=g.height?g.width/g.height:null,g.update()}return this}}var HF={setChart:VF,getChartDataset:YF,getChartData:XF,setChartData:WF,updateChart:kF};Object.assign(od.prototype,HF);st.register("chart",function(i,t,s,g,C){var M=new od(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.Chart",od);st.register("container",function(i,t,s,g,C){var M=new be(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.Container",be);var $F=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);var t=0,s=this.sizerChildren,g,C,M;if(this.orientation===0)for(var o=this.space.item,T=!0,e=0,d=s.length;e<d;e++)g=s[e],!g.rexSizer.hidden&&(g.rexSizer.proportion===0||i?M=this.getChildWidth(g):M=0,C=g.rexSizer.padding,M+=C.left+C.right,T?T=!1:M+=o,t+=M);else for(var e=0,d=s.length;e<d;e++)g=s[e],g.hasOwnProperty("rexSizer")&&(g.rexSizer.hidden||(C=g.rexSizer.padding,M=this.getChildWidth(g)+C.left+C.right,t=Math.max(M,t)));return t+this.space.left+this.space.right},KF=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);var t=0,s=this.sizerChildren,g,C,M;if(this.orientation===0)for(var o=0,T=s.length;o<T;o++)g=s[o],!g.rexSizer.hidden&&(C=g.rexSizer.padding,M=this.getChildHeight(g)+C.top+C.bottom,t=Math.max(M,t));else for(var e=this.space.item,d=!0,o=0,T=s.length;o<T;o++)g=s[o],g.hasOwnProperty("rexSizer")&&(g.rexSizer.hidden||(g.rexSizer.proportion===0||i?M=this.getChildHeight(g):M=0,C=g.rexSizer.padding,M+=C.top+C.bottom,d?d=!1:M+=e,t+=M));return t+this.space.top+this.space.bottom},ZF=function(i,t){t===void 0&&(t=this.width);var s,g=i.rexSizer,C=g.padding;if(this.orientation===0)g.proportion>0&&this.proportionLength>0&&(s=g.proportion*this.proportionLength);else if(g.expand){var M=t-this.space.left-this.space.right;s=M-C.left-C.right}return s},JF=function(i,t){t===void 0&&(t=this.height);var s,g=i.rexSizer,C=g.padding;if(this.orientation===0){if(g.expand){var M=t-this.space.top-this.space.bottom;s=M-C.top-C.bottom}}else g.proportion>0&&this.proportionLength>0&&(s=g.proportion*this.proportionLength);return s},jF=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,g=0,C=t.length;g<C;g++)s=t[g],s.isRexSizer&&i.push(s);return i},QF=function(){this.hasRatioFitChild=!1;for(var i=this.sizerChildren,t=0,s=i.length;t<s;t++){var g=i[t];g.rexSizer.hidden||!g.rexSizer.fitRatio||(ii(g,1,1),this.hasRatioFitChild=!0)}return this._childrenProportion=void 0,this.proportionLength=void 0,Nr.call(this),this},qF=function(i,t){if(this.hasRatioFitChild){var s;this.orientation===0?s=t-this.getInnerPadding("top")-this.getInnerPadding("bottom"):i-this.getInnerPadding("left")-this.getInnerPadding("right");for(var g=this.sizerChildren,C,M,o=0,T=g.length;o<T;o++){var e=g[o];if(!e.rexSizer.hidden){var d=e.rexSizer.fitRatio;!d||(this.orientation===0?(M=s-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),C=M*d):(C=s-this.getChildOuterPadding(e,"top")-this.getChildOuterPadding(e,"bottom"),M=C/d),ii(e,C,M),e.isRexSizer&&e.setMinSize(C,M))}}this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(i,!0)}};const _F=Phaser.Math.Wrap;var tb=function(){for(var i=this.sizerChildren,t,s,g,C=this.innerLeft,M=this.innerTop,o=this.innerWidth,T=this.innerHeight,e=C,d=M,x,u,l,h,n,r,f,a=this.startChildIndex,c=0,p=i.length;c<p;c++)a===0?f=c:f=_F(c+a,0,p),this.rtl&&(f=p-f-1),t=i[f],!t.rexSizer.hidden&&(s=t.rexSizer,g=s.padding,zr.call(this,t),t.isRexSpace?(n=0,r=0):(n=this.getExpandedChildWidth(t),r=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,n,r),id(t,this)):ii(t,n,r),n===void 0&&(n=At(t)),r===void 0&&(r=Mt(t)),this.orientation===0?(x=e+g.left,s.proportion===0||this.proportionLength===0?l=n:l=s.proportion*this.proportionLength,u=d+g.top,h=T-g.top-g.bottom):(x=e+g.left,l=o-g.left-g.right,u=d+g.top,s.proportion===0||this.proportionLength===0?h=r:h=s.proportion*this.proportionLength),Vr.call(this,t,x,u,l,h,s.align),this.orientation===0?e+=l+g.left+g.right+this.space.item:d+=h+g.top+g.bottom+this.space.item)},eb=function(t){var t=Yu.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var s=t-this.childrenWidth;s>0?(s=t-this.getChildrenWidth(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t},ib=function(t){var t=Xu.call(this,t);if(this.proportionLength===void 0&&this.orientation===1){var s=t-this.childrenHeight;s>0?(s=t-this.getChildrenHeight(!1),this.proportionLength=s/this.childrenProportion):this.proportionLength=0}return t};const sb=Phaser.GameObjects.Zone;class Ih extends sb{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var nb=function(i,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var g=-1,C=1/0,M=0,o=s.length;M<o;M++){var T=s[M],e;this.orientation===0?e=Math.abs(T.left-i):e=Math.abs(T.top-t),C>e&&(C=e,g=M)}var T=s[s.length-1],e;return this.orientation===0?e=Math.abs(T.right-i):e=Math.abs(T.bottom-t),C>e&&(C=e,g=M+1),g};const G0=Phaser.Utils.Objects.IsPlainObject,wi=Phaser.Utils.Objects.GetValue,nv=Phaser.Display.Align.CENTER,rb={min:0,full:-1};var jo=function(i,t,s,g,C,M,o,T,e,d){Ir.call(this,i);var x=i.isRexSpace,u=typeof t;if(t===null)return this;if(u!=="number"){if(u==="string")t=rb[t];else if(G0(t)){var l=t;t=wi(l,"proportion",void 0),s=wi(l,"align",nv),g=wi(l,"padding",0),C=wi(l,"expand",!1),M=wi(l,"key",void 0),o=wi(l,"index",void 0),i.isRexSizer||(T=wi(l,"minWidth",void 0),e=wi(l,"minHeight",void 0)),d=wi(l,"fitRatio",0)}}typeof s=="string"&&(s=Un[s]),t===void 0&&(t=x?1:0),s===void 0&&(s=nv),g===void 0&&(g=0),C===void 0&&(C=!1),T===void 0&&(x?T=0:i.isRexSizer||(T=i._minWidth)),e===void 0&&(x?e=0:i.isRexSizer||(e=i._minHeight)),d===void 0&&(d=0);var l=this.getSizerConfig(i);return l.proportion=t,l.align=s,l.padding=Yn(g),l.expand=C,l.fitRatio=t===0?d:0,o===void 0||o>=this.sizerChildren.length?this.sizerChildren.push(i):this.sizerChildren.splice(o,0,i),i.isRexSizer||(t>0&&(this.orientation===0?i.minWidth=T===void 0?At(i):T:i.minHeight=e===void 0?Mt(i):e),C&&(this.orientation===0?i.minHeight=e:i.minWidth=T)),M!==void 0&&this.addChildrenMap(M,i),this};const ab={add:jo,addSpace(i){return this.insertSpace(void 0,i),this},insertSpace(i,t){return t===void 0&&(t=1),jo.call(this,new Ih(this.scene),{proportion:t,minWidth:0,minHeight:0,index:i}),this},insert(i,t,s,g,C,M,o,T){return G0(s)&&(s.index=i),jo.call(this,t,s,g,C,M,o,i,T),this},insertAtPosition(i,t,s,g,C,M,o,T,e){var d=nb.call(this,i,t);return d===-1&&(d=void 0),this.insert(d,s,g,C,M,o,T,e),this}},hb=Phaser.Utils.Array.Remove,ob={remove(i,t){return this.getParentSizer(i)!==this?this:(hb(this.sizerChildren,i),Br.call(this,i,t),this)},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],i);return this},clear(i){return this.sizerChildren.length=0,Rh.call(this,i),this}},lb={getChildAlign(i){return this.getSizerConfig(i).align},setChildAlign(i,t){return typeof t=="string"&&(t=Un[t]),this.getSizerConfig(i).align=t,this}},ub={getChildProportion(i){return this.getSizerConfig(i).proportion},setChildProportion(i,t){return this.getSizerConfig(i).proportion=t,this}},db={getChildExpand(i){return this.getSizerConfig(i).expand},setChildExpand(i,t){return this.getSizerConfig(i).expand=t,this}};var N0={getChildrenWidth:$F,getChildrenHeight:KF,getExpandedChildWidth:ZF,getExpandedChildHeight:JF,getChildrenSizers:jF,preLayout:QF,postResolveSize:qF,layoutChildren:tb,resolveWidth:eb,resolveHeight:ib};Object.assign(N0,ab,ob,lb,ub,db);var fb=function(){for(var i=0,t=this.sizerChildren,s,g,C=0,M=t.length;C<M;C++)s=t[C],!s.rexSizer.hidden&&(g=s.rexSizer.proportion,g>0&&(i+=g));return i},cb={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},Bh=function(i){return typeof i=="string"&&(i=cb[i]),i};const Qo=Phaser.Utils.Objects.IsPlainObject,Ge=Phaser.Utils.Objects.GetValue;class Ct extends Ws{constructor(t,s,g,C,M,o,T){Qo(s)?(T=s,s=Ge(T,"x",0),g=Ge(T,"y",0),C=Ge(T,"width",void 0),M=Ge(T,"height",void 0),o=Ge(T,"orientation",0)):Qo(C)?(T=C,C=Ge(T,"width",void 0),M=Ge(T,"height",void 0),o=Ge(T,"orientation",0)):Qo(o)&&(T=o,o=Ge(T,"orientation",0)),o===void 0&&(o=0),super(t,s,g,C,M,T),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(o),this.setItemSpacing(Ge(T,"space.item",0)),this.setStartChildIndex(Ge(T,"startChildIndex",0)),this.setRTL(Ge(T,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Bh(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=fb.call(this)),this._childrenProportion}}Object.assign(Ct.prototype,N0);st.register("sizer",function(i,t,s,g,C,M){var o=new Ct(this.scene,i,t,s,g,C,M);return this.scene.add.existing(o),o});it(window,"RexPlugins.UI.Sizer",Ct);var z0=function(){return Array.prototype.reduce.call(arguments,vb,0)},vb=function(i,t){return i+t},pb=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);for(var t=0,s,g=this.sizerChildren,C,M,o,T,e=0;e<this.columnCount;e++){if(T=this.columnProportions[e],s=0,T===0||i){for(var d=0;d<this.rowCount;d++)C=g[d*this.columnCount+e],C&&(C.rexSizer.hidden||(M=C.rexSizer.padding,o=this.getChildWidth(C)+M.left+M.right,s=Math.max(s,o)));t+=s}this.columnWidth[e]=s}var x=this.space,u=Math.max(x.indentLeftOdd,x.indentLeftEven);return t+z0(x.left,u,...x.column,x.right)},gb=function(i){if(this.rexSizer.hidden)return 0;i===void 0&&(i=!0);for(var t=0,s,g=this.sizerChildren,C,M,o,T,e=0;e<this.rowCount;e++){if(T=this.rowProportions[e],s=0,T===0||i){for(var d=0;d<this.columnCount;d++)C=g[e*this.columnCount+d],C&&(C.rexSizer.hidden||(o=C.isRexSizer?Math.max(C.minHeight,C.childrenHeight):C.hasOwnProperty("minHeight")?C.minHeight:Mt(C),M=C.rexSizer.padding,o+=M.top+M.bottom,s=Math.max(s,o)));t+=s}this.rowHeight[e]=s}var x=this.space,u=Math.max(x.indentTopOdd,x.indentTopEven);return t+z0(x.top,u,...x.row,x.bottom)},mb=function(i,t){var s,g=i.rexSizer;if(g.expand){var C=g.padding;s=t-C.left-C.right}return s},xb=function(i,t){var s,g=i.rexSizer;if(g.expand){var C=g.padding;s=t-C.top-C.bottom}return s},yb=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,g=0,C=t.length;g<C;g++)s=t[g],s&&s.isRexSizer&&i.push(s);return i},Tb=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Nr.call(this),this},Cb=function(){for(var i,t,s,g=this.innerLeft,C=this.innerTop,M,o=C,T,e,d,x,u,l,h=this.space.column,n=this.space.row,r=this.space.indentLeftOdd,f=this.space.indentLeftEven,a=this.space.indentTopOdd,c=this.space.indentTopEven,p,v,m,y,E=0;E<this.rowCount;E++){v=this.getRowHeight(E),m=E%2?f:r,M=g+m;for(var P=0;P<this.columnCount;P++){if(p=this.getColumnWidth(P),i=this.getChildAt(P,E),!i||i.rexSizer.hidden){M+=p+h[P];continue}zr.call(this,i),u=this.getExpandedChildWidth(i,p),l=this.getExpandedChildHeight(i,v),i.isRexSizer?(i.runLayout(this,u,l),id(i,this)):ii(i,u,l),t=i.rexSizer,s=t.padding,T=M+s.left,d=p-s.left-s.right,y=P%2?c:a,e=o+y+s.top,x=v-s.top-s.bottom,Vr.call(this,i,T,e,d,x,t.align),M+=p+h[P]}o+=v+n[E]}},Sb=function(t){var t=Yu.call(this,t);if(this.proportionWidthLength===void 0){var s=this.totalColumnProportions;if(s>0){var g=t-this.getChildrenWidth(!1);g>=0&&(this.proportionWidthLength=g/s)}else this.proportionWidthLength=0}return t},Eb=function(t){var t=Xu.call(this,t);if(this.proportionHeightLength===void 0){var s=this.totalRowProportions;if(s>0){var g=t-this.getChildrenHeight(!1);g>=0&&(this.proportionHeightLength=g/s)}else this.proportionHeightLength=0}return t},Pb=function(i){var t,s,g;for(var C in this.sizerChildren)t=this.sizerChildren[C],t&&t.isRexSizer&&!t.ignoreLayout&&(g=this.getColumnWidth(parseInt(C)%this.columnCount),s=this.getExpandedChildWidth(t,g),s=t.resolveWidth(s),t.resolveChildrenWidth(s))},Mb=function(i){var t,s,g;for(var C in this.sizerChildren)t=this.sizerChildren[C],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(g=this.getColumnWidth(parseInt(C)%this.columnCount),s=this.getExpandedChildWidth(t,g),t.isRexSizer&&(s=t.resolveWidth(s)),t.runWidthWrap(s));return this};const wb=Phaser.Utils.Objects.IsPlainObject,fn=Phaser.Utils.Objects.GetValue,rv=Phaser.Display.Align.CENTER;var av=function(i,t,s,g,C){if(typeof i=="number"||typeof t=="number")if(i===void 0){for(var M,o=0;o<g;o++)if(M=t*g+o,!s[M])return M}else if(t===void 0){for(var M,o=0;o<C;o++)if(M=o*g+i,!s[M])return M}else{var M=t*g+i;if(!s[M])return M}else if(t===!0){for(var M,o=0;o<g;o++)for(var T=0;T<C;T++)if(M=T*g+o,!s[M])return M}else for(var o=0,e=s.length;o<e;o++)if(!s[o])return o;return null},Ab=function(i,t,s,g,C,M,o){if(Ir.call(this,i),wb(t)){var e=t;t=fn(e,"column",void 0),s=fn(e,"row",void 0),g=fn(e,"align",rv),C=fn(e,"padding",0),M=fn(e,"expand",!1),o=fn(e,"key",void 0)}var T=av(t,s,this.sizerChildren,this.columnCount,this.rowCount);if(T===null){if(typeof t=="number"&&typeof s=="number")return this;s===!0||typeof s=="number"?this.addEmptyColumn():this.addEmptyRow(),T=av(t,s,this.sizerChildren,this.columnCount,this.rowCount)}typeof g=="string"&&(g=Un[g]),g===void 0&&(g=rv),C===void 0&&(C=0),M===void 0&&(M=!0);var e=this.getSizerConfig(i);return e.align=g,e.padding=Yn(C),e.expand=M,this.sizerChildren[T]=i,o!==void 0&&this.addChildrenMap(o,i),this};const Rb={add:Ab};var Tn=function(i,t,s,g){s===void 0&&(s=0),g===void 0&&(g=i.length-1);for(var C=s;C<=g;C++)i[C]=t;return i};const Ob={remove(i,t){if(this.getParentSizer(i)!==this)return this;var s=this.sizerChildren.indexOf(i);return s!==-1&&(this.sizerChildren[s]=null),Br.call(this,i,t),this},removeAt(i,t,s){var g=this.getChildAt(i,t);return g&&this.remove(g,s),this},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--){var s=this.sizerChildren[t];!s||this.remove(s,i)}return this},clear(i){return Tn(this.sizerChildren,null),Rh.call(this,i),this}},hv=Phaser.Utils.Objects.GetValue;var Lb=function(i,t,s,g,C){if(s===void 0&&(s=0),g===void 0&&(g=0),this.columnCount=i,this.rowCount=t,this.gridCount=i*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=i*t,Tn(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=i,typeof s=="number")Tn(this.columnProportions,s);else for(var M=0;M<i;M++)this.columnProportions[M]=s[M]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof g=="number")Tn(this.rowProportions,g);else for(var M=0;M<t;M++)this.rowProportions[M]=g[M]||0;this.columnWidth=[],this.columnWidth.length=i,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=i-1;var o=hv(C,"column",0);if(typeof o=="number")Tn(this.space.column,o);else for(var M=0,T=this.space.column.length;M<T;M++)this.space.column[M]=o[M]||0;this.space.row=[],this.space.row.length=t-1;var e=hv(C,"row",0);if(typeof e=="number")Tn(this.space.row,e);else for(var M=0,T=this.space.row.length;M<T;M++)this.space.row[M]=e[M]||0;return this},V0=function(i,t,s){t===void 0&&(t=this.rowProportions[0]||0),s===void 0&&(s=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var g=[i*this.columnCount,0],C=0;C<this.columnCount;C++)g.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,g),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(i,0,s),this},Fb=function(i,t){return V0.call(this,this.rowCount,i,t),this},U0=function(i,t,s){t===void 0&&(t=this.columnProportions[0]||0),s===void 0&&(s=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var g=this.rowCount-1;g>=0;g--){var C=g*this.columnCount+i;this.sizerChildren.splice(C,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(i,0,s),this},bb=function(i,t){return U0.call(this,this.columnCount,i,t),this},Y0={getChildrenWidth:pb,getChildrenHeight:gb,getExpandedChildWidth:mb,getExpandedChildHeight:xb,getChildrenSizers:yb,preLayout:Tb,layoutChildren:Cb,resolveWidth:Sb,resolveHeight:Eb,resolveChildrenWidth:Pb,runWidthWrap:Mb,resetGrid:Lb,inseryEmptyRow:V0,addEmptyRow:Fb,insertEmptyColumn:U0,addEmptyColumn:bb};Object.assign(Y0,Rb,Ob);var Db=function(){for(var i=0,t,s=0;s<this.columnCount;s++)t=this.columnProportions[s],t>0&&(i+=t);return i},Ib=function(){for(var i=0,t,s=0;s<this.rowCount;s++)t=this.rowProportions[s],t>0&&(i+=t);return i};const Pa=Phaser.Utils.Objects.IsPlainObject,Lt=Phaser.Utils.Objects.GetValue;class zi extends Ws{constructor(t,s,g,C,M,o,T,e,d,x){Pa(s)?(x=s,s=Lt(x,"x",0),g=Lt(x,"y",0),C=Lt(x,"width",void 0),M=Lt(x,"height",void 0),o=Lt(x,"column",x.col||0),T=Lt(x,"row",0),e=Lt(x,"columnProportions",0),d=Lt(x,"rowProportions",0)):Pa(C)?(x=C,C=Lt(x,"width",void 0),M=Lt(x,"height",void 0),o=Lt(x,"column",x.col||0),T=Lt(x,"row",0),e=Lt(x,"columnProportions",0),d=Lt(x,"rowProportions",0)):Pa(o)?(x=o,o=Lt(x,"column",x.col||0),T=Lt(x,"row",0),e=Lt(x,"columnProportions",0),d=Lt(x,"rowProportions",0)):Pa(e)&&(x=e,e=Lt(x,"columnProportions",0),d=Lt(x,"rowProportions",0)),super(t,s,g,C,M,x),this.type="rexGridSizer",this.resetGrid(o,T,e,d,Lt(x,"space",void 0)),this.setIndentLeft(Lt(x,"space.indentLeftOdd",0),Lt(x,"space.indentLeftEven",0)),this.setIndentTop(Lt(x,"space.indentTopOdd",0),Lt(x,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var u=Lt(x,"createCellContainerCallback");if(u)for(var g=0,l=this.rowCount;g<l;g++)for(var s=0,h=this.columnCount;s<h;s++){var n={column:s,row:g},r=u(t,s,g,n);r&&this.add(r,n)}}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIndentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setColumnProportion(t,s){return t>=this.columnProportions.length?this:(this.columnProportions[t]=s,this)}setRowProportion(t,s){return t>=this.rowProportions.length?this:(this.rowProportions[t]=s,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=Db.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=Ib.call(this)),this._totalRowProportions}getChildAt(t,s){return this.sizerChildren[s*this.columnCount+t]}childToGridIndex(t,s){if(!t)return null;var g=this.sizerChildren.indexOf(t);return g===-1?null:(s===void 0&&(s={}),s.x=g%this.columnCount,s.y=Math.floor(g/this.columnCount),s)}getColumnWidth(t){var s=this.columnProportions[t],g=s===0?this.columnWidth[t]:s*this.proportionWidthLength;return g}getRowHeight(t){var s=this.rowProportions[t],g=s===0?this.rowHeight[t]:s*this.proportionHeightLength;return g}}Object.assign(zi.prototype,Y0);st.register("gridSizer",function(i,t,s,g,C,M,o,T,e){var d=new zi(this.scene,i,t,s,g,C,M,o,T,e);return this.scene.add.existing(d),d});it(window,"RexPlugins.UI.GridSizer",zi);var Bb=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},Gb=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},Nb=function(i){i===void 0&&(i=[]);for(var t=this.sizerChildren,s,g=0,C=t.length;g<C;g++)s=t[g],s!==`
`&&s.isRexSizer&&i.push(s);return i},zb=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,Nr.call(this),this},Vb=function(){for(var i=this.innerWidth,t=this.justifyPercentage,s=this.space.item,g=this.space.line,C=this.space.indentLeftOdd,M=this.space.indentLeftEven,o=this.space.indentTopOdd,T=this.space.indentTopEven,e,d,x,u=0,l,h,n=this.innerLeft,r=this.innerTop,f,a,c,p,v=this.widthWrapResult.lines,m,y,E,P,S=r,w=0,A=v.length;w<A;w++){switch(m=v[w],y=m.children,this.rtl&&y.reverse(),l=w%2?M:C,P=n+l,E=i-m.width,this.align){case 0:break;case 1:P+=E;break;case 2:P+=E/2;break;case 3:u=qo(i,E,t,y.length);break;case 4:u=qo(i,E,t,y.length),u===0&&(P+=E);break;case 5:u=qo(i,E,t,y.length),u===0&&(P+=E/2);break}for(var R=!0,O=0,F=y.length;O<F;O++)e=y[O],!e.rexSizer.hidden&&(d=e.rexSizer,x=d.padding,zr.call(this,e),f=P+x.left,R?R=!1:f+=s,h=O%2?T:o,a=S+h+x.top,c=At(e),p=Mt(e),P=f+c+x.right+u,Vr.call(this,e,f,a,c,p,d.align));S+=m.height+g}},qo=function(i,t,s,g){return t/i<=s?t/(g-1):0},Ub=function(i,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var s=this.sizerChildren,g=this.space.item,C=this.space.line,M=this.space.indentLeftOdd,o=this.space.indentLeftEven,T=this.space.indentTopOdd,e=this.space.indentTopEven,d,x,u,l=0,h,n=t.lines,r=void 0,f,a=0,c=s.length;a<c;a++){if(d=s[a],d===`
`)d=void 0,x=0,f=!0;else{if(d.rexSizer.hidden)continue;d.isRexSizer&&d.layout(),x=Yb(d),f=l<x||r===void 0}if(f){r&&(r.width=i-(l+g),t.width=Math.max(t.width,r.width),t.height+=r.height+C),r={children:[],height:0},n.push(r);var h=n.length%2?M:o;l=i-h}l-=x+g,d&&(r.children.push(d),u=Xb(d),r.height=Math.max(r.height,u))}return r&&(r.width=i-(l+g),t.width=Math.max(t.width,r.width),t.height+=r.height),t.height+=Math.max(T,e),t},Yb=function(i){var t=i.rexSizer.padding;return At(i)+t.left+t.right},Xb=function(i){var t=i.rexSizer.padding;return Mt(i)+t.top+t.bottom},Wb=function(i){var t=i-this.space.left-this.space.right;this.widthWrapResult=Ub.call(this,t,this.widthWrapResult),o0.call(this,i)};const ov=Phaser.Math.Distance.Between;var kb=function(i,t){var s=this.sizerChildren;if(s.length===0)return-1;for(var g=-1,C=1/0,M=0,o=s.length;M<o;M++){var T=s[M];if(!(Math.abs(T.centerY-t)>T.height/2)){var d=ov(T.left,T.centerY,i,t);C>d&&(C=d,g=M);var e=s[M+1];if(!(e&&e.y===T.y)){var d=ov(T.right,T.centerY,i,t);C>d&&(C=d,g=M+1)}}}return g};const Hb=Phaser.Utils.Objects.IsPlainObject,_o=Phaser.Utils.Objects.GetValue,$b=Phaser.Display.Align.CENTER;var tl=function(i,t,s,g){if(i===`
`)return this.addNewLine(),this;if(Ir.call(this,i),Hb(t)){var C=t;t=_o(C,"padding",0),s=_o(C,"key",void 0),g=_o(C,"index",void 0)}t===void 0&&(t=0);var C=this.getSizerConfig(i);return C.align=$b,C.padding=Yn(t),g===void 0||g>=this.sizerChildren.length?this.sizerChildren.push(i):this.sizerChildren.splice(g,0,i),s!==void 0&&this.addChildrenMap(s,i),this};const Kb={add(i,t,s){if(ei(i))for(var g=i,C=0,M=g.length;C<M;C++)tl.call(this,g[C],t);else tl.call(this,i,t,s);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(i,t,s,g){return tl.call(this,t,s,g,i),this},insertAtPosition(i,t,s,g,C){var M=kb.call(this,i,t);return M===-1&&(M=void 0),this.insert(M,s,g,C),this}},Zb=Phaser.Utils.Array.Remove,Jb={remove(i,t){return this.getParentSizer(i)!==this?this:(Zb(this.sizerChildren,i),Br.call(this,i,t),this)},removeAll(i){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],i);return this},clear(i){return this.sizerChildren.length=0,Rh.call(this,i),this}};var X0={getChildrenWidth:Bb,getChildrenHeight:Gb,getChildrenSizers:Nb,preLayout:zb,layoutChildren:Vb,runWidthWrap:Wb};Object.assign(X0,Kb,Jb);var jb=function(i){i===void 0&&(i=this.sizerChildren);for(var t=0,s,g,C=0,M=i.length;C<M;C++)s=i[C],s!==`
`&&(g=this.getChildWidth(s),t=Math.max(g,t));return t},Qb=function(i){i===void 0&&(i=this.sizerChildren);for(var t=0,s,g,C=0,M=i.length;C<M;C++)s=i[C],s!==`
`&&(g=s.isRexSizer?Math.max(s.minHeight,s.childrenHeight):s.hasOwnProperty("minHeight")?s.minHeight:Mt(s),t=Math.max(g,t));return t};const lv=Phaser.Utils.Objects.IsPlainObject,oe=Phaser.Utils.Objects.GetValue;class fs extends Ws{constructor(t,s,g,C,M,o){lv(s)?(o=s,s=oe(o,"x",0),g=oe(o,"y",0),C=oe(o,"width",void 0),M=oe(o,"height",void 0)):lv(C)&&(o=C,C=oe(o,"width",void 0),M=oe(o,"height",void 0)),super(t,s,g,C,M,o),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(oe(o,"orientation",0)),this.setItemSpacing(oe(o,"space.item",0)),this.setLineSpacing(oe(o,"space.line",0)),this.setIntentLeft(oe(o,"space.indentLeftOdd",0),oe(o,"space.indentLeftEven",0)),this.setIntentTop(oe(o,"space.indentTopOdd",0),oe(o,"space.indentTopEven",0)),this.setAlign(oe(o,"align",0)),this.setJustifyPercentage(oe(o,"justifyPercentage",.25)),this.setRTL(oe(o,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Bh(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,s){return this.space.indentLeftOdd=t,this.space.indentLeftEven=s,this}setIntentTop(t,s){return this.space.indentTopOdd=t,this.space.indentTopEven=s,this}setAlign(t){return typeof t=="string"&&(t=qb[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=jb.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=Qb.call(this)),this._maxChildHeight}}const qb={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(fs.prototype,X0);st.register("fixWidthSizer",function(i,t,s,g,C){var M=new fs(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.FixWidthSizer",fs);st.register("overlapSizer",function(i,t,s,g,C){var M=new De(this.scene,i,t,s,g,C);return this.scene.add.existing(M),M});it(window,"RexPlugins.UI.OverlapSizer",De);st.register("space",function(){var i=new Ih(this.scene);return i});it(window,"RexPlugins.UI.Space",Ih);var bi=function(i,t,s,g){var C=new $l(t,s,g);if(i&&!i.isRexSizer){var M=C.createGeometryMask();i.setMask(M),this.once("destroy",function(){i.setMask(),M.destroy()})}return this.pin(C),C},Ma=function(i,t,s){if(!!i){var g=t==null,C=s==null;return g&&C||(g||(i.displayWidth=t),C||(i.displayHeight=s),g&&(i.scaleX=i.scaleY),C&&(i.scaleY=i.scaleX)),i}},_b=function(i){i===void 0?i={}:typeof i=="string"&&(i={text:i});var t=i.text||"";this.setText(t);var s=this.childrenMap.icon;if(s){i.icon===void 0?this.hide(s):this.show(s);var g=i.iconSize;g&&(this.setChildDisplaySize(s,g,g),this.iconWidth!==void 0&&this.setIconSize(g)),this.setIconTexture(i.icon,i.iconFrame)}var C=this.childrenMap.action;if(C){i.action===void 0?this.hide(C):this.show(C);var M=i.actionSize;M&&(this.setChildDisplaySize(C,M,M),this.actionWidth!==void 0&&this.setActionSize(M)),this.setActionTexture(i.action,i.actionFrame)}return this},t5={resetDisplayContent:_b};const $t=Phaser.Utils.Objects.GetValue;class Ci extends Ct{constructor(t,s){super(t,s),this.type="rexLabel";var g=$t(s,"background",void 0),C=$t(s,"icon",void 0),M=$t(s,"iconMask",void 0),o=$t(s,"text",void 0),T=$t(s,"action",void 0),e=$t(s,"actionMask",void 0),d=$t(s,"align",void 0);if(g&&this.addBackground(g),(d==="right"||d==="bottom"||d==="center")&&this.addSpace(),C){var x=$t(s,"space.icon",0),u;this.orientation===0?(o||T)&&(u={right:x}):(o||T)&&(u={bottom:x});var l=$t(s,"squareFitIcon",!1)?1:0;if(this.add(C,{proportion:0,padding:u,fitRatio:l}),M&&(M=bi.call(this,C,C,1)),!l){var h=$t(s,"iconSize",void 0);this.setIconSize($t(s,"iconWidth",h),$t(s,"iconHeight",h))}}if(o){var n=$t(s,"space.text",0),r=$t(s,"expandTextWidth",!1),f=$t(s,"expandTextHeight",!1),a,u,c;this.orientation===0?(a=r?1:0,T&&(u={right:n}),c=f):(a=f?1:0,T&&(u={bottom:n}),c=r),this.add(o,{proportion:a,expand:c,padding:u})}if(T){var l=$t(s,"squareFitAction",!1)?1:0;if(this.add(T,{proportion:0,fitRatio:l}),e&&(e=bi.call(this,T,T,1)),!l){var p=$t(s,"actionSize");this.setActionSize($t(s,"actionWidth",p),$t(s,"actionHeight",p))}}d==="center"&&this.addSpace(),this.addChildrenMap("background",g),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",M),this.addChildrenMap("text",o),this.addChildrenMap("action",T),this.addChildrenMap("actionMask",e)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var s=this.childrenMap.text;s!==void 0&&s.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setIconTexture(t,s){var g=this.childrenMap.icon;return g===void 0?this:(g.setTexture(t,s),this.iconWidth!==void 0&&(Ma(g,this.iconWidth,this.iconHeight),this.resetChildScaleState(g)),this)}setTexture(t,s){return this.setIconTexture(t,s),this}setIconSize(t,s){return s===void 0&&(s=t),this.iconWidth=t,this.iconHeight=s,this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}setActionTexture(t,s){var g=this.childrenMap.action;return g===void 0?this:(g.setTexture(t,s),this.actionWidth!==void 0&&(Ma(g,this.actionWidth,this.actionHeight),this.resetChildScaleState(g)),this)}get actionTexture(){var t=this.childrenMap.action;if(t!==void 0)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t!==void 0)return t.frame}setActionSize(t,s){return s===void 0&&(s=t),this.actionWidth=t,this.actionHeight=s,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&Ma(t,this.iconWidth,this.iconHeight);var s=this.childrenMap.action;s&&this.actionWidth!==void 0&&Ma(s,this.actionWidth,this.actionHeight),super.preLayout()}runLayout(t,s,g){if(this.ignoreLayout)return this;super.runLayout(t,s,g);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var M=this.childrenMap.actionMask;return M&&(M.setPosition(),this.resetChildPositionState(M)),this}resize(t,s){super.resize(t,s);var g=this.childrenMap.iconMask;g&&g.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(Ci.prototype,t5);st.register("label",function(i){var t=new Ci(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Label",Ci);const e5=Phaser.GameObjects.Image,uv=Phaser.GameObjects.NineSlice;var Ve=function(i,t){var s;t&&(t.hasOwnProperty("type")?s=t.type:t.hasOwnProperty("leftWidth")?s="nineSlice":t.hasOwnProperty("key")&&(s="image"));var g;switch(s){case"image":g=new e5(i,0,0,t.key,t.frame);break;case"nineSlice":uv?g=new uv(i,0,0,t.key,t.frame,0,0,t.leftWidth,t.rightHeight,t.topHeight,t.bottomHeight):g=new Ar(i,t);break;default:g=new lh(i,t);break}return i.add.existing(g),g};const cn=Phaser.Utils.Objects.GetValue,i5=Phaser.GameObjects.Text,s5=Phaser.GameObjects.BitmapText;var W0=function(i,t){var s=cn(t,"$type");s===void 0&&cn(t,"key")&&(s="bitmaptext");var g;switch(s){case"bitmaptext":var C=cn(t,"key"),M=cn(t,"size");M===void 0&&(M=cn(t,"fontSize")),g=new s5(i,0,0,C,"",M);var o=cn(t,"color");o!==void 0&&g.setTint(o);break;case"text":g=new i5(i,0,0,"",t);break;default:g=new Is(i,0,0,"",t);break}return i.add.existing(g),g};const n5=Phaser.GameObjects.BitmapText;var k0=function(i){return i instanceof n5};const r5=Phaser.GameObjects.Text;var ld=function(i){return i instanceof r5},a5=function(i){var t=function(s){var g=i.padding,C=s-g.left-g.right,M=i.style;return ld(i)?(M.wordWrapWidth=C,M.maxLines=0):(M.wrapMode===0&&(M.wrapMode=1),M.wrapWidth=C,M.maxLines=0),M.fixedWidth=s,M.fixedHeight=0,i.updateText(),i.minHeight=i.height,i};return t},h5=function(i){var t=function(s){return i.setFixedSize(s,0).runWordWrap(),i.minHeight=i.height,i};return t},o5=function(i){var t=function(s){return i.setMaxWidth(s),i.minHeight=i.height,i};return t},l5=function(i){return i instanceof Nn},H0=function(i,t){return t===void 0&&(t=0),i._minWidth=t,i.runWidthWrap=l5(i)?h5(i):k0(i)?o5(i):a5(i),i};const u5=Phaser.GameObjects.Image;var dv=function(i,t){var s=new u5(i,0,0,"");return i.add.existing(s),s};const ar=Phaser.Utils.Objects.GetValue;var ud=function(i,t,s){t=t?ge(t):{};var g=ar(s,"background",Ve),C=ar(s,"text",W0),M=ar(s,"icon",dv),o=ar(s,"action",dv);if(g?t.background=g(i,t.background):delete t.background,C){var T=ar(t,"wrapText",!1);T&&(T===!0&&(T="word"),it(t,"text.wrap.mode",T),t.expandTextWidth=!0),t.text=C(i,t.text),T&&(t.text=H0(t.text))}else delete t.text;return M&&t.icon!==null?t.icon=M(i,t.icon):delete t.icon,o&&t.action!==null?t.action=o(i,t.action):delete t.action,t};class dd extends Ci{constructor(t,s,g){s=ud(t,s,g),super(t,s),this.type="rexSimpleLabel"}setActiveState(t){var s=this.childrenMap.background;return s&&s.setActiveState&&s.setActiveState(t),this}setHoverState(t){var s=this.childrenMap.background;return s&&s.setHoverState&&s.setHoverState(t),this}setDisableState(t){var s=this.childrenMap.background;return s&&s.setDisableState&&s.setDisableState(t),this}}st.register("simpleLabel",function(i,t){var s=new dd(this.scene,i,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.SimpleLabel",dd);const bt=Phaser.Utils.Objects.GetValue;class $0 extends Ct{constructor(t,s){super(t,s),this.type="rexTitleLabel";var g=bt(s,"background",void 0),C=bt(s,"icon",void 0),M=bt(s,"iconMask",void 0),o=bt(s,"title",void 0),T=bt(s,"separator",void 0),e=bt(s,"text",void 0),d=bt(s,"action",void 0),x=bt(s,"actionMask",void 0),u=e||o||T;if(g&&this.addBackground(g),C){var l=void 0;this.orientation===0?(u||d)&&(l={right:bt(s,"space.icon",0),top:bt(s,"space.iconTop",0),bottom:bt(s,"space.iconBottom",0)}):(u||d)&&(l={bottom:bt(s,"space.icon",0),left:bt(s,"space.iconLeft",0),right:bt(s,"space.iconRight",0)}),this.add(C,{proportion:0,padding:l}),M&&(M=bi.call(this,C,C,1))}if(u){var h=new Ct(t,{orientation:1}),n=bt(s,"space.separator",0);if(o){var r=bt(s,"align.title","right"),l={bottom:!T&&e?n:0};h.add(o,{align:r})}if(T){var l={top:o?n:0,bottom:e?n:0,left:bt(s,"space.separatorLeft",0),right:bt(s,"space.separatorRight",0)};h.add(T,{expand:!0,padding:l})}if(e){var f=bt(s,"align.text","right");h.add(e,{align:f})}var l=void 0;d&&(l={right:bt(s,"space.text",0)}),this.add(h,{proportion:1,padding:l})}if(d){var l;this.orientation===0?l={top:bt(s,"space.actionTop",0),bottom:bt(s,"space.actionBottom",0)}:l={left:bt(s,"space.actionLeft",0),right:bt(s,"space.actionRight",0)},this.add(d,{proportion:0,padding:l}),x&&(x=bi.call(this,d,d,1))}this.addChildrenMap("background",g),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",M),this.addChildrenMap("title",o),this.addChildrenMap("separator",T),this.addChildrenMap("text",e),this.addChildrenMap("action",d),this.addChildrenMap("actionMask",x)}get title(){var t=this.childrenMap.title;return t===void 0?"":t.title}set title(t){var s=this.childrenMap.title;s!==void 0&&s.setText(t)}setTitle(t){return this.title=t,this}appendTitle(t){return this.title+=t,this}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var s=this.childrenMap.text;s!==void 0&&s.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,s){var g=this.childrenMap.icon;if(g!==void 0)return g.setTexture(t,s),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,s,g){if(this.ignoreLayout)return this;super.runLayout(t,s,g);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var M=this.childrenMap.actionMask;return M&&(M.setPosition(),this.resetChildPositionState(M)),this}resize(t,s){super.resize(t,s);var g=this.childrenMap.iconMask;g&&g.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}st.register("titleLabel",function(i){var t=new $0(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TitleLabel",$0);const wt=Phaser.Utils.Objects.GetValue,d5=Phaser.Utils.Objects.IsPlainObject;var f5=function(i,t){var s=wt(t,"background",void 0),g=wt(t,"icon",void 0),C=wt(t,"iconMask",void 0),M=wt(t,"nameText",void 0),o=wt(t,"valueText",void 0),T=wt(t,"bar",void 0),e=wt(t,"action",void 0),d=wt(t,"actionMask",void 0);d5(T)&&(T=new Au(i,T),i.add.existing(T),M&&i.children.moveBelow(T,M),o&&i.children.moveBelow(T,o));var x=M||o||T;if(s&&this.addBackground(s),g){var u=void 0;this.orientation===0?(x||e)&&(u={right:wt(t,"space.icon",0),top:wt(t,"space.iconTop",0),bottom:wt(t,"space.iconBottom",0)}):(x||e)&&(u={bottom:wt(t,"space.icon",0),left:wt(t,"space.iconLeft",0),right:wt(t,"space.iconRight",0)}),this.add(g,{proportion:0,padding:u}),C&&(C=bi.call(this,g,g,1))}if(x){var l=new Ct(i,{orientation:1}),h;if(M||o){if(h=new Ct(i,{orientation:0}),M){M.text===""&&M.setText(" "),M.setOrigin(0,M.originY);var u={left:wt(t,"space.name",0)};h.add(M,{padding:u})}if(o){o.text===""&&o.setText(" "),o.setOrigin(1,o.originY),h.addSpace();var u={right:wt(t,"space.value",0)};h.add(o,{padding:u}),this.setValueTextFormatCallback(wt(t,"valueTextFormatCallback",c5),wt(t,"valueTextFormatCallbackScope",void 0))}l.add(h,{expand:!0})}if(T){var u={top:h?wt(t,"space.bar",0):0,bottom:wt(t,"space.barBottom",0),left:wt(t,"space.barLeft",0),right:wt(t,"space.barRight",0)};l.add(T,{expand:!0,padding:u})}var u=void 0;e&&(u={right:wt(t,"space.text",0)});var n=wt(t,"align.text","bottom");this.add(l,{proportion:1,align:n,padding:u})}if(e){var u;this.orientation===0?u={top:wt(t,"space.actionTop",0),bottom:wt(t,"space.actionBottom",0)}:u={left:wt(t,"space.actionLeft",0),right:wt(t,"space.actionRight",0)},this.add(e,{proportion:0,padding:u}),d&&(d=bi.call(this,e,e,1))}this.addChildrenMap("background",s),this.addChildrenMap("icon",g),this.addChildrenMap("iconMask",C),this.addChildrenMap("name",M),this.addChildrenMap("value",o),this.addChildrenMap("bar",T),this.addChildrenMap("action",e),this.addChildrenMap("actionMask",d)},c5=function(i,t,s){return i.toString()};const v5=Phaser.Math.Clamp,p5={setValueTextFormatCallback(i,t){return this.valueTextFormatCallback=i,this.valueTextFormatCallbackScope=t,this},getFormatValueText(i,t,s){i===void 0&&(i=this.value),t===void 0&&(t=this.minValue),s===void 0&&(s=this.maxValue);var g;return this.valueTextFormatCallbackScope?g=this.valueTextFormatCallback(i,t,s):g=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,i,t,s),g},updateValueText(i,t,s){var g=this.childrenMap.value;return g&&this.valueTextFormatCallback&&(g.setText(this.getFormatValueText(i,t,s)),g.layout&&g.layout()),this},setValue(i,t,s){return i=v5(i,t,s),this.value=i,this.minValue=t,this.maxValue=s,this.updateValueText(i,t,s),this.setBarValue(i,t,s),this}};class fd extends Ct{constructor(t,s){super(t,s),this.type="rexNameValueLabel",f5.call(this,t,s)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var s=this.childrenMap.name;s!==void 0&&s.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var s=this.childrenMap.value;s!==void 0&&s.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var s=this.childrenMap.bar;s!==void 0&&s.setValue(t)}setBarValue(t,s,g){var C=this.childrenMap.bar;return C===void 0?this:(C.setValue(t,s,g),this)}easeBarValueTo(t,s,g){var C=this.childrenMap.bar;return C===void 0?this:(C.easeValueTo(t,s,g),this)}setTexture(t,s){var g=this.childrenMap.icon;if(g!==void 0)return g.setTexture(t,s),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,s,g){if(this.ignoreLayout)return this;super.runLayout(t,s,g);var C=this.childrenMap.iconMask;C&&(C.setPosition(),this.resetChildPositionState(C));var M=this.childrenMap.actionMask;return M&&(M.setPosition(),this.resetChildPositionState(M)),this}resize(t,s){super.resize(t,s);var g=this.childrenMap.iconMask;g&&g.resize();var C=this.childrenMap.actionMask;return C&&C.resize(),this}}Object.assign(fd.prototype,p5);st.register("nameValueLabel",function(i){var t=new fd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.NameValueLabel",fd);const wa=Ct.prototype.add,fv=Ct.prototype.addSpace;var el=function(i){var t=!i.isRexSpace,s=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var g=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");g&&fv.call(this),wa.call(this,i,{proportion:s,expand:!0});var C=!this.buttonsExpand&&this.buttonsAlign==="center";C&&fv.call(this),this.hasTailSpace=C}else wa.call(this,i,{proportion:s,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var M=this.sizerChildren.length-1;wa.call(this,i,{index:M,proportion:s,expand:!0})}else wa.call(this,i,{proportion:s,expand:!0});return t&&this.buttonGroup.add(i),this};const g5={addButton(i){if(ei(i))for(var t=i,s=0,g=t.length;s<g;s++)el.call(this,t[s]);else el.call(this,i);return this},addButtons(i){for(var t=0,s=i.length;t<s;t++)el.call(this,i[t]);return this}},m5=Ct.prototype.remove,x5=Ct.prototype.clear;var il=function(i,t){return this.getParentSizer(i)!==this?this:(this.buttonGroup.remove(i),m5.call(this,i,t),this)};const y5={remove(i,t){if(ei(i))for(var s=i,g=0,C=s.length;g<C;g++)il.call(this,s[g],t);else il.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,x5.call(this,i),this},removeButton(s,t){var s=this.getButton(s);return s?(this.remove(s,t),this):this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)il.call(this,t[s],i);return this}};var T5=function(i,t,s){if(!!i){var g=this.setValueCallback,C=this.setValueCallbackScope;g&&(C?g.call(C,i,t,s):g(i,t,s)),this.fireEvent("button.statechange",i,t,s)}},C5=function(i){var t=this;i._selected=void 0,Object.defineProperty(i,"selected",{get:function(){return i._selected},set:function(s){if(i._selected!==s){var g=i._selected;i._selected=s,T5.call(t,i,s,g)}},enumerable:!0,configurable:!0}),i.selected=!1};const S5={add(i){return this.buttons.push(i),i._click||(i._click=new us(i,this.clickConfig),i._click.on("click",function(t,s,g,C){this.fireEvent("button.click",s,g,C)},this).on("enable",function(t,s){this.fireEvent("button.enable",s)},this).on("disable",function(t,s){this.fireEvent("button.disable",s)},this),i.on("pointerover",function(t,s,g,C){this.fireEvent("button.over",i,t,C)},this).on("pointerout",function(t,s){this.fireEvent("button.out",i,t,s)},this)),this.buttonsType&&(i.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),C5.call(this,i)),this},addMultiple(i){for(var t=0,s=i.length;t<s;t++)this.add(i[t]);return this}},E5=Phaser.Utils.Array.Remove,P5={remove(i){return this.buttonsType&&delete i.selected,E5(this.buttons,i),this},clear(){if(this.buttonsType)for(var i=this.buttons,t=0,s=i.length;t<s;t++)delete i[t].selected;return this.buttons.length=0,this}};var M5=function(i,t,...s){var g;if(typeof t=="number"){if(g=t,t=this.buttons[g],!t)return}else if(g=this.buttons.indexOf(t),g===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(i,t,g,...s),this.groupName!==void 0?this.eventEmitter.emit(i,t,this.groupName,g,...s):this.eventEmitter.emit(i,t,g,...s)};const hr=Phaser.Utils.Objects.GetValue,w5={setButtonsType(i){i===void 0&&(i={});var t=hr(i,"buttonsType",i.type);if(this.buttonsType=t,!this.buttonsType)return this;var s,g;switch(s=hr(i,"setValueCallback",void 0),g=hr(i,"setValueCallbackScope",void 0),s===void 0&&(s=hr(i,"setButtonStateCallback",void 0),g=hr(i,"setButtonStateCallbackScope",void 0)),this.setValueCallback=s,this.setValueCallbackScope=g,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var i=this.parent,t=this.buttons;i._value=void 0;var s=void 0;return Object.defineProperty(i,"value",{get:function(){return i._value},set:function(g){if(i._value!==g){i._value=g;for(var C=0,M=t.length;C<M;C++){var o=t[C];o.rexSizer.hidden||(s===void 0?o.name===g?o.selected=!0:o.selected=!1:s===C?o.selected=!0:o.selected=!1)}}},enumerable:!0,configurable:!0}),i.on("button.click",function(g){s=this.buttons.indexOf(g),i.value=g.name,s=void 0},this),this},setCheckboxesType(){var i=this.parent;return i.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var i=this.buttons,t=0,s=i.length;t<s;t++){var g=i[t];g.selected=!1}return this},getAllButtonsState(){for(var i={},t=this.buttons,s=0,g=t.length;s<g;s++){var C=t[s];C.rexSizer.hidden||(i[C.name]=C.selected)}return i},setSelectedButtonName(i){return this.parent.value=i,this},getSelectedButtonName(){return this.parent.value},setButtonState(i,t){t===void 0&&(t=!0);for(var s=this.buttons,g=0,C=s.length;g<C;g++){var M=s[g];if(!M.rexSizer.hidden&&M.name===i){M.selected=t;break}}return this},getButtonState(i){for(var t=this.buttons,s=0,g=t.length;s<g;s++){var C=t[s];if(!C.rexSizer.hidden&&C.name===i)return C.selected}}};var A5=function(i,t){if(i)if(ei(i)){for(var s,g=0,C=i.length;g<C;g++)if(s=cv(i[g],t),s)return s}else{var s;for(var M in i)if(s=cv(i[M],t),s)return s}else return null},cv=function(i,t){return i?i.hasOwnProperty("name")?i.name===t?i:null:GetElementByName(i,t):null};const Gh={getButton(i){var t=this.buttons,s,g=typeof i;switch(g){case"number":s=t[i];break;case"string":s=A5(t,i);break;default:s=i,t.indexOf(s)===-1&&(s=void 0);break}return s},setButtonEnable(i,t){var s=this.buttons;if(i===void 0||typeof i=="boolean"){t=i;for(var g=0,C=s.length;g<C;g++)s[g]._click.setEnable(t)}else this.getButton(i)._click.setEnable(t);return this},toggleButtonEnable(i){var t=this.buttons;if(i===void 0||typeof i=="boolean")for(var s=0,g=t.length;s<g;s++)t[s]._click.toggleEnable();else this.getButton(i)._click.toggleEnable();return this},getButtonEnable(i){return i===void 0&&(i=0),this.getButton(i)._click.enable},emitButtonClick(i){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",i),this},showButton(i){return Qi(this.getButton(i)),this},hideButton(i){return qi(this.getButton(i)),this},isButtonShown(i){return Ku(this.getButton(i)),this},forEachButtton(i,t){for(var s=this.buttons,g=0,C=s.length;g<C;g++)t?i.call(t,s[g],g,s):i(s[g],g,s);return this}};class Nh{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var R5={fireEvent:M5};Object.assign(Nh.prototype,S5,P5,w5,Gh,R5);const cd={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(i){return this.buttonGroup.setSelectedButtonName(i),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(i,t){return this.buttonGroup.setButtonState(i,t),this},getButtonState(i){return this.buttonGroup.getButtonState(i)}},Rs=Phaser.Utils.Objects.GetValue;class te extends Ct{constructor(t,s){s===void 0&&(s={});var g=s.space;typeof g=="number"&&(s.space={item:g}),super(t,s),this.type="rexButtons",this.buttonGroup=new Nh({parent:this,eventEmitter:Rs(s,"eventEmitter",this),groupName:Rs(s,"groupName",void 0),clickConfig:Rs(s,"click",void 0)}).setButtonsType(s);var C=Rs(s,"background",void 0),M=Rs(s,"buttons",void 0);this.buttonsExpand=Rs(s,"expand",!1),this.buttonsAlign=Rs(s,"align",void 0),C&&this.addBackground(C),M&&this.addButtons(M),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(te.prototype,g5,y5,Gh,cd);st.register("buttons",function(i){var t=new te(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Buttons",te);const O5=zi.prototype.add,L5={addButton(i,t,s){return O5.call(this,i,t,s,void 0,0,this.buttonsExpand),this.buttonGroup.add(i),this},addButtons(i,t){for(var s=0,g=i;s<g;s++)this.addButton(i[s],void 0,t);return this}},F5=zi.prototype.remove,b5=zi.prototype.clear;var sl=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),F5.call(this,s,t),this):this};const D5={remove(i,t){if(ei(i))for(var s=i,g=0,C=s.length;g<C;g++)sl.call(this,s[g],t);else sl.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,b5.call(this,i),this},removeButton(i,t){return this.remove(i,t),this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)sl.call(this,t[s],i);return this}},li=Phaser.Utils.Objects.GetValue;class Yr extends zi{constructor(t,s){s===void 0&&(s={});var g=li(s,"row",0),C=li(s,"column",s.col||0),M=li(s,"createCellContainerCallback"),o=li(s,"buttons",void 0),T=li(s,"expand",!0),e=T?1:0;if(M&&(s.createCellContainerCallback=void 0),o!==void 0){g=Math.max(g,o.length);for(var d=0,x=o.length;d<x;d++)C=Math.max(C,o[d].length)}s.row=g,s.column=C,s.columnProportions=e,s.rowProportions=e,super(t,s),this.type="rexGridButtons",this.buttonGroup=new Nh({parent:this,eventEmitter:li(s,"eventEmitter",this),groupName:li(s,"groupName",void 0),clickConfig:li(s,"click",void 0)}).setButtonsType(s);var u=li(s,"background",void 0);if(this.buttonsExpand=T,li(s,"space",void 0),u&&this.addBackground(u),o)for(var l,h,n=0,r=o.length;n<r;n++){l=o[n];for(var f=0,a=l.length;f<a;f++)h=l[f],h&&this.addButton(h,f,n)}else if(M)for(var c=0;c<g;c++)for(var p=0;p<C;p++){var h=M(t,p,c);h&&this.addButton(h,p,c)}this.addChildrenMap("background",u),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Yr.prototype,L5,D5,Gh,cd);st.register("gridButtons",function(i){var t=new Yr(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.GridButtons",Yr);const K0=fs.prototype.add;var Aa=function(i){return K0.call(this,i),this.buttonGroup.add(i),this};const I5={addButton(i){if(ei(i))for(var t=i,s=0,g=t.length;s<g;s++)Aa.call(this,t[s]);else Aa.call(this,i);return this},addButtons(i){if(ei(i[0]))for(var t=i,s,g=0,C=t.length-1;g<=C;g++){s=t[g];for(var M=0,o=s.length;M<o;M++)Aa.call(this,s[M]);g>C&&K0.addNewLine(this)}else for(var M=0,o=i.length;M<o;M++)Aa.call(this,i[M]);return this}},B5=fs.prototype.remove,G5=fs.prototype.clear;var nl=function(s,t){var s=this.getButton(s);return s?(this.buttonGroup.remove(s),B5.call(this,s,t),this):this};const N5={remove(i,t){if(ei(i))for(var s=i,g=0,C=s.length;g<C;g++)nl.call(this,s[g],t);else nl.call(this,i,t);return this},clear(i){var t=this.buttonGroup.buttons;return t.length=0,G5.call(this,i),this},removeButton(i,t){return this.remove(i,t),this},clearButtons(i){for(var t=this.buttonGroup.buttons,s=t.length-1;s>=0;s--)nl.call(this,t[s],i);return this}},vn=Phaser.Utils.Objects.GetValue;class rs extends fs{constructor(t,s){s===void 0&&(s={});var g=s.space;typeof g=="number"&&(s.space={item:g,line:g}),super(t,s),this.type="rexFixWidthButtons",this.buttonGroup=new Nh({parent:this,eventEmitter:vn(s,"eventEmitter",this),groupName:vn(s,"groupName",void 0),clickConfig:vn(s,"click",void 0)}).setButtonsType(s);var C=vn(s,"background",void 0),M=vn(s,"buttons",void 0);this.buttonsAlign=vn(s,"align",void 0),C&&this.addBackground(C),M&&this.addButtons(M),this.addChildrenMap("background",C),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(rs.prototype,I5,N5,Gh,cd);st.register("fixWidthButtons",function(i){var t=new rs(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.FixWidthButtons",rs);const z5={setAccept(i){return this.childrenMap.fileChooser.setAccept(i),this},setMultiple(i){return this.childrenMap.fileChooser.setMultiple(i),this},loadFile(i,t,s,g,C){return this.childrenMap.fileChooser.loadFile(i,t,s,g,C),this},loadFilePromise(i,t,s,g){return this.childrenMap.fileChooser.loadFilePromise(i,t,s,g)}},vv=Phaser.Utils.Objects.GetValue;class vd extends Ci{constructor(t,s){super(t,s),this.type="rexFileSelectorButton";var g=new Dh(t);t.add.existing(g),this.addBackground(g),this.addChildrenMap("fileChooser",g),this.setAccept(vv(s,"accept","")),this.setMultiple(vv(s,"multiple",!1)),g.on("change",function(C){var M=C.files;M.length!==0&&(M=Array.from(M),this.emit("select",M,this))},this)}get files(){return this.childrenMap.fileChooser.files}}Object.assign(vd.prototype,z5);st.register("fileSelectorButton",function(i){var t=new vd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.FileSelectorButton",vd);const V5={getChoice(i){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(i)},getAction(i){return this.childrenMap.actionsSizer.getButton(i)},getToolbar(i){return this.childrenMap.toolbarSizer.getButton(i)},getLeftToolbar(i){return this.childrenMap.leftToolbarSizer.getButton(i)},setChoiceEnable(i,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonEnable(i,t),this},setActionEnable(i,t){return this.childrenMap.actionsSizer.setButtonEnable(i,t),this},setToolbarEnable(i,t){return this.childrenMap.toolbarSizer.setButtonEnable(i,t),this},setLeftToolbarEnable(i,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(i,t),this},toggleChoiceEnable(i){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(i),this},toggleActionEnable(i){return this.childrenMap.actionsSizer.toggleButtonEnable(i),this},toggleToolbarEnable(i){return this.childrenMap.toolbarSizer.toggleButtonEnable(i),this},toggleLeftToolbarEnable(i){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(i),this},getChoiceEnable(i){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(i):!1},getActionEnable(i){return this.childrenMap.actionsSizer.getButtonEnable(i)},getToolbarEnable(i){return this.childrenMap.toolbarSizer.getButtonEnable(i)},getLeftToolbarEnable(i){return this.childrenMap.leftToolbarSizer.getButtonEnable(i)},emitChoiceClick(i){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(i),this},emitActionClick(i){return this.childrenMap.actionsSizer.emitButtonClick(i),this},emitToolbarClick(i){return this.childrenMap.toolbarSizer.emitButtonClick(i),this},emitLeftToolbarClick(i){return this.childrenMap.leftToolbarSizer.emitButtonClick(i),this},showChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.showButton(i),this},showAction(i){return this.childrenMap.actionsSizer.showButton(i),this},showToolbar(i){return this.childrenMap.toolbarSizer.showButton(i),this},showLeftToolbar(i){return this.childrenMap.leftToolbarSizer.showButton(i),this},hideChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(i),this},hideAction(i){return this.childrenMap.actionsSizer.hideButton(i),this},hideToolbar(i){return this.childrenMap.toolbarSizer.hideButton(i),this},hideLeftToolbar(i){return this.childrenMap.leftToolbarSizer.hideButton(i),this},addChoice(i){var t=this.childrenMap.choicesSizer;return t&&t.addButton(i),this},addAction(i){return this.childrenMap.actionsSizer.addButton(i),this},addToolbar(i){return this.childrenMap.toolbarSizer.addButton(i),this},addLeftToolbar(i){return this.childrenMap.leftToolbarSizer.addButton(i),this},removeChoice(i,t){var s=this.childrenMap.choicesSizer;return s&&s.removeButton(i,t),this},removeAction(i,t){return this.childrenMap.actionsSizer.removeButton(i,t),this},removeToolbar(i,t){return this.childrenMap.toolbarSizer.removeButton(i,t),this},removeLeftToolbar(i,t){return this.childrenMap.leftToolbarSizer.removeButton(i,t),this},clearChoices(i){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(i),this},clearActions(i){return this.childrenMap.actionsSizer.clearButtons(i),this},clearToolbar(i){return this.childrenMap.toolbarSizer.clearButtons(i),this},clearLeftToolbar(i){return this.childrenMap.leftToolbarSizer.clearButtons(i),this},forEachChoice(i,t){var s=this.childrenMap.choicesSizer;return s&&s.forEachButtton(i,t),this},forEachAction(i,t){return this.childrenMap.actionsSizer.forEachButtton(i,t),this},forEachToolbar(i,t){return this.childrenMap.toolbarSizer.forEachButtton(i,t),this},forEachLeftToolbar(i,t){return this.childrenMap.leftToolbarSizer.forEachButtton(i,t),this},setAllButtonsEnable(i){return i===void 0&&(i=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(i),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(i),this.childrenMap.actionsSizer&&this.setActionEnable(i),this.childrenMap.choicesSizer&&this.setChoiceEnable(i),this},getChoicesButtonStates(){var i=this.childrenMap.choicesSizer;return i?i.getAllButtonsState():{}},getChoicesButtonState(i){var t=this.childrenMap.choicesSizer;return i===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(i):!1},setChoicesButtonState(i,t){var s=this.childrenMap.choicesSizer;return s&&s.setButtonState(i,t),this},clearChoicesButtonStates(){var i=this.childrenMap.choicesSizer;return i&&i.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var i=this.childrenMap.choicesSizer;return i?i.getSelectedButtonName():""},setChoicesSelectedButtonName(i){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(i),this}},U5={onCreateModalBehavior(i){i.on("button.click",function(t,s,g,C,M){if(s==="actions"){var o={index:g,text:t.text,button:t,dialog:i};switch(i.buttonsType){case"radio":o.value=i.getChoicesSelectedButtonName();break;case"checkboxes":o.value=i.getChoicesButtonStates();break;default:o.value=void 0}i.modalClose(o)}})},modal(i,t){return i&&i.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,Qu.modal.call(this,i,t),this}};var Z0={};Object.assign(Z0,V5,U5);const lt=Phaser.Utils.Objects.GetValue;class Xr extends Ct{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexDialog",this.eventEmitter=lt(s,"eventEmitter",this);var g=lt(s,"background",void 0),C=lt(s,"title",void 0),M=lt(s,"toolbar",void 0),o=lt(s,"toolbarBackground",void 0),T=lt(s,"leftToolbar",void 0),e=lt(s,"leftToolbarBackground",void 0),d=lt(s,"content",void 0),x=lt(s,"description",void 0),u,l=lt(s,"choices",void 0),h=lt(s,"choicesBackground",void 0),n,r=lt(s,"actions",void 0),f=lt(s,"actionsBackground",void 0),a=lt(s,"click",void 0);g&&this.addBackground(g);var c;M&&(c=new te(t,{groupName:"toolbar",background:o,buttons:M,orientation:0,space:{item:lt(s,"space.toolbarItem",0)},click:a,eventEmitter:this.eventEmitter}));var p;if(T&&(p=new te(t,{groupName:"leftToolbar",background:e,buttons:T,orientation:0,space:{item:lt(s,"space.leftToolbarItem",0)},click:a,eventEmitter:this.eventEmitter})),C||M||T){var v=!!C&&lt(s,"expand.title",!0),m=lt(s,"align.title","center"),y=C&&!v&&m==="center"||!C&&(M||T),E=!y,P;E?P=new Ct(t,{orientation:0}):P=new De(t);var S=E?!0:{height:!0};if(p&&P.add(p,{align:"left",expand:S}),C){E&&!v&&m==="right"&&P.addSpace();var A={left:lt(s,"space.titleLeft",0),right:lt(s,"space.titleRight",0)},R=v?1:0;P.add(C,{align:m,proportion:R,expand:S,padding:A}),E&&!v&&m==="left"&&P.addSpace()}c&&(E&&!C&&P.addSpace(),P.add(c,{align:"right",expand:S}));var w=lt(s,"space.title",0),A;(d||x||l||r)&&(A={bottom:w});var R=lt(s,"proportion.title",0);this.add(P,{padding:A,proportion:R,expand:!0})}if(d){var O=lt(s,"align.content","center"),F=lt(s,"space.content",0),A={left:lt(s,"space.contentLeft",0),right:lt(s,"space.contentRight",0),bottom:x||l||r?F:0},R=lt(s,"proportion.content",0),L=lt(s,"expand.content",!0);this.add(d,{align:O,padding:A,proportion:R,expand:L})}if(x){var O=lt(s,"align.description","center"),D=lt(s,"space.description",0),A={left:lt(s,"space.descriptionLeft",0),right:lt(s,"space.descriptionRight",0),bottom:l||r?D:0},R=lt(s,"proportion.description",0),L=lt(s,"expand.description",!0);this.add(x,{align:O,padding:A,proportion:R,expand:L})}if(l){var I=lt(s,"choicesType","").split("-"),B=or(I,"wrap")?rs:or(I,"grid")?Yr:te,V=or(I,"radio")?"radio":or(I,"checkboxes")?"checkboxes":void 0,Y={left:lt(s,"space.choicesBackgroundLeft",0),right:lt(s,"space.choicesBackgroundRight",0),top:lt(s,"space.choicesBackgroundTop",0),bottom:lt(s,"space.choicesBackgroundBottom",0)},W=lt(s,"space.choice",0);B===te?Y.item=W:B===rs?(Y.item=W,Y.line=lt(s,"space.choiceLine",W)):(Y.column=lt(s,"space.choiceColumn",W),Y.row=lt(s,"space.choiceRow",W));var $={width:lt(s,"choicesWidth",void 0),height:lt(s,"choicesHeight",void 0),groupName:"choices",buttonsType:V,background:h,buttons:l,space:Y,click:a,eventEmitter:this.eventEmitter,setValueCallback:lt(s,"choicesSetValueCallback",void 0),setValueCallbackScope:lt(s,"choicesSetValueCallbackScope",void 0)};B===te&&($.orientation=or(I,"x")?0:1),u=new B(t,$);var N=lt(s,"space.choices",0),A={left:lt(s,"space.choicesLeft",0),right:lt(s,"space.choicesRight",0),bottom:r?N:0},O=lt(s,"align.choices","center"),R=lt(s,"proportion.choices",0),L=lt(s,"expand.choices",!0);this.add(u,{align:O,padding:A,proportion:R,expand:L}),this.buttonsType=V}if(r){n=new te(t,{groupName:"actions",background:f,buttons:r,orientation:0,space:{item:lt(s,"space.action",0)},expand:lt(s,"expand.actions",!1),align:lt(s,"align.actions","center"),click:a,eventEmitter:this.eventEmitter});var A={left:lt(s,"space.actionsLeft",0),right:lt(s,"space.actionsRight",0)},R=lt(s,"proportion.action",0);this.add(n,{align:"center",padding:A,proportion:R,expand:!0})}lr(this,"click"),lr(this,"over"),lr(this,"out"),lr(this,"enable"),lr(this,"disable"),this.addChildrenMap("background",g),this.addChildrenMap("title",C),this.addChildrenMap("toolbar",M),this.addChildrenMap("leftToolbar",T),this.addChildrenMap("content",d),this.addChildrenMap("description",x),this.addChildrenMap("choices",u?u.buttons:void 0),this.addChildrenMap("actions",n?n.buttons:void 0),this.addChildrenMap("choicesSizer",u),this.addChildrenMap("actionsSizer",n),this.addChildrenMap("toolbarSizer",c),this.addChildrenMap("leftToolbarSizer",p)}}var or=function(i,t){return i.indexOf(t)!==-1},pv={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},lr=function(i,t){i.on(`button.${t}`,function(s,g,C,M,o){!pv.hasOwnProperty(g)||i.emit(`${pv[g]}.${t}`,s,C,M,o)})};Object.assign(Xr.prototype,Z0);st.register("dialog",function(i){var t=new Xr(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Dialog",Xr);var Ue=function(i,t,s){var g=new dd(i,t,s);return i.add.existing(g),g},Y5=function(i){return i===void 0&&(i={}),X5.call(this,i),W5.call(this,i),k5.call(this,i),H5.call(this,i),this},X5=function(i){var t=this.childrenMap.title;t.resetDisplayContent(i.title)},W5=function(i){var t=this.childrenMap.content;if(t.resetDisplayContent)t.resetDisplayContent(i.content);else{var s=i.content||"";t.setText(s)}},k5=function(i){var t=this.childrenMap.actions;if(!!t){var s=i.buttons;if(s){for(var M=this.scene,o=this.defaultActionConfig,T=this.defaultActionButtonCreator,e=0,d=s.length;e<d;e++){var x=s[e],u=t[e];u||(u=Ue(M,o,T),this.addAction(u)),u.show().resetDisplayContent(x)}this.buttonMode=s.length;for(var e=s.length,d=t.length;e<d;e++)t[e].hide()}else{var g=t[0];g&&g.resetDisplayContent(i.buttonA);var C=t[1];C&&C.resetDisplayContent(i.buttonB)}}},H5=function(i){var t=this.childrenMap.choices;if(!!t){var s=i.choices;s||(s=[]);for(var g=this.scene,C=this.defaultChoiceConfig,M=this.defaultActionButtonCreator,o=0,T=s.length;o<T;o++){var e=s[o];typeof e=="string"&&(e={text:e});var d=t[o];d||(d=Ue(g,C,M),this.addChoice(d)),d.show().resetDisplayContent(e);var x;e.hasOwnProperty("value")?x=e.value:x=e.text,d.setName(x)}for(var o=s.length,T=t.length;o<T;o++)t[o].hide()}},$5=function(i,t){ns(i)&&(t=i,i=void 0),i===void 0&&(i={});var s=this.buttonMode===0;return i.hasOwnProperty("anyTouchClose")||(i.anyTouchClose=s),i.hasOwnProperty("manualClose")||(i.manualClose=!s),Qu.modal.call(this,i,t),this},K5={resetDisplayContent:Y5,modal:$5},Z5=function(i){i.setHoverState&&i.setHoverState(!0)},J5=function(i){i.setHoverState&&i.setHoverState(!1)},j5=function(i,t,s,g){i.setActiveState&&i.setActiveState(g)},Q5=function(i){i.setDisableState&&i.setDisableState(!1)},q5=function(i){i.setDisableState&&i.setDisableState(!0)},_5=function(){this.on("button.over",Z5).on("button.out",J5).on("button.enable",Q5).on("button.disable",q5).on("button.statechange",j5)};const J0={v:0,vertical:0,y:0,h:1,horizontal:1,x:1},t3=Phaser.Utils.Objects.GetValue;var zh=function(i,t){var s=t3(i,"scrollMode",0);return typeof s=="string"&&(s=J0[s]),s};const gv=Phaser.Math.Percent;var j0=function(i,t,s){var g;return i.y===t.y?g=gv(s.x,i.x,t.x):i.x===t.x&&(g=gv(s.y,i.y,t.y)),g},e3=function(i,t,s){if(!!this.enable){rl.x=t,rl.y=s;var g,C;this.reverseAxis?(g=this.getEndPoint(),C=this.getStartPoint()):(g=this.getStartPoint(),C=this.getEndPoint()),this.value=j0(g,C,rl)}},rl={},mv=function(i,t,s){if(!!this.enable&&!!i.isDown){al.x=i.worldX,al.y=i.worldY;var g,C;this.reverseAxis?(g=this.getEndPoint(),C=this.getStartPoint()):(g=this.getStartPoint(),C=this.getEndPoint());var M=j0(g,C,al);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-M)<.1?this.value=M:this.easeValueTo(M)}},al={},Q0=function(i,t){t===void 0&&(t=i3);var s=this.childrenMap.thumb,g=s.x,C=s.y;return Dr(s,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,i),t.x=s.x,t.y=s.y,s.x=g,s.y=C,t},i3={};const s3=Phaser.Display.Align.LEFT_CENTER,n3=Phaser.Display.Align.TOP_CENTER;var r3=function(i){if(i===void 0&&(i=a3),this.childrenMap.thumb){var t=this.orientation===0?s3:n3;Q0.call(this,t,i)}else this.orientation===0?(i.x=this.innerLeft+1,i.y=this.centerY):(i.x=this.centerX,i.y=this.innerTop+1);return i},a3={};const h3=Phaser.Display.Align.RIGHT_CENTER,o3=Phaser.Display.Align.BOTTOM_CENTER;var l3=function(i){if(i===void 0&&(i=u3),this.childrenMap.thumb){var t=this.orientation===0?h3:o3;Q0.call(this,t,i)}else this.orientation===0?(i.x=this.innerRight-1,i.y=this.centerY):(i.x=this.centerX,i.y=this.innerBottom-1);return i},u3={};const xv=Phaser.Math.Linear;var d3=function(i,t,s,g){return g===void 0&&(g=f3),g.x=xv(t.x,s.x,i),g.y=xv(t.y,s.y,i),g},f3={},c3=function(i){var t=this.childrenMap.thumb;if(t===void 0)return this;i===void 0&&(i=this.value);var s,g;return this.reverseAxis?(s=this.getEndPoint(),g=this.getStartPoint()):(s=this.getStartPoint(),g=this.getEndPoint()),d3(i,s,g,t),this.resetChildPositionState(t),this};const v3=Phaser.Display.Align.LEFT_CENTER,p3=Phaser.Display.Align.TOP_CENTER,g3=Phaser.Display.Align.RIGHT_CENTER,m3=Phaser.Display.Align.BOTTOM_CENTER;var x3=function(i){var t=this.childrenMap.indicator;if(t===void 0)return this;i===void 0&&(i=this.value);var s=this.reverseAxis,g,C,M=this.childrenMap.thumb;if(M)if(this.orientation===0){var o=At(M);if(s){var T=M.x-o*M.originX;g=this.right-T}else{var T=M.x-o*M.originX,e=T+o;g=e-this.left}}else{var d=Mt(M);if(s){var x=M.y-d*M.originY;C=this.bottom-x}else{var x=M.y-d*M.originY,u=x+d;C=u-this.top}}else this.orientation===0?g=this.width*i:C=this.height*i;ii(t,g,C);var l;s?l=this.orientation===0?g3:m3:l=this.orientation===0?v3:p3,h0(t,this,l),this.resetChildPositionState(t)};const Ze=Phaser.Utils.Objects.GetValue,Ra=Phaser.Utils.Objects.IsPlainObject,y3=Phaser.Math.Clamp,T3=Phaser.Math.Snap.To;class ks extends Xs(Ct){constructor(t,s){super(t,s),this.type="rexSlider",this.bootProgressBase(s),this.reverseAxis=Ze(s,"reverseAxis",!1);var g=Ze(s,"background",void 0),C=Ze(s,"track",void 0),M=Ze(s,"indicator",void 0),o=Ze(s,"thumb",void 0);g&&(Ra(g)&&(g=Ve(t,g)),this.addBackground(g)),C&&(Ra(C)&&(C=Ve(t,C)),this.add(C,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),M&&(Ra(M)&&(M=Ve(t,M)),this.pin(M)),o&&(Ra(o)&&(o=Ve(t,o)),this.pin(o));var T=Ze(s,"input",0);switch(typeof T=="string"&&(T=C3[T]),T){case 0:o&&(o.setInteractive(),this.scene.input.setDraggable(o),o.on("drag",e3,this).on("dragstart",function(e){this.eventEmitter.emit("inputstart",e)},this).on("dragend",function(e){this.eventEmitter.emit("inputend",e)},this));break;case 1:this.on("pointerdown",mv,this).on("pointermove",mv,this).on("pointerdown",function(e){this.eventEmitter.emit("inputstart",e)},this).on("pointerup",function(e){this.eventEmitter.emit("inputend",e)},this).on("pointerover",function(e){e.isDown&&this.eventEmitter.emit("inputstart",e)},this).on("pointerout",function(e){e.isDown&&this.eventEmitter.emit("inputend",e)},this).setInteractive();break}this.addChildrenMap("background",g),this.addChildrenMap("track",C),this.addChildrenMap("indicator",M),this.addChildrenMap("thumb",o),this.setEnable(Ze(s,"enable",void 0)),this.setGap(Ze(s,"gap",void 0)),this.setValue(Ze(s,"value",0),Ze(s,"min",void 0),Ze(s,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,s,g){return t&&s!==void 0&&(t=t/(g-s)),this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=T3(t,this.gap));var s=this._value;this._value=y3(t,0,1),s!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,s,this.eventEmitter))}runLayout(t,s,g){return this.ignoreLayout?this:(super.runLayout(t,s,g),this.updateThumb(),this.updateIndicator(),this)}}const C3={pan:0,drag:0,click:1,none:-1};var S3={getStartPoint:r3,getEndPoint:l3,updateThumb:c3,updateIndicator:x3};Object.assign(ks.prototype,S3);const Ce=Phaser.Utils.Objects.GetValue;class Vh extends Ct{constructor(t,s){super(t,s),this.type="rexScrollBar";var g=Ce(s,"background",void 0),C=Ce(s,"buttons",void 0),M=Ce(C,"top",Ce(C,"left",void 0)),o=Ce(C,"bottom",Ce(C,"right",void 0)),T,e=Ce(s,"slider",void 0);if(g&&this.addBackground(g),M){this.add(M);var d=new In(M);d.on("intouch",function(){if(!!this.enable){var f=T.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=f}},this)}if(e){e.orientation=this.orientation,e.eventEmitter=this,e.value=null;var x;if(this.orientation===0){var u=Ce(e,"width",void 0);x=u===void 0?1:0}else{var l=Ce(e,"height",void 0);x=l===void 0?1:0}T=new ks(t,e),t.add.existing(T),this.add(T,{proportion:x})}if(o){this.add(o);var d=new In(o);d.on("intouch",function(){if(!!this.enable){var a=T.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=a}},this)}var h=[M,o];this.addChildrenMap("background",g),this.addChildrenMap("slider",T),this.addChildrenMap("buttons",h);var n=Ce(s,"valuechangeCallback",null);if(n!==null){var r=Ce(s,"valuechangeCallbackScope",void 0);this.on("valuechange",n,r)}this.setEnable(Ce(s,"enable",void 0)),this.setValue(Ce(s,"value",0)),this.setScrollStep(Ce(C,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,g),this}addValue(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,g),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,g),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class E3 extends Vh{constructor(t,s){s===void 0&&(s={});var g=Gs(s);s={slider:g},s.orientation=g.orientation,delete g.orientation,s.background=g.background,delete g.background,s.buttons=g.buttons,delete g.buttons,super(t,s);var C=this.childrenMap.slider;this.addChildrenMap("track",C.childrenMap.track),this.addChildrenMap("indicator",C.childrenMap.indicator),this.addChildrenMap("thumb",C.childrenMap.thumb)}}class P3 extends Ni{constructor(t,s){super(s),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,s=this.parent,g=s.dragState;return g.isDown&&(t=s.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,s){this.next()}next_DRAGBEGIN(){var t,s=this.parent,g=s.dragState;return g.isDown?t=g.pointer.getDistance()>=s.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,s){this.next()}next_DRAG(){var t,s=this.parent,g=s.dragState;return g.isUp&&(s.outOfBounds?t="BACK":s.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,s){var g=this.parent,C=g.dragState;C.justMoved&&g.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,s=this.parent,g=s.dragState;return g.isDown?t="DRAG":s.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,s){this.parent.sliding(t,s),this.next()}next_BACK(){var t,s=this.parent,g=s.dragState;return g.isDown?t="DRAG":s.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,s){this.parent.pullBack(t,s),this.next()}}const Oa=Phaser.Utils.Objects.GetValue,M3=Phaser.Math.Distance.Between;class w3 extends ee{constructor(t,s){super(t,s),this._enable=void 0,t.setInteractive(Oa(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Oa(t,"enable",!0)),this.holdThreshold=Oa(t,"holdThreshold",50),this.pointerOutReleaseEnable=Oa(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Cu(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=M3(this.preX,this.preY,this.x,this.y),s=t/(this.dt*.001);return s}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,s,g){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=s,this.localY=g)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,s,g){!this.enable||!t.isDown||this.pointer!==t||(this.localX=s,this.localY=g)}preupdate(t,s){if(!!this.enable){var g=this.pointer;this.justMoved=!1,g&&!this.isInTouched?(this.x=g.worldX,this.y=g.worldY,this.preX=g.worldX,this.preY=g.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",g,this.localX,this.localY)):g&&this.isInTouched?this.x===g.x&&this.y===g.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=g.worldX,this.y=g.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",g,this.localX,this.localY)):!g&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",g))}}}const hl=Phaser.Utils.Objects.GetValue;class A3{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(hl(t,"value",0)),this.setSpeed(hl(t,"speed",0)),this.setAcceleration(hl(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class R3{constructor(){this.value,this.dir,this.movement=new A3}init(t,s,g,C,M){return this.value=t,this.end=M,M!==void 0?this.dir=t<M:this.dir=s,this.movement.setSpeed(g).setAcceleration(-C),this}stop(){this.movement.reset()}update(t){var s=this.movement.getDeltaValue(t);return this.dir||(s=-s),this.end===void 0?this.value+=s:s===0?this.value=this.end:(this.value+=s,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Vt=Phaser.Utils.Objects.GetValue,O3=Phaser.Math.Clamp;class L3 extends ee{constructor(t,s){super(t,s);var g=Vt(s,"enable",!0);this._state=new P3(this,{enable:g,eventEmitter:!1});var C={inputConfig:Vt(s,"inputConfig",void 0),enable:g,pointerOutRelease:Vt(s,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new w3(t,C),this._enable=void 0,this._value=void 0,this._slowDown=new R3;var M=Vt(s,"valuechangeCallback",null);if(M!==null){var o=Vt(s,"valuechangeCallbackScope",void 0);this.on("valuechange",M,o)}if(M=Vt(s,"overmaxCallback",null),M!==null){var o=Vt(s,"overmaxCallbackScope",void 0);this.on("overmax",M,o)}if(M=Vt(s,"overminCallback",null),M!==null){var o=Vt(s,"overminCallbackScope",void 0);this.on("overmin",M,o)}this.resetFromJSON(s),this.boot()}resetFromJSON(t){this.setOrientationMode(Vt(t,"orientation",0)),this.setDragThreshold(Vt(t,"threshold",10)),this.setSlidingDeceleration(Vt(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Vt(t,"backDeceleration",2e3));var s=Vt(t,"dragRate",1);s=s*(Vt(t,"dragReverse",!1)?-1:1),this.setDragRate(s);var g=Vt(t,"bounds",void 0);return g?this.setBounds(g):this.setBounds(Vt(t,"max",0),Vt(t,"min",0)),this.setValue(Vt(t,"value",this.maxValue||0)),this.setEnable(Vt(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=F3[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,s){if(Array.isArray(t)){var g=t;t=g[0],s=g[1]}return t<s?(this.minValue=t,this.maxValue=s):(this.minValue=s,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var s=this._value,g=this.overMax(t),C=this.overMin(t);g&&this.emit("overmax",t,s),C&&this.emit("overmin",t,s),this.backEnable||(g&&(t=this.maxValue),C&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,s)}}setValue(t,s){return s===void 0&&(s=!1),s&&(t=O3(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,s){return this.setValue(this.value+t,s),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,s=this.dragSpeed;if(s===0){this._slowDown.stop(),this._state.next();return}var g=this.slidingDeceleration;this._slowDown.init(t,s>0,Math.abs(s),g)}sliding(t,s){s*=.001;var g=this._slowDown.update(s).value;this.overMax(g)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(g)?(this.value=this.minValue,this._slowDown.stop()):this.value=g}onPullBack(){var t=this.value,s=this.outOfMinBound?this.minValue:this.maxValue,g=Math.abs(s-t),C=this.backDeceleration,M=Math.sqrt(2*C*g);this._slowDown.init(t,void 0,M,C,s)}pullBack(t,s){s*=.001,this.value=this._slowDown.update(s).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const F3={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},La=Phaser.Utils.Objects.GetValue;class b3 extends ee{constructor(t,s){if(super(t,s),this.parent!==this.scene?this.focusMode=La(s,"focus",!1):this.focusMode=!1,this.setSpeed(La(s,"speed",.1)),this.setEnable(La(s,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(La(s,"inputConfig",void 0)).on("wheel",function(C,M,o,T,e){!this.enable||this.scroll(o)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,s,g,C,M,o){!this.enable||this.scroll(C)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const Ut=Phaser.Utils.Objects.GetValue;var D3=function(i,t){var s=i.scene,g=zh(t),C=new Ct(s,{orientation:g}),M=Ut(t,"child.gameObject",void 0),o=0,T=Ut(t,"slider",void 0),e,d=0,x=Ut(T,"position",0);typeof x=="string"&&(x=I3[x]);var u=x===0,l=Ut(t,"scroller",!0),h,n=Ut(t,"mouseWheelScroller",!1),r;if(M){var f=Ut(t,"space.child",0);if(i.childMargin={},typeof f!="number"){var a=f;g===0?(o={left:Ut(a,"left",0),right:Ut(a,"right",0)},i.childMargin.top=Ut(a,"top",0),i.childMargin.bottom=Ut(a,"bottom",0)):(o={top:Ut(a,"top",0),bottom:Ut(a,"bottom",0)},i.childMargin.top=Ut(a,"left",0),i.childMargin.bottom=Ut(a,"right",0))}else T&&(g===0?o=u?{right:f}:{left:f}:o=u?{bottom:f}:{top:f}),i.childMargin.top=0,i.childMargin.bottom=0;T?(T===!0&&(T={}),T.orientation=C.orientation===0?1:0,e=new E3(s,T),d=Ut(t,"space.slider",0),i.hideUnscrollableSlider=Ut(T,"hideUnscrollableSlider",!1),i.adaptThumbSizeMode=Ut(T,"adaptThumbSize",!1),i.minThumbSize=Ut(T,"minThumbSize",void 0)):(i.adaptThumbSizeMode=!1,i.minThumbSize=void 0),l&&(l===!0&&(l={}),l.orientation=g,h=new L3(M,l)),n&&(r=new b3(M,n)),e&&!u&&C.add(e,{proportion:0,align:"center",padding:d,expand:!0});var c=Ut(t,"child.proportion",1),p=Ut(t,"child.expand",!0);C.add(M,{proportion:c,align:"center",padding:o,expand:p}),e&&u&&C.add(e,{proportion:0,align:"center",padding:d,expand:!0})}return e&&e.on("valuechange",function(v){i.t=v,i.emit("scroll",i)}),h&&h.on("valuechange",function(v){i.childOY=v,i.emit("scroll",i)}),r&&r.on("scroll",function(v){i.addChildOY(-v,!0)}),i.addChildrenMap("child",M),i.addChildrenMap("slider",e),i.addChildrenMap("scroller",h),i.addChildrenMap("mouseWheelScroller",r),C},I3={right:0,left:1,bottom:0,top:1},B3=function(){var i=this.topChildOY,t=this.bottomChildOY,s=this.childrenMap.scroller,g=this.childrenMap.slider;return s&&s.setBounds(t,i),g&&g.setEnable(t!==i),this.updateController(),g&&(this.hideUnscrollableSlider&&this.setChildVisible(g,this.isOverflow),this.adaptThumbSizeMode&&G3.call(this)),this},G3=function(){var i=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,s=t.childrenMap.track,g=t.childrenMap.thumb,C=this.minThumbSize;if(this.scrollMode===0){var M=s.displayHeight*i;C!==void 0&&M<C&&(M=C),ii(g,void 0,M)}else{var o=s.displayWidth*i;C!==void 0&&o<C&&(o=C),ii(g,o,void 0)}N3.call(this)},N3=function(){var i=this.childrenMap.slider,t=i.minWidth,s=i.minHeight;i.minWidth=i.width,i.minHeight=i.height,i.layout(),i.minWidth=t,i.minHeight=s},z3=function(){var i=this.childrenMap.scroller,t=this.childrenMap.slider;i&&i.setValue(this.childOY),t&&t.setValue(this.t)};const ui=Phaser.Utils.Objects.GetValue,yv=Phaser.Math.Clamp;class Uh extends Ct{constructor(t,s){s===void 0&&(s={});var g=zh(s);s.orientation=g===0?1:0,super(t,s),this.type=ui(s,"type","rexScrollable");var C=ui(s,"background",void 0),M=D3(this,s),o=ui(s,"header",void 0),T=ui(s,"footer",void 0);if(C&&this.addBackground(C),o){var e=ui(s,"align.header","center"),d=ui(s,"space.header",0),x;g===0?x={bottom:d}:x={right:d};var u=ui(s,"expand.header",!0);this.add(o,{proportion:0,align:e,padding:x,expand:u})}if(M&&this.add(M,{proportion:1,align:"center",padding:0,expand:!0}),T){var e=ui(s,"align.footer","center"),l=ui(s,"space.footer",0),x;g===0?x={top:l}:x={left:l};var u=ui(s,"expand.footer",!0);this.add(T,{proportion:0,align:e,padding:x,expand:u})}this.addChildrenMap("background",C),this.addChildrenMap("header",o),this.addChildrenMap("footer",T),this.runLayoutFlag=!1}runLayout(t,s,g){return this.ignoreLayout?this:(super.runLayout(t,s,g),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var s=this.childMargin;if(s.top!==0||s.bottom!==0){var g=this.childrenMap.child,C=g.topChildOY-g.bottomChildOY,M=C+s.top+s.bottom,o=M*t-s.top;t=o/C}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,s=this.childMargin;if(s.top!==0||s.bottom!==0){var g=this.childrenMap.child,C=g.topChildOY-g.bottomChildOY,M=C+s.top+s.bottom,o=C*t+s.top;t=o/M}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,s){return s===void 0&&(s=!1),s&&(t=yv(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,s){return this.setChildOY(this.childOY+t,s),this}setT(t,s){return s===void 0&&(s=!1),s&&(t=yv(t,0,1)),this.t=t,this}addT(t,s){return this.setT(this.t+t,s),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var s=this.childrenMap.slider;!s||s.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var s=this.childrenMap.scroller;!s||s.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var s=this.childrenMap.mouseWheelScrollerEnable;!s||s.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var s=this.childrenMap.child;return s.setInteractive(),s.input.dropZone=t,this}}var V3={resizeController:B3,updateController:z3};Object.assign(Uh.prototype,V3);const Fe=0,Xe=1,We=2;var Wr=function(i){var t;return k0(i)?t=We:ld(i)?t=Fe:t=Xe,t},pd=function(i,t,s){var g=Wr(i);switch(g){case Fe:s=i.getWrappedText(t);break;case Xe:s=i.getPenManager(t,s);break;case We:i.maxWidth>0?s=i.setText(t).getTextBounds().wrappedText.split(`
`):s=t.split(`
`);break}return s},U3=function(i){return i!==void 0&&(this.text=i),this.lines=pd(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},q0=function(i){return(i-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},_0=function(i){return i*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},Y3=function(i){var t=i+this.visibleLinesCount+1,s;switch(this.textObjectType){case Fe:s=this.lines.slice(i,t).join(`
`);break;case Xe:var g=this.lines.getLineStartIndex(i),C=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(g,C,!0);break;case We:s=this.lines.slice(i,t).join(`
`);break}return s},gd=function(i,t){var s=Wr(i);switch(s){case Fe:var M=i.style,g=M.wordWrapWidth,C=M.wordWrapCallback;M.wordWrapWidth=0,M.wordWrapCallback=void 0,i.setText(t),M.wordWrapWidth=g,M.wordWrapCallback=C;break;case Xe:var M=i.style,o=M.wrapMode;M.wrapMode=0,i.setText(t),M.wrapMode=o;break;case We:var T=i._maxWidth;i._maxWidth=0,i.setText(t),i._maxWidth=T;break}},tm=function(){var i=this.textObject.rexSizer;this.textObject.y+=i.offsetY-i.preOffsetY,i.preOffsetY=i.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&X3.call(this)},X3=function(){if(!!this.textObject.setCrop){var i=this.textObject.rexSizer.offsetY,t,s;i<=0?(t=-i,s=this.height):(t=0,s=this.height-i),this.textObject.setCrop(0,t,this.width,s)}},W3=function(){var i=Math.max(Math.floor(q0.call(this,-this.textOY)),0),t=_0.call(this,i)+this.textOY,s=Y3.call(this,i);return gd(this.textObject,s),this.textObject.rexSizer.offsetY=t,tm.call(this),this},k3=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Nr.call(this),this},H3=function(i,t,s){if(s+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===s)){switch(this.textObjectWidth=t,this._textObjectRealHeight=s,this.textObjectType){case Fe:case Xe:i.setFixedSize(t,s);var g=i.style,C=Math.max(t,0);this.textObjectType===Fe?g.wordWrapWidth=C:(g.wrapMode===0&&(g.wrapMode=1),g.wrapWidth=C);break;case We:i.setMaxWidth(t);break}this.setText()}},$3=function(){var i,t,s,g=this.left,C=this.top,M,o,T,e;i=this.textObject,i.rexSizer.hidden||(t=i.rexSizer,s=t.padding,M=g+s.left,o=C+s.top,T=this.width-s.left-s.right,e=this.height-s.top-s.bottom,H3.call(this,i,T,e),Dr(i,M,o,T,e,t.align),t.preOffsetY=0,tm.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const K3={setText:U3,updateTextObject:W3,preLayout:k3,layoutChildren:$3},Tv=Phaser.Utils.Objects.IsPlainObject,Re=Phaser.Utils.Objects.GetValue,Z3=Phaser.Display.Align.TOP_LEFT;class em extends Ws{constructor(t,s,g,C,M,o){Tv(s)?(o=s,s=Re(o,"x",0),g=Re(o,"y",0),C=Re(o,"width",void 0),M=Re(o,"height",void 0)):Tv(C)&&(o=C,C=Re(o,"width",void 0),M=Re(o,"height",void 0)),super(t,s,g,C,M,o),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=Re(o,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Re(o,"clamplTextOY",!0)),this.alwaysScrollable=Re(o,"alwaysScrollable",!1);var T=Re(o,"background",void 0),e=Re(o,"text",void 0);e===void 0&&(e=J3(t)),this.textCropEnable=Re(o,"textCrop",!!e.setCrop);var d=Re(o,"textMask",!this.textCropEnable);T&&this.addBackground(T),this.add(e),this.sizerChildren=[e];var x=this.getSizerConfig(e);x.align=Z3,x.padding=Yn(0),x.expand=!0,this.textObject=e,this.textObjectType=Wr(e),x.preOffsetY=0,x.offsetY=0,d&&(this.textMask=bi.call(this,this.textObject,this)),this.addChildrenMap("background",T),this.addChildrenMap("text",e)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Fe:this.lines.length=0;break;case Xe:this.lines.destroy();break;case We:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Fe:case Xe:var s=this.textObject.style;t=s.metrics.fontSize+s.strokeThickness;break;case We:var g=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*g;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Fe:case Xe:t=this.textObject.lineSpacing;break;case We:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(q0.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=_0.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var s=this.topTextOY,g=this.bottomTextOY,C=this.textOYExceedTop(t),M=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:C?t=s:M&&(t=g)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=C,M&&(this.execeedBottomState||this.emit("execeedbottom",this,t,g)),this.execeedBottomState=M}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var J3=function(i){return i.add.text(0,0,"")};Object.assign(em.prototype,K3);var j3=function(i){Object.defineProperty(i,"childOY",{configurable:!0,get:function(){return i.textOY},set:function(t){i.textOY=t}}),Object.defineProperty(i,"topChildOY",{get:function(){return i.topTextOY}}),Object.defineProperty(i,"bottomChildOY",{get:function(){return i.bottomTextOY}}),Object.defineProperty(i,"childVisibleHeight",{get:function(){return i.textObjectHeight}}),Object.defineProperty(i,"childHeight",{get:function(){return i.textHeight}})};const Q3={setText(i){var t=this.childrenMap.child;return t.setText(i),this.resizeController(),this},appendText(i){return this.setText(this.text+i),this}};Phaser.Math.Clamp;const q3={scrollToLine(i){return this.setChildOY(-this.lineHeight*i),this},scrollToNextLine(i){i===void 0&&(i=1);var t=this.lineIndex+i;return this.scrollToLine(t),this}},Ai=Phaser.Utils.Objects.GetValue;class Xn extends Uh{constructor(t,s){s===void 0&&(s={});var g=Ai(s,"text",void 0),C=Ai(s,"textWidth",void 0),M=Ai(s,"textHeight",void 0),o=Ai(s,"textCrop",!!g.setCrop),T=Ai(s,"textMask",!o),e=Ai(s,"content",""),d=new em(t,{width:C,height:M,text:g,textMask:T,textCrop:o&&!T,content:e,clamplTextOY:Ai(s,"clamplChildOY",!1),alwaysScrollable:Ai(s,"alwaysScrollable",!1)});t.add.existing(d);var x=C===void 0?1:0,u=M===void 0;j3(d),s.scrollMode=0,s.type="rexTextArea",s.child={gameObject:d,proportion:x,expand:u};var l=Ai(s,"space",void 0);l&&(l.child=l.text),super(t,s),this.addChildrenMap("text",g)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}Object.assign(Xn.prototype,Q3,q3);const Fa=Phaser.Utils.Objects.GetValue;var _3=function(i,t,s){t=t?ge(t):{};var g=Fa(s,"background",Ve),C=Fa(s,"text",W0),M=Fa(s,"track",Ve),o=Fa(s,"thumb",Ve);g?t.background=g(i,t.background):delete t.background,C?t.text=C(i,t.text):delete t.text;var T=t.slider;T!==!1&&(T===void 0&&(T={}),M?T.track=M(i,T.track):delete T.track,o?T.thumb=o(i,T.thumb):delete T.thumb,t.slider=T);var e=new Xn(i,t);return i.add.existing(e),e};const t6=Phaser.Utils.Objects.GetValue;var e6=function(i,t,s){var g=t6(t,"$type");g===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(g="textarea");var C;switch(g){case"textarea":C=new _3(i,t,s);break;default:C=new Ue(i,t,s);break}return i.add.existing(C),C};const i6=Phaser.Utils.Objects.GetValue;class md extends Xr{constructor(t,s,g){s=s?ge(s):{},g===void 0&&(g={});var C=i6(g,"background",Ve);C?s.background=C(t,s.background):delete s.background,s.title=Ue(t,s.title,g.title),s.content=e6(t,s.content,g.content),s.content instanceof Xn&&vi(s,"height")&&!vi(s,"proportion.content")&&it(s,"proportion.content",1);var M=s.button,o=s.buttonA||M,T=s.buttonB||M,e=s.buttonMode;e===void 0&&(e=!!o&&!!T?2:o?1:0);var d=g.button,x=g.buttonA||d,u=g.buttonB||d;switch(e){case 2:s.actions=[Ue(t,o,x),Ue(t,T,u)];break;case 1:s.actions=[Ue(t,o,x)];break;case 0:break;default:s.actions=[];break}var l=s.choice;l&&(s.choices=[]),super(t,s),this.type="rexConfirmDialog",this.buttonMode=e,this.defaultActionConfig=M,this.defaultActionButtonCreator=d,this.defaultChoiceConfig=l,this.defaultChoiceCreator=g.choice;var h=this.childrenMap.actions;this.addChildrenMap("buttonA",h?h[0]:null),this.addChildrenMap("buttonB",h?h[1]:null),_5.call(this)}}Object.assign(md.prototype,K5);st.register("confirmDialog",function(i,t){var s=new md(this.scene,i,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.ConfirmDialog",md);const ba=Phaser.Utils.Objects.GetValue;var kr=function(i,t,s){var g=ba(i,`proportion.${t}`,s.proportion),C=ba(i,`align.${t}`,"center"),M=ba(i,`space.${t}`,void 0);if(typeof M=="number"&&s.paddingKey){var o=M;M={},M[s.paddingKey]=o}var T=ba(i,`expand.${t}`,!0);return{proportion:g,align:C,padding:M,expand:T}},Yh=function(i){return kr(i,"header",{proportion:0,paddingKey:"bottom"})},Xh=function(i){return kr(i,"leftSide",{proportion:0,paddingKey:"right"})},Wh=function(i){return kr(i,"content",{proportion:1})},kh=function(i){return kr(i,"rightSide",{proportion:0,paddingKey:"left"})},Hh=function(i){return kr(i,"footer",{proportion:0,paddingKey:"top"})},Li=function(i){return{proportion:1,align:"center",padding:0,expand:!0}},Fi=function(i,t){var s=new Ct(i,{orientation:t});return i.add.existing(s),s},s6=function(i){var t=this.scene,s=i.header;s&&this.add(s,Yh(i));var g=Fi(t,0);this.add(g,Li());var C=i.leftSide;C&&g.add(C,Xh(i));var M=i.content;M&&g.add(M,Wh(i));var o=i.rightSide;o&&g.add(o,kh(i));var T=i.footer;T&&this.add(T,Hh(i))},n6=function(i){var t=this.scene,s=i.header;s&&this.add(s,Yh(i));var g=Fi(t,0);this.add(g,Li());var C=i.leftSide;C&&g.add(C,Xh(i));var M=Fi(t,1);g.add(M,Li());var o=Fi(t,0);M.add(o,Li());var T=i.content;T&&o.add(T,Wh(i));var e=i.rightSide;e&&o.add(e,kh(i));var d=i.footer;d&&M.add(d,Hh(i))},r6=function(i){var t=this.scene,s=i.header;s&&this.add(s,Yh(i));var g=Fi(t,0);this.add(g,Li());var C=Fi(t,1);g.add(C,Li());var M=Fi(t,0);C.add(M,Li());var o=i.leftSide;o&&M.add(o,Xh(i));var T=i.content;T&&M.add(T,Wh(i));var e=i.footer;e&&C.add(e,Hh(i));var d=i.rightSide;d&&g.add(d,kh(i))},a6=function(i){var t=this.scene,s=i.header;s&&this.add(s,Yh(i));var g=Fi(t,0);this.add(g,Li());var C=i.leftSide;C&&g.add(C,Xh(i));var M=Fi(t,1);g.add(M,Li());var o=i.content;o&&M.add(o,Wh(i));var T=i.footer;T&&M.add(T,Hh(i));var e=i.rightSide;e&&g.add(e,kh(i))};const Cv=Phaser.Utils.Objects.GetValue,Sv=[s6,n6,r6,a6];var h6=function(i){this.clear(!0);var t=Cv(i,"background",void 0);t&&this.addBackground(t);var s=Cv(i,"layoutMode",0);typeof s=="string"&&(s=o6[s.toUpperCase()]);var g=Sv[s]||Sv[0];g.call(this,i),this.addChildrenMap("background",i.background),this.addChildrenMap("header",i.header),this.addChildrenMap("leftSide",i.leftSide),this.addChildrenMap("content",i.content),this.addChildrenMap("rightSide",i.rightSide),this.addChildrenMap("footer",i.footer)};const o6={FFF:0,LFF:1,FFR:2,LFR:3};class $h extends Ct{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexHolyGrail",this.build(s)}}var l6={build:h6};Object.assign($h.prototype,l6);st.register("holyGrail",function(i){var t=new $h(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.HolyGrail",$h);const u6={getButtonsSizer(i){return this.childrenMap[`${i}ButtonsSizer`]},getButton(i,t){var s=this.getButtonsSizer(i);return s?s.getButton(t):void 0},setButtonEnable(i,t,s){return this.getButtonsSizer(i).setButtonEnable(t,s),this},setLeftButtonEnable(i,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(i,t),this},setRightButtonEnable(i,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(i,t),this},setTopButtonEnable(i,t){return this.childrenMap.topButtonsSizer.setButtonEnable(i,t),this},setBottomButtonEnable(i,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(i,t),this},toggleButtonEnable(i,t){return this.getButtonsSizer(i).toggleButtonEnable(t),this},toggleLeftButtonEnable(i){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(i),this},toggleRightButtonEnable(i){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(i),this},toggleTopButtonEnable(i){return this.childrenMap.topButtonsSizer.toggleButtonEnable(i),this},toggleBottomButtonEnable(i){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(i),this},getButtonEnable(i,t){return this.getButtonsSizer(i).getButtonEnable(t)},getLeftButtonEnable(i){return this.childrenMap.leftButtonsSizer.getButtonEnable(i)},getRightButtonEnable(i){return this.childrenMap.rightButtonsSizer.getButtonEnable(i)},getTopButtonEnable(i){return this.childrenMap.topButtonsSizer.getButtonEnable(i)},getBottomButtonEnable(i){return this.childrenMap.bottomButtonsSizer.getButtonEnable(i)},emitButtonClick(i,t){var s=this.getButtonsSizer(i);return s?(s.emitButtonClick(t),this):this},emitLeftButtonClick(i){return this.childrenMap.leftButtonsSizer.emitButtonClick(i),this},emitRightButtonClick(i){return this.childrenMap.rightButtonsSizer.emitButtonClick(i),this},emitTopButtonClick(i){return this.childrenMap.topButtonsSizer.emitButtonClick(i),this},emitBottomButtonClick(i){return this.childrenMap.bottomButtonsSizer.emitButtonClick(i),this},getLeftButton(i){return this.childrenMap.leftButtonsSizer.getButton(i)},getRightButton(i){return this.childrenMap.rightButtonsSizer.getButton(i)},getTopButton(i){return this.childrenMap.topButtonsSizer.getButton(i)},getBottomButton(i){return this.childrenMap.bottomButtonsSizer.getButton(i)},showButton(i,t){return Qi(this.getButton(i,t)),this},showLeftButton(i){return Qi(this.getLeftButton(i)),this},showRightButton(i){return Qi(this.getRightButton(i)),this},showTopButton(i){return Qi(this.getTopButton(i)),this},showBottomButton(i){return Qi(this.getBottomButton(i)),this},hideButton(i,t){return qi(this.getButton(i,t)),this},hideLeftButton(i){return qi(this.getLeftButton(i)),this},hideRightButton(i){return qi(this.getRightButton(i)),this},hideTopButton(i){return qi(this.getTopButton(i)),this},hideBottomButton(i){return qi(this.getBottomButton(i)),this},addButton(i,t){return this.getButtonsSizer(i).addButton(t),this},addLeftButton(i){return this.addButton("left",i),this},addRightButton(i){return this.addButton("right",i),this},addTopButton(i){return this.addButton("top",i),this},removeButton(i,t,s){return this.getButtonsSizer(i).removeButton(t,s),this},removeLeftButton(i,t){return this.removeButton("left",i,t),this},removeRightButton(i,t){return this.removeButton("right",i,t),this},removeTopButton(i,t){return this.removeButton("top",i,t),this},removeBottomButton(i,t){return this.removeButton("bottom",i,t),this},clearButtons(i,t){return this.getButtonsSizer(i).clearButtons(t),this},clearLeftButtons(i){return this.clearButtons("left",i),this},clearRightButtons(i){return this.clearButtons("right",i),this},clearTopButtons(i){return this.clearButtons("top",i),this},clearBottomButtonss(i){return this.clearButtons("bottom",i),this},forEachButton(i,t,s){return this.getButtonsSizer(i).forEachButtton(t,s),this},forEachLeftButton(i,t){return this.childrenMap.leftButtonsSizer.forEachButtton(i,t),this},forEachRightButton(i,t){return this.childrenMap.rightButtonsSizer.forEachButtton(i,t),this},forEachTopButton(i,t){return this.childrenMap.topButtonsSizer.forEachButtton(i,t),this},forEachBottomButton(i,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(i,t),this}},Dt=Phaser.Utils.Objects.GetValue;class xd extends zi{constructor(t,s){s===void 0&&(s={}),s.column=3,s.row=3,super(t,s),this.type="rexTabs",this.eventEmitter=Dt(s,"eventEmitter",this);var g=Dt(s,"background",void 0),C=Dt(s,"panel",void 0),M=Dt(s,"leftButtons",void 0),o=Dt(s,"leftButtonsBackground",void 0),T,e=Dt(s,"rightButtons",void 0),d=Dt(s,"rightButtonsBackground",void 0),x,u=Dt(s,"topButtons",void 0),l=Dt(s,"topButtonsBackground",void 0),h,n=Dt(s,"bottomButtons",void 0),r=Dt(s,"bottomButtonsBackground",void 0),f,a=Dt(s,"click",void 0);if(g&&this.addBackground(g),C&&this.add(C,1,1,"center",0,!0),M){var c=Dt(s,"space.leftButtonsOffset",0),p=Dt(s,"space.leftButton",0);T=new te(t,{groupName:"left",background:o,buttons:M,orientation:1,space:{item:p},align:Dt(s,"align.leftButtons",void 0),click:a,eventEmitter:this.eventEmitter});var v={top:c};this.add(T,0,1,"top",v,!1)}if(e){var m=Dt(s,"space.rightButtonsOffset",0),y=Dt(s,"space.rightButton",0);x=new te(t,{groupName:"right",background:d,buttons:e,orientation:1,space:{item:y},align:Dt(s,"align.rightButtons",void 0),click:a,eventEmitter:this.eventEmitter});var v={top:m};this.add(x,2,1,"top",v,!1)}if(u){var E=Dt(s,"space.topButtonsOffset",0),P=Dt(s,"space.topButton",0);h=new te(t,{groupName:"top",background:l,buttons:u,orientation:0,space:{item:P},align:Dt(s,"align.topButtons",void 0),click:a,eventEmitter:this.eventEmitter});var v={left:E};this.add(h,1,0,"left",v,!1)}if(n){var S=Dt(s,"space.bottomButtonsOffset",0),w=Dt(s,"space.bottomButton",0);f=new te(t,{groupName:"bottom",background:r,buttons:n,orientation:0,space:{item:w},align:Dt(s,"align.bottomButtons",void 0),click:a,eventEmitter:this.eventEmitter});var v={left:S};this.add(f,1,2,"left",v,!1)}this.addChildrenMap("background",g),this.addChildrenMap("panel",C),this.addChildrenMap("leftButtons",M),this.addChildrenMap("rightButtons",e),this.addChildrenMap("topButtons",u),this.addChildrenMap("bottomButtons",n),this.addChildrenMap("leftButtonsSizer",T),this.addChildrenMap("rightButtonsSizer",x),this.addChildrenMap("topButtonsSizer",h),this.addChildrenMap("bottomButtonsSizer",f)}}Object.assign(xd.prototype,u6);st.register("tabs",function(i){var t=new xd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Tabs",xd);st.register("slider",function(i){var t=new ks(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Slider",ks);class im{constructor(t,s){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,s){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,s),this}setCellContainerAlign(t){return typeof t=="string"&&(t=Un[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var s=this.parent;this._deltaHeight===0&&t!==0?s.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&s.nonZeroDeltaHeightCount--;var g=this._deltaHeight!==t;if(this._deltaHeight=t,g){s.resetTotalRowsHeight();var C=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(C,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(im.prototype,ah);const Ev=Phaser.Utils.Objects.GetValue,d6=Phaser.Utils.Array.SpliceOne;class f6{constructor(t,s){this.parent=t,this.cells=[],this.cellPool=new pi,this.resetFromJSON(s)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var s=t.cellHeight;s===void 0&&(s=30);var g=t.cellWidth;return g===void 0&&(g=30),this.setDefaultCellHeight(s),this.setDefaultCellWidth(g),this.initCells(Ev(t,"cellsCount",0)),this.setColumnCount(Ev(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var s=this.cells;s.length=t;for(var g=0;g<t;g++)s[g]=null;return this}insertNewCells(t,s){var g=this.cells;if(t===g.length){var C=t+s;g.legth=C;for(var M=t;M<C;M++)g[M]=null}else{var o=[];o.length=s;for(var M=0;M<s;M++)o[M]=null;this.cells.splice(t,0,...o)}return this.resetTotalRowsHeight(),this}removeCells(t,s){for(var g=t+s,C=t;C<g;C++)this.freeCell(C);return g===this.cells.length?this.cells.length=t:(s===1?d6(this.cells,t):this.cells.splice(t,s),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,s){if(s===void 0&&(s=0),t===0)return 0;if(this.defaultCellHeightMode){var T=t/this.defaultCellHeight;switch(s){case 0:T=Math.floor(T);break;case 1:T=Math.ceil(T);break;default:Number.isInteger(T)?T+=1:T=Math.floor(T);break}return T}for(var g=this.rowCount,C=t,M,o,T=0;;)if(o=this.getRowHeight(T),C-=o,M=T>=0&&T<g,C>0&&M)T+=1;else{if(C===0)return s===2&&(T+=1),T;if(s===1){var e=T;T+=1,M=T>=0&&T<g,M||(T=e)}return T}}widthToColIndex(t,s){if(t===0)return 0;var g=t/this.defaultCellWidth;return s?g=Math.ceil(g):g=Math.floor(g),g}colRowToCellIndex(t,s){return t>=this.colCount?null:s*this.colCount+t}rowIndexToHeight(t,s){if(this.defaultCellHeightMode)return(s-t+1)*this.defaultCellHeight;for(var g,C=0,M=t;M<=s;M++)g=this.getRowHeight(M),C+=g;return C}colIndexToWidth(t,s){return(s-t+1)*this.defaultCellWidth}getRowHeight(t){var s=this.colCount;if(s<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var g=0,C,M=0;M<s;M++)C=this.getCellHeight(this.colRowToCellIndex(M,t)),g<C&&(g=C);return g}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var s;if(this.defaultCellHeightMode)s=this.defaultCellHeight;else{var g=this.getCell(t,!1),C=g?g.deltaHeight:0;s=this.defaultCellHeight+C}return s}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,s){if(!this.isValidCellIdx(t))return null;if(s===void 0&&(s=!0),this.cells[t]===null&&s){var g=this.newCell(t);this.cells[t]=g}return this.cells[t]}newCell(t){var s=this.cellPool.pop();return s===null?s=new im(this):s.setParent(this),s.index=t,s}buildCellIndex(t){t===void 0&&(t=0);for(var s=this.cells,g,C=t,M=s.length;C<M;C++)g=s[C],g&&(g.index=C);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var c6=function(i){var t=this.table,s=this.topTableOY,g=this.bottomTableOY,C=i>this.topTableOY,M=i<this.bottomTableOY;if(this.clampTableOXY){var o=t.rowCount,T=t.heightToRowIndex(this.instHeight,1);o<T?i=0:C?i=s:M&&(i=g)}return this._tableOY!==i&&(this._tableOY=i),C&&(this.execeedTopState||this.emit("execeedtop",this,i,s)),this.execeedTopState=C,M&&(this.execeedBottomState||this.emit("execeedbottom",this,i,g)),this.execeedBottomState=M,this},v6=function(i){var t=this.table,s=this.leftTableOX,g=this.rightTableOX,C=i>this.leftTableOX,M=i<this.rightTableOX;if(this.clampTableOXY){var o=t.colCount,T=t.widthToColIndex(this.instWidth,!0);o<T?i=0:C?i=s:M&&(i=g)}return this._tableOX!==i&&(this._tableOX=i),C&&(this.execeedLeftState||this.emit("execeedleft",this,i,s)),this.execeedLeftState=C,M&&(this.execeedRightState||this.emit("execeedright",this,i,g)),this.execeedRightState=M,this},yd=function(i){return i.hasOwnProperty("geometryMask")?i.geometryMask:i.bitmapMask};const p6=Phaser.Geom.Intersects.RectangleToRectangle,g6=Phaser.Geom.Rectangle.Overlaps;var m6=function(i,t,s){if(!!t){s===void 0&&(s=i.getAllChildren());for(var g=i.getBounds(),C=yd(t),M,o,T,e=0,d=s.length;e<d;e++)if(M=s[e],!M.hasOwnProperty("isRexContainerLite")&&M!==C&&!!x6(M))if(M.getBounds)switch(o=M.getBounds(o),T=y6(g,o),T){case 4:T6(i,M);break;case 0:p6(g,o)||g6(g,o)?ol(i,M,t):C6(i,M);break;default:ol(i,M,t);break}else ol(i,M,t)}},x6=function(i){if(!i.displayList)return!1;for(;;){var t=i.rexContainer;if(t)if(t.visible){var s=t.parent;if(s){i=s;continue}else return!0}else return!1;else return i.visible}},y6=function(i,t){var s=0,g=t.top,C=t.bottom,M=t.left,o=t.right;return s+=i.contains(M,g)?1:0,s+=i.contains(M,C)?1:0,s+=i.contains(o,g)?1:0,s+=i.contains(o,C)?1:0,s},T6=function(i,t,s){i.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},ol=function(i,t,s){i.setChildMaskVisible(t,!0),t.setMask&&t.setMask(s)},C6=function(i,t,s){i.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const ll=Phaser.Utils.Objects.GetValue,S6={update:0,everyTick:1},sm={setupChildrenMask(i){return i===!1?this:(this.setMaskUpdateMode(ll(i,"updateMode",0)),this.enableChildrenMask(ll(i,"padding",0)),this.setMaskLayer(ll(i,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(i){return typeof i=="string"&&(i=S6[i]),this.maskUpdateMode=i,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(i){var t=bi.call(this,null,this,0,i);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(i){return i===void 0&&(i=!0),this.maskChildrenFlag=i,this},setMaskLayer(i){return this.maskLayer=i,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):m6(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var i=yd(this.childrenMask);return i.setPosition().resize(),this.resetChildPositionState(i),this}};var E6=function(){if(this.cellsCount!==0){var i=this.table;this.startRowIndex=Math.max(i.heightToRowIndex(-this.tableOY,2),0);for(var t=this.startRowIndex,s=Math.max(i.widthToColIndex(-this.tableOX),0),g=s,C=i.colRowToCellIndex(g,t),M=this.bottomBound,o=this.rightBound,T=i.cellsCount-1,e=i.colCount-1,d=this.getCellTLX(g),x=d,u=this.getCellTLY(t);u<M&&C<=T;){if(this.table.isValidCellIdx(C)){var l=i.getCell(C,!0);this.visibleCells.set(l),this.preVisibleCells.contains(l)||this.showCell(l);var h,n;if(this.scrollMode===0?(h=x,n=u):(h=u,n=x),l.cellContainerAlign==null)l.setXY(h,n);else{var r=l.getContainer();Dr(r,h,n,l.width,l.height,l.cellContainerAlign),l.setXY(r.x,r.y)}}x<o&&g<e?(x+=i.getColWidth(g),g+=1):(x=d,u+=i.getRowHeight(t),g=s,t+=1),C=i.colRowToCellIndex(g,t)}}},nm=function(i){var t=null,s=i.getContainer();if(s?(t=s,i.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",i,t,this),this.cellContainersPool){var s=i.getContainer();s?t===null?this.cellContainersPool.add(s):t!==s&&(this.cellContainersPool.add(s),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},P6=function(i){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,s=this.tableOX+this.table.colIndexToWidth(0,i-1)+t;return s},M6=function(i){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,s=this.tableOY+this.table.rowIndexToHeight(0,i-1)+t;return s},w6=function(){var i=this.preVisibleCells,t=this.visibleCells;i.iterate(function(s){t.contains(s)||this.hideCell(s)},this)},rm=function(i){if(this.emit("cellinvisible",i),this.cellContainersPool){var t=i.popContainer();t&&this.cellContainersPool.killAndHide(t)}i.destroyContainer()},A6=function(i){return i===void 0&&(i=!1),i&&(Pv.call(this),this.hideCells()),Pv.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},Pv=function(){var i=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=i,this.visibleCells.clear()},R6=function(i){var t=this.table.getCell(i,!1);return t&&this.visibleCells.contains(t)},am=function(i,t){t-=this.y+this.topLeftY,i-=this.x+this.topLeftX;var s=this.tableOY-(this.scrollMode===0?t:i),g=this.tableOX-(this.scrollMode===0?i:t),C=this.table,M=C.heightToRowIndex(-s,0),o=C.widthToColIndex(-g),T=C.colRowToCellIndex(o,M);return T===null||!this.isCellVisible(T)?null:T},O6=function(i,t){var s=am.call(this,i,t);if(s!==null)return this.getCellContainer(s)},L6=function(i,t){return this.visibleCells.each(i,t),this},F6=function(i,t){return this.visibleCells.iterate(i,t),this},b6=function(i,t){return this.table.cells.slice().forEach(i,t),this},D6=function(i,t){return this.table.cells.forEach(i,t),this},I6=function(i){var t=this.cellsCount;return t===i?this:(t>i?this.removeCells(i,t-i):this.insertNewCells(t,i-t),this)};const B6=Phaser.Math.Clamp;var G6=function(i,t){return typeof i=="object"&&(i=i.index),t===void 0&&(t=1),t<=0?this:(i=B6(i,0,this.cellsCount),this.table.insertNewCells(i,t),this)},N6=function(i,t){if(typeof i=="object"&&(i=i.index),t===void 0&&(t=1),i<0&&(t+=i,i=0),t<=0)return this;if(i>this.cellsCount)return this;for(var s,g=i,C=i+t;g<C;g++)s=this.getCell(g,!1),s&&(this.visibleCells.contains(s)&&(rm.call(this,s),this.visibleCells.delete(s)),this.preVisibleCells.delete(s));return this.table.removeCells(i,t),this},z6=function(i){return this.table.colCount===i?this:(this.table.setColumnCount(i),this)},V6=function(i,t){return this.setCellsCount(i*t),this.table.setColumnCount(i),this},U6=function(i){var t=this.table.getCell(i,!1);return!t||!t.container?this:(nm.call(this,t),this)},hm={setTableOY:c6,setTableOX:v6,showCells:E6,showCell:nm,getCellTLX:P6,getCellTLY:M6,hideCells:w6,hideCell:rm,updateTable:A6,isCellVisible:R6,pointToCellIndex:am,pointToCellContainer:O6,eachVisibleCell:L6,iterateVisibleCell:F6,eachCell:b6,iterateCell:D6,setCellsCount:I6,insertNewCells:G6,removeCells:N6,setColumnCount:z6,setGridSize:V6,updateVisibleCell:U6};Object.assign(hm,sm);const Y6=Phaser.GameObjects.Group,Mv=Phaser.Structs.Set,di=Phaser.Utils.Objects.GetValue;class om extends be{constructor(t,s,g,C,M,o){o===void 0&&(o={}),super(t,s,g,C,M),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Mv,this.preVisibleCells=new Mv,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var T=di(o,"reuseCellContainer",!1);T&&(this.cellContainersPool=new Y6(t));var e=di(o,"cellVisibleCallback",null);if(e!==null){var d=di(o,"cellVisibleCallbackScope",void 0);this.on("cellvisible",e,d)}if(e=di(o,"cellInvisibleCallback",null),e!==null){var d=di(o,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",e,d)}di(o,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(di(o,"mask",void 0)),this.setScrollMode(di(o,"scrollMode",0)),this.setClampMode(di(o,"clamplTableOXY",!0));var x,u,l,h=this.scrollMode===0;if(h?(x=o.cellWidth,u=o.cellHeight,l=o.columns):(x=o.cellHeight,u=o.cellWidth,l=di(o,"rows",o.columns)),l||(l=1),this.expandCellSize=x===void 0,this.expandCellSize){var C=h?this.width:this.height;x=C/l}o.cellWidth=x,o.cellHeight=u,o.columns=l,this.table=new f6(this,o),this.updateTable()}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=X6[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,s){return this.setTableOY(s).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,s){return this.addTableOY(s).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var s=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-s).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var s=this.table.getCell(t,!1),g;return s&&(g=s.getContainer()),g}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,s){var g;return typeof t=="number"?g=this.table.getCell(t,!0):g=t,g.height=s,this}setCellWidth(t,s){var g;return typeof t=="number"?g=this.table.getCell(t,!0):g=t,g.width=s,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,s=this.tableWidth,g=this.instWidth;return s>g?t=s-g:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,s){return this.width===t&&this.height===s?this:(super.resize(t,s),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(om.prototype,hm);const X6={v:0,vertical:0,h:1,horizontal:1};var W6=function(i){Object.defineProperty(i,"childOY",{configurable:!0,get:function(){return i.tableOY},set:function(t){i.tableOY=t}}),Object.defineProperty(i,"topChildOY",{get:function(){return i.topTableOY}}),Object.defineProperty(i,"bottomChildOY",{get:function(){return i.bottomTableOY}}),Object.defineProperty(i,"childVisibleHeight",{get:function(){return i.instHeight}}),Object.defineProperty(i,"childHeight",{get:function(){return i.tableHeight}})},k6=function(i){i.on("cellvisible",function(t,o,g){var C=this.createCellContainerCallback,M=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var o;M?o=C.call(M,t,o,g):o=C(t,o,g),o&&(t.cellContainerAlign==null&&o.setOrigin&&o.setOrigin(0),o.isRexSizer&&o.layout()),t.item=void 0,t.items=void 0,t.setContainer(o)},this)},yi=function(i,t,s,g,C,M,o){var T;if(C===void 0?T=g:T=s.pointToCellIndex(g,C),T!=null){var e=s.getCellContainer(T);e&&i.emit(t,e,T,M,o)}},H6=function(i,t){i.on("pointerdown",function(s,g,C,M){yi(this.eventEmitter,"cell.down",i,s.worldX,s.worldY,s,M)},this).on("pointerup",function(s,g,C,M){yi(this.eventEmitter,"cell.up",i,s.worldX,s.worldY,s,M)},this)},$6=function(i,t){i.on("pointermove",wv,this).on("pointerover",wv,this).on("pointerout",K6,this)},wv=function(i,t,s,g){var C=this.childrenMap.child,M=C.pointToCellIndex(i.worldX,i.worldY);if(M!==C.input.lastOverCellIndex){var o=C.input.lastOverCellIndex;C.input.lastOverCellIndex=M,yi(this.eventEmitter,"cell.out",C,o,void 0,i,g),yi(this.eventEmitter,"cell.over",C,M,void 0,i,g)}},K6=function(i,t){var s=this.childrenMap.child,g=s.input.lastOverCellIndex;s.input.lastOverCellIndex=void 0,yi(this.eventEmitter,"cell.out",s,g,void 0,i,t)};const Z6=Phaser.Utils.Objects.GetValue;var J6=function(i,t){var s=Z6(t,"click",void 0);s!==!1&&(s===void 0&&(s={}),s.threshold=10,i._click=new us(i,s),i._click.on("click",function(g,C,M,o){yi(this.eventEmitter,"cell.click",C,M.worldX,M.worldY,M,o)},this))};const j6=Phaser.Utils.Objects.GetValue;var Q6=function(i,t){var s=j6(t,"tap",void 0);s!==!1&&(i._tap=new wh(i,s),i._tap.on("tap",function(g,C,M){var o=`cell.${g.tapsCount}tap`;yi(this.eventEmitter,o,g.gameObject,g.worldX,g.worldY,M)},this))};const q6=Phaser.Utils.Objects.GetValue;var _6=function(i,t){var s=q6(t,"press",void 0);s!==!1&&(i._press=new Ah(i,s),i._press.on("pressstart",function(g,C,M){yi(this.eventEmitter,"cell.pressstart",i,g.worldX,g.worldY,M)},this).on("pressend",function(g,C,M){yi(this.eventEmitter,"cell.pressend",i,g.worldX,g.worldY,M)},this))};const tD=Phaser.Utils.Objects.GetValue;var eD=function(i,t){var s=tD(t,"swipe",void 0);s!==!1&&(s===void 0&&(s={}),s.dir="4dir",i._swipe=new Ur(i,s),i._swipe.on("swipe",function(g,C,M){var o=g.left?"left":g.right?"right":g.up?"up":"down";yi(this.eventEmitter,`cell.swipe${o}`,i,g.worldX,g.worldY,M)},this))},iD=function(i,t){i.setInteractive(),H6.call(this,i,t),$6.call(this,i,t),J6.call(this,i,t),Q6.call(this,i,t),_6.call(this,i,t),eD.call(this,i,t)},sD=function(i){i===void 0?this.items=[]:this.items=i;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const nD={scrollToRow(i){var t=this.childrenMap.child;return t.scrollToRow(i),this},scrollToNextRow(i){var t=this.childrenMap.child;return t.scrollToNextRow(i),this}},fi=Phaser.Utils.Objects.GetValue;class Td extends Uh{constructor(t,s){s===void 0&&(s={});var g=zh(s),C=fi(s,"table",void 0);C===void 0&&(C={}),C.scrollMode=g,C.clamplTableOXY=fi(s,"clamplChildOY",!1);var M=fi(C,"width",void 0),o=fi(C,"height",void 0),T=new om(t,0,0,M,o,C);t.add.existing(T);var e,d;g===0?(e=M===void 0?1:0,d=o===void 0):(e=o===void 0?1:0,d=M===void 0),W6(T),T._minWidth=M===void 0?0:void 0,T._minHeight=o===void 0?0:void 0,s.type="rexGridTable",s.child={gameObject:T,proportion:e,expand:d};var x=fi(s,"space",void 0);x&&(x.child=x.table),super(t,s),this.addChildrenMap("table",T),this.addChildrenMap("tableLayer",T.maskLayer),this.eventEmitter=fi(s,"eventEmitter",this);var u=fi(s,"createCellContainerCallback",ue),l=fi(s,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(u,l),k6.call(this,T),this.resizeControllerFlag=!1;var h=g===0?"cellheightchange":"cellwidthchange";T.on(h,function(){this.resizeControllerFlag=!0},this),fi(C,"interactive",!0)&&iD.call(this,T,C),this.setItems(fi(s,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,s){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=s,this}refresh(){return this.setItems(this.items),this}getCell(t){var s=this.childrenMap.child;return s.getCell(t)}getCellContainer(t){var s=this.childrenMap.child;return s.getCellContainer(t)}updateVisibleCell(t){var s=this.childrenMap.child;return s.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}}var rD={setItems:sD};Object.assign(Td.prototype,nD,rD);st.register("gridTable",function(i){var t=new Td(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.GridTable",Td);var Cd=function(i,t){return i.sameOrientation?i.orientation=t.orientation:i.orientation=t.orientation===0?1:0,i},aD=function(i,t){i.popUp(Cd(i.root.easeIn,i))},hD=function(i,t){i.scaleDown(Cd(i.root.easeOut,i))};const oD={setTransitInCallback(i){return i===void 0&&(i=aD),this.transitInCallback=i,this},setTransitOutCallback(i){return i===void 0&&(i=hD),this.transitOutCallback=i,this}};var lD=function(i,t,s,g,C){var M=i.scene,o=M.time.delayedCall(t,function(){M.sys.events.once("postupdate",function(){s.call(g,C)})});return o};const uD={delayCall(i,t,s){return this.timer=lD(this,i,t,s),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var dD=function(i,t){var g=this.childrenMap.subMenu;if(g&&g.parentButton===i)return this;this.collapseSubMenu();var s;this.root.toggleOrientation?s=this.orientation===0?1:0:s=this.orientation;var g=new this.constructor(this.scene,{items:t,orientation:s,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:i});return this.pin(g),this.childrenMap.subMenu=g,this.root.emit("expand",g,i,this),this},fD=function(){var i=this.root;i.emit("collapse",this,this.parentButton,i);var t=i.easeOut.duration;return i.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},cD=function(){var i=this.childrenMap.subMenu;return i===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(i),i.collapse(),this)},lm={expandSubMenu:dD,collapse:fD,collapseSubMenu:cD};Object.assign(lm,oD,uD);var vD=function(i,t,s,g){var C;return s&&(t.scene=i,g?C=s.call(g,t):C=s(t),t.scene=void 0),C},pD=function(i,t,s,g){var C,M=[],o;if(t&&s)for(var T=0,e=t.length;T<e;T++)C=t[T],C.scene=i,g?o=s.call(g,C,T,t):o=s(C,T,t),C.scene=void 0,M.push(o);return M},gD=function(i){i.on(i.root.expandEventName,function(t,s){if(!this._isPassedEvent){var g=this.root.childrenKey,C=this.items[s][g];C&&this.expandSubMenu(t,C)}},i).on("button.click",function(t,s,g,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,s,g,C),this.root._isPassedEvent=!1)},i).on("button.over",function(t,s,g,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,s,g,C),this.root._isPassedEvent=!1)},i).on("button.out",function(t,s,g,C){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,s,g,C),this.root._isPassedEvent=!1)},i)},Av=function(i,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=Bh(t.orientation)===i.orientation:t.sameOrientation=!0,t.destroy=!1,t},mD=function(){var i=this.root,t=i.easeIn.duration;i.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const ve=Phaser.Utils.Objects.GetValue;class Kh extends te{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1);var g=s._rootMenu,C=s._parentMenu,M=s._parentButton,o=ve(s,"popup",!0),T=ve(s,"items",void 0),e=ve(s,"createBackgroundCallback",void 0),d=ve(s,"createBackgroundCallbackScope",void 0);s.background=vD(t,T,e,d);var x=ve(s,"createButtonCallback",void 0),u=ve(s,"createButtonCallbackScope",void 0);if(s.buttons=pD(t,T,x,u),super(t,s),this.type="rexMenu",this.items=T,this.root=g===void 0?this:g,this.isRoot=this.root===this,this.parentMenu=C,this.parentButton=M,this.timer=void 0,this.isRoot){this.isPopUpMode=o;var l=s.bounds;l===void 0&&(l=Vn(t)),this.bounds=l,this.subMenuSide=[this.y<l.centerY?Zl:Ha,this.x<l.centerX?Kl:ka];var h=ve(s,"subMenuSide",void 0);h!==void 0&&(typeof h=="string"&&(h=xD[h]),this.subMenuSide[this.orientation]=h),this.toggleOrientation=ve(s,"toggleOrientation",!1),this.expandEventName=ve(s,"expandEvent","button.click"),this.easeIn=Av(this,ve(s,"easeIn",0)),this.easeOut=Av(this,ve(s,"easeOut",0)),this.setTransitInCallback(ve(s,"transitIn")),this.setTransitOutCallback(ve(s,"transitOut")),this.createBackgroundCallback=e,this.createBackgroundCallbackScope=d,this.createButtonCallback=x,this.createButtonCallbackScope=u,this.childrenKey=ve(s,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=ve(s,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var n=0,r=0;if(!this.root.easeIn.sameOrientation){var f=Cd(this.root.easeIn,this).orientation,a=C?C.orientation:this.orientation,h=this.root.subMenuSide[a];f===0&&h===ka&&(n=1),f===1&&h===Ha&&(r=1)}if(o&&this.setOrigin(n,r).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var h=this.root.subMenuSide[C.orientation];switch(h){case ka:this.alignTop(M.top).alignRight(M.left);break;case Kl:this.alignTop(M.top).alignLeft(M.right);break;case Ha:this.alignLeft(M.left).alignBottom(M.top);break;case Zl:this.alignLeft(M.left).alignTop(M.bottom);break}}gD(this),o&&(this.pushIntoBounds(this.root.bounds),mD.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const ka=2,Kl=0,Ha=3,Zl=1,xD={up:Ha,down:Zl,left:ka,right:Kl};Object.assign(Kh.prototype,lm);st.register("menu",function(i){var t=new Kh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Menu",Kh);var yD={setWrapEnable(i){return i===void 0&&(i=!0),this.listWrapEnable=i,this},setCreateButtonCallback(i){return this.listCreateButtonCallback=i,this},setCreateListBackgroundCallback(i){return this.listCreateBackgroundCallback=i,this},setButtonClickCallback(i){return this.listOnButtonClick=i,this},setButtonOverCallback(i){return this.listOnButtonOver=i,this},setButtonOutCallback(i){return this.listOnButtonOut=i,this},setListExpandDirection(i){return typeof i=="string"&&(i=TD[i]),this.listExpandDirection=i,this},setListEaseInDuration(i){return i===void 0&&(i=0),this.listEaseInDuration=i,this},setListEaseOutDuration(i){return i===void 0&&(i=0),this.listEaseOutDuration=i,this},setListTransitInCallback(i){return this.listTransitInCallback=i,this},settListTransitOutCallback(i){return this.listTransitOutCallback=i,this},setListBounds(i){return this.listBounds=i,this},setListWidth(i){return this.listWidth=i,this},setListHeight(i){return this.listHeight=i,this},setListSize(i,t){return this.setListWidth(i).setListHeight(t),this},setListAlignmentMode(i){return this.listAlignMode=i,this},setListAlignmentSide(i){return i===void 0&&(i=""),this.listAlignSide=i,this},setListSpace(i){return i===void 0&&(i={}),this.listSpace=i,this},setListDraggable(i){return i===void 0&&(i=!0),this.listDraggable=i,this}};const TD={down:0,up:1};var CD=function(){var i=this.scene,t,s=this.listCreateBackgroundCallback;s&&(t=s.call(this,i),i.add.existing(t));var g=[],C=this.listCreateButtonCallback;if(C)for(var M=this.options,o=0,T=M.length;o<T;o++){var e=C.call(this,i,M[o],o,M);i.add.existing(e),g.push(e)}var d=this.listWidth;d===void 0&&(this.listAlignMode==="text"?d=this.getElement("text").width:d=this.width);var x=this.listHeight,u;return this.listWrapEnable?u=new rs(i,{width:d,height:x,background:t,buttons:g,space:this.listSpace,draggable:this.listDraggable}):u=new te(i,{width:d,height:x,orientation:"y",background:t,buttons:g,space:this.listSpace,draggable:this.listDraggable}),i.add.existing(u),u},SD=function(i,t,s,g,C){g===void 0&&(g="Linear");var M={};switch(M.mode=0,s){case 0:case"x":M.end={x:0};break;case 1:case"y":M.end={y:0};break;default:M.end=0;break}return M.duration=t,M.ease=g,C===void 0?C=new Cr(i,M):C.resetFromJSON(M),C.restart(),C},ED=function(i,t,s,g,C){return vi(i,t)?Ft(i,t):s&&vi(i,s)?Ft(i,s):g&&vi(i,g)?Ft(i,g):C};const pn=Phaser.Utils.Objects.GetValue;var PD=function(i,t){var s=pn(t,"expandDirection",void 0);typeof s=="string"&&(s=MD[s]);var g=ED(t,"alignTarget","alignTargetX"),C=pn(t,"alignTargetY",g),M=pn(t,"alignOffsetX",0),o=pn(t,"alignOffsetY",0),T=pn(t,"alignSide",""),e=T.includes("right"),d=pn(t,"bounds"),x=s===0,u=s===1,l=!x&&!u,h=e?1:0,n=x||l?0:1;i.setOrigin(h,n);var r,f;e?r=g.getTopRight().x:r=g.getTopLeft().x,f=C.getBottomLeft().y,i.setPosition(r+M,f+o);var a=d;a||(a=Vn(i.scene)),l&&i.getBottomLeft().y>a.bottom&&(f=C.getTopLeft().y,i.setOrigin(0,1).setPosition(r+M,f+o))};const MD={down:0,up:1},Rv=Phaser.Utils.Objects.GetValue;class um extends Sh{constructor(t,s){s===void 0&&(s={}),s.transitIn==null&&(s.transitIn=function(M,o){ku(M,o,"y","Cubic")}),s.transitOut==null&&(s.transitOut=function(M,o){SD(M,o,"y","Linear")}),s.manualClose=!0,s.clickOutsideClose=!0,s.destroy=!0,super(t,s),PD(t,s),t.isRexSizer&&t.layout();var g=Rv(s,"touchOutsideClose",!1),C=Rv(s,"anyTouchClose",!1);C&&(g=!1),C?this.once("open",this.anyTouchClose,this):g&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Sr(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var wD=function(){if(this.listPanel)return this;var i=CD.call(this);i.on("button.over",function(g,C,M,o){this.listOnButtonOver&&this.listOnButtonOver.call(this,g,C,M,o),this.emit("button.over",this,i,g,C,M,o)},this).on("button.out",function(g,C,M,o){this.listOnButtonOut&&this.listOnButtonOut.call(this,g,C,M,o),this.emit("button.out",this,i,g,C,M,o)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var s=new um(i,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){i.on("button.click",function(g,C,M,o){this.listOnButtonClick&&this.listOnButtonClick.call(this,g,C,M,o),this.emit("button.click",this,i,g,C,M,o)},this),this.emit("list.open",this,i)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0},this);return this.listPanel=i,this.dropDownBehavior=s,this.pin(i),this},AD=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this):this},RD=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},dm={openListPanel:wD,closeListPanel:AD,toggleListPanel:RD};Object.assign(dm,yD);const Bt=Phaser.Utils.Objects.GetValue;class Hr extends Ci{constructor(t,s){super(t,s),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Bt(s,"options"));var g=Bt(s,"list");this.setWrapEnable(Bt(g,"wrap",!1)),this.setCreateButtonCallback(Bt(g,"createButtonCallback")),this.setCreateListBackgroundCallback(Bt(g,"createBackgroundCallback")),this.setButtonClickCallback(Bt(g,"onButtonClick")),this.setButtonOverCallback(Bt(g,"onButtonOver")),this.setButtonOutCallback(Bt(g,"onButtonOut")),this.setListExpandDirection(Bt(g,"expandDirection")),this.setListEaseInDuration(Bt(g,"easeIn",500)),this.setListEaseOutDuration(Bt(g,"easeOut",100)),this.setListTransitInCallback(Bt(g,"transitIn")),this.settListTransitOutCallback(Bt(g,"transitOut")),this.setListSize(Bt(g,"width"),Bt(g,"height")),this.setListAlignmentMode(Bt(g,"alignParent","text")),this.setListAlignmentSide(Bt(g,"alignSide","")),this.setListBounds(Bt(g,"bounds")),this.setListSpace(Bt(g,"space")),this.setListDraggable(Bt(g,"draggable",!1)),this.setValueChangeCallback(Bt(s,"setValueCallback"),Bt(s,"setValueCallbackScope")),this.setValue(Bt(s,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,s){return this.valueChangeCallback=t,this.valueChangeCallbackScope=s,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t;var g=this.valueChangeCallback,C=this.valueChangeCallbackScope;g&&(C?g.call(C,this,t,s):g(this,t,s)),this.emit("valuechange",this,t,s)}}emitButtonClick(t){var s=this.options[t];return s?(this.emit("button.click",this,void 0,s,t),this):this}}Object.assign(Hr.prototype,dm);st.register("dropDownList",function(i){var t=new Hr(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.DropDownList",Hr);var fm=function(i,t,s){t=t?ge(t):{},s===void 0&&(s={});var g=t.label||t.button,C=t.button||t.label;delete t.label,delete t.button;var M=s.label||s.button||s,o=s.button||s.label||s,T=ud(i,g,M);return T.list=t.list||{},T.list.createButtonCallback=function(e,d){var x=Ue(e,C,o).resetDisplayContent({text:d.text});return d.hasOwnProperty("value")&&(x.value=d.value),x},T.list.onButtonOver=function(e,d,x,u){e.setHoverState&&e.setHoverState(!0)},T.list.onButtonOut=function(e,d,x,u){e.setHoverState&&e.setHoverState(!1)},T};class cm extends Hr{constructor(t,s,g){s=fm(t,s,g),super(t,s),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var s=0,g=t.length;s<g;s++){var C=t[s];typeof C=="string"&&(t[s]={text:C,value:C})}return super.setOptions(t),this}}st.register("simpleDropDownList",function(i,t){var s=new cm(this.scene,i,t);return this.scene.add.existing(s),s});it(window,"RexPlugins.UI.SimpleDropDownList",cm);var OD=function(i,t){i===void 0&&(i=this.startLineIndex),t===void 0&&(t=i+this.pageLinesCount);var s;switch(this.textObjectType){case Fe:case We:s=this.lines.slice(i,t).join(`
`);break;case Xe:var g=this.lines.getLineStartIndex(i),C=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(g,C,!0);break}return s},ul=function(i){return Array.isArray(i)?i=i.join(`
`):typeof i=="number"&&(i=i.toString()),i};const LD={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(s){var t=this.totalLinesCount;this.sections.push(ul(s));var s=this.sections.join(`
`);this.lines=pd(this.parent,s,this.lines);for(var g=this.totalLinesCount-t,C=Math.ceil(g/this.pageLinesCount),M=0;M<C;M++)this.pageStartIndexes.push(t+M*this.pageLinesCount);return this},setText(i,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var s=ul(i).split(this.pageBreak),g=0,C=s.length;g<C;g++)this.appendPage(s[g]);return this},appendText(i){var t=this.content+ul(i);return this.setText(t,!1),this}},FD=Phaser.Math.Clamp,bD={getPage(i){return i===void 0&&(i=this.pageIndex),this.setPageIndex(i).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(i){return i=FD(i,0,this.pageCount-1),this.pageIndex=i,this.startLineIndex=this.pageStartIndexes[i],this.endLineIndex=this.pageStartIndexes[i+1],this}},DD={showPage(i){return this.displayText(this.getPage(i)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(i){gd(this.parent,i)}};var vm={getLines:OD};Object.assign(vm,LD,bD,DD);const ur=Phaser.Utils.Objects.GetValue,ID=Phaser.Math.Clamp;class Zh extends ee{constructor(t,s){super(t,{eventEmitter:!1}),this.textObjectType=Wr(this.parent),this.pageStartIndexes=[],this.lines=pd(this.parent,""),this.sections=[],this.resetFromJSON(s)}resetFromJSON(t){return this.setMaxLines(ur(t,"maxLines",void 0)),this.setPageBreak(ur(t,"pageBreak",`\f
`)),this.setText(ur(t,"text","")),this.setStartLineIndex(ur(t,"start",0)),this.setPageIndex(ur(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Fe:this.lines.length=0;break;case Xe:this.lines.destroy();break;case We:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=ID(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Fe:case Xe:var s=this.parent.style.maxLines;s>0?t=s:t=this.totalLinesCount;break;case We:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(Zh.prototype,vm);var BD=function(i,t){var s=Wr(i);switch(s){case Fe:i.style.syncFont(i.canvas,i.context),t=i.runWordWrap(t);break;case Xe:t=i.getText(t,void 0,void 0,!0);break;case We:t=i.setText(t).getTextBounds().wrappedText;break}return t};const gn=Phaser.Utils.Objects.GetFastValue,dl=Phaser.Utils.Objects.GetValue;class Sd extends ee{constructor(t,s){super(t,s),this.timer=null,this.resetFromJSON(s)}resetFromJSON(t){this.setTextWrapEnable(dl(t,"wrap",!1)),this.setTypeMode(dl(t,"typeMode",0)),this.setTypingSpeed(dl(t,"speed",333)),this.setTextCallback=gn(t,"setTextCallback",null),this.setTextCallbackScope=gn(t,"setTextCallbackScope",null),this.setTypingContent(gn(t,"text","")),this.typingIdx=gn(t,"typingIdx",0),this.insertIdx=gn(t,"insertIdx",null);var s=gn(t,"elapsed",null);return s!==null&&this.start(void 0,void 0,this.typingIdx,s),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=GD[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var s=Ov(t);this.textWrapEnable&&(s=BD(this.parent,s)),this._text=s}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,s,g,C){return t!==void 0&&this.setTypingContent(t),s!==void 0&&(this.speed=s),g===void 0&&(g=0),this.typingIdx=g+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(C)),this}appendText(t){var s=this.text.concat(Ov(t));return this.isTyping?this.setTypingContent(s):this.start(s,void 0,this.textLen),this}stop(t){var s=this.getTimer();return s&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,s,g,C){var M;if(C===0){var o=0,T=s;this.insertIdx=T,M=this.getSubString(t,o,T)}else if(C===1){var T=g,o=T-s;this.insertIdx=0,M=this.getSubString(t,o,T)}else if(C===2){var e=g/2,o=Math.floor(e-s/2),T=o+s;this.insertIdx=s%2?s:0,M=this.getSubString(t,o,T)}else if(C===3){var d=Math.floor(s/2),x;if(d>0){var T=g,o=T-d;x=this.getSubString(t,o,T)}else x="";var u=s-d,l;if(u>0){var o=0,T=o+u;this.insertIdx=T,l=this.getSubString(t,o,T)}else l="",this.insertIdx=0;M=l+x}return M}startTimer(t){this.timer&&this.freeTimer();var s;return t===void 0?s=0:(this.speed,s=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:s,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?gd(this.parent,t):this.parent.setText(t)}getTextLength(t){var s=this.parent,g;return s.getPlainText?g=s.getPlainText(t).length:g=t.length,g}getSubString(t,s,g){var C=this.parent,M;return C.getSubString?M=C.getSubString(t,s,g):M=t.slice(s,g),M}}var Ov=function(i){return Array.isArray(i)?i=i.join(`
`):typeof i=="number"&&(i=i.toString()),i};const GD={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},Lv=Phaser.Utils.Objects.GetValue;class Ed extends Ci{constructor(t,s){s===void 0&&(s={text:ND(t)}),super(t,s),this.type="rexTextBox";var g=this.childrenMap.text;this.page=new Zh(g,Lv(s,"page",void 0)),this.typing=new Sd(g,Lv(s,"typing",s.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=g.width,this.textHeight=g.height}start(t,s){return this.page.setText(t),s!==void 0&&this.setTypingSpeed(s),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypingSpeed(t),this}setTypingSpeed(t){return this.typing.setTypingSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;(this.textWidth!==t.width||this.textHeight!==t.height)&&(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var ND=function(i){return i.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};st.register("textBox",function(i){var t=new Ed(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TextBox",Ed);const Oe=Phaser.Utils.Objects.GetValue;class Pd extends Ct{constructor(t,s){super(t,s),this.type="rexNumberBar";var g=Oe(s,"background",void 0),C=Oe(s,"icon",void 0),M=Oe(s,"iconMask",void 0),o=Oe(s,"slider",void 0),T=Oe(s,"text",void 0),e=Oe(s,"space.icon",0),d=Oe(s,"space.slider",0);if(g&&this.addBackground(g),C){var x;this.orientation===0?(o||T)&&(x={right:e}):(o||T)&&(x={bottom:e}),this.add(C,{proportion:0,align:"center",padding:x}),M&&(M=bi.call(this,C,C,1))}var u;if(o){o.orientation=this.orientation,o.eventEmitter=this,o.value=null,o.hasOwnProperty("input")||(o.input=-1),u=new ks(t,o),t.add.existing(u);var x;this.orientation===0?T&&(x={right:d}):T&&(x={bottom:d});var l;if(this.orientation===0){var h=Oe(o,"width",void 0);l=h===void 0?1:0}else{var n=Oe(o,"height",void 0);l=n===void 0?1:0}this.add(u,{proportion:l,align:"center",padding:x})}T&&this.add(T),this.addChildrenMap("background",g),this.addChildrenMap("icon",C),this.addChildrenMap("iconMask",M),this.addChildrenMap("slider",u),this.addChildrenMap("text",T);var r=Oe(s,"valuechangeCallback",null);if(r!==null){var f=Oe(s,"valuechangeCallbackScope",void 0);this.on("valuechange",r,f)}this.setEnable(Oe(s,"enable",void 0)),this.setValue(Oe(s,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,s,g),this}addValue(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,s,g),this}getValue(t,s){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,s):0}easeValueTo(t,s,g){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,s,g),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var s;return t.text?s=t.text:s=t.getData("text"),s}set text(t){var s=this.childrenMap.text;s!==void 0&&(s.setText?s.setText(t):s.setData("text",t))}setText(t){return this.text=t,this}}st.register("numberBar",function(i){var t=new Pd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.NumberBar",Pd);st.register("scrollBar",function(i){var t=new Vh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ScrollBar",Vh);const fl=Phaser.Utils.Objects.GetValue,Fv={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Md extends De{constructor(t,s){super(t,s),this.type="rexBadge";var g=fl(s,"background",void 0);g&&this.addBackground(g),this.addChildrenMap("background",g);var C=fl(s,"main",void 0);C&&this.add(C,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",C);for(var M in Fv){var o=fl(s,M,void 0);o&&(this.add(o,{key:M,align:Fv[M],expand:!1}),this.addChildrenMap(M,o))}}}st.register("badgeLabel",function(i){var t=new Md(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.BadgeLabel",Md);const zD=De.prototype.add;var bv=function(i,t,s,g,C,M,o,T,e){return i.setVisible(!1),zD.call(this,i,t,s,g,C,M,o,T,e),this};const VD={add:bv,addPage:bv};var UD=function(i){return i===void 0?null:this.sizerChildren.hasOwnProperty(i)?this.sizerChildren[i]:null};const Dv=be.prototype.setChildVisible;var YD=function(i,t){this._previousKey=this._currentKey;var s=this.previousPage;s&&(this.swapMode===0?(Dv.call(this,s,!1),this.emit("pageinvisible",s,this._previousKey,this)):s.destroy()),i&&!this.sizerChildren.hasOwnProperty(i)&&this.emit("createpage",i,this),this._currentKey=i;var g=this.currentPage;return g&&(Dv.call(this,g,!0),this.emit("pagevisible",g,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&g.setAlpha(0).fadeIn(t,1)),this},XD=function(i){return this.sizerChildren.hasOwnProperty(i)},pm={getPage:UD,swapPage:YD,hasPage:XD};Object.assign(pm,VD);const Iv=Phaser.Utils.Objects.GetValue;class $r extends De{constructor(t,s){super(t,s),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Iv(s,"swapMode",0)),this.setFadeInDuration(Iv(s,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=WD[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign($r.prototype,pm);const WD={invisible:0,destroy:1};st.register("pages",function(i){var t=new $r(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Pages",$r);const gm=Phaser.Math.Vector3,kD=Phaser.Math.Matrix4;var Bv=new gm,Gv=new gm,Nv=new kD,HD=function(i,t,s,g,C,M,o){t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),o===void 0&&(o=0),Bv.set(t,s,g),Gv.set(C,M,o),Nv.fromRotationXYTranslation(Gv,Bv,!0);for(var T=0,e=i.vertices.length;T<e;T++)i.vertices[T].transformMat4(Nv)};const $D=Phaser.GameObjects.Mesh,KD=Phaser.Utils.Objects.IsPlainObject,Os=Phaser.Utils.Objects.GetValue,ZD=Phaser.Geom.Mesh.GenerateGridVerts,cl=Phaser.Math.RadToDeg,$a=Phaser.Math.DegToRad,mm=45,JD=1+1/Math.sin($a(mm));class xm extends $D{constructor(t,s,g,C,M,o){KD(s)&&(o=s,s=Os(o,"x",0),g=Os(o,"y",0),C=Os(o,"key",null),M=Os(o,"frame",null)),super(t,s,g,C,M),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(JD),this.hideCCW=Os(o,"hideCCW",!0);var T=Os(o,"gridWidth",32),e=Os(o,"gridHeight",T);this.resetVerts(T,e)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,mm),this}resetVerts(t,s){if(t!==void 0&&(this.gridWidth=t),s!==void 0&&(this.gridHeight=s),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var g=this.frame.cutWidth,C=this.frame.cutHeight;ZD({mesh:this,texture:this.texture.key,frame:this.frame.name,width:g/this.height,height:C/this.height,widthSegments:Math.ceil(g/this.gridWidth),heightSegments:Math.ceil(C/this.gridHeight)});var M=this.transformInfo;return M&&this.transformVerts(M.x,M.y,M.z,M.rotateX,M.rotateY,M.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return cl(this.rotationX)}set angleX(t){this.rotationX=$a(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return cl(this.rotationY)}set angleY(t){this.rotationY=$a(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return cl(this.rotationZ)}set angleZ(t){this.rotationZ=$a(t)}transformVerts(t,s,g,C,M,o){return t===void 0&&(t=0),s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=0),M===void 0&&(M=0),o===void 0&&(o=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=s,this.transformInfo.rotateX=C,this.transformInfo.rotateY=M,this.transformInfo.rotateZ=o,HD(this,t,s,g,C,M,o),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}}const jD=Phaser.Textures.DynamicTexture;var ym=function(i,t,s){t===void 0&&(t=2),s===void 0&&(s=2);var g=new jD(i.sys.textures,null,t,s);return g};const QD=Phaser.Utils.Objects.IsPlainObject,Da=Phaser.Utils.Objects.GetValue;class Tm extends xm{constructor(t,s,g,C,M,o){QD(s)&&(o=s,s=Da(o,"x",0),g=Da(o,"y",0),C=Da(o,"width",32),M=Da(o,"height",32));var T=ym(t,C,M);super(t,s,g,T,null,o),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,s){return s===void 0&&(s={}),s.gameObjects=t,s.renderTexture=this.rt,Ru(s),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var _e=function(i,t,s,g){if(Array.isArray(i))for(var C=!1,M=0,o=i.length;M<o;M++){var T=i[M];if(!(g&&!T)&&(s?C=t.call(s,T,M,i):C=t(T,M,i),C))return}else{var C=!1;for(var e in i){var T=i[e];if(!(g&&!T)&&(s?C=t.call(s,T,e,i):C=t(T,e,i),C))return}}};const vl=Phaser.Math.RadToDeg,pl=Phaser.Math.DegToRad;class qD extends be{constructor(t,s,g,C,M,o){super(t,s,g,C,M),this.faces=o,_e(o,function(T){T.setPosition(s,g),this.add(T)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return vl(this.rotationX)}set angleX(t){this.rotationX=pl(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return vl(this.rotationY)}set angleY(t){this.rotationY=pl(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return vl(this.rotationZ)}set angleZ(t){this.rotationZ=pl(t)}setDebug(t,s){return _e(this.faces,function(g){g.setDebug(t,s)},null,!0),this}panX(t){return _e(this.faces,function(s){s.panX(t)},null,!0),this}panY(t){return _e(this.faces,function(s){s.panY(t)},null,!0),this}panZ(t){return _e(this.faces,function(s){s.panZ(t)},null,!0),this}transformVerts(t,s,g,C,M,o){return _e(this.faces,function(T){T.transformVerts(t,s,g,C,M,o)},null,!0),this}forEachFace(t,s,g){return _e(this.faces,t,s,g),this}}const _D=Phaser.Utils.Objects.IsPlainObject,t4={key:"__WHITE"},e4={image:xm,rendertexture:Tm};var zv=function(i,t){t===void 0&&(t=t4);var s;return _D(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),s=new e4[t.type](i,t),i.add.existing(s)):s=t,s},i4=function(i,t,s){var g;if(s===void 0){g=[];for(var C,M,o=0,T=t.length;o<T;o++)M=t[o],M?C=zv(i,M):C=null,g.push(C)}else{g={};for(var C,e,o=0,T=s.length;o<T;o++)e=s[o],t.hasOwnProperty(e)?C=zv(i,t[e]):C=null,g[e]=C}return g};const s4=Phaser.Math.DegToRad,Vv=s4(180);var n4=function(i,t){var s=t.back;s&&(i.orientation===0?s.transformVerts(0,0,0,0,Vv,0):s.transformVerts(0,0,0,Vv,0,0))};const gl=Phaser.Utils.Objects.GetValue,r4=Phaser.Math.Linear;class a4 extends zs{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(gl(t,"ease","Cubic")),this.setFrontToBackDirection(gl(t,"frontToBack",0)),this.setBackToFrontDirection(gl(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=Uv[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=Uv[t]),this.endAngleBF=t===0?-180:180,this}start(t,s){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var g=s+1,C=this.parent;return C.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*g):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*g),super.start(),this}flip(t,s){return this.isRunning?this:(t===void 0&&(t=this.duration),s===void 0&&(s=0),this.start(t,s),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+s+1)%2,this)}flipRight(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,s),this}flipLeft(t,s){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,s),this}updateGameObject(t,s){var g=this.easeFn(s.t),C=r4(this.startAngle,this.endAngle,g);t.orientation===0?t.angleY=C:t.angleX=C}}const Uv={right:0,"left-to-right":0,left:1,"right-to-left":1},h4=Phaser.Utils.Objects.IsPlainObject,Ls=Phaser.Utils.Objects.GetValue,o4=["back","front"];class l4 extends qD{constructor(t,s,g,C){h4(s)&&(C=s,s=Ls(C,"x",0),g=Ls(C,"y",0));var M=i4(t,C,o4),o=M.back,T=M.front,e=Ls(C,"width"),d=Ls(C,"height");if(e===void 0||d===void 0){if(e===void 0){var x=T?T.width:0,u=o?o.width:0;e=Math.max(x,u)}if(d===void 0){var l=T?T.height:0,h=o?o.height:0;d=Math.max(l,h)}}super(t,s,g,e,d,M),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,_e(M,function(r,f){this[`${f}Face`]=r},this);var n=Ls(C,"flip",void 0);n!==!1&&(this.flip=new a4(this,n)),this.setOrientation(Ls(C,"orientation",0)),n4(this,M),this.setFace(Ls(C,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,_e(this.faces,function(s){s.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,_e(this.faces,function(s){s.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,_e(this.faces,function(s){s.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=u4[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=d4[t]),this.currentFaceIndex=t;var s=t===1,g=s?180:0;this.orientation===0?this.angleY=g:this.angleX=g}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const u4={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},d4={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const f4=Phaser.Utils.Objects.GetValue;var c4=function(i,t,s){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=f4(s,"useParentBounds",!1),t.setPosition(i.x,i.y).setVisible(!1),i.pin(t)},Cm=function(i,t){if(!i)return!1;for(var s=t.visibleSibling,g=0,C=s.length;g<C;g++)i.setChildVisible(s[g],!0);return s.length=0,i.setChildVisible(t,!1),t.isRunning=!1,!0},v4=function(i,t){if(!i)return!1;Cm(i,t);var s=t.useParentBounds;Ru({gameObjects:i.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:s?i.displayWidth:void 0,height:s?i.displayHeighth:void 0,originX:s?i.originX:void 0,originY:s?i.originY:void 0}),i.setChildVisible(t,!0);for(var g=t.visibleSibling,C=i.children,M=0,o=C.length;M<o;M++){var T=C[M];T.visible&&T!==t&&(i.setChildVisible(T,!1),g.push(T))}return t.isRunning=!0,!0},Sm=function(i){return class extends i{constructor(s,g){var C=s.scene;super(C,0,0,1,1,g),C.add.existing(this),c4(s,this,g)}destroy(s){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(s))}enter(){var s=v4(this.rexContainer.parent,this);return s&&this.syncSize(),this}exit(){return Cm(this.rexContainer.parent,this),this}}};class Em extends Sm(Tm){get perspectiveState(){return this.isRunning}}const p4=Phaser.Utils.Objects.GetValue;var g4=function(i){var t=this.scene;this.setSnapshotPadding(p4(i,"snapshotPadding",0)),i=Gs(i),delete i.width,delete i.height,i.front={width:1,height:1},i.back={width:1,height:1};var s=new l4(t,i);t.add.existing(s);var g=s.flip;if(g){var C=this;g.on("start",function(){C.enterPerspectiveMode()}).on("complete",function(){C.exitPerspectiveMode()})}return s};const m4=["front","back"],x4={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var i=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,i),this.setChildVisible(this.childrenMap.back,!i),this},setSnapshotPadding(i){return this.snapshotPadding=i,this},snapshotFace(i){typeof i=="number"&&(i=m4[i]);var t=this.perspectiveCard.faces[i],s=this.childrenMap[i];t.rt.clear();var g=s.visible;s.visible=!0;var C=s.isRexContainerLite?s.getAllVisibleChildren():s;return t.snapshot(C,{padding:this.snapshotPadding}),s.visible=g,this}},Yv=Phaser.Utils.Objects.GetValue;class wd extends De{constructor(t,s){super(t,s),this.type="rexPerspectiveCard";var g=s.back,C=Yv(s,"expand.back",!0);this.add(g,{key:"back",expand:C});var M=s.front,o=Yv(s,"expand.front",!0);this.add(M,{key:"front",expand:o}),this.perspectiveCard=g4.call(this,s),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var s=t===0,g=this.childrenMap.front,C=this.childrenMap.back;this.setChildVisible(g,s),this.setChildVisible(C,!s)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,s,g,C,M,o){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,s,g,C,M,o),this}forEachFace(t,s,g){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,s,g),this}}Object.assign(wd.prototype,x4);st.register("perspectiveCard",function(i){var t=new wd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.PerspectiveCard",wd);var y4=function(i){var t=this.getElement("tabs.buttons");if(!(i>=t.length))return t[i].name},T4=function(i){for(var t=this.getElement("tabs.buttons"),s=0,g=t.length;s<g;s++)if(t[s].name===i)return s};const C4=Phaser.Utils.Objects.IsPlainObject,ml=Phaser.Utils.Objects.GetValue,S4=Phaser.Utils.String.UUID;var E4=function(i,t,s){if(C4(i)){var g=i;i=ml(g,"key"),t=ml(g,"tab"),s=ml(g,"page")}return i||(i=S4()),t.name=i,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(s,{key:i}),this},P4=function(i,t){var s;if(typeof i=="number"?s=i:s=this.getPageIndex(i),s!=null){var g;t!==void 0&&(g=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(s),g!==void 0&&(this.childrenMap.pages.fadeInDuration=g)}return this},M4=function(i){return this.swapPage(0,i),this},w4=function(i){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,i),this};const A4={swapPage:P4,swapFirstPage:M4,swapLastPage:w4};var R4=function(i,t){typeof i=="number"&&(i=this.getPageKey(i));var s=this.childrenMap.tabs,g=s.getByName(i),C=this.childrenMap.pages,M=C.getElement(i);return!g||!M?this:(C.removeChildrenMap(i),s.removeButton(g,t),C.remove(M,t),this)};const O4={removePage:R4};var L4=function(i){return typeof i=="number"&&(i=this.getPageKey(i)),this.childrenMap.pages.getPage(i)},F4=function(i){var t;return typeof i=="number"?t=i:t=this.getPageIndex(i),this.getElement("tabs.buttons")[t]},Pm={getPageKey:y4,getPageIndex:T4,addPage:E4,getPage:L4,getTab:F4};Object.assign(Pm,A4,O4);const Fs=Phaser.Utils.Objects.GetValue,Ia=Ct.prototype.add;class Jh extends Ct{constructor(t,s){s===void 0&&(s={});var g=Fs(s,"tabPosition","top"),C=g==="left"||g==="right"?"x":"y";s.orientation=C,super(t,s),this.type="rexTabPages";var M=Fs(s,"background",void 0);M&&this.addBackground(M);var o=Fs(s,"pages"),T=new $r(t,o);t.add.existing(T);var e=C==="y",d=e?Fs(s,"wrapTabs",!1):!1,x=Fs(s,"tabs",void 0);x===void 0&&(x={});var u=d?rs:te;x.orientation=e?"x":"y",x.buttonsType="radio";var l=new u(t,x);t.add.existing(l);var h=d?!0:Fs(s,"expand.tabs",!1),n=Fs(s,"align.tabs","left");switch(g){case"top":case"left":Ia.call(this,l,{proportion:0,expand:h,align:n}),Ia.call(this,T,{proportion:1,expand:!0});break;case"bottom":case"right":Ia.call(this,T,{proportion:1,expand:!0}),Ia.call(this,l,{proportion:0,expand:h,align:n});break}this.addChildrenMap("background",M),this.addChildrenMap("tabs",l),this.addChildrenMap("pages",T),l.on("button.click",function(r){var f=r.name;T.hasPage(f)&&T.swapPage(f)}),l.on("button.statechange",function(r,f,a,c){var p=a?"tab.focus":"tab.blur";this.emit(p,r,r.name)},this),T.on("pagevisible",function(r,f,a){this.emit("page.focus",r,f)}),T.on("pageinvisible",function(r,f,a){this.emit("page.blur",r,f)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}}Object.assign(Jh.prototype,Pm);st.register("tabPages",function(i){var t=new Jh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TabPages",Jh);class b4 extends Sh{constructor(t,s){s===void 0&&(s={}),s.destroy=!1,super(t,s)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const D4={expand(i){if(this.expanded===!0)return this;i===void 0&&(i=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,s=this.childrenMap.child;this.show(s);var g=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();return g.layout(),t.emit("folder.expand",i,this),s.emit("folder.expand",i,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,i),this},collapse(i){if(this.expanded===!1)return this;i===void 0&&(i=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,s=this.childrenMap.child;return t.emit("folder.collapse",i,this),s.emit("folder.collapse",i,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(s,1,1).hide(s);var g=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();g.layout(),this.emit("collapse.complete",this)},this).requestClose(null,i),this},toggle(i){return this.expanded?this.collapse(i):this.expand(i),this}};var I4=function(i,t){Hu.popUp.call(i,t,this.expandDirection)},B4=function(i,t){Hu.scaleDown.call(i,t,this.expandDirection)};const G4={setTransitionDuration(i){return this.transitionDuration=i,this.childTransition.setTransitInTime(i).setTransitOutTime(i),this},setExpandCallback(i){return i===void 0&&(i=I4.bind(this)),this.childTransition.setTransitInCallback(i),this},setCollapseCallback(i){return i===void 0&&(i=B4.bind(this)),this.childTransition.setTransitOutCallback(i),this}},Je=Phaser.Utils.Objects.GetValue;class jh extends Ct{constructor(t,s){s===void 0&&(s={}),s.hasOwnProperty("orientation")||(s.orientation=1),super(t,s),this.type="rexFolder",this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var g=s.background,C=s.title,M=s.child;g&&this.addBackground(g);var o=this.orientation===1?"left":"top",u=Je(s,"align.title",o),l=Je(s,"expand.title",!0);this.add(C,{proportion:0,align:u,expand:l});var T=Je(s,"toggleByTarget",void 0),e=Je(s,"toggleClickConfig");T===void 0&&(T=C),T&&g0.onClick.call(T,function(){this.toggle()},this,e),this.childTransition=new b4(M);var d=Je(s,"customChildOrigin",!1);if(!d){var x=this.rtl?1:0;M.setOrigin(x)}var u=Je(s,"align.child","left"),l=Je(s,"expand.child",!0),h=l?1:0;this.add(M,{proportion:h,align:u,expand:l}),this.addChildrenMap("title",C),this.addChildrenMap("child",M),this.addChildrenMap("background",g);var n=s.transition;this.setTransitionDuration(Je(n,"duration",200)),this.setExpandCallback(Je(n,"expandCallback",void 0)),this.setCollapseCallback(Je(n,"collapseCallback",void 0)),this.reLayoutTarget=Je(s,"reLayoutTarget",void 0);var r=s.onExpandStart;r&&this.on("expand.start",r);var f=s.onExpandComplete;f&&this.on("expand.complete",f);var a=s.onCollapseStart;a&&this.on("collapse.start",a);var c=s.onCollapseComplete;c&&this.on("collapse.complete",c)}}Object.assign(jh.prototype,D4,G4);st.register("folder",function(i){var t=new jh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Folder",jh);st.register("textArea",function(i){var t=new Xn(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.TextArea",Xn);var N4=function(){if(this.rexSizer.hidden)return 0;var i,t=this.child,s=t.rexSizer;return s.hidden?i=0:this.scrollMode===0?i=this.getChildWidth(t):i=0,i},z4=function(){if(this.rexSizer.hidden)return 0;var i,t=this.child,s=t.rexSizer;return s.hidden||this.scrollMode===0?i=0:i=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:Mt(t),i},V4=function(i){return i===void 0&&(i=[]),this.child&&this.child.isRexSizer&&i.push(this.child),i},U4=function(){var i=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:i+=this.childOY,this.child.setPosition(i,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},Y4=function(){var i=this.child,t,s;i.rexSizer.hidden||(this.scrollMode===0?t=this.width:s=this.height,i.isRexSizer?i.runLayout(this,t,s):ii(i,t,s),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},Mm={getChildrenWidth:N4,getChildrenHeight:z4,getChildrenSizers:V4,resetChildPosition:U4,layoutChildren:Y4};Object.assign(Mm,sm);const Xv=Phaser.Utils.Objects.IsPlainObject,je=Phaser.Utils.Objects.GetValue,X4=Phaser.Display.Align.TOP_LEFT;class wm extends Ws{constructor(t,s,g,C,M,o){Xv(s)?(o=s,s=je(o,"x",0),g=je(o,"y",0),C=je(o,"width",void 0),M=je(o,"height",void 0)):Xv(C)&&(o=C,C=je(o,"width",void 0),M=je(o,"height",void 0)),super(t,s,g,C,M,o),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(je(o,"scrollMode",!0)),this.setClampMode(je(o,"clamplChildOY",!0));var T=je(o,"child",void 0),e=je(o,"expand",!0);T.setOrigin&&T.setOrigin(0),this.add(T),this.sizerChildren=[T];var d=this.getSizerConfig(T);d.align=X4,d.expand=e,this.child=T,this.setupChildrenMask(je(o,"mask",void 0)),this.maskGameObject=yd(this.childrenMask)}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=J0[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?Mt(this.child):At(this.child)}get childWidth(){return this.scrollMode===0?At(this.child):Mt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var s=this.topChildOY,g=this.bottomChildOY,C=this.childOYExceedTop(t),M=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:C?t=s:M&&(t=g)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),C&&(this.execeedTopState||this.emit("execeedtop",this,t,s)),this.execeedTopState=C,M&&(this.execeedBottomState||this.emit("execeedbottom",this,t,g)),this.execeedBottomState=M}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(wm.prototype,Mm);const dr=Phaser.Utils.Objects.GetValue;class Am extends Uh{constructor(t,s){s===void 0&&(s={});var g=zh(s),C=dr(s,"panel",void 0);C===void 0&&(C={}),C.scrollMode=g,C.clamplChildOY=dr(s,"clamplChildOY",!1);var M=new wm(t,C);t.add.existing(M);var o=dr(C,"width",void 0),T=dr(C,"height",void 0),e,d;g===0?(e=o===void 0?1:0,d=T===void 0):(e=T===void 0?1:0,d=o===void 0),s.type="rexScrollablePanel",s.child={gameObject:M,proportion:e,expand:d};var x=dr(s,"space",void 0);x&&(x.child=x.panel),super(t,s),this.addChildrenMap("panel",M.child),this.addChildrenMap("panelLayer",M.maskLayer),this.addChildrenMap("mask",M.maskGameObject)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),ed(this.childrenMap.child,t),this}}st.register("scrollablePanel",function(i){var t=new Am(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ScrollablePanel",Am);const Ba={popUp:function(i,t){i.popUp(t)},scaleDown:function(i,t){i.scaleDown(t)},fadeIn:function(i,t){i.fadeIn(t)},fadeOut:function(i,t){i.fadeOut(t)}};var Jl=function(i,t,s){var g=Ft(s,"reverse",!1),C;if(ei(i[0]))if(g)for(var o=i.length,M=o-1;M>=0;M--)C=Jl(i[M],t,s);else for(var M=0,o=i.length;M<o;M++)C=Jl(i[M],t,s);else C=W4(i,t,s);return C},W4=function(i,t,s){var g=Ft(s,"argsConvert",void 0),C=Ft(s,"argsConvertScope",void 0),M=i[0];if($i=Su($i,i,1),g){g===!0&&(g=Lg,C=void 0);for(var o=0,T=$i.length;o<T;o++)C?$i[o]=g.call(C,$i[o],i):$i[o]=g($i[o],i)}var e;typeof M=="string"?(e=t[M],e==null&&(e=Ft(t,M,null))):e=M;var d=e.apply(t,$i);return d},$i=[];const Qe=Phaser.Utils.Objects.GetValue;class k4 extends ee{constructor(t,s){super(t,s);var g=Qe(s,"clock",void 0);g||(g=new Mg(t)),this.clock=g,this.clock.on("update",this.update,this),this.resetFromJSON(s)}resetFromJSON(t){return this.clock.resetFromJSON(Qe(t,"clock",void 0)),this.state=Qe(t,"state",0),this.commands=Qe(t,"commands",[]),this.scope=Qe(t,"scope",void 0),this.setTimeUnit(Qe(t,"timeUnit",0)),this.setDtMode(Qe(t,"dtMode",0)),this.index=Qe(t,"index",0),this.nextTime=Qe(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,s,g){this.stop();var C=Qe(g,"timeUnit",void 0);C!==void 0&&this.setTimeUnit(C);var M=Qe(g,"dtMode",void 0);return M!==void 0&&this.setDtMode(M),t=t.filter(function(o){var T=o[0];return!isNaN(T)}).map(function(o){var T=o[0];return typeof T=="string"&&(o[0]=parseFloat(o[0])),o}),this.dtMode===0&&t.sort(function(o,T){var e=o[0],d=T[0];return e>d?1:e<d?-1:0}),this.commands=t,this.scope=s,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var s=this.commands.length-1;;){var g=this.commands[this.index],C=g[1];if(ei(C)||(C=Su(H4,g,1)),Jl(C,this.scope),this.emit("runcommand",C,this.scope),this.index===s)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var s=this.commands[this.index][0];return this.timeUnit===1&&(s=s*1e3),this.dtMode===1&&(s+=t),s}setDtMode(t){return typeof t=="string"&&(t=K4[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=$4[t]),this.timeUnit=t,this}}var H4=[];const $4={ms:0,s:1,sec:1},K4={abs:0,absolute:0,inc:1,increment:1},fr=Phaser.Utils.Objects.GetValue;class Ad extends Ci{constructor(t,s){s===void 0&&(s={text:createDefaultTextObject(t)}),super(t,s),this.type="rexToast",this.setTransitInTime(fr(s,"duration.in",200)),this.setDisplayTime(fr(s,"duration.hold",1200)),this.setTransitOutTime(fr(s,"duration.out",200)),this.setTransitInCallback(fr(s,"transitIn",Ki.popUp)),this.setTransitOutCallback(fr(s,"transitOut",Ki.scaleDown)),this.player=new k4(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ki[t]),t){case Ki.popUp:t=Ba.popUp;break;case Ki.fadeIn:t=Ba.fadeIn;break}return t||(t=ue),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ki[t]),t){case Ki.scaleDown:t=Ba.scaleDown;break;case Ki.fadeOut:t=Ba.fadeOut;break}return t||(t=ue),this.transitOutCallback=t,this}setScale(t,s){return s===void 0&&(s=t),this.scaleX0=t,this.scaleY0=s,super.setScale(t,s),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var s=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[ue]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[ue]]];return this.player.load(s,this).once("complete",function(){this.showMessage()},this).start(),this}}const Ki={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};st.register("toast",function(i){var t=new Ad(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Toast",Ad);var Z4=function(i,t){if(t===!1)return null;if(ds(t))return t;var s=new Ii(i,t);return i.add.existing(s),s},Kr=function(i,t,s){s===void 0&&(s=!0),s?t=t?ge(t):{}:t||(t={});var g=new Tu(i,t);return i.add.existing(g),g};const Wv=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],J4=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];var jl={},kv;for(var Ga=0,j4=Wv.length;Ga<j4;Ga++)kv=Wv[Ga].toLowerCase(),jl[kv]=J4[Ga];var Q4=function(i){return i=i.toLowerCase(),jl.hasOwnProperty(i)?jl[i]:null},q4=function(i){return typeof i!="string"||(i.startsWith("#")?i=parseInt(i.substring(1),16):i.startsWith("0x")?i=parseInt(i.substring(2),16):i=Q4(i)),i};const _4=Phaser.Utils.String.Pad;var Hv=function(i,t){t===void 0&&(t="0x");var s=i.toString(16).toUpperCase();return s=_4(s,6,0,1),s=t+s,s},tI=function(i,t){!i||(i.setTint?i.setTint(t):i.setFillStyle&&i.setFillStyle(t))};const Ne=Phaser.Utils.Objects.GetValue,eI=Phaser.Utils.Objects.IsPlainObject,iI=Phaser.Math.Clamp;class Rd extends Ct{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorInputLite";var g=Ne(s,"background",void 0),C=Ne(s,"swatch"),M;eI(C)&&(M=Ne(C,"size"));var o=Z4(t,Ne(s,"swatch")),T=Ne(s,"inputText",!0),e;if(T&&(e=Kr(t,T)),g&&this.addBackground(g),o){M=Ne(s,"swatchSize",M);var d;M!==void 0?(ii(o,M,M),d=!1):d=Ne(s,"squareExpandSwatch",!0);var x=d?1:0;this.add(o,{proportion:0,expand:!1,fitRatio:x})}if(e){var u=Ne(T,"width")===void 0?1:0,l=Ne(T,"height")===void 0;this.add(e,{proportion:u,expand:l})}this.addChildrenMap("background",g),this.addChildrenMap("swatch",o),this.addChildrenMap("inputText",e),e&&e.on("close",function(){this.setValue(e.value)},this);var h=Ne(s,"valuechangeCallback",null);if(h!==null){var n=Ne(s,"valuechangeCallbackScope",void 0);this.on("valuechange",h,n)}this.setValue(Ne(s,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=q4(t),t==null){var g=this.childrenMap.inputText;g&&g.setText(Hv(this._value));return}}else t=iI(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var s=this.childrenMap.swatch;s&&tI(s,t);var g=this.childrenMap.inputText;g&&g.setText(Hv(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}}var sI={setCreateColorPickerBackgroundCallback(i){return this.colorPickerCreateBackgroundCallback=i,this},setColorPickerHPalettePosition(i){return this.colorPickerHPalettePosition=i,this},setColorPickerExpandDirection(i){return typeof i=="string"&&(i=nI[i]),this.colorPickerExpandDirection=i,this},setColorPickerEaseInDuration(i){return i===void 0&&(i=0),this.colorPickerEaseInDuration=i,this},setColorPickerEaseOutDuration(i){return i===void 0&&(i=0),this.colorPickerEaseOutDuration=i,this},setColorPickerTransitInCallback(i){return this.colorPickerTransitInCallback=i,this},setColorPickerTransitOutCallback(i){return this.colorPickerTransitOutCallback=i,this},setColorPickerBounds(i){return this.colorPickerBounds=i,this},setColorPickerWidth(i){return this.colorPickerWidth=i,this},setColorPickerHeight(i){return this.colorPickerHeight=i,this},setColorPickerSize(i,t){return this.setColorPickerWidth(i).setColorPickerHeight(t),this},setColorPickerSpace(i){return i===void 0&&(i={}),this.colorPickerSpace=i,this},setColorComponentsHeight(i){return this.colorComponentsHeight=i,this},setColorComponentsFormatLabelConfig(i){return this.colorComponentsFormatLabelConfig=i,this},setColorComponentsInputTextConfig(i){return this.colorComponentsInputTextConfig=i,this},setColorComponentsSpace(i){return i===void 0&&(i={}),this.colorComponentsSpace=i,this}};const nI={down:0,up:1},Rm=Phaser.Display.Color,th=Phaser.Math.Percent;var rI=function(i,t,s){s===void 0&&(s=!1);var g=i.width,C=i.height,M=new Rm;if(s)for(var o=0;o<C;o++){var T=th(o,0,C);M.setFromHSV(T,1,1),t.fillStyle=M.rgba,t.fillRect(0,o,g,1)}else for(var e=0;e<g;e++){var T=th(e,0,g);M.setFromHSV(T,1,1),t.fillStyle=M.rgba,t.fillRect(e,0,1,C)}},aI=function(i,t,s){for(var g=i.width,C=i.height,M=t.getImageData(0,0,g,C),o=M.data,T=new Rm,e=0;e<C;e++)for(var d=0;d<g;d++){var x=th(d,0,g),u=1-th(e,0,C);T.setFromHSV(s,x,u);var l=(e*g+d)*4;o[l]=T.red,o[l+1]=T.green,o[l+2]=T.blue,o[l+3]=255}t.putImageData(M,0,0)};const hI=Phaser.Display.Color,$v=Phaser.Math.Percent,oI=Phaser.Display.Color.ColorToRGBA,lI=Phaser.Display.Color.HSVToRGB;class uI extends Ys{constructor(t,s,g,C,M,o){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=2),M===void 0&&(M=2),super(t,s,g,C,M),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new hI,this.setOrientation(o),this.setSize(C,M)}setOrientation(t){return this.orientation=Bh(t),this}updateTexture(){return rI(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,s){return t===void 0?this.hue:(this.orientation===0?this.hue=$v(t,0,this.width):this.hue=$v(s,0,this.height),this.hue)}getColor(t,s){if(t===void 0)return this.color;var g=this.getHue(t,s);return this.colorObject.setFromRGB(lI(g,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(xl===void 0&&(xl={}),s=xl),this.colorObject.setFromRGB(oI(t)),this.orientation===0?(s.x=this.width*this.colorObject.h,s.y=this.height/2):(s.x=this.width/2,s.y=this.height*this.colorObject.h),s}}var xl=void 0,dI=Phaser.Math.RotateAround,Om=function(i,t,s,g){g===void 0?g={}:g===!0&&(yl===void 0&&(yl={}),g=yl),t-=i.width*i.originX,s-=i.height*i.originY;var C={x:t*i.scaleX,y:s*i.scaleY};return dI(C,0,0,-i.rotation),g.x=i.x+t,g.y=i.y+s,g},yl;class fI extends De{constructor(t,s){s===void 0&&(s={}),super(t,s);var g=s.width!=null?1:0,C=new uI(t).setOrientation(g);t.add.existing(C),this.type="rexColorPicker.HPalette",C.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var M=new Ii(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(M),this.add(C,{key:"paletteCanvas",expand:!0}).add(M,{key:"marker",expand:!1})}resize(t,s){if(this.width===t&&this.height===s)return this;super.resize(t,s);var g=Math.min(t,s);return this.childrenMap.marker.setSize(g,g),this}onPaletteCanvasPointerDown(t,s,g,C){if(!!t.isDown){var M=this.childrenMap.paletteCanvas,o=M.getColor(s,g);this.setMarkerPosition(o),this.emit("input",o)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,g=this.childrenMap.marker,C=s.colorToLocalPosition(t,!0);return Om(s,C.x,C.y,g),this.resetChildPositionState(g),this}getHue(t,s){var g=this.childrenMap.paletteCanvas;return g.getHue(t,s)}}const cI=Phaser.Display.Color,Kv=Phaser.Math.Percent,Zv=Phaser.Display.Color.ColorToRGBA,vI=Phaser.Display.Color.HSVToRGB;class pI extends Ys{constructor(t,s,g,C,M,o){s===void 0&&(s=0),g===void 0&&(g=0),C===void 0&&(C=2),M===void 0&&(M=2),super(t,s,g,C,M),this.type="rexColorPicker.SVPaletteCanvas",o===void 0&&(o=1),this.colorObject=new cI,this.setHue(o),this.setSize(C,M)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return aI(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,s){if(t===void 0)return this.colorObject.color;var g=Kv(t,0,this.width),C=1-Kv(s,0,this.height);return this.colorObject.setFromRGB(vI(this.hue,g,C)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(Zv(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,s){return s===void 0?s={}:s===!0&&(Tl===void 0&&(Tl={}),s=Tl),this.colorObject.setFromRGB(Zv(t)),s.x=this.width*this.colorObject.s,s.y=this.height*(1-this.colorObject.v),s}}var Tl=void 0;class gI extends De{constructor(t,s){super(t,s);var g=new pI(t);t.add.existing(g),this.type="rexColorPicker.SVPalette",g.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var C=new Ii(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(C),this.add(g,{key:"paletteCanvas",expand:!0}).add(C,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,s,g,C){if(!!t.isDown){var M=this.childrenMap.paletteCanvas,o=M.getColor(s,g);this.setMarkerPosition(o),this.emit("input",o)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var s=this.childrenMap.paletteCanvas;return s.setHue(t),this}setColor(t){if(this.color===t)return this;var s=this.childrenMap.paletteCanvas;return s.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var s=this.childrenMap.paletteCanvas,g=this.childrenMap.marker,C=s.colorToLocalPosition(t,!0);return Om(s,C.x,C.y,g),this.resetChildPositionState(g),this}}const qe=Phaser.Utils.Objects.GetValue;class Od extends Ct{constructor(t,s){super(t,s),this.type="rexColorPicker",this.freezePalettes=!1;var g=qe(s,"hPalette.position",0);typeof g=="string"&&(g=mI[g]);var C=g===0||g===2?1:0;this.setOrientation(C);var M=qe(s,"background",void 0),o,T;if(this.orientation===0){var o=qe(s,"hPalette.width",void 0);o===void 0&&(o=qe(s,"hPalette.size",10))}else T=qe(s,"hPalette.height",void 0),T===void 0&&(T=qe(s,"hPalette.size",10));var e=new fI(t,{width:o,height:T});t.add.existing(e);var d=qe(s,"svPalette.width",void 0),x=qe(s,"svPalette.height",void 0),u=new gI(t,{width:d,height:x});t.add.existing(u),M&&this.addBackground(M);var l={proportion:0,expand:!0},h,n;this.orientation===0?(h=d===void 0?1:0,n=x===void 0):(h=x===void 0?1:0,n=d===void 0);var r={proportion:h,expand:n};g===0||g===3?this.add(u,r).add(e,l):this.add(e,l).add(u,r),e.on("input",function(){u.setHue(e.getHue()),this.setValue(u.color,!0)},this),u.on("input",function(){this.setValue(u.color,!0)},this),this.addChildrenMap("background",M),this.addChildrenMap("hPalette",e),this.addChildrenMap("svPalette",u);var f=qe(s,"valuechangeCallback",null);if(f!==null){var a=qe(s,"valuechangeCallbackScope",void 0);this.on("valuechange",f,a)}this.setValue(qe(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,s,this)}}setValue(t,s){return this.freezePalettes=!!s,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}runLayout(t,s,g){return this.ignoreLayout?this:(super.runLayout(t,s,g),this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this)}}var mI={bottom:0,left:1,top:2,right:3};const ci=Phaser.Utils.Objects.GetValue,xI=Phaser.Display.Color,yI=Phaser.Display.Color.ColorToRGBA,TI=Phaser.Display.Color.HSVToRGB,bs=Phaser.Math.Clamp;class Ld extends Ct{constructor(t,s){s===void 0&&(s={}),s.orientation=0,super(t,s),this.type="rexColorComponents",this.colorObject=new xI;var g=ci(s,"background",void 0),C=ci(s,"formatLabel",void 0);ds(C)||(C=Ue(t,C).resetDisplayContent());var M=[];if(s.inputText0&&s.inputText1&&s.inputText2)M.push(s.inputText0),M.push(s.inputText1),M.push(s.inputText2);else for(var o=ci(s,"inputText"),T=0;T<3;T++){var e=Kr(t,o).setMaxLength(3).setNumberInput();M.push(e)}g&&this.addBackground(g);var x=ci(s,"proportion.formatLabel",0),d=!!C.isRexContainerLite,u=ci(s,"expand.formatLabel",d);this.add(C,{proportion:x,expand:u});for(var x=ci(o,"width")===void 0?1:0,u=ci(o,"height")===void 0,T=0,l=M.length;T<l;T++)this.add(M[T],{proportion:x,expand:u});this.addChildrenMap("background",g),this.addChildrenMap("formatLabel",C),this.addChildrenMap("components",M),this.onClick(C,this.toggleColorFormat,this);for(var T=0,l=M.length;T<l;T++)M[T].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var h=ci(s,"valuechangeCallback",null);if(h!==null){var n=ci(s,"valuechangeCallbackScope",void 0);this.on("valuechange",h,n)}C.setText("RGB"),this.setValue(ci(s,"value",16777215))}get value(){return this._value}set value(t){t=bs(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(yI(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,s,g,C;return this.colorFormat==="RGB"?(s=this.colorObject.red,g=this.colorObject.green,C=this.colorObject.blue):(s=Math.floor(this.colorObject.h*360),g=Math.floor(this.colorObject.s*100),C=Math.floor(this.colorObject.v*100)),t[0].setValue(s),t[1].setValue(g),t[2].setValue(C),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var s=bs(t[0].value,0,255),g=bs(t[1].value,0,255),C=bs(t[2].value,0,255);this.colorObject.setTo(s,g,C)}else{var M=bs(t[0].value,0,359)/360,o=bs(t[1].value,0,100)/100,T=bs(t[2].value,0,100)/100;this.colorObject.setFromRGB(TI(M,o,T))}return this}}const Cl=Phaser.Utils.Objects.GetValue;class CI extends Ct{constructor(t,s){s===void 0&&(s={}),s.orientation=1,super(t,s),this.type="rexColorInput.ColorPickerPanel";var g=Cl(s,"background",void 0),C=new Od(t,{hPalette:s.hPalette||{},svPalette:s.svPalette||{},space:{item:Cl(s,"space.hPalette",8)}});t.add.existing(C);var M;s.colorComponents&&(M=new Ld(t,s.colorComponents),t.add.existing(M)),g&&(this.addBackground(g),new Eh(g,{stopAllLevels:!1})),this.add(C,{proportion:1,expand:!0}),M&&this.add(M,{proportion:0,expand:!0}),this.addChildrenMap("background",g),this.addChildrenMap("colorPicker",C),this.addChildrenMap("colorComponents",M),C.on("valuechange",function(o){this.setValue(o)},this),M&&M.on("valuechange",function(o){this.setValue(o)},this),this.setValue(Cl(s,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var s=this.childrenMap.colorPicker;s.setValue(t);var g=this.childrenMap.colorComponents;g&&g.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var SI=function(t){var t=this.scene,s,g=this.colorPickerCreateBackgroundCallback;g&&(s=g.call(this,t),t.add.existing(s));var C=this.colorPickerWidth;C===void 0&&(C=this.width);var M=this.colorPickerHeight;M===void 0&&(M=C);var o;this.colorComponentsHeight>0?o={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:o=!1;var T=new CI(t,{width:C,height:M,background:s,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:o,value:this.value});return t.add.existing(T),T},EI=function(){if(!this.colorPicker){var i=SI.call(this).layout(),t=new um(i,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){i.on("valuechange",function(s){this.setValue(s)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=i,this.dropDownBehavior=t,this.pin(i),this}},Lm={openColorPicker:EI};Object.assign(Lm,sI);const re=Phaser.Utils.Objects.GetValue;class Qh extends Rd{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexColorInput",s.hasOwnProperty("colorPicker")||(s.colorPicker={background:{color:0}});var g=s.colorPicker,C=g!==!1&&g!==null;if(C){this.setColorPickerSize(re(g,"width",160),re(g,"height",170));var M,o=re(g,"background");o?M=function(h){return Ve(h,o)}:M=re(g,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(M),this.setColorPickerHPalettePosition(re(g,"hPalettePosition",0)),this.setColorPickerExpandDirection(re(g,"expandDirection")),this.setColorPickerEaseInDuration(re(g,"easeIn",200)),this.setColorPickerEaseOutDuration(re(g,"easeOut",200)),this.setColorPickerTransitInCallback(re(g,"transitIn")),this.setColorPickerTransitOutCallback(re(g,"transitOut")),this.setColorPickerBounds(re(g,"bounds"));var T=re(g,"space");T===void 0&&(T={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(T)}var e=s.colorComponents,d=e!==!1&&e!==null;if(C&&d){this.setColorComponentsHeight(re(e,"height",30)),this.setColorComponentsFormatLabelConfig(re(e,"formatLabel"));var x=re(e,"inputText");x||(x=re(s,"inputText")),this.setColorComponentsInputTextConfig(x);var u=re(e,"space");u===void 0&&(u={item:8}),this.setColorComponentsSpace(u)}var l=this.childrenMap.swatch;l&&C&&this.onClick(l,this.openColorPicker,this)}}Object.assign(Qh.prototype,Lm);st.register("colorInput",function(i){var t=new Qh(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ColorInput",Qh);st.register("colorInputLite",function(i){var t=new Rd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ColorInputBase",Rd);st.register("colorPicker",function(i){var t=new Od(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ColorPicker",Od);st.register("colorComponents",function(i){var t=new Ld(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.ColorComponents",Ld);var PI=function(){return function(i,t,s,g){t!=="panel"&&s.setChildVisible(i,!0)}},MI=function(){return function(i,t,s,g){t!=="panel"&&s.setChildVisible(i,!1)}};const wI={show:PI,hide:MI};var AI=function(i,t){return t===void 0&&(t=1),function(s,g,C,M){g!=="panel"&&C.fadeChild(s,M?0:i,t)}},RI=function(i,t){return t===void 0&&(t=0),function(s,g,C,M){g!=="panel"&&C.fadeChild(s,M?0:i,t)}};const OI={show:AI,hide:RI};var Jv=function(i,t){return function(s,g,C,M){g!=="panel"&&C.moveChild(s,M?0:i,t)}};const LI={show:Jv,hide:Jv};var jv=function(i,t){return function(s,g,C,M){g==="panel"&&C.moveChild(s,M?0:i,t)}};const FI={show:jv,hide:jv},Sl={visible:wI,fade:OI,move:LI,"move-panel":FI};var bI=function(i){var t,s;[t,...s]=typeof i=="string"?[i]:i;var g,C;return Sl.hasOwnProperty(t)?(g=Sl[t].show.apply(null,s),C=Sl[t].hide.apply(null,s)):(g=ue,C=ue),{show:g,hide:C}};const DI={showChild(i,t){var s=this.sizerChildren[i];return s&&(this.emit("showchild",s,i,this,t),this.resetChildState(s)),this},hideChild(i,t){var s=this.sizerChildren[i];return s&&(this.emit("hidechild",s,i,this,t),this.resetChildState(s)),this},swapChild(i,t){return this.currentChildKey===i||(this.currentChildKey==="panel"||i==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=i,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(i,t))),this},showPanel(i){return this.swapChild("panel",i),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var i=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(i),this},toggleRightSide(){var i=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(i),this},toggleTopSide(){var i=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(i),this},toggleBottomSide(){var i=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(i),this}},II=be.prototype.setChildVisible,BI={setChildVisible(i,t){var s;if(typeof i=="string"){var s=i;i=this.sizerChildren[s]}else s=Oh(this.sizerChildren,i);return t===void 0&&(t=this.currentChildKey===s),II.call(this,i,t),this}},GI={fadeChild(i,t,s){var g;return typeof i=="string"?(g=i,i=this.sizerChildren[g]):g=Oh(this.sizerChildren,i),t===void 0&&(t=500),s===void 0&&(s=this.currentChildKey===g?1:0),i.fadeIn(t,{start:i.alpha,end:s}),this},fadeChildPromise(i,t,s){return typeof i=="string"&&(i=this.sizerChildren[key]),this.fadeChild(i,t,s),i._fade?ae(i._fade):Promise.resolve()}},NI={moveChild(i,t,s,g){var C;typeof i=="string"?(C=i,i=this.sizerChildren[C]):C=Oh(this.sizerChildren,i),t===void 0&&(t=500);var M=this.currentChildKey===C;if(g===void 0)switch(C){case"leftSide":case"rightSide":g=At(i);break;case"topSide":case"bottomSide":g=Mt(i);break;default:if(M)switch(this.previousChildKey){case"leftSide":case"rightSide":g=At(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":g=Mt(this.sizerChildren[this.previousChildKey]);break;default:g=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":g=At(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":g=Mt(this.sizerChildren[this.currentChildKey]);break;default:g=0;break}break}var o,T,e,d;if(M)switch(C){case"panel":switch(this.previousChildKey){case"leftSide":o=!0;break;case"rightSide":T=!0;break;case"topSide":e=!0;break;case"bottomSide":d=!0;break}break;case"leftSide":T=!0;break;case"rightSide":o=!0;break;case"topSide":d=!0;break;case"bottomSide":e=!0;break}else switch(C){case"panel":switch(this.currentChildKey){case"leftSide":T=!0;break;case"rightSide":o=!0;break;case"topSide":d=!0;break;case"bottomSide":e=!0;break}break;case"leftSide":o=!0;break;case"rightSide":T=!0;break;case"topSide":e=!0;break;case"bottomSide":d=!0;break}return o?i.moveTo(t,`-=${g}`,void 0,s):T?i.moveTo(t,`+=${g}`,void 0,s):e?i.moveTo(t,void 0,`-=${g}`,s):d?i.moveTo(t,void 0,`+=${g}`,s):i.moveTo(0),this},moveChildPromise(i,t,s,g){return typeof i=="string"&&(i=this.sizerChildren[key]),this.moveChild(i,t,s,g),i._easeMove?ae(i._easeMove):Promise.resolve()}};var Fm={};Object.assign(Fm,BI,GI,NI);const Se=Phaser.Utils.Objects.GetValue;class Fd extends De{constructor(t,s){super(t,s),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var g=Se(s,"showChildCallback",void 0);if(g)if(ns(g)){var C=Se(s,"showChildCallbackScope",void 0);this.on("showchild",g,C);var M=Se(s,"hideChildCallback",void 0),o=Se(s,"hideChildCallbackScope",void 0);this.on("hidechild",M,o)}else{var T=bI(g);this.on("showchild",T.show),this.on("hidechild",T.hide)}var e=Se(s,"background",void 0),d=Se(s,"panel",void 0),x=Se(s,"leftSide",void 0),u=Se(s,"rightSide",void 0),l=Se(s,"topSide",void 0),h=Se(s,"bottomSide",void 0);if(e&&this.addBackground(e),d&&this.add(d,"panel","center",0,!0),x){var n=Se(s,"expand.left",!0);this.add(x,"leftSide","left-top",0,{height:n})}if(u){var n=Se(s,"expand.right",!0);this.add(u,"rightSide","right-top",0,{height:n})}if(l){var n=Se(s,"expand.top",!0);this.add(l,"topSide","left-top",0,{width:n})}if(h){var n=Se(s,"expand.bottom",!0);this.add(h,"bottomSide","left-bottom",0,{width:n})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Fd.prototype,DI,Fm);st.register("sides",function(i){var t=new Fd(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Sides",Fd);class bm extends Ci{constructor(t,s){s=ud(t,s),super(t,s),this.type="rexTweaker.Title"}setTitle(t){return t=t?ge(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class zI extends bm{constructor(t,s){s===void 0&&(s={}),super(t,s),this.type="rexTweaker.FolderTitle";var g=new xh(t,s.expandedIcon);t.add.existing(g),this.addSpace().add(g,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",g)}setExpandedState(t){t===void 0&&(t=!0);var s=t?"down":"right",g=this.childrenMap.expandedIcon;return g.setDirection(s),this}}var Dm=function(i,t){var s=new Id(i,t);return i.add.existing(s),s},bd=function(i,t,s){return Ve(i,s)};const VI={setBindingTarget(i){var t=this.childrenMap.child;return t.setBindingTarget(i),this}},UI={getMaxInputRowTitleWidth(){var i=this.childrenMap.child,t=i.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(i){i-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(i),this}};class Im extends jh{constructor(t,s){super(t,s),this.type="rexTweaker.Folder"}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}}Object.assign(Im.prototype,VI,UI);const mn=Phaser.Utils.Objects.GetValue;var YI=function(i,t,s){var g=mn(s,"title")||{},C=new zI(i,g);i.add.existing(C),C.on("folder.expand",function(){C.setExpandedState(!0)}).on("folder.collapse",function(){C.setExpandedState(!1)});var M={root:mn(s,"root"),styles:mn(s,"tweaker"),space:mn(s,"space")||{}},o=Dm(i,M),T=mn(s,"background"),e=bd(i,t,T),d=new Im(i,{orientation:1,title:C,child:o,background:e,transition:{duration:mn(s,"transition.duration",200)}});return i.add.existing(d),d};const Qv=Phaser.Utils.Objects.GetValue;var XI=function(i){var t=this.scene,s=Qv(this.styles,"folder")||{};s.tweaker=this.styles,s.root=this.root;var g=YI(t,i,s);delete s.tweaker,delete s.root,this.add(g,{expand:!0}),g.setTitle(i);var C=Qv(i,"expanded",!0);C?g.expand(0):g.collapse(0);var M=g.getElement("child");return i.key&&this.root.addChildrenMap(i.key,M),M};const WI={setBindingTarget(i){for(var t=this.childrenMap.pages.children,s=0,g=t.length;s<g;s++)t[s].setBindingTarget(i);return this}},kI={getMaxInputRowTitleWidth(){for(var i=0,t=this.childrenMap.pages.children,s=0,g=t.length;s<g;s++)i=Math.max(i,t[s].getMaxInputRowTitleWidth());return i+this.getInnerPadding("left")},setInputRowTitleWidth(i){i-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,s=0,g=t.length;s<g;s++)t[s].setInputRowTitleWidth(i);return this}};class Bm extends Jh{constructor(t,s){super(t,s),this.type="rexTweaker.TabPages"}}Object.assign(Bm.prototype,WI,kI);const Na=Phaser.Utils.Objects.GetValue;var HI=function(i,t,s){var g=new Bm(i,s);i.add.existing(g);for(var C=Na(s,"tab"),M={root:Na(s,"root"),styles:Na(s,"tweaker")},o=Na(t,"pages")||[],T=0,e=o.length;T<e;T++){var d=o[T];g.addPage({key:d.title,tab:Ue(i,C).setActiveState(!1).resetDisplayContent({text:d.title}),page:Dm(i,M)})}return g.on("tab.focus",function(x,u){x.setActiveState(!0)}).on("tab.blur",function(x,u){x.setActiveState(!1)}),g};const qv=Phaser.Utils.Objects.GetValue;var $I=function(i){var t=this.scene,s=qv(this.styles,"tab")||{};s.tweaker=this.styles,s.root=this.root;var g=HI(t,i,s);delete s.tweaker,delete s.root,this.add(g,{expand:!0});for(var C=qv(i,"pages")||[],M=[],o=0,T=0,e=C.length;T<e;T++){var d=g.getPage(T),x=C[T].show;x&&(o=T);var u=C[T].key;u&&this.root.addChildrenMap(u,d),M.push(d)}return g.swapPage(o,0),M};const Ka="string",Gm="number",Nm="range",zm="list",KI="buttons",Vm="boolean",ZI="toggleSwitch",JI="color";var jI=function(i,t,s){if(s.view)return s.view;if(s.options)return zm;if(!i)return Ka;var g=i[t];switch(typeof g){case"number":return QI(s,"min","max")?Nm:Gm;case"string":return Ka;case"boolean":return Vm;default:return Ka}},QI=function(i,...t){for(var s=0,g=t.length;s<g;s++)if(i[t[s]]===void 0)return!1;return!0};const qI={setupBinding(){var i=this.childrenMap.inputField;return i.on("valuechange",function(t){!this.bindingTarget||!this.autoUpdateEnable||(this.bindingTarget[this.bindTargetKey]=t)},this),this},setAutoUpdateEnable(i){return i===void 0&&(i=!0),this.autoUpdateEnable=i,this},setBindingTarget(i,t){return this.bindingTarget=i,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(i){return this.bindTargetKey=i,this},syncTargetValue(){if(!this.bindingTarget||!this.bindTargetKey)return this;var i=this.childrenMap.inputField;return i.syncValue(this.bindingTarget[this.bindTargetKey]),this}},_I={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(!!this.bindingTarget){var i=this.bindingTarget[this.bindTargetKey],t=this.childrenMap.inputField;t.value!==i&&t.syncValue(i)}}},t9={getMinTitleWidth(){var i=this.childrenMap.title;if(!i)return 0;var t=i.rexSizer.padding,s=this.getChildWidth(this.childrenMap.title)+t.left+t.right;return s+this.getInnerPadding("left")},setMinTitleWidth(i){var t=this.childrenMap.title;if(!t)return this;var s=t.rexSizer.padding;return i-=s.left+s.right,t.minWidth=i,this}},El=Phaser.Utils.Objects.GetValue;class Dd extends Ct{constructor(t,s){super(t,s),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var g=s.inputTitle,C=s.inputField,M=s.background,d=El(s,"proportion.title",0),o=El(s,"space.title",0),T;this.orientation===0?T={right:o}:T={bottom:o},this.add(g,{proportion:d,expand:!0,padding:T});var e=s.parentOrientation===1?1:0,d=El(s,"proportion.inputField",e);this.add(C,{proportion:d,expand:!0}),M&&this.addBackground(M),this.addChildrenMap("title",g),this.addChildrenMap("inputField",C),this.addChildrenMap("background",M),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var s=this.childrenMap.title;return s.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(Dd.prototype,qI,_I,t9);var Um=function(i,t,s){var g=new bm(i,s);return i.add.existing(g),g};class cs extends Ct{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}validate(t){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(t,this._value,this.bindingTarget,this.bindingKey)}set value(t){if(this._value!==t){var s=this._value;this._value=t,this.syncValueFlag||this.emit("valuechange",t,s,this.bindingTarget,this.bindingKey)}}getValue(){return this.value}setValue(t){return this.value=t,this}syncValue(t){return this.syncValueFlag=!0,this.value=t,this.syncValueFlag=!1,this}get readOnly(){return this._readOnly}set readOnly(t){this._readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,!0}setTextFormatCallback(t){return this.textFormatCallback=t,this}setValidateCallback(t){return this.validateCallback=t,this}}class e9 extends cs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.TextInput";var g=s.inputText,C=Kr(t,g);this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("inputText",C),C.on("close",function(){this.setValue(C.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(s),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var _v=function(i,t,s){var g=new e9(i,s);return i.add.existing(g),g.setInputTextReadOnly(!!t.inputTextReadOnly),g};class i9 extends cs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.NumberInput";var g=s.inputNumber||s.inputText,C=Kr(t,g).setNumberInput();this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("inputText",C),C.on("close",function(){this.setValue(C.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(s),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var s9=function(i,t,s){var g=new i9(i,s);return i.add.existing(g),g.setInputTextReadOnly(!!t.inputTextReadOnly),g},n9=function(i,t){var s=new ks(i,t);return i.add.existing(s),s};const Pl=Phaser.Utils.Objects.GetValue,r9=Phaser.Math.Linear,a9=Phaser.Math.Snap.Floor;class h9 extends cs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.RangeInput";var g=s.slider,C=this.orientation===0?"track.height":"track.width",M=Pl(g,C),o=n9(t,g),x=s.parentOrientation===1?2:0,u=Pl(s,"proportion.range.slider",x),T=M===void 0;this.add(o,{proportion:u,expand:T});var e=s.inputNumber||s.inputText,d=Kr(t,e).setNumberInput(),x=s.parentOrientation===1?1:0,u=Pl(s,"proportion.range.inputText",x);this.add(d,{proportion:u,expand:!0}),this.addChildrenMap("slider",o),this.addChildrenMap("inputText",d),d.on("close",function(){this.setValue(d.value)},this),o.on("valuechange",function(){var l=r9(this.minValue,this.maxValue,o.value);this.step&&(l=a9(l,this.step,this.minValue)),this.setValue(l)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText("").setText(s),this.childrenMap.slider.setValue(t,this.minValue,this.maxValue),super.value=t}}setRange(t,s,g){return this.minValue=t,this.maxValue=s,this.step=g,this.childrenMap.slider.setGap(g,t,s),this}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var o9=function(i,t,s){var g=new h9(i,s);return i.add.existing(g),g.setRange(t.min,t.max,t.step),g.setInputTextReadOnly(!!t.inputTextReadOnly),g},l9=function(i,t){t=fm(i,t);var s=new Hr(i,t);return i.add.existing(s),s},Ym=function(i,t){for(var s=0,g=i.length;s<g;s++){var C=i[s];if(C.value===t)return s}},u9=function(i,t){var s=Ym(i,t);if(s!=null)return i[s].text};class d9 extends cs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ListInput";var g=l9(t,s.list);this.add(g,{proportion:1,expand:!0}),this.addChildrenMap("list",g),g.on("button.click",function(C,M,o,T,e,d){this.setValue(o.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.childrenMap.list,g=u9(s.options,t);s.resetDisplayContent({text:g}),super.value=t}}setOptions(t){return this.childrenMap.list.setOptions(t),this}}var f9=function(i,t,s){var g=new d9(i,s);return i.add.existing(g),g.setOptions(t.options),g},Xm=function(i,t){var s=new te(i,t);return i.add.existing(s),s},c9=function(i,t){for(var s=0,g=i.length;s<g;s++){var C=i[s];!C||C.setActiveState(s===t)}};const v9=Phaser.Utils.Objects.GetValue;class p9 extends cs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ButtonsInput";var g=s.button?ge(s.button):{},C=v9(g,"expand",!0);C&&(g.align="center"),delete g.expand;var M=Xm(t,{expand:C});M.buttonConfig=g,this.add(M,{proportion:1,expand:!0}),this.addChildrenMap("list",M),M.on("button.click",function(o,T,e,d){var x=M.options[T];!x||(this._selectedIndex=T,this.setValue(x.value),this._selectedIndex=void 0)},this)}get value(){return this._value}set value(t){if(this._value!==t){this.validate(t)||(t=this._value);var s=this.childrenMap.list,g=this._selectedIndex;g===void 0&&(g=Ym(s.options,t)),c9(s.childrenMap.buttons,g),super.value=t}}setOptions(t){var s=this.childrenMap.list;s.options=t;var g=this.scene,C=s.buttonConfig;s.clearButtons(!0);for(var M=0,o=t.length;M<o;M++){var T=t[M],e=Ue(g,C).setActiveState(!1).resetDisplayContent({text:T.text});s.addButton(e)}return this}}var g9=function(i,t,s){var g=new p9(i,s);return i.add.existing(g),g.setOptions(t.options),g},m9=function(i,t){var s=new Eu(i,t);return i.add.existing(s),s};const x9=Phaser.Utils.Objects.GetValue;class y9 extends cs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.CheckboxInput";var g=s.checkbox,C=m9(t,g),M=x9(g,"size");M!==void 0&&C.setSize(M,M);var o=M!==void 0?0:1;this.add(C,{proportion:0,expand:!1,fitRatio:o}),this.addChildrenMap("checkbox",C),C.on("valuechange",function(T){this.setValue(T)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.checkbox.setValue(t),super.value=t)}}var T9=function(i,t,s){var g=new y9(i,s);return i.add.existing(g),g},C9=function(i,t){var s=new Pu(i,t);return i.add.existing(s),s};const S9=Phaser.Utils.Objects.GetValue;class E9 extends cs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ToggleSwitchInput";var g=s.toggleSwitch,C=C9(t,g),M=S9(g,"size");M!==void 0&&C.setSize(M,M);var o=M!==void 0?0:1;this.addSpace().add(C,{proportion:0,expand:!1,fitRatio:o}),this.addChildrenMap("toggleSwitch",C),C.on("valuechange",function(T){this.setValue(T)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.toggleSwitch.setValue(t),super.value=t)}}var P9=function(i,t,s){var g=new E9(i,s);return i.add.existing(g),g},M9=function(i,t,s){s===void 0&&(s=!0),s?t=t?ge(t):{}:t||(t={});var g=new Qh(i,t);return i.add.existing(g),g};class w9 extends cs{constructor(t,s){s===void 0&&(s={}),super(t),this.type="rexTweaker.ColorInput";var g=s.colorInput,C=M9(t,g);this.add(C,{proportion:1,expand:!0}),this.addChildrenMap("colorInput",C),C.on("valuechange",function(M){this.setValue(M)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.validate(t)||(t=this._value),this.childrenMap.colorInput.setValue(t),super.value=t)}}var A9=function(i,t,s){var g=new w9(i,s);return i.add.existing(g),g},R9=function(i,t,s){var g=t.view,C;switch(g){case Ka:C=_v;break;case Gm:C=s9;break;case Nm:C=o9;break;case zm:C=f9;break;case KI:C=g9;break;case Vm:C=T9;break;case ZI:C=P9;break;case JI:C=A9;break;default:C=ns(g)?g:_v;break}var M=C(i,t,s,M);return M.setTextFormatCallback(t.format),M};const tp=Phaser.Utils.Objects.GetValue;var O9=function(i,t,s){var g=tp(s,"title")||{},C=Um(i,t,g),M=R9(i,t,s),o=tp(s,"background")||{},T=Ve(i,o),e=new Dd(i,{...t,...s,inputTitle:C,inputField:M,background:T});return i.add.existing(e),e.setTitle(t),e};Phaser.Utils.Objects.GetValue;var L9=function(i,t,s){arguments.length===1?(s=i,i=s.bindingTarget,t=s.bindingKey):s===void 0&&(s={}),s.title||(s.title=t),s.view||(s.view=jI(i,t,s));var g=this.styles.inputRow||{};g.parentOrientation=this.styles.orientation;var C=O9(this.scene,s,g),M=C.childrenMap.inputField,o;return this.orientation===1?o=0:(o=this.itemWidth>0?0:1,C.setMinWidth(this.itemWidth)),this.add(C,{proportion:o,expand:!0}),s.onValueChange&&M.on("valuechange",s.onValueChange),s.onValidate&&M.setValidateCallback(s.onValidate),C.setAutoUpdateEnable(s.autoUpdate),C.setBindingTarget(i,t),s.monitor&&C.startMonitorTarget(),s.key&&this.root.addChildrenMap(s.key,C),this},F9=function(i,t){var s=new Ii(i,t);return i.add.existing(s),s};const Ml=Phaser.Utils.Objects.GetValue;var b9=function(i,t,s){for(var g=Ml(s,"title")||{},C=Um(i,t,g),M=t.buttons,o=Ml(s,"button")||{},T=[],e=0,d=M.length;e<d;e++){var x=Ue(i,o);T.push(x);var u=M[e];x.resetDisplayContent({text:u.label}),x.callback=u.callback}var l=Xm(i,{buttons:T,expand:T.length===1}),h=Ml(s,"background")||{},n=F9(i,h),r=new Dd(i,{...s,inputTitle:C,inputField:l,background:n});return i.add.existing(r),r.setTitle(t),l.on("button.click",function(f){f.callback(r.bindingTarget)}),r};const D9=Phaser.Utils.Objects.GetValue;var ep=function(i){var t=this.scene;i===void 0&&(i={}),i.hasOwnProperty("label")&&(i.buttons=[{label:i.label,callback:i.callback}],delete i.label,delete i.callback);var s=i.bindingTarget;delete i.bindingTarget;var g=D9(this.styles,"inputRow")||{},C=b9(t,i,g);return this.add(C,{expand:!0}),s&&C.setBindingTarget(s),i.key&&this.root.addChildrenMap(i.key,C),this};const I9=Phaser.Utils.Objects.GetValue;var B9=function(i){var t=this.scene,s=I9(this.styles,"separator"),g=bd(t,i,s);return this.add(g,{expand:!0}),this},G9=function(i){for(var t=this.sizerChildren,s=0,g=t.length;s<g;s++){var C=t[s];!C.setBindingTarget||C.setBindingTarget(i)}return this},N9=function(){for(var i=0,t=this.sizerChildren,s=0,g=t.length;s<g;s++){var C=t[s];C.rexSizer.hidden||(C.getMinTitleWidth?i=Math.max(i,C.getMinTitleWidth()):C.getMaxInputRowTitleWidth&&(i=Math.max(i,C.getMaxInputRowTitleWidth())))}return i+this.getInnerPadding("left")},z9=function(i){i-=this.getInnerPadding("left");for(var t=this.sizerChildren,s=0,g=t.length;s<g;s++){var C=t[s];C.rexSizer.hidden||(C.setMinTitleWidth?C.setMinTitleWidth(i):C.setInputRowTitleWidth&&C.setInputRowTitleWidth(i))}return this},V9={addFolder:XI,addTab:$I,addInput:L9,addButton:ep,addButtons:ep,addSeparator:B9,setBindingTarget:G9,getMaxInputRowTitleWidth:N9,setInputRowTitleWidth:z9};const za=Phaser.Utils.Objects.GetValue;class Id extends Ct{constructor(t,s){if(s===void 0&&(s={}),s.orientation===void 0&&(s.orientation=1),super(t,s),this.type="rexTweakerShell",this.root=s.root||this,this.styles=za(s,"styles")||{},this.styles.orientation=this.orientation,this.itemWidth=za(this.styles,"itemWidth",0),this.root===this&&this.orientation===1){var g=za(s,"inputRow.alignTitle");if(g===void 0){var C=za(this.styles,"inputRow.proportion.title");g=!C}else g&&it(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitle=g}else this.alignInputRowTitle=!1;var M=bd(t,void 0,s.background);M&&this.addBackground(M)}preLayout(){super.preLayout(),this.alignInputRowTitle&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}}Object.assign(Id.prototype,V9);class Wm extends Id{constructor(t,s){s===void 0&&(s={}),s.styles===void 0&&(s.styles={}),s.background=s.styles.background||{},s.space=s.styles.space||{},super(t,s),this.type="rexTweaker"}}st.register("tweaker",function(i){var t=new Wm(this.scene,i);return this.scene.add.existing(t),t});it(window,"RexPlugins.UI.Tweaker",Wm);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function km(i){return typeof i>"u"||i===null}function U9(i){return typeof i=="object"&&i!==null}function Y9(i){return Array.isArray(i)?i:km(i)?[]:[i]}function X9(i,t){var s,g,C,M;if(t)for(M=Object.keys(t),s=0,g=M.length;s<g;s+=1)C=M[s],i[C]=t[C];return i}function W9(i,t){var s="",g;for(g=0;g<t;g+=1)s+=i;return s}function k9(i){return i===0&&Number.NEGATIVE_INFINITY===1/i}var H9=km,$9=U9,K9=Y9,Z9=W9,J9=k9,j9=X9,Kt={isNothing:H9,isObject:$9,toArray:K9,repeat:Z9,isNegativeZero:J9,extend:j9};function Hm(i,t){var s="",g=i.reason||"(unknown reason)";return i.mark?(i.mark.name&&(s+='in "'+i.mark.name+'" '),s+="("+(i.mark.line+1)+":"+(i.mark.column+1)+")",!t&&i.mark.snippet&&(s+=`

`+i.mark.snippet),g+" "+s):g}function Er(i,t){Error.call(this),this.name="YAMLException",this.reason=i,this.mark=t,this.message=Hm(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Er.prototype=Object.create(Error.prototype);Er.prototype.constructor=Er;Er.prototype.toString=function(t){return this.name+": "+Hm(this,t)};var pe=Er;function wl(i,t,s,g,C){var M="",o="",T=Math.floor(C/2)-1;return g-t>T&&(M=" ... ",t=g-T+M.length),s-g>T&&(o=" ...",s=g+T-o.length),{str:M+i.slice(t,s).replace(/\t/g,"\u2192")+o,pos:g-t+M.length}}function Al(i,t){return Kt.repeat(" ",t-i.length)+i}function Q9(i,t){if(t=Object.create(t||null),!i.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var s=/\r?\n|\r|\0/g,g=[0],C=[],M,o=-1;M=s.exec(i.buffer);)C.push(M.index),g.push(M.index+M[0].length),i.position<=M.index&&o<0&&(o=g.length-2);o<0&&(o=g.length-1);var T="",e,d,x=Math.min(i.line+t.linesAfter,C.length).toString().length,u=t.maxLength-(t.indent+x+3);for(e=1;e<=t.linesBefore&&!(o-e<0);e++)d=wl(i.buffer,g[o-e],C[o-e],i.position-(g[o]-g[o-e]),u),T=Kt.repeat(" ",t.indent)+Al((i.line-e+1).toString(),x)+" | "+d.str+`
`+T;for(d=wl(i.buffer,g[o],C[o],i.position,u),T+=Kt.repeat(" ",t.indent)+Al((i.line+1).toString(),x)+" | "+d.str+`
`,T+=Kt.repeat("-",t.indent+x+3+d.pos)+`^
`,e=1;e<=t.linesAfter&&!(o+e>=C.length);e++)d=wl(i.buffer,g[o+e],C[o+e],i.position-(g[o]-g[o+e]),u),T+=Kt.repeat(" ",t.indent)+Al((i.line+e+1).toString(),x)+" | "+d.str+`
`;return T.replace(/\n$/,"")}var q9=Q9,_9=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],tB=["scalar","sequence","mapping"];function eB(i){var t={};return i!==null&&Object.keys(i).forEach(function(s){i[s].forEach(function(g){t[String(g)]=s})}),t}function iB(i,t){if(t=t||{},Object.keys(t).forEach(function(s){if(_9.indexOf(s)===-1)throw new pe('Unknown option "'+s+'" is met in definition of "'+i+'" YAML type.')}),this.options=t,this.tag=i,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(s){return s},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=eB(t.styleAliases||null),tB.indexOf(this.kind)===-1)throw new pe('Unknown kind "'+this.kind+'" is specified for "'+i+'" YAML type.')}var he=iB;function ip(i,t){var s=[];return i[t].forEach(function(g){var C=s.length;s.forEach(function(M,o){M.tag===g.tag&&M.kind===g.kind&&M.multi===g.multi&&(C=o)}),s[C]=g}),s}function sB(){var i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,s;function g(C){C.multi?(i.multi[C.kind].push(C),i.multi.fallback.push(C)):i[C.kind][C.tag]=i.fallback[C.tag]=C}for(t=0,s=arguments.length;t<s;t+=1)arguments[t].forEach(g);return i}function Ql(i){return this.extend(i)}Ql.prototype.extend=function(t){var s=[],g=[];if(t instanceof he)g.push(t);else if(Array.isArray(t))g=g.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(s=s.concat(t.implicit)),t.explicit&&(g=g.concat(t.explicit));else throw new pe("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");s.forEach(function(M){if(!(M instanceof he))throw new pe("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(M.loadKind&&M.loadKind!=="scalar")throw new pe("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(M.multi)throw new pe("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),g.forEach(function(M){if(!(M instanceof he))throw new pe("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var C=Object.create(Ql.prototype);return C.implicit=(this.implicit||[]).concat(s),C.explicit=(this.explicit||[]).concat(g),C.compiledImplicit=ip(C,"implicit"),C.compiledExplicit=ip(C,"explicit"),C.compiledTypeMap=sB(C.compiledImplicit,C.compiledExplicit),C};var $m=Ql,Km=new he("tag:yaml.org,2002:str",{kind:"scalar",construct:function(i){return i!==null?i:""}}),Zm=new he("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(i){return i!==null?i:[]}}),Jm=new he("tag:yaml.org,2002:map",{kind:"mapping",construct:function(i){return i!==null?i:{}}}),jm=new $m({explicit:[Km,Zm,Jm]});function nB(i){if(i===null)return!0;var t=i.length;return t===1&&i==="~"||t===4&&(i==="null"||i==="Null"||i==="NULL")}function rB(){return null}function aB(i){return i===null}var Qm=new he("tag:yaml.org,2002:null",{kind:"scalar",resolve:nB,construct:rB,predicate:aB,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function hB(i){if(i===null)return!1;var t=i.length;return t===4&&(i==="true"||i==="True"||i==="TRUE")||t===5&&(i==="false"||i==="False"||i==="FALSE")}function oB(i){return i==="true"||i==="True"||i==="TRUE"}function lB(i){return Object.prototype.toString.call(i)==="[object Boolean]"}var qm=new he("tag:yaml.org,2002:bool",{kind:"scalar",resolve:hB,construct:oB,predicate:lB,represent:{lowercase:function(i){return i?"true":"false"},uppercase:function(i){return i?"TRUE":"FALSE"},camelcase:function(i){return i?"True":"False"}},defaultStyle:"lowercase"});function uB(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function dB(i){return 48<=i&&i<=55}function fB(i){return 48<=i&&i<=57}function cB(i){if(i===null)return!1;var t=i.length,s=0,g=!1,C;if(!t)return!1;if(C=i[s],(C==="-"||C==="+")&&(C=i[++s]),C==="0"){if(s+1===t)return!0;if(C=i[++s],C==="b"){for(s++;s<t;s++)if(C=i[s],C!=="_"){if(C!=="0"&&C!=="1")return!1;g=!0}return g&&C!=="_"}if(C==="x"){for(s++;s<t;s++)if(C=i[s],C!=="_"){if(!uB(i.charCodeAt(s)))return!1;g=!0}return g&&C!=="_"}if(C==="o"){for(s++;s<t;s++)if(C=i[s],C!=="_"){if(!dB(i.charCodeAt(s)))return!1;g=!0}return g&&C!=="_"}}if(C==="_")return!1;for(;s<t;s++)if(C=i[s],C!=="_"){if(!fB(i.charCodeAt(s)))return!1;g=!0}return!(!g||C==="_")}function vB(i){var t=i,s=1,g;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),g=t[0],(g==="-"||g==="+")&&(g==="-"&&(s=-1),t=t.slice(1),g=t[0]),t==="0")return 0;if(g==="0"){if(t[1]==="b")return s*parseInt(t.slice(2),2);if(t[1]==="x")return s*parseInt(t.slice(2),16);if(t[1]==="o")return s*parseInt(t.slice(2),8)}return s*parseInt(t,10)}function pB(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!Kt.isNegativeZero(i)}var _m=new he("tag:yaml.org,2002:int",{kind:"scalar",resolve:cB,construct:vB,predicate:pB,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),gB=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function mB(i){return!(i===null||!gB.test(i)||i[i.length-1]==="_")}function xB(i){var t,s;return t=i.replace(/_/g,"").toLowerCase(),s=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?s===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:s*parseFloat(t,10)}var yB=/^[-+]?[0-9]+e/;function TB(i,t){var s;if(isNaN(i))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Kt.isNegativeZero(i))return"-0.0";return s=i.toString(10),yB.test(s)?s.replace("e",".e"):s}function CB(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||Kt.isNegativeZero(i))}var tx=new he("tag:yaml.org,2002:float",{kind:"scalar",resolve:mB,construct:xB,predicate:CB,represent:TB,defaultStyle:"lowercase"}),ex=jm.extend({implicit:[Qm,qm,_m,tx]}),ix=ex,sx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),nx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function SB(i){return i===null?!1:sx.exec(i)!==null||nx.exec(i)!==null}function EB(i){var t,s,g,C,M,o,T,e=0,d=null,x,u,l;if(t=sx.exec(i),t===null&&(t=nx.exec(i)),t===null)throw new Error("Date resolve error");if(s=+t[1],g=+t[2]-1,C=+t[3],!t[4])return new Date(Date.UTC(s,g,C));if(M=+t[4],o=+t[5],T=+t[6],t[7]){for(e=t[7].slice(0,3);e.length<3;)e+="0";e=+e}return t[9]&&(x=+t[10],u=+(t[11]||0),d=(x*60+u)*6e4,t[9]==="-"&&(d=-d)),l=new Date(Date.UTC(s,g,C,M,o,T,e)),d&&l.setTime(l.getTime()-d),l}function PB(i){return i.toISOString()}var rx=new he("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:SB,construct:EB,instanceOf:Date,represent:PB});function MB(i){return i==="<<"||i===null}var ax=new he("tag:yaml.org,2002:merge",{kind:"scalar",resolve:MB}),Bd=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function wB(i){if(i===null)return!1;var t,s,g=0,C=i.length,M=Bd;for(s=0;s<C;s++)if(t=M.indexOf(i.charAt(s)),!(t>64)){if(t<0)return!1;g+=6}return g%8===0}function AB(i){var t,s,g=i.replace(/[\r\n=]/g,""),C=g.length,M=Bd,o=0,T=[];for(t=0;t<C;t++)t%4===0&&t&&(T.push(o>>16&255),T.push(o>>8&255),T.push(o&255)),o=o<<6|M.indexOf(g.charAt(t));return s=C%4*6,s===0?(T.push(o>>16&255),T.push(o>>8&255),T.push(o&255)):s===18?(T.push(o>>10&255),T.push(o>>2&255)):s===12&&T.push(o>>4&255),new Uint8Array(T)}function RB(i){var t="",s=0,g,C,M=i.length,o=Bd;for(g=0;g<M;g++)g%3===0&&g&&(t+=o[s>>18&63],t+=o[s>>12&63],t+=o[s>>6&63],t+=o[s&63]),s=(s<<8)+i[g];return C=M%3,C===0?(t+=o[s>>18&63],t+=o[s>>12&63],t+=o[s>>6&63],t+=o[s&63]):C===2?(t+=o[s>>10&63],t+=o[s>>4&63],t+=o[s<<2&63],t+=o[64]):C===1&&(t+=o[s>>2&63],t+=o[s<<4&63],t+=o[64],t+=o[64]),t}function OB(i){return Object.prototype.toString.call(i)==="[object Uint8Array]"}var hx=new he("tag:yaml.org,2002:binary",{kind:"scalar",resolve:wB,construct:AB,predicate:OB,represent:RB}),LB=Object.prototype.hasOwnProperty,FB=Object.prototype.toString;function bB(i){if(i===null)return!0;var t=[],s,g,C,M,o,T=i;for(s=0,g=T.length;s<g;s+=1){if(C=T[s],o=!1,FB.call(C)!=="[object Object]")return!1;for(M in C)if(LB.call(C,M))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(M)===-1)t.push(M);else return!1}return!0}function DB(i){return i!==null?i:[]}var ox=new he("tag:yaml.org,2002:omap",{kind:"sequence",resolve:bB,construct:DB}),IB=Object.prototype.toString;function BB(i){if(i===null)return!0;var t,s,g,C,M,o=i;for(M=new Array(o.length),t=0,s=o.length;t<s;t+=1){if(g=o[t],IB.call(g)!=="[object Object]"||(C=Object.keys(g),C.length!==1))return!1;M[t]=[C[0],g[C[0]]]}return!0}function GB(i){if(i===null)return[];var t,s,g,C,M,o=i;for(M=new Array(o.length),t=0,s=o.length;t<s;t+=1)g=o[t],C=Object.keys(g),M[t]=[C[0],g[C[0]]];return M}var lx=new he("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:BB,construct:GB}),NB=Object.prototype.hasOwnProperty;function zB(i){if(i===null)return!0;var t,s=i;for(t in s)if(NB.call(s,t)&&s[t]!==null)return!1;return!0}function VB(i){return i!==null?i:{}}var ux=new he("tag:yaml.org,2002:set",{kind:"mapping",resolve:zB,construct:VB}),Gd=ix.extend({implicit:[rx,ax],explicit:[hx,ox,lx,ux]}),as=Object.prototype.hasOwnProperty,eh=1,dx=2,fx=3,ih=4,Rl=1,UB=2,sp=3,YB=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,XB=/[\x85\u2028\u2029]/,WB=/[,\[\]\{\}]/,cx=/^(?:!|!!|![a-z\-]+!)$/i,vx=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function np(i){return Object.prototype.toString.call(i)}function mi(i){return i===10||i===13}function Bs(i){return i===9||i===32}function Ee(i){return i===9||i===32||i===10||i===13}function En(i){return i===44||i===91||i===93||i===123||i===125}function kB(i){var t;return 48<=i&&i<=57?i-48:(t=i|32,97<=t&&t<=102?t-97+10:-1)}function HB(i){return i===120?2:i===117?4:i===85?8:0}function $B(i){return 48<=i&&i<=57?i-48:-1}function rp(i){return i===48?"\0":i===97?"\x07":i===98?"\b":i===116||i===9?"	":i===110?`
`:i===118?"\v":i===102?"\f":i===114?"\r":i===101?"\x1B":i===32?" ":i===34?'"':i===47?"/":i===92?"\\":i===78?"\x85":i===95?"\xA0":i===76?"\u2028":i===80?"\u2029":""}function KB(i){return i<=65535?String.fromCharCode(i):String.fromCharCode((i-65536>>10)+55296,(i-65536&1023)+56320)}var px=new Array(256),gx=new Array(256);for(var xn=0;xn<256;xn++)px[xn]=rp(xn)?1:0,gx[xn]=rp(xn);function ZB(i,t){this.input=i,this.filename=t.filename||null,this.schema=t.schema||Gd,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=i.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function mx(i,t){var s={name:i.filename,buffer:i.input.slice(0,-1),position:i.position,line:i.line,column:i.position-i.lineStart};return s.snippet=q9(s),new pe(t,s)}function dt(i,t){throw mx(i,t)}function sh(i,t){i.onWarning&&i.onWarning.call(null,mx(i,t))}var ap={YAML:function(t,s,g){var C,M,o;t.version!==null&&dt(t,"duplication of %YAML directive"),g.length!==1&&dt(t,"YAML directive accepts exactly one argument"),C=/^([0-9]+)\.([0-9]+)$/.exec(g[0]),C===null&&dt(t,"ill-formed argument of the YAML directive"),M=parseInt(C[1],10),o=parseInt(C[2],10),M!==1&&dt(t,"unacceptable YAML version of the document"),t.version=g[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&sh(t,"unsupported YAML version of the document")},TAG:function(t,s,g){var C,M;g.length!==2&&dt(t,"TAG directive accepts exactly two arguments"),C=g[0],M=g[1],cx.test(C)||dt(t,"ill-formed tag handle (first argument) of the TAG directive"),as.call(t.tagMap,C)&&dt(t,'there is a previously declared suffix for "'+C+'" tag handle'),vx.test(M)||dt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{M=decodeURIComponent(M)}catch{dt(t,"tag prefix is malformed: "+M)}t.tagMap[C]=M}};function is(i,t,s,g){var C,M,o,T;if(t<s){if(T=i.input.slice(t,s),g)for(C=0,M=T.length;C<M;C+=1)o=T.charCodeAt(C),o===9||32<=o&&o<=1114111||dt(i,"expected valid JSON character");else YB.test(T)&&dt(i,"the stream contains non-printable characters");i.result+=T}}function hp(i,t,s,g){var C,M,o,T;for(Kt.isObject(s)||dt(i,"cannot merge mappings; the provided source object is unacceptable"),C=Object.keys(s),o=0,T=C.length;o<T;o+=1)M=C[o],as.call(t,M)||(t[M]=s[M],g[M]=!0)}function Pn(i,t,s,g,C,M,o,T,e){var d,x;if(Array.isArray(C))for(C=Array.prototype.slice.call(C),d=0,x=C.length;d<x;d+=1)Array.isArray(C[d])&&dt(i,"nested arrays are not supported inside keys"),typeof C=="object"&&np(C[d])==="[object Object]"&&(C[d]="[object Object]");if(typeof C=="object"&&np(C)==="[object Object]"&&(C="[object Object]"),C=String(C),t===null&&(t={}),g==="tag:yaml.org,2002:merge")if(Array.isArray(M))for(d=0,x=M.length;d<x;d+=1)hp(i,t,M[d],s);else hp(i,t,M,s);else!i.json&&!as.call(s,C)&&as.call(t,C)&&(i.line=o||i.line,i.lineStart=T||i.lineStart,i.position=e||i.position,dt(i,"duplicated mapping key")),C==="__proto__"?Object.defineProperty(t,C,{configurable:!0,enumerable:!0,writable:!0,value:M}):t[C]=M,delete s[C];return t}function Nd(i){var t;t=i.input.charCodeAt(i.position),t===10?i.position++:t===13?(i.position++,i.input.charCodeAt(i.position)===10&&i.position++):dt(i,"a line break is expected"),i.line+=1,i.lineStart=i.position,i.firstTabInLine=-1}function Yt(i,t,s){for(var g=0,C=i.input.charCodeAt(i.position);C!==0;){for(;Bs(C);)C===9&&i.firstTabInLine===-1&&(i.firstTabInLine=i.position),C=i.input.charCodeAt(++i.position);if(t&&C===35)do C=i.input.charCodeAt(++i.position);while(C!==10&&C!==13&&C!==0);if(mi(C))for(Nd(i),C=i.input.charCodeAt(i.position),g++,i.lineIndent=0;C===32;)i.lineIndent++,C=i.input.charCodeAt(++i.position);else break}return s!==-1&&g!==0&&i.lineIndent<s&&sh(i,"deficient indentation"),g}function qh(i){var t=i.position,s;return s=i.input.charCodeAt(t),!!((s===45||s===46)&&s===i.input.charCodeAt(t+1)&&s===i.input.charCodeAt(t+2)&&(t+=3,s=i.input.charCodeAt(t),s===0||Ee(s)))}function zd(i,t){t===1?i.result+=" ":t>1&&(i.result+=Kt.repeat(`
`,t-1))}function JB(i,t,s){var g,C,M,o,T,e,d,x,u=i.kind,l=i.result,h;if(h=i.input.charCodeAt(i.position),Ee(h)||En(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(C=i.input.charCodeAt(i.position+1),Ee(C)||s&&En(C)))return!1;for(i.kind="scalar",i.result="",M=o=i.position,T=!1;h!==0;){if(h===58){if(C=i.input.charCodeAt(i.position+1),Ee(C)||s&&En(C))break}else if(h===35){if(g=i.input.charCodeAt(i.position-1),Ee(g))break}else{if(i.position===i.lineStart&&qh(i)||s&&En(h))break;if(mi(h))if(e=i.line,d=i.lineStart,x=i.lineIndent,Yt(i,!1,-1),i.lineIndent>=t){T=!0,h=i.input.charCodeAt(i.position);continue}else{i.position=o,i.line=e,i.lineStart=d,i.lineIndent=x;break}}T&&(is(i,M,o,!1),zd(i,i.line-e),M=o=i.position,T=!1),Bs(h)||(o=i.position+1),h=i.input.charCodeAt(++i.position)}return is(i,M,o,!1),i.result?!0:(i.kind=u,i.result=l,!1)}function jB(i,t){var s,g,C;if(s=i.input.charCodeAt(i.position),s!==39)return!1;for(i.kind="scalar",i.result="",i.position++,g=C=i.position;(s=i.input.charCodeAt(i.position))!==0;)if(s===39)if(is(i,g,i.position,!0),s=i.input.charCodeAt(++i.position),s===39)g=i.position,i.position++,C=i.position;else return!0;else mi(s)?(is(i,g,C,!0),zd(i,Yt(i,!1,t)),g=C=i.position):i.position===i.lineStart&&qh(i)?dt(i,"unexpected end of the document within a single quoted scalar"):(i.position++,C=i.position);dt(i,"unexpected end of the stream within a single quoted scalar")}function QB(i,t){var s,g,C,M,o,T;if(T=i.input.charCodeAt(i.position),T!==34)return!1;for(i.kind="scalar",i.result="",i.position++,s=g=i.position;(T=i.input.charCodeAt(i.position))!==0;){if(T===34)return is(i,s,i.position,!0),i.position++,!0;if(T===92){if(is(i,s,i.position,!0),T=i.input.charCodeAt(++i.position),mi(T))Yt(i,!1,t);else if(T<256&&px[T])i.result+=gx[T],i.position++;else if((o=HB(T))>0){for(C=o,M=0;C>0;C--)T=i.input.charCodeAt(++i.position),(o=kB(T))>=0?M=(M<<4)+o:dt(i,"expected hexadecimal character");i.result+=KB(M),i.position++}else dt(i,"unknown escape sequence");s=g=i.position}else mi(T)?(is(i,s,g,!0),zd(i,Yt(i,!1,t)),s=g=i.position):i.position===i.lineStart&&qh(i)?dt(i,"unexpected end of the document within a double quoted scalar"):(i.position++,g=i.position)}dt(i,"unexpected end of the stream within a double quoted scalar")}function qB(i,t){var s=!0,g,C,M,o=i.tag,T,e=i.anchor,d,x,u,l,h,n=Object.create(null),r,f,a,c;if(c=i.input.charCodeAt(i.position),c===91)x=93,h=!1,T=[];else if(c===123)x=125,h=!0,T={};else return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=T),c=i.input.charCodeAt(++i.position);c!==0;){if(Yt(i,!0,t),c=i.input.charCodeAt(i.position),c===x)return i.position++,i.tag=o,i.anchor=e,i.kind=h?"mapping":"sequence",i.result=T,!0;s?c===44&&dt(i,"expected the node content, but found ','"):dt(i,"missed comma between flow collection entries"),f=r=a=null,u=l=!1,c===63&&(d=i.input.charCodeAt(i.position+1),Ee(d)&&(u=l=!0,i.position++,Yt(i,!0,t))),g=i.line,C=i.lineStart,M=i.position,Bn(i,t,eh,!1,!0),f=i.tag,r=i.result,Yt(i,!0,t),c=i.input.charCodeAt(i.position),(l||i.line===g)&&c===58&&(u=!0,c=i.input.charCodeAt(++i.position),Yt(i,!0,t),Bn(i,t,eh,!1,!0),a=i.result),h?Pn(i,T,n,f,r,a,g,C,M):u?T.push(Pn(i,null,n,f,r,a,g,C,M)):T.push(r),Yt(i,!0,t),c=i.input.charCodeAt(i.position),c===44?(s=!0,c=i.input.charCodeAt(++i.position)):s=!1}dt(i,"unexpected end of the stream within a flow collection")}function _B(i,t){var s,g,C=Rl,M=!1,o=!1,T=t,e=0,d=!1,x,u;if(u=i.input.charCodeAt(i.position),u===124)g=!1;else if(u===62)g=!0;else return!1;for(i.kind="scalar",i.result="";u!==0;)if(u=i.input.charCodeAt(++i.position),u===43||u===45)Rl===C?C=u===43?sp:UB:dt(i,"repeat of a chomping mode identifier");else if((x=$B(u))>=0)x===0?dt(i,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?dt(i,"repeat of an indentation width identifier"):(T=t+x-1,o=!0);else break;if(Bs(u)){do u=i.input.charCodeAt(++i.position);while(Bs(u));if(u===35)do u=i.input.charCodeAt(++i.position);while(!mi(u)&&u!==0)}for(;u!==0;){for(Nd(i),i.lineIndent=0,u=i.input.charCodeAt(i.position);(!o||i.lineIndent<T)&&u===32;)i.lineIndent++,u=i.input.charCodeAt(++i.position);if(!o&&i.lineIndent>T&&(T=i.lineIndent),mi(u)){e++;continue}if(i.lineIndent<T){C===sp?i.result+=Kt.repeat(`
`,M?1+e:e):C===Rl&&M&&(i.result+=`
`);break}for(g?Bs(u)?(d=!0,i.result+=Kt.repeat(`
`,M?1+e:e)):d?(d=!1,i.result+=Kt.repeat(`
`,e+1)):e===0?M&&(i.result+=" "):i.result+=Kt.repeat(`
`,e):i.result+=Kt.repeat(`
`,M?1+e:e),M=!0,o=!0,e=0,s=i.position;!mi(u)&&u!==0;)u=i.input.charCodeAt(++i.position);is(i,s,i.position,!1)}return!0}function op(i,t){var s,g=i.tag,C=i.anchor,M=[],o,T=!1,e;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=M),e=i.input.charCodeAt(i.position);e!==0&&(i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,dt(i,"tab characters must not be used in indentation")),!(e!==45||(o=i.input.charCodeAt(i.position+1),!Ee(o))));){if(T=!0,i.position++,Yt(i,!0,-1)&&i.lineIndent<=t){M.push(null),e=i.input.charCodeAt(i.position);continue}if(s=i.line,Bn(i,t,fx,!1,!0),M.push(i.result),Yt(i,!0,-1),e=i.input.charCodeAt(i.position),(i.line===s||i.lineIndent>t)&&e!==0)dt(i,"bad indentation of a sequence entry");else if(i.lineIndent<t)break}return T?(i.tag=g,i.anchor=C,i.kind="sequence",i.result=M,!0):!1}function t8(i,t,s){var g,C,M,o,T,e,d=i.tag,x=i.anchor,u={},l=Object.create(null),h=null,n=null,r=null,f=!1,a=!1,c;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=u),c=i.input.charCodeAt(i.position);c!==0;){if(!f&&i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,dt(i,"tab characters must not be used in indentation")),g=i.input.charCodeAt(i.position+1),M=i.line,(c===63||c===58)&&Ee(g))c===63?(f&&(Pn(i,u,l,h,n,null,o,T,e),h=n=r=null),a=!0,f=!0,C=!0):f?(f=!1,C=!0):dt(i,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),i.position+=1,c=g;else{if(o=i.line,T=i.lineStart,e=i.position,!Bn(i,s,dx,!1,!0))break;if(i.line===M){for(c=i.input.charCodeAt(i.position);Bs(c);)c=i.input.charCodeAt(++i.position);if(c===58)c=i.input.charCodeAt(++i.position),Ee(c)||dt(i,"a whitespace character is expected after the key-value separator within a block mapping"),f&&(Pn(i,u,l,h,n,null,o,T,e),h=n=r=null),a=!0,f=!1,C=!1,h=i.tag,n=i.result;else if(a)dt(i,"can not read an implicit mapping pair; a colon is missed");else return i.tag=d,i.anchor=x,!0}else if(a)dt(i,"can not read a block mapping entry; a multiline key may not be an implicit key");else return i.tag=d,i.anchor=x,!0}if((i.line===M||i.lineIndent>t)&&(f&&(o=i.line,T=i.lineStart,e=i.position),Bn(i,t,ih,!0,C)&&(f?n=i.result:r=i.result),f||(Pn(i,u,l,h,n,r,o,T,e),h=n=r=null),Yt(i,!0,-1),c=i.input.charCodeAt(i.position)),(i.line===M||i.lineIndent>t)&&c!==0)dt(i,"bad indentation of a mapping entry");else if(i.lineIndent<t)break}return f&&Pn(i,u,l,h,n,null,o,T,e),a&&(i.tag=d,i.anchor=x,i.kind="mapping",i.result=u),a}function e8(i){var t,s=!1,g=!1,C,M,o;if(o=i.input.charCodeAt(i.position),o!==33)return!1;if(i.tag!==null&&dt(i,"duplication of a tag property"),o=i.input.charCodeAt(++i.position),o===60?(s=!0,o=i.input.charCodeAt(++i.position)):o===33?(g=!0,C="!!",o=i.input.charCodeAt(++i.position)):C="!",t=i.position,s){do o=i.input.charCodeAt(++i.position);while(o!==0&&o!==62);i.position<i.length?(M=i.input.slice(t,i.position),o=i.input.charCodeAt(++i.position)):dt(i,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Ee(o);)o===33&&(g?dt(i,"tag suffix cannot contain exclamation marks"):(C=i.input.slice(t-1,i.position+1),cx.test(C)||dt(i,"named tag handle cannot contain such characters"),g=!0,t=i.position+1)),o=i.input.charCodeAt(++i.position);M=i.input.slice(t,i.position),WB.test(M)&&dt(i,"tag suffix cannot contain flow indicator characters")}M&&!vx.test(M)&&dt(i,"tag name cannot contain such characters: "+M);try{M=decodeURIComponent(M)}catch{dt(i,"tag name is malformed: "+M)}return s?i.tag=M:as.call(i.tagMap,C)?i.tag=i.tagMap[C]+M:C==="!"?i.tag="!"+M:C==="!!"?i.tag="tag:yaml.org,2002:"+M:dt(i,'undeclared tag handle "'+C+'"'),!0}function i8(i){var t,s;if(s=i.input.charCodeAt(i.position),s!==38)return!1;for(i.anchor!==null&&dt(i,"duplication of an anchor property"),s=i.input.charCodeAt(++i.position),t=i.position;s!==0&&!Ee(s)&&!En(s);)s=i.input.charCodeAt(++i.position);return i.position===t&&dt(i,"name of an anchor node must contain at least one character"),i.anchor=i.input.slice(t,i.position),!0}function s8(i){var t,s,g;if(g=i.input.charCodeAt(i.position),g!==42)return!1;for(g=i.input.charCodeAt(++i.position),t=i.position;g!==0&&!Ee(g)&&!En(g);)g=i.input.charCodeAt(++i.position);return i.position===t&&dt(i,"name of an alias node must contain at least one character"),s=i.input.slice(t,i.position),as.call(i.anchorMap,s)||dt(i,'unidentified alias "'+s+'"'),i.result=i.anchorMap[s],Yt(i,!0,-1),!0}function Bn(i,t,s,g,C){var M,o,T,e=1,d=!1,x=!1,u,l,h,n,r,f;if(i.listener!==null&&i.listener("open",i),i.tag=null,i.anchor=null,i.kind=null,i.result=null,M=o=T=ih===s||fx===s,g&&Yt(i,!0,-1)&&(d=!0,i.lineIndent>t?e=1:i.lineIndent===t?e=0:i.lineIndent<t&&(e=-1)),e===1)for(;e8(i)||i8(i);)Yt(i,!0,-1)?(d=!0,T=M,i.lineIndent>t?e=1:i.lineIndent===t?e=0:i.lineIndent<t&&(e=-1)):T=!1;if(T&&(T=d||C),(e===1||ih===s)&&(eh===s||dx===s?r=t:r=t+1,f=i.position-i.lineStart,e===1?T&&(op(i,f)||t8(i,f,r))||qB(i,r)?x=!0:(o&&_B(i,r)||jB(i,r)||QB(i,r)?x=!0:s8(i)?(x=!0,(i.tag!==null||i.anchor!==null)&&dt(i,"alias node should not have any properties")):JB(i,r,eh===s)&&(x=!0,i.tag===null&&(i.tag="?")),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):e===0&&(x=T&&op(i,f))),i.tag===null)i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);else if(i.tag==="?"){for(i.result!==null&&i.kind!=="scalar"&&dt(i,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+i.kind+'"'),u=0,l=i.implicitTypes.length;u<l;u+=1)if(n=i.implicitTypes[u],n.resolve(i.result)){i.result=n.construct(i.result),i.tag=n.tag,i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);break}}else if(i.tag!=="!"){if(as.call(i.typeMap[i.kind||"fallback"],i.tag))n=i.typeMap[i.kind||"fallback"][i.tag];else for(n=null,h=i.typeMap.multi[i.kind||"fallback"],u=0,l=h.length;u<l;u+=1)if(i.tag.slice(0,h[u].tag.length)===h[u].tag){n=h[u];break}n||dt(i,"unknown tag !<"+i.tag+">"),i.result!==null&&n.kind!==i.kind&&dt(i,"unacceptable node kind for !<"+i.tag+'> tag; it should be "'+n.kind+'", not "'+i.kind+'"'),n.resolve(i.result,i.tag)?(i.result=n.construct(i.result,i.tag),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):dt(i,"cannot resolve a node with !<"+i.tag+"> explicit tag")}return i.listener!==null&&i.listener("close",i),i.tag!==null||i.anchor!==null||x}function n8(i){var t=i.position,s,g,C,M=!1,o;for(i.version=null,i.checkLineBreaks=i.legacy,i.tagMap=Object.create(null),i.anchorMap=Object.create(null);(o=i.input.charCodeAt(i.position))!==0&&(Yt(i,!0,-1),o=i.input.charCodeAt(i.position),!(i.lineIndent>0||o!==37));){for(M=!0,o=i.input.charCodeAt(++i.position),s=i.position;o!==0&&!Ee(o);)o=i.input.charCodeAt(++i.position);for(g=i.input.slice(s,i.position),C=[],g.length<1&&dt(i,"directive name must not be less than one character in length");o!==0;){for(;Bs(o);)o=i.input.charCodeAt(++i.position);if(o===35){do o=i.input.charCodeAt(++i.position);while(o!==0&&!mi(o));break}if(mi(o))break;for(s=i.position;o!==0&&!Ee(o);)o=i.input.charCodeAt(++i.position);C.push(i.input.slice(s,i.position))}o!==0&&Nd(i),as.call(ap,g)?ap[g](i,g,C):sh(i,'unknown document directive "'+g+'"')}if(Yt(i,!0,-1),i.lineIndent===0&&i.input.charCodeAt(i.position)===45&&i.input.charCodeAt(i.position+1)===45&&i.input.charCodeAt(i.position+2)===45?(i.position+=3,Yt(i,!0,-1)):M&&dt(i,"directives end mark is expected"),Bn(i,i.lineIndent-1,ih,!1,!0),Yt(i,!0,-1),i.checkLineBreaks&&XB.test(i.input.slice(t,i.position))&&sh(i,"non-ASCII line breaks are interpreted as content"),i.documents.push(i.result),i.position===i.lineStart&&qh(i)){i.input.charCodeAt(i.position)===46&&(i.position+=3,Yt(i,!0,-1));return}if(i.position<i.length-1)dt(i,"end of the stream or a document separator is expected");else return}function xx(i,t){i=String(i),t=t||{},i.length!==0&&(i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i.charCodeAt(0)===65279&&(i=i.slice(1)));var s=new ZB(i,t),g=i.indexOf("\0");for(g!==-1&&(s.position=g,dt(s,"null byte is not allowed in input")),s.input+="\0";s.input.charCodeAt(s.position)===32;)s.lineIndent+=1,s.position+=1;for(;s.position<s.length-1;)n8(s);return s.documents}function r8(i,t,s){t!==null&&typeof t=="object"&&typeof s>"u"&&(s=t,t=null);var g=xx(i,s);if(typeof t!="function")return g;for(var C=0,M=g.length;C<M;C+=1)t(g[C])}function a8(i,t){var s=xx(i,t);if(s.length!==0){if(s.length===1)return s[0];throw new pe("expected a single document in the stream, but found more")}}var h8=r8,o8=a8,yx={loadAll:h8,load:o8},Tx=Object.prototype.toString,Cx=Object.prototype.hasOwnProperty,Vd=65279,l8=9,Pr=10,u8=13,d8=32,f8=33,c8=34,ql=35,v8=37,p8=38,g8=39,m8=42,Sx=44,x8=45,nh=58,y8=61,T8=62,C8=63,S8=64,Ex=91,Px=93,E8=96,Mx=123,P8=124,wx=125,de={};de[0]="\\0";de[7]="\\a";de[8]="\\b";de[9]="\\t";de[10]="\\n";de[11]="\\v";de[12]="\\f";de[13]="\\r";de[27]="\\e";de[34]='\\"';de[92]="\\\\";de[133]="\\N";de[160]="\\_";de[8232]="\\L";de[8233]="\\P";var M8=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],w8=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function A8(i,t){var s,g,C,M,o,T,e;if(t===null)return{};for(s={},g=Object.keys(t),C=0,M=g.length;C<M;C+=1)o=g[C],T=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),e=i.compiledTypeMap.fallback[o],e&&Cx.call(e.styleAliases,T)&&(T=e.styleAliases[T]),s[o]=T;return s}function R8(i){var t,s,g;if(t=i.toString(16).toUpperCase(),i<=255)s="x",g=2;else if(i<=65535)s="u",g=4;else if(i<=4294967295)s="U",g=8;else throw new pe("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+s+Kt.repeat("0",g-t.length)+t}var O8=1,Mr=2;function L8(i){this.schema=i.schema||Gd,this.indent=Math.max(1,i.indent||2),this.noArrayIndent=i.noArrayIndent||!1,this.skipInvalid=i.skipInvalid||!1,this.flowLevel=Kt.isNothing(i.flowLevel)?-1:i.flowLevel,this.styleMap=A8(this.schema,i.styles||null),this.sortKeys=i.sortKeys||!1,this.lineWidth=i.lineWidth||80,this.noRefs=i.noRefs||!1,this.noCompatMode=i.noCompatMode||!1,this.condenseFlow=i.condenseFlow||!1,this.quotingType=i.quotingType==='"'?Mr:O8,this.forceQuotes=i.forceQuotes||!1,this.replacer=typeof i.replacer=="function"?i.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function lp(i,t){for(var s=Kt.repeat(" ",t),g=0,C=-1,M="",o,T=i.length;g<T;)C=i.indexOf(`
`,g),C===-1?(o=i.slice(g),g=T):(o=i.slice(g,C+1),g=C+1),o.length&&o!==`
`&&(M+=s),M+=o;return M}function _l(i,t){return`
`+Kt.repeat(" ",i.indent*t)}function F8(i,t){var s,g,C;for(s=0,g=i.implicitTypes.length;s<g;s+=1)if(C=i.implicitTypes[s],C.resolve(t))return!0;return!1}function rh(i){return i===d8||i===l8}function wr(i){return 32<=i&&i<=126||161<=i&&i<=55295&&i!==8232&&i!==8233||57344<=i&&i<=65533&&i!==Vd||65536<=i&&i<=1114111}function up(i){return wr(i)&&i!==Vd&&i!==u8&&i!==Pr}function dp(i,t,s){var g=up(i),C=g&&!rh(i);return(s?g:g&&i!==Sx&&i!==Ex&&i!==Px&&i!==Mx&&i!==wx)&&i!==ql&&!(t===nh&&!C)||up(t)&&!rh(t)&&i===ql||t===nh&&C}function b8(i){return wr(i)&&i!==Vd&&!rh(i)&&i!==x8&&i!==C8&&i!==nh&&i!==Sx&&i!==Ex&&i!==Px&&i!==Mx&&i!==wx&&i!==ql&&i!==p8&&i!==m8&&i!==f8&&i!==P8&&i!==y8&&i!==T8&&i!==g8&&i!==c8&&i!==v8&&i!==S8&&i!==E8}function D8(i){return!rh(i)&&i!==nh}function vr(i,t){var s=i.charCodeAt(t),g;return s>=55296&&s<=56319&&t+1<i.length&&(g=i.charCodeAt(t+1),g>=56320&&g<=57343)?(s-55296)*1024+g-56320+65536:s}function Ax(i){var t=/^\n* /;return t.test(i)}var Rx=1,tu=2,Ox=3,Lx=4,Cn=5;function I8(i,t,s,g,C,M,o,T){var e,d=0,x=null,u=!1,l=!1,h=g!==-1,n=-1,r=b8(vr(i,0))&&D8(vr(i,i.length-1));if(t||o)for(e=0;e<i.length;d>=65536?e+=2:e++){if(d=vr(i,e),!wr(d))return Cn;r=r&&dp(d,x,T),x=d}else{for(e=0;e<i.length;d>=65536?e+=2:e++){if(d=vr(i,e),d===Pr)u=!0,h&&(l=l||e-n-1>g&&i[n+1]!==" ",n=e);else if(!wr(d))return Cn;r=r&&dp(d,x,T),x=d}l=l||h&&e-n-1>g&&i[n+1]!==" "}return!u&&!l?r&&!o&&!C(i)?Rx:M===Mr?Cn:tu:s>9&&Ax(i)?Cn:o?M===Mr?Cn:tu:l?Lx:Ox}function B8(i,t,s,g,C){i.dump=function(){if(t.length===0)return i.quotingType===Mr?'""':"''";if(!i.noCompatMode&&(M8.indexOf(t)!==-1||w8.test(t)))return i.quotingType===Mr?'"'+t+'"':"'"+t+"'";var M=i.indent*Math.max(1,s),o=i.lineWidth===-1?-1:Math.max(Math.min(i.lineWidth,40),i.lineWidth-M),T=g||i.flowLevel>-1&&s>=i.flowLevel;function e(d){return F8(i,d)}switch(I8(t,T,i.indent,o,e,i.quotingType,i.forceQuotes&&!g,C)){case Rx:return t;case tu:return"'"+t.replace(/'/g,"''")+"'";case Ox:return"|"+fp(t,i.indent)+cp(lp(t,M));case Lx:return">"+fp(t,i.indent)+cp(lp(G8(t,o),M));case Cn:return'"'+N8(t)+'"';default:throw new pe("impossible error: invalid scalar style")}}()}function fp(i,t){var s=Ax(i)?String(t):"",g=i[i.length-1]===`
`,C=g&&(i[i.length-2]===`
`||i===`
`),M=C?"+":g?"":"-";return s+M+`
`}function cp(i){return i[i.length-1]===`
`?i.slice(0,-1):i}function G8(i,t){for(var s=/(\n+)([^\n]*)/g,g=function(){var d=i.indexOf(`
`);return d=d!==-1?d:i.length,s.lastIndex=d,vp(i.slice(0,d),t)}(),C=i[0]===`
`||i[0]===" ",M,o;o=s.exec(i);){var T=o[1],e=o[2];M=e[0]===" ",g+=T+(!C&&!M&&e!==""?`
`:"")+vp(e,t),C=M}return g}function vp(i,t){if(i===""||i[0]===" ")return i;for(var s=/ [^ ]/g,g,C=0,M,o=0,T=0,e="";g=s.exec(i);)T=g.index,T-C>t&&(M=o>C?o:T,e+=`
`+i.slice(C,M),C=M+1),o=T;return e+=`
`,i.length-C>t&&o>C?e+=i.slice(C,o)+`
`+i.slice(o+1):e+=i.slice(C),e.slice(1)}function N8(i){for(var t="",s=0,g,C=0;C<i.length;s>=65536?C+=2:C++)s=vr(i,C),g=de[s],!g&&wr(s)?(t+=i[C],s>=65536&&(t+=i[C+1])):t+=g||R8(s);return t}function z8(i,t,s){var g="",C=i.tag,M,o,T;for(M=0,o=s.length;M<o;M+=1)T=s[M],i.replacer&&(T=i.replacer.call(s,String(M),T)),(Di(i,t,T,!1,!1)||typeof T>"u"&&Di(i,t,null,!1,!1))&&(g!==""&&(g+=","+(i.condenseFlow?"":" ")),g+=i.dump);i.tag=C,i.dump="["+g+"]"}function pp(i,t,s,g){var C="",M=i.tag,o,T,e;for(o=0,T=s.length;o<T;o+=1)e=s[o],i.replacer&&(e=i.replacer.call(s,String(o),e)),(Di(i,t+1,e,!0,!0,!1,!0)||typeof e>"u"&&Di(i,t+1,null,!0,!0,!1,!0))&&((!g||C!=="")&&(C+=_l(i,t)),i.dump&&Pr===i.dump.charCodeAt(0)?C+="-":C+="- ",C+=i.dump);i.tag=M,i.dump=C||"[]"}function V8(i,t,s){var g="",C=i.tag,M=Object.keys(s),o,T,e,d,x;for(o=0,T=M.length;o<T;o+=1)x="",g!==""&&(x+=", "),i.condenseFlow&&(x+='"'),e=M[o],d=s[e],i.replacer&&(d=i.replacer.call(s,e,d)),Di(i,t,e,!1,!1)&&(i.dump.length>1024&&(x+="? "),x+=i.dump+(i.condenseFlow?'"':"")+":"+(i.condenseFlow?"":" "),Di(i,t,d,!1,!1)&&(x+=i.dump,g+=x));i.tag=C,i.dump="{"+g+"}"}function U8(i,t,s,g){var C="",M=i.tag,o=Object.keys(s),T,e,d,x,u,l;if(i.sortKeys===!0)o.sort();else if(typeof i.sortKeys=="function")o.sort(i.sortKeys);else if(i.sortKeys)throw new pe("sortKeys must be a boolean or a function");for(T=0,e=o.length;T<e;T+=1)l="",(!g||C!=="")&&(l+=_l(i,t)),d=o[T],x=s[d],i.replacer&&(x=i.replacer.call(s,d,x)),Di(i,t+1,d,!0,!0,!0)&&(u=i.tag!==null&&i.tag!=="?"||i.dump&&i.dump.length>1024,u&&(i.dump&&Pr===i.dump.charCodeAt(0)?l+="?":l+="? "),l+=i.dump,u&&(l+=_l(i,t)),Di(i,t+1,x,!0,u)&&(i.dump&&Pr===i.dump.charCodeAt(0)?l+=":":l+=": ",l+=i.dump,C+=l));i.tag=M,i.dump=C||"{}"}function gp(i,t,s){var g,C,M,o,T,e;for(C=s?i.explicitTypes:i.implicitTypes,M=0,o=C.length;M<o;M+=1)if(T=C[M],(T.instanceOf||T.predicate)&&(!T.instanceOf||typeof t=="object"&&t instanceof T.instanceOf)&&(!T.predicate||T.predicate(t))){if(s?T.multi&&T.representName?i.tag=T.representName(t):i.tag=T.tag:i.tag="?",T.represent){if(e=i.styleMap[T.tag]||T.defaultStyle,Tx.call(T.represent)==="[object Function]")g=T.represent(t,e);else if(Cx.call(T.represent,e))g=T.represent[e](t,e);else throw new pe("!<"+T.tag+'> tag resolver accepts not "'+e+'" style');i.dump=g}return!0}return!1}function Di(i,t,s,g,C,M,o){i.tag=null,i.dump=s,gp(i,s,!1)||gp(i,s,!0);var T=Tx.call(i.dump),e=g,d;g&&(g=i.flowLevel<0||i.flowLevel>t);var x=T==="[object Object]"||T==="[object Array]",u,l;if(x&&(u=i.duplicates.indexOf(s),l=u!==-1),(i.tag!==null&&i.tag!=="?"||l||i.indent!==2&&t>0)&&(C=!1),l&&i.usedDuplicates[u])i.dump="*ref_"+u;else{if(x&&l&&!i.usedDuplicates[u]&&(i.usedDuplicates[u]=!0),T==="[object Object]")g&&Object.keys(i.dump).length!==0?(U8(i,t,i.dump,C),l&&(i.dump="&ref_"+u+i.dump)):(V8(i,t,i.dump),l&&(i.dump="&ref_"+u+" "+i.dump));else if(T==="[object Array]")g&&i.dump.length!==0?(i.noArrayIndent&&!o&&t>0?pp(i,t-1,i.dump,C):pp(i,t,i.dump,C),l&&(i.dump="&ref_"+u+i.dump)):(z8(i,t,i.dump),l&&(i.dump="&ref_"+u+" "+i.dump));else if(T==="[object String]")i.tag!=="?"&&B8(i,i.dump,t,M,e);else{if(T==="[object Undefined]")return!1;if(i.skipInvalid)return!1;throw new pe("unacceptable kind of an object to dump "+T)}i.tag!==null&&i.tag!=="?"&&(d=encodeURI(i.tag[0]==="!"?i.tag.slice(1):i.tag).replace(/!/g,"%21"),i.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",i.dump=d+" "+i.dump)}return!0}function Y8(i,t){var s=[],g=[],C,M;for(eu(i,s,g),C=0,M=g.length;C<M;C+=1)t.duplicates.push(s[g[C]]);t.usedDuplicates=new Array(M)}function eu(i,t,s){var g,C,M;if(i!==null&&typeof i=="object")if(C=t.indexOf(i),C!==-1)s.indexOf(C)===-1&&s.push(C);else if(t.push(i),Array.isArray(i))for(C=0,M=i.length;C<M;C+=1)eu(i[C],t,s);else for(g=Object.keys(i),C=0,M=g.length;C<M;C+=1)eu(i[g[C]],t,s)}function X8(i,t){t=t||{};var s=new L8(t);s.noRefs||Y8(i,s);var g=i;return s.replacer&&(g=s.replacer.call({"":g},"",g)),Di(s,0,g,!0,!0)?s.dump+`
`:""}var W8=X8,k8={dump:W8};function Ud(i,t){return function(){throw new Error("Function yaml."+i+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var H8=he,$8=$m,K8=jm,Z8=ex,J8=ix,j8=Gd,Q8=yx.load,q8=yx.loadAll,_8=k8.dump,t7=pe,e7={binary:hx,float:tx,map:Jm,null:Qm,pairs:lx,set:ux,timestamp:rx,bool:qm,int:_m,merge:ax,omap:ox,seq:Zm,str:Km},i7=Ud("safeLoad","load"),s7=Ud("safeLoadAll","loadAll"),n7=Ud("safeDump","dump"),r7={Type:H8,Schema:$8,FAILSAFE_SCHEMA:K8,JSON_SCHEMA:Z8,CORE_SCHEMA:J8,DEFAULT_SCHEMA:j8,load:Q8,loadAll:q8,dump:_8,YAMLException:t7,types:e7,safeLoad:i7,safeLoadAll:s7,safeDump:n7},pr=function(i){if(typeof i=="string")try{return r7.load(i)}catch(t){console.log(t);return}return i},a7=function(i,t){if(i.hasOwnProperty("$type"))return i.$type;if(i.hasOwnProperty("name")){var s=t[`#${i.name}`];if(s&&s.hasOwnProperty("$type"))return s.$type}if(i.hasOwnProperty("$class"))for(var g=i.$class.split(" "),C=0,M=g.length;C<M;C++){var s=t[`.${g[C]}`];if(s&&s.hasOwnProperty("$type"))return s.$type}},Za=function(i,t){if(t===void 0)return i;for(var s in t)if(!i.hasOwnProperty(s))i[s]=ge(t[s]);else{var g=i[s];g&&typeof g=="object"&&Za(g,t[s])}return i},Gt=function(i,t){if(t===void 0)return i;if(i.hasOwnProperty("name")&&Za(i,t[`#${i.name}`]),i.hasOwnProperty("$class"))for(var s=i.$class.split(" "),g=0,C=s.length;g<C;g++)Za(i,t[`.${s[g]}`]);return i.hasOwnProperty("$type")&&Za(i,t[i.$type]),i};const mp=["tint","alpha","visible","flipX","flipY"];var Hs=function(i,t){for(var s=0,g=mp.length;s<g;s++){var C=mp[s],M=t[C];M!==void 0&&(i[C]=M)}return t.cropResize&&!i.resize&&(i.resize=function(o,T){return i.setCrop(0,0,o,T),i}),i},Fx=function(i,t,s,g,C,M){t=Gt(t,g);var o=new M(i,0,0,t.key,t.frame);return t.width!==void 0&&o.setDisplayWidth(t.width),t.height!==void 0&&o.setDisplayHeight(t.height),Hs(o,t),i.add.existing(o),o};const h7=Phaser.GameObjects.Image;var o7=function(i,t,s,g,C){return Fx(i,t,s,g,C,h7)};const l7=Phaser.GameObjects.Sprite;var u7=function(i,t,s,g,C){return Fx(i,t,s,g,C,l7)};const d7=Phaser.GameObjects.Video;var f7=function(i,t,s,g,C){t=Gt(t,g);var M=new d7(i,0,0,t.key);return t.width!==void 0&&M.setDisplayWidth(t.width),t.height!==void 0&&M.setDisplayHeight(t.height),Hs(M,t),i.add.existing(M),M};const c7=Phaser.GameObjects.Text;var v7=function(i,t,s,g,C){t=Gt(t,g);var M=new c7(i,0,0,t.text,t);return Hs(M,t),i.add.existing(M),M},p7=function(i,t,s,g,C){t=Gt(t,g);var M=new Is(i,0,0,t.text,t);return Hs(M,t),i.add.existing(M),M},g7=function(i,t,s,g,C){t=Gt(t,g);var M=new Ii(i,t);return i.add.existing(M),M},m7=function(i,t,s,g,C){t=Gt(t,g);var M=new Ar(i,t);return Hs(M,t),i.add.existing(M),M},x7=function(i,t,s,g,C){t=Gt(t,g);var M=new hh(i,t);return i.add.existing(M),M},y7=function(i,t,s,g,C){t=Gt(t,g);var M=t.width||1,o=t.height||1,T=new Ys(i,0,0,M,o);return t.fill!==void 0&&T.fill(t.fill),Hs(T,t),i.add.existing(T),T},T7=function(i,t,s,g,C){t=Gt(t,g);var M=new Mu(i,0,0,t.key,t.frame,t);return t.width!==void 0&&M.setDisplayWidth(t.width),t.height!==void 0&&M.setDisplayHeight(t.height),Hs(M,t),i.add.existing(M),M},C7=function(i,t,s,g,C){var M=new Ih(i);return M},ut=function(i,t,s,g,C,M){var o=t[s];if(!!o){var T;return T=Gn(i,o,g,C,M),t[s]=T,T}},xp=function(i,t,s,g,C){if(t){Array.isArray(t)||(t=[t]);for(var M=0,o=t.length;M<o;M++){var T=t[M];T.$child||(T={$child:T},t[M]=T),ut(i,T,"$child",s,g,C)}}return t},Zr=function(i,t,s,g,C,M){t=Gt(t,g);var o=xp(i,t.background,s,g,C),T=xp(i,t.children,s,g,C),e=new M(i,t);if(i.add.existing(e),o)for(var d=0,x=o.length;d<x;d++){var u=o[d];e.addBackground(u.$child,u.padding)}if(T)for(var d=0,x=T.length;d<x;d++){var u=T[d];e.add(u.$child,u)}return e},S7=function(i,t,s,g,C){return Zr(i,t,s,g,C,Ct)},E7=function(i,t,s,g,C){return Zr(i,t,s,g,C,fs)},P7=function(i,t,s,g,C){var M=t.createCellContainerCallback;if(M){var o=M.$child;delete M.$child,t.createCellContainerCallback=function(T,e,d,x){var u=Gn(T,o,s,g,C);for(var l in M)x[l]=M[l];return u}}return Zr(i,t,s,g,C,zi)},M7=function(i,t,s,g,C){return Zr(i,t,s,g,C,De)},ts=function(i,t,s,g,C,M){var o=t[s];if(!!o){if(Array.isArray(o))for(var T=0,e=o.length;T<e;T++)Array.isArray(o[T])?ts(i,o,T,g,C,M):ut(i,o,T,g,C,M);else for(var d in o)ut(i,o,d,g,C,M);return o}},w7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ts(i,t,"buttons",s,g,C);var M=new te(i,t);return i.add.existing(M),M},A7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ts(i,t,"buttons",s,g,C);var M=new rs(i,t);return i.add.existing(M),M},R7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C);var M=t.buttons;if(M)for(var o=0,T=M.length;o<T;o++)ts(i,M,o,s,g,C);var e=t.createCellContainerCallback;if(e){var d=e.$child;delete e.$child,t.createCellContainerCallback=function(u,l,h,n){var r=Gn(u,d,s,g,C);for(var f in e)n[f]=e[f];return r}}var x=new Yr(i,t);return i.add.existing(x),x},Yd=function(i,t,s,g,C,M){t=Gt(t,g),ut(i,t,"background",s,g,C),ut(i,t,"icon",s,g,C),ut(i,t,"text",s,g,C),ut(i,t,"action",s,g,C);var o=new M(i,t);return i.add.existing(o),o},O7=function(i,t,s,g,C){return Yd(i,t,s,g,C,Ci)},L7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ut(i,t,"main",s,g,C),ut(i,t,"leftTop",s,g,C),ut(i,t,"centerTop",s,g,C),ut(i,t,"rightTop",s,g,C),ut(i,t,"leftCenter",s,g,C),ut(i,t,"center",s,g,C),ut(i,t,"rightCenter",s,g,C),ut(i,t,"leftBottom",s,g,C),ut(i,t,"centerBottom",s,g,C),ut(i,t,"rightBottom",s,g,C);var M=new Md(i,t);return i.add.existing(M),M},F7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ut(i,t,"toolbarBackground",s,g,C),ut(i,t,"leftToolbarBackground",s,g,C),ut(i,t,"choicesBackground",s,g,C),ut(i,t,"actionsBackground",s,g,C),ut(i,t,"title",s,g,C),ts(i,t,"toolbar",s,g,C),ts(i,t,"leftToolbar",s,g,C),ut(i,t,"content",s,g,C),ut(i,t,"description",s,g,C),ts(i,t,"choices",s,g,C),ts(i,t,"actions",s,g,C);var M=new Xr(i,t);return i.add.existing(M),M},b7=function(i,t,s,g,C){return Yd(i,t,s,g,C,Ed)},D7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ut(i,t,"track",s,g,C),ut(i,t,"indicator",s,g,C),ut(i,t,"thumb",s,g,C);var M=new ks(i,t);return i.add.existing(M),M},Xd=function(i,t,s,g,C){return t&&(ut(i,t,"background",s,g,C),ut(i,t,"track",s,g,C),ut(i,t,"indicator",s,g,C),ut(i,t,"thumb",s,g,C)),t},I7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ut(i,t,"icon",s,g,C),Xd(i,t.slider,s,g,C),ut(i,t,"text",s,g,C);var M=new Pd(i,t);return i.add.existing(M),M},B7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),Xd(i,t.slider,s,g,C);var M=t.buttons;M&&(ut(i,M,"top",s,g,C),ut(i,M,"bottom",s,g,C),ut(i,M,"left",s,g,C),ut(i,M,"right",s,g,C));var o=new Vh(i,t);return i.add.existing(o),o},G7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ut(i,t,"text",s,g,C),Xd(i,t.slider,s,g,C),ut(i,t,"header",s,g,C),ut(i,t,"footer",s,g,C);var M=new Xn(i,t);return i.add.existing(M),M},N7=function(i,t,s,g,C){return Zr(i,t,s,g,C,$r)},z7=function(i,t,s,g,C){return Yd(i,t,s,g,C,Ad)},V7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ut(i,t,"text",s,g,C);var M=new Lh(i,t);return i.add.existing(M),M},U7=function(i,t,s,g,C){t=Gt(t,g),ut(i,t,"background",s,g,C),ut(i,t,"content",s,g,C),ut(i,t,"leftSide",s,g,C),ut(i,t,"rightSide",s,g,C),ut(i,t,"header",s,g,C),ut(i,t,"footer",s,g,C);var M=new $h(i,t);return i.add.existing(M),M},Y7=function(i,t,s,g,C){t=Gt(t,g);var M=t.background;delete t.background,M&&(t.createBackgroundCallback=function(T){var e=T.scene,d=Gn(e,ge(M),s,g,C);return d}),t.createButtonCallback=function(T,e,d){var x=T.scene,u=T.$next;delete T.scene,delete T.$next;var l=Gn(x,ge(T),s,g,C);return T.scene=x,T.$next=u,l},t.childrenKey="$next";var o=new Kh(i,t);return i.add.existing(o),o},X7={Image:o7,Sprite:u7,Video:f7,Text:v7,BBCodeText:p7,RoundRectangle:g7,Ninepatch:m7,Ninepatch2:x7,Canvas:y7,CircleMaskImage:T7,Space:C7,Sizer:S7,FixWidthSizer:E7,GridSizer:P7,OverlapSizer:M7,Buttons:w7,FixWidthButtons:A7,GridButtons:R7,Label:O7,BadgeLabel:L7,Dialog:F7,TextBox:b7,Slider:D7,NumberBar:I7,ScrollBar:B7,TextArea:G7,Pages:N7,Toast:z7,Knob:V7,HolyGrail:U7,Menu:Y7},Gn=function(i,t,s,g,C){var M=a7(t,g);if(!M){console.warn(`rexUI.Make: Can't get type name in ${JSON.stringify(t)}`);return}var o;if(C&&(o=C[M]),o||(o=X7[M]),!o){console.warn(`rexUI.Make: Can't create ${M} game object.`);return}var T=o(i,t,s,g,C);return t.name&&T.setName(t.name),T},W7=function(i,t,s,g,C){if(t=pr(t),Array.isArray(t))t=t[t.length-1];else if(t.$root){var M=t;if(t=t.$root,delete M.$root,g===void 0)g=M;else for(var o in M)g[o]||(g[o]=M[o])}g=pr(g);var T=Gn(i,t,s,g,C);return T};const yp=Phaser.Utils.Objects.IsPlainObject;class bx{constructor(t,s,g){this.setScene(t),this.setStyles(s),this.setBuilders(g)}setScene(t){return this.scene=t,this}setStyles(t){return this.styles=pr(t),this}addStyle(t,s){if(this.styles===void 0&&(this.styles={}),typeof t=="string"&&s===void 0&&(t=pr(t)),yp(t)){var g=t;for(t in g)this.styles[t]=g[t]}else this.styles[t]=pr(s);return this}clearStyles(){return this.setStyles(),this}setBuilders(t){return this.customBuilders=t,this}addBuilder(t,s){if(this.customBuilders===void 0&&(this.customBuilders={}),yp(t)){var g=t;for(t in g)this.customBuilders[t]=g[t]}else this.customBuilders[t]=s;return this}clearBuilder(){return this.setBuilders(),this}make(t,s){return W7(this.scene,t,s,this.styles,this.customBuilders)}}st.register("maker",function(i,t){return new bx(this.scene,i,t)});it(window,"RexPlugins.UI.Maker",bx);st.register("click",function(i,t){return new us(i,t)});it(window,"RexPlugins.UI.Click",us);st.register("clickOutside",function(i,t){return new qu(i,t)});it(window,"RexPlugins.UI.ClickOutside",qu);st.register("inTouching",function(i,t){return new In(i,t)});it(window,"RexPlugins.UI.InTouching",In);st.register("tap",function(i,t){return ds(i)||(t=i,i=this.scene),new wh(i,t)});it(window,"RexPlugins.UI.Tap",wh);st.register("press",function(i,t){return ds(i)||(t=i,i=this.scene),new Ah(i,t)});it(window,"RexPlugins.UI.Press",Ah);st.register("swipe",function(i,t){return ds(i)||(t=i,i=this.scene),new Ur(i,t)});it(window,"RexPlugins.UI.Swipe",Ur);st.register("pan",function(i,t){return ds(i)||(t=i,i=this.scene),new x0(i,t)});it(window,"RexPlugins.UI.Pan",x0);var Dx=function(i){for(var t=i.scene.input,s=t.manager,g=s.pointersTotal,C=s.pointers,M,o=0;o<g;o++)if(M=C[o],!(!M.primaryDown||t.getDragState(M)!==0||!xu(i,M)))return t.setDragState(M,1),t._drag[M.id]=[i],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(M,3),t.processDragStartList(M)):t.setDragState(M,2),!0;return!1};const Va=Phaser.Utils.Objects.GetValue,Tp=Phaser.Math.Distance.Between,Cp=Phaser.Math.RotateAroundDistance;class Ji extends ee{constructor(t,s){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(Va(s,"inputConfig",void 0)),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(Va(t,"enable",!0)),this.setAxisMode(Va(t,"axis",0)),this.setAxisRotation(Va(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=k7[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return Dx(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,s,g){this.isDragging||(this.pointer=t)}onDrag(t,s,g){if(this.pointer===t){var C=this.parent;if(this.axisMode===0)C.x=s,C.y=g;else if(this.axisRotation===0)this.axisMode===1?C.x=s:this.axisMode===2&&(C.y=g);else{var M,o={x:s,y:g};M=Tp(o.x,o.y,C.x,C.y),o=Cp(o,C.x,C.y,-this.axisRotation,M),this.axisMode===1?o.y=C.y:this.axisMode===2&&(o.x=C.x),M=Tp(o.x,o.y,C.x,C.y),o=Cp(o,C.x,C.y,this.axisRotation,M),C.x=o.x,C.y=o.y}}}onDragEnd(t,s,g,C){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const k7={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};st.register("drag",function(i,t){return new Ji(i,t)});it(window,"RexPlugins.UI.Drag",Ji);st.register("pinch",function(i){return new y0(this.scene,i)});it(window,"RexPlugins.UI.Pinch",y0);st.register("rotate",function(i){return new td(this.scene,i)});it(window,"RexPlugins.UI.Rotate",td);const H7=Phaser.Utils.Objects.IsPlainObject,Sp=Phaser.Utils.Objects.GetValue;var Ep=function(i,t,s){var g;if(i===void 0)i=s.texture.key,t=s.frame.name;else if(H7(i)){var C=i;i=Sp(C,"key",s.texture.key),t=Sp(C,"frame",s.frame.name)}else typeof i=="string"||(g=i);return g===void 0&&(g=function(M){M.setTexture(i,t)}),g};const cr=Phaser.Utils.Objects.GetValue,$7=Phaser.Utils.Objects.GetAdvancedValue,K7=Phaser.Math.Linear;class Ix extends zs{constructor(t,s){super(t,s),this.resetFromJSON(s),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration($7(t,"duration",500)),this.setEase(cr(t,"ease","Sine")),this.setOrientation(cr(t,"orientation",0)),this.setFrontFace(cr(t,"front",void 0)),this.setBackFace(cr(t,"back",void 0)),this.setFace(cr(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=Z7[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=J7[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,s){return this.frontFaceCallback=Ep(t,s,this.parent),this}setBackFace(t,s){return this.backFaceCallback=Ep(t,s,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,s){s.justRestart&&this.toggleFace();var g=s.t;s.isOddIteration&&(g=1-g),g=this.easeFn(g);var C=K7(this.scale0,0,g);this.orientation===0?t.scaleX=C:t.scaleY=C}}const Z7={x:0,horizontal:0,y:1,vertical:1},J7={front:0,back:1};st.register("flip",function(i,t){return new Ix(i,t)});it(window,"RexPlugins.UI.Flip",Ix);st.register("shake",function(i,t){return new $u(i,t)});it(window,"RexPlugins.UI.Shake",$u);st.register("touchEventStop",function(i,t){return new Eh(i,t)});it(window,"RexPlugins.UI.TouchEventStop",Eh);st.register("perspective",function(i,t){return new Em(i,t)});it(window,"RexPlugins.UI.Perspective",Em);const Bx=Phaser.Math.RotateAround;var Ol=function(i,t,s){var g=i.width/2,C=i.height/2;return le.x=t-g,le.y=s-C,Bx(le,0,0,i.rotation),le.x*=i.scaleX,le.y*=i.scaleY,le.x+=i.x,le.y+=i.y,le},j7=function(i,t,s){var g=i.width/2,C=i.height/2;return le.x=t-i.x,le.y=s-i.y,le.x/=i.scaleX,le.y/=i.scaleY,Bx(le,0,0,-i.rotation),le.x+=g,le.y+=C,le},le={x:0,y:0};class Q7{constructor(t,s){this.parent=t,this.vertex=s,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,s){var g=this.parent,C=g.height,M=g.frame.cutWidth/C/2,o=g.frame.cutHeight/C/2,T=t/C-M,e=s/C-o,d=this.vertex;return d.x=T,d.y=-e,g.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,s){return this._localXOrigin=t,this._localYOrigin=s,this._localX=t,this._localY=s,this}setLocalXY(t,s,g){return this._localX===t&&this._localY===s?this:(this._localX=t,this._localY=s,g||this.updateVertexPosition(t,s),this)}setWorldXY(t,s){if(this._worldX===t&&this._worldY===s)return this;var g=j7(this.parent,t,s);return this.setLocalXY(g.x,g.y),this}setPosition(t,s){return this.setWorldXY(t,s),this}getWorldXY(){return Ol(this.parent,this._localX,this._localY)}get x(){var t=Ol(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Ol(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const q7=Phaser.Geom.Mesh.Vertex,_7=Phaser.Geom.Mesh.Face;var tG=function(i){for(var t=i.isNinePointMode,s=t?9:4,g=i.vertices,C=i.faces,M=i.controlPoints,o=0;o<s;o++){var T=new q7;g.push(T),M.push(new Q7(i,T))}var e;t?e=sG:i.fourPointsModeRTL?e=iG:e=eG;for(var o=0,d=e.length;o<d;o+=3){var x=g[e[o+0]],u=g[e[o+1]],l=g[e[o+2]];C.push(new _7(x,u,l))}t?(i.topLeft=M[0],i.topCenter=M[1],i.topRight=M[2],i.centerLeft=M[3],i.center=M[4],i.centerRight=M[5],i.bottomLeft=M[6],i.bottomCenter=M[7],i.bottomRight=M[8]):(i.topLeft=M[0],i.topRight=M[1],i.bottomLeft=M[2],i.bottomRight=M[3])};const eG=[0,2,3,0,3,1],iG=[1,3,2,1,2,0],sG=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var nG=function(i){var t,s=0,g=i.height,C=0,M=i.width;if(i.isNinePointMode){var o=(C+M)/2,T=(s+g)/2;t=[C,s,o,s,M,s,C,T,o,T,M,T,C,g,o,g,M,g]}else t=[C,s,M,s,C,g,M,g];return t};const rG=Phaser.GameObjects.Mesh,aG=Phaser.Utils.Objects.IsPlainObject,yn=Phaser.Utils.Objects.GetValue;class hG extends rG{constructor(t,s,g,C,M,o){aG(s)&&(o=s,s=yn(o,"x",0),g=yn(o,"y",0),C=yn(o,"key",null),M=yn(o,"frame",null)),super(t,s,g,C,M),this.type="rexQuadImage",this.isNinePointMode=yn(o,"ninePointMode",!1),this.fourPointsModeRTL=yn(o,"rtl",!1),this.controlPoints=[],tG(this),this.hideCCW=!1,this.syncSize()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){super.destroy(t);for(var s=0,g=this.controlPoints.length;s<g;s++)this.controlPoints[s].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var t=nG(this),s=this.width,g=this.height,C=this.frame.cutWidth/g/2,M=this.frame.cutHeight/g/2,o=this.frame.u0,T=this.frame.u1,e=this.frame.v0,d=this.frame.v1,x=T-o,u=d-e,l=this.controlPoints,h=0,n=t.length;h<n;h+=2){var r=t[h+0],f=t[h+1],a=h/2,c=r/g-C,p=f/g-M,v=o+x*(r/s),m=e+u*(f/g);this.vertices[a].set(c,-p,0).setUVs(v,m),l[a].resetLocalXY(r,f)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}}Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Pp=function(i,t,s){t===void 0&&(t=0),s===void 0&&(s=0);for(var g=i.width,C=i.height,M=g*.5,o=C*.5,T=Math.tan(t)*o,e=Math.tan(s)*M,d=i.controlPoints,x=0,u=d.length;x<u;x++){var l=d[x],h=l.localXOrigin,n=l.localYOrigin;l.localX=h+(n>o?T:-T),l.localY=n+(h>M?e:-e)}};const oG=Phaser.Utils.Objects.IsPlainObject,Ua=Phaser.Utils.Objects.GetValue,Mp=Phaser.Math.DegToRad,wp=Phaser.Math.RadToDeg;class lG extends hG{constructor(t,s,g,C,M){if(oG(s)){var o=s;s=Ua(o,"x",0),g=Ua(o,"y",0),C=Ua(o,"key",null),M=Ua(o,"frame",null)}super(t,s,g,C,M),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,Pp(this,this._skewX,this._skewY)}get skewXDeg(){return wp(this._skewX)}set skewXDeg(t){this.skewX=Mp(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,Pp(this,this._skewX,this._skewY)}get skewYDeg(){return wp(this._skewY)}set skewYDeg(t){this.skewY=Mp(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,s){return s===void 0&&(s=t),this.skewX=t,this.skewY=s,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,s){return s===void 0&&(s=t),this.skewXDeg=t,this.skewYDeg=s,this}}const uG=Phaser.Utils.Objects.IsPlainObject,Ya=Phaser.Utils.Objects.GetValue;class dG extends lG{constructor(t,s,g,C,M){if(uG(s)){var o=s;s=Ya(o,"x",0),g=Ya(o,"y",0),C=Ya(o,"width",32),M=Ya(o,"height",32)}var T=ym(t,C,M);super(t,s,g,T,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}}class Gx extends Sm(dG){get skewState(){return this.isRunning}}st.register("skew",function(i,t){return new Gx(i,t)});it(window,"RexPlugins.UI.Skew",Gx);st.register("anchor",function(i,t){return new Wu(i,t)});it(window,"RexPlugins.UI.Anchor",Wu);st.register("textTyping",function(i,t){return new Sd(i,t)});it(window,"RexPlugins.UI.TextTyping",Sd);st.register("textPage",function(i,t){return new Zh(i,t)});it(window,"RexPlugins.UI.TextPage",Zh);var Mn=void 0,fG=function(i){i!==Mn&&(Mn!==void 0&&Mn.close(),Mn=i)},cG=function(i){i===Mn&&(Mn=void 0)};const Ri=Phaser.Utils.Objects.GetValue,vG=Phaser.Utils.Objects.Clone;var pG=function(i,t){t===void 0&&(t={}),t=vG(t);var s=i.scene,g=i.style,C=Ri(t,"backgroundColor",g.backgroundColor);C===null&&(C="transparent"),t.text=Ri(t,"text",i.text),t.fontFamily=Ri(t,"fontFamily",g.fontFamily),t.fontSize=Ri(t,"fontSize",g.fontSize),t.color=Ri(t,"color",g.color),t.backgroundColor=C,t.direction=Ri(t,"rtl",g.rtl)?"rtl":"ltr",t.align=Ri(t,"align",gG(g)),t.direction==="rtl"&&ld(i)&&(t.align="right");var M=new bh(s,i.x,i.y,Ri(t,"width",i.width),Ri(t,"height",i.height),t);M.setOrigin(i.originX,i.originY).setScrollFactor(i.scrollFactorX,i.scrollFactorY);var o=i.parentContainer;return o?o.add(M):s.add.existing(M),M},gG=function(i){return i.hasOwnProperty("align")?i.align:i.hasOwnProperty("halign")?i.halign:"left"};const Xa=Phaser.Utils.Objects.GetValue,mG=Phaser.Utils.Objects.Merge;var xG=function(i,t){i===void 0&&(i={}),i=mG(i,this.openConfig),fG(this),ns(i)&&(t=i,i=void 0),t===void 0&&(t=Xa(i,"onClose",void 0));var s=Xa(i,"onOpen",void 0),g=Xa(i,"onTextChanged",void 0);return this.inputText=pG(this.parent,i).on("textchange",function(C){var M=C.text;g?g(this.parent,M):this.parent.text=M},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,Xa(i,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),s&&s(this.parent),this.emit("open",this.parent)},[],this),this},yG=function(){return cG(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},TG={open:xG,close:yG};const CG=Phaser.Utils.Objects.GetValue;class _h extends ee{constructor(t,s){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(s);var g=CG(s,"clickEnable",!0);g&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(_h.prototype,TG);var SG=function(i,t,s){return i._edit||(i._edit=new _h(i,{clickEnable:!1})),i._edit.open(t,s),i._edit};st.register("textEdit",function(i,t){return new _h(i,t)});it(window,"RexPlugins.UI.TextEdit",_h);const Ll=65535;var iu=function(i,t,s){if(t==null)return i;if(t===0)return Fl(i,0,s),i;var g=i.text.length;if(g===0)return Fl(i,t,s),i;for(var C=Math.floor(t*1.5/g),M={},o=Rp(i,C,t,s,M),T=0;T<=Ll&&o!==0;T++){if(C+=o,C<0){C=0;break}o=Rp(i,C,t,s,M)}return T===Ll&&console.warn(`SetFontSizeToFitWidth: Test count exceeds ${Ll}`),i.setFontSize(C),Fl(i,t,s),i},Ap=function(i,t,s){return s[t]===void 0&&(i.setFontSize(t),s[t]={width:i.width,height:i.height}),s[t]},Rp=function(i,t,s,g,C){var M=Ap(i,t,C),o=Ap(i,t+1,C);if(g!==void 0){if(M.height<=g&&o.height>g)return 0;if(M.height>g)return-1}return M.width<=s&&o.width>s?0:M.width>s?-1:Math.floor(s-M.width)},Fl=function(i,t,s){var g=i.style;g.fixedWidth=t,g.parent.width=t,s!==void 0&&(g.fixedHeight=s,g.parent.height=s),g.update(!1)},EG=function(i,t){return t===void 0&&(t=0),i._minWidth=t,i.runWidthWrap=function(s,g){return iu(i,s,g),i},i.resize=function(s,g){return i.width===s&&i.height===g||i.setFixedSize(s,g),i},i};class Nx extends Phaser.Plugins.ScenePlugin{constructor(t,s){super(t,s),this.add=new st(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,s,g,C){return t.visible?Ph(t,s,g,C):!1}get viewport(){return Vn(this.scene,this.scene.cameras.main,!0)}}var PG={getParentSizer:ke,getTopmostSizer:i0,hide:qi,show:Qi,isShown:Ku,edit:SG,wrapExpandText:H0,fontSizeExpandText:EG,fontSizeResize:iu,setFontSizeToFitWidth:iu,waitEvent:vh,waitComplete:ae,delayPromise:L0,setChildrenInteractive:ed,fadeIn:Th,fadeOutDestroy:Ch,easeMoveTo:u0,easeMoveFrom:d0,modal:ju,modalPromise:SO,modalClose:p0,requestDrag:Dx,openFileChooser:OF};Object.assign(Nx.prototype,PG);const MG=5125166,Le=8085079,Op=2493956;class wG extends ze.Scene{constructor(){super({key:"PageScene",active:!1});ft(this,"rexUI");ft(this,"tabPages");ft(this,"editMenuSizer");ft(this,"buyMenuSizer");ft(this,"upgradeMenuSizer");ft(this,"numberOfUnits",0);ft(this,"maxNumOfUnits",5);ft(this,"placedTowers")}init(){this.numberOfUnits=0}preload(){this.load.image("buffs",Fp),this.load.image("cowboys",bp),this.load.image("bigms",Dp),this.load.image("bulldogs",Ip),this.load.image("dogurais",Bp),this.load.image("reapers",Gp)}create(){this.tabPages=this.rexUI.add.tabPages({x:1028,y:359,width:500,height:720,background:this.rexUI.add.roundRectangle(0,0,0,0,0,Op),tabs:{space:{item:3}},align:{tabs:"center"},space:{left:5,right:5,top:5,bottom:5,item:10}}).setMinWidth(520),this.CreateSizers(),this.tabPages.addPage({key:"Buy",tab:this.CreateLabel(this,"Buy"),page:this.CreateScrollablePanel(this,this.buyMenuSizer)}).addPage({key:"Edit",tab:this.CreateLabel(this,"Edit"),page:this.CreateScrollablePanel(this,this.editMenuSizer)}).addPage({key:"Upgrade",tab:this.CreateLabel(this,"Upgrade"),page:this.CreateScrollablePanel(this,this.upgradeMenuSizer)}).layout().swapFirstPage(),this.AddBuyMenuChild(),this.AddUpgradeMenuChild(),this.placedTowers=this.physics.add.group({runChildUpdate:!0}),Et.on("tower-placed-successfully",(s,g)=>{console.log("in event for edit menu"),console.log(s),this.AddEditMenuChild(this,s,g),this.placedTowers.add(s)})}update(){}AddBuyMenuChild(){var s=this.add.text(0,0,"cost: 150"),g=this.add.text(0,0,"cost: 175"),C=this.add.text(0,0,"cost: 225"),M=this.add.text(0,0,"cost: 275"),o=this.add.text(0,0,"cost: 350"),T=this.add.text(0,0,"cost: 375"),e=this.add.image(0,0,"cowboys").setScale(.1),d=this.add.image(0,0,"buffs").setScale(.1),x=this.add.image(0,0,"bigms").setScale(.1),u=this.add.image(0,0,"bulldogs").setScale(.1),l=this.add.image(0,0,"reapers").setScale(.1),h=this.add.image(0,0,"dogurais").setScale(.1),n=this.add.image(e.x,e.y,"cowboys").setScale(.1).setVisible(!1),r=this.add.image(d.x,d.y,"buffs").setScale(.1).setVisible(!1),f=this.add.image(x.x,x.y,"bigms").setScale(.1).setVisible(!1),a=this.add.image(u.x,u.y,"bulldogs").setScale(.1).setVisible(!1),c=this.add.image(l.x,l.y,"reapers").setScale(.1).setVisible(!1),p=this.add.image(h.x,h.y,"dogurais").setScale(.1).setVisible(!1);new Ji(e),new Ji(d),new Ji(x),new Ji(u),new Ji(l),new Ji(h),e.setInteractive(),d.setInteractive(),x.setInteractive(),u.setInteractive(),l.setInteractive(),h.setInteractive();var v=this.add.circle(0,0,200,16711680,.2).setVisible(!1).setDepth(-1),m=this.add.circle(0,0,150,16711680,.2).setVisible(!1).setDepth(-1);e.on("dragstart",H=>{v.x=H.x,v.y=H.y,v.setVisible(!0),n.x=e.x,n.y=e.y,n.setVisible(!0),e.setScale(.04).setDepth(1),e.x=H.x,e.y=H.y}),e.on("drag",H=>{v.x=H.x,v.y=H.y,Et.emit("canplace",H),Et.on("returnplace",K=>{K?v.setFillStyle(14474460,.2):v.setFillStyle(16711680,.2)}),e.x=H.x,e.y=H.y}),e.on("dragend",()=>{v.setVisible(!1),e.setScale(.1).setDepth(0),e.x=n.x,e.y=n.y,n.setVisible(!1),Et.emit("tower-place?","cowboys","bigbill")}),d.on("dragstart",H=>{m.x=H.x,m.y=H.y,m.setVisible(!0),r.x=d.x,r.y=d.y,r.setVisible(!0),d.setScale(.04).setDepth(1),d.x=H.x,d.y=H.y}),d.on("drag",H=>{m.x=H.x,m.y=H.y,Et.emit("canplace",H),Et.on("returnplace",K=>{K?m.setFillStyle(14474460,.2):m.setFillStyle(16711680,.2)}),d.x=H.x,d.y=H.y}),d.on("dragend",()=>{m.setVisible(!1),d.setScale(.1).setDepth(0),d.x=r.x,d.y=r.y,r.setVisible(!1),Et.emit("tower-place?","buffs","fists")}),x.on("dragstart",H=>{v.x=H.x,v.y=H.y,v.setVisible(!0),f.x=x.x,f.y=x.y,f.setVisible(!0),x.setScale(.04),x.x=x.x,x.y=x.y}),x.on("drag",H=>{v.x=H.x,v.y=H.y,Et.emit("canplace",H),Et.on("returnplace",K=>{K?v.setFillStyle(14474460,.2):v.setFillStyle(16711680,.2)}),x.x=H.x,x.y=H.y}),x.on("dragend",()=>{v.setVisible(!1),x.setScale(.1),x.x=f.x,x.y=f.y,f.setVisible(!1);var H="bigms";Et.emit("tower-place?",H,"rootbeers")}),u.on("dragstart",H=>{m.x=H.x,m.y=H.y,m.setVisible(!0),a.x=u.x,a.y=u.y,a.setVisible(!0),u.setScale(.04),u.x=u.x,u.y=u.y}),u.on("drag",H=>{m.x=H.x,m.y=H.y,Et.emit("canplace",H),Et.on("returnplace",K=>{K?m.setFillStyle(14474460,.2):m.setFillStyle(16711680,.2)}),u.x=H.x,u.y=H.y}),u.on("dragend",()=>{m.setVisible(!1),u.setScale(.1),u.x=a.x,u.y=a.y,a.setVisible(!1);var H="bulldogs";Et.emit("tower-place?",H,"chomp")}),l.on("dragstart",H=>{m.x=H.x,m.y=H.y,m.setVisible(!0),c.x=l.x,c.y=l.y,c.setVisible(!0),l.setScale(.04).setDepth(1),l.x=H.x,l.y=H.y}),l.on("drag",H=>{m.x=H.x,m.y=H.y,Et.emit("canplace",H),Et.on("returnplace",K=>{K?m.setFillStyle(14474460,.2):m.setFillStyle(16711680,.2)}),l.x=H.x,l.y=H.y}),l.on("dragend",()=>{m.setVisible(!1),l.setScale(.1).setDepth(0),l.x=c.x,l.y=c.y,c.setVisible(!1),Et.emit("tower-place?","reapers","slash")}),h.on("dragstart",H=>{m.x=H.x,m.y=H.y,m.setVisible(!0),p.x=h.x,p.y=h.y,p.setVisible(!0),h.setScale(.04).setDepth(1),h.x=H.x,h.y=H.y}),h.on("drag",H=>{m.x=H.x,m.y=H.y,Et.emit("canplace",H),Et.on("returnplace",K=>{K?m.setFillStyle(14474460,.2):m.setFillStyle(16711680,.2)}),h.x=H.x,h.y=H.y}),h.on("dragend",()=>{m.setVisible(!1),h.setScale(.1).setDepth(0),h.x=p.x,h.y=p.y,p.setVisible(!1),Et.emit("tower-place?","dogurais","slash")});var y=this.rexUI.add.sizer({width:200,orientation:"x"});y.add(this.CreateLabel(this,"Cowboy Cat:")),y.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"\u21BB",22).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(H){H.scaleYoyo(500,1.2),S.toggleFace()}));var E=this.rexUI.add.sizer({width:200,orientation:"y"}).setInnerPadding(8);E.add(s).layout(),E.add(e).layout();var P=this.rexUI.add.sizer({width:200,orientation:"y"});P.add(this.add.text(0,0,`
Attack Speed: 5/10

Attack Damage: 5/10

Range: 6/10`).setFontSize(17));var S=this.rexUI.add.perspectiveCard({front:E,back:P,orientation:0,snapshotPadding:3}).addBackground(this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(2,Le)),w=this.rexUI.add.sizer({width:200,orientation:"x"}).setMinWidth(245);w.add(this.CreateLabel(this,"Buff Doge:")),w.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"\u21BB",22).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(H){H.scaleYoyo(500,1.2),O.toggleFace()}),{align:"right"});var A=this.rexUI.add.sizer({width:200,orientation:"y"}).setInnerPadding(8);A.add(g).layout(),A.add(d).layout();var R=this.rexUI.add.sizer({width:200,orientation:"y"});R.add(this.add.text(0,0,`
Attack Speed: 5/10 

Attack Damage: 7/10

Range: 3/10`).setFontSize(17));var O=this.rexUI.add.perspectiveCard({front:A,back:R,orientation:0,snapshotPadding:3}).addBackground(this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(2,Le)),F=this.rexUI.add.sizer({width:200,orientation:"x"});F.add(this.CreateLabel(this,"RootBeer Cat:")),F.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"\u21BB",22).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(H){H.scaleYoyo(500,1.3),I.toggleFace()}));var L=this.rexUI.add.sizer({width:200,orientation:"y"}).setInnerPadding(8);L.add(C).layout(),L.add(x).layout();var D=this.rexUI.add.sizer({width:200,orientation:"y"});D.add(this.add.text(0,0,`
Attack Speed: 3/10

Attack Damage: 8/10

Range: 6/10`).setFontSize(17));var I=this.rexUI.add.perspectiveCard({front:L,back:D,orientation:0,snapshotPadding:3}).addBackground(this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(2,Le)),B=this.rexUI.add.sizer({width:200,orientation:"x"});B.add(this.CreateLabel(this,"Bulldog Spike:")),B.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"\u21BB",22).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(H){H.scaleYoyo(500,1.4),W.toggleFace()}));var V=this.rexUI.add.sizer({width:200,orientation:"y"}).setInnerPadding(8);V.add(M).layout(),V.add(u).layout();var Y=this.rexUI.add.sizer({width:200,orientation:"y"});Y.add(this.add.text(0,0,`
Attack Speed: 7/10

Attack Damage: 8/10

Range: 3/10`).setFontSize(17));var W=this.rexUI.add.perspectiveCard({front:V,back:Y,orientation:0,snapshotPadding:3}).addBackground(this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(2,Le)),$=this.rexUI.add.sizer({width:200,orientation:"x"});$.add(this.CreateLabel(this,"Grim Reaper:")),$.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"\u21BB",22).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(H){H.scaleYoyo(500,1.5),b.toggleFace()}));var N=this.rexUI.add.sizer({width:200,orientation:"y"}).setInnerPadding(8);N.add(o).layout(),N.add(l).layout();var U=this.rexUI.add.sizer({width:200,orientation:"y"});U.add(this.add.text(0,0,`
Attack Speed: 8/10

Attack Damage: 8/10

Range: 4/10`).setFontSize(17));var b=this.rexUI.add.perspectiveCard({front:N,back:U,orientation:0,snapshotPadding:3}).addBackground(this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(2,Le)),G=this.rexUI.add.sizer({width:200,orientation:"x"});G.add(this.CreateLabel(this,"dogurais:")),G.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"\u21BB",22).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(H){H.scaleYoyo(500,1.6),k.toggleFace()}));var z=this.rexUI.add.sizer({width:200,orientation:"y"}).setInnerPadding(8);z.add(T).layout(),z.add(h).layout();var X=this.rexUI.add.sizer({width:200,orientation:"y"});X.add(this.add.text(0,0,`
Attack Speed: 8/10

Attack Damage: 8/10

Range: 4/10`).setFontSize(17));var k=this.rexUI.add.perspectiveCard({front:z,back:X,orientation:0,snapshotPadding:3}).addBackground(this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(2,Le));this.buyMenuSizer.add(y,0,0,"center",0,!0).layout(),this.buyMenuSizer.add(S,0,1,"center",0,!0).layout(),this.buyMenuSizer.add(w,1,0,"center",0,!0).layout(),this.buyMenuSizer.add(O,1,1,"center",0,!0).layout(),this.buyMenuSizer.add(F,0,2,"center",0,!0).layout(),this.buyMenuSizer.add(I,0,3,"center",0,!0).layout(),this.buyMenuSizer.add(B,1,2,"center",0,!0).layout(),this.buyMenuSizer.add(W,1,3,"center",0,!0).layout(),this.buyMenuSizer.add($,0,4,"center",0,!0).layout(),this.buyMenuSizer.add(b,0,5,"center",0,!0).layout(),this.buyMenuSizer.add(G,1,4,"center",0,!0).layout(),this.buyMenuSizer.add(k,1,5,"center",0,!0).layout(),this.buyMenuSizer.layout()}AddUpgradeMenuChild(){var s=this.CreateLabel(this,"Fire Class:"),g=this.rexUI.add.sizer({width:200,orientation:"x"}).layout(),C=this.add.text(0,0,"BURN DURATION: 2 sec").setFontSize(20);g.add(C),g.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"+",14).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(v){v.scaleYoyo(500,1.2)})).layout,g.add(this.add.text(0,0,"20 gp").setFontSize(20));var M=this.rexUI.add.sizer({width:200,orientation:"x"}).layout(),o=this.add.text(0,0,"BURN DAMAGE: 10 dmg/sec").setFontSize(20);M.add(o),M.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"+",14).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(v){v.scaleYoyo(500,1.2)})).layout,M.add(this.add.text(0,0,"20 gp").setFontSize(20));var T=this.CreateLabel(this,"Ice Class:"),e=this.rexUI.add.sizer({width:200,orientation:"x"}).layout(),d=this.add.text(0,0,"FROZEN DURATION: 2 sec").setFontSize(20);e.add(d),e.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"+",14).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(v){v.scaleYoyo(500,1.2)})).layout,e.add(this.add.text(0,0,"20 gp").setFontSize(20));var x=this.CreateLabel(this,"Lightning Class:"),u=this.rexUI.add.sizer({width:200,orientation:"x"}).layout(),l=this.add.text(0,0,"ADDITIONAL TARGETS: 1").setFontSize(20);u.add(l),u.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"+",14).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(v){v.scaleYoyo(500,1.2)})).layout,u.add(this.add.text(0,0,"20 gp").setFontSize(20));var h=this.rexUI.add.sizer({width:200,orientation:"x"}).layout(),n=this.add.text(0,0,"SHOCK DAMAGE: 10 dmg").setFontSize(20);h.add(n),h.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"+",14).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(v){v.scaleYoyo(500,1.2)})).layout,h.add(this.add.text(0,0,"20 gp").setFontSize(20));var r=this.CreateLabel(this,"Acid Class:"),f=this.rexUI.add.sizer({width:200,orientation:"x"}).layout(),a=this.add.text(0,0,"PUDDLE DURATION: 2 sec").setFontSize(20);f.add(a),f.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"+",14).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(v){v.scaleYoyo(500,1.2)})).layout,f.add(this.add.text(0,0,"20 gp").setFontSize(20));var c=this.rexUI.add.sizer({width:200,orientation:"x"}).layout(),p=this.add.text(0,0,"ACID DAMAGE: 10 dmg/sec").setFontSize(20);c.add(p),c.add(this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"+",14).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout().on("button.click",function(v){v.scaleYoyo(500,1.2)})).layout,c.add(this.add.text(0,0,"20 gp").setFontSize(20)),this.upgradeMenuSizer.add(s,{align:"left"}).layout(),this.upgradeMenuSizer.add(g,{align:"left"}).layout(),this.upgradeMenuSizer.add(M,{align:"left"}).layout(),this.upgradeMenuSizer.add(T,{align:"left"}).layout(),this.upgradeMenuSizer.add(e,{align:"left"}).layout(),this.upgradeMenuSizer.add(x,{align:"left"}).layout(),this.upgradeMenuSizer.add(u,{align:"left"}).layout(),this.upgradeMenuSizer.add(h,{align:"left"}).layout(),this.upgradeMenuSizer.add(r,{align:"left"}).layout(),this.upgradeMenuSizer.add(f,{align:"left"}).layout(),this.upgradeMenuSizer.add(c,{align:"left"}).layout()}AddEditMenuChild(s,g,C){var M,o,T,e;this.numberOfUnits++,T=this.numberOfUnits,e=C;var d=this.CreateLabel(this,"Unit #"+T+": ("+e+")");d.setMinWidth(420);var x=this.rexUI.add.sizer({orientation:"y",space:{item:10}}),u=this.add.text(0,0,"Name:").setFontSize(20),l=this.rexUI.add.label({orientation:"x",background:this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(3,Le),text:new Is(this,0,0,"",{fixedWidth:300,fixedHeight:18}),space:{top:5,bottom:5,left:5,right:5}}).setInteractive().on("pointerdown",function(){var m={onTextChanged:function(y,E){M=E,y.text=E,d.text="Unit #"+T+": "+M.substring(0,8)+" ("+e+")",g.name(y.text),d.layout(),v.layout()}};s.rexUI.edit(l.getElement("text"),m)}),h=this.add.text(0,0,"Horizontal Position:").setFontSize(20),n=this.rexUI.add.label({orientation:"x",background:this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(3,Le),text:new Is(this,0,0,"",{fixedWidth:300,fixedHeight:18}),space:{top:5,bottom:5,left:5,right:5,icon:10}}).setInteractive().setText(Math.ceil(g.x/64).toString()).on("pointerdown",function(){var m={onTextChanged:function(y,E){var P=Math.floor(E-1);P<12&&P>=0&&Et.emit("changeHorizontally",[g,P]),y.text=Math.ceil(g.x/64)}};s.rexUI.edit(n.getElement("text"),m)}),r=this.add.text(0,0,"Vertical Position:").setFontSize(20),f=this.rexUI.add.label({orientation:"x",background:this.rexUI.add.roundRectangle(0,0,10,10,10).setStrokeStyle(3,Le),text:new Is(this,0,0,"",{fixedWidth:300,fixedHeight:18}),space:{top:5,bottom:5,left:5,right:5,icon:10}}).setInteractive().setText(Math.ceil(g.y/64).toString()).on("pointerdown",function(){var m={onTextChanged:function(y,E){if(isNaN(E))E.substring(0,6)=="Above "||E.substring(0,6)=="Below "?y.text=E:y.text=Math.ceil(g.y/64);else{var P=Math.floor(E-1);P<8&&P>=0&&Et.emit("changeVertically",[g,P]),y.text=Math.ceil(g.y/64)}}};s.rexUI.edit(f.getElement("text"),m)}),a=this.add.text(0,0,"Class Type: (5 gp to Unlock)").setFontSize(20),c=this.rexUI.add.buttons({x:400,y:400,orientation:"x",buttons:[this.createButton(this,"Fire",20).setOrigin(.5,1),this.createButton(this,"Ice",20).setOrigin(.5,1),this.createButton(this,"Poison",20).setOrigin(.5,1),this.createButton(this,"Lightning",20).setOrigin(.5,1)],space:{left:10,right:10,top:10,bottom:10,item:6}}).setOrigin(.5,1).layout();c.on("button.click",function(m){m.scaleYoyo(500,1.2),o=m.text,a.text="Class: "+o,g.setClassTypes(o),console.log(o)}),x.add(u,{align:"left"}),x.add(l,{align:"left"}),x.add(h,{align:"left"}),x.add(n,{align:"left"}),x.add(r,{align:"left"}),x.add(f,{align:"left"}),x.add(a,{align:"left"}),x.add(c,{align:"left"});var p=this.rexUI.add.roundRectangle(0,0,0,0,0).setStrokeStyle(2,Le),v=this.rexUI.add.folder({background:p,title:d,child:x,expand:{title:!1,child:!0},space:{left:10,right:10,top:10,bottom:10,item:3}}).collapse(0);v.setMinWidth(430),this.editMenuSizer.add(v).layout(),this.tabPages.layout()}CreateLabel(s,g){return s.rexUI.add.label({width:40,height:40,background:s.rexUI.add.roundRectangle(0,0,0,0,5,Le),text:s.add.text(0,0,g,{fontSize:20}),space:{left:10,right:10,top:10,bottom:10}})}createButton(s,g,C){return s.rexUI.add.label({width:25,height:25,background:s.rexUI.add.roundRectangle(0,0,0,0,10,Le),text:s.add.text(0,0,g,{fontSize:C}),align:"center",space:{left:10,right:10}}).setInnerPadding(5)}CreateScrollablePanel(s,g){return s.rexUI.add.scrollablePanel({x:400,y:300,height:300,scrollMode:"y",background:this.rexUI.add.roundRectangle(0,0,2,2,10,MG),panel:{child:g,mask:{padding:1}},slider:{track:this.rexUI.add.roundRectangle(0,0,20,10,10,Op),thumb:this.rexUI.add.roundRectangle(0,0,0,0,13,Le)},scroller:{},mouseWheelScroller:{focus:!1,speed:2},space:{left:10,right:10,top:10,bottom:10,panel:10}}).layout()}CreateSizers(){this.editMenuSizer=this.rexUI.add.sizer({width:200,orientation:"y"}).layout(),this.buyMenuSizer=this.rexUI.add.gridSizer({column:2,row:10,columnProportions:1}).layout(),this.upgradeMenuSizer=this.rexUI.add.sizer({width:200,orientation:"y"}).layout()}}const AG={type:ze.AUTO,parent:"content",width:1280,height:720,dom:{createContainer:!0},plugins:{scene:[{key:"rexUI",plugin:Nx,mapping:"rexUI"}]},physics:{default:"arcade"},scene:[Yx,ny,wG,hy],scale:{mode:ze.Scale.FIT,autoCenter:ze.Scale.CENTER_BOTH}};new ze.Game(AG);
